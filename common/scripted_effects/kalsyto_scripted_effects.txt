kalsyto_revert_capital = {
	trigger_switch = {
		on_trigger = was_tag
		J01 = { set_capital = 5229 }
		J02 = { set_capital = 5226 }
		J03 = { set_capital = 5231 }
		J04 = { set_capital = 5234 }
		J05 = { set_capital = 5235 }
		J06 = { set_capital = 5237 }
		J07 = { set_capital = 5238 }
		J08 = { set_capital = 5246 }
		J09 = { set_capital = 5248 }
		J10 = { set_capital = 5253 }
		J11 = { set_capital = 5256 }
		J12 = { set_capital = 5257 }
		J13 = { set_capital = 5258 }
		J14 = { set_capital = 5259 }
		J15 = { set_capital = 5262 }
		J16 = { set_capital = 5267 }
		J17 = { set_capital = 5269 }
		J18 = { set_capital = 5270 }
		J19 = { set_capital = 5271 }
		J20 = { set_capital = 5273 }
		J21 = { set_capital = 5274 }
		J22 = { set_capital = 5276 }
		J23 = { set_capital = 5287 }
		J24 = { set_capital = 5304 }
		J25 = { set_capital = 5284 }
		J26 = { set_capital = 5290 }
		J27 = { set_capital = 5293 }
		J28 = { set_capital = 5295 }
		J29 = { set_capital = 5296 }
		J30 = { set_capital = 5305 }
		J31 = { set_capital = 5249 }
	}
	hidden_effect = { capital_scope = { add_province_triggered_modifier = kalsyto_parliament_activator } }
}

kalsyto_remove_cores = {
	custom_tooltip = kalsyto_remove_cores_tt
	hidden_effect = {
		J01 = { every_core_province = { remove_core = J01 } }
		J02 = { every_core_province = { remove_core = J02 } }
		J03 = { every_core_province = { remove_core = J03 } }
		J04 = { every_core_province = { remove_core = J04 } }
		J05 = { every_core_province = { remove_core = J05 } }
		J06 = { every_core_province = { remove_core = J06 } }
		J07 = { every_core_province = { remove_core = J07 } }
		J08 = { every_core_province = { remove_core = J08 } }
		J09 = { every_core_province = { remove_core = J09 } }
		J10 = { every_core_province = { remove_core = J10 } }
		J11 = { every_core_province = { remove_core = J11 } }
		J12 = { every_core_province = { remove_core = J12 } }
		J13 = { every_core_province = { remove_core = J13 } }
		J14 = { every_core_province = { remove_core = J14 } }
		J15 = { every_core_province = { remove_core = J15 } }
		J16 = { every_core_province = { remove_core = J16 } }
		J17 = { every_core_province = { remove_core = J17 } }
		J18 = { every_core_province = { remove_core = J18 } }
		J19 = { every_core_province = { remove_core = J19 } }
		J20 = { every_core_province = { remove_core = J20 } }
		J21 = { every_core_province = { remove_core = J21 } }
		J22 = { every_core_province = { remove_core = J22 } }
		J23 = { every_core_province = { remove_core = J23 } }
		J24 = { every_core_province = { remove_core = J24 } }
		J25 = { every_core_province = { remove_core = J25 } }
		J26 = { every_core_province = { remove_core = J26 } }
		J27 = { every_core_province = { remove_core = J27 } }
		J28 = { every_core_province = { remove_core = J28 } }
		J29 = { every_core_province = { remove_core = J29 } }
		J30 = { every_core_province = { remove_core = J30 } }
		J31 = { every_core_province = { remove_core = J31 } }
		J34 = { every_core_province = { remove_core = J34 } }
	}
}

kalsyto_parliament_setup = {
	kalsyto_faction_clear = yes
	hidden_effect = {
		kalsyto_constitution_seats = yes
		kalsyto_balance_faction = yes
		kalsyto_prep_flags = yes
		#kalsyto_assign_seats = yes
	}
	#if = {
	#	limit = { has_country_modifier = workers_of_the_lake }
	#	add_faction_influence = {
	#		faction = kalsyto_dazjal_0
	#		influence = -80
	#	}
	#}
	#else = {
	#	add_faction_influence = {
	#		faction = kalsyto_sojdal_0
	#		influence = -80
	#	}
	#}
}

kalsyto_faction_clear = {
	if = {
		limit = { has_country_modifier = workers_of_the_lake }
		remove_faction = kalsyto_dazjal_0
	}
	if = {
		limit = { has_country_modifier = soldiers_of_the_lake }
		remove_faction = kalsyto_sojdal_0
	}
	if = {
		limit = { has_country_modifier = traders_of_the_lake }
		remove_faction = kalsyto_sovk_0
	}
	if = {
		limit = { has_country_modifier = guns_of_the_lake }
		remove_faction = kalsyto_bhu_0
	}
	if = {
		limit = { has_country_modifier = childrens_of_the_lake }
		remove_faction = kalsyto_boshal_0
	}
	if = {
		limit = { has_country_modifier = citizens_of_the_lake }
		remove_faction = kalsyto_kasuk_0
	}
	if = {
		limit = { has_country_modifier = J33_our_purpose }
		remove_faction = kalsyto_dazjal_0
		remove_faction = kalsyto_sojdal_0
		remove_faction = kalsyto_sovk_0
		remove_faction = kalsyto_bhu_0
		remove_faction = kalsyto_boshal_0
		remove_faction = kalsyto_kasuk_0
	}
}

kalsyto_balance_faction = {
	add_faction_influence = {
		faction = kalsyto_dazjal_0
		influence = 10
	}
	#add_faction_influence = {
	#	faction = kalsyto_sojdal_0
	#	influence = 10
	#}
	add_faction_influence = {
		faction = kalsyto_sovk_0
		influence = 10
	}
	add_faction_influence = {
		faction = kalsyto_bhu_0
		influence = 10
	}
	add_faction_influence = {
		faction = kalsyto_boshal_0
		influence = 10
	}
	add_faction_influence = {
		faction = kalsyto_kasuk_0
		influence = -10
	}
}

kalsyto_weaken_leader = {
	if = {
		limit = { faction_in_power = kalsyto_dazjal_0 }
		add_faction_influence = {
			faction = kalsyto_dazjal_0
			influence = -4
		}
	}
	else_if = {
		limit = { faction_in_power = kalsyto_sojdal_0 }
		add_faction_influence = {
			faction = kalsyto_sojdal_0
			influence = -4
		}
	}
	else_if = {
		limit = { faction_in_power = kalsyto_sovk_0 }
		add_faction_influence = {
			faction = kalsyto_sovk_0
			influence = -4
		}
	}
	else_if = {
		limit = { faction_in_power = kalsyto_bhu_0 }
		add_faction_influence = {
			faction = kalsyto_bhu_0
			influence = -4
		}
	}
	else_if = {
		limit = { faction_in_power = kalsyto_boshal_0 }
		add_faction_influence = {
			faction = kalsyto_boshal_0
			influence = -4
		}
	}
	else_if = {
		limit = { faction_in_power = kalsyto_kasuk_0 }
		add_faction_influence = {
			faction = kalsyto_kasuk_0
			influence = -4
		}
	}
}

#By Okman
export_faction_influence_to_var = {
	if = { limit = { faction_influence = { faction = $faction$ influence = 50 } }
		if = { limit = { faction_influence = { faction = $faction$ influence = 75 } }
			if = { limit = { faction_influence = { faction = $faction$ influence = 88 } }
				if = { limit = { faction_influence = { faction = $faction$ influence = 94 } }
					if = { limit = { faction_influence = { faction = $faction$ influence = 97 } }
						if = { limit = { faction_influence = { faction = $faction$ influence = 99 } }
							if = { limit = { faction_influence = { faction = $faction$ influence = 100 } }
								set_variable = { which = $var$ value = 100 }
							}
							else = {
								set_variable = { which = $var$ value = 99 }
							}
						}
						else = {
							if = { limit = { faction_influence = { faction = $faction$ influence = 98 } }
								set_variable = { which = $var$ value = 98 }
							}
							else = {
								set_variable = { which = $var$ value = 97 }
							}
						}
					}
					else = {
						if = { limit = { faction_influence = { faction = $faction$ influence = 95 } }
							if = { limit = { faction_influence = { faction = $faction$ influence = 96 } }
								set_variable = { which = $var$ value = 96 }
							}
							else = {
								set_variable = { which = $var$ value = 95 }
							}
						}
						else = {
							set_variable = { which = $var$ value = 94 }
						}
					}
				}
				else = {
					if = { limit = { faction_influence = { faction = $faction$ influence = 91 } }
						if = { limit = { faction_influence = { faction = $faction$ influence = 92 } }
							if = { limit = { faction_influence = { faction = $faction$ influence = 93 } }
								set_variable = { which = $var$ value = 93 }
							}
							else = {
								set_variable = { which = $var$ value = 92 }
							}
						}
						else = {
							set_variable = { which = $var$ value = 91 }
						}
					}
					else = {
						if = { limit = { faction_influence = { faction = $faction$ influence = 89 } }
							if = { limit = { faction_influence = { faction = $faction$ influence = 90 } }
								set_variable = { which = $var$ value = 90 }
							}
							else = {
								set_variable = { which = $var$ value = 89 }
							}
						}
						else = {
							set_variable = { which = $var$ value = 88 }
						}
					}
				}
			}
			else = {
				if = { limit = { faction_influence = { faction = $faction$ influence = 81 } }
					if = { limit = { faction_influence = { faction = $faction$ influence = 84 } }
						if = { limit = { faction_influence = { faction = $faction$ influence = 86 } }
							if = { limit = { faction_influence = { faction = $faction$ influence = 87 } }
								set_variable = { which = $var$ value = 87 }
							}
							else = {
								set_variable = { which = $var$ value = 86 }
							}
						}
						else = {
							if = { limit = { faction_influence = { faction = $faction$ influence = 85 } }
								set_variable = { which = $var$ value = 85 }
							}
							else = {
								set_variable = { which = $var$ value = 84 }
							}
						}
					}
					else = {
						if = { limit = { faction_influence = { faction = $faction$ influence = 82 } }
							if = { limit = { faction_influence = { faction = $faction$ influence = 83 } }
								set_variable = { which = $var$ value = 83 }
							}
							else = {
								set_variable = { which = $var$ value = 82 }
							}
						}
						else = {
							set_variable = { which = $var$ value = 81 }
						}
					}
				}
				else = {
					if = { limit = { faction_influence = { faction = $faction$ influence = 78 } }
						if = { limit = { faction_influence = { faction = $faction$ influence = 79 } }
							if = { limit = { faction_influence = { faction = $faction$ influence = 80 } }
								set_variable = { which = $var$ value = 80 }
							}
							else = {
								set_variable = { which = $var$ value = 79 }
							}
						}
						else = {
							set_variable = { which = $var$ value = 78 }
						}
					}
					else = {
						if = { limit = { faction_influence = { faction = $faction$ influence = 76 } }
							if = { limit = { faction_influence = { faction = $faction$ influence = 77 } }
								set_variable = { which = $var$ value = 77 }
							}
							else = {
								set_variable = { which = $var$ value = 76 }
							}
						}
						else = {
							set_variable = { which = $var$ value = 75 }
						}
					}
				}
			}
		}
		else = {
			if = { limit = { faction_influence = { faction = $faction$ influence = 62 } }
				if = { limit = { faction_influence = { faction = $faction$ influence = 68 } }
					if = { limit = { faction_influence = { faction = $faction$ influence = 71 } }
						if = { limit = { faction_influence = { faction = $faction$ influence = 73 } }
							if = { limit = { faction_influence = { faction = $faction$ influence = 74 } }
								set_variable = { which = $var$ value = 74 }
							}
							else = {
								set_variable = { which = $var$ value = 73 }
							}
						}
						else = {
							if = { limit = { faction_influence = { faction = $faction$ influence = 72 } }
								set_variable = { which = $var$ value = 72 }
							}
							else = {
								set_variable = { which = $var$ value = 71 }
							}
						}
					}
					else = {
						if = { limit = { faction_influence = { faction = $faction$ influence = 69 } }
							if = { limit = { faction_influence = { faction = $faction$ influence = 70 } }
								set_variable = { which = $var$ value = 70 }
							}
							else = {
								set_variable = { which = $var$ value = 69 }
							}
						}
						else = {
							set_variable = { which = $var$ value = 68 }
						}
					}
				}
				else = {
					if = { limit = { faction_influence = { faction = $faction$ influence = 65 } }
						if = { limit = { faction_influence = { faction = $faction$ influence = 66 } }
							if = { limit = { faction_influence = { faction = $faction$ influence = 67 } }
								set_variable = { which = $var$ value = 67 }
							}
							else = {
								set_variable = { which = $var$ value = 66 }
							}
						}
						else = {
							set_variable = { which = $var$ value = 65 }
						}
					}
					else = {
						if = { limit = { faction_influence = { faction = $faction$ influence = 63 } }
							if = { limit = { faction_influence = { faction = $faction$ influence = 64 } }
								set_variable = { which = $var$ value = 64 }
							}
							else = {
								set_variable = { which = $var$ value = 63 }
							}
						}
						else = {
							set_variable = { which = $var$ value = 62 }
						}
					}
				}
			}
			else = {
				if = { limit = { faction_influence = { faction = $faction$ influence = 56 } }
					if = { limit = { faction_influence = { faction = $faction$ influence = 59 } }
						if = { limit = { faction_influence = { faction = $faction$ influence = 60 } }
							if = { limit = { faction_influence = { faction = $faction$ influence = 61 } }
								set_variable = { which = $var$ value = 61 }
							}
							else = {
								set_variable = { which = $var$ value = 60 }
							}
						}
						else = {
							set_variable = { which = $var$ value = 59 }
						}
					}
					else = {
						if = { limit = { faction_influence = { faction = $faction$ influence = 57 } }
							if = { limit = { faction_influence = { faction = $faction$ influence = 58 } }
								set_variable = { which = $var$ value = 58 }
							}
							else = {
								set_variable = { which = $var$ value = 57 }
							}
						}
						else = {
							set_variable = { which = $var$ value = 56 }
						}
					}
				}
				else = {
					if = { limit = { faction_influence = { faction = $faction$ influence = 53 } }
						if = { limit = { faction_influence = { faction = $faction$ influence = 54 } }
							if = { limit = { faction_influence = { faction = $faction$ influence = 55 } }
								set_variable = { which = $var$ value = 55 }
							}
							else = {
								set_variable = { which = $var$ value = 54 }
							}
						}
						else = {
							set_variable = { which = $var$ value = 53 }
						}
					}
					else = {
						if = { limit = { faction_influence = { faction = $faction$ influence = 51 } }
							if = { limit = { faction_influence = { faction = $faction$ influence = 52 } }
								set_variable = { which = $var$ value = 52 }
							}
							else = {
								set_variable = { which = $var$ value = 51 }
							}
						}
						else = {
							set_variable = { which = $var$ value = 50 }
						}
					}
				}
			}
		}
	}
	else = {
		if = { limit = { faction_influence = { faction = $faction$ influence = 25 } }
			if = { limit = { faction_influence = { faction = $faction$ influence = 37 } }
				if = { limit = { faction_influence = { faction = $faction$ influence = 43 } }
					if = { limit = { faction_influence = { faction = $faction$ influence = 46 } }
						if = { limit = { faction_influence = { faction = $faction$ influence = 48 } }
							if = { limit = { faction_influence = { faction = $faction$ influence = 49 } }
								set_variable = { which = $var$ value = 49 }
							}
							else = {
								set_variable = { which = $var$ value = 48 }
							}
						}
						else = {
							if = { limit = { faction_influence = { faction = $faction$ influence = 47 } }
								set_variable = { which = $var$ value = 47 }
							}
							else = {
								set_variable = { which = $var$ value = 46 }
							}
						}
					}
					else = {
						if = { limit = { faction_influence = { faction = $faction$ influence = 44 } }
							if = { limit = { faction_influence = { faction = $faction$ influence = 45 } }
								set_variable = { which = $var$ value = 45 }
							}
							else = {
								set_variable = { which = $var$ value = 44 }
							}
						}
						else = {
							set_variable = { which = $var$ value = 43 }
						}
					}
				}
				else = {
					if = { limit = { faction_influence = { faction = $faction$ influence = 40 } }
						if = { limit = { faction_influence = { faction = $faction$ influence = 41 } }
							if = { limit = { faction_influence = { faction = $faction$ influence = 42 } }
								set_variable = { which = $var$ value = 42 }
							}
							else = {
								set_variable = { which = $var$ value = 41 }
							}
						}
						else = {
							set_variable = { which = $var$ value = 40 }
						}
					}
					else = {
						if = { limit = { faction_influence = { faction = $faction$ influence = 38 } }
							if = { limit = { faction_influence = { faction = $faction$ influence = 39 } }
								set_variable = { which = $var$ value = 39 }
							}
							else = {
								set_variable = { which = $var$ value = 38 }
							}
						}
						else = {
							set_variable = { which = $var$ value = 37 }
						}
					}
				}
			}
			else = {
				if = { limit = { faction_influence = { faction = $faction$ influence = 31 } }
					if = { limit = { faction_influence = { faction = $faction$ influence = 34 } }
						if = { limit = { faction_influence = { faction = $faction$ influence = 35 } }
							if = { limit = { faction_influence = { faction = $faction$ influence = 36 } }
								set_variable = { which = $var$ value = 36 }
							}
							else = {
								set_variable = { which = $var$ value = 35 }
							}
						}
						else = {
							set_variable = { which = $var$ value = 34 }
						}
					}
					else = {
						if = { limit = { faction_influence = { faction = $faction$ influence = 32 } }
							if = { limit = { faction_influence = { faction = $faction$ influence = 33 } }
								set_variable = { which = $var$ value = 33 }
							}
							else = {
								set_variable = { which = $var$ value = 32 }
							}
						}
						else = {
							set_variable = { which = $var$ value = 31 }
						}
					}
				}
				else = {
					if = { limit = { faction_influence = { faction = $faction$ influence = 28 } }
						if = { limit = { faction_influence = { faction = $faction$ influence = 29 } }
							if = { limit = { faction_influence = { faction = $faction$ influence = 30 } }
								set_variable = { which = $var$ value = 30 }
							}
							else = {
								set_variable = { which = $var$ value = 29 }
							}
						}
						else = {
							set_variable = { which = $var$ value = 28 }
						}
					}
					else = {
						if = { limit = { faction_influence = { faction = $faction$ influence = 26 } }
							if = { limit = { faction_influence = { faction = $faction$ influence = 27 } }
								set_variable = { which = $var$ value = 27 }
							}
							else = {
								set_variable = { which = $var$ value = 26 }
							}
						}
						else = {
							set_variable = { which = $var$ value = 25 }
						}
					}
				}
			}
		}
		else = {
			if = { limit = { faction_influence = { faction = $faction$ influence = 12 } }
				if = { limit = { faction_influence = { faction = $faction$ influence = 18 } }
					if = { limit = { faction_influence = { faction = $faction$ influence = 21 } }
						if = { limit = { faction_influence = { faction = $faction$ influence = 23 } }
							if = { limit = { faction_influence = { faction = $faction$ influence = 24 } }
								set_variable = { which = $var$ value = 24 }
							}
							else = {
								set_variable = { which = $var$ value = 23 }
							}
						}
						else = {
							if = { limit = { faction_influence = { faction = $faction$ influence = 22 } }
								set_variable = { which = $var$ value = 22 }
							}
							else = {
								set_variable = { which = $var$ value = 21 }
							}
						}
					}
					else = {
						if = { limit = { faction_influence = { faction = $faction$ influence = 19 } }
							if = { limit = { faction_influence = { faction = $faction$ influence = 20 } }
								set_variable = { which = $var$ value = 20 }
							}
							else = {
								set_variable = { which = $var$ value = 19 }
							}
						}
						else = {
							set_variable = { which = $var$ value = 18 }
						}
					}
				}
				else = {
					if = { limit = { faction_influence = { faction = $faction$ influence = 15 } }
						if = { limit = { faction_influence = { faction = $faction$ influence = 16 } }
							if = { limit = { faction_influence = { faction = $faction$ influence = 17 } }
								set_variable = { which = $var$ value = 17 }
							}
							else = {
								set_variable = { which = $var$ value = 16 }
							}
						}
						else = {
							set_variable = { which = $var$ value = 15 }
						}
					}
					else = {
						if = { limit = { faction_influence = { faction = $faction$ influence = 13 } }
							if = { limit = { faction_influence = { faction = $faction$ influence = 14 } }
								set_variable = { which = $var$ value = 14 }
							}
							else = {
								set_variable = { which = $var$ value = 13 }
							}
						}
						else = {
							set_variable = { which = $var$ value = 12 }
						}
					}
				}
			}
			else = {
				if = { limit = { faction_influence = { faction = $faction$ influence = 6 } }
					if = { limit = { faction_influence = { faction = $faction$ influence = 9 } }
						if = { limit = { faction_influence = { faction = $faction$ influence = 10 } }
							if = { limit = { faction_influence = { faction = $faction$ influence = 11 } }
								set_variable = { which = $var$ value = 11 }
							}
							else = {
								set_variable = { which = $var$ value = 10 }
							}
						}
						else = {
							set_variable = { which = $var$ value = 9 }
						}
					}
					else = {
						if = { limit = { faction_influence = { faction = $faction$ influence = 7 } }
							if = { limit = { faction_influence = { faction = $faction$ influence = 8 } }
								set_variable = { which = $var$ value = 8 }
							}
							else = {
								set_variable = { which = $var$ value = 7 }
							}
						}
						else = {
							set_variable = { which = $var$ value = 6 }
						}
					}
				}
				else = {
					if = { limit = { faction_influence = { faction = $faction$ influence = 3 } }
						if = { limit = { faction_influence = { faction = $faction$ influence = 4 } }
							if = { limit = { faction_influence = { faction = $faction$ influence = 5 } }
								set_variable = { which = $var$ value = 5 }
							}
							else = {
								set_variable = { which = $var$ value = 4 }
							}
						}
						else = {
							set_variable = { which = $var$ value = 3 }
						}
					}
					else = {
						if = { limit = { faction_influence = { faction = $faction$ influence = 1 } }
							if = { limit = { faction_influence = { faction = $faction$ influence = 2 } }
								set_variable = { which = $var$ value = 2 }
							}
							else = {
								set_variable = { which = $var$ value = 1 }
							}
						}
						else = {
							set_variable = { which = $var$ value = 0 }
						}
					}
				}
			}
		}
	}
}

kalsyto_worker_backing = {
	if = {
		limit = { tag = J33 }
		kalsyto_clear_votes = yes
		kalsyto_constitution_votes = yes
		kalsyto_assign_seats = yes
		if = {
			limit = { has_country_modifier = workers_of_the_lake }
			every_owned_province = {
				limit = {
					has_seat_in_parliament = yes
					OR = {
						has_province_flag = J33_gun_seat_2
						has_province_flag = J33_child_seat_2
					}
				}
				random = { 
					chance = 50
					back_current_issue = yes
				}
			}
		}
		else = {
			every_owned_province = {
				limit = {
					has_seat_in_parliament = yes
					has_province_flag = J33_worker_seat_2
				}
				back_current_issue = yes
			}
		}
	}
}
kalsyto_soldier_backing = {
	if = {
		limit = { tag = J33 }
		kalsyto_clear_votes = yes
		kalsyto_constitution_votes = yes
		kalsyto_assign_seats = yes
		if = {
			limit = { has_country_modifier = soldiers_of_the_lake }
			every_owned_province = {
				limit = {
					has_seat_in_parliament = yes
					OR = {
						has_province_flag = J33_gun_seat_2
						has_province_flag = J33_citizen_seat_2
					}
				}
				random = { 
					chance = 50
					back_current_issue = yes
				}
			}
		}
		else = {
			every_owned_province = {
				limit = {
					has_seat_in_parliament = yes
					has_province_flag = J33_soldier_seat_2
				}
				back_current_issue = yes
			}
		}
	}
}
kalsyto_trader_backing = {
	if = {
		limit = { tag = J33 }
		kalsyto_clear_votes = yes
		kalsyto_constitution_votes = yes
		kalsyto_assign_seats = yes
		if = {
			limit = { has_country_modifier = traders_of_the_lake }
			every_owned_province = {
				limit = {
					has_seat_in_parliament = yes
					OR = {
						has_province_flag = J33_child_seat_2
						has_province_flag = J33_citizen_seat_2
					}
				}
				random = { 
					chance = 50
					back_current_issue = yes
				}
			}
		}
		else = {
			every_owned_province = {
				limit = {
					has_seat_in_parliament = yes
					has_province_flag = J33_trader_seat_2
				}
				back_current_issue = yes
			}
		}
	}
}
kalsyto_gun_backing = {
	if = {
		limit = { tag = J33 }
		kalsyto_clear_votes = yes
		kalsyto_constitution_votes = yes
		kalsyto_assign_seats = yes
		if = {
			limit = { has_country_modifier = guns_of_the_lake }
			every_owned_province = {
				limit = {
					has_seat_in_parliament = yes
					OR = {
						has_province_flag = J33_worker_seat_2
						has_province_flag = J33_soldier_seat_2
					}
				}
				random = { 
					chance = 50
					back_current_issue = yes
				}
			}
		}
		else = {
			every_owned_province = {
				limit = {
					has_seat_in_parliament = yes
					has_province_flag = J33_gun_seat_2
				}
				back_current_issue = yes
			}
		}
	}
}
kalsyto_child_backing = {
	if = {
		limit = { tag = J33 }
		kalsyto_clear_votes = yes
		kalsyto_constitution_votes = yes
		kalsyto_assign_seats = yes
		if = {
			limit = { has_country_modifier = childrens_of_the_lake }
			every_owned_province = {
				limit = {
					has_seat_in_parliament = yes
					OR = {
						has_province_flag = J33_worker_seat_2
						has_province_flag = J33_trader_seat_2
					}
				}
				random = {
					chance = 50
					back_current_issue = yes
				}
			}
		}
		else = {
			every_owned_province = {
				limit = {
					has_seat_in_parliament = yes
					has_province_flag = J33_child_seat_2
				}
				back_current_issue = yes
			}
		}
	}
}
kalsyto_citizen_backing = {
	if = {
		limit = { tag = J33 }
		kalsyto_clear_votes = yes
		kalsyto_constitution_votes = yes
		kalsyto_assign_seats = yes
		if = {
			limit = { has_country_modifier = citizens_of_the_lake }
			every_owned_province = {
				limit = {
					has_seat_in_parliament = yes
					OR = {
						has_province_flag = J33_soldier_seat_2
						has_province_flag = J33_trader_seat_2
					}
				}
				random = { 
					chance = 50
					back_current_issue = yes
				}
			}
		}
		else = {
			every_owned_province = {
				limit = {
					has_seat_in_parliament = yes
					has_province_flag = J33_citizen_seat_2
				}
				back_current_issue = yes
			}
		}
	}
}
kalsyto_clear_votes = {
	if = {
		limit = { has_country_flag = J33_constitution_flag }
		every_owned_province = {
			limit = {
				has_seat_in_parliament = yes
				NOT = { is_capital = yes }
			}
			back_current_issue = yes
		}
	}
	else = {
		every_owned_province = {
			limit = {
				has_seat_in_parliament = yes
				NOT = { is_capital = yes }
			}
			back_current_issue = no
		}
	}
	capital_scope = { back_current_issue = yes }
}
kalsyto_constitution_votes = {
	every_owned_province = {
		limit = {
			has_seat_in_parliament = yes
			has_province_flag = J33_constitution_seat
		}
		back_current_issue = yes
	}
}
kalsyto_constitution_seats = {
	if = {
		limit = { has_country_modifier = workers_of_the_lake }
		5238 = { set_province_flag = J33_constitution_seat }
		5237 = { set_province_flag = J33_constitution_seat }
		5235 = { set_province_flag = J33_constitution_seat }
		5234 = { set_province_flag = J33_constitution_seat }
		5248 = { set_province_flag = J33_constitution_seat }
		if = {
			limit = {
				capital_scope = {
					OR = {
						province_id = 5238
						province_id = 5237
						province_id = 5235
						province_id = 5234
						province_id = 5248
					}
				}
			}
			5290 = { set_province_flag = J33_constitution_seat }
		}
	}
	else_if = {
		limit = { has_country_modifier = soldiers_of_the_lake }
		5305 = { set_province_flag = J33_constitution_seat }
		5295 = { set_province_flag = J33_constitution_seat }
		5253 = { set_province_flag = J33_constitution_seat }
		5249 = { set_province_flag = J33_constitution_seat }
		5231 = { set_province_flag = J33_constitution_seat }
		if = {
			limit = {
				capital_scope = {
					OR = {
						province_id = 5305
						province_id = 5295
						province_id = 5253
						province_id = 5249
						province_id = 5231
					}
				}
			}
			5290 = { set_province_flag = J33_constitution_seat }
		}
	}
	else_if = {
		limit = { has_country_modifier = traders_of_the_lake }
		5226 = { set_province_flag = J33_constitution_seat }
		5246 = { set_province_flag = J33_constitution_seat }
		5293 = { set_province_flag = J33_constitution_seat }
		5304 = { set_province_flag = J33_constitution_seat }
		5276 = { set_province_flag = J33_constitution_seat }
		if = {
			limit = {
				capital_scope = {
					OR = {
						province_id = 5226
						province_id = 5246
						province_id = 5293
						province_id = 5304
						province_id = 5276
					}
				}
			}
			5290 = { set_province_flag = J33_constitution_seat }
		}
	}
	else_if = {
		limit = { has_country_modifier = guns_of_the_lake }
		5284 = { set_province_flag = J33_constitution_seat }
		5259 = { set_province_flag = J33_constitution_seat }
		5267 = { set_province_flag = J33_constitution_seat }
		5271 = { set_province_flag = J33_constitution_seat }
		5269 = { set_province_flag = J33_constitution_seat }
		if = {
			limit = {
			capital_scope = {
					OR = {
						province_id = 5284
						province_id = 5259
						province_id = 5267
						province_id = 5271
						province_id = 5269
					}
				}
			}
			5290 = { set_province_flag = J33_constitution_seat }
		}
	}
	else_if = {
		limit = { has_country_modifier = childrens_of_the_lake }
		5256 = { set_province_flag = J33_constitution_seat }
		5257 = { set_province_flag = J33_constitution_seat }
		5258 = { set_province_flag = J33_constitution_seat }
		5287 = { set_province_flag = J33_constitution_seat }
		5270 = { set_province_flag = J33_constitution_seat }
		if = {
			limit = {
				capital_scope = {
					OR = {
						province_id = 5256
						province_id = 5257
						province_id = 5258
						province_id = 5287
						province_id = 5270
					}
				}
			}
			5290 = { set_province_flag = J33_constitution_seat }
		}
	}
	else_if = {
		limit = { has_country_modifier = citizens_of_the_lake }
		5296 = { set_province_flag = J33_constitution_seat }
		5273 = { set_province_flag = J33_constitution_seat }
		5262 = { set_province_flag = J33_constitution_seat }
		5229 = { set_province_flag = J33_constitution_seat }
		5274 = { set_province_flag = J33_constitution_seat }
		if = {
			limit = {
				capital_scope = {
					OR = {
						province_id = 5296
						province_id = 5273
						province_id = 5262
						province_id = 5229
						province_id = 5274
					}
				}
			}
			5290 = { set_province_flag = J33_constitution_seat }
		}
	}
	capital_scope = { set_province_flag = J33_constitution_seat }
}

kalsyto_assign_seats = {
	kalsyto_clear_seats = yes
	if = {
		limit = { NOT = { has_country_modifier = workers_of_the_lake } }
		kalsyto_parliament_sort = { faction = kalsyto_dazjal_0 flag = J33_worker_seat flag2 = J33_worker_seat_2 }
	}
	if = {
		limit = { NOT = { has_country_modifier = soldiers_of_the_lake } }
		kalsyto_parliament_sort = { faction = kalsyto_sojdal_0 flag = J33_soldier_seat flag2 = J33_soldier_seat_2 }
	}
	if = {
		limit = { NOT = { has_country_modifier = traders_of_the_lake } }
		kalsyto_parliament_sort = { faction = kalsyto_sovk_0 flag = J33_trader_seat flag2 = J33_trader_seat_2 }
	}
	if = {
		limit = { NOT = { has_country_modifier = guns_of_the_lake } }
		kalsyto_parliament_sort = { faction = kalsyto_bhu_0 flag = J33_gun_seat flag2 = J33_gun_seat_2 }
	}
	if = {
		limit = { NOT = { has_country_modifier = childrens_of_the_lake } }
		kalsyto_parliament_sort = { faction = kalsyto_boshal_0 flag = J33_child_seat flag2 = J33_child_seat_2 }
	}
	if = {
		limit = { NOT = { has_country_modifier = citizens_of_the_lake } }
		kalsyto_parliament_sort = { faction = kalsyto_kasuk_0 flag = J33_citizen_seat flag2 = J33_citizen_seat_2 }
	}
	random_list = {
		33 = { set_country_flag = J33_major_1 }
		33 = { set_country_flag = J33_major_2 }
		33 = { set_country_flag = J33_major_3 }
	}
	random_list = {
		33 = { set_country_flag = J33_major_4 }
		33 = { set_country_flag = J33_major_5 }
		33 = { set_country_flag = J33_major_6 }
	}
}
kalsyto_clear_seats = {
	every_owned_province = {
		limit = { has_seat_in_parliament = yes }
		clr_province_flag = J33_worker_seat_2
		clr_province_flag = J33_soldier_seat_2
		clr_province_flag = J33_trader_seat_2
		clr_province_flag = J33_gun_seat_2
		clr_province_flag = J33_child_seat_2
		clr_province_flag = J33_citizen_seat_2
	}
	#clr_country_flag = J33_major_issue
	clr_country_flag = J33_major_1
	clr_country_flag = J33_major_2
	clr_country_flag = J33_major_3
	clr_country_flag = J33_major_4
	clr_country_flag = J33_major_5
	clr_country_flag = J33_major_6
}

#OG By Vainfire
kalsyto_parliament_sort = {
	J33 = {
		export_faction_influence_to_var = {
			faction = $faction$
			var = kalsyto_influence
		}
		divide_variable = {
			which = kalsyto_influence
			value = 4
		}
		set_variable = { which = kalsyto_backing value = 0 }
		every_owned_province = {
			limit = {
				has_seat_in_parliament = yes
				NOT = { kalsyto_has_flag = yes }
				has_province_flag = $flag$
			}
			#save_event_target_as = J33_target_seat
			J33 = {
				change_variable = { which = kalsyto_backing value = 1 }
				set_variable = { which = kalsyto_backing which = kalsyto_backing }
				if = {
					limit = {
						check_variable = {
							which = kalsyto_influence
							which = kalsyto_backing
						}
					}
					#event_target:J33_target_seat = { set_province_flag = $flag2$ }
					PREV = { set_province_flag = $flag2$ }
				}
			}
		}
		every_owned_province = {
			limit = {
				has_seat_in_parliament = yes
				NOT = { kalsyto_has_flag = yes }
			}
			#save_event_target_as = J33_target_seat
			J33 = {
				change_variable = { which = kalsyto_backing value = 1 }
				set_variable = { which = kalsyto_backing which = kalsyto_backing }
				if = {
					limit = {
						check_variable = {
							which = kalsyto_influence
							which = kalsyto_backing
						}
					}
					#event_target:J33_target_seat = { set_province_flag = $flag2$ }
					PREV = { set_province_flag = $flag2$ }
				}
			}
		}
	}
}

kalsyto_prep_flags = {
	5238 = { set_province_flag = J33_worker_seat }
	5237 = { set_province_flag = J33_worker_seat }
	5235 = { set_province_flag = J33_worker_seat }
	5234 = { set_province_flag = J33_worker_seat }
	5248 = { set_province_flag = J33_worker_seat }
	5305 = { set_province_flag = J33_soldier_seat }
	5295 = { set_province_flag = J33_soldier_seat }
	5253 = { set_province_flag = J33_soldier_seat }
	5249 = { set_province_flag = J33_soldier_seat }
	5231 = { set_province_flag = J33_soldier_seat }
	5226 = { set_province_flag = J33_trader_seat }
	5246 = { set_province_flag = J33_trader_seat }
	5293 = { set_province_flag = J33_trader_seat }
	5304 = { set_province_flag = J33_trader_seat }
	5276 = { set_province_flag = J33_trader_seat }
	5284 = { set_province_flag = J33_gun_seat }
	5259 = { set_province_flag = J33_gun_seat }
	5267 = { set_province_flag = J33_gun_seat }
	5271 = { set_province_flag = J33_gun_seat }
	5269 = { set_province_flag = J33_gun_seat }
	5256 = { set_province_flag = J33_child_seat }
	5257 = { set_province_flag = J33_child_seat }
	5258 = { set_province_flag = J33_child_seat }
	5287 = { set_province_flag = J33_child_seat }
	5270 = { set_province_flag = J33_child_seat }
	5296 = { set_province_flag = J33_citizen_seat }
	5273 = { set_province_flag = J33_citizen_seat }
	5262 = { set_province_flag = J33_citizen_seat }
	5229 = { set_province_flag = J33_citizen_seat }
	5274 = { set_province_flag = J33_citizen_seat }
	capital_scope = {
		clr_province_flag = J33_worker_seat
		clr_province_flag = J33_soldier_seat
		clr_province_flag = J33_trader_seat
		clr_province_flag = J33_gun_seat
		clr_province_flag = J33_child_seat
		clr_province_flag = J33_citizen_seat
	}
}

kalsyto_back_seats_of_flag = {
	every_owned_province = {
		limit = { 
			has_seat_in_parliament = yes
			has_province_flag = $flag$
			NOT = { province_id = FROM }
		}
		back_current_issue = yes
	}
}

kalsyto_election_faction = {
	if = {
		limit = { has_country_modifier = $constitution$ }
		kalsyto_weaken_leader = yes
	}
	else = {
		add_faction_influence = {
			faction = $faction$
			influence = 4
		}
	}
}





used_kalsyto_influence_mechanic = {
	custom_tooltip = used_kalsyto_influence_mechanic_tt
	hidden_effect = {
		#if = {
		#	limit = { NOT = { has_country_flag = persian_influence_setup_flag } }
		#	set_country_flag = persian_influence_setup_flag
		#}
		if = {
			limit = {
				NOT = {
					check_variable = {
						which = kalsyto_influence_counter
						value = 50
					}
				}
			}
			change_variable = {
				which = kalsyto_influence_counter
				value = 10
			}
		}
	}
}

kalsyto_CDS_tags = {
	random_subject_country = {
		limit = { 
			capital_scope = { superregion = $superegion$ }
			religion = kalyin_worshippers
			total_development = 500
			NOT = { has_country_modifier = J33_selected }
			is_subject_of_type = democratic_sphere_of_influence_subject
		}
		save_event_target_as = J33_CDS_1
		add_country_modifier = {
			name = J33_selected
			duration = 30
			hidden = yes
		}
	}
	random_subject_country = {
		limit = { 
			capital_scope = { superregion = $superegion$ }
			religion = kalyin_worshippers
			NOT = { total_development = 500 }
			total_development = 250
			NOT = { has_country_modifier = J33_selected }
			NOT = { is_client_nation = yes }
			is_subject_of_type = democratic_sphere_of_influence_subject
		}
		save_event_target_as = J33_CDS_2
		add_country_modifier = {
			name = J33_selected
			duration = 30
			hidden = yes
		}
	}
	random_subject_country = {
		limit = { 
			capital_scope = { superregion = $superegion$ }
			religion = kalyin_worshippers
			NOT = { total_development = 250 }
			NOT = { has_country_modifier = J33_selected }
			NOT = { is_client_nation = yes }
			is_subject_of_type = democratic_sphere_of_influence_subject
		}
		save_event_target_as = J33_CDS_3
		add_country_modifier = {
			name = J33_selected
			duration = 30
			hidden = yes
		}
	}
}

kalsyto_CDS_effect = { #Help
	if = {
		limit = { capital_scope = { superregion = bulwar_superregion } }
		kalsyto_CDS_effect_2 = { superegion = bulwar_superregion }
	}
	else_if = {
		limit = { capital_scope = { superregion = kheionai_superregion } }
		kalsyto_CDS_effect_2 = { superegion = kheionai_superregion }
	}
	else_if = {
		limit = { capital_scope = { superregion = broken_lands_superregion } }
		kalsyto_CDS_effect_2 = { superegion = broken_lands_superregion }
	}
	else_if = {
		limit = { capital_scope = { superregion = effelai_superregion } }
		kalsyto_CDS_effect_2 = { superegion = effelai_superregion }
	}
	else_if = {
		limit = { capital_scope = { superregion = taychend_superregion } }
		kalsyto_CDS_effect_2 = { superegion = taychend_superregion }
	}
	else_if = {
		limit = { capital_scope = { superregion = ruin_proper_superregion } }
		kalsyto_CDS_effect_2 = { superegion = ruin_proper_superregion }
	}
	else_if = {
		limit = { capital_scope = { superregion = gerudia_superregion } }
		kalsyto_CDS_effect_2 = { superegion = gerudia_superregion }
	}
	else_if = {
		limit = { capital_scope = { superregion = north_salahad_superregion } }
		kalsyto_CDS_effect_2 = { superegion = north_salahad_superregion }
	}
	else_if = {
		limit = { capital_scope = { superregion = south_salahad_superregion } }
		kalsyto_CDS_effect_2 = { superegion = south_salahad_superregion }
	}
	else_if = {
		limit = { capital_scope = { superregion = torn_gates_superregion } }
		kalsyto_CDS_effect_2 = { superegion = torn_gates_superregion }
	}
	else_if = {
		limit = { capital_scope = { superregion = ynn_superregion } }
		kalsyto_CDS_effect_2 = { superegion = ynn_superregion }
	}
	else_if = {
		limit = { capital_scope = { superregion = eordand_superregion } }
		kalsyto_CDS_effect_2 = { superegion = eordand_superregion }
	}
	else_if = {
		limit = { capital_scope = { superregion = yanshen_superregion } }
		kalsyto_CDS_effect_2 = { superegion = yanshen_superregion }
	}
	else_if = {
		limit = { capital_scope = { superregion = east_serpentspine_superregion } }
		kalsyto_CDS_effect_2 = { superegion = east_serpentspine_superregion }
	}
	else_if = {
		limit = { capital_scope = { superregion = escann_superregion } }
		kalsyto_CDS_effect_2 = { superegion = escann_superregion }
	}
	else_if = {
		limit = { capital_scope = { superregion = rahen_superregion } }
		kalsyto_CDS_effect_2 = { superegion = rahen_superregion }
	}
	else_if = {
		limit = { capital_scope = { superregion = north_haless_superregion } }
		kalsyto_CDS_effect_2 = { superegion = north_haless_superregion }
	}
	else_if = {
		limit = { capital_scope = { superregion = south_haless_superregion } }
		kalsyto_CDS_effect_2 = { superegion = south_haless_superregion }
	}
	else_if = {
		limit = { capital_scope = { superregion = western_cannor_superregion } }
		kalsyto_CDS_effect_2 = { superegion = western_cannor_superregion }
	}
	else_if = {
		limit = { capital_scope = { superregion = west_serpentspine_superregion } }
		kalsyto_CDS_effect_2 = { superegion = west_serpentspine_superregion }
	}
	else_if = {
		limit = { capital_scope = { superregion = deepwoods_superregion } }
		kalsyto_CDS_effect_2 = { superegion = deepwoods_superregion }
	}
	else_if = {
		limit = { capital_scope = { superregion = fangaula_superregion } }
		kalsyto_CDS_effect_2 = { superegion = fangaula_superregion }
	}
	else_if = {
		limit = { capital_scope = { superregion = tanib_dajek_superregion } }
		kalsyto_CDS_effect_2 = { superegion = tanib_dajek_superregion }
	}
	else_if = {
		limit = { capital_scope = { superregion = east_sarhal_superregion } }
		kalsyto_CDS_effect_2 = { superegion = east_sarhal_superregion }
	}
	else_if = {
		limit = { capital_scope = { superregion = taneyas_superregion } }
		kalsyto_CDS_effect_2 = { superegion = taneyas_superregion }
	}
	else_if = {
		limit = { capital_scope = { superregion = djinnakah_superregion } }
		kalsyto_CDS_effect_2 = { superegion = djinnakah_superregion }
	}
	add_government_reform = lake_consolidated_state
	set_country_flag = 25_trade_power_for_propogate_religion
	set_country_flag = J33_CDS_flag
	J33 = {
		add_favors = {
			who = PREV
			amount = 100
		}
	}
	if = {
		limit = { J33 = { has_country_flag = J33_friends_CDS } }
		add_historical_friend = J33
		J33 = { add_historical_friend = PREV }
	}
	if = {
		limit = { J33 = { has_country_flag = J33_constitution_flag } }
		if = {
			limit = { J33 = { has_country_modifier = workers_of_the_lake } }
			add_country_modifier = {
				name = workers_of_the_lake
				duration = -1
			}
		}
		else_if = {
			limit = { J33 = { has_country_modifier = soldiers_of_the_lake } }
			add_country_modifier = {
				name = soldiers_of_the_lake
				duration = -1
			}
		}
		else_if = {
			limit = { J33 = { has_country_modifier = traders_of_the_lake } }
			add_country_modifier = {
				name = traders_of_the_lake
				duration = -1
			}
		}
		else_if = {
			limit = { J33 = { has_country_modifier = guns_of_the_lake } }
			add_country_modifier = {
				name = guns_of_the_lake
				duration = -1
			}
		}
		else_if = {
			limit = { J33 = { has_country_modifier = childrens_of_the_lake } }
			add_country_modifier = {
				name = childrens_of_the_lake
				duration = -1
			}
		}
		else_if = {
			limit = { J33 = { has_country_modifier = citizens_of_the_lake } }
			add_country_modifier = {
				name = citizens_of_the_lake
				duration = -1
			}
		}
	}
}
kalsyto_CDS_effect_2 = {
	$superegion$ = {
		#if = {
		#	limit = { is_state_core = owner }
			add_core = PREV
		#}
		#else_if = {
		#	limit = { is_territorial_core = owner }
		#	add_territorial_core = PREV
		#}
		if = {
			limit = { OR = { country_or_subject_holds = ROOT } }
			cede_province = PREV
		}
	}
	hidden_effect = {
		every_subject_country = {
			limit = { kalsyto_CDS = yes }
			$superegion$ = { remove_core = PREV }
		}
		J33 = { $superegion$ = { remove_core = PREV } }
	}
}


kalyin_conversion = { #Needs one for every religion
	capital_scope = {
		trigger_switch = {
			on_trigger = religion
			regent_court = { kalyin_conversion_2 = { faith = regent_court group = cannorian } }
			corinite = { kalyin_conversion_2 = { faith = corinite group = cannorian } }
			ravelian = { kalyin_conversion_2 = { faith = ravelian group = cannorian } }
			dalcabba = { kalyin_conversion_2 = { faith = dalcabba group = cannorian } }
			infernal_court = { kalyin_conversion_2 = { faith = infernal_court group = cannorian } }
			the_thought = { kalyin_conversion_2 = { faith = the_thought group = faithless } }
			godlost = { kalyin_conversion_2 = { faith = godlost group = faithless } }
			kheionism = { kalyin_conversion_2 = { faith = kheionism group = faithless } }
			black_doctrine = { kalyin_conversion_2 = { faith = black_doctrine group = faithless } }
			elikhetist = { kalyin_conversion_2 = { faith = elikhetist group = khetist } }
			nirakhetist = { kalyin_conversion_2 = { faith = nirakhetist group = khetist } }
			aakhetist = { kalyin_conversion_2 = { faith = aakhetist group = khetist } }
			xhazobkult = { kalyin_conversion_2 = { faith = xhazobkult group = gnollish } }
			kvangahga = { kalyin_conversion_2 = { faith = kvangahga group = gnollish } }
			ancestor_worship = { kalyin_conversion_2 = { faith = ancestor_worship group = dwarven } }
			dwarven_pantheon = { kalyin_conversion_2 = { faith = dwarven_pantheon group = dwarven } }
			runefather_worship = { kalyin_conversion_2 = { faith = runefather_worship group = dwarven } }
			elven_forebears = { kalyin_conversion_2 = { faith = elven_forebears group = elven } }
			soise_vio = { kalyin_conversion_2 = { faith = soise_vio group = elven } }
			nur_dahvaraesa = { kalyin_conversion_2 = { faith = nur_dahvaraesa group = elven } }
			bulwari_sun_cult = { kalyin_conversion_2 = { faith = bulwari_sun_cult group = bulwari } }
			old_bulwari_sun_cult = { kalyin_conversion_2 = { faith = old_bulwari_sun_cult group = bulwari } }
			the_jadd = { kalyin_conversion_2 = { faith = the_jadd group = bulwari } }
			skaldhyrric_faith = { kalyin_conversion_2 = { faith = skaldhyrric_faith group = gerudian } }
			great_dookan = { kalyin_conversion_2 = { faith = great_dookan group = orcish } }
			old_dookan = { kalyin_conversion_2 = { faith = old_dookan group = orcish } }
			bulgu_orazan = { kalyin_conversion_2 = { faith = bulgu_orazan group = orcish } }
			kobold_dragon_cult = { kalyin_conversion_2 = { faith = kobold_dragon_cult group = dragon_cult } }
			drozma_tur = { kalyin_conversion_2 = { faith = drozma_tur group = dragon_cult } }
			kobold_serpent_cult = { kalyin_conversion_2 = { faith = kobold_serpent_cult group = dragon_cult } }
			goblinic_shamanism = { kalyin_conversion_2 = { faith = goblinic_shamanism group = goblin } }
			eagle_worship = { kalyin_conversion_2 = { faith = eagle_worship group = goblin } }
			the_hunt = { kalyin_conversion_2 = { faith = the_hunt group = harpy_cults } }
			weeping_mother = { kalyin_conversion_2 = { faith = weeping_mother group = aelantiri } }
			dotimism = { kalyin_conversion_2 = { faith = dotimism group = aelantiri } }
			raeldaeriach = { kalyin_conversion_2 = { faith = raeldaeriach group = aelantiri } }
			etchings_of_the_deep = { kalyin_conversion_2 = { faith = etchings_of_the_deep group = aelantiri } }
			skincarvers = { kalyin_conversion_2 = { faith = skincarvers group = aelantiri } }
			death_cult_of_cheshosh = { kalyin_conversion_2 = { faith = death_cult_of_cheshosh group = cheshoshi_religion } }
			kalun_masks = { kalyin_conversion_2 = { faith = kalun_masks group = harafic } }
			dai_nadeilhil = { kalyin_conversion_2 = { faith = dai_nadeilhil group = harafic } }
			jaakaiin = { kalyin_conversion_2 = { faith = jaakaiin group = harafic } }
			eotomolaque = { kalyin_conversion_2 = { faith = eotomolaque group = harafic } }
			great_tceusluhd = { kalyin_conversion_2 = { faith = great_tceusluhd group = harafic } }
			tswohvwohii = { kalyin_conversion_2 = { faith = tswohvwohii group = effelai } }
			chahinanito = { kalyin_conversion_2 = { faith = chahinanito group = effelai } }
			song_servants = { kalyin_conversion_2 = { faith = song_servants group = effelai } }
			senanset = { kalyin_conversion_2 = { faith = senanset group = effelai } }
			orwaii = { kalyin_conversion_2 = { faith = orwaii group = effelai } }
			leechfather = { kalyin_conversion_2 = { faith = leechfather group = effelai } }
			gods_of_the_taychend = { kalyin_conversion_2 = { faith = gods_of_the_taychend group = taychendi } }
			gods_of_the_taychend_reformed = { kalyin_conversion_2 = { faith = gods_of_the_taychend_reformed group = taychendi } }
			oren_nayiru = { kalyin_conversion_2 = { faith = oren_nayiru group = taychendi } }
			oren_nayiru_reformed = { kalyin_conversion_2 = { faith = oren_nayiru_reformed group = taychendi } }
			ynn_river_worship = { kalyin_conversion_2 = { faith = ynn_river_worship group = ynnic } }
			ynn_river_reformed = { kalyin_conversion_2 = { faith = ynn_river_reformed group = ynnic } }
			rune_scribes = { kalyin_conversion_2 = { faith = rune_scribes group = ynnic } }
			mazhthramazh = { kalyin_conversion_2 = { faith = mazhthramazh group = devandi } }
			askaeorg = { kalyin_conversion_2 = { faith = askaeorg group = devandi } }
			fey_court = { kalyin_conversion_2 = { faith = fey_court group = fey_religion } }
			eordellon = { kalyin_conversion_2 = { faith = eordellon group = fey_religion } }
			spring_court = { kalyin_conversion_2 = { faith = spring_court group = fey_religion } }
			summer_court = { kalyin_conversion_2 = { faith = summer_court group = fey_religion } }
			autumn_court = { kalyin_conversion_2 = { faith = autumn_court group = fey_religion } }
			winter_court = { kalyin_conversion_2 = { faith = winter_court group = fey_religion } }
			ashentree_pact = { kalyin_conversion_2 = { faith = ashentree_pact group = fey_religion } }
			vechnogejzn = { kalyin_conversion_2 = { faith = vechnogejzn group = fey_religion } }
			pactseeker = { kalyin_conversion_2 = { faith = pactseeker group = fey_religion } }
			high_philosophy = { kalyin_conversion_2 = { faith = high_philosophy group = raheni } }
			suhans_praxis = { kalyin_conversion_2 = { faith = suhans_praxis group = raheni } }
			accretive_path = { kalyin_conversion_2 = { faith = accretive_path group = halessi } }
			transmutative_path = { kalyin_conversion_2 = { faith = transmutative_path group = halessi } }
			devouring_path = { kalyin_conversion_2 = { faith = devouring_path group = halessi } }
			mystic_accord = { kalyin_conversion_2 = { faith = mystic_accord group = halessi } }
			bangujonsi = { kalyin_conversion_2 = { faith = bangujonsi group = halessi } }
			umun_omi = { kalyin_conversion_2 = { faith = umun_omi group = supreme_spirit } }
			saanorgegh = { kalyin_conversion_2 = { faith = saanorgegh group = supreme_spirit } }
			levaajan = { kalyin_conversion_2 = { faith = levaajan group = supreme_spirit } }
			un_khudai = { kalyin_conversion_2 = { faith = un_khudai group = supreme_spirit } }
			kodave_followers = { kalyin_conversion_2 = { faith = kodave_followers group = kodave_followers } } #Same group quirks
			yukel_followers = { kalyin_conversion_2 = { faith = yukel_followers group = yukel_followers } }
			enuuk_followers = { kalyin_conversion_2 = { faith = enuuk_followers group = enuuk_followers } }
			kukatodic_religion = { kalyin_conversion_2 = { faith = kukatodic_religion group = kukatodic_religion } }
			yudunyovi = { kalyin_conversion_2 = { faith = yudunyovi group = yudunyovi } }
			feast_of_the_gods = { kalyin_conversion_2 = { faith = feast_of_the_gods group = giantkin } }
			reformed_feast_of_the_gods = { kalyin_conversion_2 = { faith = reformed_feast_of_the_gods group = giantkin } }
			mountain_watchers = { kalyin_conversion_2 = { faith = mountain_watchers group = giantkin } }
			sudomegi = { kalyin_conversion_2 = { faith = sudomegi group = giantkin } }
			irdaeos_worship = { kalyin_conversion_2 = { faith = irdaeos_worship group = centaur_religion } }
			nakavy_avo = { kalyin_conversion_2 = { faith = nakavy_avo group = tanibic_religion } }
			noukahi_pantheon = { kalyin_conversion_2 = { faith = noukahi_pantheon group = tanibic_religion } }
			fangaulan_pantheon = { kalyin_conversion_2 = { faith = fangaulan_pantheon group = tanibic_religion } }
			mother_akasik = { kalyin_conversion_2 = { faith = mother_akasik group = tanibic_religion } }
			night_coven = { kalyin_conversion_2 = { faith = night_coven group = hag_religion } }
			shadow_pact = { kalyin_conversion_2 = { faith = shadow_pact group = hag_religion } }
			anzalkatsa = { kalyin_conversion_2 = { faith = anzalkatsa group = lizardfolk_religion } }
			zaradyrra = { kalyin_conversion_2 = { faith = zaradyrra group = lizardfolk_religion } }
			gotiriei = { kalyin_conversion_2 = { faith = gotiriei group = eltibhen_religion } }
			sky_domain = { kalyin_conversion_2 = { faith = sky_domain group = east_sarhal_religion } }
			beast_memory = { kalyin_conversion_2 = { faith = beast_memory group = east_sarhal_religion } }
			rinta_seekers = { kalyin_conversion_2 = { faith = rinta_seekers group = east_sarhal_religion } }
			habab_zar = { kalyin_conversion_2 = { faith = habab_zar group = east_sarhal_religion } }
			genie_cult = { kalyin_conversion_2 = { faith = genie_cult group = east_sarhal_religion } }
			rioqay_diu = { kalyin_conversion_2 = { faith = rioqay_diu group = amadian_religion } }
		}
	}
}
kalyin_conversion_2 = {
	PREV = {
		if = {
			limit = { NOT = { religion = kalyin_worshippers } }
			change_religion = kalyin_worshippers
		}
		if = {
			limit = { NOT = { has_harmonized_with = $faith$ } }
			add_harmonized_religion = $faith$
			if = {
				limit = { overlord = { has_harmonized_with = $group$ } }
				add_liberty_desire = -100
			}
		}
		if = {
			limit = {
				overlord = { has_country_flag = J33_kalyins_monsters }
				has_country_modifier = monstrous_nation
			}
			remove_country_modifier = monstrous_nation
			every_country = {
				limit = { has_opinion_modifier = { who = ROOT modifier = root_monstrous } }
				remove_opinion = { who = ROOT modifier = root_monstrous }
				reverse_remove_opinion = { who = ROOT modifier = root_monstrous }
			}
			every_country = {
				limit = { has_opinion_modifier = { who = ROOT modifier = semi_monstrous } }
				remove_opinion = { who = ROOT modifier = semi_monstrous }
				reverse_remove_opinion = { who = ROOT modifier = semi_monstrous }
			}
			every_country = {
				limit = { has_opinion_modifier = { who = ROOT modifier = both_monstrous } }
				remove_opinion = { who = ROOT modifier = both_monstrous }
				reverse_remove_opinion = { who = ROOT modifier = both_monstrous }
			}
			set_country_flag = no_longer_monstrous
			clr_country_flag = semi_monstrous
			clr_country_flag = removing_monstrous
		}
		if = {
			limit = { overlord = { has_country_flag = J33_assembled_flag } }
			kalsyto_pan_harmonize = yes
		}
		if = {
			limit = { overlord = { tag = J33 } }
			set_country_flag = kalyin_subject_flag
		}
	}
}

kalsyto_pan_harmonize = { #Needs one for every religious group, and faith in Lake Goddess group
	custom_tooltip = kalsyto_pan_harmonize_tt
	hidden_effect = {
		kalsyto_pan_harmonize_2 = { group = cannorian faith = regent_court }
		kalsyto_pan_harmonize_2 = { group = faithless faith = the_thought }
		kalsyto_pan_harmonize_2 = { group = khetist faith = elikhetist }
		kalsyto_pan_harmonize_2 = { group = gnollish faith = xhazobkult }
		kalsyto_pan_harmonize_2 = { group = dwarven faith = ancestor_worship }
		kalsyto_pan_harmonize_2 = { group = elven faith = elven_forebears }
		kalsyto_pan_harmonize_2 = { group = bulwari faith = bulwari_sun_cult }
		kalsyto_pan_harmonize_2 = { group = gerudian faith = skaldhyrric_faith }
		kalsyto_pan_harmonize_2 = { group = orcish faith = great_dookan }
		kalsyto_pan_harmonize_2 = { group = dragon_cult faith = kobold_dragon_cult }
		kalsyto_pan_harmonize_2 = { group = goblin faith = goblinic_shamanism }
		kalsyto_pan_harmonize_2 = { group = harpy_cults faith = the_hunt }
		kalsyto_pan_harmonize_2 = { group = aelantiri faith = weeping_mother }
		kalsyto_pan_harmonize_2 = { group = cheshoshi_religion faith = death_cult_of_cheshosh }
		kalsyto_pan_harmonize_2 = { group = harafic faith = kalun_masks }
		kalsyto_pan_harmonize_2 = { group = effelai faith = tswohvwohii }
		kalsyto_pan_harmonize_2 = { group = taychendi faith = gods_of_the_taychend }
		kalsyto_pan_harmonize_2 = { group = ynnic faith = ynn_river_worship }
		kalsyto_pan_harmonize_2 = { group = devandi faith = mazhthramazh }
		kalsyto_pan_harmonize_2 = { group = fey_religion faith = fey_court }
		kalsyto_pan_harmonize_2 = { group = raheni faith = high_philosophy }
		kalsyto_pan_harmonize_2 = { group = halessi faith = accretive_path }
		kalsyto_pan_harmonize_2 = { group = supreme_spirit faith = umun_omi}
		kalsyto_pan_harmonize_2 = { group = kodave_followers faith = kodave_followers }
		kalsyto_pan_harmonize_2 = { group = yukel_followers faith = yukel_followers }
		kalsyto_pan_harmonize_2 = { group = enuuk_followers faith = enuuk_followers }
		kalsyto_pan_harmonize_2 = { group = kukatodic_religion faith = kukatodic_religion }
		kalsyto_pan_harmonize_2 = { group = yudunyovi faith = yudunyovi }
		kalsyto_pan_harmonize_2 = { group = giantkin faith = feast_of_the_gods }
		kalsyto_pan_harmonize_2 = { group = centaur_religion faith = irdaeos_worship }
		kalsyto_pan_harmonize_2 = { group = tanibic_religion faith = nakavy_avo }
		kalsyto_pan_harmonize_2 = { group = hag_religion faith = night_coven }
		kalsyto_pan_harmonize_2 = { group = lizardfolk_religion faith = anzalkatsa }
		kalsyto_pan_harmonize_2 = { group = eltibhen_religion faith = gotiriei }
		kalsyto_pan_harmonize_2 = { group = east_sarhal_religion faith = sky_domain }
		kalsyto_pan_harmonize_2 = { group = amadian_religion faith = rioqay_diu }
	}
}
kalsyto_pan_harmonize_2 = {
	if = {
		limit = {
			overlord = { has_harmonized_with = $group$ }
			NOT = { has_harmonized_with = $group$ }
		}
		add_harmonized_religion = $faith$
	}
}

kalsyto_revolution_siege = {
	FROM = { 
		set_revolution_in_province = yes
		owner = {
			if = {
				limit = {
					all_owned_province = {
						OR = {
							has_revolution_in_province = yes 
							NOT = { same_continent = capital }
						}
					}
					NOT = { tag = J33 }
					kalsyto_not_CDS = yes
				}
				if = {
					limit = { NOT = { government = republic } }
					change_government = republic
					change_government_reform_progress = 200
				}
				add_government_reform = revolutionary_republic_reform
			}
		}
	}
}
