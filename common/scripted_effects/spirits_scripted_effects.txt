downgrade_temple_wards = { #Always fired in a temple province scope after the province_modifier is downgraded- not sure if this could/should be changed to a trigger_switch once that's working with has_province_modifier
	hidden_effect = {
		if = {
			limit = { province_id = 4438 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				dhurasidheni_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				dhurasidheni_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4450 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				bubhagama_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				bubhagama_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4397 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				sharaja_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				sharaja_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4469 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				sighajisbid_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				sighajisbid_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4411 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				dhenijansar_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				dhenijansar_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4384 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				mindanan_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				mindanan_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4380 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				sardika_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				sardika_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4417 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				ghundagar_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				ghundagar_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4420 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				sramaya_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				sramaya_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4488 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				maharaaja_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				maharaaja_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4510 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				sarnavan_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				sarnavan_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4527 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				tughayasa_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				tughayasa_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4630 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				sarilavhan_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				sarilavhan_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4465 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				khadisrapur_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				khadisrapur_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4546 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				ghatasak_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				ghatasak_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4633 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				sir_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				sir_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4565 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				bimlau_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				bimlau_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4580 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				khabtei_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				khabtei_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4764 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				mahoang_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				mahoang_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4941 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				lapnam_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				lapnam_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4499 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				khirnadhiman_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				khirnadhiman_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4811 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				jiangshengdian_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				jiangshengdian_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4951 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				samabok_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				samabok_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4839 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				zyuhung_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				zyuhung_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4949 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				luoyi_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				luoyi_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4859 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				yanchung_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				yanchung_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4930 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				lanjincun_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				lanjincun_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4871 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				tianlou_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				tianlou_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4979 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				damaogong_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				damaogong_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4925 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				jondang_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				jondang_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4955 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				keoaden_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				keoaden_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4964 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				brenulan_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				brenulan_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4396 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				phangban_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				phangban_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4570 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				prukakhin_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				prukakhin_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4618 }
			if = {
				limit = { has_province_modifier = damaged_temple_complex }
				shanyutian_temple_area = {
					clr_province_flag = pristine_wards
					set_province_flag = damaged_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						add_permanent_province_modifier = {
							name = rending_unhindered_spirits
							duration = -1
						}
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = derelict_temple_complex }
				shanyutian_temple_area = {
					clr_province_flag = damaged_wards
				}
			}
		}
	}
}

upgrade_temple_wards = { #Always fired in a temple province scope after the province_modifier is upgraded
	hidden_effect = {
		if = {
			limit = { province_id = 4438 }
			if = {
				limit = { has_province_modifier = temple_complex }
				dhurasidheni_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				dhurasidheni_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4450 }
			if = {
				limit = { has_province_modifier = temple_complex }
				bubhagama_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				bubhagama_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4397 }
			if = {
				limit = { has_province_modifier = temple_complex }
				sharaja_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				sharaja_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4469 }
			if = {
				limit = { has_province_modifier = temple_complex }
				sighajisbid_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				sighajisbid_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4411 }
			if = {
				limit = { has_province_modifier = temple_complex }
				dhenijansar_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				dhenijansar_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4384 }
			if = {
				limit = { has_province_modifier = temple_complex }
				mindanan_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				mindanan_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4380 }
			if = {
				limit = { has_province_modifier = temple_complex }
				sardika_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				sardika_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4417 }
			if = {
				limit = { has_province_modifier = temple_complex }
				ghundagar_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				ghundagar_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4420 }
			if = {
				limit = { has_province_modifier = temple_complex }
				sramaya_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				sramaya_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4488 }
			if = {
				limit = { has_province_modifier = temple_complex }
				maharaaja_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				maharaaja_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4510 }
			if = {
				limit = { has_province_modifier = temple_complex }
				sarnavan_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				sarnavan_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4527 }
			if = {
				limit = { has_province_modifier = temple_complex }
				tughayasa_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				tughayasa_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4630 }
			if = {
				limit = { has_province_modifier = temple_complex }
				sarilavhan_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				sarilavhan_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4465 }
			if = {
				limit = { has_province_modifier = temple_complex }
				khadisrapur_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				khadisrapur_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4546 }
			if = {
				limit = { has_province_modifier = temple_complex }
				ghatasak_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				ghatasak_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4633 }
			if = {
				limit = { has_province_modifier = temple_complex }
				sir_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				sir_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4565 }
			if = {
				limit = { has_province_modifier = temple_complex }
				bimlau_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				bimlau_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4580 }
			if = {
				limit = { has_province_modifier = temple_complex }
				khabtei_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				khabtei_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4764 }
			if = {
				limit = { has_province_modifier = temple_complex }
				mahoang_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				mahoang_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4941 }
			if = {
				limit = { has_province_modifier = temple_complex }
				lapnam_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				lapnam_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4499 }
			if = {
				limit = { has_province_modifier = temple_complex }
				khirnadhiman_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				khirnadhiman_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4811 }
			if = {
				limit = { has_province_modifier = temple_complex }
				jiangshengdian_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				jiangshengdian_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4951 }
			if = {
				limit = { has_province_modifier = temple_complex }
				samabok_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				samabok_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4839 }
			if = {
				limit = { has_province_modifier = temple_complex }
				zyuhung_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				zyuhung_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4949 }
			if = {
				limit = { has_province_modifier = temple_complex }
				luoyi_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				luoyi_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4859 }
			if = {
				limit = { has_province_modifier = temple_complex }
				yanchung_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				yanchung_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4930 }
			if = {
				limit = { has_province_modifier = temple_complex }
				lanjincun_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				lanjincun_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4871 }
			if = {
				limit = { has_province_modifier = temple_complex }
				tianlou_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				tianlou_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4979 }
			if = {
				limit = { has_province_modifier = temple_complex }
				damaogong_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				damaogong_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4925 }
			if = {
				limit = { has_province_modifier = temple_complex }
				jondang_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				jondang_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4955 }
			if = {
				limit = { has_province_modifier = temple_complex }
				keoaden_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				keoaden_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4964 }
			if = {
				limit = { has_province_modifier = temple_complex }
				brenulan_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				brenulan_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4396 }
			if = {
				limit = { has_province_modifier = temple_complex }
				phangban_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				phangban_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4570 }
			if = {
				limit = { has_province_modifier = temple_complex }
				prukakhin_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				prukakhin_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
		else_if = {
			limit = { province_id = 4618 }
			if = {
				limit = { has_province_modifier = temple_complex }
				shanyutian_temple_area = {
					clr_province_flag = damaged_wards
					set_province_flag = pristine_wards
					if = {
						limit = {
							had_global_flag = {
								flag = rending_active
								days = 360
							}
						}
						remove_province_modifier = rending_unhindered_spirits
					}
				}
				update_global_ward_strength = yes
			}
			else_if = {
				limit = { has_province_modifier = damaged_temple_complex }
				shanyutian_temple_area = {
					set_province_flag = damaged_wards
				}
			}
		}
	}
}

damage_temple_effect_small = {
	if = {
		limit = {
			has_province_modifier = temple_complex
		}
		remove_province_modifier = temple_complex
		add_permanent_province_modifier = {
			name = damaged_temple_complex
			duration = -1
		}
		downgrade_temple_wards = yes
		setup_temple_restoration_speed = yes
	}
	else_if = {
		limit = {
			has_province_modifier = damaged_temple_complex
		}
		remove_province_modifier = damaged_temple_complex
		add_permanent_province_modifier = {
			name = derelict_temple_complex
			duration = -1
		}
		downgrade_temple_wards = yes
		setup_temple_restoration_speed = yes
	}
	else_if = {
		limit = { 
			NOT = { has_province_modifier = corrupted_temple_complex } 
		}
		remove_province_modifier = derelict_temple_complex
		add_permanent_province_modifier = {
			name = ruined_temple_complex
			duration = -1
		}
	}
	if = {
		limit = {
			province_id = 4925
		}
		add_great_project_tier = {
		    type = temple_of_undying_flame
		    tier = -1
		}
	}
}


corrupt_temple_wards = { #Always fired in a temple province scope, clears other wards + adds corrupted wards to redirect to beacon
	trigger_switch = {
		on_trigger = province_id
		
		4438 = { dhurasidheni_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4450 = { bubhagama_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4397 = { sharaja_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4469 = { sighajisbid_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4411 = { dhenijansar_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4384 = { mindanan_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4380 = { sardika_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4417 = { ghundagar_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4420 = { sramaya_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4488 = { maharaaja_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4510 = { sarnavan_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4527 = { tughayasa_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4630 = { sarilavhan_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4465 = { khadisrapur_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4546 = { ghatasak_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4633 = { sir_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4565 = { bimlau_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4580 = { khabtei_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4764 = { mahoang_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4941 = { lapnam_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4499 = { khirnadhiman_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4811 = { jiangshengdian_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4951 = { samabok_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4839 = { zyuhung_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4949 = { luoyi_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4859 = { yanchung_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4930 = { lanjincun_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4871 = { tianlou_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4979 = { damaogong_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4925 = { jondang_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4955 = { keoaden_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4964 = { brenulan_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4396 = { phangban_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4570 = { prukakhin_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
		4618 = { shanyutian_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards set_province_flag = corrupted_wards } update_global_ward_strength = yes }
	}
}

ruin_temple = { #Always fired in a temple province scope, clears every ward + sets temple to ruined
	if = {
		limit = { has_province_modifier = temple_complex }
		remove_province_modifier = temple_complex
		hidden_effect = { update_global_ward_strength = yes }
	}
	else_if = {
		limit = { has_province_modifier = damaged_temple_complex }
		remove_province_modifier = damaged_temple_complex
		hidden_effect = { update_global_ward_strength = yes }
	}
	else_if = {
		limit = { has_province_modifier = derelict_temple_complex }
		remove_province_modifier = derelict_temple_complex
		hidden_effect = { update_global_ward_strength = yes }
	}
	else_if = {
		limit = { has_province_modifier = corrupted_temple_complex }
		remove_province_triggered_modifier = corrupted_temple_complex
		hidden_effect = { update_global_ward_strength = yes }
	}
	add_permanent_province_modifier = { name = ruined_temple_complex duration = -1 }
	hidden_effect = {
		trigger_switch = {
			on_trigger = province_id
			
			4438 = { dhurasidheni_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
			4450 = { bubhagama_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
			4397 = { sharaja_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
			4469 = { sighajisbid_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
			4411 = { dhenijansar_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
			4384 = { mindanan_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
			4380 = { sardika_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
			4417 = { ghundagar_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
			4420 = { sramaya_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
			4488 = { maharaaja_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
			4510 = { sarnavan_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
			4527 = { tughayasa_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
			4630 = { sarilavhan_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
			4465 = { khadisrapur_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
			4546 = { ghatasak_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
			4633 = { sir_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
			4565 = { bimlau_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
			4580 = { khabtei_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
			4764 = { mahoang_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
			4941 = { lapnam_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
			4499 = { khirnadhiman_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
			4811 = { jiangshengdian_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
			4951 = { samabok_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
			4839 = { zyuhung_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
			4949 = { luoyi_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
			4859 = { yanchung_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
			4930 = { lanjincun_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
			4871 = { tianlou_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
			4979 = { damaogong_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
			4925 = { jondang_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
			4955 = { keoaden_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
			4964 = { brenulan_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
			4396 = { phangban_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
			4570 = { prukakhin_temple_area = { clr_province_flag = pristine_wards clr_province_flag = damaged_wards clr_province_flag = corrupted_wards } }
		}
	}
}

purify_temple_wards = { #Always fired in a temple province scope, clears corrupted wards + applies proper ward flags based on the temple level
	trigger_switch = {
		on_trigger = province_id
		
		4438 = {
			dhurasidheni_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4450 = {
			bubhagama_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4397 = {
			sharaja_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4469 = {
			sighajisbid_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4411 = {
			dhenijansar_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4384 = {
			mindanan_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4380 = {
			sardika_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4417 = {
			ghundagar_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4420 = {
			sramaya_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4488 = {
			maharaaja_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4510 = {
			sarnavan_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4527 = {
			tughayasa_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4630 = {
			sarilavhan_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4465 = {
			khadisrapur_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4546 = {
			ghatasak_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4633 = {
			sir_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4565 = {
			bimlau_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4580 = {
			khabtei_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4764 = {
			mahoang_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4941 = {
			lapnam_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4499 = {
			khirnadhiman_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4811 = {
			jiangshengdian_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4951 = {
			samabok_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4839 = {
			zyuhung_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4949 = {
			luoyi_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4859 = {
			yanchung_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4930 = {
			lanjincun_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4871 = {
			tianlou_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4979 = {
			damaogong_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4925 = {
			jondang_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4955 = {
			keoaden_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4964 = {
			brenulan_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4396 = {
			phangban_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4570 = {
			prukakhin_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
		4618 = {
			shanyutian_temple_area = {
				clr_province_flag = corrupted_wards
				if = {
					limit = { ROOT = { has_province_flag = was_temple_complex } }
					set_province_flag = pristine_wards
					update_global_ward_strength = yes
				}
				else_if = {
					limit = { ROOT = { has_province_flag = was_damaged_temple_complex } }
					set_province_flag = damaged_wards
					update_global_ward_strength = yes
				}
			}
		}
	}
}

define_temple_to_restore = {
	every_owned_province = {
		limit = {
			OR = { 
				has_province_modifier = damaged_temple_complex
				has_province_modifier = derelict_temple_complex 
			} 
			NOT = { has_province_flag = restore_@ROOT } 
			NOT = { has_province_flag = temple_being_plundered } 
			NOT = { has_province_modifier = temple_restoration_efforts } 
			is_city = yes 
			is_core = ROOT 
		}
		calculate_temple_restoration = yes
	}
	every_subject_country = {
		every_owned_province = {
			limit = {
				OR = { 
					has_province_modifier = damaged_temple_complex
					has_province_modifier = derelict_temple_complex 
				} 
				NOT = { has_province_flag = restore_@ROOT } 
				NOT = { has_province_flag = temple_being_plundered } 
				NOT = { has_province_modifier = temple_restoration_efforts } 
				is_city = yes 
				is_core = PREV 
			}
			calculate_temple_restoration_overlord = yes
		}
	}
	random_owned_province = {
		limit = { 
			OR = { 
				has_province_modifier = damaged_temple_complex 
				has_province_modifier = derelict_temple_complex 
			} 
			NOT = { has_province_flag = restore_@ROOT } 
			NOT = { has_province_flag = temple_being_plundered } 
			NOT = { has_province_modifier = temple_restoration_efforts } 
			is_city = yes 
			is_core = ROOT 
		}
		set_province_flag = option_restore_1_@ROOT
		set_province_flag = restore_@ROOT
		save_event_target_as = restore1
		setup_temple_restoration_speed = yes
	}
	random_owned_province = {
		limit = { 
			OR = { 
				has_province_modifier = damaged_temple_complex 
				has_province_modifier = derelict_temple_complex 
			} 
			NOT = { has_province_flag = restore_@ROOT } 
			NOT = { has_province_flag = temple_being_plundered } 
			NOT = { has_province_modifier = temple_restoration_efforts } 
			is_city = yes 
			is_core = ROOT 
		}	
		set_province_flag = option_restore_2_@ROOT
		set_province_flag = restore_@ROOT
		save_event_target_as = restore2
		setup_temple_restoration_speed = yes
	}
	random_owned_province = {
		limit = { 
			OR = { 
				has_province_modifier = damaged_temple_complex 
				has_province_modifier = derelict_temple_complex 
			} 
			NOT = { has_province_flag = restore_@ROOT } 
			NOT = { has_province_flag = temple_being_plundered } 
			NOT = { has_province_modifier = temple_restoration_efforts } 
			is_city = yes 
			is_core = ROOT 
		}		
		set_province_flag = option_restore_3_@ROOT
		set_province_flag = restore_@ROOT
		save_event_target_as = restore3
		setup_temple_restoration_speed = yes
	}
	random_owned_province = {
		limit = { 
			OR = { 
				has_province_modifier = damaged_temple_complex 
				has_province_modifier = derelict_temple_complex 
			} 
			NOT = { has_province_flag = restore_@ROOT } 
			NOT = { has_province_flag = temple_being_plundered } 
			NOT = { has_province_modifier = temple_restoration_efforts } 
			is_city = yes 
			is_core = ROOT 
		}		
		set_province_flag = option_restore_4_@ROOT
		set_province_flag = restore_@ROOT
		save_event_target_as = restore4
		setup_temple_restoration_speed = yes
	}
	random_owned_province = {
		limit = { 
			OR = { 
				has_province_modifier = damaged_temple_complex 
				has_province_modifier = derelict_temple_complex 
			} 
			NOT = { has_province_flag = restore_@ROOT } 
			NOT = { has_province_flag = temple_being_plundered } 
			NOT = { has_province_modifier = temple_restoration_efforts } 
			is_city = yes 
			is_core = ROOT 
		}		
		set_province_flag = option_restore_5_@ROOT
		set_province_flag = restore_@ROOT
		save_event_target_as = restore5
		setup_temple_restoration_speed = yes
	}
	random_owned_province = {
		limit = { 
			OR = { 
				has_province_modifier = damaged_temple_complex 
				has_province_modifier = derelict_temple_complex 
			} 
			NOT = { has_province_flag = restore_@ROOT } 
			NOT = { has_province_flag = temple_being_plundered } 
			NOT = { has_province_modifier = temple_restoration_efforts } 
			is_city = yes 
			is_core = ROOT 
		}		
		set_province_flag = option_restore_6_@ROOT
		set_province_flag = restore_@ROOT
		save_event_target_as = restore6
		setup_temple_restoration_speed = yes
	}
	random_owned_province = {
		limit = { 
			OR = { 
				has_province_modifier = damaged_temple_complex 
				has_province_modifier = derelict_temple_complex 
			} 
			NOT = { has_province_flag = restore_@ROOT } 
			NOT = { has_province_flag = temple_being_plundered } 
			NOT = { has_province_modifier = temple_restoration_efforts } 
			is_city = yes 
			is_core = ROOT 
		}
		set_province_flag = option_restore_7_@ROOT
		set_province_flag = restore_@ROOT
		save_event_target_as = restore7
		setup_temple_restoration_speed = yes
	}
	random_owned_province = {
		limit = { 
			OR = { 
				has_province_modifier = damaged_temple_complex 
				has_province_modifier = derelict_temple_complex 
			} 
			NOT = { has_province_flag = restore_@ROOT } 
			NOT = { has_province_flag = temple_being_plundered } 
			NOT = { has_province_modifier = temple_restoration_efforts } 
			is_city = yes 
			is_core = ROOT 
		}
		set_province_flag = option_restore_8_@ROOT
		set_province_flag = restore_@ROOT
		save_event_target_as = restore8
		setup_temple_restoration_speed = yes
	}
	random_owned_province = {
		limit = { 
			OR = { 
				has_province_modifier = damaged_temple_complex 
				has_province_modifier = derelict_temple_complex 
			} 
			NOT = { has_province_flag = restore_@ROOT } 
			NOT = { has_province_flag = temple_being_plundered } 
			NOT = { has_province_modifier = temple_restoration_efforts } 
			is_city = yes 
			is_core = ROOT 
		}
		set_province_flag = option_restore_9_@ROOT
		set_province_flag = restore_@ROOT
		save_event_target_as = restore9
		setup_temple_restoration_speed = yes
	}
	random_owned_province = {
		limit = { 
			OR = { 
				has_province_modifier = damaged_temple_complex 
				has_province_modifier = derelict_temple_complex 
			} 
			NOT = { has_province_flag = restore_@ROOT } 
			NOT = { has_province_flag = temple_being_plundered } 
			NOT = { has_province_modifier = temple_restoration_efforts } 
			is_city = yes 
			is_core = ROOT 
		}
		set_province_flag = option_restore_10_@ROOT
		set_province_flag = restore_@ROOT
		save_event_target_as = restore10
		setup_temple_restoration_speed = yes
	}
	random_owned_province = {
		limit = { 
			OR = { 
				has_province_modifier = damaged_temple_complex 
				has_province_modifier = derelict_temple_complex 
			} 
			NOT = { has_province_flag = restore_@ROOT } 
			NOT = { has_province_flag = temple_being_plundered } 
			NOT = { has_province_modifier = temple_restoration_efforts } 
			is_city = yes 
			is_core = ROOT 
		}
		set_province_flag = option_restore_11_@ROOT
		set_province_flag = restore_@ROOT
		save_event_target_as = restore11
		setup_temple_restoration_speed = yes
	}
	random_owned_province = {
		limit = { 
			OR = { 
				has_province_modifier = damaged_temple_complex 
				has_province_modifier = derelict_temple_complex 
			} 
			NOT = { has_province_flag = restore_@ROOT } 
			NOT = { has_province_flag = temple_being_plundered } 
			NOT = { has_province_modifier = temple_restoration_efforts } 
			is_city = yes 
			is_core = ROOT 
		}
		set_province_flag = option_restore_12_@ROOT
		set_province_flag = restore_@ROOT
		save_event_target_as = restore12
		setup_temple_restoration_speed = yes
	}
	random_subject_country = {
		limit = {
			AND = {
				has_country_flag = owns_high_temple
				any_owned_province = {
					OR = {
						has_province_modifier = damaged_temple_complex
						has_province_modifier = derelict_temple_complex
					}
					NOT = { has_province_flag = restore_@ROOT }
					NOT = { has_province_flag = temple_being_plundered }
					NOT = { has_province_modifier = temple_restoration_efforts }
					is_city = yes 
					is_core = PREV
				}
			}
		}
		random_owned_province = {
			limit = { 
				OR = { 
					has_province_modifier = damaged_temple_complex 
					has_province_modifier = derelict_temple_complex 
				} 
				NOT = { has_province_flag = restore_@ROOT } 
				NOT = { has_province_flag = temple_being_plundered } 
				NOT = { has_province_modifier = temple_restoration_efforts } 
				is_city = yes 
				is_core = PREV 
			}
			set_province_flag = option_restore_13_@ROOT
			set_province_flag = restore_@ROOT
			save_event_target_as = restore13
			setup_temple_restoration_speed = yes
		}
	}
	
	random_subject_country = {
		limit = {
			AND = {
				has_country_flag = owns_high_temple
				any_owned_province = {
					OR = {
						has_province_modifier = damaged_temple_complex
						has_province_modifier = derelict_temple_complex
					}
					NOT = { has_province_flag = restore_@ROOT }
					NOT = { has_province_flag = temple_being_plundered }
					NOT = { has_province_modifier = temple_restoration_efforts }
					is_city = yes 
					is_core = PREV
				}
			}
		}
		random_owned_province = {
			limit = { 
				OR = { 
					has_province_modifier = damaged_temple_complex 
					has_province_modifier = derelict_temple_complex 
				} 
				NOT = { has_province_flag = restore_@ROOT } 
				NOT = { has_province_flag = temple_being_plundered } 
				NOT = { has_province_modifier = temple_restoration_efforts } 
				is_city = yes 
				is_core = PREV 
			}		
			set_province_flag = option_restore_14_@ROOT
			set_province_flag = restore_@ROOT
			save_event_target_as = restore14
			setup_temple_restoration_speed = yes
		}
	}
	random_subject_country = {
		limit = {
			AND = {
				has_country_flag = owns_high_temple
				any_owned_province = {
					OR = {
						has_province_modifier = damaged_temple_complex
						has_province_modifier = derelict_temple_complex
					}
					NOT = { has_province_flag = restore_@ROOT }
					NOT = { has_province_flag = temple_being_plundered }
					NOT = { has_province_modifier = temple_restoration_efforts }
					is_city = yes 
					is_core = PREV
				}
			}
		}
		random_owned_province = {
			limit = { 
				OR = { 
					has_province_modifier = damaged_temple_complex 
					has_province_modifier = derelict_temple_complex 
				} 
				NOT = { has_province_flag = restore_@ROOT } 
				NOT = { has_province_flag = temple_being_plundered } 
				NOT = { has_province_modifier = temple_restoration_efforts } 
				is_city = yes 
				is_core = PREV 
			}		
			set_province_flag = option_restore_15_@ROOT
			set_province_flag = restore_@ROOT
			save_event_target_as = restore15
			setup_temple_restoration_speed = yes
		}
	}
	random_subject_country = {
		limit = {
			AND = {
				has_country_flag = owns_high_temple
				any_owned_province = {
					OR = {
						has_province_modifier = damaged_temple_complex
						has_province_modifier = derelict_temple_complex
					}
					NOT = { has_province_flag = restore_@ROOT }
					NOT = { has_province_flag = temple_being_plundered }
					NOT = { has_province_modifier = temple_restoration_efforts }
					is_city = yes 
					is_core = PREV
				}
			}
		}
		random_owned_province = {
			limit = { 
				OR = { 
					has_province_modifier = damaged_temple_complex 
					has_province_modifier = derelict_temple_complex 
				} 
				NOT = { has_province_flag = restore_@ROOT } 
				NOT = { has_province_flag = temple_being_plundered } 
				NOT = { has_province_modifier = temple_restoration_efforts } 
				is_city = yes 
				is_core = PREV 
			}		
			set_province_flag = option_restore_16_@ROOT
			set_province_flag = restore_@ROOT
			save_event_target_as = restore16
			setup_temple_restoration_speed = yes
		}
	}
	random_subject_country = {
		limit = {
			AND = {
				has_country_flag = owns_high_temple
				any_owned_province = {
					OR = {
						has_province_modifier = damaged_temple_complex
						has_province_modifier = derelict_temple_complex
					}
					NOT = { has_province_flag = restore_@ROOT }
					NOT = { has_province_flag = temple_being_plundered }
					NOT = { has_province_modifier = temple_restoration_efforts }
					is_city = yes 
					is_core = PREV
				}
			}
		}
		random_owned_province = {
			limit = { 
				OR = { 
					has_province_modifier = damaged_temple_complex 
					has_province_modifier = derelict_temple_complex 
				} 
				NOT = { has_province_flag = restore_@ROOT } 
				NOT = { has_province_flag = temple_being_plundered } 
				NOT = { has_province_modifier = temple_restoration_efforts } 
				is_city = yes 
				is_core = PREV 
			}		
			set_province_flag = option_restore_17_@ROOT
			set_province_flag = restore_@ROOT
			save_event_target_as = restore17
			setup_temple_restoration_speed = yes
		}
	}
	random_subject_country = {
		limit = {
			AND = {
				has_country_flag = owns_high_temple
				any_owned_province = {
					OR = {
						has_province_modifier = damaged_temple_complex
						has_province_modifier = derelict_temple_complex
					}
					NOT = { has_province_flag = restore_@ROOT }
					NOT = { has_province_flag = temple_being_plundered }
					NOT = { has_province_modifier = temple_restoration_efforts }
					is_city = yes 
					is_core = PREV
				}
			}
		}
		random_owned_province = {
			limit = { 
				OR = { 
					has_province_modifier = damaged_temple_complex 
					has_province_modifier = derelict_temple_complex 
				} 
				NOT = { has_province_flag = restore_@ROOT } 
				NOT = { has_province_flag = temple_being_plundered } 
				NOT = { has_province_modifier = temple_restoration_efforts } 
				is_city = yes 
				is_core = PREV 
			}		
			set_province_flag = option_restore_18_@ROOT
			set_province_flag = restore_@ROOT
			save_event_target_as = restore18
			setup_temple_restoration_speed = yes
		}
	}
	random_subject_country = {
		limit = {
			AND = {
				has_country_flag = owns_high_temple
				any_owned_province = {
					OR = {
						has_province_modifier = damaged_temple_complex
						has_province_modifier = derelict_temple_complex
					}
					NOT = { has_province_flag = restore_@ROOT }
					NOT = { has_province_flag = temple_being_plundered }
					NOT = { has_province_modifier = temple_restoration_efforts }
					is_city = yes 
					is_core = PREV
				}
			}
		}
		random_owned_province = {
			limit = { 
				OR = { 
					has_province_modifier = damaged_temple_complex 
					has_province_modifier = derelict_temple_complex 
				} 
				NOT = { has_province_flag = restore_@ROOT } 
				NOT = { has_province_flag = temple_being_plundered } 
				NOT = { has_province_modifier = temple_restoration_efforts } 
				is_city = yes 
				is_core = PREV 
			}		
			set_province_flag = option_restore_19_@ROOT
			set_province_flag = restore_@ROOT
			save_event_target_as = restore19
			setup_temple_restoration_speed = yes
		}
	}
	random_subject_country = {
		limit = {
			AND = {
				has_country_flag = owns_high_temple
				any_owned_province = {
					OR = {
						has_province_modifier = damaged_temple_complex
						has_province_modifier = derelict_temple_complex
					}
					NOT = { has_province_flag = restore_@ROOT }
					NOT = { has_province_flag = temple_being_plundered }
					NOT = { has_province_modifier = temple_restoration_efforts }
					is_city = yes 
					is_core = PREV
				}
			}
		}
		random_owned_province = {
			limit = { 
				OR = { 
					has_province_modifier = damaged_temple_complex 
					has_province_modifier = derelict_temple_complex 
				} 
				NOT = { has_province_flag = restore_@ROOT } 
				NOT = { has_province_flag = temple_being_plundered } 
				NOT = { has_province_modifier = temple_restoration_efforts } 
				is_city = yes 
				is_core = PREV 
			}		
			set_province_flag = option_restore_20_@ROOT
			set_province_flag = restore_@ROOT
			save_event_target_as = restore20
			setup_temple_restoration_speed = yes
		}
	}
	random_subject_country = {
		limit = {
			AND = {
				has_country_flag = owns_high_temple
				any_owned_province = {
					OR = {
						has_province_modifier = damaged_temple_complex
						has_province_modifier = derelict_temple_complex
					}
					NOT = { has_province_flag = restore_@ROOT }
					NOT = { has_province_flag = temple_being_plundered }
					NOT = { has_province_modifier = temple_restoration_efforts }
					is_city = yes 
					is_core = PREV
				}
			}
		}
		random_owned_province = {
			limit = { 
				OR = { 
					has_province_modifier = damaged_temple_complex 
					has_province_modifier = derelict_temple_complex 
				} 
				NOT = { has_province_flag = restore_@ROOT } 
				NOT = { has_province_flag = temple_being_plundered } 
				NOT = { has_province_modifier = temple_restoration_efforts } 
				is_city = yes 
				is_core = PREV 
			}		
			set_province_flag = option_restore_21_@ROOT
			set_province_flag = restore_@ROOT
			save_event_target_as = restore21
			setup_temple_restoration_speed = yes
		}
	}
	random_subject_country = {
		limit = {
			AND = {
				has_country_flag = owns_high_temple
				any_owned_province = {
					OR = {
						has_province_modifier = damaged_temple_complex
						has_province_modifier = derelict_temple_complex
					}
					NOT = { has_province_flag = restore_@ROOT }
					NOT = { has_province_flag = temple_being_plundered }
					NOT = { has_province_modifier = temple_restoration_efforts }
					is_city = yes 
					is_core = PREV
				}
			}
		}
		random_owned_province = {
			limit = { 
				OR = { 
					has_province_modifier = damaged_temple_complex 
					has_province_modifier = derelict_temple_complex 
				} 
				NOT = { has_province_flag = restore_@ROOT } 
				NOT = { has_province_flag = temple_being_plundered } 
				NOT = { has_province_modifier = temple_restoration_efforts } 
				is_city = yes 
				is_core = PREV 
			}		
			set_province_flag = option_restore_22_@ROOT
			set_province_flag = restore_@ROOT
			save_event_target_as = restore22
			setup_temple_restoration_speed = yes
		}
	}
	random_subject_country = {
		limit = {
			AND = {
				has_country_flag = owns_high_temple
				any_owned_province = {
					OR = {
						has_province_modifier = damaged_temple_complex
						has_province_modifier = derelict_temple_complex
					}
					NOT = { has_province_flag = restore_@ROOT }
					NOT = { has_province_flag = temple_being_plundered }
					NOT = { has_province_modifier = temple_restoration_efforts }
					is_city = yes 
					is_core = PREV
				}
			}
		}
		random_owned_province = {
			limit = { 
				OR = { 
					has_province_modifier = damaged_temple_complex 
					has_province_modifier = derelict_temple_complex 
				} 
				NOT = { has_province_flag = restore_@ROOT } 
				NOT = { has_province_flag = temple_being_plundered } 
				NOT = { has_province_modifier = temple_restoration_efforts } 
				is_city = yes 
				is_core = PREV 
			}		
			set_province_flag = option_restore_23_@ROOT
			set_province_flag = restore_@ROOT
			save_event_target_as = restore23
			setup_temple_restoration_speed = yes
		}
	}
	random_subject_country = {
		limit = {
			AND = {
				has_country_flag = owns_high_temple
				any_owned_province = {
					OR = {
						has_province_modifier = damaged_temple_complex
						has_province_modifier = derelict_temple_complex
					}
					NOT = { has_province_flag = restore_@ROOT }
					NOT = { has_province_flag = temple_being_plundered }
					NOT = { has_province_modifier = temple_restoration_efforts }
					is_city = yes 
					is_core = PREV
				}
			}
		}
		random_owned_province = {
			limit = { 
				OR = { 
					has_province_modifier = damaged_temple_complex 
					has_province_modifier = derelict_temple_complex 
				} 
				NOT = { has_province_flag = restore_@ROOT } 
				NOT = { has_province_flag = temple_being_plundered } 
				NOT = { has_province_modifier = temple_restoration_efforts } 
				is_city = yes 
				is_core = PREV 
			}		
			set_province_flag = option_restore_24_@ROOT
			set_province_flag = restore_@ROOT
			save_event_target_as = restore24
			setup_temple_restoration_speed = yes
		}
	}
}

setup_temple_restoration_speed = {
	hidden_effect = {
		set_variable = { which = RestorationSpeed value = 0 }
		change_variable = { which = RestorationSpeed value = 5 } 
		trigger_switch = {
			on_trigger = development
			
			40 = { change_variable = { which = RestorationSpeed value = 7 } }
			30 = { change_variable = { which = RestorationSpeed value = 5 } }
			20 = { change_variable = { which = RestorationSpeed value = 3 } }
			10 = { change_variable = { which = RestorationSpeed value = 1 } }
		}
		if = {
			limit = {
				has_local_modifier_value = {
					which = local_build_time
					value = -0.1
				}
			}
			change_variable = { which = RestorationSpeed value = 1 }
		}
		if = {
			limit = {
				has_local_modifier_value = {
					which = local_build_time
					value = -0.2
				}
			}
			change_variable = { which = RestorationSpeed value = 1 }
		}
		if = {
			limit = {
				has_local_modifier_value = {
					which = local_build_time
					value = -0.3
				}
			}
			change_variable = { which = RestorationSpeed value = 1 }
		}
		if = {
			limit = {
				has_local_modifier_value = {
					which = local_build_time
					value = 0.1
				}
			}
			subtract_variable = { which = RestorationSpeed value = 1 }
		}
		if = {
			limit = {
				has_local_modifier_value = {
					which = local_build_time
					value = 0.2
				}
			}
			subtract_variable = { which = RestorationSpeed value = 1 }
		}
		if = {
			limit = { owner = { corruption = 1 } }
			subtract_variable = { which = RestorationSpeed value = 1 }
		}
		if = {
			limit = { owner = { corruption = 3 } }
			subtract_variable = { which = RestorationSpeed value = 1 }
		}
		#clamp value to 15 or lower
		if = {
			limit = { check_variable = { which = RestorationSpeed value = 16 } }
			set_variable = { which = RestorationSpeed value = 15 }
		}
		#clamp value to 1 or higher
		if = {
			limit = { NOT = { check_variable = { which = RestorationSpeed value = 1 } } }
			set_variable = { which = RestorationSpeed value = 1 }
		}
	}
}

begin_temple_restoration = {	#The province event removes temple_restoration_efforts
	if = {
		limit = { has_province_modifier = damaged_temple_complex }
		if = { limit = { is_variable_equal = { which = RestorationSpeed value = 15 } } add_permanent_province_modifier = { name = temple_restoration_efforts duration = 730 } hidden_effect = { province_event = { id = spirits.004 days = 729 } } }
		if = { limit = { is_variable_equal = { which = RestorationSpeed value = 14 } } add_permanent_province_modifier = { name = temple_restoration_efforts duration = 820 } hidden_effect = { province_event = { id = spirits.004 days = 819 } } }
		if = { limit = { is_variable_equal = { which = RestorationSpeed value = 13 } } add_permanent_province_modifier = { name = temple_restoration_efforts duration = 910 } hidden_effect = { province_event = { id = spirits.004 days = 909 } } }
		if = { limit = { is_variable_equal = { which = RestorationSpeed value = 12 } } add_permanent_province_modifier = { name = temple_restoration_efforts duration = 1000 } hidden_effect = { province_event = { id = spirits.004 days = 999 } } }
		if = { limit = { is_variable_equal = { which = RestorationSpeed value = 11 } } add_permanent_province_modifier = { name = temple_restoration_efforts duration = 1095 } hidden_effect = { province_event = { id = spirits.004 days = 1094 } } }
		if = { limit = { is_variable_equal = { which = RestorationSpeed value = 10 } } add_permanent_province_modifier = { name = temple_restoration_efforts duration = 1185 } hidden_effect = { province_event = { id = spirits.004 days = 1184 } } }
		if = { limit = { is_variable_equal = { which = RestorationSpeed value = 9 } } add_permanent_province_modifier = { name = temple_restoration_efforts duration = 1275 } hidden_effect = { province_event = { id = spirits.004 days = 1274 } } }
		if = { limit = { is_variable_equal = { which = RestorationSpeed value = 8 } } add_permanent_province_modifier = { name = temple_restoration_efforts duration = 1460 } hidden_effect = { province_event = { id = spirits.004 days = 1459 } } }
		if = { limit = { is_variable_equal = { which = RestorationSpeed value = 7 } } add_permanent_province_modifier = { name = temple_restoration_efforts duration = 1640 } hidden_effect = { province_event = { id = spirits.004 days = 1639 } } }
		if = { limit = { is_variable_equal = { which = RestorationSpeed value = 6 } } add_permanent_province_modifier = { name = temple_restoration_efforts duration = 1825 } hidden_effect = { province_event = { id = spirits.004 days = 1824 } } }
		if = { limit = { is_variable_equal = { which = RestorationSpeed value = 5 } } add_permanent_province_modifier = { name = temple_restoration_efforts duration = 2190 } hidden_effect = { province_event = { id = spirits.004 days = 2189 } } }
		if = { limit = { is_variable_equal = { which = RestorationSpeed value = 4 } } add_permanent_province_modifier = { name = temple_restoration_efforts duration = 2555 } hidden_effect = { province_event = { id = spirits.004 days = 2554 } } }
		if = { limit = { is_variable_equal = { which = RestorationSpeed value = 3 } } add_permanent_province_modifier = { name = temple_restoration_efforts duration = 2920 } hidden_effect = { province_event = { id = spirits.004 days = 2919 } } }
		if = { limit = { is_variable_equal = { which = RestorationSpeed value = 2 } } add_permanent_province_modifier = { name = temple_restoration_efforts duration = 3285 } hidden_effect = { province_event = { id = spirits.004 days = 3284 } } }
		if = { limit = { is_variable_equal = { which = RestorationSpeed value = 1 } } add_permanent_province_modifier = { name = temple_restoration_efforts duration = 3650 } hidden_effect = { province_event = { id = spirits.004 days = 3649 } } }
	}
	if = { #else_if is broken, do NOT change this "if" back until else_if is fixed - Armitage
		limit = { has_province_modifier = derelict_temple_complex }
		if = { limit = { is_variable_equal = { which = RestorationSpeed value = 15 } } add_permanent_province_modifier = { name = temple_restoration_efforts duration = 2920 } hidden_effect = { province_event = { id = spirits.004 days = 2919 } } }
		if = { limit = { is_variable_equal = { which = RestorationSpeed value = 14 } } add_permanent_province_modifier = { name = temple_restoration_efforts duration = 3285 } hidden_effect = { province_event = { id = spirits.004 days = 3284 } } }
		if = { limit = { is_variable_equal = { which = RestorationSpeed value = 13 } } add_permanent_province_modifier = { name = temple_restoration_efforts duration = 3650 } hidden_effect = { province_event = { id = spirits.004 days = 3649 } } }
		if = { limit = { is_variable_equal = { which = RestorationSpeed value = 12 } } add_permanent_province_modifier = { name = temple_restoration_efforts duration = 4015 } hidden_effect = { province_event = { id = spirits.004 days = 4014 } } }
		if = { limit = { is_variable_equal = { which = RestorationSpeed value = 11 } } add_permanent_province_modifier = { name = temple_restoration_efforts duration = 4380 } hidden_effect = { province_event = { id = spirits.004 days = 4379 } } }
		if = { limit = { is_variable_equal = { which = RestorationSpeed value = 10 } } add_permanent_province_modifier = { name = temple_restoration_efforts duration = 4745 } hidden_effect = { province_event = { id = spirits.004 days = 4744 } } }
		if = { limit = { is_variable_equal = { which = RestorationSpeed value = 9 } } add_permanent_province_modifier = { name = temple_restoration_efforts duration = 5110 } hidden_effect = { province_event = { id = spirits.004 days = 5109 } } }
		if = { limit = { is_variable_equal = { which = RestorationSpeed value = 8 } } add_permanent_province_modifier = { name = temple_restoration_efforts duration = 5840 } hidden_effect = { province_event = { id = spirits.004 days = 5839 } } }
		if = { limit = { is_variable_equal = { which = RestorationSpeed value = 7 } } add_permanent_province_modifier = { name = temple_restoration_efforts duration = 6570 } hidden_effect = { province_event = { id = spirits.004 days = 6569 } } }
		if = { limit = { is_variable_equal = { which = RestorationSpeed value = 6 } } add_permanent_province_modifier = { name = temple_restoration_efforts duration = 7300 } hidden_effect = { province_event = { id = spirits.004 days = 7299 } } }
		if = { limit = { is_variable_equal = { which = RestorationSpeed value = 5 } } add_permanent_province_modifier = { name = temple_restoration_efforts duration = 8030 } hidden_effect = { province_event = { id = spirits.004 days = 8029 } } }
		if = { limit = { is_variable_equal = { which = RestorationSpeed value = 4 } } add_permanent_province_modifier = { name = temple_restoration_efforts duration = 8760 } hidden_effect = { province_event = { id = spirits.004 days = 8759 } } }
		if = { limit = { is_variable_equal = { which = RestorationSpeed value = 3 } } add_permanent_province_modifier = { name = temple_restoration_efforts duration = 9490 } hidden_effect = { province_event = { id = spirits.004 days = 9489 } } }
		if = { limit = { is_variable_equal = { which = RestorationSpeed value = 2 } } add_permanent_province_modifier = { name = temple_restoration_efforts duration = 10220 } hidden_effect = { province_event = { id = spirits.004 days = 10219 } } }
		if = { limit = { is_variable_equal = { which = RestorationSpeed value = 1 } } add_permanent_province_modifier = { name = temple_restoration_efforts duration = 10950 } hidden_effect = { province_event = { id = spirits.004 days = 10949 } } }
	}
	hidden_effect = {
		[[owner_restorer] calculate_temple_restoration = yes ]
		[[overlord_restorer] calculate_temple_restoration_overlord = yes ]
		PREV = {
			change_variable = {
				which = NumTemplesRestoring #adding it for real
				value = 1
			}
			var_effect = { effect = add_treasury var = TreasuryCost sign = - }
			var_effect = { effect = add_adm_power var = AdmPowerCost sign = - }
			var_effect = { effect = add_dip_power var = DipPowerCost sign = - }
			var_effect = { effect = add_mil_power var = MilPowerCost sign = - }
		}
	}
}

calculate_temple_restoration = {
	
	owner = {
		export_to_variable = {
			which = CurrentTreasury
			value = treasury
		}
		export_to_variable = {
			which = CurrentAdmPower
			value = trigger_value:adm_power
		}
		export_to_variable = {
			which = CurrentDipPower
			value = trigger_value:dip_power
		}
		export_to_variable = {
			which = CurrentMilPower
			value = trigger_value:mil_power
		}
	}
	set_variable = { #copy country variables to province
		which = CurrentTreasury
		which = PREV
	}
	set_variable = {
		which = CurrentAdmPower
		which = PREV
	}
	set_variable = {
		which = CurrentDipPower
		which = PREV
	}
	set_variable = {
		which = CurrentMilPower
		which = PREV
	}
	if = {
		limit = { has_province_modifier = damaged_temple_complex }
		set_variable = {
			which = PowerCost
			value = 50
		}
		set_variable = {
			which = TreasuryCost
			value = 100
		}
	}
	else_if = {
		limit = { has_province_modifier = derelict_temple_complex }
		set_variable = {
			which = PowerCost
			value = 50
		}
		set_variable = {
			which = TreasuryCost
			value = 250
		}
	}
	if = {
		limit = { owner = { corruption = 5 } }
		multiply_variable = {
			which = TreasuryCost
			value = 2
		}
	}
	else_if = {
		limit = { owner = { corruption = 3 } }
		multiply_variable = {
			which = TreasuryCost
			value = 1.5
		}
	}
	else_if = {
		limit = { owner = { corruption = 1 } }
		multiply_variable = {
			which = TreasuryCost
			value = 1.25
		}
	}
	if = {
		limit = {
			OR = {
				#Add half-cost flags and stuff here
				owner = { has_country_flag = command_oni_temple_stewardship_flag }
			}
		}
		divide_variable = {
			which = TreasuryCost
			value = 2
		}
		divide_variable = {
			which = PowerCost
			value = 2
		}
	}
	if = { #AI doesnt pay real cost
		limit = {
			owner = { ai = yes }
		}
		set_variable = {
			which = TreasuryCost
			value = 100
		}
		set_variable = {
			which = PowerCost
			value = 25
		}
	}
	owner = { #copy province variables to country, do variable math
		set_variable = {
			which = PowerCost
			which = PREV
		}
		set_variable = {
			which = TreasuryCost
			which = PREV
		}
		set_variable = {
			which = TimesMultiplied
			value = 0
		}
		while = {
			limit = { #add 25% per restoration in progress
				check_variable = {
					which = NumTemplesRestoring
					value = 1
				}
				NOT = {
					check_variable = {
						which = TimesMultiplied
						which = NumTemplesRestoring
					}
				}
			}
			multiply_variable = {
				which = PowerCost
				value = 1.25
			}
			multiply_variable = {
				which = TreasuryCost
				value = 1.25
			}
			change_variable = {
				which = TimesMultiplied
				value = 1
			}
		}
		set_variable = {
			which = AdmPowerCost
			which = PowerCost
		}
		set_variable = {
			which = DipPowerCost
			which = PowerCost
		}
		set_variable = {
			which = MilPowerCost
			which = PowerCost
		}	
	}
	set_variable = { #copy owner values to province
		which = AdmPowerCost
		which = owner
	}
	set_variable = {
		which = DipPowerCost
		which = owner
	}
	set_variable = {
		which = MilPowerCost
		which = owner
	}
	set_variable = {
		which = TreasuryCost
		which = owner
	}
}

calculate_temple_restoration_overlord = {
	
	owner = { overlord = { save_event_target_as = restorer } }
	
	event_target:restorer = {
		export_to_variable = {
			which = CurrentTreasury
			value = treasury
		}
		export_to_variable = {
			which = CurrentAdmPower
			value = trigger_value:adm_power
		}
		export_to_variable = {
			which = CurrentDipPower
			value = trigger_value:dip_power
		}
		export_to_variable = {
			which = CurrentMilPower
			value = trigger_value:mil_power
		}
	}
	set_variable = { #copy country variables to province
		which = CurrentTreasury
		which = event_target:restorer
	}
	set_variable = {
		which = CurrentAdmPower
		which = event_target:restorer
	}
	set_variable = {
		which = CurrentDipPower
		which = event_target:restorer
	}
	set_variable = {
		which = CurrentMilPower
		which = event_target:restorer
	}
	if = {
		limit = { has_province_modifier = damaged_temple_complex }
		set_variable = {
			which = PowerCost
			value = 50
		}
		set_variable = {
			which = TreasuryCost
			value = 100
		}
	}
	else_if = {
		limit = { has_province_modifier = derelict_temple_complex }
		set_variable = {
			which = PowerCost
			value = 50
		}
		set_variable = {
			which = TreasuryCost
			value = 250
		}
	}
	if = {
		limit = { event_target:restorer = { corruption = 5 } }
		multiply_variable = {
			which = TreasuryCost
			value = 2
		}
	}
	else_if = {
		limit = { event_target:restorer = { corruption = 3 } }
		multiply_variable = {
			which = TreasuryCost
			value = 1.5
		}
	}
	else_if = {
		limit = { event_target:restorer = { corruption = 1 } }
		multiply_variable = {
			which = TreasuryCost
			value = 1.25
		}
	}
	if = {
		limit = {
			OR = {
				#Add half-cost flags and stuff here
				event_target:restorer = { has_country_flag = command_oni_temple_stewardship_flag }
			}
		}
		divide_variable = {
			which = TreasuryCost
			value = 2
		}
		divide_variable = {
			which = PowerCost
			value = 2
		}
	}
	if = { #AI doesnt pay real cost
		limit = {
			event_target:restorer = { ai = yes }
		}
		set_variable = {
			which = TreasuryCost
			value = 100
		}
		set_variable = {
			which = PowerCost
			value = 25
		}
	}
	event_target:restorer = { #copy province variables to country, do variable math
		set_variable = {
			which = PowerCost
			which = PREV
		}
		set_variable = {
			which = TreasuryCost
			which = PREV
		}
		set_variable = {
			which = TimesMultiplied
			value = 0
		}
		while = {
			limit = { #add 25% per restoration in progress
				check_variable = {
					which = NumTemplesRestoring
					value = 1
				}
				NOT = {
					check_variable = {
						which = TimesMultiplied
						which = NumTemplesRestoring
					}
				}
			}
			multiply_variable = {
				which = PowerCost
				value = 1.25
			}
			multiply_variable = {
				which = TreasuryCost
				value = 1.25
			}
			change_variable = {
				which = TimesMultiplied
				value = 1
			}
		}
		set_variable = {
			which = AdmPowerCost
			which = PowerCost
		}
		set_variable = {
			which = DipPowerCost
			which = PowerCost
		}
		set_variable = {
			which = MilPowerCost
			which = PowerCost
		}	
	}
	set_variable = { #copy owner values to province
		which = AdmPowerCost
		which = event_target:restorer
	}
	set_variable = {
		which = DipPowerCost
		which = event_target:restorer
	}
	set_variable = {
		which = MilPowerCost
		which = event_target:restorer
	}
	set_variable = {
		which = TreasuryCost
		which = event_target:restorer
	}
}

end_temple_quest = {
	clr_country_flag = party_leader_is_fighter
	clr_country_flag = party_leader_is_rogue
	clr_country_flag = party_leader_is_barbarian
	clr_country_flag = party_leader_is_monk
	clr_country_flag = party_leader_is_bard
	clr_country_flag = party_leader_is_artificer
	clr_country_flag = party_leader_is_evoker
	clr_country_flag = party_leader_is_diviner
	clr_country_flag = party_leader_is_necromancer
	clr_country_flag = temple_quest_ongoing
	event_target:temple_quest_target = { clr_province_flag = temple_being_quested }
	add_country_modifier = {
		name = temple_quest_cooldown
		duration = 730
		hidden = yes
	}
}

temple_quest_cash_out = {
	hidden_effect = { 
		multiply_variable = { which = RelicsLoot value = 5 }
		currency_effect = { currency=treasury addTo=ROOT which=RelicsLoot }
		multiply_variable = { which = CoresLoot value = 100 }
		currency_effect = { currency=treasury addTo=ROOT which=CoresLoot }
	}
}

temple_quest_roll_next_encounter = {
	if = {
		limit = { has_country_flag = temple_quest_start_count }
		clr_country_flag = temple_quest_start_count
	}
	else = {
		change_variable = { which = TempleQuestFloor value = 1 }
	}
	clr_country_flag = golem_clear_desc1
	clr_country_flag = golem_wounded_desc1
	clr_country_flag = golem_killed_desc1
	clr_country_flag = golem_clear_desc2
	clr_country_flag = golem_wounded_desc2
	clr_country_flag = golem_killed_desc2
	clr_country_flag = golem_clear_desc3
	clr_country_flag = golem_wounded_desc3
	clr_country_flag = golem_killed_desc3
	clr_country_flag = golem_clear_desc4
	clr_country_flag = golem_wounded_desc4
	clr_country_flag = golem_killed_desc4
	clr_country_flag = golem_clear_desc5
	clr_country_flag = golem_wounded_desc5
	clr_country_flag = golem_killed_desc5
	clr_country_flag = golem_clear_desc6
	clr_country_flag = golem_wounded_desc6
	clr_country_flag = golem_killed_desc6
	clr_country_flag = golem_clear_desc7
	clr_country_flag = golem_wounded_desc7
	clr_country_flag = golem_killed_desc7
	clr_country_flag = golem_clear_desc8
	clr_country_flag = golem_wounded_desc8
	clr_country_flag = golem_killed_desc8
	clr_country_flag = golem_clear_desc9
	clr_country_flag = golem_wounded_desc9
	clr_country_flag = golem_killed_desc9
	clr_country_flag = golem_clear_desc10
	clr_country_flag = golem_wounded_desc10
	clr_country_flag = golem_killed_desc10
	clr_country_flag = golem_clear_desc11
	clr_country_flag = golem_wounded_desc11
	clr_country_flag = golem_killed_desc11
	clr_country_flag = golem_clear_desc12
	clr_country_flag = golem_wounded_desc12
	clr_country_flag = golem_killed_desc12
	clr_country_flag = golem_clear_desc13
	clr_country_flag = golem_wounded_desc13
	clr_country_flag = golem_killed_desc13
	clr_country_flag = golem_clear_desc14
	clr_country_flag = golem_wounded_desc14
	clr_country_flag = golem_killed_desc14
	clr_country_flag = golem_clear_desc15
	clr_country_flag = golem_wounded_desc15
	clr_country_flag = golem_killed_desc15
	clr_country_flag = golem_clear_desc16
	clr_country_flag = golem_wounded_desc16
	clr_country_flag = golem_killed_desc16
	clr_country_flag = golem_clear_desc17
	clr_country_flag = golem_wounded_desc17
	clr_country_flag = golem_killed_desc17
	clr_country_flag = golem_clear_desc18
	clr_country_flag = golem_wounded_desc18
	clr_country_flag = golem_killed_desc18
	clr_country_flag = trap_clear_desc1
	clr_country_flag = trap_wounded_desc1
	clr_country_flag = trap_killed_desc1
	clr_country_flag = trap_clear_desc2
	clr_country_flag = trap_wounded_desc2
	clr_country_flag = trap_killed_desc2
	clr_country_flag = trap_clear_desc3
	clr_country_flag = trap_wounded_desc3
	clr_country_flag = trap_killed_desc3
	clr_country_flag = trap_clear_desc4
	clr_country_flag = trap_wounded_desc4
	clr_country_flag = trap_killed_desc4
	clr_country_flag = trap_clear_desc5
	clr_country_flag = trap_wounded_desc5
	clr_country_flag = trap_killed_desc5
	clr_country_flag = trap_clear_desc6
	clr_country_flag = trap_wounded_desc6
	clr_country_flag = trap_killed_desc6
	clr_country_flag = trap_clear_desc7
	clr_country_flag = trap_wounded_desc7
	clr_country_flag = trap_killed_desc7
	clr_country_flag = trap_clear_desc8
	clr_country_flag = trap_wounded_desc8
	clr_country_flag = trap_killed_desc8
	clr_country_flag = trap_clear_desc9
	clr_country_flag = trap_wounded_desc9
	clr_country_flag = trap_killed_desc9
	clr_country_flag = trap_clear_desc10
	clr_country_flag = trap_wounded_desc10
	clr_country_flag = trap_killed_desc10
	clr_country_flag = trap_clear_desc11
	clr_country_flag = trap_wounded_desc11
	clr_country_flag = trap_killed_desc11
	clr_country_flag = trap_clear_desc12
	clr_country_flag = trap_wounded_desc12
	clr_country_flag = trap_killed_desc12
	clr_country_flag = trap_clear_desc13
	clr_country_flag = trap_wounded_desc13
	clr_country_flag = trap_killed_desc13
	clr_country_flag = trap_clear_desc14
	clr_country_flag = trap_wounded_desc14
	clr_country_flag = trap_killed_desc14
	clr_country_flag = trap_clear_desc15
	clr_country_flag = trap_wounded_desc15
	clr_country_flag = trap_killed_desc15
	clr_country_flag = trap_clear_desc16
	clr_country_flag = trap_wounded_desc16
	clr_country_flag = trap_killed_desc16
	clr_country_flag = trap_clear_desc17
	clr_country_flag = trap_wounded_desc17
	clr_country_flag = trap_killed_desc17
	clr_country_flag = trap_clear_desc18
	clr_country_flag = trap_wounded_desc18
	clr_country_flag = trap_killed_desc18
	clr_country_flag = necromancer_raised_dead
	country_event = { id = spirits.516 } #Encounter roll
}

temple_quest_rest = {
	while = {
		limit = { check_variable = { which = WoundedPartyMembers value = 1 } }
		subtract_variable = { which = WoundedPartyMembers value = 1 }
		change_variable = { which = TempleQuestPartySize value = 1 }
	}
}

discover_heart_chamber = {
	event_target:temple_quest_target = {
		add_province_modifier = {
			name = temple_heart_discovered
			duration = -1
			hidden = yes
		}
		remove_province_modifier = temple_heart_trail
	}
}

define_temple_to_corrupt = {
	random_owned_province = {
		limit = { 
			OR = { 
				has_province_modifier = temple_complex 
				has_province_modifier = damaged_temple_complex 
				has_province_modifier = derelict_temple_complex 
			} 
			NOT = { has_province_flag = corrupt_@ROOT } 
			NOT = { has_province_modifier = corrupted_temple_complex } 
			NOT = { has_province_modifier = rite_of_corruption } 
			NOT = { has_province_modifier = azjakuma_rite_of_corruption } 
			has_province_modifier = temple_heart_discovered 
			is_city = yes 
			is_core = ROOT 
		}
		set_province_flag = option_corrupt_1_@ROOT
		set_province_flag = corrupt_@ROOT
		save_event_target_as = corrupt1
	}
	random_owned_province = {
		limit = { 
			OR = { 
				has_province_modifier = temple_complex 
				has_province_modifier = damaged_temple_complex 
				has_province_modifier = derelict_temple_complex 
			} 
			NOT = { has_province_flag = corrupt_@ROOT } 
			NOT = { has_province_modifier = corrupted_temple_complex } 
			NOT = { has_province_modifier = rite_of_corruption } 
			NOT = { has_province_modifier = azjakuma_rite_of_corruption } 
			has_province_modifier = temple_heart_discovered 
			is_city = yes 
			is_core = ROOT 
		}		
		set_province_flag = option_corrupt_2_@ROOT
		set_province_flag = corrupt_@ROOT
		save_event_target_as = corrupt2
	}
	random_owned_province = {
		limit = { 
			OR = { 
				has_province_modifier = temple_complex 
				has_province_modifier = damaged_temple_complex 
				has_province_modifier = derelict_temple_complex 
			} 
			NOT = { has_province_flag = corrupt_@ROOT } 
			NOT = { has_province_modifier = corrupted_temple_complex } 
			NOT = { has_province_modifier = rite_of_corruption } 
			NOT = { has_province_modifier = azjakuma_rite_of_corruption } 
			has_province_modifier = temple_heart_discovered 
			is_city = yes 
			is_core = ROOT 
		}		
		set_province_flag = option_corrupt_3_@ROOT
		set_province_flag = corrupt_@ROOT
		save_event_target_as = corrupt3
	}
	random_owned_province = {
		limit = { 
			OR = { 
				has_province_modifier = temple_complex 
				has_province_modifier = damaged_temple_complex 
				has_province_modifier = derelict_temple_complex 
			} 
			NOT = { has_province_flag = corrupt_@ROOT } 
			NOT = { has_province_modifier = corrupted_temple_complex } 
			NOT = { has_province_modifier = rite_of_corruption } 
			NOT = { has_province_modifier = azjakuma_rite_of_corruption } 
			has_province_modifier = temple_heart_discovered 
			is_city = yes 
			is_core = ROOT 
		}		
		set_province_flag = option_corrupt_4_@ROOT
		set_province_flag = corrupt_@ROOT
		save_event_target_as = corrupt4
	}
	random_owned_province = {
		limit = { 
			OR = { 
				has_province_modifier = temple_complex 
				has_province_modifier = damaged_temple_complex 
				has_province_modifier = derelict_temple_complex 
			} 
			NOT = { has_province_flag = corrupt_@ROOT } 
			NOT = { has_province_modifier = corrupted_temple_complex } 
			NOT = { has_province_modifier = rite_of_corruption } 
			NOT = { has_province_modifier = azjakuma_rite_of_corruption } 
			has_province_modifier = temple_heart_discovered 
			is_city = yes 
			is_core = ROOT 
		}		
		set_province_flag = option_corrupt_5_@ROOT
		set_province_flag = corrupt_@ROOT
		save_event_target_as = corrupt5
	}
	random_owned_province = {
		limit = { 
			OR = { 
				has_province_modifier = temple_complex 
				has_province_modifier = damaged_temple_complex 
				has_province_modifier = derelict_temple_complex 
			} 
			NOT = { has_province_flag = corrupt_@ROOT } 
			NOT = { has_province_modifier = corrupted_temple_complex } 
			NOT = { has_province_modifier = rite_of_corruption } 
			NOT = { has_province_modifier = azjakuma_rite_of_corruption } 
			has_province_modifier = temple_heart_discovered 
			is_city = yes 
			is_core = ROOT 
		}		
		set_province_flag = option_corrupt_6_@ROOT
		set_province_flag = corrupt_@ROOT
		save_event_target_as = corrupt6
	}
}

define_temple_to_summon = {
	if = { #allows summoning at the same corrupted temple complex
		limit = {
			any_owned_province = {  
				has_active_triggered_province_modifier = corrupted_temple_complex
				has_province_modifier = lhp_summon_same_temple
			}
		}
		random_owned_province = {
			limit = {
				has_active_triggered_province_modifier = corrupted_temple_complex
				has_province_modifier = lhp_summon_same_temple
			}
			set_province_flag = option_summon_1_@ROOT
			set_province_flag = summon_@ROOT
			save_event_target_as = summon1
		}
	}
	else = {
		random_owned_province = {
			limit = {
				has_active_triggered_province_modifier = corrupted_temple_complex
				NOT = { has_province_flag = summon_@ROOT }
				is_core = ROOT
			}
			set_province_flag = option_summon_1_@ROOT
			set_province_flag = summon_@ROOT
			save_event_target_as = summon1
		}
	}
	random_owned_province = {
		limit = { has_active_triggered_province_modifier = corrupted_temple_complex NOT = { has_province_flag = summon_@ROOT } is_core = ROOT }
		set_province_flag = option_summon_2_@ROOT
		set_province_flag = summon_@ROOT
		save_event_target_as = summon2
	}
	random_owned_province = {
		limit = { has_active_triggered_province_modifier = corrupted_temple_complex NOT = { has_province_flag = summon_@ROOT } is_core = ROOT }
		set_province_flag = option_summon_3_@ROOT
		set_province_flag = summon_@ROOT
		save_event_target_as = summon3
	}
	random_owned_province = {
		limit = { has_active_triggered_province_modifier = corrupted_temple_complex NOT = { has_province_flag = summon_@ROOT } is_core = ROOT }
		set_province_flag = option_summon_4_@ROOT
		set_province_flag = summon_@ROOT
		save_event_target_as = summon4
	}
	random_owned_province = {
		limit = { has_active_triggered_province_modifier = corrupted_temple_complex NOT = { has_province_flag = summon_@ROOT } is_core = ROOT }
		set_province_flag = option_summon_5_@ROOT
		set_province_flag = summon_@ROOT
		save_event_target_as = summon5
	}
	random_owned_province = {
		limit = { has_active_triggered_province_modifier = corrupted_temple_complex NOT = { has_province_flag = summon_@ROOT } is_core = ROOT }
		set_province_flag = option_summon_6_@ROOT
		set_province_flag = summon_@ROOT
		save_event_target_as = summon6
	}
}

begin_temple_corruption = { # province scope
	owner = { 
		add_church_power = -100
		add_adm_power = -50
		add_dip_power = -50
		add_mil_power = -50
	}
	if = {
		limit = {
			NOT = { owner = { has_estate_privilege = estate_khelorvalshi_halve_corruption_penalty } }
		}
		add_province_modifier = { name = rite_of_corruption duration = 1825 }
	}
	else_if = {
		limit = {
			owner = { has_estate_privilege = estate_khelorvalshi_halve_corruption_penalty }
		}
		add_province_modifier = { name = azjakuma_rite_of_corruption duration = 1825 }
	}
	hidden_effect = { province_event = { id = spirits.603 days = 1824 } } # Completion of temple corruption
}

consumptive_spirit_bind_effect = {	#Province scope
	hidden_effect = {
		if = {
			limit = { has_province_flag = minor_spirit_bound }
			change_variable = { which = CorruptedHeartMana value = 1 }
			clr_province_flag = minor_spirit_bound
		}
		else_if = {
			limit = { has_province_flag = spirit_bound }
			change_variable = { which = CorruptedHeartMana value = 2 }
			clr_province_flag = spirit_bound
		}
		else_if = {
			limit = { has_province_flag = powerful_spirit_bound }
			change_variable = { which = CorruptedHeartMana value = 3 }
			clr_province_flag = powerful_spirit_bound
		}
		if = { #clamp
			limit = { check_variable = { which = CorruptedHeartMana value = 11 } }
			set_variable = { which = CorruptedHeartMana value = 10 }
		}
		if = {	#Sends Drain menu if Heart is full
			limit = { 
				check_variable = { which = CorruptedHeartMana value = 10 }
				NOT = {
					owner = { has_country_flag = in_heart_drain_menu }
					owner = { has_country_flag = temple_summoning_menu_open }
					owner = { has_country_modifier = corrupted_heart_drain_cooldown }
				}
			}
			# save_event_target_as = corrupted_temple_drain_target
			owner = { country_event = { id = spirits.607 } }	#Drain Menu
		}
	}
}

define_temple_to_purify = {
	random_owned_province = {
		limit = { 
			has_province_modifier = corrupted_temple_complex 
			NOT = { has_province_flag = purify_@ROOT } 
			NOT = { has_province_modifier = rite_of_purification } 
			is_city = yes 
			is_core = ROOT
		}
		set_province_flag = option_purify_1_@ROOT
		set_province_flag = purify_@ROOT
		save_event_target_as = purify1
	}
	random_owned_province = {
		limit = { 
			has_province_modifier = corrupted_temple_complex 
			NOT = { has_province_flag = purify_@ROOT } 
			NOT = { has_province_modifier = rite_of_purification } 
			is_city = yes 
			is_core = ROOT
		}		
		set_province_flag = option_purify_2_@ROOT
		set_province_flag = purify_@ROOT
		save_event_target_as = purify2
	}
	random_owned_province = {
		limit = { 
			has_province_modifier = corrupted_temple_complex 
			NOT = { has_province_flag = purify_@ROOT } 
			NOT = { has_province_modifier = rite_of_purification } 
			is_city = yes 
			is_core = ROOT
		}		
		set_province_flag = option_purify_3_@ROOT
		set_province_flag = purify_@ROOT
		save_event_target_as = purify3
	}
	random_owned_province = {
		limit = { has_province_modifier = corrupted_temple_complex NOT = { has_province_flag = purify_@ROOT } NOT = { has_province_modifier = rite_of_purification } is_city = yes is_core = ROOT }
		set_province_flag = option_purify_4_@ROOT
		set_province_flag = purify_@ROOT
		save_event_target_as = purify4
	}
	random_owned_province = {
		limit = { 
			has_province_modifier = corrupted_temple_complex 
			NOT = { has_province_flag = purify_@ROOT } 
			NOT = { has_province_modifier = rite_of_purification } 
			is_city = yes 
			is_core = ROOT
		}		
		set_province_flag = option_purify_5_@ROOT
		set_province_flag = purify_@ROOT
		save_event_target_as = purify5
	}
	random_owned_province = {
		limit = { 
			has_province_modifier = corrupted_temple_complex 
			NOT = { has_province_flag = purify_@ROOT } 
			NOT = { has_province_modifier = rite_of_purification } 
			is_city = yes 
			is_core = ROOT
		}		
		set_province_flag = option_purify_6_@ROOT
		set_province_flag = purify_@ROOT
		save_event_target_as = purify6
	}
}

begin_temple_purification = {
	if = {
		limit = { owner = { OR = { religion = accretive_path religion = transmutative_path } } }
		owner = { add_church_power = -100 }
	}
	owner = { 
		add_adm_power = -50
		add_dip_power = -50
		add_mil_power = -50
		add_treasury = -100
	}
	add_permanent_province_modifier = { name = rite_of_purification duration = 1825 }
	hidden_effect = { province_event = { id = spirits.008 days = 1824 } }
}

define_temple_to_plunder = {
	random_owned_province = {
		limit = { OR = { has_province_modifier = temple_complex has_province_modifier = damaged_temple_complex has_province_modifier = derelict_temple_complex has_province_modifier = corrupted_temple_complex has_province_modifier = ruined_temple_complex } NOT = { has_province_flag = plunder_@ROOT has_province_flag = temple_being_plundered has_province_flag = already_plundered } is_city = yes is_core = ROOT }
		set_province_flag = option_plunder_1_@ROOT
		set_province_flag = plunder_@ROOT
		save_event_target_as = plunder1
	}
	random_owned_province = {
		limit = { OR = { has_province_modifier = temple_complex has_province_modifier = damaged_temple_complex has_province_modifier = derelict_temple_complex has_province_modifier = corrupted_temple_complex has_province_modifier = ruined_temple_complex } NOT = { has_province_flag = plunder_@ROOT has_province_flag = temple_being_plundered has_province_flag = already_plundered } is_city = yes is_core = ROOT }
		set_province_flag = option_plunder_2_@ROOT
		set_province_flag = plunder_@ROOT
		save_event_target_as = plunder2
	}
	random_owned_province = {
		limit = { OR = { has_province_modifier = temple_complex has_province_modifier = damaged_temple_complex has_province_modifier = derelict_temple_complex has_province_modifier = corrupted_temple_complex has_province_modifier = ruined_temple_complex } NOT = { has_province_flag = plunder_@ROOT has_province_flag = temple_being_plundered has_province_flag = already_plundered } is_city = yes is_core = ROOT }
		set_province_flag = option_plunder_3_@ROOT
		set_province_flag = plunder_@ROOT
		save_event_target_as = plunder3
	}
	random_owned_province = {
		limit = { OR = { has_province_modifier = temple_complex has_province_modifier = damaged_temple_complex has_province_modifier = derelict_temple_complex has_province_modifier = corrupted_temple_complex has_province_modifier = ruined_temple_complex } NOT = { has_province_flag = plunder_@ROOT has_province_flag = temple_being_plundered has_province_flag = already_plundered } is_city = yes is_core = ROOT }
		set_province_flag = option_plunder_4_@ROOT
		set_province_flag = plunder_@ROOT
		save_event_target_as = plunder4
	}
	random_owned_province = {
		limit = { OR = { has_province_modifier = temple_complex has_province_modifier = damaged_temple_complex has_province_modifier = derelict_temple_complex has_province_modifier = corrupted_temple_complex has_province_modifier = ruined_temple_complex } NOT = { has_province_flag = plunder_@ROOT has_province_flag = temple_being_plundered has_province_flag = already_plundered } is_city = yes is_core = ROOT }
		set_province_flag = option_plunder_5_@ROOT
		set_province_flag = plunder_@ROOT
		save_event_target_as = plunder5
	}
	random_owned_province = {
		limit = { OR = { has_province_modifier = temple_complex has_province_modifier = damaged_temple_complex has_province_modifier = derelict_temple_complex has_province_modifier = corrupted_temple_complex has_province_modifier = ruined_temple_complex } NOT = { has_province_flag = plunder_@ROOT has_province_flag = temple_being_plundered has_province_flag = already_plundered } is_city = yes is_core = ROOT }
		set_province_flag = option_plunder_6_@ROOT
		set_province_flag = plunder_@ROOT
		save_event_target_as = plunder6
	}
}

start_plundering_temple = {	#Sets to Derelict if not already Derelict/Ruined, changes trade goods to relics
	if = { limit = { has_province_modifier = temple_complex } remove_province_modifier = temple_complex }
	else_if = { limit = { has_province_modifier = damaged_temple_complex } remove_province_modifier = damaged_temple_complex }
	else_if = { limit = { has_province_modifier = corrupted_temple_complex } remove_province_triggered_modifier = corrupted_temple_complex }
	if = { limit = { NOT = { has_province_modifier = derelict_temple_complex has_province_modifier = ruined_temple_complex } } add_permanent_province_modifier = { name = derelict_temple_complex duration = -1 } }
	owner = {	
		add_adm_power = -50
		add_treasury = -250
	}
	save_trade_goods = yes
	change_trade_goods = precursor_relics
	hidden_effect = {
		downgrade_temple_wards = yes
		set_province_flag = temple_being_plundered
		# Cute the time for relics to run out in a quarter
		random = {
			chance = 50
			set_province_flag = small_temple_relics
		}
		set_add_relics_count = yes
		if = {
			limit = {
				OR = {	#Chosen due to probably being big/significant or to incentivize colonization, roughly equidistant from each other
					province_id = 4871 #Tianlou
					province_id = 4580 #Khabtei Teleni
					province_id = 4420 #Sramaya
					province_id = 4411 #Dhenijansar
					province_id = 4510 #Sarnavan
					province_id = 4633 #Sir
					province_id = 4839 #Zyuhung Gung
				}
			}
			set_province_flag = permanent_precursor_relics
		}
		set_province_flag = already_plundered #can't plunder again
	}
}

lhp_heart_drain_choose_option = {
	hidden_effect = {
		clr_country_flag = in_heart_drain_menu
		clr_country_flag = in_deeper_heart_drain_menu
		event_target:corrupted_temple_drain_target = {
			set_variable = { which = CorruptedHeartMana value = 0 }
		}
		if = {
			limit = {
				NOT = { has_country_flag = remove_temple_corruption_cooldown }
			}
			add_country_modifier = { #Cooldown for balance concerns
				name = corrupted_heart_drain_cooldown
				duration = 1825
				hidden = yes
			}
			country_event = { id = spirits.607 days = 1826 } 	#Check if you have any full Hearts after cooldown is up
		}
		else = {
			country_event = { id = spirits.607 days = 30 } 	#Check if you have any full Hearts in a month
		}
	}
}

spirit_clear_interact_flags = {
	hidden_effect = {
		clr_country_flag = hokuma_interact_flag
		clr_country_flag = yanhe_interact_flag
		clr_country_flag = kharunyana_interact_flag
		clr_country_flag = phokhao_interact_flag
		clr_country_flag = hengdu_bowu_interact_flag
		clr_country_flag = cinulau_interact_flag
		clr_country_flag = lupulan_interact_flag
		clr_country_flag = dhenbasana_interact_flag
		clr_country_flag = marutha_interact_flag
		clr_country_flag = gehet_ketine_interact_flag
		clr_country_flag = hukai_telebei_interact_flag
		clr_country_flag = huszien_interact_flag
		clr_country_flag = tughayasa_interact_flag
	}
}

spirit_end_rending_if_applicable = {
	if = {
		limit = {
			OR = {
				has_global_flag = hokuma_suppressed
				has_global_flag = hokuma_scoured
			}
			OR = {
				has_global_flag = yanhe_suppressed
				has_global_flag = yanhe_scoured
			}
			OR = {
				has_global_flag = kharunyana_suppressed
				has_global_flag = kharunyana_scoured
			}
			OR = {
				has_global_flag = phokhao_suppressed
				has_global_flag = phokhao_scoured
			}
			OR = {
				has_global_flag = hengdu_bowu_suppressed
				has_global_flag = hengdu_bowu_scoured
			}
			OR = {
				has_global_flag = cinulau_suppressed
				has_global_flag = cinulau_scoured
			}
			OR = {
				has_global_flag = lupulan_suppressed
				has_global_flag = lupulan_scoured
			}
			OR = {
				has_global_flag = dhenbasana_suppressed
				has_global_flag = dhenbasana_scoured
			}
			OR = {
				has_global_flag = marutha_suppressed
				has_global_flag = marutha_scoured
			}
			OR = {
				has_global_flag = gehet_ketine_suppressed
				has_global_flag = gehet_ketine_scoured
			}
			OR = {
				has_global_flag = hukai_telebei_suppressed
				has_global_flag = hukai_telebei_scoured
			}
			OR = {
				has_global_flag = huszien_suppressed
				has_global_flag = huszien_scoured
			}
			OR = {
				has_global_flag = tughayasa_suppressed
				has_global_flag = tughayasa_scoured
			}
		}
		4559 = {
			subtract_variable = {
				which = rendingMonthsLeft
				value = 1000
			}
		}
		random_country = {
			limit = {
				OR = {
					has_country_flag = rending_ward_flag
					has_country_flag = rending_appease_flag
					has_country_flag = rending_corrupt_flag
				}
			}
			country_event = { id = spirits.734 }
		}
	}
}

spirit_mil_shock_dmg = {
	hidden_effect = {
		remove_country_modifier = spirit_mil_1
		remove_country_modifier = spirit_mil_2
		remove_country_modifier = spirit_mil_3
		remove_country_modifier = spirit_mil_4
		remove_country_modifier = spirit_mil_5
		if = {
			limit = {
				has_country_modifier = spirit_military
			}
			if = {
				limit = {
					mil_tech = 12
					NOT = { mil_tech = 14 }
				}
				add_country_modifier = {
					name = spirit_mil_1
					duration = -1
				}
			}
			else_if = {
				limit = {
					mil_tech = 14
					NOT = { mil_tech = 20 }
				}
				add_country_modifier = {
					name = spirit_mil_2
					duration = -1
				}
			}
			else_if = {
				limit = {
					mil_tech = 20
					NOT = { mil_tech = 27 }
				}
				add_country_modifier = {
					name = spirit_mil_3
					duration = -1
				}
			}
			else_if = {
				limit = {
					mil_tech = 27
					NOT = { mil_tech = 31 }
				}
				add_country_modifier = {
					name = spirit_mil_4
					duration = -1
				}
			}
			else_if = {
				limit = {
					mil_tech = 31
				}
				add_country_modifier = {
					name = spirit_mil_5
					duration = -1
				}
			}
		}
	}
}

remove_rending_highlight = {
	clr_country_flag = hokuma_highlight
	clr_country_flag = yanhe_highlight
	clr_country_flag = kharunyana_highlight
	clr_country_flag = phokhao_highlight
	clr_country_flag = hengdu_bowu_highlight
	clr_country_flag = cinulau_highlight
	clr_country_flag = lupulan_highlight
	clr_country_flag = dhenbasana_highlight
	clr_country_flag = marutha_highlight
	clr_country_flag = gehet_ketine_highlight
	clr_country_flag = hukai_telebei_highlight
	clr_country_flag = huszien_highlight
	clr_country_flag = tughayasa_highlight
}

update_global_ward_strength = {
	4871 = { set_variable = { which = globalWardStrength value = 0 } }
	temple_province_group = {
		if = {
			limit = { has_province_modifier = temple_complex }
			4871 = { change_variable = { which = globalWardStrength value = 3 } }
		}
		else_if = {
			limit = { has_province_modifier = damaged_temple_complex }
			4871 = { change_variable = { which = globalWardStrength value = 2 } }
		}
		else_if = {
			limit = { has_province_modifier = derelict_temple_complex }
			4871 = { change_variable = { which = globalWardStrength value = 1 } }
		}
		else_if = {
			limit = { has_province_modifier = corrupted_temple_complex }
			4871 = { subtract_variable = { which = globalWardStrength value = 1 } }
		}
	}
	update_visvatma = yes
}

update_visvatma = {
	if = {
		limit = {
			4871 = {
				check_variable = {
					which = globalWardStrength
					value = 102
				}
			}
		}
		apply_visvatma = { num = 10 }
	}
	else_if = {
		limit = {
			4871 = {
				check_variable = {
					which = globalWardStrength
					value = 92
				}
			}
		}
		apply_visvatma = { num = 9 }
	}
	else_if = {
		limit = {
			4871 = {
				check_variable = {
					which = globalWardStrength
					value = 82
				}
			}
		}
		apply_visvatma = { num = 8 }
	}
	else_if = {
		limit = {
			4871 = {
				check_variable = {
					which = globalWardStrength
					value = 72
				}
			}
		}
		apply_visvatma = { num = 7 }
	}
	else_if = {
		limit = {
			4871 = {
				check_variable = {
					which = globalWardStrength
					value = 62
				}
			}
		}
		apply_visvatma = { num = 6 }
	}
	else_if = {
		limit = {
			4871 = {
				check_variable = {
					which = globalWardStrength
					value = 52
				}
			}
		}
		apply_visvatma = { num = 5 }
	}
	else_if = {
		limit = {
			4871 = {
				check_variable = {
					which = globalWardStrength
					value = 42
				}
			}
		}
		apply_visvatma = { num = 4 }
	}
	else_if = {
		limit = {
			4871 = {
				check_variable = {
					which = globalWardStrength
					value = 32
				}
			}
		}
		apply_visvatma = { num = 3 }
	}
	else_if = {
		limit = {
			4871 = {
				check_variable = {
					which = globalWardStrength
					value = 22
				}
			}
		}
		apply_visvatma = { num = 2 }
	}
	else = {
		apply_visvatma = { num = 1 }
	}
}	

apply_visvatma = {
	every_country = {
		limit = {
			religion_group = raheni
		}
		remove_country_modifier = visvatma_10_modifier
		remove_country_modifier = visvatma_9_modifier
		remove_country_modifier = visvatma_8_modifier
		remove_country_modifier = visvatma_7_modifier
		remove_country_modifier = visvatma_6_modifier
		remove_country_modifier = visvatma_5_modifier
		remove_country_modifier = visvatma_4_modifier
		remove_country_modifier = visvatma_3_modifier
		remove_country_modifier = visvatma_2_modifier
		remove_country_modifier = visvatma_1_modifier
		add_country_modifier = {
			name = visvatma_$num$_modifier
			duration = -1
		}
	}
}