update_artifice_points = {
	if = {
		limit = { has_estate = estate_artificers }
		hidden_effect = {
			set_variable = {
				which = MaxArtificePoints
				value = 0
			}
			#all of this doesn't need to be calcualted every time. If we ensured that everything that can effect artifice ponts adds or subtracts from the max when it happens, then I could make this much less performance intensive.
			#that isn't set up currently, but I'll work on it in a seperate fork
			#once it's done, we only need to to calculate province resources, innovativeness, estates, buildings, tech and institutions (thanks paradox for not including shit in on_actions). 
			#So that at least removes racial admin/mils and religions
			#man I'm gonna have to figure out how to optimize this shit

			#some of these should be placed in the static variable
		
			#gov reforms
			#gov reforms can be made to count as a technocracy by adding count_gov_as_technocracy to their effect and reset_gov_is_technocracy to their removed_effect
			#magocracy is the same
			if = {
				limit = {
					has_government_attribute = is_technocracy
				}
				change_variable = {
					which = MaxArtificePoints
					value = 10
				}
			}
			if = {
				limit = {
					has_government_attribute = is_magocracy
				}
				subtract_variable = {
					which = MaxArtificePoints
					value = 10
				}
			}
		
			#artificer admin/mil/religion
			if = {
				limit = {
					OR = {
						has_country_modifier = gnomish_administration
						has_country_modifier = goblin_administration
						has_country_modifier = kobold_administration
					}
				}
				change_variable = {
					which = MaxArtificePoints
					value = 5
				}
			}
			if = {
				limit = {
					OR = {
						has_country_modifier = gnomish_military
						has_country_modifier = goblin_military
						has_country_modifier = kobold_military
					}
				}
				change_variable = {
					which = MaxArtificePoints
					value = 5
				}
			}
			if = {
				limit = {
					OR = {
						religion = ravelian
						religion = the_thought
					}
				}
				change_variable = {
					which = MaxArtificePoints
					value = 3
				}
			}
		
			#trolls get a penalty because they are stupid. elves, harimari and dwarves get a penalty because they are traditionalist. Emerald orcs because they hate technology
		
			if = {
				limit = {
					OR = {
						has_country_modifier = troll_administration
						has_country_modifier = elven_administration
						has_country_modifier = dwarven_administration
						has_country_modifier = harimari_administration
						#culture = emerald_orc
					}
				}
				subtract_variable = {
					which = MaxArtificePoints
					value = 2
				}
			}
		
			if = {
				limit = {
					OR = {
						has_country_modifier = troll_military
						has_country_modifier = elven_military
						has_country_modifier = dwarven_military
						has_country_modifier = harimari_military
						#culture = emerald_orc
					}
				}
				subtract_variable = {
					which = MaxArtificePoints
					value = 2
				}
			}
		
			#deepwoods fey hate tech
			if = {
				limit = {
					OR = {
						religion = fey_court
						religion = ashentree_pact
					}
				}
				subtract_variable = {
					which = MaxArtificePoints
					value = 2
				}
			}
		
			#liches and witch kings have no need for artifice and are distrustful of the threat it represents to them
			if = {
				limit = {
					has_ruler_flag = lich_ruler
				}
				subtract_variable = {
					which = MaxArtificePoints
					value = 5
				}
			}
			if = {
				limit = {
					OR = {
						has_ruler_modifier = witch_king_modifier
						has_country_flag = witch_king_flag
					}
				}
				subtract_variable = {
					which = MaxArtificePoints
					value = 5
				}
			}
		
			#institutions
			if = {
				limit = {
					has_institution = manufactories
				}
				change_variable = {
					which = MaxArtificePoints
					value = 3
				}
			}
			if = {
				limit = {
					has_institution = industrialization
				}
				change_variable = {
					which = MaxArtificePoints
					value = 10
				}
			}
		
			#buildings
		
			#a gnome/goblin/kobold technocracy with indsutrialization embraced that follows the thought would have 16 points before anything else. Enough for a full set of basic inventions
		
			#estates
			#+4 for every tier of artificer influence, -4 for every tier of mage influence.
			# mages influence will reduce artificers influence and vice versa
			#If you want both artifice and magic, you need to have a lot of other sources of points
			if = {
				limit = {
					has_estate = estate_mages
					NOT = {
						estate_influence = {
							estate = estate_mages
							influence = 20
						}	
					}
				}
				subtract_variable = {
					which = MaxArtificePoints
					value = 2 #offsets the base 2 from manufacotries. Gives a reason to expel the mages
				}
			}
			if = {
				limit = {
					estate_influence = {
						estate = estate_mages
						influence = 60
					}
				}
				subtract_variable = {
					which = MaxArtificePoints
					value = 24
				}
			}
			else_if = {
				limit = {
					estate_influence = {
						estate = estate_mages
						influence = 40
					}
				}
				subtract_variable = {
					which = MaxArtificePoints
					value = 16
				}
			}
			else_if = {
				limit = {
					estate_influence = {
						estate = estate_mages
						influence = 20
					}
				}
				subtract_variable = {
					which = MaxArtificePoints
					value = 8
				}
			}
		
			if = {
				limit = {
					estate_influence = {
						estate = estate_artificers
						influence = 60
					}
				}
				change_variable = {
					which = MaxArtificePoints
					value = 24
				}
			}
			else_if = {
				limit = {
					estate_influence = {
						estate = estate_artificers
						influence = 40
					}
				}
				change_variable = {
					which = MaxArtificePoints
					value = 16
				}
			}
			else_if = {
				limit = {
					estate_influence = {
						estate = estate_artificers
						influence = 20
					}
				}
				change_variable = {
					which = MaxArtificePoints
					value = 8
				}
			}
		
			#innovativeness
			if = {
				limit = {
					innovativeness = 100
				}
				change_variable = {
					which = MaxArtificePoints
					value = 20
				}
			}
			else_if = {
				limit = {
					innovativeness = 80
				}
				change_variable = {
					which = MaxArtificePoints
					value = 16
				}
			}
			else_if = {
				limit = {
					innovativeness = 60
				}
				change_variable = {
					which = MaxArtificePoints
					value = 12
				}
			}
			else_if = {
				limit = {
					innovativeness = 40
				}
				change_variable = {
					which = MaxArtificePoints
					value = 8
				}
			}
			else_if = {
				limit = {
					innovativeness = 20
				}
				change_variable = {
					which = MaxArtificePoints
					value = 4
				}
			}
		
			#techs
			if = {
				limit = {
					adm_tech = 32
				}
				change_variable = {
					which = MaxArtificePoints
					value = 5
				}
			}
			if = {
				limit = {
					dip_tech = 32
				}
				change_variable = {
					which = MaxArtificePoints
					value = 5
				}
			}
			if = {
				limit = {
					mil_tech = 32
				}
				change_variable = {
					which = MaxArtificePoints
					value = 5
				}
			}
		
			#damestear/coal/precursor relics. CNs don't get points from resources they own
			if = {
				limit = {
					damestear = 1
					NOT = {
						is_colonial_nation = yes
					}
				}
				every_owned_province = {
					limit = {
						trade_goods = damestear
					}
					owner = {
						change_variable = {
							which = MaxArtificePoints
							value = 10
						}
					}
				}
			}
			if = {
				limit = {
					precursor_relics = 1
					NOT = {
						is_colonial_nation = yes
					}
				}
				every_owned_province = {
					limit = {
						trade_goods = precursor_relics
					}
					owner = {
						change_variable = {
							which = MaxArtificePoints
							value = 5
						}
					}
				}
			}
			if = {
				limit = {
					coal = 1
					NOT = {
						is_colonial_nation = yes
					}
				}
				every_owned_province = {
					limit = {
						trade_goods = coal
					}
					owner = {
						change_variable = {
							which = MaxArtificePoints
							value = 3  #coal is already valuable as fuck. And it isn't really magical
						}
					}
				}
			}
		
			#resources owned by CNs
			if = {
				limit = {
					any_subject_country = {
						damestear = 1
					}
				}
				every_subject_country = {
					limit = {
						is_colonial_nation = yes
					}
					every_owned_province = {
						limit = {
							trade_goods = damestear
						}
						owner = {
							overlord = {
								change_variable = {
									which = MaxArtificePoints
									value = 10
								}
							}
						}
					}
				}
			}
			if = {
				limit = {
					any_subject_country = {
						precursor_relics = 1
					}
				}
				every_subject_country = {
					limit = {
						is_colonial_nation = yes
					}
					every_owned_province = {
						limit = {
							trade_goods = precursor_relics
						}
						owner = {
							overlord = {
								change_variable = {
									which = MaxArtificePoints
									value = 5
								}
							}
						}
					}
				}
			}
			if = {
				limit = {
					any_subject_country = {
						coal = 1
					}
				}
				every_subject_country = {
					limit = {
						is_colonial_nation = yes
					}
					every_owned_province = {
						limit = {
							trade_goods = coal
						}
						owner = {
							overlord = {
								change_variable = {
									which = MaxArtificePoints
									value = 3
								}
							}
						}
					}
				}
			}
		
			#static sources from things like missions and upkeep
			change_variable = {
				which = MaxArtificePoints
				which = StaticArtificePoints
			}
		
			subtract_variable = {
				which = MaxArtificePoints
				which = ArtificeUpkeep
			}
		
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = MaxArtificePoints
							value = 0
						}
					}
				}
				add_country_modifier = artificers_over_artifice_capacity
			}
			else = {
				remove_country_modifier = artificers_over_artifice_capacity
			}
		}
	}
}

set_up_artifice_system = {
	if = {
		limit = {
			NOT = {
				has_country_flag = artifice_set_up
			}
		}
		#set_variable = {  #according to Heho, variables are initialized by anything that affects them
		#	which = MaxArtificePoints
		#	value = 0
		#}
		set_variable = {
			which = StaticArtificePoints
			value = 0
		}
		set_variable = {
			which = ArtificeUpkeep
			value = 0
		}
		set_country_flag = artifice_set_up
	}
	update_artifice_points = yes
}

artifice_granted_basic = {
	custom_tooltip = increases_our_artifice_upkeep_by_10
	custom_tooltip = artificer_points_upkeep_tt
	hidden_effect = {
		change_variable = {
			which = ArtificeUpkeep
			value = 10
		}
	}
	update_artifice_points = yes
}

artifice_remove_basic = {
	custom_tooltip = decreases_our_artifice_upkeep_by_10
	custom_tooltip = artificer_points_upkeep_tt
	hidden_effect = {
		subtract_variable = {
			which = ArtificeUpkeep
			value = 10
		}
	}
	update_artifice_points = yes
}

artifice_granted_expert = {
	custom_tooltip = increases_our_artifice_upkeep_by_20
	custom_tooltip = artificer_points_upkeep_tt
	hidden_effect = {
		change_variable = {
			which = ArtificeUpkeep
			value = 20
		}
	}
	update_artifice_points = yes
}

artifice_remove_expert = {
	custom_tooltip = decreases_our_artifice_upkeep_by_20
	custom_tooltip = artificer_points_upkeep_tt
	hidden_effect = {
		subtract_variable = {
			which = ArtificeUpkeep
			value = 20
		}
	}
	update_artifice_points = yes
}

artifice_granted_advanced = {
	custom_tooltip = increases_our_artifice_upkeep_by_30
	custom_tooltip = artificer_points_upkeep_tt
	hidden_effect = {
		change_variable = {
			which = ArtificeUpkeep
			value = 30
		}
	}
	update_artifice_points = yes
}

artifice_remove_advanced = {
	custom_tooltip = decreases_our_artifice_upkeep_by_30
	custom_tooltip = artificer_points_upkeep_tt
	hidden_effect = {
		subtract_variable = {
			which = ArtificeUpkeep
			value = 30
		}
	}
	update_artifice_points = yes
}


#deprecated
artifice_granted_masterwork = {
	custom_tooltip = increases_our_artifice_upkeep_by_40
	custom_tooltip = artificer_points_upkeep_tt
	hidden_effect = {
		change_variable = {
			which = ArtificeUpkeep
			value = 40
		}
	}
	update_artifice_points = yes
}

artifice_remove_masterwork = {
	custom_tooltip = decreases_our_artifice_upkeep_by_40
	custom_tooltip = artificer_points_upkeep_tt
	hidden_effect = {
		subtract_variable = {
			which = ArtificeUpkeep
			value = 40
		}
	}
	update_artifice_points = yes
}

mission_reward_artifice_points_1 = {
	custom_tooltip = permanently_increases_our_artifice_points_by_1_tt
	hidden_effect = {
		change_variable = {
			which = StaticArtificePoints
			value = 1
		}
	}
	update_artifice_points = yes
}

mission_reward_artifice_points_2 = {
	custom_tooltip = permanently_increases_our_artifice_points_by_2_tt
	hidden_effect = {
		change_variable = {
			which = StaticArtificePoints
			value = 2
		}
	}
	update_artifice_points = yes
}

mission_reward_artifice_points_3 = {
	custom_tooltip = permanently_increases_our_artifice_points_by_3_tt
	hidden_effect = {
		change_variable = {
			which = StaticArtificePoints
			value = 3
		}
	}
	update_artifice_points = yes
}

mission_reward_artifice_points_4 = {
	custom_tooltip = permanently_increases_our_artifice_points_by_4_tt
	hidden_effect = {
		change_variable = {
			which = StaticArtificePoints
			value = 4
		}
	}
	update_artifice_points = yes
}

mission_reward_artifice_points_5 = {
	custom_tooltip = permanently_increases_our_artifice_points_by_5_tt
	hidden_effect = {
		change_variable = {
			which = StaticArtificePoints
			value = 5
		}
	}
	update_artifice_points = yes
}


#research rewards

artifice_research_rewards = {


	random_list = {
		#brill

			#society
		10 = {
			set_country_flag = unlocked_artifice_invention_artificer_exo_arms
			custom_tooltip = invention_artificer_exo_arms_tt
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_brilliance }
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_artificer_exo_arms
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_viewcatcher
			custom_tooltip = invention_viewcatcher_tt
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_brilliance }
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_viewcatcher
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_brass_prosthesis
			custom_tooltip = invention_brass_prosthesis_tt
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_brilliance }
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_brass_prosthesis
			}
		}

			#economic

		10 = {
			set_country_flag = unlocked_artifice_invention_t_wave_transceivers
			custom_tooltip = invention_t_wave_transceivers_tt

			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_brilliance }
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_economic }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_t_wave_transceivers
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_mechanim_workforce
			custom_tooltip = invention_mechanim_workforce_tt

			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_brilliance }
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_economic }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_mechanim_workforce
			}
			modifier = {
				factor = 0
				NOT = {
					has_institution = industrialization
				}
			}
		}

			#military

		10 = {
			set_country_flag = unlocked_artifice_invention_sparkdrive_rifles
			custom_tooltip = invention_sparkdrive_rifles_tt

			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_brilliance }
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_sparkdrive_rifles
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_mechanim_soldiers
			custom_tooltip = invention_mechanim_soldiers_tt

			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_brilliance }
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_mechanim_soldiers
			}
			modifier = {
				factor = 0
				NOT = {
					has_institution = industrialization
				}
			}
		}

		#techno
			#society
			10 = {
				set_country_flag = unlocked_artifice_invention_sending_stones
				custom_tooltip = invention_sending_stones_tt

				modifier = {
					factor = 0
					NOT = { has_country_flag = artifice_research_technomancy }
				}
				modifier = {
					factor = 0
					NOT = { has_country_flag = artifice_research_society }
				}
				modifier = {
					factor = 0
					has_country_flag = unlocked_artifice_invention_sending_stones
				}
			}
			10 = {
				set_country_flag = unlocked_artifice_invention_crierless_crier_device
				custom_tooltip = invention_crierless_crier_device_tt

				modifier = {
					factor = 0
					NOT = { has_country_flag = artifice_research_technomancy }
				}
				modifier = {
					factor = 0
					NOT = { has_country_flag = artifice_research_society }
				}
				modifier = {
					factor = 0
					has_country_flag = unlocked_artifice_invention_crierless_crier_device
				}
			}
			10 = {
				set_country_flag = unlocked_artifice_invention_living_mirrors
				custom_tooltip = invention_living_mirrors_tt

				modifier = {
					factor = 0
					NOT = { has_country_flag = artifice_research_technomancy }
				}
				modifier = {
					factor = 0
					NOT = { has_country_flag = artifice_research_society }
				}
				modifier = {
					factor = 0
					has_country_flag = unlocked_artifice_invention_living_mirrors
				}
				modifier = {
					factor = 0
					NOT = {
						has_institution = industrialization
					}
				}
			}
	
				#economic
	
			10 = {
				set_country_flag = unlocked_artifice_invention_vendorless_stall
				custom_tooltip = invention_vendorless_stall_tt

				modifier = {
					factor = 0
					NOT = { has_country_flag = artifice_research_technomancy }
				}
				modifier = {
					factor = 0
					NOT = { has_country_flag = artifice_research_economic }
				}
				modifier = {
					factor = 0
					has_country_flag = unlocked_artifice_invention_vendorless_stall
				}
			}
			10 = {
				set_country_flag = unlocked_artifice_invention_spell_in_a_box
				custom_tooltip = invention_spell_in_a_box_tt

				modifier = {
					factor = 0
					NOT = { has_country_flag = artifice_research_technomancy }
				}
				modifier = {
					factor = 0
					NOT = { has_country_flag = artifice_research_economic }
				}
				modifier = {
					factor = 0
					has_country_flag = unlocked_artifice_invention_spell_in_a_box
				}
				modifier = {
					factor = 0
					NOT = {
						has_institution = enlightenment
					}
				}
			}
	
				#military
	
			10 = {
				set_country_flag = unlocked_artifice_invention_vorpal_bullets
				custom_tooltip = invention_vorpal_bullets_tt

				modifier = {
					factor = 0
					NOT = { has_country_flag = artifice_research_technomancy }
				}
				modifier = {
					factor = 0
					NOT = { has_country_flag = artifice_research_military }
				}
				modifier = {
					factor = 0
					has_country_flag = unlocked_artifice_invention_vorpal_bullets
				}
			}
			10 = {
				set_country_flag = unlocked_artifice_invention_war_golems
				custom_tooltip = invention_war_golems_tt

				modifier = {
					factor = 0
					NOT = { has_country_flag = artifice_research_technomancy }
				}
				modifier = {
					factor = 0
					NOT = { has_country_flag = artifice_research_military }
				}
				modifier = {
					factor = 0
					has_country_flag = unlocked_artifice_invention_war_golems
				}
			}
			10 = {
				set_country_flag = unlocked_artifice_invention_wandlocks
				custom_tooltip = invention_wandlocks_tt

				modifier = {
					factor = 0
					NOT = { has_country_flag = artifice_research_technomancy }
				}
				modifier = {
					factor = 0
					NOT = { has_country_flag = artifice_research_military }
				}
				modifier = {
					factor = 0
					has_country_flag = unlocked_artifice_invention_wandlocks
				}
				modifier = {
					factor = 0
					NOT = {
						has_institution = enlightenment
					}
				}
			}
			10 = {
				set_country_flag = unlocked_artifice_invention_personal_mageshields
				custom_tooltip = invention_personal_mageshields_tt

				modifier = {
					factor = 0
					NOT = { has_country_flag = artifice_research_technomancy }
				}
				modifier = {
					factor = 0
					NOT = { has_country_flag = artifice_research_military }
				}
				modifier = {
					factor = 0
					has_country_flag = unlocked_artifice_invention_personal_mageshields
				}
				modifier = {
					factor = 0
					NOT = {
						has_institution = enlightenment
					}
				}
			}
			

		#machinery

			#society
		10 = {
			set_country_flag = unlocked_artifice_invention_remedial_tinctures
			custom_tooltip = invention_remedial_tinctures_tt

			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_machinery }
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_remedial_tinctures
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_elemental_locomotives
			custom_tooltip = invention_elemental_locomotives_tt

			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_machinery }
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_elemental_locomotives
			}
			modifier = {
				factor = 0
				NOT = {
					has_institution = industrialization
				}
			}
		}

			#economic

		10 = {
			set_country_flag = unlocked_artifice_invention_remedial_tinctures
			custom_tooltip = invention_remedial_tinctures_tt

			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_machinery }
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_economic }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_remedial_tinctures
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_commercial_sky_galleons
			custom_tooltip = invention_commercial_sky_galleons_tt

			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_machinery }
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_economic }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_commercial_sky_galleons
			}
			modifier = {
				factor = 0
				NOT = {
					has_institution = industrialization
				}
			}
		}

			#military

		10 = {
			set_country_flag = unlocked_artifice_invention_portable_turrets
			custom_tooltip = invention_portable_turrets_tt

			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_machinery }
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_portable_turrets
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_black_damestear_bullets
			custom_tooltip = invention_black_damestear_bullets_tt

			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_machinery }
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_black_damestear_bullets
			}
			modifier = {
				factor = 0
				NOT = {
					has_institution = enlightenment
				}
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_artillery_autoloader
			custom_tooltip = invention_artillery_autoloader_tt

			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_machinery }
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_artillery_autoloader
			}
			modifier = {
				factor = 0
				NOT = {
					has_institution = industrialization
				}
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_prototype_tanks
			custom_tooltip = invention_prototype_tanks_tt

			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_machinery }
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_prototype_tanks
			}
			modifier = {
				factor = 0
				NOT = {
					has_institution = industrialization
				}
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_military_sky_galleons
			custom_tooltip = invention_military_sky_galleons_tt

			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_machinery }
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_military_sky_galleons 
			}
			modifier = {
				factor = 0
				NOT = {
					has_institution = industrialization
				}
			}
		}

		#bonuses as fallback
		1 = {
			add_country_modifier = {
				name = artificer_research_bonus_machinery_mil
				duration = 3650
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_machinery }
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_modifier = artificer_research_bonus_machinery_mil
			}
		}
		1 = {
			add_country_modifier = {
				name = artificer_research_bonus_machinery_eco
				duration = 3650
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_machinery }
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_economic }
			}
			modifier = {
				factor = 0
				has_country_modifier = artificer_research_bonus_machinery_eco
			}
		}
		1 = {
			add_country_modifier = {
				name = artificer_research_bonus_machinery_society
				duration = 3650
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_machinery }
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			modifier = {
				factor = 0
				has_country_modifier = artificer_research_bonus_machinery_society
			}
		}

		1 = {
			add_country_modifier = {
				name = artificer_research_bonus_technomancy_mil
				duration = 3650
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_technomancy }
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_modifier = artificer_research_bonus_technomancy_mil
			}
		}
		1 = {
			add_country_modifier = {
				name = artificer_research_bonus_technomancy_eco
				duration = 3650
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_technomancy }
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_economic }
			}
			modifier = {
				factor = 0
				has_country_modifier = artificer_research_bonus_technomancy_eco
			}
		}
		1 = {
			add_country_modifier = {
				name = artificer_research_bonus_technomancy_society
				duration = 3650
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_technomancy }
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			modifier = {
				factor = 0
				has_country_modifier = artificer_research_bonus_technomancy_society
			}
		}

		1 = {
			add_country_modifier = {
				name = artificer_research_bonus_brilliance_mil
				duration = 3650
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_brilliance }
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_modifier = artificer_research_bonus_brilliance_mil
			}
		}
		1 = {
			add_country_modifier = {
				name = artificer_research_bonus_brilliance_eco
				duration = 3650
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_brilliance }
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_economic }
			}
			modifier = {
				factor = 0
				has_country_modifier = artificer_research_bonus_brilliance_eco
			}
		}
		1 = {
			add_country_modifier = {
				name = artificer_research_bonus_brilliance_society
				duration = 3650
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_brilliance }
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			modifier = {
				factor = 0
				has_country_modifier = artificer_research_bonus_brilliance_society
			}
		}
	}
		#cleanup
		clr_country_flag = artifice_research_brilliance
		clr_country_flag = artifice_research_technomancy
		clr_country_flag = artifice_research_machinery
	
		clr_country_flag = artifice_research_society
		clr_country_flag = artifice_research_economic
		clr_country_flag = artifice_research_military
}