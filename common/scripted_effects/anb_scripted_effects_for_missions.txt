############
##Centaurs##
############
centaur_army_salgae = {
	cavalry = $tag$
	cavalry = $tag$
	cavalry = $tag$
	cavalry = $tag$
	cavalry = $tag$
	cavalry = $tag$
	cavalry = $tag$
	cavalry = $tag$
	cavalry = $tag$
	cavalry = $tag$
	cavalry = $tag$
	cavalry = $tag$
	cavalry = $tag$
	cavalry = $tag$
	cavalry = $tag$
	cavalry = $tag$
	cavalry = $tag$
	cavalry = $tag$
	cavalry = $tag$
	cavalry = $tag$
	cavalry = $tag$
	cavalry = $tag$
	cavalry = $tag$
	cavalry = $tag$
	cavalry = $tag$
	cavalry = $tag$
	cavalry = $tag$
	cavalry = $tag$
	cavalry = $tag$
	cavalry = $tag$
}

############
##Bianfang##
############
initialize_tyrant_system = {
	if = {
		limit = {
			OR = {
				AND = {
					tag = Z66
					was_tag = Y09
				}
				tag = Y09
			}
		}
		set_variable = { which = TyrantValue value = 0 }
	}
}
increase_tyrant_ruthless_3 = {
	if = {
        limit = {
            OR = {
                AND = {
                    tag = Z66
                    was_tag = Y09
                }
                tag = Y09
            }
        }
        custom_tooltip = increase_tyrant_ruthless_3_tooltip
        hidden_effect = {
            change_variable = { which = TyrantValue value = -3 }
            if = { limit = { NOT = { check_variable = { which = TyrantValue value = -7 } } }
                set_variable = { which = TyrantValue value = -7 }
            }
        }
		hidden_effect = {
			update_tyrant_modifier = yes
		}
    }
}
increase_tyrant_benevolent_3 = {
    if = {
        limit = {
            OR = {
                AND = {
                    tag = Z66
                    was_tag = Y09
                }
                tag = Y09
            }
        }
        custom_tooltip = increase_tyrant_benevolent_3_tooltip
        hidden_effect = {
            change_variable = { which = TyrantValue value = 3 }
            if = { limit = { check_variable = { which = TyrantValue value = 8 } }
                set_variable = { which = TyrantValue value = 7 }
            }
        }
		hidden_effect = {
			update_tyrant_modifier = yes
		}
    }
}
increase_tyrant_ruthless_2 = {
	if = {
        limit = {
            OR = {
                AND = {
                    tag = Z66
                    was_tag = Y09
                }
                tag = Y09
            }
        }
        custom_tooltip = increase_tyrant_ruthless_2_tooltip
        hidden_effect = {
            change_variable = { which = TyrantValue value = -2 }
            if = { limit = { NOT = { check_variable = { which = TyrantValue value = -7 } } }
                set_variable = { which = TyrantValue value = -7 }
            }
        }
		hidden_effect = {
			update_tyrant_modifier = yes
		}
    }
}
increase_tyrant_benevolent_2 = {
    if = {
        limit = {
            OR = {
                AND = {
                    tag = Z66
                    was_tag = Y09
                }
                tag = Y09
            }
        }
        custom_tooltip = increase_tyrant_benevolent_2_tooltip
        hidden_effect = {
            change_variable = { which = TyrantValue value = 2 }
            if = { limit = { check_variable = { which = TyrantValue value = 8 } }
                set_variable = { which = TyrantValue value = 7 }
            }
        }
		hidden_effect = {
			update_tyrant_modifier = yes
		}
    }
}
increase_tyrant_ruthless_1 = {
	if = {
        limit = {
            OR = {
                AND = {
                    tag = Z66
                    was_tag = Y09
                }
                tag = Y09
            }
        }
        custom_tooltip = increase_tyrant_ruthless_1_tooltip
        hidden_effect = {
            change_variable = { which = TyrantValue value = -1 }
            if = { limit = { NOT = { check_variable = { which = TyrantValue value = -7 } } }
                set_variable = { which = TyrantValue value = -7 }
            }
        }
		hidden_effect = {
			update_tyrant_modifier = yes
		}
    }
}
increase_tyrant_benevolent_1 = {
    if = {
        limit = {
            OR = {
                AND = {
                    tag = Z66
                    was_tag = Y09
                }
                tag = Y09
            }
        }
        custom_tooltip = increase_tyrant_benevolent_1_tooltip
        hidden_effect = {
            change_variable = { which = TyrantValue value = 1 }
            if = { limit = { check_variable = { which = TyrantValue value = 8 } }
                set_variable = { which = TyrantValue value = 7 }
            }
        }
		hidden_effect = {
			update_tyrant_modifier = yes
		}
    }
}
update_tyrant_modifier = {
	if = {
		limit = {
			OR = {
				AND = {
					tag = Z66
					was_tag = Y09
				}
				tag = Y09
			}
		}
		if = {
			limit = {
				NOT = { check_variable = { which = TyrantValue value = -2 } }
				NOT = { has_country_modifier = bianfang_tyrant_modifier_ruthless }
			}
			country_event = { id = bianfang.8 }
		}
		if = {
			limit = {
				check_variable = { which = TyrantValue value = -2 }
				NOT = { check_variable = { which = TyrantValue value = 3 } }
				NOT = { has_country_modifier = bianfang_tyrant_modifier_pragmatic }
			}
			country_event = { id = bianfang.9 }
		}
		if = {
			limit = {
				check_variable = { which = TyrantValue value = 3 }
				NOT = { has_country_modifier = bianfang_tyrant_modifier_benevolent }
			}
			country_event = { id = bianfang.10 }
		}
	}
}
upgrade_yanification_effect = {
	if = {
		limit = {
			NOT = {
				OR = {
					has_country_flag = yanification_upgrade_1
					has_country_flag = yanification_upgrade_2
					has_country_flag = yanification_upgrade_3
				}
			}
		}
		set_country_flag = yanification_upgrade_1
	}
	else_if = {
		limit = {
			has_country_flag = yanification_upgrade_1
		}
		clr_country_flag = yanification_upgrade_1
		set_country_flag = yanification_upgrade_2
	}
	else_if = {
		limit = {
			has_country_flag = yanification_upgrade_2
		}
		clr_country_flag = yanification_upgrade_2
		set_country_flag = yanification_upgrade_3
	}
}
upgrade_yanification_modifier_effect = {
	if = {
		limit = { has_country_modifier = bianfang_yanification_campaigns }
		remove_country_modifier = bianfang_yanification_campaigns
		add_country_modifier = {
			name = bianfang_yanification_stage_1
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = bianfang_yanification_stage_1 }
		remove_country_modifier = bianfang_yanification_stage_1
		add_country_modifier = {
			name = bianfang_yanification_stage_2
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = bianfang_yanification_stage_2 }
		remove_country_modifier = bianfang_yanification_stage_2
		add_country_modifier = {
			name = bianfang_yanification_stage_3
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = bianfang_yanification_stage_3 }
		remove_country_modifier = bianfang_yanification_stage_3
		add_country_modifier = {
			name = bianfang_yanification_stage_4
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = bianfang_yanification_stage_4 }
		remove_country_modifier = bianfang_yanification_stage_4
		add_country_modifier = {
			name = bianfang_yanification_stage_5
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = bianfang_yanification_stage_5 }
		remove_country_modifier = bianfang_yanification_stage_5
		add_country_modifier = {
			name = bianfang_yanification_stage_6
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = bianfang_yanification_stage_6 }
		remove_country_modifier = bianfang_yanification_stage_6
		add_country_modifier = {
			name = bianfang_yanification_stage_7
			duration = -1
		}
	}
}

###################
##Orlazam-az-Dihr##
###################
clear_ramsteel_fire_shock_buffs_effect = {
	remove_country_modifier = ramsteel_shock_1
	remove_country_modifier = ramsteel_shock_2
	remove_country_modifier = ramsteel_shock_3
	remove_country_modifier = ramsteel_fire_1
	remove_country_modifier = ramsteel_fire_2
	remove_country_modifier = ramsteel_fire_3
}

###############
##Jadd Empire##
###############
jaddempire_move_court = {
	hidden_effect = {
		every_owned_province = { #remove the province modifiers from the previous court
			remove_province_modifier = jaddempire_court_seat
			remove_province_modifier = jaddempire_court_area
		}
	}
	$province_id$ = {
		trigger_switch = {
			on_trigger = province_id
			
			8 = { ROOT = { add_ruler_modifier = { name = jaddempire_anbenncost_capital duration = -1 } jaddempire_change_leaning_west_massive = yes } }
			565 = { ROOT = { add_ruler_modifier = { name = jaddempire_brasan_capital duration = -1 } jaddempire_change_leaning_west_large = yes } }
			601 = { ROOT = { add_ruler_modifier = { name = jaddempire_bulwar_capital duration = -1 } jaddempire_change_leaning_west_medium = yes } }
			625 = { ROOT = { add_ruler_modifier = { name = jaddempire_jaddanzar_capital duration = -1 } jaddempire_change_leaning_west_medium = yes } }
			643 = { ROOT = { add_ruler_modifier = { name = jaddempire_azka_sur_capital duration = -1 } jaddempire_change_leaning_west_small = yes } }
			
			2909 = { ROOT = { add_ruler_modifier =  { name = jaddempire_religious_capital duration = -1 } } } #Neutral
			
			4411 = { ROOT = { add_ruler_modifier = { name = jaddempire_dhenijansar_capital duration = -1 } jaddempire_change_leaning_east_medium = yes } }
			4420 = { ROOT = { add_ruler_modifier = { name = jaddempire_sramaya_capital duration = -1 } jaddempire_change_leaning_east_medium = yes } }
			4500 = { ROOT = { add_ruler_modifier = { name = jaddempire_aizt_ralare_capital duration = -1 } jaddempire_change_leaning_east_large = yes } }
			4871 = { ROOT = { add_ruler_modifier = { name = jaddempire_tianlou_capital duration = -1 } jaddempire_change_leaning_east_massive = yes } }
		}
		add_province_modifier = {
			name = jaddempire_court_seat
			duration = -1
		}
		move_capital_effect = yes
	}
}
jaddempire_change_leaning_west_tiny = {
	if = {
		limit = { OR = { tag = F46 was_tag = F46 } NOT = { has_country_flag = had_deioderan } }
		custom_tooltip = jaddempire_change_leaning_west_tiny_tt
		hidden_effect = {
			change_variable = { which = jaddariLeaning value = 1 }
		}
	}
}
jaddempire_change_leaning_west_small = {
	if = {
		limit = { OR = { tag = F46 was_tag = F46 } NOT = { has_country_flag = had_deioderan } }
		custom_tooltip = jaddempire_change_leaning_west_small_tt
		hidden_effect = {
			change_variable = { which = jaddariLeaning value = 2 }
		}
	}
}
jaddempire_change_leaning_west_medium = {
	if = {
		limit = { OR = { tag = F46 was_tag = F46 } NOT = { has_country_flag = had_deioderan } }
		custom_tooltip = jaddempire_change_leaning_west_medium_tt
		hidden_effect = {
			change_variable = { which = jaddariLeaning value = 3 }
		}
	}
}
jaddempire_change_leaning_west_large = {
	if = {
		limit = { OR = { tag = F46 was_tag = F46 } NOT = { has_country_flag = had_deioderan } }
		custom_tooltip = jaddempire_change_leaning_west_large_tt
		hidden_effect = {
			change_variable = { which = jaddariLeaning value = 5 }
		}
	}
}
jaddempire_change_leaning_west_massive = {
	if = {
		limit = { OR = { tag = F46 was_tag = F46 } NOT = { has_country_flag = had_deioderan } }
		custom_tooltip = jaddempire_change_leaning_west_massive_tt
		hidden_effect = {
			change_variable = { which = jaddariLeaning value = 10 }
		}
	}
}
jaddempire_change_leaning_east_tiny = {
	if = {
		limit = { OR = { tag = F46 was_tag = F46 } NOT = { has_country_flag = had_deioderan } }
		custom_tooltip = jaddempire_change_leaning_east_tiny_tt
		hidden_effect = {
			change_variable = { which = jaddariLeaning value = -1 }
		}
	}
}
jaddempire_change_leaning_east_small = {
	if = {
		limit = { OR = { tag = F46 was_tag = F46 } NOT = { has_country_flag = had_deioderan } }
		custom_tooltip = jaddempire_change_leaning_east_small_tt
		hidden_effect = {
			change_variable = { which = jaddariLeaning value = -2 }
		}
	}
}
jaddempire_change_leaning_east_medium = {
	if = {
		limit = { OR = { tag = F46 was_tag = F46 } NOT = { has_country_flag = had_deioderan } }
		custom_tooltip = jaddempire_change_leaning_east_medium_tt
		hidden_effect = {
			change_variable = { which = jaddariLeaning value = -3 }
		}
	}
}
jaddempire_change_leaning_east_large = {
	if = {
		limit = { OR = { tag = F46 was_tag = F46 } NOT = { has_country_flag = had_deioderan } }
		custom_tooltip = jaddempire_change_leaning_east_large_tt
		hidden_effect = {
			change_variable = { which = jaddariLeaning value = -5 }
		}
	}
}
jaddempire_change_leaning_east_massive = {
	if = {
		limit = { OR = { tag = F46 was_tag = F46 } NOT = { has_country_flag = had_deioderan } }
		custom_tooltip = jaddempire_change_leaning_east_massive_tt
		hidden_effect = {
			change_variable = { which = jaddariLeaning value = -10 }
		}
	}
}
jaddempire_remove_ruler_modifier = {
	hidden_effect = {
		remove_country_modifier = jaddempire_azka_sur_capital
		remove_country_modifier = jaddempire_bulwar_capital
		remove_country_modifier = jaddempire_religious_capital
		remove_country_modifier = jaddempire_brasan_capital
		remove_country_modifier = jaddempire_anbenncost_capital
		remove_country_modifier = jaddempire_dhenijansar_capital
		remove_country_modifier = jaddempire_sramaya_capital
		remove_country_modifier = jaddempire_aizt_ralare_capital
		remove_country_modifier = jaddempire_tianlou_capital
		remove_country_modifier = jaddempire_jaddanzar_capital
	}
}
jaddari_deioderan_battle_counter_update = {
	if = {
		limit = { tag = F51 FROM = { tag = F99 } }
		change_variable = { which = jaddari_deioderan_battle_counter value = $value$ }
	}
}
jaddari_deioderan_dev_counter_update = {
	if = {
		limit = {
			owner = { tag = F51 has_disaster = jaddari_deioderan }
			OR = {
				AND = { owner = { capital_scope = { continent = asia } } OR = { continent = europe continent = africa } }
				AND = { owner = { capital_scope = { OR = { continent = europe continent = africa } } } continent = asia }
			}
		}
		change_variable = { which = jaddari_deioderan_dev_counter value = 1 }
	}
}
jaddari_close_sway_menu = {
	hidden_effect = {
		clr_country_flag = jaddari_deioderan_sway_menu_open
		if = {
			limit = { tag = F51 }
			F99 = {
				every_owned_province = {
					clr_province_flag = jaddari_sway_target_1
					clr_province_flag = jaddari_sway_target_2
					clr_province_flag = jaddari_sway_target_3
					clr_province_flag = jaddari_sway_target_4
				}
			}
		}
		else = {
			F51 = {
				every_owned_province = {
					clr_province_flag = jaddari_sway_target_1
					clr_province_flag = jaddari_sway_target_2
					clr_province_flag = jaddari_sway_target_3
					clr_province_flag = jaddari_sway_target_4
				}
			}
		}
	}
}
jaddari_attempt_to_sway_province = {
	if = {
		limit = { development = 50 }
		ROOT = { add_dip_power = -120 }
	}
	else_if = {
		limit = { development = 45 }
		ROOT = { add_dip_power = -100 }
	}
	else_if = {
		limit = { development = 40 }
		ROOT = { add_dip_power = -85 }
	}
	else_if = {
		limit = { development = 35 }
		ROOT = { add_dip_power = -75 }
	}
	else_if = {
		limit = { development = 30 }
		ROOT = { add_dip_power = -65 }
	}
	else_if = {
		limit = { development = 25 }
		ROOT = { add_dip_power = -55 }
	}
	else_if = {
		limit = { development = 20 }
		ROOT = { add_dip_power = -50 }
	}
	else_if = {
		limit = { development = 15 }
		ROOT = { add_dip_power = -45 }
	}
	else_if = {
		limit = { development = 10 }
		ROOT = { add_dip_power = -40 }
	}
	else_if = {
		limit = { development = 5 }
		ROOT = { add_dip_power = -35 }
	}
	else = {
		ROOT = { add_dip_power = -30 }
	}
	
	hidden_effect = { province_event = { id = jaddari_missions.301 } }
	custom_tooltip = jaddari_attempt_to_sway_province_chance_tt
}
jaddempire_move_court_minorities_from_to = {
	custom_tooltip = jaddempire_move_court_minorities_from_to_tooltip
	hidden_effect = {
		if = {
			limit = {
				$from$ = {
					OR = {
						has_coexisting_hobgoblin_pop_trigger = yes
						has_integrated_hobgoblin_pop_trigger = yes
					}
				}
				$province_id$ = {
					NOT = {
						OR = {
							has_hobgoblin_majority_trigger = yes
							has_hobgoblin_minority_trigger = yes
						}
					}
				}
			}
			$from$ = {
				remove_hobgoblin_minority_size_effect = yes
			}
			$province_id$ = {
				add_hobgoblin_minority_size_effect = yes
			}
		}
		if = {
			limit = {
				$from$ = {
					OR = {
						has_coexisting_centaur_pop_trigger = yes
						has_integrated_centaur_pop_trigger = yes
					}
				}
				$province_id$ = {
					NOT = {
						OR = {
							has_centaur_majority_trigger = yes
							has_centaur_minority_trigger = yes
						}
					}
				}
			}
			$from$ = {
				remove_centaur_minority_size_effect = yes
			}
			$province_id$ = {
				add_centaur_minority_size_effect = yes
			}
		}
		if = {
			limit = {
				$from$ = {
					OR = {
						has_coexisting_ogre_pop_trigger = yes
						has_integrated_ogre_pop_trigger = yes
					}
				}
				$province_id$ = {
					NOT = {
						OR = {
							has_ogre_majority_trigger = yes
							has_ogre_minority_trigger = yes
						}
					}
				}
			}
			$from$ = {
				remove_ogre_minority_size_effect = yes
			}
			$province_id$ = {
				add_ogre_minority_size_effect = yes
			}
		}
		if = {
			limit = {
				$from$ = {
					OR = {
						has_coexisting_troll_pop_trigger = yes
						has_integrated_troll_pop_trigger = yes
					}
				}
				$province_id$ = {
					NOT = {
						OR = {
							has_troll_majority_trigger = yes
							has_troll_minority_trigger = yes
						}
					}
				}
			}
			$from$ = {
				remove_troll_minority_size_effect = yes
			}
			$province_id$ = {
				add_troll_minority_size_effect = yes
			}
		}
		if = {
			limit = {
				$from$ = {
					OR = {
						has_coexisting_harpy_pop_trigger = yes
						has_integrated_harpy_pop_trigger = yes
					}
				}
				$province_id$ = {
					NOT = {
						OR = {
							has_harpy_majority_trigger = yes
							has_harpy_minority_trigger = yes
						}
					}
				}
			}
			$from$ = {
				remove_harpy_minority_size_effect = yes
			}
			$province_id$ = {
				add_harpy_minority_size_effect = yes
			}
		}
		if = {
			limit = {
				$from$ = {
					OR = {
						has_coexisting_goblin_pop_trigger = yes
						has_integrated_goblin_pop_trigger = yes
					}
				}
				$province_id$ = {
					NOT = {
						OR = {
							has_goblin_majority_trigger = yes
							has_goblin_minority_trigger = yes
						}
					}
				}
			}
			$from$ = {
				remove_goblin_minority_size_effect = yes
			}
			$province_id$ = {
				add_goblin_minority_size_effect = yes
			}
		}
		if = {
			limit = {
				$from$ = {
					OR = {
						has_coexisting_orcish_pop_trigger = yes
						has_integrated_orcish_pop_trigger = yes
					}
				}
				$province_id$ = {
					NOT = {
						OR = {
							has_orcish_majority_trigger = yes
							has_orcish_minority_trigger = yes
						}
					}
				}
			}
			$from$ = {
				remove_orcish_minority_size_effect = yes
			}
			$province_id$ = {
				add_orcish_minority_size_effect = yes
			}
		}
		if = {
			limit = {
				$from$ = {
					OR = {
						has_coexisting_gnollish_pop_trigger = yes
						has_integrated_gnollish_pop_trigger = yes
					}
				}
				$province_id$ = {
					NOT = {
						OR = {
							has_gnollish_majority_trigger = yes
							has_gnollish_minority_trigger = yes
						}
					}
				}
			}
			$from$ = {
				remove_gnollish_minority_size_effect = yes
			}
			$province_id$ = {
				add_gnollish_minority_size_effect = yes
			}
		}
		if = {
			limit = {
				$from$ = {
					OR = {
						has_coexisting_kobold_pop_trigger = yes
						has_integrated_kobold_pop_trigger = yes
					}
				}
				$province_id$ = {
					NOT = {
						OR = {
							has_kobold_majority_trigger = yes
							has_kobold_minority_trigger = yes
						}
					}
				}
			}
			$from$ = {
				remove_kobold_minority_size_effect = yes
			}
			$province_id$ = {
				add_kobold_minority_size_effect = yes
			}
		}
		if = {
			limit = {
				$from$ = {
					OR = {
						has_coexisting_ruinborn_pop_trigger = yes
						has_integrated_ruinborn_pop_trigger = yes
					}
				}
				$province_id$ = {
					NOT = {
						OR = {
							has_ruinborn_majority_trigger = yes
							has_ruinborn_minority_trigger = yes
						}
					}
				}
			}
			$from$ = {
				remove_ruinborn_minority_size_effect = yes
			}
			$province_id$ = {
				add_ruinborn_minority_size_effect = yes
			}
		}
		if = {
			limit = {
				$from$ = {
					OR = {
						has_coexisting_half_orcish_pop_trigger = yes
						has_integrated_half_orcish_pop_trigger = yes
					}
				}
				$province_id$ = {
					NOT = {
						OR = {
							has_half_orcish_majority_trigger = yes
							has_half_orcish_minority_trigger = yes
						}
					}
				}
			}
			$from$ = {
				remove_half_orcish_minority_size_effect = yes
			}
			$province_id$ = {
				add_half_orcish_minority_size_effect = yes
			}
		}
		if = {
			limit = {
				$from$ = {
					OR = {
						has_coexisting_half_elven_pop_trigger = yes
						has_integrated_half_elven_pop_trigger = yes
					}
				}
				$province_id$ = {
					NOT = {
						OR = {
							has_half_elven_majority_trigger = yes
							has_half_elven_minority_trigger = yes
						}
					}
				}
			}
			$from$ = {
				remove_half_elven_minority_size_effect = yes
			}
			$province_id$ = {
				add_half_elven_minority_size_effect = yes
			}
		}
		if = {
			limit = {
				$from$ = {
					OR = {
						has_coexisting_harimari_pop_trigger = yes
						has_integrated_harimari_pop_trigger = yes
					}
				}
				$province_id$ = {
					NOT = {
						OR = {
							has_harimari_majority_trigger = yes
							has_harimari_minority_trigger = yes
						}
					}
				}
			}
			$from$ = {
				remove_harimari_minority_size_effect = yes
			}
			$province_id$ = {
				add_harimari_minority_size_effect = yes
			}
		}
		if = {
			limit = {
				$from$ = {
					OR = {
						has_coexisting_halfling_pop_trigger = yes
						has_integrated_halfling_pop_trigger = yes
					}
				}
				$province_id$ = {
					NOT = {
						OR = {
							has_halfling_majority_trigger = yes
							has_halfling_minority_trigger = yes
						}
					}
				}
			}
			$from$ = {
				remove_halfling_minority_size_effect = yes
			}
			$province_id$ = {
				add_halfling_minority_size_effect = yes
			}
		}
		if = {
			limit = {
				$from$ = {
					OR = {
						has_coexisting_gnomish_pop_trigger = yes
						has_integrated_gnomish_pop_trigger = yes
					}
				}
				$province_id$ = {
					NOT = {
						OR = {
							has_gnomish_majority_trigger = yes
							has_gnomish_minority_trigger = yes
						}
					}
				}
			}
			$from$ = {
				remove_gnomish_minority_size_effect = yes
			}
			$province_id$ = {
				add_gnomish_minority_size_effect = yes
			}
		}
		if = {
			limit = {
				$from$ = {
					OR = {
						has_coexisting_human_pop_trigger = yes
						has_integrated_human_pop_trigger = yes
					}
				}
				$province_id$ = {
					NOT = {
						OR = {
							has_human_majority_trigger = yes
							has_human_minority_trigger = yes
						}
					}
				}
			}
			$from$ = {
				remove_human_minority_size_effect = yes
			}
			$province_id$ = {
				add_human_minority_size_effect = yes
			}
		}
		if = {
			limit = {
				$from$ = {
					OR = {
						has_coexisting_elven_pop_trigger = yes
						has_integrated_elven_pop_trigger = yes
					}
				}
				$province_id$ = {
					NOT = {
						OR = {
							has_elven_majority_trigger = yes
							has_elven_minority_trigger = yes
						}
					}
				}
			}
			$from$ = {
				remove_elven_minority_size_effect = yes
			}
			$province_id$ = {
				add_elven_minority_size_effect = yes
			}
		}
		if = {
			limit = {
				$from$ = {
					OR = {
						has_coexisting_dwarven_pop_trigger = yes
						has_integrated_dwarven_pop_trigger = yes
					}
				}
				$province_id$ = {
					NOT = {
						OR = {
							has_dwarven_majority_trigger = yes
							has_dwarven_minority_trigger = yes
						}
					}
				}
			}
			$from$ = {
				remove_dwarven_minority_size_effect = yes
			}
			$province_id$ = {
				add_dwarven_minority_size_effect = yes
			}
		}
	}
}

###########
##Adenica##
###########
adenicaIncrementChivalryMissionCompleted = {
	hidden_effect = {
		change_variable = { adenicaChivalryMissionsCompleted = 1 }
	}
}

###################
##Verkal Skomdihr##
###################
verkalskomdihr_define_hold_that_can_build_gate = {
	random_owned_province = {
		limit = { verkalskomdihr_can_build_gate = yes NOT = { has_province_flag = vs_hold_@ROOT } }
		set_province_flag = vs_option_hold_1_@ROOT
		set_province_flag = vs_hold_@ROOT
		save_event_target_as = vs_hold1
	}
	random_owned_province = {
		limit = { verkalskomdihr_can_build_gate = yes NOT = { has_province_flag = vs_hold_@ROOT } }
		set_province_flag = vs_option_hold_2_@ROOT
		set_province_flag = vs_hold_@ROOT
		save_event_target_as = vs_hold2
	}
	random_owned_province = {
		limit = { verkalskomdihr_can_build_gate = yes NOT = { has_province_flag = vs_hold_@ROOT } }
		set_province_flag = vs_option_hold_3_@ROOT
		set_province_flag = vs_hold_@ROOT
		save_event_target_as = vs_hold3
	}
	random_owned_province = {
		limit = { verkalskomdihr_can_build_gate = yes NOT = { has_province_flag = vs_hold_@ROOT } }
		set_province_flag = vs_option_hold_4_@ROOT
		set_province_flag = vs_hold_@ROOT
		save_event_target_as = vs_hold4
	}
	random_owned_province = {
		limit = { verkalskomdihr_can_build_gate = yes NOT = { has_province_flag = vs_hold_@ROOT } }
		set_province_flag = vs_option_hold_5_@ROOT
		set_province_flag = vs_hold_@ROOT
		save_event_target_as = vs_hold5
	}
	random_owned_province = {
		limit = { verkalskomdihr_can_build_gate = yes NOT = { has_province_flag = vs_hold_@ROOT } }
		set_province_flag = vs_option_hold_6_@ROOT
		set_province_flag = vs_hold_@ROOT
		save_event_target_as = vs_hold6
	}
	random_owned_province = {
		limit = { verkalskomdihr_can_build_gate = yes NOT = { has_province_flag = vs_hold_@ROOT } }
		set_province_flag = vs_option_hold_7_@ROOT
		set_province_flag = vs_hold_@ROOT
		save_event_target_as = vs_hold7
	}
	random_owned_province = {
		limit = { verkalskomdihr_can_build_gate = yes NOT = { has_province_flag = vs_hold_@ROOT } }
		set_province_flag = vs_option_hold_8_@ROOT
		set_province_flag = vs_hold_@ROOT
		save_event_target_as = vs_hold8
	}
	random_owned_province = {
		limit = { verkalskomdihr_can_build_gate = yes NOT = { has_province_flag = vs_hold_@ROOT } }
		set_province_flag = vs_option_hold_9_@ROOT
		set_province_flag = vs_hold_@ROOT
		save_event_target_as = vs_hold9
	}
	random_owned_province = {
		limit = { verkalskomdihr_can_build_gate = yes NOT = { has_province_flag = vs_hold_@ROOT } }
		set_province_flag = vs_option_hold_10_@ROOT
		set_province_flag = vs_hold_@ROOT
		save_event_target_as = vs_hold10
	}
	random_owned_province = {
		limit = { verkalskomdihr_can_build_gate = yes NOT = { has_province_flag = vs_hold_@ROOT } }
		set_province_flag = vs_option_hold_11_@ROOT
		set_province_flag = vs_hold_@ROOT
		save_event_target_as = vs_hold11
	}
	random_owned_province = {
		limit = { verkalskomdihr_can_build_gate = yes NOT = { has_province_flag = vs_hold_@ROOT } }
		set_province_flag = vs_option_hold_12_@ROOT
		set_province_flag = vs_hold_@ROOT
		save_event_target_as = vs_hold12
	}
	random_owned_province = {
		limit = { verkalskomdihr_can_build_gate = yes NOT = { has_province_flag = vs_hold_@ROOT } }
		set_province_flag = vs_option_hold_13_@ROOT
		set_province_flag = vs_hold_@ROOT
		save_event_target_as = vs_hold13
	}
	random_owned_province = {
		limit = { verkalskomdihr_can_build_gate = yes NOT = { has_province_flag = vs_hold_@ROOT } }
		set_province_flag = vs_option_hold_14_@ROOT
		set_province_flag = vs_hold_@ROOT
		save_event_target_as = vs_hold14
	}
	random_owned_province = {
		limit = { verkalskomdihr_can_build_gate = yes NOT = { has_province_flag = vs_hold_@ROOT } }
		set_province_flag = vs_option_hold_15_@ROOT
		set_province_flag = vs_hold_@ROOT
		save_event_target_as = vs_hold15
	}
	random_owned_province = {
		limit = { verkalskomdihr_can_build_gate = yes NOT = { has_province_flag = vs_hold_@ROOT } }
		set_province_flag = vs_option_hold_16_@ROOT
		set_province_flag = vs_hold_@ROOT
		save_event_target_as = vs_hold16
	}
	random_owned_province = {
		limit = { verkalskomdihr_can_build_gate = yes NOT = { has_province_flag = vs_hold_@ROOT } }
		set_province_flag = vs_option_hold_17_@ROOT
		set_province_flag = vs_hold_@ROOT
		save_event_target_as = vs_hold17
	}
	random_owned_province = {
		limit = { verkalskomdihr_can_build_gate = yes NOT = { has_province_flag = vs_hold_@ROOT } }
		set_province_flag = vs_option_hold_18_@ROOT
		set_province_flag = vs_hold_@ROOT
		save_event_target_as = vs_hold18
	}
	random_owned_province = {
		limit = { verkalskomdihr_can_build_gate = yes NOT = { has_province_flag = vs_hold_@ROOT } }
		set_province_flag = vs_option_hold_19_@ROOT
		set_province_flag = vs_hold_@ROOT
		save_event_target_as = vs_hold19
	}
	random_owned_province = {
		limit = { verkalskomdihr_can_build_gate = yes NOT = { has_province_flag = vs_hold_@ROOT } }
		set_province_flag = vs_option_hold_20_@ROOT
		set_province_flag = vs_hold_@ROOT
		save_event_target_as = vs_hold20
	}
	random_owned_province = {
		limit = { verkalskomdihr_can_build_gate = yes NOT = { has_province_flag = vs_hold_@ROOT } }
		set_province_flag = vs_option_hold_21_@ROOT
		set_province_flag = vs_hold_@ROOT
		save_event_target_as = vs_hold21
	}
	random_owned_province = {
		limit = { verkalskomdihr_can_build_gate = yes NOT = { has_province_flag = vs_hold_@ROOT } }
		set_province_flag = vs_option_hold_22_@ROOT
		set_province_flag = vs_hold_@ROOT
		save_event_target_as = vs_hold22
	}
	random_owned_province = {
		limit = { verkalskomdihr_can_build_gate = yes NOT = { has_province_flag = vs_hold_@ROOT } }
		set_province_flag = vs_option_hold_23_@ROOT
		set_province_flag = vs_hold_@ROOT
		save_event_target_as = vs_hold23
	}
	random_owned_province = {
		limit = { verkalskomdihr_can_build_gate = yes NOT = { has_province_flag = vs_hold_@ROOT } }
		set_province_flag = vs_option_hold_24_@ROOT
		set_province_flag = vs_hold_@ROOT
		save_event_target_as = vs_hold24
	}
	random_owned_province = {
		limit = { verkalskomdihr_can_build_gate = yes NOT = { has_province_flag = vs_hold_@ROOT } }
		set_province_flag = vs_option_hold_25_@ROOT
		set_province_flag = vs_hold_@ROOT
		save_event_target_as = vs_hold25
	}
	random_owned_province = {
		limit = { verkalskomdihr_can_build_gate = yes NOT = { has_province_flag = vs_hold_@ROOT } }
		set_province_flag = vs_option_hold_26_@ROOT
		set_province_flag = vs_hold_@ROOT
		save_event_target_as = vs_hold26
	}
	random_owned_province = {
		limit = { verkalskomdihr_can_build_gate = yes NOT = { has_province_flag = vs_hold_@ROOT } }
		set_province_flag = vs_option_hold_27_@ROOT
		set_province_flag = vs_hold_@ROOT
		save_event_target_as = vs_hold27
	}
	random_owned_province = {
		limit = { verkalskomdihr_can_build_gate = yes NOT = { has_province_flag = vs_hold_@ROOT } }
		set_province_flag = vs_option_hold_28_@ROOT
		set_province_flag = vs_hold_@ROOT
		save_event_target_as = vs_hold28
	}
	random_owned_province = {
		limit = { verkalskomdihr_can_build_gate = yes NOT = { has_province_flag = vs_hold_@ROOT } }
		set_province_flag = vs_option_hold_29_@ROOT
		set_province_flag = vs_hold_@ROOT
		save_event_target_as = vs_hold29
	}
}
verkalskomdihr_clr_gate_menu = {
	every_owned_province = {
		limit = { has_province_flag = vs_hold_@ROOT }
		clr_province_flag = vs_option_hold_1_@ROOT
		clr_province_flag = vs_option_hold_2_@ROOT
		clr_province_flag = vs_option_hold_3_@ROOT
		clr_province_flag = vs_option_hold_4_@ROOT
		clr_province_flag = vs_option_hold_5_@ROOT
		clr_province_flag = vs_option_hold_6_@ROOT
		clr_province_flag = vs_option_hold_7_@ROOT
		clr_province_flag = vs_option_hold_8_@ROOT
		clr_province_flag = vs_option_hold_9_@ROOT
		clr_province_flag = vs_option_hold_10_@ROOT
		clr_province_flag = vs_option_hold_11_@ROOT
		clr_province_flag = vs_option_hold_12_@ROOT
		clr_province_flag = vs_option_hold_13_@ROOT
		clr_province_flag = vs_option_hold_14_@ROOT
		clr_province_flag = vs_option_hold_15_@ROOT
		clr_province_flag = vs_option_hold_16_@ROOT
		clr_province_flag = vs_option_hold_17_@ROOT
		clr_province_flag = vs_option_hold_18_@ROOT
		clr_province_flag = vs_option_hold_19_@ROOT
		clr_province_flag = vs_option_hold_20_@ROOT
		clr_province_flag = vs_option_hold_21_@ROOT
		clr_province_flag = vs_option_hold_22_@ROOT
		clr_province_flag = vs_option_hold_23_@ROOT
		clr_province_flag = vs_option_hold_24_@ROOT
		clr_province_flag = vs_option_hold_25_@ROOT
		clr_province_flag = vs_option_hold_26_@ROOT
		clr_province_flag = vs_option_hold_27_@ROOT
		clr_province_flag = vs_option_hold_28_@ROOT
		clr_province_flag = vs_option_hold_29_@ROOT
		clr_province_flag = vs_hold_@ROOT
	}
	clr_country_flag = verkalskomdihr_gate_menu
}

##########
##Aelnar##
##########
aelnar_happy_sicrheior = {
	if = {
		limit = { NOT = { has_country_flag = sicrheior_revolted } }
		custom_tooltip = sicrheior_happy_tooltip
		hidden_effect = {
			subtract_variable = { sicrheior_value = 20 }
		}
	}
}
aelnar_angry_sicrheior = {
	if = {
		limit = { NOT = { has_country_flag = sicrheior_revolted } }
		custom_tooltip = sicrheior_angry_tooltip
		hidden_effect = {
			change_variable = { sicrheior_value = 20 }
		}
	}
}
aelnar_happy_kayd = {
	if = {
		limit = { NOT = { has_country_flag = kayd_revolted } }
		custom_tooltip = kayd_happy_tooltip
		hidden_effect = {
			subtract_variable = { kayd_value = 20 }
		}
	}
}
aelnar_angry_kayd = {
	if = {
		limit = { NOT = { has_country_flag = kayd_revolted } }
		custom_tooltip = kayd_angry_tooltip
		hidden_effect = {
			change_variable = { kayd_value = 20 }
		}
	}
}
aelnar_happy_dahvar = {
	if = {
		limit = { NOT = { has_country_flag = dahvar_revolted } }
		custom_tooltip = dahvar_happy_tooltip
		hidden_effect = {
			subtract_variable = { dahvar_value = 20 }
		}
	}
}
aelnar_angry_dahvar = {
	if = {
		limit = { NOT = { has_country_flag = dahvar_revolted } }
		custom_tooltip = dahvar_angry_tooltip
		hidden_effect = {
			change_variable = { dahvar_value = 20 }
		}
	}
}
aelnar_happy_aelthanas = {
	if = {
		limit = { NOT = { has_country_flag = aelthanas_revolted } }
		custom_tooltip = aelthanas_happy_tooltip
		hidden_effect = {
			subtract_variable = { aelthanas_value = 20 }
		}
	}
}
aelnar_angry_aelthanas = {
	if = {
		limit = { NOT = { has_country_flag = aelthanas_revolted } }
		custom_tooltip = aelthanas_angry_tooltip
		hidden_effect = {
			change_variable = { aelthanas_value = 20 }
		}
	}
}
aelnar_little_happy_sicrheior = {
	if = {
		limit = { NOT = { has_country_flag = sicrheior_revolted } }
		custom_tooltip = sicrheior_happy_little_tooltip
		hidden_effect = {
			subtract_variable = { sicrheior_value = 7 }
		
		}
	}
}
aelnar_little_angry_sicrheior = {
	if = {
		limit = { NOT = { has_country_flag = sicrheior_revolted } }
		custom_tooltip = sicrheior_angry_little_tooltip
		hidden_effect = {
			change_variable = { sicrheior_value = 7 }
		}
	}
}
aelnar_little_happy_kayd = {
	if = {
		limit = { NOT = { has_country_flag = kayd_revolted } }
		custom_tooltip = kayd_happy_little_tooltip
		hidden_effect = {
			subtract_variable = { kayd_value = 7 }
		}
	}
}
aelnar_little_angry_kayd = {
	if = {
		limit = { NOT = { has_country_flag = kayd_revolted } }
		custom_tooltip = kayd_angry_little_tooltip
		hidden_effect = {
			change_variable = { kayd_value = 7 }
		}
	}
}
aelnar_little_happy_dahvar = {
	if = {
		limit = { NOT = { has_country_flag = dahvar_revolted } }
		custom_tooltip = dahvar_happy_little_tooltip
		hidden_effect = {
			subtract_variable = { dahvar_value = 7 }
		}
	}
}
aelnar_little_angry_dahvar = {
	if = {
		limit = { NOT = { has_country_flag = dahvar_revolted } }
		custom_tooltip = dahvar_angry_little_tooltip
		hidden_effect = {
			change_variable = { dahvar_value = 7 }
		}
	}
}
aelnar_little_happy_aelthanas = {
	if = {
		limit = { NOT = { has_country_flag = aelthanas_revolted } }
		custom_tooltip = aelthanas_happy_little_tooltip
		hidden_effect = {
			subtract_variable = { aelthanas_value = 7 }
		}
	}
}
aelnar_little_angry_aelthanas = {
	if = {
		limit = { NOT = { has_country_flag = aelthanas_revolted } }
		custom_tooltip = aelthanas_angry_little_tooltip
		hidden_effect = {
			change_variable = { aelthanas_value = 7 }
		}
	}
}
rianvisa_declare_war = {
	declare_war_with_cb = {
		who = Z43
		casus_belli = cb_rianvisa
	}
	if = {
		limit = { NOT = { tag = Z69 } Z69 = { exists = yes } }
		declare_war_with_cb = {
			who = Z69
			casus_belli = cb_rianvisa
		}
	}
	if = {
		limit = { NOT = { tag = Z70 } Z70 = { exists = yes } }
		declare_war_with_cb = {
			who = Z70
			casus_belli = cb_rianvisa
		}
	}
	if = {
		limit = { NOT = { tag = Z71 } Z71 = { exists = yes } }
		declare_war_with_cb = {
			who = Z71
			casus_belli = cb_rianvisa
		}
	}
	if = {
		limit = { NOT = { tag = Z72 } Z72 = { exists = yes } }
		declare_war_with_cb = {
			who = Z72
			casus_belli = cb_rianvisa
		}
	}
	if = {
		limit = { NOT = { tag = Z73 } Z73 = { exists = yes } }
		declare_war_with_cb = {
			who = Z73
			casus_belli = cb_rianvisa
		}
	}
}
rianvisa_starting_army = {
	add_manpower = 30
	add_treasury = 1250
	add_stability = 1
	add_prestige = 120
	capital_scope = {
		build_to_forcelimit = {
			infantry = 0.6
			cavalry = 0.1
			artillery = 0.3
		}
	}
	random_owned_province = {
		limit = { has_port = yes }
		build_to_forcelimit = {
			heavy_ship = 0.2
			light_ship = 0.3
			transport = 0.5
		}
	}
}
rianvisa_end_modifier = {
	if = {
		limit = { NOT = { has_country_flag = aelthanas_revolted } }
		add_country_modifier = {
			name = rianvisa_aelthanas_appeased
			duration = -1
		}
	}
	if = {
		limit = { NOT = { has_country_flag = dahvar_revolted } }
		add_country_modifier = {
			name = rianvisa_dahvar_appeased
			duration = -1
		}
	}
	if = {
		limit = { NOT = { has_country_flag = sicrheior_revolted } }
		add_country_modifier = {
			name = rianvisa_sicrheior_appeased
			duration = -1
		}
	}
	if = {
		limit = { NOT = { has_country_flag = kayd_revolted } }
		add_country_modifier = {
			name = rianvisa_kayd_appeased
			duration = -1
		}
	}
}
aelnar_aia_recruitment = {
	every_owned_province = {
		if = {
			limit = { area_for_scope_province = { has_state_edict = aia_recruitement_edict } }
			if = { limit = { base_manpower =  10 }
				if = { limit = { base_manpower =  15 } 
					if = { limit = { base_manpower =  17 } 
						if = { limit = { base_manpower =  18 } 
							if = { limit = { base_manpower =  19 } 
								ROOT = { change_variable = { aia_agents = 19 } }
							}
							if = { limit = { NOT = { base_manpower =  19 } } 
								ROOT = { change_variable = { aia_agents = 18 } }
							}
						}
						if = { limit = { NOT = { base_manpower =  18 } } 
							ROOT = { change_variable = { aia_agents = 17 } }
						}
					}
					if = { limit = { NOT = { base_manpower =  17 } } 
						if = { limit = { base_manpower =  16 } 
							ROOT = { change_variable = { aia_agents = 16 } }
						}
						if = { limit = { NOT = { base_manpower =  16 } } 
							ROOT = { change_variable = { aia_agents = 15 } }
						}
					}
				}
				if = { limit = { NOT = { base_manpower =  15 } } 
					if = { limit = { base_manpower =  12 } 
						if = { limit = { base_manpower =  13 } 
							if = { limit = { base_manpower =  14 } 
								ROOT = { change_variable = { aia_agents = 14 } }
							}
							if = { limit = { NOT = { base_manpower =  14 } } 
								ROOT = { change_variable = { aia_agents = 13 } }
							}
						}
						if = { limit = { NOT = { base_manpower =  13 } } 
							ROOT = { change_variable = { aia_agents = 12 } }
						}
					}
					if = { limit = { NOT = { base_manpower =  12 } } 
						if = { limit = { base_manpower =  11 } 
							ROOT = { change_variable = { aia_agents = 11 } }
						}
						if = { limit = { NOT = { base_manpower =  11 } } 
							ROOT = { change_variable = { aia_agents = 10 } }
						}
					}
				}
			}
			if = { limit = { NOT = { base_manpower =  10 } } 
				if = { limit = { base_manpower =  5 } 
					if = { limit = { base_manpower =  7 } 
						if = { limit = { base_manpower =  8 } 
							if = { limit = { base_manpower =  9 } 
								ROOT = { change_variable = { aia_agents = 9 } }
							}
							if = { limit = { NOT = { base_manpower =  9 } } 
								ROOT = { change_variable = { aia_agents = 8 } }
							}
						}
						if = { limit = { NOT = { base_manpower =  8 } } 
							ROOT = { change_variable = { aia_agents = 7 } }
						}
					}
					if = { limit = { NOT = { base_manpower =  7 } } 
						if = { limit = { base_manpower =  6 } 
							ROOT = { change_variable = { aia_agents = 6 } }
						}
						if = { limit = { NOT = { base_manpower =  6 } } 
							ROOT = { change_variable = { aia_agents = 5 } }
						}
					}
				}
				if = { limit = { NOT = { base_manpower =  5 } } 
					if = { limit = { base_manpower =  2 } 
						if = { limit = { base_manpower =  3 } 
							if = { limit = { base_manpower =  4 } 
								ROOT = { change_variable = { aia_agents = 4 } }
							}
							if = { limit = { NOT = { base_manpower =  4 } } 
								ROOT = { change_variable = { aia_agents = 3 } }
							}
						}
						if = { limit = { NOT = { base_manpower =  3 } } 
							ROOT = { change_variable = { aia_agents = 2 } }
						}
					}
					if = { limit = { NOT = { base_manpower =  2 } }
						if = { limit = { base_manpower =  1 } 
							ROOT = { change_variable = { aia_agents = 1 } }
						}
						if = { limit = { NOT = { base_manpower =  1 } } 
							ROOT = { change_variable = { aia_agents = 1 } }
						}
					}
				}
			}
		}
	}
}
aelnar_the_covenant_influence = {
	every_owned_province = {
		limit = {
			has_state_edict = covenant_influence_edict
			NOT = {
				area_for_scope_province = {
					has_province_flag = temp
				}
			}
		}
		set_province_flag = temp
		PREV = { change_variable = { covenant_influence = 1 } }
	}
	every_owned_province = {
		clr_province_flag = temp
	}
}
aelnar_battle_count_lost = {
	if = {
		limit = { tag = Z43 has_ruler_flag = sicrheior_son }
		change_variable = { nbChargeLose = 1 }
		change_variable = { totalBattle = 1 }
		set_variable = {
			which = battleWinRate
			which = nbCharge
		}
		divide_variable = {
			which = battleWinRate
			which = totalBattle
		}
		multiply_variable = {
			which = battleWinRate
			value = 100
		}
	}
}

#################
##Verkal Dromak##
#################
verkal_dromak_kill_mages = {
	# 1 is at the bottom
	if = {
		limit = { has_country_modifier = I25_kill_mages_1 }
		remove_country_modifier = I25_kill_mages_1
		add_country_modifier = {
			name = I25_kill_mages_2
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = I25_kill_mages_2 }
		remove_country_modifier = I25_kill_mages_2
		add_country_modifier = {
			name = I25_kill_mages_3
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = I25_kill_mages_3	}
		remove_country_modifier = I25_kill_mages_3
		add_country_modifier = {
			name = I25_kill_mages_4
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = I25_kill_mages_4	}
		remove_country_modifier = I25_kill_mages_4
		add_country_modifier = {
			name = I25_kill_mages_5
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = I25_kill_mages_5	}
		remove_country_modifier = I25_kill_mages_5
		add_country_modifier = {
			name = I25_kill_mages_6
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = I25_kill_mages_6	}
		remove_country_modifier = I25_kill_mages_6
		add_country_modifier = {
			name = I25_kill_mages_7
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = I25_kill_mages_7	}
		remove_country_modifier = I25_kill_mages_7
		add_country_modifier = {
			name = I25_kill_mages_8
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = I25_kill_mages_8	}
		remove_country_modifier = I25_kill_mages_8
		add_country_modifier = {
			name = I25_kill_mages_9
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = I25_kill_mages_9	}
		remove_country_modifier = I25_kill_mages_9
		add_country_modifier = {
			name = I25_kill_mages_10
			duration = -1
		}
	}
	else = {
		add_country_modifier = {
			name = I25_kill_mages_1
			duration = -1
		}
	}
}

############
##Malacnar##
############
malacnar_battleking_rankup = {
	if = {
		limit = {
			has_ruler_modifier = g32_untested_battleking
		}
		remove_country_modifier = g32_untested_battleking
		add_ruler_modifier = {
			name = g32_tested_battleking
		}
	}
	else_if = {
		limit = {
			has_ruler_modifier = g32_cowardly_battleking
		}
		remove_country_modifier = g32_cowardly_battleking
		add_ruler_modifier = {
			name = g32_untested_battleking
		}
	}
	else_if = {
		limit = {
			has_ruler_modifier = g32_tested_battleking
		}
		remove_country_modifier = g32_tested_battleking
		add_ruler_modifier = {
			name = g32_bloodied_battleking
		}
	}
	else_if = {
		limit = {
			has_ruler_modifier = g32_bloodied_battleking
		}
		remove_country_modifier = g32_bloodied_battleking
		add_ruler_modifier = {
			name = g32_veteran_battleking
		}
	}
	else_if = {
		limit = {
			has_ruler_modifier = g32_veteran_battleking
		}
		remove_country_modifier = g32_veteran_battleking
		add_ruler_modifier = {
			name = g32_legendary_battleking
		}
	}
	else_if = {
		limit = {
			has_ruler_modifier = g32_legendary_battleking
		}
		add_mil_power = 100
		add_prestige = 20
	}
}
malacnar_battleking_rankdown = {
	if = {
		limit = {
			has_ruler_modifier = g32_untested_battleking
		}
		remove_country_modifier = g32_untested_battleking
		add_ruler_modifier = {
			name = g32_cowardly_battleking
		}
	}
	else_if = {
		limit = {
			has_ruler_modifier = g32_cowardly_battleking
		}
		add_stability = -1
		random_province = {
			limit = { area = malacnar_area }
			
			spawn_rebels = {
				type = pretender_rebels
				size = 2
			}
		}
	}
	else_if = {
		limit = {
			has_ruler_modifier = g32_tested_battleking
		}
		remove_country_modifier = g32_tested_battleking
		add_ruler_modifier = {
			name = g32_untested_battleking
		}
	}
	else_if = {
		limit = {
			has_ruler_modifier = g32_bloodied_battleking
		}
		remove_country_modifier = g32_bloodied_battleking
		add_ruler_modifier = {
			name = g32_tested_battleking
		}
	}
	else_if = {
		limit = {
			has_ruler_modifier = g32_veteran_battleking
		}
		remove_country_modifier = g32_veteran_battleking
		add_ruler_modifier = {
			name = g32_bloodied_battleking
		}
	}
	else_if = {
		limit = {
			has_ruler_modifier = g32_legendary_battleking
		}
		remove_country_modifier = g32_legendary_battleking
		add_ruler_modifier = {
			name = g32_veteran_battleking
		}
	}
}

##########
##Ibevar##
##########
ibevar_reformation_menu = {
	random_owned_province = {
		limit = { has_province_modifier = ibevar_old_tradition NOT = { has_province_flag = ibevar_@ROOT } check_variable = { ibReform = 0 } NOT = { has_province_flag = ibevar_reformation_work_flag } }
		set_province_flag = ibevar_@ROOT
		save_event_target_as = ibevar1
	}
	random_owned_province = {
		limit = { has_province_modifier = ibevar_old_tradition NOT = { has_province_flag = ibevar_@ROOT } check_variable = { ibReform = 0 } NOT = { has_province_flag = ibevar_reformation_work_flag } }
		set_province_flag = ibevar_@ROOT
		save_event_target_as = ibevar2
	}
	random_owned_province = {
		limit = { has_province_modifier = ibevar_old_tradition NOT = { has_province_flag = ibevar_@ROOT } check_variable = { ibReform = 0 } NOT = { has_province_flag = ibevar_reformation_work_flag } }
		set_province_flag = ibevar_@ROOT
		save_event_target_as = ibevar3
	}
	random_owned_province = {
		limit = { has_province_modifier = ibevar_old_tradition NOT = { has_province_flag = ibevar_@ROOT } check_variable = { ibReform = 0 } NOT = { has_province_flag = ibevar_reformation_work_flag } }
		set_province_flag = ibevar_@ROOT
		save_event_target_as = ibevar4
	}
	random_owned_province = {
		limit = { has_province_modifier = ibevar_old_tradition NOT = { has_province_flag = ibevar_@ROOT } check_variable = { ibReform = 0 } NOT = { has_province_flag = ibevar_reformation_work_flag } }
		set_province_flag = ibevar_@ROOT
		save_event_target_as = ibevar5
	}
	random_owned_province = {
		limit = { has_province_modifier = ibevar_old_tradition NOT = { has_province_flag = ibevar_@ROOT } check_variable = { ibReform = 0 } NOT = { has_province_flag = ibevar_reformation_work_flag } }
		set_province_flag = ibevar_@ROOT
		save_event_target_as = ibevar6
	}
	random_owned_province = {
		limit = { has_province_modifier = ibevar_old_tradition NOT = { has_province_flag = ibevar_@ROOT } check_variable = { ibReform = 0 } NOT = { has_province_flag = ibevar_reformation_work_flag } }
		set_province_flag = ibevar_@ROOT
		save_event_target_as = ibevar7
	}
	random_owned_province = {
		limit = { has_province_modifier = ibevar_old_tradition NOT = { has_province_flag = ibevar_@ROOT } check_variable = { ibReform = 0 } NOT = { has_province_flag = ibevar_reformation_work_flag } }
		set_province_flag = ibevar_@ROOT
		save_event_target_as = ibevar8
	}
	random_owned_province = {
		limit = { has_province_modifier = ibevar_old_tradition NOT = { has_province_flag = ibevar_@ROOT } check_variable = { ibReform = 0 } NOT = { has_province_flag = ibevar_reformation_work_flag } }
		set_province_flag = ibevar_@ROOT
		save_event_target_as = ibevar9
	}
}
ibevar_province_flag = {
	if = {
		limit = { has_province_flag = ibe_2 }
		set_province_flag = ibe_3
	}
	else_if = {
		limit = { has_province_flag = ibe_1 }
		set_province_flag = ibe_2
	}
	else = {
		set_province_flag = ibe_1
	}
}
ibevar_reduce_ibReform = {
	trigger_switch = {
		on_trigger = has_province_flag
		
		ibe_3 = {
			custom_tooltip = ibe_3_tooltip
			hidden_effect = {
				random_list = {
					50 = { subtract_variable = { ibReform = 50 } }
					35 = { subtract_variable = { ibReform = 75 } }
					15 = { subtract_variable = { ibReform = 100 } }
				}
			}
		}
		
		ibe_2 = {
			custom_tooltip = ibe_2_tooltip
			hidden_effect = {
				random_list = {
					50 = { subtract_variable = { ibReform = 35 } }
					35 = { subtract_variable = { ibReform = 50 } }
					15 = { subtract_variable = { ibReform = 75 } }
				}
			}
		}
		
		ibe_1 = {
			custom_tooltip = ibe_1_tooltip
			hidden_effect = {
				random_list = {
					50 = { subtract_variable = { ibReform = 15 } }
					35 = { subtract_variable = { ibReform = 35 } }
					15 = { subtract_variable = { ibReform = 50 } }
				}
			}
		}
	}
	
	hidden_effect = {
		clr_province_flag = ibe_1
		clr_province_flag = ibe_2
		clr_province_flag = ibe_3
		clr_province_flag = ibe_option_1
		clr_province_flag = ibe_option_2
		clr_province_flag = ibe_option_3
	}
}


############
##Wineport##
############
upgrade_wineport_wines = {
	# 1 is at the bottom
	if = {
		limit = { has_country_modifier = wineport_wines_1 }
		remove_country_modifier = wineport_wines_1
		add_country_modifier = {
			name = wineport_wines_2
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = wineport_wines_2 }
		remove_country_modifier = wineport_wines_2
		add_country_modifier = {
			name = wineport_wines_3
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = wineport_wines_3	}
		remove_country_modifier = wineport_wines_3
		add_country_modifier = {
			name = wineport_wines_4
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = wineport_wines_4	}
		remove_country_modifier = wineport_wines_4
		add_country_modifier = {
			name = wineport_wines_5
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = wineport_wines_5	}
		remove_country_modifier = wineport_wines_5
		add_country_modifier = {
			name = wineport_wines_6
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = wineport_wines_6	}
		remove_country_modifier = wineport_wines_6
		add_country_modifier = {
			name = wineport_wines_7
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = wineport_wines_7	}
		remove_country_modifier = wineport_wines_7
		add_country_modifier = {
			name = wineport_wines_8
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = wineport_wines_8	}
		remove_country_modifier = wineport_wines_8
		add_country_modifier = {
			name = wineport_wines_9
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = wineport_wines_9	}
		remove_country_modifier = wineport_wines_9
		add_country_modifier = {
			name = wineport_wines_10
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = wineport_wines_10	}
		remove_country_modifier = wineport_wines_10
		add_country_modifier = {
			name = wineport_wines_11
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = wineport_wines_11	}
		remove_country_modifier = wineport_wines_11
		add_country_modifier = {
			name = wineport_wines_12
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = wineport_wines_12	}
		remove_country_modifier = wineport_wines_12
		add_country_modifier = {
			name = wineport_wines_13
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = wineport_wines_13	}
		remove_country_modifier = wineport_wines_13
		add_country_modifier = {
			name = wineport_wines_14
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = wineport_wines_14	}
		remove_country_modifier = wineport_wines_14
		add_country_modifier = {
			name = wineport_wines_15
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = wineport_wines_15	}
		remove_country_modifier = wineport_wines_15
		add_country_modifier = {
			name = wineport_wines_16
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = wineport_wines_16	}
		remove_country_modifier = wineport_wines_16
		add_country_modifier = {
			name = wineport_wines_17
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = wineport_wines_17	}
		remove_country_modifier = wineport_wines_17
		add_country_modifier = {
			name = wineport_wines_18
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = wineport_wines_18	}
		remove_country_modifier = wineport_wines_18
		add_country_modifier = {
			name = wineport_wines_19
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = wineport_wines_19	}
		remove_country_modifier = wineport_wines_19
		add_country_modifier = {
			name = wineport_wines_20
			duration = -1
		}
	}
	else = {
		add_country_modifier = {
			name = wineport_wines_1
			duration = -1
		}
	}
}

###########
##Toarnen##
###########
chess_tournament_get_participants = {
	set_country_flag = chess_tournament_participant
	set_country_flag = chess_tournament_original_participant
	set_country_flag = chess_tournament_got_invitation

	set_variable = {
		which = tmp_var
		value = 15
	}
	while = {
		limit = { 
			check_variable = {
				which = tmp_var
				value = 1
			}
		}

		change_variable = {
			which = tmp_var
			value = -1
		}

		random_known_country = {
			limit = {
				capital_scope = { continent = europe }
				NOT = {
					has_country_flag = chess_tournament_got_invitation
				}
				NOT = { has_country_modifier = monstrous_nation }
			}
			# ask for participation
			set_country_flag = chess_tournament_got_invitation
			country_event = {
				id = flavor_toarnen.29
				days = 1
			}
		}
	}
}
chess_tournament_create_pairs = {

	set_variable = {
		which = tmp_var
		value = 16
	}

	# random_country doesn't include ROOT?
	if = {
		limit = {
			has_country_flag = chess_tournament_participant
		}

		change_variable = {
			which = tmp_var
			value = -1
		}

		set_country_flag = chess_tournament_assigned
		set_country_flag = chess_tournament_pair_1
	}


	while = {
		limit = { 
			check_variable = {
				which = tmp_var
				value = 0
			}
		}

		change_variable = {
			which = tmp_var
			value = -1
		}

		random_country = {
			limit = {
				has_country_flag = chess_tournament_participant
				NOT = {
					has_country_flag = chess_tournament_assigned
				}
			}
			set_country_flag = chess_tournament_assigned
			if = {
				limit = {
					ROOT = {
						check_variable = {
							which = tmp_var
							value = 14
						}
					}
				}
				set_country_flag = chess_tournament_pair_1
			}
			else_if = {
				limit = {
					ROOT = {
						check_variable = {
							which = tmp_var
							value = 12
						}
					}
				}
				set_country_flag = chess_tournament_pair_2
			}
			else_if = {
				limit = {
					ROOT = {
						check_variable = {
							which = tmp_var
							value = 10
						}
					}
				}
				set_country_flag = chess_tournament_pair_3
			}
			else_if = {
				limit = {
					ROOT = {
						check_variable = {
							which = tmp_var
							value = 8
						}
					}
				}
				set_country_flag = chess_tournament_pair_4
			}
			else_if = {
				limit = {
					ROOT = {
						check_variable = {
							which = tmp_var
							value = 6
						}
					}
				}
				set_country_flag = chess_tournament_pair_5
			}
			else_if = {
				limit = {
					ROOT = {
						check_variable = {
							which = tmp_var
							value = 4
						}
					}
				}
				set_country_flag = chess_tournament_pair_6
			}
			else_if = {
				limit = {
					ROOT = {
						check_variable = {
							which = tmp_var
							value = 2
						}
					}
				}
				set_country_flag = chess_tournament_pair_7
			}
			else_if = {
				limit = {
					ROOT = {
						check_variable = {
							which = tmp_var
							value = 0
						}
					}
				}
				set_country_flag = chess_tournament_pair_8
			}
		}
	}
}
chess_tournament_get_your_pair = {
	if = {
		limit = {
			has_country_flag = chess_tournament_pair_1
		}
		random_country = {
			limit = {
				NOT = {
					tag = ROOT
				}
				has_country_flag = chess_tournament_pair_1
			}
			save_event_target_as = tournament_pair
		}
	}
	else_if = {
		limit = {
			has_country_flag = chess_tournament_pair_2
		}
		random_country = {
			limit = {
				NOT = {
					tag = ROOT
				}
				has_country_flag = chess_tournament_pair_2
			}
			save_event_target_as = tournament_pair
		}
	}
	else_if = {
		limit = {
			has_country_flag = chess_tournament_pair_3
		}
		random_country = {
			limit = {
				NOT = {
					tag = ROOT
				}
				has_country_flag = chess_tournament_pair_3
			}
			save_event_target_as = tournament_pair
		}
	}
	else_if = {
		limit = {
			has_country_flag = chess_tournament_pair_4
		}
		random_country = {
			limit = {
				NOT = {
					tag = ROOT
				}
				has_country_flag = chess_tournament_pair_4
			}
			save_event_target_as = tournament_pair
		}
	}
	else_if = {
		limit = {
			has_country_flag = chess_tournament_pair_5
		}
		random_country = {
			limit = {
				NOT = {
					tag = ROOT
				}
				has_country_flag = chess_tournament_pair_5
			}
			save_event_target_as = tournament_pair
		}
	}
	else_if = {
		limit = {
			has_country_flag = chess_tournament_pair_6
		}
		random_country = {
			limit = {
				NOT = {
					tag = ROOT
				}
				has_country_flag = chess_tournament_pair_6
			}
			save_event_target_as = tournament_pair
		}
	}
	else_if = {
		limit = {
			has_country_flag = chess_tournament_pair_7
		}
		random_country = {
			limit = {
				NOT = {
					tag = ROOT
				}
				has_country_flag = chess_tournament_pair_7
			}
			save_event_target_as = tournament_pair
		}
	}
	else_if = {
		limit = {
			has_country_flag = chess_tournament_pair_8
		}
		random_country = {
			limit = {
				NOT = {
					tag = ROOT
				}
				has_country_flag = chess_tournament_pair_8
			}
			save_event_target_as = tournament_pair
		}
	}
}
chess_tournament_get_winner = {
	if = {
		limit = {
			has_country_flag = chess_tournament_adm_move
		}
		export_to_variable = {
			which = chess_tournament_points 
			value = ADM
			who = ROOT
		}
	}
	else_if = {
		limit = {
			has_country_flag = chess_tournament_dip_move
		}
		export_to_variable = {
			which = chess_tournament_points 
			value = DIP
			who = ROOT
		}
	}
	else_if = {
		limit = {
			has_country_flag = chess_tournament_mil_move
		}
		export_to_variable = {
			which = chess_tournament_points 
			value = MIL
			who = ROOT
		}
	}
	event_target:tournament_pair = {
		if = {
			limit = {
				has_country_flag = chess_tournament_adm_move
			}
			ROOT = {
				export_to_variable = {
					which = chess_tournament_points_op 
					value = ADM
					who = event_target:tournament_pair
				}
			}
		}
		else_if = {
			limit = {
				has_country_flag = chess_tournament_dip_move
			}
			ROOT = {
				export_to_variable = {
					which = chess_tournament_points_op 
					value = DIP
					who = event_target:tournament_pair
				}
			}
		}
		else_if = {
			limit = {
				has_country_flag = chess_tournament_mil_move
			}
			ROOT = {
				export_to_variable = {
					which = chess_tournament_points_op 
					value = MIL
					who = event_target:tournament_pair
				}
			}
		}
	}

	subtract_variable = {
		which = chess_tournament_points
		which = chess_tournament_points_op
	}

	if = {
		limit = {
			has_country_flag = chess_tournament_adm_move
		}
		if = {
			limit = {
				event_target:tournament_pair = {
					has_country_flag = chess_tournament_dip_move
				}
			}
			change_variable = {
				which = chess_tournament_points
				value = -2
			}
		}
		if = {
			limit = {
				event_target:tournament_pair = {
					has_country_flag = chess_tournament_mil_move
				}
			}
			change_variable = {
				which = chess_tournament_points
				value = 2
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = chess_tournament_dip_move
		}
		if = {
			limit = {
				event_target:tournament_pair = {
					has_country_flag = chess_tournament_mil_move
				}
			}
			change_variable = {
				which = chess_tournament_points
				value = -2
			}
		}
		if = {
			limit = {
				event_target:tournament_pair = {
					has_country_flag = chess_tournament_adm_move
				}
			}
			change_variable = {
				which = chess_tournament_points
				value = 2
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = chess_tournament_mil_move
		}
		if = {
			limit = {
				event_target:tournament_pair = {
					has_country_flag = chess_tournament_adm_move
				}
			}
			change_variable = {
				which = chess_tournament_points
				value = -2
			}
		}
		if = {
			limit = {
				event_target:tournament_pair = {
					has_country_flag = chess_tournament_dip_move
				}
			}
			change_variable = {
				which = chess_tournament_points
				value = 2
			}
		}
	}
	random_list = {
		50 = {
			set_country_flag = draw_winner
			event_target:tournament_pair = {
				set_country_flag = draw_loser
			}
		}
		50 = {
			set_country_flag = draw_loser
			event_target:tournament_pair = {
				set_country_flag = draw_winner
			}
		}
	}
	if = {
		limit = {
			OR = {
				check_variable = {
					which = chess_tournament_points
					value = 1
				}
				AND = {
					check_variable = {
						which = chess_tournament_points
						value = 0
					}
					has_country_flag = draw_winner
				}
			}
		}
		set_country_flag = chess_tournament_round_winner
		event_target:tournament_pair = {
			set_country_flag = chess_tournament_round_loser
		}
	}
	else = {
		set_country_flag = chess_tournament_round_loser
		event_target:tournament_pair = {
			set_country_flag = chess_tournament_round_winner
		}
	}
}
chess_tournament_clear_flags = {
	clr_country_flag = chess_tournament_participant
	clr_country_flag = chess_tournament_round_loser
	clr_country_flag = chess_tournament_adm_move
	clr_country_flag = chess_tournament_dip_move
	clr_country_flag = chess_tournament_mil_move
	clr_country_flag = chess_tournament_assigned
	clr_country_flag = chess_tournament_pair_1
	clr_country_flag = chess_tournament_pair_2
	clr_country_flag = chess_tournament_pair_3
	clr_country_flag = chess_tournament_pair_4
	clr_country_flag = chess_tournament_pair_5
	clr_country_flag = chess_tournament_pair_6
	clr_country_flag = chess_tournament_pair_7
	clr_country_flag = chess_tournament_pair_8
}

#############
##Mithradum##
#############
venerator_province_triggers = {
	custom_tooltip = venerator_province_triggers_added
	if = {
		limit = {
			owner = { NOT = { any_owned_province = { has_province_modifier = venerator_purging_greens } } }
		}
		add_province_triggered_modifier = venerator_purging_greens
	}
	if = {
		limit = {
			owner = { NOT = { any_owned_province = { has_province_modifier = venerator_crusade } } }
		}
		add_province_triggered_modifier = venerator_crusade
	}
	if = {
		limit = {
			owner = { NOT = { any_owned_province = { has_province_modifier = venerator_blessed } } }
		}
		add_province_triggered_modifier = venerator_blessed
	}
	if = {
		limit = {
			owner = { NOT = { any_owned_province = { has_province_modifier = venerator_greenless } } }
		}
		add_province_triggered_modifier = venerator_greenless
	}
	if = {
		limit = {
			owner = {
				tag = I05
				NOT = { any_owned_province = { has_province_modifier = venerator_mithradhum_dishonorable } } 
			}
		}
		custom_tooltip = venerator_hold_oaths
		add_province_triggered_modifier = venerator_mithradhum_dishonorable
	}
}

#########
##Gawed##
#########
clear_strongholds = {
	remove_province_modifier = crown_stronghold
	remove_province_modifier = magnate_stronghold
}
add_crown_stronghold = {
	add_province_modifier = {
		name = crown_stronghold
		duration = -1
	}
	if = { 
		limit = { NOT = { fort_level = 1 } }
		add_fort_up_to_16th = yes
		add_province_modifier = {
			name = temporary_fortifications
			duration = -1
		}
	}
	spawn_rebels = {
		type = noble_rebels
		size = 2
		win = yes
	}
}
add_magnate_stronghold = {
	add_province_modifier = {
		name = magnate_stronghold
		duration = -1
	}
	if = { 
		limit = { NOT = { fort_level = 1 } }
		add_fort_up_to_16th = yes
		add_province_modifier = {
			name = temporary_fortifications
			duration = -1
		}
	}
	spawn_rebels = {
		type = magnate_rebels
		size = 2
		win = yes
	}
}
add_hostile_stronghold = {
	if = {
		limit = { owner = { has_country_flag = chose_crown } }
		add_magnate_stronghold = yes
	}
	else_if = {
		limit = { owner = { has_country_flag = chose_magnates } }
		add_crown_stronghold = yes
	}
}
setup_magnates_magnate_side = {
	custom_tooltip = magnate_uprising_magnates_setup_tt
	hidden_effect = {
		every_owned_province = {
			random_list = {
				85 = {}
				13 = { 
					# From Estate Influence
					modifier = {
						owner = {
							estate_influence = {
								estate = estate_burghers
								influence = 40
							}
						}
						factor = 0.95 #14.25
					}
					modifier = {
						owner = {
							estate_influence = {
								estate = estate_burghers
								influence = 50
							}
						}
						factor = 0.95 #13.53
					}
					modifier = {
						owner = {
							estate_influence = {
								estate = estate_burghers
								influence = 60
							}
						}
						factor = 0.95 #12.8
					}
					modifier = {
						owner = {
							estate_influence = {
								estate = estate_burghers
								influence = 70
							}
						}
						factor = 0.95 #12.2
					}
					modifier = {
						owner = {
							estate_influence = {
								estate = estate_burghers
								influence = 80
							}
						}
						factor = 0.95 #11.6
					}
					modifier = {
						owner = {
							estate_influence = {
								estate = estate_burghers
								influence = 90
							}
						}
						factor = 0.95 #11.0
					}
					modifier = {
						# AI is very bad at dealing with these in a timely manner
						owner = {
							ai = yes
						}
						factor = 0.5
					}
					# None in the capital thanks
					modifier = {
						is_capital = yes
						factor = 0
					}
					# None overseas
					modifier = {
						NOT = { is_in_capital_area = yes }
						factor = 0
					}
					add_crown_stronghold = yes
				}
			}
		}
		# Get at least 3
		random_owned_province = {
			limit = { NOT = { has_hostile_stronghold = yes } }
			add_crown_stronghold = yes
		}
		random_owned_province = {
			limit = { NOT = { has_hostile_stronghold = yes } }
			add_crown_stronghold = yes
		}
		random_owned_province = {
			limit = { NOT = { has_hostile_stronghold = yes } }
			add_crown_stronghold = yes
		}
	}
}
setup_magnates_crown_side = {
	custom_tooltip = magnate_uprising_crown_setup_tt
	hidden_effect = {
		every_owned_province = {
			random_list = {
				88 = {}
				11 = { 
					# From Estate Influence
					modifier = {
						owner = {
							estate_influence = {
								estate = estate_burghers
								influence = 40
							}
						}
						factor = 1.04 #12.48
					}
					modifier = {
						owner = {
							estate_influence = {
								estate = estate_burghers
								influence = 50
							}
						}
						factor = 1.04 #12.97
					}
					modifier = {
						owner = {
							estate_influence = {
								estate = estate_burghers
								influence = 60
							}
						}
						factor = 1.04 #13.49
					}
					modifier = {
						owner = {
							estate_influence = {
								estate = estate_burghers
								influence = 70
							}
						}
						factor = 1.04 #14.03
					}
					modifier = {
						owner = {
							estate_influence = {
								estate = estate_burghers
								influence = 80
							}
						}
						factor = 1.04 #14.59
					}
					modifier = {
						owner = {
							estate_influence = {
								estate = estate_burghers
								influence = 90
							}
						}
						factor = 1.04 #15.18
					}
					modifier = {
						# AI is very bad at dealing with these in a timely manner
						owner = {
							ai = yes
						}
						factor = 0.75
					}
					# None in the capital thanks
					modifier = {
						is_capital = yes
						factor = 0
					}
					# None overseas
					modifier = {
						NOT = { is_in_capital_area = yes }
						factor = 0
					}
					add_magnate_stronghold = yes
				}
			}
		}
		# Get at least 3
		random_owned_province = {
			limit = { NOT = { has_hostile_stronghold = yes } }
			add_magnate_stronghold = yes
		}
		random_owned_province = {
			limit = { NOT = { has_hostile_stronghold = yes } }
			add_magnate_stronghold = yes
		}
		random_owned_province = {
			limit = { NOT = { has_hostile_stronghold = yes } }
			add_magnate_stronghold = yes
		}
	}
}
spawn_magnate_uprising_rebels_small = {
	if = {
		limit = { owner = { has_country_flag = chose_crown } }
		spawn_rebels = {
			type = magnate_rebels
			size = 1
		}
	}
	else_if = {
		limit = { owner = { has_country_flag = chose_magnates } }
		spawn_rebels = {
			type = noble_rebels
			size = 1
		}
	}
}
spawn_magnate_uprising_rebels_medium = {
	if = {
		limit = { owner = { has_country_flag = chose_crown } }
		spawn_rebels = {
			type = magnate_rebels
			size = 2
		}
	}
	else_if = {
		limit = { owner = { has_country_flag = chose_magnates } }
		spawn_rebels = {
			type = noble_rebels
			size = 2
		}
	}
}
magnate_uprising_siege_won_effects = {
	clear_strongholds = yes
	if = {
		limit = { has_province_modifier = temporary_fortifications }
		remove_fortifications = yes
		remove_province_modifier = temporary_fortifications
	}
}


###############
##Roadwarrior##
###############
#Roadwarrior upgrades -- If Prices are changed here make sure to also update them in Scripted Effects
# Effects shared between all upgrades
roadwarrior_upgrade_effect = {
	# if = {
	# 	limit = { 
	# 		capital_scope = {
	# 			OR = {
	# 				has_terrain = dwarven_hold
	# 				has_terrain = dwarven_hold_surface
	# 			}
	# 		}
	# 	}
	add_country_modifier = {
		name = roadwarrior_upgrading
		duration = -1
	}
	country_event = { id = roadwarrior.5 days = 180 }
	# }
	# else = {
	# 	add_country_modifier = {
	# 		name = roadwarrior_upgrading
	# 		duration = 365
	# 	}
	# 	hidden_effect = { country_event = { id = roadwarrior.5 days = 365 } }
	# }
}
roadwarrior_upgrade_main = {
	set_country_flag = roadwarrior_upgrading_main
	if = {
		limit = {
			has_country_modifier = roadwarrior_main_1
		}
		add_treasury = -250
		add_adm_power = -100
		add_dip_power = -100
		add_mil_power = -100
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_main_2
		}
		add_treasury = -500
		add_adm_power = -200
		add_dip_power = -200
		add_mil_power = -200
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_main_3
		}
		add_treasury = -1000
		add_adm_power = -300
		add_dip_power = -300
		add_mil_power = -300
	}
	roadwarrior_upgrade_effect = yes
}
roadwarrior_upgrade_fighter = {
	set_country_flag = roadwarrior_upgrading_fighter
	if = {
		limit = {
			has_country_modifier = roadwarrior_fighter_1
		}
		add_treasury = -50
		add_mil_power = -50
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_fighter_2
		}
		add_treasury = -100
		add_mil_power = -100
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_fighter_3
		}
		add_treasury = -200
		add_mil_power = -200
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_fighter_4
		}
		add_treasury = -500
		add_mil_power = -300
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_fighter_5
		}
		add_treasury = -1000
		add_mil_power = -300
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_fighter_6
		}
		add_treasury = -1500
		add_mil_power = -300
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_fighter_7
		}
		add_treasury = -2000
		add_mil_power = -300
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_fighter_8
		}
		add_treasury = -3000
		add_mil_power = -300
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_fighter_9
		}
		add_treasury = -5000
		add_mil_power = -300
	}
	else = {
		add_treasury = -50
		add_mil_power = -10
	}
	roadwarrior_upgrade_effect = yes
}
roadwarrior_upgrade_looter = {
	set_country_flag = roadwarrior_upgrading_looter
	if = {
		limit = { has_country_modifier = roadwarrior_tax_1 }
		add_treasury = -100
		add_dip_power = -50
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_tax_2 }
		add_treasury = -200
		add_dip_power = -100
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_tax_3 }
		add_treasury = -500
		add_dip_power = -200
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_tax_4 }
		add_treasury = -1000
		add_dip_power = -300
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_tax_5 }
		add_treasury = -2000
		add_dip_power = -400
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_tax_6 }
		add_treasury = -5000
		add_dip_power = -500
	}
	else = {
		add_treasury = -50
		add_dip_power = -10
	}
	roadwarrior_upgrade_effect = yes
}
roadwarrior_upgrade_builder = {
	set_country_flag = roadwarrior_upgrading_builder
	if = {
		limit = { has_country_modifier = roadwarrior_builder_1 }
		add_treasury = -100
		add_adm_power = -50
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_builder_2 }
		add_treasury = -200
		add_adm_power = -100
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_builder_3 }
		add_treasury = -500
		add_adm_power = -200
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_builder_4 }
		add_treasury = -1000
		add_adm_power = -300
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_builder_5 }
		add_treasury = -2000
		add_adm_power = -400
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_builder_6 }
		add_treasury = -5000
		add_adm_power = -500
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_builder_7 }
		add_treasury = -10000
		add_adm_power = -500
	}
	else = {
		add_treasury = -50
		add_adm_power = -10
	}
	roadwarrior_upgrade_effect = yes
}
roadwarrior_upgrade_living = {
	set_country_flag = roadwarrior_upgrading_living
	if = {
		limit = {
			has_country_modifier = roadwarrior_living_1
		}
		add_treasury = -50
		add_mil_power = -50
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_living_2
		}
		add_treasury = -100
		add_mil_power = -100
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_living_3
		}
		add_treasury = -200
		add_mil_power = -200
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_living_4
		}
		add_treasury = -500
		add_mil_power = -300
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_living_5
		}
		add_treasury = -1000
		add_mil_power = -300
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_living_6
		}
		add_treasury = -1500
		add_mil_power = -300
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_living_7
		}
		add_treasury = -2000
		add_mil_power = -300
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_living_8
		}
		add_treasury = -5000
		add_mil_power = -300
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_living_9
		}
		add_treasury = -10000
		add_mil_power = -300
	}
	else = {
		add_treasury = -50
		add_mil_power = -10
	}
	roadwarrior_upgrade_effect = yes
}
roadwarrior_upgrade_training = {
	set_country_flag = roadwarrior_upgrading_training
	if = {
		limit = {
			has_country_modifier = roadwarrior_training_1
		}
		add_treasury = -500
		add_adm_power = -200
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_training_2
		}
		add_treasury = -1000
		add_adm_power = -300
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_training_3
		}
		add_treasury = -2000
		add_adm_power = -400
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_training_4
		}
		add_treasury = -5000
		add_adm_power = -500
	}
	else = {
		add_treasury = -100
		add_adm_power = -100
	}
	roadwarrior_upgrade_effect = yes
}
roadwarrior_upgrade_portable_arena = {
	set_country_flag = roadwarrior_upgrading_portable_arena
	if = {
		limit = {
			has_country_modifier = roadwarrior_portable_arena_1
		}
		add_treasury = -500
		add_dip_power = -200
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_portable_arena_2
		}
		add_treasury = -1000
		add_dip_power = -300
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_portable_arena_3
		}
		add_treasury = -2000
		add_dip_power = -400
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_portable_arena_4
		}
		add_treasury = -5000
		add_dip_power = -500
	}
	else = {
		add_treasury = -100
		add_dip_power = -100
	}
	roadwarrior_upgrade_effect = yes
}
roadwarrior_upgrade_smashers = {
	set_country_flag = roadwarrior_upgrading_smashers
	if = {
		limit = { has_country_modifier = roadwarrior_breaker_1 }
		add_treasury = -100
		add_adm_power = -50
		add_mil_power = -50
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_breaker_2 }
		add_treasury = -200
		add_adm_power = -100
		add_mil_power = -100
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_breaker_3 }
		add_treasury = -500
		add_adm_power = -200
		add_mil_power = -200
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_breaker_4 }
		add_treasury = -1000
		add_adm_power = -300
		add_mil_power = -300
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_breaker_5 }
		add_treasury = -2000
		add_adm_power = -400
		add_mil_power = -400
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_breaker_6 }
		add_treasury = -5000
		add_adm_power = -500
		add_mil_power = -500
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_breaker_7 }
		add_treasury = -10000
		add_adm_power = -500
		add_mil_power = -500
	}
	else = {
		add_treasury = -50
		add_adm_power = -10
		add_mil_power = -10
	}
	roadwarrior_upgrade_effect = yes
}
roadwarrior_upgrade_thinkers = {
	set_country_flag = roadwarrior_upgrading_thinkers
	if = {
		limit = {
			has_country_modifier = roadwarrior_thinking_1
		}
		add_treasury = -100
		add_dip_power = -200
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_thinking_2
		}
		add_treasury = -500
		add_dip_power = -300
		hidden_effect = { remove_country_modifier = roadwarrior_thinking_1 }
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_thinking_3
		}
		add_treasury = -1000
		add_dip_power = -400
		hidden_effect = { remove_country_modifier = roadwarrior_thinking_2 }
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_thinking_4
		}
		add_treasury = -2000
		add_dip_power = -500
		hidden_effect = { remove_country_modifier = roadwarrior_thinking_3 }
	}
	else = {
		add_treasury = -50
		add_dip_power = -100
	}
	roadwarrior_upgrade_effect = yes
}
roadwarrior_upgrade_main_done = {
	clr_country_flag = roadwarrior_upgrading_main
	if = {
		limit = {
			has_country_modifier = roadwarrior_main_1
		}
		add_country_modifier = {
			name = roadwarrior_main_2
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_main_1 }
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_main_2
		}
		add_country_modifier = {
			name = roadwarrior_main_3
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_main_2 }
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_main_3
		}
		add_country_modifier = {
			name = roadwarrior_main_4
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_main_3 }
	}
	remove_country_modifier = roadwarrior_upgrading
}
roadwarrior_upgrade_fighter_done = {
	clr_country_flag = roadwarrior_upgrading_fighter
	if = {
		limit = {
			has_country_modifier = roadwarrior_fighter_1
		}
		add_country_modifier = {
			name = roadwarrior_fighter_2
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_fighter_1 }
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_fighter_2
		}
		add_country_modifier = {
			name = roadwarrior_fighter_3
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_fighter_2 }
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_fighter_3
		}
		add_country_modifier = {
			name = roadwarrior_fighter_4
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_fighter_3 }
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_fighter_4
		}
		add_country_modifier = {
			name = roadwarrior_fighter_5
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_fighter_4 }
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_fighter_5
		}
		add_country_modifier = {
			name = roadwarrior_fighter_6
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_fighter_5 }
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_fighter_6
		}
		add_country_modifier = {
			name = roadwarrior_fighter_7
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_fighter_6 }
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_fighter_7
		}
		add_country_modifier = {
			name = roadwarrior_fighter_8
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_fighter_7 }
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_fighter_8
		}
		add_country_modifier = {
			name = roadwarrior_fighter_9
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_fighter_8 }
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_fighter_9
		}
		add_country_modifier = {
			name = roadwarrior_fighter_10
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_fighter_9 }
	}
	else = {
		add_country_modifier = {
			name = roadwarrior_fighter_1
			duration = -1
		}
	}
	remove_country_modifier = roadwarrior_upgrading
}
roadwarrior_upgrade_looter_done = {
	clr_country_flag = roadwarrior_upgrading_looter
	if = {
		limit = { has_country_modifier = roadwarrior_tax_1 }
		add_country_modifier = {
			name = roadwarrior_tax_2
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_tax_1 }
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_tax_2 }
		add_country_modifier = {
			name = roadwarrior_tax_3
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_tax_2 }
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_tax_3 }
		add_country_modifier = {
			name = roadwarrior_tax_4
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_tax_3 }
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_tax_4 }
		add_country_modifier = {
			name = roadwarrior_tax_5
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_tax_4 }
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_tax_5 }
		add_country_modifier = {
			name = roadwarrior_tax_6
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_tax_5 }
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_tax_6 }
		add_country_modifier = {
			name = roadwarrior_tax_7
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_tax_6 }
	}
	else = {
		add_country_modifier = {
			name = roadwarrior_tax_1
			duration = -1
		}
	}
	remove_country_modifier = roadwarrior_upgrading
}
roadwarrior_upgrade_builder_done = {
	clr_country_flag = roadwarrior_upgrading_builder
	if = {
		limit = { has_country_modifier = roadwarrior_builder_1 }
		add_country_modifier = {
			name = roadwarrior_builder_2
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_builder_1 }
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_builder_2 }
		add_country_modifier = {
			name = roadwarrior_builder_3
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_builder_2 }
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_builder_3 }
		add_country_modifier = {
			name = roadwarrior_builder_4
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_builder_3 }
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_builder_4 }
		add_country_modifier = {
			name = roadwarrior_builder_5
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_builder_4 }
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_builder_5 }
		add_country_modifier = {
			name = roadwarrior_builder_6
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_builder_5 }
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_builder_6 }
		add_country_modifier = {
			name = roadwarrior_builder_7
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_builder_6 }
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_builder_7 }
		add_country_modifier = {
			name = roadwarrior_builder_8
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_builder_7 }
	}
	else = {
		add_country_modifier = {
			name = roadwarrior_builder_1
			duration = -1
		}
	}
	remove_country_modifier = roadwarrior_upgrading
}
roadwarrior_upgrade_living_done = {
	clr_country_flag = roadwarrior_upgrading_living
	if = {
		limit = {
			has_country_modifier = roadwarrior_living_1
		}
		add_country_modifier = {
			name = roadwarrior_living_2
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_living_1 }
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_living_2
		}
		add_country_modifier = {
			name = roadwarrior_living_3
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_living_2 }
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_living_3
		}
		add_country_modifier = {
			name = roadwarrior_living_4
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_living_3 }
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_living_4
		}
		add_country_modifier = {
			name = roadwarrior_living_5
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_living_4 }
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_living_5
		}
		add_country_modifier = {
			name = roadwarrior_living_6
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_living_5 }
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_living_6
		}
		add_country_modifier = {
			name = roadwarrior_living_7
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_living_6 }
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_living_7
		}
		add_country_modifier = {
			name = roadwarrior_living_8
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_living_7 }
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_living_8
		}
		add_country_modifier = {
			name = roadwarrior_living_9
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_living_8 }
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_living_9
		}
		add_country_modifier = {
			name = roadwarrior_living_10
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_living_9 }
	}
	else = {
		add_country_modifier = {
			name = roadwarrior_living_1
			duration = -1
		}
	}
	remove_country_modifier = roadwarrior_upgrading
}
roadwarrior_upgrade_training_done = {
	clr_country_flag = roadwarrior_upgrading_training
	if = {
		limit = {
			has_country_modifier = roadwarrior_training_1
		}
		add_country_modifier = {
			name = roadwarrior_training_2
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_training_1 }
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_training_2
		}
		add_country_modifier = {
			name = roadwarrior_training_3
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_training_2 }
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_training_3
		}
		add_country_modifier = {
			name = roadwarrior_training_4
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_training_3 }
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_training_4
		}
		add_country_modifier = {
			name = roadwarrior_training_5
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_training_4 }
	}
	else = {
		add_country_modifier = {
			name = roadwarrior_training_1
			duration = -1
		}
	}
	remove_country_modifier = roadwarrior_upgrading
}
roadwarrior_upgrade_portable_arena_done = {
	clr_country_flag = roadwarrior_upgrading_portable_arena
	if = {
		limit = {
			has_country_modifier = roadwarrior_portable_arena_1
		}
		add_country_modifier = {
			name = roadwarrior_portable_arena_2
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_portable_arena_1 }
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_portable_arena_2
		}
		add_country_modifier = {
			name = roadwarrior_portable_arena_3
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_portable_arena_2 }
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_portable_arena_3
		}
		add_country_modifier = {
			name = roadwarrior_portable_arena_4
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_portable_arena_3 }
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_portable_arena_4
		}
		add_country_modifier = {
			name = roadwarrior_portable_arena_5
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_portable_arena_4 }
	}
	else = {
		add_country_modifier = {
			name = roadwarrior_portable_arena_1
			duration = -1
		}
	}
	remove_country_modifier = roadwarrior_upgrading
}
roadwarrior_upgrade_smashers_done = {
	clr_country_flag = roadwarrior_upgrading_smashers
	if = {
		limit = { has_country_modifier = roadwarrior_breaker_1 }
		add_country_modifier = {
			name = roadwarrior_breaker_2
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_breaker_1 }
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_breaker_2 }
		add_country_modifier = {
			name = roadwarrior_breaker_3
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_breaker_2 }
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_breaker_3 }
		add_country_modifier = {
			name = roadwarrior_breaker_4
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_breaker_3 }
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_breaker_4 }
		add_country_modifier = {
			name = roadwarrior_breaker_5
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_breaker_4 }
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_breaker_5 }
		add_country_modifier = {
			name = roadwarrior_breaker_6
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_breaker_5 }
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_breaker_6 }
		add_country_modifier = {
			name = roadwarrior_breaker_7
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_breaker_6 }
	}
	else_if = {
		limit = { has_country_modifier = roadwarrior_breaker_7 }
		add_country_modifier = {
			name = roadwarrior_breaker_8
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_breaker_7 }
	}
	else = {
		add_country_modifier = {
			name = roadwarrior_breaker_1
			duration = -1
		}
	}
	remove_country_modifier = roadwarrior_upgrading
}
roadwarrior_upgrade_thinkers_done = {
	clr_country_flag = roadwarrior_upgrading_thinkers
	if = {
		limit = {
			has_country_modifier = roadwarrior_thinking_1
		}
		add_country_modifier = {
			name = roadwarrior_thinking_2
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_thinking_1 }
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_thinking_2
		}
		add_country_modifier = {
			name = roadwarrior_thinking_3
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_thinking_2 }
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_thinking_3
		}
		add_country_modifier = {
			name = roadwarrior_thinking_4
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_thinking_3 }
	}
	else_if = {
		limit = {
			has_country_modifier = roadwarrior_thinking_4
		}
		add_country_modifier = {
			name = roadwarrior_thinking_5
			duration = -1
		}
		hidden_effect = { remove_country_modifier = roadwarrior_thinking_4 }
	}
	else = {
		add_country_modifier = {
			name = roadwarrior_thinking_1
			duration = -1
		}
	}
	remove_country_modifier = roadwarrior_upgrading
}
roadwarrior_finish_effects = {
	if = {
		limit = { has_country_flag = roadwarrior_upgrading_main }
		roadwarrior_upgrade_main_done = yes
	}
	else_if = {
		limit = { has_country_flag = roadwarrior_upgrading_fighter }
		roadwarrior_upgrade_fighter_done = yes
	}
	else_if = {
		limit = { has_country_flag = roadwarrior_upgrading_looter }
		roadwarrior_upgrade_looter_done = yes
	}
	else_if = {
		limit = { has_country_flag = roadwarrior_upgrading_builder }
		roadwarrior_upgrade_builder_done = yes
	}
	else_if = {
		limit = { has_country_flag = roadwarrior_upgrading_living }
		roadwarrior_upgrade_living_done = yes
	}
	else_if = {
		limit = { has_country_flag = roadwarrior_upgrading_training }
		roadwarrior_upgrade_training_done = yes
	}
	else_if = {
		limit = { has_country_flag = roadwarrior_upgrading_portable_arena }
		roadwarrior_upgrade_portable_arena_done = yes
	}
	else_if = {
		limit = { has_country_flag = roadwarrior_upgrading_smashers }
		roadwarrior_upgrade_smashers_done = yes
	}
	else_if = {
		limit = { has_country_flag = roadwarrior_upgrading_thinkers }
		roadwarrior_upgrade_thinkers_done = yes
	}
	else = {
		custom_tooltip = you_found_a_bug_tt
		tooltip = { add_treasury = 1 }
	}
}

# Run on province scope
roadwarrior_conquest_effects = {
	remove_loot = {
		who = H91
		amount = 500
	}
	if = {
		limit = { NOT = { has_construction = siberian } }
		if = {
			limit = { H91 = { has_country_modifier = roadwarrior_main_1 } }
			while = {
				limit = { base_tax = 2 }
				H91 = { add_adm_power = 1 }
				add_base_tax = -1
			}
			while = {
				limit = { base_production = 2 }
				H91 = { add_dip_power = 1 }
				add_base_production = -1
			}
			while = {
				limit = { base_manpower = 2 }
				H91 = { add_mil_power = 1 }
				add_base_manpower = -1
			}
			# Cause it might be a 1/1/1
			H91 = {
				add_adm_power = 1
				add_dip_power = 1
				add_mil_power = 1
			}
			add_permanent_province_modifier = {
				name = roadwarrior_decolonized
				duration = 3650
			}
		}
		else_if = {
			limit = { H91 = { has_country_modifier = roadwarrior_main_2 } }
			while = {
				limit = { base_tax = 2 }
				H91 = { add_adm_power = 2 }
				add_base_tax = -1
			}
			while = {
				limit = { base_production = 2 }
				H91 = { add_dip_power = 2 }
				add_base_production = -1
			}
			while = {
				limit = { base_manpower = 2 }
				H91 = { add_mil_power = 2 }
				add_base_manpower = -1
			}
			# Cause it might be a 1/1/1
			H91 = {
				add_adm_power = 2
				add_dip_power = 2
				add_mil_power = 2
			}
			add_permanent_province_modifier = {
				name = roadwarrior_decolonized
				duration = 7300
			}
		}
		else_if = {
			limit = { H91 = { has_country_modifier = roadwarrior_main_3 } }
			while = {
				limit = { base_tax = 2 }
				H91 = { add_adm_power = 5 }
				add_base_tax = -1
			}
			while = {
				limit = { base_production = 2 }
				H91 = { add_dip_power = 5 }
				add_base_production = -1
			}
			while = {
				limit = { base_manpower = 2 }
				H91 = { add_mil_power = 5 }
				add_base_manpower = -1
			}
			# Cause it might be a 1/1/1
			H91 = {
				add_adm_power = 5
				add_dip_power = 5
				add_mil_power = 5
			}
			add_permanent_province_modifier = {
				name = roadwarrior_decolonized
				duration = 18250
			}
		}
		else_if = {
			limit = { H91 = { has_country_modifier = roadwarrior_main_4 } }
			while = {
				limit = { base_tax = 2 }
				H91 = { add_adm_power = 10 }
				add_base_tax = -1
			}
			while = {
				limit = { base_production = 2 }
				H91 = { add_dip_power = 10 }
				add_base_production = -1
			}
			while = {
				limit = { base_manpower = 2 }
				H91 = { add_mil_power = 10 }
				add_base_manpower = -1
			}
			# Cause it might be a 1/1/1
			H91 = {
				add_adm_power = 10
				add_dip_power = 10
				add_mil_power = 10
			}
			add_permanent_province_modifier = {
				name = roadwarrior_decolonized
				duration = 36500
			}
		}
	}
	remove_core = H91
	add_devastation = 50
}
roadwarrior_migration_effects = {
	remove_province_modifier = roadwarrior_tax_1_province
	remove_province_modifier = roadwarrior_tax_2_province
	remove_province_modifier = roadwarrior_tax_3_province
	remove_province_modifier = roadwarrior_tax_4_province
	remove_province_modifier = roadwarrior_tax_5_province
	remove_province_modifier = roadwarrior_tax_6_province
	remove_province_modifier = roadwarrior_tax_7_province
	# Move Tax
	if = {
		limit = { owner = { has_country_modifier = roadwarrior_tax_1 } }
		add_province_modifier = {
			name = roadwarrior_tax_1_province
			duration = -1
			hidden = yes
		}

	}
	else_if = {
		limit = { owner = { has_country_modifier = roadwarrior_tax_2 } }
		add_province_modifier = {
			name = roadwarrior_tax_2_province
			duration = -1
			hidden = yes
		}
	}
	else_if = {
		limit = { owner = { has_country_modifier = roadwarrior_tax_3 } }
		add_province_modifier = {
			name = roadwarrior_tax_3_province
			duration = -1
			hidden = yes
		}
	}
	else_if = {
		limit = { owner = { has_country_modifier = roadwarrior_tax_4 } }
		add_province_modifier = {
			name = roadwarrior_tax_4_province
			duration = -1
			hidden = yes
		}
	}
	else_if = {
		limit = { owner = { has_country_modifier = roadwarrior_tax_5 } }
		add_province_modifier = {
			name = roadwarrior_tax_5_province
			duration = -1
			hidden = yes
		}
	}
	else_if = {
		limit = { owner = { has_country_modifier = roadwarrior_tax_6 } }
		add_province_modifier = {
			name = roadwarrior_tax_6_province
			duration = -1
			hidden = yes
		}
	}
	else_if = {
		limit = { owner = { has_country_modifier = roadwarrior_tax_7 } }
		add_province_modifier = {
			name = roadwarrior_tax_7_province
			duration = -1
			hidden = yes
		}
	}
	remove_province_modifier = roadwarrior_builder_1_province
	remove_province_modifier = roadwarrior_builder_2_province
	remove_province_modifier = roadwarrior_builder_3_province
	remove_province_modifier = roadwarrior_builder_4_province
	remove_province_modifier = roadwarrior_builder_5_province
	remove_province_modifier = roadwarrior_builder_6_province
	remove_province_modifier = roadwarrior_builder_7_province
	remove_province_modifier = roadwarrior_builder_8_province
	# Move Builder
	if = {
		limit = { owner = { has_country_modifier = roadwarrior_builder_1 } }
		add_province_modifier = {
			name = roadwarrior_builder_1_province
			duration = -1
			hidden = yes
		}
	}
	else_if = {
		limit = { owner = { has_country_modifier = roadwarrior_builder_2 } }
		add_province_modifier = {
			name = roadwarrior_builder_2_province
			duration = -1
			hidden = yes
		}
	}
	else_if = {
		limit = { owner = { has_country_modifier = roadwarrior_builder_3 } }
		add_province_modifier = {
			name = roadwarrior_builder_3_province
			duration = -1
			hidden = yes
		}
	}
	else_if = {
		limit = { owner = { has_country_modifier = roadwarrior_builder_4 } }
		add_province_modifier = {
			name = roadwarrior_builder_4_province
			duration = -1
			hidden = yes
		}
	}
	else_if = {
		limit = { owner = { has_country_modifier = roadwarrior_builder_5 } }
		add_province_modifier = {
			name = roadwarrior_builder_5_province
			duration = -1
			hidden = yes
		}
	}
	else_if = {
		limit = { owner = { has_country_modifier = roadwarrior_builder_6 } }
		add_province_modifier = {
			name = roadwarrior_builder_6_province
			duration = -1
			hidden = yes
		}
	}
	else_if = {
		limit = { owner = { has_country_modifier = roadwarrior_builder_7 } }
		add_province_modifier = {
			name = roadwarrior_builder_7_province
			duration = -1
			hidden = yes
		}
	}
	else_if = {
		limit = { owner = { has_country_modifier = roadwarrior_builder_8 } }
		add_province_modifier = {
			name = roadwarrior_builder_8_province
			duration = -1
			hidden = yes
		}
	}
	remove_province_modifier = roadwarrior_thinking_1_province
	remove_province_modifier = roadwarrior_thinking_2_province
	remove_province_modifier = roadwarrior_thinking_3_province
	remove_province_modifier = roadwarrior_thinking_4_province
	remove_province_modifier = roadwarrior_thinking_5_province
	# Move Thinker
	if = {
		limit = { owner = { has_country_modifier = roadwarrior_thinking_1 } }
		add_province_modifier = {
			name = roadwarrior_thinking_1_province
			duration = -1
			hidden = yes
		}
	}
	else_if = {
		limit = { owner = { has_country_modifier = roadwarrior_thinking_2 } }
		add_province_modifier = {
			name = roadwarrior_thinking_2_province
			duration = -1
			hidden = yes
		}
	}
	else_if = {
		limit = { owner = { has_country_modifier = roadwarrior_thinking_3 } }
		add_province_modifier = {
			name = roadwarrior_thinking_3_province
			duration = -1
			hidden = yes
		}
	}
	else_if = {
		limit = { owner = { has_country_modifier = roadwarrior_thinking_4 } }
		add_province_modifier = {
			name = roadwarrior_thinking_4_province
			duration = -1
			hidden = yes
		}
	}
	else_if = {
		limit = { owner = { has_country_modifier = roadwarrior_thinking_5 } }
		add_province_modifier = {
			name = roadwarrior_thinking_5_province
			duration = -1
			hidden = yes
		}
	}
	remove_province_modifier = roadwarrior_living_1_province
	remove_province_modifier = roadwarrior_living_2_province
	remove_province_modifier = roadwarrior_living_3_province
	remove_province_modifier = roadwarrior_living_4_province
	remove_province_modifier = roadwarrior_living_5_province
	remove_province_modifier = roadwarrior_living_6_province
	remove_province_modifier = roadwarrior_living_7_province
	remove_province_modifier = roadwarrior_living_8_province
	remove_province_modifier = roadwarrior_living_9_province
	remove_province_modifier = roadwarrior_living_10_province
	# Move Living
	if = {
		limit = { owner = { has_country_modifier = roadwarrior_living_1 } }
		add_province_modifier = {
			name = roadwarrior_living_1_province
			duration = -1
			hidden = yes
		}
	}
	else_if = {
		limit = { owner = { has_country_modifier = roadwarrior_living_2 } }
		add_province_modifier = {
			name = roadwarrior_living_2_province
			duration = -1
			hidden = yes
		}
	}
	else_if = {
		limit = { owner = { has_country_modifier = roadwarrior_living_3 } }
		add_province_modifier = {
			name = roadwarrior_living_3_province
			duration = -1
			hidden = yes
		}
	}
	else_if = {
		limit = { owner = { has_country_modifier = roadwarrior_living_4 } }
		add_province_modifier = {
			name = roadwarrior_living_4_province
			duration = -1
			hidden = yes
		}
	}
	else_if = {
		limit = { owner = { has_country_modifier = roadwarrior_living_5 } }
		add_province_modifier = {
			name = roadwarrior_living_5_province
			duration = -1
			hidden = yes
		}
	}
	else_if = {
		limit = { owner = { has_country_modifier = roadwarrior_living_6 } }
		add_province_modifier = {
			name = roadwarrior_living_6_province
			duration = -1
			hidden = yes
		}
	}
	else_if = {
		limit = { owner = { has_country_modifier = roadwarrior_living_7 } }
		add_province_modifier = {
			name = roadwarrior_living_7_province
			duration = -1
			hidden = yes
		}
	}
	else_if = {
		limit = { owner = { has_country_modifier = roadwarrior_living_8 } }
		add_province_modifier = {
			name = roadwarrior_living_8_province
			duration = -1
			hidden = yes
		}
	}
	else_if = {
		limit = { owner = { has_country_modifier = roadwarrior_living_9 } }
		add_province_modifier = {
			name = roadwarrior_living_9_province
			duration = -1
			hidden = yes
		}
	}
	else_if = {
		limit = { owner = { has_country_modifier = roadwarrior_living_10 } }
		add_province_modifier = {
			name = roadwarrior_living_10_province
			duration = -1
			hidden = yes
		}
	}
}
roadwarrior_overdrive_effect = {
	hidden_effect = {
		add_core = ROOT
		change_culture = ROOT
		change_religion = ROOT
		cede_province = ROOT
		remove_building = fort_15th
		remove_building = fort_16th
		remove_building = fort_17th
		remove_building = fort_18th
		if = {
			limit = {
				ROOT = {
					capital_scope = {
						has_building = fort_15th
					}
				}
			}
			add_building = fort_15th
		}
		else_if = {
			limit = {
				ROOT = {
					capital_scope = {
						has_building = fort_16th
					}
				}
			}
			add_building = fort_16th
		}
		else_if = {
			limit = {
				ROOT = {
					capital_scope = {
						has_building = fort_17th
					}
				}
			}
			add_building = fort_17th
		}
		else_if = {
			limit = {
				ROOT = {
					capital_scope = {
						has_building = fort_18th
					}
				}
			}
			add_building = fort_18th
		}
	}
	move_capital_effect = yes
	ROOT = { 
		add_treasury = -100
	}
}
clear_roadwarrior_modifiers = {
	clr_country_flag = roadwarrior_upgrading_fighter
	remove_country_modifier = roadwarrior_main_1
	remove_country_modifier = roadwarrior_main_2
	remove_country_modifier = roadwarrior_main_3
	clr_country_flag = roadwarrior_upgrading_fighter
	remove_country_modifier = roadwarrior_fighter_1
	remove_country_modifier = roadwarrior_fighter_2
	remove_country_modifier = roadwarrior_fighter_3
	remove_country_modifier = roadwarrior_fighter_4
	remove_country_modifier = roadwarrior_fighter_5
	remove_country_modifier = roadwarrior_fighter_6
	remove_country_modifier = roadwarrior_fighter_7
	remove_country_modifier = roadwarrior_fighter_8
	remove_country_modifier = roadwarrior_fighter_9
	clr_country_flag = roadwarrior_upgrading_looter
	remove_country_modifier = roadwarrior_tax_1
	remove_country_modifier = roadwarrior_tax_2
	remove_country_modifier = roadwarrior_tax_3
	remove_country_modifier = roadwarrior_tax_4
	remove_country_modifier = roadwarrior_tax_5
	remove_country_modifier = roadwarrior_tax_6
	clr_country_flag = roadwarrior_upgrading_builder
	remove_country_modifier = roadwarrior_builder_1
	remove_country_modifier = roadwarrior_builder_2
	remove_country_modifier = roadwarrior_builder_3
	remove_country_modifier = roadwarrior_builder_4
	remove_country_modifier = roadwarrior_builder_5
	remove_country_modifier = roadwarrior_builder_6
	remove_country_modifier = roadwarrior_builder_7
	clr_country_flag = roadwarrior_upgrading_living
	remove_country_modifier = roadwarrior_living_1
	remove_country_modifier = roadwarrior_living_2
	remove_country_modifier = roadwarrior_living_3
	remove_country_modifier = roadwarrior_living_4
	remove_country_modifier = roadwarrior_living_5
	remove_country_modifier = roadwarrior_living_6
	remove_country_modifier = roadwarrior_living_7
	remove_country_modifier = roadwarrior_living_8
	remove_country_modifier = roadwarrior_living_9
	clr_country_flag = roadwarrior_upgrading_training
	remove_country_modifier = roadwarrior_training_1
	remove_country_modifier = roadwarrior_training_2
	remove_country_modifier = roadwarrior_training_3
	remove_country_modifier = roadwarrior_training_4
	clr_country_flag = roadwarrior_upgrading_portable_arena
	remove_country_modifier = roadwarrior_portable_arena_1
	remove_country_modifier = roadwarrior_portable_arena_2
	remove_country_modifier = roadwarrior_portable_arena_3
	remove_country_modifier = roadwarrior_portable_arena_4
	clr_country_flag = roadwarrior_upgrading_smashers
	remove_country_modifier = roadwarrior_breaker_1
	remove_country_modifier = roadwarrior_breaker_2
	remove_country_modifier = roadwarrior_breaker_3
	remove_country_modifier = roadwarrior_breaker_4
	remove_country_modifier = roadwarrior_breaker_5
	remove_country_modifier = roadwarrior_breaker_6
	remove_country_modifier = roadwarrior_breaker_7
	clr_country_flag = roadwarrior_upgrading_thinkers
	remove_country_modifier = roadwarrior_thinking_1
	remove_country_modifier = roadwarrior_thinking_2
	remove_country_modifier = roadwarrior_thinking_3
	remove_country_modifier = roadwarrior_thinking_4 
	remove_country_modifier = roadwarrior_upgrading
	every_owned_province = {
		remove_province_modifier = roadwarrior_tax_1_province
		remove_province_modifier = roadwarrior_tax_2_province
		remove_province_modifier = roadwarrior_tax_3_province
		remove_province_modifier = roadwarrior_tax_4_province
		remove_province_modifier = roadwarrior_tax_5_province
		remove_province_modifier = roadwarrior_tax_6_province
		remove_province_modifier = roadwarrior_builder_1_province
		remove_province_modifier = roadwarrior_builder_2_province
		remove_province_modifier = roadwarrior_builder_3_province
		remove_province_modifier = roadwarrior_builder_4_province
		remove_province_modifier = roadwarrior_builder_5_province
		remove_province_modifier = roadwarrior_builder_6_province
		remove_province_modifier = roadwarrior_builder_7_province
		remove_province_modifier = roadwarrior_thinking_1_province
		remove_province_modifier = roadwarrior_thinking_2_province
		remove_province_modifier = roadwarrior_thinking_3_province
		remove_province_modifier = roadwarrior_thinking_4_province
		remove_province_modifier = roadwarrior_thinking_5_province
	}
}
roadwarrior_update_capital = {
	remove_province_modifier = roadwarrior_tax_1_province
	remove_province_modifier = roadwarrior_tax_2_province
	remove_province_modifier = roadwarrior_tax_3_province
	remove_province_modifier = roadwarrior_tax_4_province
	remove_province_modifier = roadwarrior_tax_5_province
	remove_province_modifier = roadwarrior_tax_6_province
	remove_province_modifier = roadwarrior_builder_1_province
	remove_province_modifier = roadwarrior_builder_2_province
	remove_province_modifier = roadwarrior_builder_3_province
	remove_province_modifier = roadwarrior_builder_4_province
	remove_province_modifier = roadwarrior_builder_5_province
	remove_province_modifier = roadwarrior_builder_6_province
	remove_province_modifier = roadwarrior_builder_7_province
	remove_province_modifier = roadwarrior_thinking_1_province
	remove_province_modifier = roadwarrior_thinking_2_province
	remove_province_modifier = roadwarrior_thinking_3_province
	remove_province_modifier = roadwarrior_thinking_4_province
	remove_province_modifier = roadwarrior_thinking_5_province
	roadwarrior_migration_effects = yes
}

#######
##Xia##
#######
#Xia Trial of Balance stuff
xia_fire_increase = {
	if = {
		limit = { has_country_flag = xia_affinity_fire }
		clr_country_flag = xia_affinity_fire
		set_country_flag = xia_two_fire
	}
	else_if = {
		limit = { has_country_flag = xia_two_fire }
		clr_country_flag = xia_two_fire
		set_country_flag = xia_too_much_fire
	}
	else = {
		set_country_flag = xia_affinity_fire
	}
}
xia_water_increase = {
	if = {
		limit = { has_country_flag = xia_affinity_water }
		clr_country_flag = xia_affinity_water
		set_country_flag = xia_two_water
	}
	else_if = {
		limit = { has_country_flag = xia_two_water }
		clr_country_flag = xia_two_water
		set_country_flag = xia_too_much_water
	}
	else = {
		set_country_flag = xia_affinity_water
	}
}
xia_wood_increase = {
	if = {
		limit = { has_country_flag = xia_affinity_wood }
		clr_country_flag = xia_affinity_wood
		set_country_flag = xia_two_wood
	}
	else_if = {
		limit = { has_country_flag = xia_two_wood }
		clr_country_flag = xia_two_wood
		set_country_flag = xia_too_much_wood
	}
	else = {
		set_country_flag = xia_affinity_wood
	}
}
xia_metal_increase = {
	if = {
		limit = { has_country_flag = xia_affinity_metal }
		clr_country_flag = xia_affinity_metal
		set_country_flag = xia_two_metal
	}
	else_if = {
		limit = { has_country_flag = xia_two_metal }
		clr_country_flag = xia_two_metal
		set_country_flag = xia_too_much_metal
	}
	else = {
		set_country_flag = xia_affinity_metal
	}
}
xia_earth_increase = {
	if = {
		limit = { has_country_flag = xia_affinity_earth }
		clr_country_flag = xia_affinity_earth
		set_country_flag = xia_two_earth
	}
	else_if = {
		limit = { has_country_flag = xia_two_earth }
		clr_country_flag = xia_two_earth
		set_country_flag = xia_too_much_earth
	}
	else = {
		set_country_flag = xia_affinity_earth
	}
}
xia_determine_affinity = {
	if = {
		limit = {
			calc_true_if = {
				amount = 2
				
				mil = 4
				ruler_has_personality = bold_fighter_personality
				ruler_has_personality = zealot_personality
				ruler_has_personality = conqueror_personality
				ruler_has_personality = malevolent_personality
				ruler_has_personality = free_thinker_personality
				ruler_has_personality = entrepreneur_personality
				ruler_has_personality = inspiring_leader_personality
				ruler_has_personality = fierce_negotiator_personality
				ruler_has_personality = embezzler_personality
				ruler_has_personality = sinner_personality
			}
		}
		set_country_flag = xia_affinity_fire
	}
	else_if = {
		limit = {
			calc_true_if = {
				amount = 2
				
				dip = 4
				ruler_has_personality = architectural_visionary_personality
				ruler_has_personality = tolerant_personality
				ruler_has_personality = loose_lips_personality
				ruler_has_personality = silver_tongue_personality
				ruler_has_personality = kind_hearted_personality
				ruler_has_personality = well_connected_personality
				ruler_has_personality = intricate_web_weaver_personality
				ruler_has_personality = midas_touched_personality
				ruler_has_personality = industrious_personality
				ruler_has_personality = expansionist_personality
			}
		}
		set_country_flag = xia_affinity_wood
	}
	else_if = {
		limit = {
			calc_true_if = {
				amount = 2
				
				adm = 4
				ruler_has_personality = just_personality
				ruler_has_personality = calm_personality
				ruler_has_personality = careful_personality
				ruler_has_personality = drunkard_personality
				ruler_has_personality = kind_hearted_personality
				ruler_has_personality = well_connected_personality
				ruler_has_personality = well_advised_personality
				ruler_has_personality = martial_educator_personality
			}
		}
		set_country_flag = xia_affinity_earth
	}
	else_if = {
		limit = {
			calc_true_if = {
				amount = 2
				
				adm = 4
				ruler_has_personality = lawgiver_personality
				ruler_has_personality = incorruptible_personality
				ruler_has_personality = industrious_personality
				ruler_has_personality = strict_personality
				ruler_has_personality = cruel_personality
				ruler_has_personality = obsessive_perfectionist_personality
				ruler_has_personality = secretive_personality
				ruler_has_personality = pious_personality
				ruler_has_personality = greedy_personality
			}
		}
		set_country_flag = xia_affinity_metal
	}
	else_if = {
		limit = {
			calc_true_if = {
				amount = 2
				
				dip = 4
				ruler_has_personality = tolerant_personality
				ruler_has_personality = navigator_personality
				ruler_has_personality = well_advised_personality
				ruler_has_personality = scholar_personality
				ruler_has_personality = craven_personality
				ruler_has_personality = babbling_buffoon_personality
				ruler_has_personality = free_thinker_personality
				ruler_has_personality = benevolent_personality
				ruler_has_personality = tactical_genius_personality
				ruler_has_personality = naive_personality
				ruler_has_personality = loose_lips_personality
			}
		}
		set_country_flag = xia_affinity_water
	}
}
blue_scarves_army_large = {
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { cavalry = PREV }
	Y05 = { cavalry = PREV }
	Y05 = { artillery = PREV }
	Y05 = { artillery = PREV }
	Y05 = { artillery = PREV }
	Y05 = { artillery = PREV }
	Y05 = { artillery = PREV }
	Y05 = { artillery = PREV }
	Y05 = { artillery = PREV }
	Y05 = { artillery = PREV }
	Y05 = { artillery = PREV }
	Y05 = { artillery = PREV }
}
blue_scarves_army_mid = {
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { cavalry = PREV }
	Y05 = { cavalry = PREV }
	Y05 = { artillery = PREV }
	Y05 = { artillery = PREV }
	Y05 = { artillery = PREV }
	Y05 = { artillery = PREV }
	Y05 = { artillery = PREV }
}
blue_scarves_army_local = {
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
	Y05 = { infantry = PREV }
}

###########
##Bim Lau##
###########
bim_lau_spirit_power = {
	if = {
		limit = {
			4565 = {
				check_variable = {
					which = BimLauTombPower
					value = 25
				}
				NOT = {
					check_variable = {
						which = BimLauTombPower
						value = 75
					}
				}
				check_variable = {
					which = BimLauTombOpulence
					value = 25
				}
				NOT = { has_province_modifier = Y51_tomb_power_very_low }
			}
		}
		4565 = {
			add_permanent_province_modifier = { name = Y51_tomb_power_very_low duration = -1 }
			if = {
				limit = {
					has_province_modifier = Y51_tomb_power_low
				}
				remove_province_modifier = Y51_tomb_power_low
			}
			if = {
				limit = {
					has_province_modifier = Y51_tomb_power_medium
				}
				remove_province_modifier = Y51_tomb_power_medium
			}
			if = {
				limit = {
					has_province_modifier = Y51_tomb_power_high
				}
				remove_province_modifier = Y51_tomb_power_high
			}
			if = {
				limit = {
					has_province_modifier = Y51_tomb_spirits_furious
				}
				remove_province_modifier = Y51_tomb_spirits_furious
			}
			if = {
				limit = {
					has_province_modifier = Y51_tomb_power_zero
				}
				remove_province_modifier = Y51_tomb_power_zero
			}
		}
	}
	else_if = {
		limit = {
			4565 = {
				check_variable = {
					which = BimLauTombPower
					value = 75
				}
				NOT = {
					check_variable = {
						which = BimLauTombPower
						value = 125
					}
				}
				check_variable = {
					which = BimLauTombOpulence
					value = 75
				}
				NOT = { has_province_modifier = Y51_tomb_power_low }
			}
		}
		4565 = {
			add_permanent_province_modifier = { name = Y51_tomb_power_low duration = -1 }
			if = {
				limit = {
					has_province_modifier = Y51_tomb_power_very_low
				}
				remove_province_modifier = Y51_tomb_power_very_low
			}
			if = {
				limit = {
					has_province_modifier = Y51_tomb_power_medium
				}
				remove_province_modifier = Y51_tomb_power_medium
			}
			if = {
				limit = {
					has_province_modifier = Y51_tomb_power_high
				}
				remove_province_modifier = Y51_tomb_power_high
			}
			if = {
				limit = {
					has_province_modifier = Y51_tomb_spirits_furious
				}
				remove_province_modifier = Y51_tomb_spirits_furious
			}
			if = {
				limit = {
					has_province_modifier = Y51_tomb_power_zero
				}
				remove_province_modifier = Y51_tomb_power_zero
			}
		}
	}
	else_if = {
		limit = {
			4565 = {
				check_variable = {
					which = BimLauTombPower
					value = 125
				}
				NOT = {
					check_variable = {
						which = BimLauTombPower
						value = 200
					}
				}
				check_variable = {
					which = BimLauTombOpulence
					value = 125
				}
				NOT = { has_province_modifier = Y51_tomb_power_medium }
			}
		}
		4565 = {
			add_permanent_province_modifier = { name = Y51_tomb_power_medium duration = -1 }
			if = {
				limit = {
					has_province_modifier = Y51_tomb_power_very_low
				}
				remove_province_modifier = Y51_tomb_power_very_low
			}
			if = {
				limit = {
					has_province_modifier = Y51_tomb_power_low
				}
				remove_province_modifier = Y51_tomb_power_low
			}
			if = {
				limit = {
					has_province_modifier = Y51_tomb_power_high
				}
				remove_province_modifier = Y51_tomb_power_high
			}
			if = {
				limit = {
					has_province_modifier = Y51_tomb_spirits_furious
				}
				remove_province_modifier = Y51_tomb_spirits_furious
			}
			if = {
				limit = {
					has_province_modifier = Y51_tomb_power_zero
				}
				remove_province_modifier = Y51_tomb_power_zero
			}
		}
	}
	else_if = {
		limit = {
			4565 = {
				check_variable = {
					which = BimLauTombPower
					value = 200
				}
				check_variable = {
					which = BimLauTombOpulence
					value = 200
				}
				NOT = { has_province_modifier = Y51_tomb_power_high }
			}
		}
		4565 = {
			add_permanent_province_modifier = { name = Y51_tomb_power_high duration = -1 }
			if = {
				limit = {
					has_province_modifier = Y51_tomb_power_very_low
				}
				remove_province_modifier = Y51_tomb_power_very_low
			}
			if = {
				limit = {
					has_province_modifier = Y51_tomb_power_low
				}
				remove_province_modifier = Y51_tomb_power_low
			}
			if = {
				limit = {
					has_province_modifier = Y51_tomb_power_medium
				}
				remove_province_modifier = Y51_tomb_power_medium
			}
			if = {
				limit = {
					has_province_modifier = Y51_tomb_spirits_furious
				}
				remove_province_modifier = Y51_tomb_spirits_furious
			}
			if = {
				limit = {
					has_province_modifier = Y51_tomb_power_zero
				}
				remove_province_modifier = Y51_tomb_power_zero
			}
		}
	}
	else_if = {
		limit = {
			OR = {
				4565 = {
					check_variable = {
						which = BimLauTombPower
						value = 25
					}
					NOT = {
						check_variable = {
							which = BimLauTombOpulence
							value = 25
						}
					}
					NOT = { has_province_modifier = Y51_tomb_spirits_furious }
				}
				4565 = {
					check_variable = {
						which = BimLauTombPower
						value = 75
					}
					NOT = {
						check_variable = {
							which = BimLauTombOpulence
							value = 75
						}
					}
					NOT = { has_province_modifier = Y51_tomb_spirits_furious }
				}
				4565 = {
					check_variable = {
						which = BimLauTombPower
						value = 125
					}
					NOT = {
						check_variable = {
							which = BimLauTombOpulence
							value = 125
						}
					}
					NOT = { has_province_modifier = Y51_tomb_spirits_furious }
				}
				4565 = {
					check_variable = {
						which = BimLauTombPower
						value = 200
					}
					NOT = {
						check_variable = {
							which = BimLauTombOpulence
							value = 200
						}
					}
					NOT = { has_province_modifier = Y51_tomb_spirits_furious }
				}
			}
		}
		4565 = {
			add_permanent_province_modifier = { name = Y51_tomb_spirits_furious duration = -1 }
			if = {
				limit = {
					has_province_modifier = Y51_tomb_power_very_low
				}
				remove_province_modifier = Y51_tomb_power_very_low
			}
			if = {
				limit = {
					has_province_modifier = Y51_tomb_power_low
				}
				remove_province_modifier = Y51_tomb_power_low
			}
			if = {
				limit = {
					has_province_modifier = Y51_tomb_power_medium
				}
				remove_province_modifier = Y51_tomb_power_medium
			}
			if = {
				limit = {
					has_province_modifier = Y51_tomb_power_high
				}
				remove_province_modifier = Y51_tomb_power_high
			}
			if = {
				limit = {
					has_province_modifier = Y51_tomb_power_zero
				}
				remove_province_modifier = Y51_tomb_power_zero
			}
		}
	}
	else_if = {
		limit = {
			4565 = {
				NOT = {
					check_variable = {
						which = BimLauTombPower
						value = 25
					}
				}
				NOT = { has_province_modifier = Y51_tomb_power_zero }
			}
		}
		4565 = {
			add_permanent_province_modifier = { name = Y51_tomb_power_zero duration = -1 }
			if = {
				limit = {
					has_province_modifier = Y51_tomb_power_very_low
				}
				remove_province_modifier = Y51_tomb_power_very_low
			}
			if = {
				limit = {
					has_province_modifier = Y51_tomb_power_low
				}
				remove_province_modifier = Y51_tomb_power_low
			}
			if = {
				limit = {
					has_province_modifier = Y51_tomb_power_medium
				}
				remove_province_modifier = Y51_tomb_power_medium
			}
			if = {
				limit = {
					has_province_modifier = Y51_tomb_power_high
				}
				remove_province_modifier = Y51_tomb_power_high
			}
			if = {
				limit = {
					has_province_modifier = Y51_tomb_spirits_furious
				}
				remove_province_modifier = Y51_tomb_spirits_furious
			}
		}
	}
}

#############
##Ghavaanaj##
#############
ghavaanaj_change_herd_growth = {
	change_variable = {
		which = ghavaanaj_herd_size_counter
		value = $amount$
	}
	while = {
		limit = {
			OR = {
				check_variable = {
					which = ghavaanaj_herd_size_counter
					value = 10
				}
				NOT = {
					check_variable = {
						which = ghavaanaj_herd_size_counter
						value = 0
					}
				}
			}
		}
		if = {
			limit = {
				check_variable = {
					which = ghavaanaj_herd_size_counter
					value = 10
				}
			}
			change_variable = {
				which = ghavaanaj_herd_size_counter
				value = -10
			}
			ghavaanaj_increase_herd_size = yes
		}
		else_if = {
			limit = {
				NOT = {
					check_variable = {
						which = ghavaanaj_herd_size_counter
						value = 0
					}
				}
			}
			change_variable = {
				which = ghavaanaj_herd_size_counter
				value = 10
			}
			ghavaanaj_decrease_herd_size = yes
		}
	}
}
ghavaanaj_update_herd_size_provinces = {
	every_owned_province = {
		remove_province_modifier = ghavaanaj_herd_size_grazing_1
		remove_province_modifier = ghavaanaj_herd_size_grazing_2
		remove_province_modifier = ghavaanaj_herd_size_grazing_3
		remove_province_modifier = ghavaanaj_herd_size_grazing_4
		remove_province_modifier = ghavaanaj_herd_size_grazing_5
		remove_province_modifier = ghavaanaj_herd_size_grazing_6
		remove_province_modifier = ghavaanaj_herd_size_grazing_7
		remove_province_modifier = ghavaanaj_herd_size_grazing_8
		remove_province_modifier = ghavaanaj_herd_size_grazing_9
		remove_province_modifier = ghavaanaj_herd_size_grazing_10
		remove_province_modifier = ghavaanaj_herd_size_grazing_11
		remove_province_modifier = ghavaanaj_herd_size_grazing_12
		remove_province_modifier = ghavaanaj_herd_size_grazing_13
		remove_province_modifier = ghavaanaj_herd_size_grazing_14
		remove_province_modifier = ghavaanaj_herd_size_grazing_15
		remove_province_modifier = ghavaanaj_herd_size_grazing_16
		remove_province_modifier = ghavaanaj_herd_size_grazing_17
		remove_province_modifier = ghavaanaj_herd_size_grazing_18
		remove_province_modifier = ghavaanaj_herd_size_grazing_19
		remove_province_modifier = ghavaanaj_herd_size_grazing_20
	}
	if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_1 }
		every_owned_province = {
			limit = { OR = { trade_goods = grain trade_goods = livestock } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_1 duration = -1 }
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_2 }
		every_owned_province = {
			limit = { OR = { trade_goods = grain trade_goods = livestock } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_2 duration = -1 }
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_3 }
		every_owned_province = {
			limit = { OR = { trade_goods = grain trade_goods = livestock } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_3 duration = -1 }
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_4 }
		every_owned_province = {
			limit = { OR = { trade_goods = grain trade_goods = livestock } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_4 duration = -1 }
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_5 }
		every_owned_province = {
			limit = { OR = { trade_goods = grain trade_goods = livestock } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_5 duration = -1 }
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_6 }
		every_owned_province = {
			limit = { OR = { trade_goods = grain trade_goods = livestock } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_6 duration = -1 }
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_7 }
		every_owned_province = {
			limit = { OR = { trade_goods = grain trade_goods = livestock } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_7 duration = -1 }
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_8 }
		every_owned_province = {
			limit = { OR = { trade_goods = grain trade_goods = livestock } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_8 duration = -1 }
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_9 }
		every_owned_province = {
			limit = { OR = { trade_goods = grain trade_goods = livestock } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_9 duration = -1 }
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_10 }
		every_owned_province = {
			limit = { OR = { trade_goods = grain trade_goods = livestock } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_10 duration = -1 }
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_11 }
		every_owned_province = {
			limit = { OR = { trade_goods = grain trade_goods = livestock } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_11 duration = -1 }
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_12 }
		every_owned_province = {
			limit = { OR = { trade_goods = grain trade_goods = livestock } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_12 duration = -1 }
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_13 }
		every_owned_province = {
			limit = { OR = { trade_goods = grain trade_goods = livestock } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_13 duration = -1 }
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_14 }
		every_owned_province = {
			limit = { OR = { trade_goods = grain trade_goods = livestock } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_14 duration = -1 }
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_15 }
		every_owned_province = {
			limit = { OR = { trade_goods = grain trade_goods = livestock } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_15 duration = -1 }
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_16 }
		every_owned_province = {
			limit = { OR = { trade_goods = grain trade_goods = livestock } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_16 duration = -1 }
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_17 }
		every_owned_province = {
			limit = { OR = { trade_goods = grain trade_goods = livestock } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_17 duration = -1 }
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_18 }
		every_owned_province = {
			limit = { OR = { trade_goods = grain trade_goods = livestock } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_18 duration = -1 }
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_19 }
		every_owned_province = {
			limit = { OR = { trade_goods = grain trade_goods = livestock } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_19 duration = -1 }
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_20 }
		every_owned_province = {
			limit = { OR = { trade_goods = grain trade_goods = livestock } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_20 duration = -1 }
		}
	}
}
ghavaanaj_update_herd_size_provinces_on_province_owner_change = {
	if = {
		limit = { owner = { has_country_flag = ghavaanaj_elephant_herd_mechanic } OR = { trade_goods = grain trade_goods = livestock } }
		if = {
			limit = { owner = { has_country_modifier = ghavaanaj_herd_size_1 } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_1 duration = -1 }
		}
		else_if = {
			limit = { owner = { has_country_modifier = ghavaanaj_herd_size_2 } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_2 duration = -1 }
		}
		else_if = {
			limit = { owner = { has_country_modifier = ghavaanaj_herd_size_3 } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_3 duration = -1 }
		}
		else_if = {
			limit = { owner = { has_country_modifier = ghavaanaj_herd_size_4 } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_4 duration = -1 }
		}
		else_if = {
			limit = { owner = { has_country_modifier = ghavaanaj_herd_size_5 } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_5 duration = -1 }
		}
		else_if = {
			limit = { owner = { has_country_modifier = ghavaanaj_herd_size_6 } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_6 duration = -1 }
		}
		else_if = {
			limit = { owner = { has_country_modifier = ghavaanaj_herd_size_7 } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_7 duration = -1 }
		}
		else_if = {
			limit = { owner = { has_country_modifier = ghavaanaj_herd_size_8 } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_8 duration = -1 }
		}
		else_if = {
			limit = { owner = { has_country_modifier = ghavaanaj_herd_size_9 } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_9 duration = -1 }
		}
		else_if = {
			limit = { owner = { has_country_modifier = ghavaanaj_herd_size_10 } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_10 duration = -1 }
		}
		else_if = {
			limit = { owner = { has_country_modifier = ghavaanaj_herd_size_11 } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_11 duration = -1 }
		}
		else_if = {
			limit = { owner = { has_country_modifier = ghavaanaj_herd_size_12 } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_12 duration = -1 }
		}
		else_if = {
			limit = { owner = { has_country_modifier = ghavaanaj_herd_size_13 } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_13 duration = -1 }
		}
		else_if = {
			limit = { owner = { has_country_modifier = ghavaanaj_herd_size_14 } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_14 duration = -1 }
		}
		else_if = {
			limit = { owner = { has_country_modifier = ghavaanaj_herd_size_15 } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_15 duration = -1 }
		}
		else_if = {
			limit = { owner = { has_country_modifier = ghavaanaj_herd_size_16 } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_16 duration = -1 }
		}
		else_if = {
			limit = { owner = { has_country_modifier = ghavaanaj_herd_size_17 } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_17 duration = -1 }
		}
		else_if = {
			limit = { owner = { has_country_modifier = ghavaanaj_herd_size_18 } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_18 duration = -1 }
		}
		else_if = {
			limit = { owner = { has_country_modifier = ghavaanaj_herd_size_19 } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_19 duration = -1 }
		}
		else_if = {
			limit = { owner = { has_country_modifier = ghavaanaj_herd_size_20 } }
			add_province_modifier = { name = ghavaanaj_herd_size_grazing_20 duration = -1 }
		}
	}
}
ghavaanaj_decrease_herd_size = {
	if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_20 }
		remove_country_modifier = ghavaanaj_herd_size_20
		add_country_modifier = {
			name = ghavaanaj_herd_size_19
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_19 }
		remove_country_modifier = ghavaanaj_herd_size_19
		add_country_modifier = {
			name = ghavaanaj_herd_size_18
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_18 }
		remove_country_modifier = ghavaanaj_herd_size_18
		add_country_modifier = {
			name = ghavaanaj_herd_size_17
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_17 }
		remove_country_modifier = ghavaanaj_herd_size_17
		add_country_modifier = {
			name = ghavaanaj_herd_size_16
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_16 }
		remove_country_modifier = ghavaanaj_herd_size_16
		add_country_modifier = {
			name = ghavaanaj_herd_size_15
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_15 }
		remove_country_modifier = ghavaanaj_herd_size_15
		add_country_modifier = {
			name = ghavaanaj_herd_size_14
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_14 }
		remove_country_modifier = ghavaanaj_herd_size_14
		add_country_modifier = {
			name = ghavaanaj_herd_size_13
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_13 }
		remove_country_modifier = ghavaanaj_herd_size_13
		add_country_modifier = {
			name = ghavaanaj_herd_size_12
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_12 }
		remove_country_modifier = ghavaanaj_herd_size_12
		add_country_modifier = {
			name = ghavaanaj_herd_size_11
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_11 }
		remove_country_modifier = ghavaanaj_herd_size_11
		add_country_modifier = {
			name = ghavaanaj_herd_size_10
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_10 }
		remove_country_modifier = ghavaanaj_herd_size_10
		add_country_modifier = {
			name = ghavaanaj_herd_size_9
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_9 }
		remove_country_modifier = ghavaanaj_herd_size_9
		add_country_modifier = {
			name = ghavaanaj_herd_size_8
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_8 }
		remove_country_modifier = ghavaanaj_herd_size_8
		add_country_modifier = {
			name = ghavaanaj_herd_size_7
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_7 }
		remove_country_modifier = ghavaanaj_herd_size_7
		add_country_modifier = {
			name = ghavaanaj_herd_size_6
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_6 }
		remove_country_modifier = ghavaanaj_herd_size_6
		add_country_modifier = {
			name = ghavaanaj_herd_size_5
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_5 }
		remove_country_modifier = ghavaanaj_herd_size_5
		add_country_modifier = {
			name = ghavaanaj_herd_size_4
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_4 }
		remove_country_modifier = ghavaanaj_herd_size_4
		add_country_modifier = {
			name = ghavaanaj_herd_size_3
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_3 }
		remove_country_modifier = ghavaanaj_herd_size_3
		add_country_modifier = {
			name = ghavaanaj_herd_size_2
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_2 }
		remove_country_modifier = ghavaanaj_herd_size_2
		add_country_modifier = {
			name = ghavaanaj_herd_size_1
			duration = -1
		}
		
		set_variable = {
			which = ghavaanaj_herd_size_counter
			value = 0
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_1 }		
		set_variable = {
			which = ghavaanaj_herd_size_counter
			value = 0
		}
	}
	ghavaanaj_update_herd_size_provinces = yes
}
ghavaanaj_increase_herd_size = {
	if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_20 }
		set_variable = {
			which = ghavaanaj_herd_size_counter
			value = 0
		}
		add_yearly_manpower = 0.5
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_19 check_variable = { which = ghavaanaj_max_herd_size value = 20 } }
		remove_country_modifier = ghavaanaj_herd_size_19
		add_country_modifier = {
			name = ghavaanaj_herd_size_20
			duration = -1
		}
		set_variable = {
			which = ghavaanaj_herd_size_counter
			value = 0
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_18 check_variable = { which = ghavaanaj_max_herd_size value = 19 } }
		remove_country_modifier = ghavaanaj_herd_size_18
		add_country_modifier = {
			name = ghavaanaj_herd_size_19
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_17 check_variable = { which = ghavaanaj_max_herd_size value = 18 } }
		remove_country_modifier = ghavaanaj_herd_size_17
		add_country_modifier = {
			name = ghavaanaj_herd_size_18
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_16 check_variable = { which = ghavaanaj_max_herd_size value = 17 } }
		remove_country_modifier = ghavaanaj_herd_size_16
		add_country_modifier = {
			name = ghavaanaj_herd_size_17
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_15 check_variable = { which = ghavaanaj_max_herd_size value = 16 } }
		remove_country_modifier = ghavaanaj_herd_size_15
		add_country_modifier = {
			name = ghavaanaj_herd_size_16
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_14 check_variable = { which = ghavaanaj_max_herd_size value = 15 } }
		remove_country_modifier = ghavaanaj_herd_size_14
		add_country_modifier = {
			name = ghavaanaj_herd_size_15
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_13 check_variable = { which = ghavaanaj_max_herd_size value = 14 } }
		remove_country_modifier = ghavaanaj_herd_size_13
		add_country_modifier = {
			name = ghavaanaj_herd_size_14
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_12 check_variable = { which = ghavaanaj_max_herd_size value = 13 } }
		remove_country_modifier = ghavaanaj_herd_size_12
		add_country_modifier = {
			name = ghavaanaj_herd_size_13
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_11 check_variable = { which = ghavaanaj_max_herd_size value = 12 } }
		remove_country_modifier = ghavaanaj_herd_size_11
		add_country_modifier = {
			name = ghavaanaj_herd_size_12
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_10 check_variable = { which = ghavaanaj_max_herd_size value = 11 } }
		remove_country_modifier = ghavaanaj_herd_size_10
		add_country_modifier = {
			name = ghavaanaj_herd_size_11
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_9 check_variable = { which = ghavaanaj_max_herd_size value = 10 } }
		remove_country_modifier = ghavaanaj_herd_size_9
		add_country_modifier = {
			name = ghavaanaj_herd_size_10
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_8 check_variable = { which = ghavaanaj_max_herd_size value = 9 } }
		remove_country_modifier = ghavaanaj_herd_size_8
		add_country_modifier = {
			name = ghavaanaj_herd_size_9
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_7 check_variable = { which = ghavaanaj_max_herd_size value = 8 } }
		remove_country_modifier = ghavaanaj_herd_size_7
		add_country_modifier = {
			name = ghavaanaj_herd_size_8
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_6 check_variable = { which = ghavaanaj_max_herd_size value = 7 } }
		remove_country_modifier = ghavaanaj_herd_size_6
		add_country_modifier = {
			name = ghavaanaj_herd_size_7
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_5 check_variable = { which = ghavaanaj_max_herd_size value = 6 } }
		remove_country_modifier = ghavaanaj_herd_size_5
		add_country_modifier = {
			name = ghavaanaj_herd_size_6
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_4 check_variable = { which = ghavaanaj_max_herd_size value = 5 } }
		remove_country_modifier = ghavaanaj_herd_size_4
		add_country_modifier = {
			name = ghavaanaj_herd_size_5
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_3 check_variable = { which = ghavaanaj_max_herd_size value = 4 } }
		remove_country_modifier = ghavaanaj_herd_size_3
		add_country_modifier = {
			name = ghavaanaj_herd_size_4
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_2 check_variable = { which = ghavaanaj_max_herd_size value = 3 } }
		remove_country_modifier = ghavaanaj_herd_size_2
		add_country_modifier = {
			name = ghavaanaj_herd_size_3
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_size_1 check_variable = { which = ghavaanaj_max_herd_size value = 2 } }
		remove_country_modifier = ghavaanaj_herd_size_1
		add_country_modifier = {
			name = ghavaanaj_herd_size_2
			duration = -1
		}
	}
	ghavaanaj_update_herd_size_provinces = yes
}
ghavaanaj_define_training_chance = {
	set_variable = { #Base Value
		which = ghavaanaj_training_chance
		value = 10
	}
	if = {
		limit = { always = no } #Requirement
		change_variable = { #Chance modification
			which = ghavaanaj_training_chance
			value = 5
		}
	}
	if = {
		limit = { has_country_modifier = ghavaanaj_herd_training_harder }
		change_variable = {
			which = ghavaanaj_training_chance
			value = 25
		}
	}
	if = {
		limit = { has_country_flag = ghavaanaj_refined_training_flag }
		change_variable = {
			which = ghavaanaj_training_chance
			value = 5
		}
	}
	if = {
		limit = { has_estate_privilege = estate_mages_reeshi_bonds }
		change_variable = {
			which = ghavaanaj_training_chance
			value = 5
		}
	}
	if = {
		limit = { has_leader_with = { shock = 4 } NOT = { has_leader_with = { shock = 5 } } }
		change_variable = {
			which = ghavaanaj_training_chance
			value = 2
		}
	}
	if = {
		limit = { has_leader_with = { shock = 5 } NOT = { has_leader_with = { shock = 6 } } }
		change_variable = {
			which = ghavaanaj_training_chance
			value = 3
		}
	}
	if = {
		limit = { has_leader_with = { shock = 6 } }
		change_variable = {
			which = ghavaanaj_training_chance
			value = 5
		}
	}
	if = {
		limit = { advisor = quartermaster }
		change_variable = {
			which = ghavaanaj_training_chance
			value = 3
		}
	}
	if = {
		limit = { monthly_mil = 10 NOT = { monthly_mil = 12 } }
		change_variable = {
			which = ghavaanaj_training_chance
			value = 2
		}
	}
	if = {
		limit = { monthly_mil = 12 NOT = { monthly_mil = 14 } }
		change_variable = {
			which = ghavaanaj_training_chance
			value = 4
		}
	}
	if = {
		limit = { monthly_mil = 14 NOT = { monthly_mil = 16 } }
		change_variable = {
			which = ghavaanaj_training_chance
			value = 6
		}
	}
	if = {
		limit = { monthly_mil = 16 NOT = { monthly_mil = 18 } }
		change_variable = {
			which = ghavaanaj_training_chance
			value = 7
		}
	}
	if = {
		limit = { monthly_mil = 18 }
		change_variable = {
			which = ghavaanaj_training_chance
			value = 8
		}
	}
	if = {
		limit = { army_tradition = 40 NOT = { army_tradition = 60 } }
		change_variable = {
			which = ghavaanaj_training_chance
			value = 2
		}
	}
	if = {
		limit = { army_tradition = 60 NOT = { army_tradition = 80 } }
		change_variable = {
			which = ghavaanaj_training_chance
			value = 4
		}
	}
	if = {
		limit = { army_tradition = 80 }
		change_variable = {
			which = ghavaanaj_training_chance
			value = 8
		}
	}
	if = {
		limit = { is_at_war = no }
		change_variable = {
			which = ghavaanaj_training_chance
			value = 5
		}
	}
}
ghavaanaj_roll_training_advance = {
	if = {
		limit = { check_variable = { which = ghavaanaj_training_chance value = 50 } }
		if = {
			limit = { check_variable = { which = ghavaanaj_training_chance value = 75 } }
			if = {
				limit = { check_variable = { which = ghavaanaj_training_chance value = 85 } }
				if = {
					limit = { check_variable = { which = ghavaanaj_training_chance value = 95 } }
					if = {
						limit = { check_variable = { which = ghavaanaj_training_chance value = 100 } }
						ghavaanaj_change_training = { amount = 1 }
					}
					else = {
						random_list = {
							5 = {  }
							95 = { ghavaanaj_change_training = { amount = 1 } }
						}
					}
				}
				else = {
					if = {
						limit = { check_variable = { which = ghavaanaj_training_chance value = 90 } }
						random_list = {
							10 = {  }
							90 = { ghavaanaj_change_training = { amount = 1 } }
						}
					}
					else = {
						random_list = {
							15 = {  }
							85 = { ghavaanaj_change_training = { amount = 1 } }
						}
					}
				}
			}
			else = {
				if = {
					limit = { check_variable = { which = ghavaanaj_training_chance value = 80 } }
					random_list = {
						20 = {  }
						80 = { ghavaanaj_change_training = { amount = 1 } }
					}
				}
				else = {
					random_list = {
						25 = {  }
						75 = { ghavaanaj_change_training = { amount = 1 } }
					}
				}
			}
		}
		else = {
			if = {
				limit = { check_variable = { which = ghavaanaj_training_chance value = 60 } }
				if = {
					limit = { check_variable = { which = ghavaanaj_training_chance value = 70 } }
					random_list = {
						30 = {  }
						70 = { ghavaanaj_change_training = { amount = 1 } }
					}
				}
				else = {
					if = {
						limit = { check_variable = { which = ghavaanaj_training_chance value = 65 } }
						random_list = {
							35 = {  }
							65 = { ghavaanaj_change_training = { amount = 1 } }
						}
					}
					else = {
						random_list = {
							40 = {  }
							60 = { ghavaanaj_change_training = { amount = 1 } }
						}
					}
				}
			}
			else = {
				if = {
					limit = { check_variable = { which = ghavaanaj_training_chance value = 55 } }
					random_list = {
						45 = {  }
						55 = { ghavaanaj_change_training = { amount = 1 } }
					}
				}
				else = {
					random_list = {
						50 = {  }
						50 = { ghavaanaj_change_training = { amount = 1 } }
					}
				}
			}
		}
	}
	else = {
		if = {
			limit = { check_variable = { which = ghavaanaj_training_chance value = 25 } }
			if = {
				limit = { check_variable = { which = ghavaanaj_training_chance value = 35 } }
				if = {
					limit = { check_variable = { which = ghavaanaj_training_chance value = 45 } }
					random_list = {
						55 = {  }
						45 = { ghavaanaj_change_training = { amount = 1 } }
					}
				}
				else = {
					if = {
						limit = { check_variable = { which = ghavaanaj_training_chance value = 40 } }
						random_list = {
							60 = {  }
							40 = { ghavaanaj_change_training = { amount = 1 } }
						}
					}
					else = {
						random_list = {
							65 = {  }
							35 = { ghavaanaj_change_training = { amount = 1 } }
						}
					}
				}
			}
			else = {
				if = {
					limit = { check_variable = { which = ghavaanaj_training_chance value = 30 } }
					random_list = {
						70 = {  }
						30 = { ghavaanaj_change_training = { amount = 1 } }
					}
				}
				else = {
					random_list = {
						75 = {  }
						25 = { ghavaanaj_change_training = { amount = 1 } }
					}
				}
			}
		}
		else = {
			if = {
				limit = { check_variable = { which = ghavaanaj_training_chance value = 10 } }
				if = {
					limit = { check_variable = { which = ghavaanaj_training_chance value = 20 } }
					random_list = {
						80 = {  }
						20 = { ghavaanaj_change_training = { amount = 1 } }
					}
				}
				else = {
					if = {
						limit = { check_variable = { which = ghavaanaj_training_chance value = 15 } }
						random_list = {
							85 = {  }
							15 = { ghavaanaj_change_training = { amount = 1 } }
						}
					}
					else = {
						random_list = {
							90 = {  }
							10 = { ghavaanaj_change_training = { amount = 1 } }
						}
					}
				}
			}
			else = {
				if = {
					limit = { check_variable = { which = ghavaanaj_training_chance value = 5 } }
					random_list = {
						95 = {  }
						5 = { ghavaanaj_change_training = { amount = 1 } }
					}
				}
				else = {
					
				}
			}
		}
	}
}
ghavaanaj_change_training = {
	change_variable = {
		which = ghavaanaj_herd_training_counter
		value = $amount$
	}
	if = {
		limit = { check_variable = { which = ghavaanaj_herd_training_counter value = 100 } }
		if = {
			limit = { has_country_flag = ghavaanaj_herd_training_swift_flag }
			ghavaanaj_decrease_training_physical = yes
		}
		if = {
			limit = { has_country_flag = ghavaanaj_herd_training_sturdy_flag }
			ghavaanaj_increase_training_physical = yes
		}
		if = {
			limit = { has_country_flag = ghavaanaj_herd_training_smart_flag }
			ghavaanaj_decrease_training_mental = yes
		}
		if = {
			limit = { has_country_flag = ghavaanaj_herd_training_steadfast_flag }
			ghavaanaj_increase_training_mental = yes
		}
		change_variable = { which = ghavaanaj_herd_training_counter value = -100 }
	}
	if = {
		limit = { NOT = { check_variable = { which = ghavaanaj_herd_training_counter value = 0 } } }
		set_variable = { which = ghavaanaj_herd_training_counter value = 0 }
	}
}
ghavaanaj_update_training_general = {
	remove_country_modifier = ghavaanaj_herd_training_general_1
	remove_country_modifier = ghavaanaj_herd_training_general_2
	remove_country_modifier = ghavaanaj_herd_training_general_3
	remove_country_modifier = ghavaanaj_herd_training_general_4
	remove_country_modifier = ghavaanaj_herd_training_general_5
	remove_country_modifier = ghavaanaj_herd_training_general_6
	if = {
		limit = {
			OR = {
				AND = { has_country_modifier = ghavaanaj_herd_training_physical_00 has_country_modifier = ghavaanaj_herd_training_mental_01 }
				AND = { has_country_modifier = ghavaanaj_herd_training_physical_01 has_country_modifier = ghavaanaj_herd_training_mental_00 }
			}
		}
		add_country_modifier = { name = ghavaanaj_herd_training_general_1 duration = -1 }
	}
	else_if = {
		limit = {
			OR = {
				AND = { has_country_modifier = ghavaanaj_herd_training_physical_01 has_country_modifier = ghavaanaj_herd_training_mental_01 }
				AND = { has_country_modifier = ghavaanaj_herd_training_physical_00 has_country_modifier = ghavaanaj_herd_training_mental_02 }
				AND = { has_country_modifier = ghavaanaj_herd_training_physical_02 has_country_modifier = ghavaanaj_herd_training_mental_00 }
			}
		}
		add_country_modifier = { name = ghavaanaj_herd_training_general_2 duration = -1 }
	}
	else_if = {
		limit = {
			OR = {
				AND = { has_country_modifier = ghavaanaj_herd_training_physical_01 has_country_modifier = ghavaanaj_herd_training_mental_02 }
				AND = { has_country_modifier = ghavaanaj_herd_training_physical_02 has_country_modifier = ghavaanaj_herd_training_mental_01 }
				AND = { has_country_modifier = ghavaanaj_herd_training_physical_00 has_country_modifier = ghavaanaj_herd_training_mental_03 }
				AND = { has_country_modifier = ghavaanaj_herd_training_physical_03 has_country_modifier = ghavaanaj_herd_training_mental_00 }
			}
		}
		add_country_modifier = { name = ghavaanaj_herd_training_general_3 duration = -1 }
	}
	else_if = {
		limit = {
			OR = {
				AND = { has_country_modifier = ghavaanaj_herd_training_physical_02 has_country_modifier = ghavaanaj_herd_training_mental_02 }
				AND = { has_country_modifier = ghavaanaj_herd_training_physical_03 has_country_modifier = ghavaanaj_herd_training_mental_01 }
				AND = { has_country_modifier = ghavaanaj_herd_training_physical_01 has_country_modifier = ghavaanaj_herd_training_mental_03 }
			}
		}
		add_country_modifier = { name = ghavaanaj_herd_training_general_4 duration = -1 }
	}
	else_if = {
		limit = {
			OR = {
				AND = { has_country_modifier = ghavaanaj_herd_training_physical_03 has_country_modifier = ghavaanaj_herd_training_mental_02 }
				AND = { has_country_modifier = ghavaanaj_herd_training_physical_02 has_country_modifier = ghavaanaj_herd_training_mental_03 }
			}
		}
		add_country_modifier = { name = ghavaanaj_herd_training_general_5 duration = -1 }
	}
	else_if = {
		limit = {
			OR = {
				AND = { has_country_modifier = ghavaanaj_herd_training_physical_03 has_country_modifier = ghavaanaj_herd_training_mental_03 }
			}
		}
		add_country_modifier = { name = ghavaanaj_herd_training_general_6 duration = -1 }
	}
}
ghavaanaj_increase_training_physical = { #Swift -> Sturdy
	if = {
		limit = { has_country_modifier = ghavaanaj_herd_training_physical_03 }
		remove_country_modifier = ghavaanaj_herd_training_physical_03
		add_country_modifier = {
			name = ghavaanaj_herd_training_physical_02
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_training_physical_02 }
		remove_country_modifier = ghavaanaj_herd_training_physical_02
		add_country_modifier = {
			name = ghavaanaj_herd_training_physical_01
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_training_physical_01 }
		remove_country_modifier = ghavaanaj_herd_training_physical_01
		add_country_modifier = {
			name = ghavaanaj_herd_training_physical_00
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_training_physical_00 }
		remove_country_modifier = ghavaanaj_herd_training_physical_00
		add_country_modifier = {
			name = ghavaanaj_herd_training_physical_11
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_training_physical_11 }
		remove_country_modifier = ghavaanaj_herd_training_physical_11
		add_country_modifier = {
			name = ghavaanaj_herd_training_physical_12
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_training_physical_12 }
		remove_country_modifier = ghavaanaj_herd_training_physical_12
		add_country_modifier = {
			name = ghavaanaj_herd_training_physical_13
			duration = -1
		}
	}
	ghavaanaj_update_training_general = yes
}
ghavaanaj_decrease_training_physical = { #Sturdy -> Swift
	if = {
		limit = { has_country_modifier = ghavaanaj_herd_training_physical_13 }
		remove_country_modifier = ghavaanaj_herd_training_physical_13
		add_country_modifier = {
			name = ghavaanaj_herd_training_physical_12
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_training_physical_12 }
		remove_country_modifier = ghavaanaj_herd_training_physical_12
		add_country_modifier = {
			name = ghavaanaj_herd_training_physical_11
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_training_physical_11 }
		remove_country_modifier = ghavaanaj_herd_training_physical_11
		add_country_modifier = {
			name = ghavaanaj_herd_training_physical_00
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_training_physical_00 }
		remove_country_modifier = ghavaanaj_herd_training_physical_00
		add_country_modifier = {
			name = ghavaanaj_herd_training_physical_01
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_training_physical_01 }
		remove_country_modifier = ghavaanaj_herd_training_physical_01
		add_country_modifier = {
			name = ghavaanaj_herd_training_physical_02
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_training_physical_02 }
		remove_country_modifier = ghavaanaj_herd_training_physical_02
		add_country_modifier = {
			name = ghavaanaj_herd_training_physical_03
			duration = -1
		}
	}
	ghavaanaj_update_training_general = yes
}
ghavaanaj_increase_training_mental = { #Smart -> Steadfast
	if = {
		limit = { has_country_modifier = ghavaanaj_herd_training_mental_03 }
		remove_country_modifier = ghavaanaj_herd_training_mental_03
		add_country_modifier = {
			name = ghavaanaj_herd_training_mental_02
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_training_mental_02 }
		remove_country_modifier = ghavaanaj_herd_training_mental_02
		add_country_modifier = {
			name = ghavaanaj_herd_training_mental_01
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_training_mental_01 }
		remove_country_modifier = ghavaanaj_herd_training_mental_01
		add_country_modifier = {
			name = ghavaanaj_herd_training_mental_00
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_training_mental_00 }
		remove_country_modifier = ghavaanaj_herd_training_mental_00
		add_country_modifier = {
			name = ghavaanaj_herd_training_mental_11
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_training_mental_11 }
		remove_country_modifier = ghavaanaj_herd_training_mental_11
		add_country_modifier = {
			name = ghavaanaj_herd_training_mental_12
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_training_mental_12 }
		remove_country_modifier = ghavaanaj_herd_training_mental_12
		add_country_modifier = {
			name = ghavaanaj_herd_training_mental_13
			duration = -1
		}
	}
	ghavaanaj_update_training_general = yes
}
ghavaanaj_decrease_training_mental = { #Steadfast -> Smart
	if = {
		limit = { has_country_modifier = ghavaanaj_herd_training_mental_13 }
		remove_country_modifier = ghavaanaj_herd_training_mental_13
		add_country_modifier = {
			name = ghavaanaj_herd_training_mental_12
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_training_mental_12 }
		remove_country_modifier = ghavaanaj_herd_training_mental_12
		add_country_modifier = {
			name = ghavaanaj_herd_training_mental_11
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_training_mental_11 }
		remove_country_modifier = ghavaanaj_herd_training_mental_11
		add_country_modifier = {
			name = ghavaanaj_herd_training_mental_00
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_training_mental_00 }
		remove_country_modifier = ghavaanaj_herd_training_mental_00
		add_country_modifier = {
			name = ghavaanaj_herd_training_mental_01
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_training_mental_01 }
		remove_country_modifier = ghavaanaj_herd_training_mental_01
		add_country_modifier = {
			name = ghavaanaj_herd_training_mental_02
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = ghavaanaj_herd_training_mental_02 }
		remove_country_modifier = ghavaanaj_herd_training_mental_02
		add_country_modifier = {
			name = ghavaanaj_herd_training_mental_03
			duration = -1
		}
	}
	ghavaanaj_update_training_general = yes
}
sharaajaghal_games_set_ruler_participation = {
	[[elephant_racing]
	if = {
		limit = { has_ruler_flag = sharaajaghal_games_ruler_participating_elephant_racing }
		set_country_flag = sharaajaghal_games_ruler_participating
	}
	]
	[[elephant_archery]
	if = {
		limit = { has_ruler_flag = sharaajaghal_games_ruler_participating_elephant_archery }
		set_country_flag = sharaajaghal_games_ruler_participating
	}
	]
	[[elephant_jousting]
	if = {
		limit = { has_ruler_flag = sharaajaghal_games_ruler_participating_elephant_jousting }
		set_country_flag = sharaajaghal_games_ruler_participating
	}
	]
	[[horse_racing]
	if = {
		limit = { has_ruler_flag = sharaajaghal_games_ruler_participating_horse_racing }
		set_country_flag = sharaajaghal_games_ruler_participating
	}
	]
	[[horse_archery]
	if = {
		limit = { has_ruler_flag = sharaajaghal_games_ruler_participating_horse_archery }
		set_country_flag = sharaajaghal_games_ruler_participating
	}
	]
	[[horse_jousting]
	if = {
		limit = { has_ruler_flag = sharaajaghal_games_ruler_participating_horse_jousting }
		set_country_flag = sharaajaghal_games_ruler_participating
	}
	]
	[[duelling_staff]
	if = {
		limit = { has_ruler_flag = sharaajaghal_games_ruler_participating_duelling_staff }
		set_country_flag = sharaajaghal_games_ruler_participating
	}
	]
	[[duelling_sword]
	if = {
		limit = { has_ruler_flag = sharaajaghal_games_ruler_participating_duelling_sword }
		set_country_flag = sharaajaghal_games_ruler_participating
	}
	]
	[[archery]
	if = {
		limit = { has_ruler_flag = sharaajaghal_games_ruler_participating_archery }
		set_country_flag = sharaajaghal_games_ruler_participating
	}
	]
	[[javelin]
	if = {
		limit = { has_ruler_flag = sharaajaghal_games_ruler_participating_javelin }
		set_country_flag = sharaajaghal_games_ruler_participating
	}
	]
	[[distance_running]
	if = {
		limit = { has_ruler_flag = sharaajaghal_games_ruler_participating_distance_running }
		set_country_flag = sharaajaghal_games_ruler_participating
	}
	]
	[[sprint]
	if = {
		limit = { has_country_flag = sharaajaghal_games_ruler_participating_sprint }
		set_country_flag = sharaajaghal_games_ruler_participating
	}
	]
}
sharaajaghal_games_generate_participants = {
	every_known_country = {
		limit = { has_country_flag = sharaajaghal_games_joined }
		sharaajaghal_games_set_ruler_participation = { $game$ = yes }
	}
	if = {
		limit = { has_country_flag = sharaajaghal_games_joined }
		sharaajaghal_games_set_ruler_participation = { $game$ = yes }
	}

	if = {
		limit = { OR = { any_known_country = { has_country_flag = sharaajaghal_games_joined has_country_flag = sharaajaghal_games_ruler_participating NOT = { has_country_flag = sharaajaghal_games_participant_flag } } THIS = { has_country_flag = sharaajaghal_games_joined has_country_flag = sharaajaghal_games_ruler_participating NOT = { has_country_flag = sharaajaghal_games_participant_flag } } } }
		PREV = {
			random_country = {
				limit = { has_country_flag = sharaajaghal_games_joined has_country_flag = sharaajaghal_games_ruler_participating NOT = { has_country_flag = sharaajaghal_games_participant_flag } }
				save_event_target_as = sharaajaghal_games_participant_1
				set_country_flag = sharaajaghal_games_participant_flag
			}
		}
	}
	else_if = {
		limit = { OR = { any_known_country = { has_country_flag = sharaajaghal_games_joined NOT = { has_country_flag = sharaajaghal_games_participant_flag } } THIS = { has_country_flag = sharaajaghal_games_joined NOT = { has_country_flag = sharaajaghal_games_participant_flag } } } }
		PREV = {
			random_country = {
				limit = { has_country_flag = sharaajaghal_games_joined NOT = { has_country_flag = sharaajaghal_games_participant_flag } }
				save_event_target_as = sharaajaghal_games_participant_1
				set_country_flag = sharaajaghal_games_participant_flag
			}
		}
	}
	else = { REB = { save_event_target_as = sharaajaghal_games_participant_1 } }
	if = {
		limit = { OR = { any_known_country = { has_country_flag = sharaajaghal_games_joined has_country_flag = sharaajaghal_games_ruler_participating NOT = { has_country_flag = sharaajaghal_games_participant_flag } } THIS = { has_country_flag = sharaajaghal_games_joined has_country_flag = sharaajaghal_games_ruler_participating NOT = { has_country_flag = sharaajaghal_games_participant_flag } } } }
		PREV = {
			random_country = {
				limit = { has_country_flag = sharaajaghal_games_joined has_country_flag = sharaajaghal_games_ruler_participating NOT = { has_country_flag = sharaajaghal_games_participant_flag } }
				save_event_target_as = sharaajaghal_games_participant_2
				set_country_flag = sharaajaghal_games_participant_flag
			}
		}
	}
	else_if = {
		limit = { OR = { any_known_country = { has_country_flag = sharaajaghal_games_joined NOT = { has_country_flag = sharaajaghal_games_participant_flag } } THIS = { has_country_flag = sharaajaghal_games_joined NOT = { has_country_flag = sharaajaghal_games_participant_flag } } } }
		PREV = {
			random_country = {
				limit = { has_country_flag = sharaajaghal_games_joined NOT = { has_country_flag = sharaajaghal_games_participant_flag } }
				save_event_target_as = sharaajaghal_games_participant_2
				set_country_flag = sharaajaghal_games_participant_flag
			}
		}
	}
	else = { REB = { save_event_target_as = sharaajaghal_games_participant_2 } }
	if = {
		limit = { OR = { any_known_country = { has_country_flag = sharaajaghal_games_joined has_country_flag = sharaajaghal_games_ruler_participating NOT = { has_country_flag = sharaajaghal_games_participant_flag } } THIS = { has_country_flag = sharaajaghal_games_joined has_country_flag = sharaajaghal_games_ruler_participating NOT = { has_country_flag = sharaajaghal_games_participant_flag } } } }
		PREV = {
			random_country = {
				limit = { has_country_flag = sharaajaghal_games_joined has_country_flag = sharaajaghal_games_ruler_participating NOT = { has_country_flag = sharaajaghal_games_participant_flag } }
				save_event_target_as = sharaajaghal_games_participant_3
				set_country_flag = sharaajaghal_games_participant_flag
			}
		}
	}
	else_if = {
		limit = { OR = { any_known_country = { has_country_flag = sharaajaghal_games_joined NOT = { has_country_flag = sharaajaghal_games_participant_flag } } THIS = { has_country_flag = sharaajaghal_games_joined NOT = { has_country_flag = sharaajaghal_games_participant_flag } } } }
		PREV = {
			random_country = {
				limit = { has_country_flag = sharaajaghal_games_joined NOT = { has_country_flag = sharaajaghal_games_participant_flag } }
				save_event_target_as = sharaajaghal_games_participant_3
				set_country_flag = sharaajaghal_games_participant_flag
			}
		}
	}
	else = { REB = { save_event_target_as = sharaajaghal_games_participant_3 } }
	# if = = {
		# limit = { OR = { any_known_country = { has_country_flag = sharaajaghal_games_joined has_country_flag = sharaajaghal_games_ruler_participating NOT = { has_country_flag = sharaajaghal_games_participant_flag } } THIS = { has_country_flag = sharaajaghal_games_joined has_country_flag = sharaajaghal_games_ruler_participating NOT = { has_country_flag = sharaajaghal_games_participant_flag } } } }
		# random_country = {
			# limit = { has_country_flag = sharaajaghal_games_joined NOT = { has_country_flag = sharaajaghal_games_participant_flag } }
			# save_event_target_as = sharaajaghal_games_participant_4
			# set_country_flag = sharaajaghal_games_participant_flag
		# }
	# }
	# else_if {
		# limit = { OR = { any_known_country = { has_country_flag = sharaajaghal_games_joined NOT = { has_country_flag = sharaajaghal_games_participant_flag } } THIS = { has_country_flag = sharaajaghal_games_joined NOT = { has_country_flag = sharaajaghal_games_participant_flag } } } }
		# random_country = {
			# limit = { has_country_flag = sharaajaghal_games_joined NOT = { has_country_flag = sharaajaghal_games_participant_flag } }
			# save_event_target_as = sharaajaghal_games_participant_4
			# set_country_flag = sharaajaghal_games_participant_flag
			# sharaajaghal_games_set_ruler_participation = yes
		# }
	# }
	# else = { REB = { save_event_target_as = sharaajaghal_games_participant_4 } }
	REB = { save_event_target_as = sharaajaghal_games_participant_4 }
	
	every_known_country = {
		limit = { NOT = { tag = event_target:sharaajaghal_games_participant_1 tag = event_target:sharaajaghal_games_participant_2 tag = event_target:sharaajaghal_games_participant_3 } }
		clr_country_flag = sharaajaghal_games_ruler_participating
	}
	if = {
		limit = { NOT = { tag = event_target:sharaajaghal_games_participant_1 tag = event_target:sharaajaghal_games_participant_2 tag = event_target:sharaajaghal_games_participant_3 } }
		clr_country_flag = sharaajaghal_games_ruler_participating
	}
}
sharaajaghal_games_set_current_game_type = {
	[[elephant_racing]
	set_province_flag = sharaajaghal_games_type_elephant
	set_province_flag = sharaajaghal_games_type_mounted
	]
	[[elephant_archery]
	set_province_flag = sharaajaghal_games_type_elephant
	set_province_flag = sharaajaghal_games_type_mounted
	set_province_flag = sharaajaghal_games_type_archery
	]
	[[elephant_jousting]
	set_province_flag = sharaajaghal_games_type_elephant
	set_province_flag = sharaajaghal_games_type_mounted
	set_province_flag = sharaajaghal_games_type_combat
	]
	[[horse_racing]
	set_province_flag = sharaajaghal_games_type_horse
	set_province_flag = sharaajaghal_games_type_mounted
	]
	[[horse_archery]
	set_province_flag = sharaajaghal_games_type_horse
	set_province_flag = sharaajaghal_games_type_mounted
	set_province_flag = sharaajaghal_games_type_archery
	]
	[[horse_jousting]
	set_province_flag = sharaajaghal_games_type_horse
	set_province_flag = sharaajaghal_games_type_mounted
	set_province_flag = sharaajaghal_games_type_combat
	]
	[[duelling_staff]
	set_province_flag = sharaajaghal_games_type_combat
	]
	[[duelling_sword]
	set_province_flag = sharaajaghal_games_type_combat
	]
	[[archery]
	set_province_flag = sharaajaghal_games_type_archery
	]
	[[javelin]
	]
	[[distance_running]
	set_province_flag = sharaajaghal_games_type_running
	]
	[[sprint]
	set_province_flag = sharaajaghal_games_type_running
	]
}
sharaajaghal_games_run_game = {
	owner = { sharaajaghal_games_generate_participants = { game = $game$ } }
	sharaajaghal_games_set_current_game_type = { $game$ = yes }
	random_list = {
		1 = {
			modifier = {
				factor = 0.8
				event_target:sharaajaghal_games_participant_1 = {
					tag = REB
				}
			}
			modifier = {
				factor = 1.5
				has_province_flag = sharaajaghal_games_type_elephant
				event_target:sharaajaghal_games_participant_1 = {
					NOT = { tag = REB }
					culture = ghavaanaj
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_horse
				event_target:sharaajaghal_games_participant_1 = {
					NOT = { tag = REB }
					OR = {
						culture_group = bulwari
						culture = desert_elf
					}
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_archery
				event_target:sharaajaghal_games_participant_1 = {
					NOT = { tag = REB }
					culture_group = elven
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_combat
				event_target:sharaajaghal_games_participant_1 = {
					NOT = { tag = REB }
					OR = {
						culture_group = harimari
						culture_group = orcish
						culture_group = dwarven
					}
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_running
				event_target:sharaajaghal_games_participant_1 = {
					NOT = { tag = REB }
					culture_group = harimari
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_mounted
				event_target:sharaajaghal_games_participant_1 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = cavalry_power value = 0.2 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_mounted
				event_target:sharaajaghal_games_participant_1 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = cavalry_power value = 0.4 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_mounted
				event_target:sharaajaghal_games_participant_1 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = cavalry_power value = 0.6 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_mounted
				event_target:sharaajaghal_games_participant_1 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = cavalry_power value = 0.8 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_running
				event_target:sharaajaghal_games_participant_1 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = movement_speed value = 0.1 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_running
				event_target:sharaajaghal_games_participant_1 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = movement_speed value = 0.25 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_running
				event_target:sharaajaghal_games_participant_1 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = movement_speed value = 0.4 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_archery
				event_target:sharaajaghal_games_participant_1 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = fire_damage value = 0.1 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_archery
				event_target:sharaajaghal_games_participant_1 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = fire_damage value = 0.2 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_archery
				event_target:sharaajaghal_games_participant_1 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = fire_damage value = 0.3 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_combat
				event_target:sharaajaghal_games_participant_1 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = shock_damage value = 0.1 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_combat
				event_target:sharaajaghal_games_participant_1 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = shock_damage value = 0.2 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_combat
				event_target:sharaajaghal_games_participant_1 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = shock_damage value = 0.3 }
				}
			}
			modifier = {
				factor = 1.2
				event_target:sharaajaghal_games_participant_1 = {
					NOT = { tag = REB }
					NOT = { has_country_flag = sharaajaghal_games_ruler_participating }
					has_country_flag = sharaajaghal_games_best_athletes_sent
					army_tradition = 40
				}
			}
			modifier = {
				factor = 1.2
				event_target:sharaajaghal_games_participant_1 = {
					NOT = { tag = REB }
					NOT = { has_country_flag = sharaajaghal_games_ruler_participating }
					has_country_flag = sharaajaghal_games_best_athletes_sent
					army_tradition = 60
				}
			}
			modifier = {
				factor = 1.2
				event_target:sharaajaghal_games_participant_1 = {
					NOT = { tag = REB }
					NOT = { has_country_flag = sharaajaghal_games_ruler_participating }
					has_country_flag = sharaajaghal_games_best_athletes_sent
					army_tradition = 80
				}
			}
			modifier = {
				factor = 1.2
				event_target:sharaajaghal_games_participant_1 = {
					NOT = { tag = REB }
					has_country_flag = sharaajaghal_games_anyone_can_go
					total_development = 300
				}
			}
			modifier = {
				factor = 1.2
				event_target:sharaajaghal_games_participant_1 = {
					NOT = { tag = REB }
					has_country_flag = sharaajaghal_games_anyone_can_go
					total_development = 1000
				}
			}
			modifier = {
				factor = 1.2
				event_target:sharaajaghal_games_participant_1 = {
					NOT = { tag = REB }
					has_country_flag = sharaajaghal_games_anyone_can_go
					total_development = 4000
				}
			}
			modifier = {
				factor = 1.2
				event_target:sharaajaghal_games_participant_1 = {
					NOT = { tag = REB }
					has_country_flag = sharaajaghal_games_ruler_participating
					ruler_age = 15
				}
			}
			modifier = {
				factor = 1.5
				event_target:sharaajaghal_games_participant_1 = {
					NOT = { tag = REB }
					has_country_flag = sharaajaghal_games_ruler_participating
					ruler_age = 20
				}
			}
			modifier = {
				factor = 0.8
				event_target:sharaajaghal_games_participant_1 = {
					NOT = { tag = REB }
					has_country_flag = sharaajaghal_games_ruler_participating
					ruler_age = 30
				}
			}
			modifier = {
				factor = 0.7
				event_target:sharaajaghal_games_participant_1 = {
					NOT = { tag = REB }
					has_country_flag = sharaajaghal_games_ruler_participating
					ruler_age = 35
				}
			}
			modifier = {
				factor = 0.6
				event_target:sharaajaghal_games_participant_1 = {
					NOT = { tag = REB }
					has_country_flag = sharaajaghal_games_ruler_participating
					ruler_age = 40
				}
			}
			modifier = {
				factor = 0.5
				event_target:sharaajaghal_games_participant_1 = {
					NOT = { tag = REB }
					has_country_flag = sharaajaghal_games_ruler_participating
					ruler_age = 45
				}
			}
			modifier = {
				factor = 0.8
				event_target:sharaajaghal_games_participant_1 = {
					NOT = { tag = REB }
					has_country_flag = sharaajaghal_games_ruler_participating
					OR = {
						ruler_has_personality = drunkard_personality
						ruler_has_personality = craven_personality
					}
				}
			}
			modifier = {
				factor = 1.2
				event_target:sharaajaghal_games_participant_1 = {
					NOT = { tag = REB }
					has_country_flag = sharaajaghal_games_ruler_participating
					OR = {
						ruler_has_personality = bold_fighter_personality
						ruler_has_personality = industrious_personality
						ruler_has_personality = inspiring_leader_personality
					}
				}
			}
			event_target:sharaajaghal_games_participant_1 = { save_global_event_target_as = sharaajaghal_games_$game$_winner }
		}
		1 = {
			modifier = {
				factor = 0.8
				event_target:sharaajaghal_games_participant_2 = {
					tag = REB
				}
			}
			modifier = {
				factor = 1.5
				has_province_flag = sharaajaghal_games_type_elephant
				event_target:sharaajaghal_games_participant_2 = {
					NOT = { tag = REB }
					culture = ghavaanaj
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_horse
				event_target:sharaajaghal_games_participant_2 = {
					NOT = { tag = REB }
					OR = {
						culture_group = bulwari
						culture = desert_elf
					}
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_archery
				event_target:sharaajaghal_games_participant_2 = {
					NOT = { tag = REB }
					culture_group = elven
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_combat
				event_target:sharaajaghal_games_participant_2 = {
					NOT = { tag = REB }
					OR = {
						culture_group = harimari
						culture_group = orcish
						culture_group = dwarven
					}
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_running
				event_target:sharaajaghal_games_participant_2 = {
					NOT = { tag = REB }
					culture_group = harimari
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_mounted
				event_target:sharaajaghal_games_participant_2 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = cavalry_power value = 0.2 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_mounted
				event_target:sharaajaghal_games_participant_2 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = cavalry_power value = 0.4 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_mounted
				event_target:sharaajaghal_games_participant_2 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = cavalry_power value = 0.6 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_mounted
				event_target:sharaajaghal_games_participant_2 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = cavalry_power value = 0.8 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_running
				event_target:sharaajaghal_games_participant_2 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = movement_speed value = 0.1 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_running
				event_target:sharaajaghal_games_participant_2 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = movement_speed value = 0.25 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_running
				event_target:sharaajaghal_games_participant_2 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = movement_speed value = 0.4 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_archery
				event_target:sharaajaghal_games_participant_2 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = fire_damage value = 0.1 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_archery
				event_target:sharaajaghal_games_participant_2 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = fire_damage value = 0.2 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_archery
				event_target:sharaajaghal_games_participant_2 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = fire_damage value = 0.3 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_combat
				event_target:sharaajaghal_games_participant_2 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = shock_damage value = 0.1 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_combat
				event_target:sharaajaghal_games_participant_2 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = shock_damage value = 0.2 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_combat
				event_target:sharaajaghal_games_participant_2 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = shock_damage value = 0.3 }
				}
			}
			modifier = {
				factor = 1.2
				event_target:sharaajaghal_games_participant_2 = {
					NOT = { tag = REB }
					NOT = { has_country_flag = sharaajaghal_games_ruler_participating }
					has_country_flag = sharaajaghal_games_best_athletes_sent
					army_tradition = 40
				}
			}
			modifier = {
				factor = 1.2
				event_target:sharaajaghal_games_participant_2 = {
					NOT = { tag = REB }
					NOT = { has_country_flag = sharaajaghal_games_ruler_participating }
					has_country_flag = sharaajaghal_games_best_athletes_sent
					army_tradition = 60
				}
			}
			modifier = {
				factor = 1.2
				event_target:sharaajaghal_games_participant_2 = {
					NOT = { tag = REB }
					NOT = { has_country_flag = sharaajaghal_games_ruler_participating }
					has_country_flag = sharaajaghal_games_best_athletes_sent
					army_tradition = 80
				}
			}
			modifier = {
				factor = 1.2
				event_target:sharaajaghal_games_participant_2 = {
					NOT = { tag = REB }
					has_country_flag = sharaajaghal_games_anyone_can_go
					total_development = 300
				}
			}
			modifier = {
				factor = 1.2
				event_target:sharaajaghal_games_participant_2 = {
					NOT = { tag = REB }
					has_country_flag = sharaajaghal_games_anyone_can_go
					total_development = 1000
				}
			}
			modifier = {
				factor = 1.2
				event_target:sharaajaghal_games_participant_2 = {
					NOT = { tag = REB }
					has_country_flag = sharaajaghal_games_anyone_can_go
					total_development = 4000
				}
			}
			modifier = {
				factor = 1.2
				event_target:sharaajaghal_games_participant_2 = {
					NOT = { tag = REB }
					has_country_flag = sharaajaghal_games_ruler_participating
					ruler_age = 15
				}
			}
			modifier = {
				factor = 1.5
				event_target:sharaajaghal_games_participant_2 = {
					NOT = { tag = REB }
					has_country_flag = sharaajaghal_games_ruler_participating
					ruler_age = 20
				}
			}
			modifier = {
				factor = 0.8
				event_target:sharaajaghal_games_participant_2 = {
					NOT = { tag = REB }
					has_country_flag = sharaajaghal_games_ruler_participating
					ruler_age = 30
				}
			}
			modifier = {
				factor = 0.7
				event_target:sharaajaghal_games_participant_2 = {
					NOT = { tag = REB }
					has_country_flag = sharaajaghal_games_ruler_participating
					ruler_age = 35
				}
			}
			modifier = {
				factor = 0.6
				event_target:sharaajaghal_games_participant_2 = {
					NOT = { tag = REB }
					has_country_flag = sharaajaghal_games_ruler_participating
					ruler_age = 40
				}
			}
			modifier = {
				factor = 0.5
				event_target:sharaajaghal_games_participant_2 = {
					NOT = { tag = REB }
					has_country_flag = sharaajaghal_games_ruler_participating
					ruler_age = 45
				}
			}
			modifier = {
				factor = 0.8
				event_target:sharaajaghal_games_participant_2 = {
					NOT = { tag = REB }
					has_country_flag = sharaajaghal_games_ruler_participating
					OR = {
						ruler_has_personality = drunkard_personality
						ruler_has_personality = craven_personality
					}
				}
			}
			modifier = {
				factor = 1.2
				event_target:sharaajaghal_games_participant_2 = {
					NOT = { tag = REB }
					has_country_flag = sharaajaghal_games_ruler_participating
					OR = {
						ruler_has_personality = bold_fighter_personality
						ruler_has_personality = industrious_personality
						ruler_has_personality = inspiring_leader_personality
					}
				}
			}
			event_target:sharaajaghal_games_participant_2 = { save_global_event_target_as = sharaajaghal_games_$game$_winner }
		}
		1 = {
			modifier = {
				factor = 0.8
				event_target:sharaajaghal_games_participant_3 = {
					tag = REB
				}
			}
			modifier = {
				factor = 1.5
				has_province_flag = sharaajaghal_games_type_elephant
				event_target:sharaajaghal_games_participant_3 = {
					NOT = { tag = REB }
					culture = ghavaanaj
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_horse
				event_target:sharaajaghal_games_participant_3 = {
					NOT = { tag = REB }
					OR = {
						culture_group = bulwari
						culture = desert_elf
					}
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_archery
				event_target:sharaajaghal_games_participant_3 = {
					NOT = { tag = REB }
					culture_group = elven
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_combat
				event_target:sharaajaghal_games_participant_3 = {
					NOT = { tag = REB }
					OR = {
						culture_group = harimari
						culture_group = orcish
						culture_group = dwarven
					}
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_running
				event_target:sharaajaghal_games_participant_3 = {
					NOT = { tag = REB }
					culture_group = harimari
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_mounted
				event_target:sharaajaghal_games_participant_3 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = cavalry_power value = 0.2 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_mounted
				event_target:sharaajaghal_games_participant_3 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = cavalry_power value = 0.4 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_mounted
				event_target:sharaajaghal_games_participant_3 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = cavalry_power value = 0.6 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_mounted
				event_target:sharaajaghal_games_participant_3 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = cavalry_power value = 0.8 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_running
				event_target:sharaajaghal_games_participant_3 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = movement_speed value = 0.1 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_running
				event_target:sharaajaghal_games_participant_3 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = movement_speed value = 0.25 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_running
				event_target:sharaajaghal_games_participant_3 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = movement_speed value = 0.4 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_archery
				event_target:sharaajaghal_games_participant_3 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = fire_damage value = 0.1 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_archery
				event_target:sharaajaghal_games_participant_3 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = fire_damage value = 0.2 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_archery
				event_target:sharaajaghal_games_participant_3 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = fire_damage value = 0.3 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_combat
				event_target:sharaajaghal_games_participant_3 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = shock_damage value = 0.1 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_combat
				event_target:sharaajaghal_games_participant_3 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = shock_damage value = 0.2 }
				}
			}
			modifier = {
				factor = 1.2
				has_province_flag = sharaajaghal_games_type_combat
				event_target:sharaajaghal_games_participant_3 = {
					NOT = { tag = REB }
					has_global_modifier_value = { which = shock_damage value = 0.3 }
				}
			}
			modifier = {
				factor = 1.2
				event_target:sharaajaghal_games_participant_3 = {
					NOT = { tag = REB }
					NOT = { has_country_flag = sharaajaghal_games_ruler_participating }
					has_country_flag = sharaajaghal_games_best_athletes_sent
					army_tradition = 40
				}
			}
			modifier = {
				factor = 1.2
				event_target:sharaajaghal_games_participant_3 = {
					NOT = { tag = REB }
					NOT = { has_country_flag = sharaajaghal_games_ruler_participating }
					has_country_flag = sharaajaghal_games_best_athletes_sent
					army_tradition = 60
				}
			}
			modifier = {
				factor = 1.2
				event_target:sharaajaghal_games_participant_3 = {
					NOT = { tag = REB }
					NOT = { has_country_flag = sharaajaghal_games_ruler_participating }
					has_country_flag = sharaajaghal_games_best_athletes_sent
					army_tradition = 80
				}
			}
			modifier = {
				factor = 1.2
				event_target:sharaajaghal_games_participant_3 = {
					NOT = { tag = REB }
					has_country_flag = sharaajaghal_games_anyone_can_go
					total_development = 300
				}
			}
			modifier = {
				factor = 1.2
				event_target:sharaajaghal_games_participant_3 = {
					NOT = { tag = REB }
					has_country_flag = sharaajaghal_games_anyone_can_go
					total_development = 1000
				}
			}
			modifier = {
				factor = 1.2
				event_target:sharaajaghal_games_participant_3 = {
					NOT = { tag = REB }
					has_country_flag = sharaajaghal_games_anyone_can_go
					total_development = 4000
				}
			}
			modifier = {
				factor = 1.2
				event_target:sharaajaghal_games_participant_3 = {
					NOT = { tag = REB }
					has_country_flag = sharaajaghal_games_ruler_participating
					ruler_age = 15
				}
			}
			modifier = {
				factor = 1.5
				event_target:sharaajaghal_games_participant_3 = {
					NOT = { tag = REB }
					has_country_flag = sharaajaghal_games_ruler_participating
					ruler_age = 20
				}
			}
			modifier = {
				factor = 0.8
				event_target:sharaajaghal_games_participant_3 = {
					NOT = { tag = REB }
					has_country_flag = sharaajaghal_games_ruler_participating
					ruler_age = 30
				}
			}
			modifier = {
				factor = 0.7
				event_target:sharaajaghal_games_participant_3 = {
					NOT = { tag = REB }
					has_country_flag = sharaajaghal_games_ruler_participating
					ruler_age = 35
				}
			}
			modifier = {
				factor = 0.6
				event_target:sharaajaghal_games_participant_3 = {
					NOT = { tag = REB }
					has_country_flag = sharaajaghal_games_ruler_participating
					ruler_age = 40
				}
			}
			modifier = {
				factor = 0.5
				event_target:sharaajaghal_games_participant_3 = {
					NOT = { tag = REB }
					has_country_flag = sharaajaghal_games_ruler_participating
					ruler_age = 45
				}
			}
			modifier = {
				factor = 0.8
				event_target:sharaajaghal_games_participant_3 = {
					NOT = { tag = REB }
					has_country_flag = sharaajaghal_games_ruler_participating
					OR = {
						ruler_has_personality = drunkard_personality
						ruler_has_personality = craven_personality
					}
				}
			}
			modifier = {
				factor = 1.2
				event_target:sharaajaghal_games_participant_3 = {
					NOT = { tag = REB }
					has_country_flag = sharaajaghal_games_ruler_participating
					OR = {
						ruler_has_personality = bold_fighter_personality
						ruler_has_personality = industrious_personality
						ruler_has_personality = inspiring_leader_personality
					}
				}
			}
			event_target:sharaajaghal_games_participant_3 = { save_global_event_target_as = sharaajaghal_games_$game$_winner }
		}
		1 = {
			modifier = {
				factor = 0.8
				event_target:sharaajaghal_games_participant_4 = {
					tag = REB
				}
			}
			event_target:sharaajaghal_games_participant_4 = { save_global_event_target_as = sharaajaghal_games_$game$_winner }
		}
	}
	event_target:sharaajaghal_games_participant_1  = {
		clr_country_flag = sharaajaghal_games_participant_flag
		if = {
			limit = { has_country_flag = sharaajaghal_games_ruler_participating }
			clr_country_flag = sharaajaghal_games_ruler_participating
			# set_ruler_flag = sharaajaghal_games_ruler_injured_flag
		}
	}
	event_target:sharaajaghal_games_participant_2  = {
		clr_country_flag = sharaajaghal_games_participant_flag
		if = {
			limit = { has_country_flag = sharaajaghal_games_ruler_participating }
			clr_country_flag = sharaajaghal_games_ruler_participating
			# set_ruler_flag = sharaajaghal_games_ruler_injured_flag
		}
	}
	event_target:sharaajaghal_games_participant_3  = {
		clr_country_flag = sharaajaghal_games_participant_flag
		if = {
			limit = { has_country_flag = sharaajaghal_games_ruler_participating }
			clr_country_flag = sharaajaghal_games_ruler_participating
			# set_ruler_flag = sharaajaghal_games_ruler_injured_flag
		}
	}
	event_target:sharaajaghal_games_participant_4  = {
		clr_country_flag = sharaajaghal_games_participant_flag
		if = {
			limit = { has_country_flag = sharaajaghal_games_ruler_participating }
			clr_country_flag = sharaajaghal_games_ruler_participating
			# set_ruler_flag = sharaajaghal_games_ruler_injured_flag
		}
	}
	clr_province_flag = sharaajaghal_games_type_elephant
	clr_province_flag = sharaajaghal_games_type_horse
	clr_province_flag = sharaajaghal_games_type_mounted
	clr_province_flag = sharaajaghal_games_type_archery
	clr_province_flag = sharaajaghal_games_type_combat
	clr_province_flag = sharaajaghal_games_type_running
}

#################
##Black Demesne##
#################
increase_acolyte_influence_01 = {
	custom_tooltip = increase_acolyte_influence_01_tt
	hidden_effect = {
		change_variable = { aInfluence = 0.1 }
		REB = { change_variable = { aInfluence = 0.1 } }
	}
}
increase_acolyte_influence_05 = {
	custom_tooltip = increase_acolyte_influence_05_tt
	hidden_effect = {
		change_variable = { aInfluence = 0.5 }
		REB = { change_variable = { aInfluence = 0.5 } }
	}
}
increase_acolyte_influence_1 = {
	custom_tooltip = increase_acolyte_influence_1_tt
	hidden_effect = {
		change_variable = { aInfluence = 1 }
		REB = { change_variable = { aInfluence = 1 } }
	}
}
increase_acolyte_influence_2 = {
	custom_tooltip = increase_acolyte_influence_2_tt
	hidden_effect = {
		change_variable = { aInfluence = 2 }
		REB = { change_variable = { aInfluence = 2 } }
	}
}
increase_acolyte_influence_5 = {
	custom_tooltip = increase_acolyte_influence_5_tt
	hidden_effect = {
		change_variable = { aInfluence = 5 }
		REB = { change_variable = { aInfluence = 5 } }
	}
}
increase_acolyte_influence_10 = {
	custom_tooltip = increase_acolyte_influence_1_tt
	hidden_effect = {
		change_variable = { aInfluence = 10 }
		REB = { change_variable = { aInfluence = 10 } }
	}
}
increase_acolyte_influence_15 = {
	custom_tooltip = increase_acolyte_influence_15_tt
	hidden_effect = {
		change_variable = { aInfluence = 15 }
		REB = { change_variable = { aInfluence = 15 } }
	}
}
increase_acolyte_influence_20 = {
	custom_tooltip = increase_acolyte_influence_20_tt
	hidden_effect = {
		change_variable = { aInfluence = 20 }
		REB = { change_variable = { aInfluence = 20 } }
	}
}
decrease_acolyte_influence_01 = {
	custom_tooltip = decrease_acolyte_influence_01_tt
	hidden_effect = {
		subtract_variable = { aInfluence = 0.1 }
		REB = { subtract_variable = { aInfluence = 0.1 } }
		if = {
			limit = { NOT = { check_variable = { aInfluence = 0 } } }
			set_variable = { aInfluence = 0 }
		}
	}
}
decrease_acolyte_influence_05 = {
	custom_tooltip = decrease_acolyte_influence_05_tt
	hidden_effect = {
		subtract_variable = { aInfluence = 0.5 }
		REB = { subtract_variable = { aInfluence = 0.5 } }
		if = {
			limit = { NOT = { check_variable = { aInfluence = 0 } } }
			set_variable = { aInfluence = 0 }
		}
	}
}
decrease_acolyte_influence_1 = {
	custom_tooltip = decrease_acolyte_influence_1_tt
	hidden_effect = {
		subtract_variable = { aInfluence = 1 }
		REB = { subtract_variable = { aInfluence = 1 } }
		if = {
			limit = { NOT = { check_variable = { aInfluence = 0 } } }
			set_variable = { aInfluence = 0 }
		}
	}
}
decrease_acolyte_influence_2 = {
	custom_tooltip = decrease_acolyte_influence_2_tt
	hidden_effect = {
		subtract_variable = { aInfluence = 2 }
		REB = { subtract_variable = { aInfluence = 2 } }
		if = {
			limit = { NOT = { check_variable = { aInfluence = 0 } } }
			set_variable = { aInfluence = 0 }
		}
	}
}
decrease_acolyte_influence_5 = {
	custom_tooltip = decrease_acolyte_influence_5_tt
	hidden_effect = {
		subtract_variable = { aInfluence = 5 }
		REB = { subtract_variable = { aInfluence = 5 } }
		if = {
			limit = { NOT = { check_variable = { aInfluence = 0 } } }
			set_variable = { aInfluence = 0 }
		}
	}
}
decrease_acolyte_influence_10 = {
	custom_tooltip = decrease_acolyte_influence_1_tt
	hidden_effect = {
		subtract_variable = { aInfluence = 10 }
		REB = { subtract_variable = { aInfluence = 10 } }
		if = {
			limit = { NOT = { check_variable = { aInfluence = 0 } } }
			set_variable = { aInfluence = 0 }
		}
	}
}
decrease_acolyte_influence_15 = {
	custom_tooltip = decrease_acolyte_influence_15_tt
	hidden_effect = {
		subtract_variable = { aInfluence = 15 }
		REB = { subtract_variable = { aInfluence = 15 } }
		if = {
			limit = { NOT = { check_variable = { aInfluence = 0 } } }
			set_variable = { aInfluence = 0 }
		}
	}
}
decrease_acolyte_influence_20 = {
	custom_tooltip = decrease_acolyte_influence_20_tt
	hidden_effect = {
		subtract_variable = { aInfluence = 20 }
		REB = { subtract_variable = { aInfluence = 20 } }
		if = {
			limit = { NOT = { check_variable = { aInfluence = 0 } } }
			set_variable = { aInfluence = 0 }
		}
	}
}
acolytes_land_distribution_effect = {
	if = {
		limit = { Z75 = { exists = yes is_subject_of_type = acolyte_dominion is_subject_of = Z99 } }
		REB = {
			Z75 = {
				set_variable = { which = nbProvBlack which = PREV } #It's in REB scope so i can use PREV because which = REB doesn't work because you know why
				set_variable = { which = temp which = percInfluence }
				divide_variable = { temp = 100 }
				multiply_variable = { which = nbProvBlack which = temp }
				while = {
					limit = { check_variable = { nbProvBlack = 0 } }
					subtract_variable = { nbProvBlack = 1 }
					event_target:country = {
						random_owned_province = {
							cede_province = Z75
							remove_loot = { who = Z75 amount = 100 }
						}
					}
				}
			}
		}
	}
	if = {
		limit = { Z76 = { exists = yes is_subject_of_type = acolyte_dominion is_subject_of = Z99 } }
		REB = {
			Z76 = {
				set_variable = { which = nbProvBlack which = PREV }
				set_variable = { which = temp which = percInfluence }
				divide_variable = { temp = 100 }
				multiply_variable = { which = nbProvBlack which = temp }
				while = {
					limit = { check_variable = { nbProvBlack = 0 } }
					subtract_variable = { nbProvBlack = 1 }
					event_target:country = {
						random_owned_province = {
							cede_province = Z76
							remove_loot = { who = Z76 amount = 100 }
						}
					}
				}
			}
		}
	}
	if = {
		limit = { Z77 = { exists = yes is_subject_of_type = acolyte_dominion is_subject_of = Z99 } }
		REB = {
			Z77 = {
				set_variable = { which = nbProvBlack which = PREV }
				set_variable = { which = temp which = percInfluence }
				divide_variable = { temp = 100 }
				multiply_variable = { which = nbProvBlack which = temp }
				while = {
					limit = { check_variable = { nbProvBlack = 0 } }
					subtract_variable = { nbProvBlack = 1 }
					event_target:country = {
						random_owned_province = {
							cede_province = Z77
							remove_loot = { who = Z77 amount = 100 }
						}
					}
				}
			}
		}
	}
	if = {
		limit = { Z78 = { exists = yes is_subject_of_type = acolyte_dominion is_subject_of = Z99 } }
		REB = {
			Z78 = {
				set_variable = { which = nbProvBlack which = PREV }
				set_variable = { which = temp which = percInfluence }
				divide_variable = { temp = 100 }
				multiply_variable = { which = nbProvBlack which = temp }
				while = {
					limit = { check_variable = { nbProvBlack = 0 } }
					subtract_variable = { nbProvBlack = 1 }
					event_target:country = {
						random_owned_province = {
							cede_province = Z78
							remove_loot = { who = Z78 amount = 100 }
						}
					}
				}
			}
		}
	}
	if = {
		limit = { Z79 = { exists = yes is_subject_of_type = acolyte_dominion is_subject_of = Z99 } }
		REB = {
			Z79 = {
				set_variable = { which = nbProvBlack which = PREV }
				set_variable = { which = temp which = percInfluence }
				divide_variable = { temp = 100 }
				multiply_variable = { which = nbProvBlack which = temp }
				while = {
					limit = { check_variable = { nbProvBlack = 0 } }
					subtract_variable = { nbProvBlack = 1 }
					event_target:country = {
						random_owned_province = {
							cede_province = Z79
							remove_loot = { who = Z79 amount = 100 }
						}
					}
				}
			}
		}
	}
	if = {
		limit = { Z80 = { exists = yes is_subject_of_type = acolyte_dominion is_subject_of = Z99 } }
		REB = {
			Z80 = {
				set_variable = { which = nbProvBlack which = PREV }
				set_variable = { which = temp which = percInfluence }
				divide_variable = { temp = 100 }
				multiply_variable = { which = nbProvBlack which = temp }
				while = {
					limit = { check_variable = { nbProvBlack = 0 } }
					subtract_variable = { nbProvBlack = 1 }
					event_target:country = {
						random_owned_province = {
							cede_province = Z80
							remove_loot = { who = Z80 amount = 100 }
						}
					}
				}
			}
		}
	}
	if = {
		limit = { Z81 = { exists = yes is_subject_of_type = acolyte_dominion is_subject_of = Z99 } }
		REB = {
			Z81 = {
				set_variable = { which = nbProvBlack which = PREV }
				set_variable = { which = temp which = percInfluence }
				divide_variable = { temp = 100 }
				multiply_variable = { which = nbProvBlack which = temp }
				while = {
					limit = { check_variable = { nbProvBlack = 0 } }
					subtract_variable = { nbProvBlack = 1 }
					event_target:country = {
						random_owned_province = {
							cede_province = Z81
							remove_loot = { who = Z81 amount = 100 }
						}
					}
				}
			}
		}
	}
}
acolytes_land_distribution_with_core_effect = {
	if = {
		limit = { Z75 = { exists = yes is_subject_of_type = acolyte_dominion is_subject_of = Z99 event_target:country = { NOT = { tag = PREV } } } }
		REB = {
			Z75 = {
				set_variable = { which = nbProvBlack which = PREV } #It's in REB scope so i can use PREV because which = REB doesn't work because you know why
				set_variable = { which = temp which = percInfluence }
				divide_variable = { temp = 100 }
				multiply_variable = { which = nbProvBlack which = temp }
				while = {
					limit = { check_variable = { nbProvBlack = 0 } }
					subtract_variable = { nbProvBlack = 1 }
					event_target:country = {
						random_owned_province = {
							cede_province = Z75
							add_core = Z75
							remove_loot = { who = Z75 amount = 100 }
						}
					}
				}
			}
		}
	}
	if = {
		limit = { Z76 = { exists = yes is_subject_of_type = acolyte_dominion is_subject_of = Z99 event_target:country = { NOT = { tag = PREV } } } }
		REB = {
			Z76 = {
				set_variable = { which = nbProvBlack which = PREV }
				set_variable = { which = temp which = percInfluence }
				divide_variable = { temp = 100 }
				multiply_variable = { which = nbProvBlack which = temp }
				while = {
					limit = { check_variable = { nbProvBlack = 0 } }
					subtract_variable = { nbProvBlack = 1 }
					event_target:country = {
						random_owned_province = {
							cede_province = Z76
							add_core = Z76
							remove_loot = { who = Z76 amount = 100 }
						}
					}
				}
			}
		}
	}
	if = {
		limit = { Z77 = { exists = yes is_subject_of_type = acolyte_dominion is_subject_of = Z99 event_target:country = { NOT = { tag = PREV } } } }
		REB = {
			Z77 = {
				set_variable = { which = nbProvBlack which = PREV }
				set_variable = { which = temp which = percInfluence }
				divide_variable = { temp = 100 }
				multiply_variable = { which = nbProvBlack which = temp }
				while = {
					limit = { check_variable = { nbProvBlack = 0 } }
					subtract_variable = { nbProvBlack = 1 }
					event_target:country = {
						random_owned_province = {
							cede_province = Z77
							add_core = Z77
							remove_loot = { who = Z77 amount = 100 }
						}
					}
				}
			}
		}
	}
	if = {
		limit = { Z78 = { exists = yes is_subject_of_type = acolyte_dominion is_subject_of = Z99 event_target:country = { NOT = { tag = PREV } } } }
		REB = {
			Z78 = {
				set_variable = { which = nbProvBlack which = PREV }
				set_variable = { which = temp which = percInfluence }
				divide_variable = { temp = 100 }
				multiply_variable = { which = nbProvBlack which = temp }
				while = {
					limit = { check_variable = { nbProvBlack = 0 } }
					subtract_variable = { nbProvBlack = 1 }
					event_target:country = {
						random_owned_province = {
							cede_province = Z78
							add_core = Z78
							remove_loot = { who = Z78 amount = 100 }
						}
					}
				}
			}
		}
	}
	if = {
		limit = { Z79 = { exists = yes is_subject_of_type = acolyte_dominion is_subject_of = Z99 event_target:country = { NOT = { tag = PREV } } } }
		REB = {
			Z79 = {
				set_variable = { which = nbProvBlack which = PREV }
				set_variable = { which = temp which = percInfluence }
				divide_variable = { temp = 100 }
				multiply_variable = { which = nbProvBlack which = temp }
				while = {
					limit = { check_variable = { nbProvBlack = 0 } }
					subtract_variable = { nbProvBlack = 1 }
					event_target:country = {
						random_owned_province = {
							cede_province = Z79
							add_core = Z79
							remove_loot = { who = Z79 amount = 100 }
						}
					}
				}
			}
		}
	}
	if = {
		limit = { Z80 = { exists = yes is_subject_of_type = acolyte_dominion is_subject_of = Z99 event_target:country = { NOT = { tag = PREV } } } }
		REB = {
			Z80 = {
				set_variable = { which = nbProvBlack which = PREV }
				set_variable = { which = temp which = percInfluence }
				divide_variable = { temp = 100 }
				multiply_variable = { which = nbProvBlack which = temp }
				while = {
					limit = { check_variable = { nbProvBlack = 0 } }
					subtract_variable = { nbProvBlack = 1 }
					event_target:country = {
						random_owned_province = {
							cede_province = Z80
							add_core = Z80
							remove_loot = { who = Z80 amount = 100 }
						}
					}
				}
			}
		}
	}
	if = {
		limit = { Z81 = { exists = yes is_subject_of_type = acolyte_dominion is_subject_of = Z99 event_target:country = { NOT = { tag = PREV } } } }
		REB = {
			Z81 = {
				set_variable = { which = nbProvBlack which = PREV }
				set_variable = { which = temp which = percInfluence }
				divide_variable = { temp = 100 }
				multiply_variable = { which = nbProvBlack which = temp }
				while = {
					limit = { check_variable = { nbProvBlack = 0 } }
					subtract_variable = { nbProvBlack = 1 }
					event_target:country = {
						random_owned_province = {
							cede_province = Z81
							add_core = Z81
							remove_loot = { who = Z81 amount = 100 }
						}
					}
				}
			}
		}
	}
}
new_acolyte_after_conquest_effect = {
	if = {
		limit = { Z75 = { exists = no } }
		event_target:country = {
			random_owned_province = {
				set_in_empire = no
				add_core = Z75
				cede_province = ROOT
			}
			every_owned_province = {
				add_core = Z75
				cede_province = ROOT
			}
		}
		release_with_religion_and_culture = { tag = Z75 religion = ROOT culture = black_demesner }
		create_subject = {
			subject_type = acolyte_dominion
			subject = Z75
		}
		Z75 = {
			every_owned_province = {
				PREV = { change_variable = { aInfluence = 0.5 } }
				PREV = { add_manpower = 1.2 }
				PREV = { add_treasury = 25 }
			}
			change_government = theocracy
			add_government_reform = black_acolyte_reform
			change_technology_group = tech_cannorian
			change_unit_type = tech_cannorian
			add_devotion = 50
			add_stability = 2
			add_prestige = 100
			add_manpower = 20
			add_treasury = 1000
			set_country_flag = newly_formed_dominion
			kill_ruler = yes
		}
	}
	else_if = {
		limit = { Z76 = { exists = no } }
		event_target:country = {
			random_owned_province = {
				set_in_empire = no
				add_core = Z76
				cede_province = ROOT
			}
			every_owned_province = {
				add_core = Z76
				cede_province = ROOT
			}
		}
		release_with_religion_and_culture = { tag = Z76 religion = ROOT culture = black_demesner }
		create_subject = {
			subject_type = acolyte_dominion
			subject = Z76
		}
		Z76 = {
			every_owned_province = {
				PREV = { change_variable = { aInfluence = 0.5 } }
				PREV = { add_manpower = 1.2 }
				PREV = { add_treasury = 25 }
			}
			change_government = theocracy
			add_government_reform = black_acolyte_reform
			change_technology_group = tech_cannorian
			change_unit_type = tech_cannorian
			add_devotion = 50
			add_stability = 2
			add_prestige = 100
			add_manpower = 20
			add_treasury = 1000
			set_country_flag = newly_formed_dominion
			kill_ruler = yes
		}
	}
	else_if = {
		limit = { Z77 = { exists = no } }
		event_target:country = {
			random_owned_province = {
				set_in_empire = no
				add_core = Z77
				cede_province = ROOT
			}
			every_owned_province = {
				add_core = Z77
				cede_province = ROOT
			}
		}
		release_with_religion_and_culture = { tag = Z77 religion = ROOT culture = black_demesner }
		create_subject = {
			subject_type = acolyte_dominion
			subject = Z77
		}
		Z77 = {
			every_owned_province = {
				PREV = { change_variable = { aInfluence = 0.5 } }
				PREV = { add_manpower = 1.2 }
				PREV = { add_treasury = 25 }
			}
			change_government = theocracy
			add_government_reform = black_acolyte_reform
			change_technology_group = tech_cannorian
			change_unit_type = tech_cannorian
			add_devotion = 50
			add_stability = 2
			add_prestige = 100
			add_manpower = 20
			add_treasury = 1000
			set_country_flag = newly_formed_dominion
			kill_ruler = yes
		}
	}
	else_if = {
		limit = { Z78 = { exists = no } }
		event_target:country = {
			random_owned_province = {
				set_in_empire = no
				add_core = Z78
				cede_province = ROOT
			}
			every_owned_province = {
				add_core = Z78
				cede_province = ROOT
			}
		}
		release_with_religion_and_culture = { tag = Z78 religion = ROOT culture = black_demesner }
		create_subject = {
			subject_type = acolyte_dominion
			subject = Z78
		}
		Z78 = {
			every_owned_province = {
				PREV = { change_variable = { aInfluence = 0.5 } }
				PREV = { add_manpower = 1.2 }
				PREV = { add_treasury = 25 }
			}
			change_government = theocracy
			add_government_reform = black_acolyte_reform
			change_technology_group = tech_cannorian
			change_unit_type = tech_cannorian
			add_devotion = 50
			add_stability = 2
			add_prestige = 100
			add_manpower = 20
			add_treasury = 1000
			set_country_flag = newly_formed_dominion
			kill_ruler = yes
		}
	}
	else_if = {
		limit = { Z79 = { exists = no } }
		event_target:country = {
			random_owned_province = {
				set_in_empire = no
				add_core = Z79
				cede_province = ROOT
			}
			every_owned_province = {
				add_core = Z79
				cede_province = ROOT
			}
		}
		release_with_religion_and_culture = { tag = Z79 religion = ROOT culture = black_demesner }
		create_subject = {
			subject_type = acolyte_dominion
			subject = Z79
		}
		Z79 = {
			every_owned_province = {
				PREV = { change_variable = { aInfluence = 0.5 } }
				PREV = { add_manpower = 1.2 }
				PREV = { add_treasury = 25 }
			}
			change_government = theocracy
			add_government_reform = black_acolyte_reform
			change_technology_group = tech_cannorian
			change_unit_type = tech_cannorian
			add_devotion = 50
			add_stability = 2
			add_prestige = 100
			add_manpower = 20
			add_treasury = 1000
			set_country_flag = newly_formed_dominion
			kill_ruler = yes
		}
	}
	else_if = {
		limit = { Z80 = { exists = no } }
		event_target:country = {
			random_owned_province = {
				set_in_empire = no
				add_core = Z80
				cede_province = ROOT
			}
			every_owned_province = {
				add_core = Z80
				cede_province = ROOT
			}
		}
		release_with_religion_and_culture = { tag = Z80 religion = ROOT culture = black_demesner }
		create_subject = {
			subject_type = acolyte_dominion
			subject = Z80
		}
		Z80 = {
			every_owned_province = {
				PREV = { change_variable = { aInfluence = 0.5 } }
				PREV = { add_manpower = 1.2 }
				PREV = { add_treasury = 25 }
			}
			change_government = theocracy
			add_government_reform = black_acolyte_reform
			change_technology_group = tech_cannorian
			change_unit_type = tech_cannorian
			add_devotion = 50
			add_stability = 2
			add_prestige = 100
			add_manpower = 20
			add_treasury = 1000
			set_country_flag = newly_formed_dominion
			kill_ruler = yes
		}
	}
	else_if = {
		limit = { Z81 = { exists = no } }
		event_target:country = {
			random_owned_province = {
				set_in_empire = no
				add_core = Z81
				cede_province = ROOT
			}
			every_owned_province = {
				add_core = Z81
				cede_province = ROOT
			}
		}
		release_with_religion_and_culture = { tag = Z81 religion = ROOT culture = black_demesner }
		create_subject = {
			subject_type = acolyte_dominion
			subject = Z81
		}
		Z81 = {
			every_owned_province = {
				PREV = { change_variable = { aInfluence = 0.5 } }
				PREV = { add_manpower = 1.2 }
				PREV = { add_treasury = 25 }
			}
			change_government = theocracy
			add_government_reform = black_acolyte_reform
			change_technology_group = tech_cannorian
			change_unit_type = tech_cannorian
			add_devotion = 50
			add_stability = 2
			add_prestige = 100
			add_manpower = 20
			add_treasury = 1000
			set_country_flag = newly_formed_dominion
			kill_ruler = yes
		}
	}
}
new_acolyte_mtth_effect = {
	if = {
		limit = { Z75 = { exists = no } }
		every_owned_province = {
			limit = { has_state_edict = acolyte_territory_edict }
			add_core = Z75
		}
		release_with_religion_and_culture = { tag = Z75 religion = ROOT culture = black_demesner }
		create_subject = {
			subject_type = acolyte_dominion
			subject = Z75
		}
		Z75 = {
			every_owned_province = {
				PREV = { change_variable = { aInfluence = 0.5 } }
				PREV = { add_manpower = 1.2 }
				PREV = { add_treasury = 25 }
			}
			change_government = theocracy
			add_government_reform = black_acolyte_reform
			change_technology_group = tech_cannorian
			change_unit_type = tech_cannorian
			add_devotion = 50
			add_stability = 2
			add_prestige = 100
			add_manpower = 20
			add_treasury = 1000
			set_country_flag = newly_formed_dominion
			kill_ruler = yes
		}
	}
	else_if = {
		limit = { Z76 = { exists = no } }
		every_owned_province = {
			limit = { has_state_edict = acolyte_territory_edict }
			add_core = Z76
		}
		release_with_religion_and_culture = { tag = Z76 religion = ROOT culture = black_demesner }
		create_subject = {
			subject_type = acolyte_dominion
			subject = Z76
		}
		Z76 = {
			every_owned_province = {
				PREV = { change_variable = { aInfluence = 0.5 } }
				PREV = { add_manpower = 1.2 }
				PREV = { add_treasury = 25 }
			}
			change_government = theocracy
			add_government_reform = black_acolyte_reform
			change_technology_group = tech_cannorian
			change_unit_type = tech_cannorian
			add_devotion = 50
			add_stability = 2
			add_prestige = 100
			add_manpower = 20
			add_treasury = 1000
			set_country_flag = newly_formed_dominion
			kill_ruler = yes
		}
	}
	else_if = {
		limit = { Z77 = { exists = no } }
		every_owned_province = {
			limit = { has_state_edict = acolyte_territory_edict }
			add_core = Z77
		}
		release_with_religion_and_culture = { tag = Z77 religion = ROOT culture = black_demesner }
		create_subject = {
			subject_type = acolyte_dominion
			subject = Z77
		}
		Z77 = {
			every_owned_province = {
				PREV = { change_variable = { aInfluence = 0.5 } }
				PREV = { add_manpower = 1.2 }
				PREV = { add_treasury = 25 }
			}
			change_government = theocracy
			add_government_reform = black_acolyte_reform
			change_technology_group = tech_cannorian
			change_unit_type = tech_cannorian
			add_devotion = 50
			add_stability = 2
			add_prestige = 100
			add_manpower = 20
			add_treasury = 1000
			set_country_flag = newly_formed_dominion
			kill_ruler = yes
		}
	}
	else_if = {
		limit = { Z78 = { exists = no } }
		every_owned_province = {
			limit = { has_state_edict = acolyte_territory_edict }
			add_core = Z78
		}
		release_with_religion_and_culture = { tag = Z78 religion = ROOT culture = black_demesner }
		create_subject = {
			subject_type = acolyte_dominion
			subject = Z78
		}
		Z78 = {
			every_owned_province = {
				PREV = { change_variable = { aInfluence = 0.5 } }
				PREV = { add_manpower = 1.2 }
				PREV = { add_treasury = 25 }
			}
			change_government = theocracy
			add_government_reform = black_acolyte_reform
			change_technology_group = tech_cannorian
			change_unit_type = tech_cannorian
			add_devotion = 50
			add_stability = 2
			add_prestige = 100
			add_manpower = 20
			add_treasury = 1000
			set_country_flag = newly_formed_dominion
			kill_ruler = yes
		}
	}
	else_if = {
		limit = { Z79 = { exists = no } }
		every_owned_province = {
			limit = { has_state_edict = acolyte_territory_edict }
			add_core = Z79
		}
		release_with_religion_and_culture = { tag = Z79 religion = ROOT culture = black_demesner }
		create_subject = {
			subject_type = acolyte_dominion
			subject = Z79
		}
		Z79 = {
			every_owned_province = {
				PREV = { change_variable = { aInfluence = 0.5 } }
				PREV = { add_manpower = 1.2 }
				PREV = { add_treasury = 25 }
			}
			change_government = theocracy
			add_government_reform = black_acolyte_reform
			change_technology_group = tech_cannorian
			change_unit_type = tech_cannorian
			add_devotion = 50
			add_stability = 2
			add_prestige = 100
			add_manpower = 20
			add_treasury = 1000
			set_country_flag = newly_formed_dominion
			kill_ruler = yes
		}
	}
	else_if = {
		limit = { Z80 = { exists = no } }
		every_owned_province = {
			limit = { has_state_edict = acolyte_territory_edict }
			add_core = Z80
		}
		release_with_religion_and_culture = { tag = Z80 religion = ROOT culture = black_demesner }
		create_subject = {
			subject_type = acolyte_dominion
			subject = Z80
		}
		Z80 = {
			every_owned_province = {
				PREV = { change_variable = { aInfluence = 0.5 } }
				PREV = { add_manpower = 1.2 }
				PREV = { add_treasury = 25 }
			}
			change_government = theocracy
			add_government_reform = black_acolyte_reform
			change_technology_group = tech_cannorian
			change_unit_type = tech_cannorian
			add_devotion = 50
			add_stability = 2
			add_prestige = 100
			add_manpower = 20
			add_treasury = 1000
			set_country_flag = newly_formed_dominion
			kill_ruler = yes
		}
	}
	else_if = {
		limit = { Z81 = { exists = no } }
		every_owned_province = {
			limit = { has_state_edict = acolyte_territory_edict }
			add_core = Z81
		}
		release_with_religion_and_culture = { tag = Z81 religion = ROOT culture = black_demesner }
		create_subject = {
			subject_type = acolyte_dominion
			subject = Z81
		}
		Z81 = {
			every_owned_province = {
				PREV = { change_variable = { aInfluence = 0.5 } }
				PREV = { add_manpower = 1.2 }
				PREV = { add_treasury = 25 }
			}
			change_government = theocracy
			add_government_reform = black_acolyte_reform
			change_technology_group = tech_cannorian
			change_unit_type = tech_cannorian
			add_devotion = 50
			add_stability = 2
			add_prestige = 100
			add_manpower = 20
			add_treasury = 1000
			set_country_flag = newly_formed_dominion
			kill_ruler = yes
		}
	}
}
jorg_damage_setup = {
	if = {
		limit = { has_ruler_flag = abjuration_1 }
		change_variable = { jorg_damage = 2 }
	}
	if = {
		limit = { has_ruler_flag = abjuration_2 }
		change_variable = { jorg_damage = 2 }
	}
	if = {
		limit = { has_ruler_flag = abjuration_3 }
		change_variable = { jorg_damage = 2 }
	}
	if = {
		limit = { has_ruler_flag = conjuration_1 }
		change_variable = { jorg_damage = 2 }
	}
	if = {
		limit = { has_ruler_flag = conjuration_2 }
		change_variable = { jorg_damage = 2 }
	}
	if = {
		limit = { has_ruler_flag = conjuration_3 }
		change_variable = { jorg_damage = 2 }
	}
	if = {
		limit = { has_ruler_flag = illusion_1 }
		change_variable = { jorg_damage = 2 }
	}
	if = {
		limit = { has_ruler_flag = illusion_2 }
		change_variable = { jorg_damage = 2 }
	}
	if = {
		limit = { has_ruler_flag = illusion_3 }
		change_variable = { jorg_damage = 2 }
	}
	if = {
		limit = { has_ruler_flag = necromancy_1 }
		change_variable = { jorg_damage = 2 }
	}
	if = {
		limit = { has_ruler_flag = necromancy_2 }
		change_variable = { jorg_damage = 2 }
	}
	if = {
		limit = { has_ruler_flag = necromancy_3 }
		change_variable = { jorg_damage = 2 }
	}
	if = {
		limit = { has_ruler_flag = transmutation_1 }
		change_variable = { jorg_damage = 2 }
	}
	if = {
		limit = { has_ruler_flag = transmutation_2 }
		change_variable = { jorg_damage = 2 }
	}
	if = {
		limit = { has_ruler_flag = transmutation_3 }
		change_variable = { jorg_damage = 2 }
	}
	if = {
		limit = { has_ruler_flag = evocation_1 }
		change_variable = { jorg_damage = 2 }
	}
	if = {
		limit = { has_ruler_flag = evocation_2 }
		change_variable = { jorg_damage = 2 }
	}
	if = {
		limit = { has_ruler_flag = evocation_3 }
		change_variable = { jorg_damage = 2 }
	}
	if = {
		limit = { has_ruler_flag = divination_1 }
		change_variable = { jorg_damage = 2 }
	}
	if = {
		limit = { has_ruler_flag = divination_2 }
		change_variable = { jorg_damage = 2 }
	}
	if = {
		limit = { has_ruler_flag = divination_3 }
		change_variable = { jorg_damage = 2 }
	}
	if = {
		limit = { has_ruler_flag = transmutation_1 }
		change_variable = { jorg_damage = 2 }
	}
	if = {
		limit = { has_ruler_flag = transmutation_2 }
		change_variable = { jorg_damage = 2 }
	}
	if = {
		limit = { has_ruler_flag = transmutation_3 }
		change_variable = { jorg_damage = 2 }
	}
}
initialize_blackpurgis = {
	hidden_effect = {
		if = {
			limit = { NOT = { has_country_flag = blackpurgis_initialized } }
			set_variable = { maxBlack = 0 }
			set_variable = { currentBlack = 0 }
			set_variable = { winBlack = 0 }
			set_variable = { drawBlack = 0 }
			set_variable = { loseBlack = 0 }
			every_subject_country = {
				limit = { is_subject_of_type = acolyte_dominion }
				set_variable = { maxBlack = 0 }
				set_variable = { currentBlack = 0 }
				set_variable = { winBlack = 0 }
				set_variable = { drawBlack = 0 }
				set_variable = { loseBlack = 0 }
			}
			if = {
				limit = { has_country_flag = long_blackpurgis }
				every_subject_country = {
					limit = { is_subject_of_type = acolyte_dominion }
					ROOT = { change_variable = { maxBlack = 2 } }
				}
				every_subject_country = {
					set_variable = {
						which = maxBlack
						which = PREV
					}
				}
			}
			else = {
				every_subject_country = {
					limit = { is_subject_of_type = acolyte_dominion }
					ROOT = { change_variable = { maxBlack = 1 } }
				}
				every_subject_country = {
					set_variable = {
						which = maxBlack
						which = PREV
					}
				}
			}
			set_country_flag = blackpurgis_initialized
		}
	}
}
update_blackpurgis = {
	hidden_effect = {
		Z99 = {
			set_variable = { maxBlack = 0 }
			if = {
				limit = { has_country_flag = long_blackpurgis }
				every_subject_country = {
					limit = { is_subject_of_type = acolyte_dominion }
					Z99 = { change_variable = { maxBlack = 2 } }
				}
				every_subject_country = {
					set_variable = {
						which = maxBlack
						which = PREV
					}
				}
			}
			else = {
				every_subject_country = {
					limit = { is_subject_of_type = acolyte_dominion }
					Z99 = { change_variable = { maxBlack = 1 } }
				}
				every_subject_country = {
					set_variable = {
						which = maxBlack
						which = PREV
					}
				}
			}
		}
	}
}
spawn_black_demesne_overseer_army = {
	custom_tooltip = black_amphibious_invasion
	hidden_effect = {
		infantry = ROOT
		infantry = ROOT
		infantry = ROOT
		infantry = ROOT
		infantry = ROOT
		infantry = ROOT
		infantry = ROOT
		infantry = ROOT
		infantry = ROOT
		infantry = ROOT
		infantry = ROOT
		infantry = ROOT
		infantry = ROOT
		infantry = ROOT
		infantry = ROOT
		infantry = ROOT
		infantry = ROOT
		infantry = ROOT
		infantry = ROOT
		infantry = ROOT
		infantry = ROOT
		infantry = ROOT
		infantry = ROOT
		infantry = ROOT
		infantry = ROOT
		infantry = ROOT
		infantry = ROOT
		infantry = ROOT
		infantry = ROOT
		infantry = ROOT
		artillery = ROOT
		artillery = ROOT
		artillery = ROOT
		artillery = ROOT
		artillery = ROOT
		artillery = ROOT
		artillery = ROOT
		artillery = ROOT
		artillery = ROOT
		artillery = ROOT
		artillery = ROOT
		artillery = ROOT
		artillery = ROOT
		artillery = ROOT
		artillery = ROOT
		artillery = ROOT
		artillery = ROOT
		artillery = ROOT
		artillery = ROOT
		artillery = ROOT
	}
}

############
##Elikhand##
############
elikhand_divine_war = {
	if = {
		limit = { has_country_modifier = elikhand_divine_4 }
		remove_country_modifier = elikhand_divine_4
		remove_country_modifier = elikhand_divine_3
		remove_country_modifier = elikhand_divine_2
		remove_country_modifier = elikhand_divine_1
	}
	else_if = {
		limit = { has_country_modifier = elikhand_divine_3 }
		remove_country_modifier = elikhand_divine_3
		remove_country_modifier = elikhand_divine_2
		remove_country_modifier = elikhand_divine_1
		add_country_modifier = {
			name = elikhand_divine_4
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = elikhand_divine_2 }
		remove_country_modifier = elikhand_divine_2
		remove_country_modifier = elikhand_divine_1
		add_country_modifier = {
			name = elikhand_divine_3
			duration = -1
		}
		custom_tooltip = elikhand_divine
	}
	else_if = {
		limit = { has_country_modifier = elikhand_divine_1 }
		remove_country_modifier = elikhand_divine_1
		add_country_modifier = {
			name = elikhand_divine_2
			duration = -1
		}
		custom_tooltip = elikhand_divine
	}
	else = {
		add_country_modifier = {
			name = elikhand_divine_1
			duration = -1
		}
		custom_tooltip = elikhand_divine
	}
}
dalcabba_surge = {
	custom_tooltip = dalcabba_surgett
	hidden_effect = {
		every_country = {
			limit = {
				NOT = { tag = B38 }
				ai = yes
				religion = dalcabba
			}
			every_owned_province = {
				random = {
					chance = 30
					change_religion = dalcabba
				}
			}
		}
	}
}

################
##Krakdhumvror##
################
krak_pick_holds_effect = {
	random_owned_province = {
		limit = {
			NOT = { has_province_modifier = krak_ice_hold_modifier }
			NOT = { province_id = 4208 }
			NOT = { province_id = 4122 }
			NOT = { province_id = 4128 }
			NOT = { province_id = 4149 }
			province_group = hold_province
			NOT = { has_province_flag = icehold_candidate } 
		}
		set_province_flag = icehold_candidate
		save_event_target_as = candidate_1
	}
	random_owned_province = {
		limit = {
			NOT = { has_province_modifier = krak_ice_hold_modifier }
			NOT = { province_id = 4208 }
			NOT = { province_id = 4122 }
			NOT = { province_id = 4128 }
			NOT = { province_id = 4149 }
			province_group = hold_province
			NOT = { has_province_flag = icehold_candidate } 
		}
		set_province_flag = icehold_candidate
		save_event_target_as = candidate_2
	}
	random_owned_province = {
		limit = {
			NOT = { has_province_modifier = krak_ice_hold_modifier }
			NOT = { province_id = 4208 }
			NOT = { province_id = 4122 }
			NOT = { province_id = 4128 }
			NOT = { province_id = 4149 }
			province_group = hold_province
			NOT = { has_province_flag = icehold_candidate } 
		}
		set_province_flag = icehold_candidate
		save_event_target_as = candidate_3
	}
	random_owned_province = {
		limit = {
			NOT = { has_province_modifier = krak_ice_hold_modifier }
			NOT = { province_id = 4208 }
			NOT = { province_id = 4122 }
			NOT = { province_id = 4128 }
			NOT = { province_id = 4149 }
			province_group = hold_province
			NOT = { has_province_flag = icehold_candidate } 
		}
		set_province_flag = icehold_candidate
		save_event_target_as = candidate_4
	}
	random_owned_province = {
		limit = {
			NOT = { has_province_modifier = krak_ice_hold_modifier }
			NOT = { province_id = 4208 }
			NOT = { province_id = 4122 }
			NOT = { province_id = 4128 }
			NOT = { province_id = 4149 }
			province_group = hold_province
			NOT = { has_province_flag = icehold_candidate } 
		}
		set_province_flag = icehold_candidate
		save_event_target_as = candidate_5
	}
	random_owned_province = {
		limit = {
			NOT = { has_province_modifier = krak_ice_hold_modifier }
			NOT = { province_id = 4208 }
			NOT = { province_id = 4122 }
			NOT = { province_id = 4128 }
			NOT = { province_id = 4149 }
			province_group = hold_province
			NOT = { has_province_flag = icehold_candidate } 
		}
		set_province_flag = icehold_candidate
		save_event_target_as = candidate_6
	}
	random_owned_province = {
		limit = {
			NOT = { has_province_modifier = krak_ice_hold_modifier }
			NOT = { province_id = 4208 }
			NOT = { province_id = 4122 }
			NOT = { province_id = 4128 }
			NOT = { province_id = 4149 }
			province_group = hold_province
			NOT = { has_province_flag = icehold_candidate } 
		}
		set_province_flag = icehold_candidate
		save_event_target_as = candidate_7
	}
	random_owned_province = {
		limit = {
			NOT = { has_province_modifier = krak_ice_hold_modifier }
			NOT = { province_id = 4208 }
			NOT = { province_id = 4122 }
			NOT = { province_id = 4128 }
			NOT = { province_id = 4149 }
			province_group = hold_province
			NOT = { has_province_flag = icehold_candidate } 
		}
		set_province_flag = icehold_candidate
		save_event_target_as = candidate_8
	}
	random_owned_province = {
		limit = {
			NOT = { has_province_modifier = krak_ice_hold_modifier }
			NOT = { province_id = 4208 }
			NOT = { province_id = 4122 }
			NOT = { province_id = 4128 }
			NOT = { province_id = 4149 }
			province_group = hold_province
			NOT = { has_province_flag = icehold_candidate } 
		}
		set_province_flag = icehold_candidate
		save_event_target_as = candidate_9
	}
	random_owned_province = {
		limit = {
			NOT = { has_province_modifier = krak_ice_hold_modifier }
			NOT = { province_id = 4208 }
			NOT = { province_id = 4122 }
			NOT = { province_id = 4128 }
			NOT = { province_id = 4149 }
			province_group = hold_province
			NOT = { has_province_flag = icehold_candidate } 
		}
		set_province_flag = icehold_candidate
		save_event_target_as = candidate_10
	}
	random_owned_province = {
		limit = {
			NOT = { has_province_modifier = krak_ice_hold_modifier }
			NOT = { province_id = 4208 }
			NOT = { province_id = 4122 }
			NOT = { province_id = 4128 }
			NOT = { province_id = 4149 }
			province_group = hold_province
			NOT = { has_province_flag = icehold_candidate } 
		}
		set_province_flag = icehold_candidate
		save_event_target_as = candidate_11
	}
	random_owned_province = {
		limit = {
			NOT = { has_province_modifier = krak_ice_hold_modifier }
			NOT = { province_id = 4208 }
			NOT = { province_id = 4122 }
			NOT = { province_id = 4128 }
			NOT = { province_id = 4149 }
			province_group = hold_province
			NOT = { has_province_flag = icehold_candidate } 
		}
		set_province_flag = icehold_candidate
		save_event_target_as = candidate_12
	}
	random_owned_province = {
		limit = {
			NOT = { has_province_modifier = krak_ice_hold_modifier }
			NOT = { province_id = 4208 }
			NOT = { province_id = 4122 }
			NOT = { province_id = 4128 }
			NOT = { province_id = 4149 }
			province_group = hold_province
			NOT = { has_province_flag = icehold_candidate } 
		}
		set_province_flag = icehold_candidate
		save_event_target_as = candidate_13
	}
	random_owned_province = {
		limit = {
			NOT = { has_province_modifier = krak_ice_hold_modifier }
			NOT = { province_id = 4208 }
			NOT = { province_id = 4122 }
			NOT = { province_id = 4128 }
			NOT = { province_id = 4149 }
			province_group = hold_province
			NOT = { has_province_flag = icehold_candidate } 
		}
		set_province_flag = icehold_candidate
		save_event_target_as = candidate_14
	}
	random_owned_province = {
		limit = {
			NOT = { has_province_modifier = krak_ice_hold_modifier }
			NOT = { province_id = 4208 }
			NOT = { province_id = 4122 }
			NOT = { province_id = 4128 }
			NOT = { province_id = 4149 }
			province_group = hold_province
			NOT = { has_province_flag = icehold_candidate } 
		}
		set_province_flag = icehold_candidate
		save_event_target_as = candidate_15
	}
}
krak_icehold_cost = {
	if = {
		limit = { 
			estate_influence = {
				estate = estate_mages
				influence = 66
			}
		}
		add_adm_power = -100
		if = {
			limit = { check_variable = { which = krak_discount_spell value = 1 } } 
			change_variable = { which = krak_discount_spell value = -1 }
		}
		else = { add_years_of_income = -1 }
	}
	else_if = {
		limit = { 
			estate_influence = {
				estate = estate_mages
				influence = 33
			}
		}
		add_adm_power = -200
		if = {
			limit = { check_variable = { which = krak_discount_spell value = 1 } } 
			change_variable = { which = krak_discount_spell value = -1 }
		}
		else = { add_years_of_income = -2 }
	}
	else = {
		add_adm_power = -200
		if = {
			limit = { check_variable = { which = krak_discount_spell value = 1 } } 
			change_variable = { which = krak_discount_spell value = -1 }
		}
		else = { add_years_of_income = -3 }
	}
}
krak_icehold_effect = {
	add_permanent_province_modifier = { name = krak_ice_hold_modifier duration = -1 } 
	if = {
		limit = { has_dlc = "Mandate of Heaven" }
		add_province_triggered_modifier = krak_ice_hold_triggered_modifier
	}
	else = {
		add_base_tax = 3
		add_base_production = 3
		add_base_manpower = 3
	}
}
krak_add_monarchy_support = {
	custom_tooltip = krakdhumvror_crisis_monarchy_tooltip
	hidden_effect = { 
		random_list = {
			40 = { change_variable = { which = krak_disaster_monarchy value = 1 } }
			40 = { change_variable = { which = krak_disaster_monarchy value = 2 } }
			20 = { change_variable = { which = krak_disaster_monarchy value = 3 } }
		}
	}
}
krak_add_clan_monarchy_support = {
	custom_tooltip = krakdhumvror_crisis_monarchy_tooltip2
	hidden_effect = { 
		random_list = {
			40 = { change_variable = { which = krak_disaster_monarchy value = 4 } }
			40 = { change_variable = { which = krak_disaster_monarchy value = 5 } }
			20 = { change_variable = { which = krak_disaster_monarchy value = 6 } }
		}
	}
}
krak_add_republic_support = {
	custom_tooltip = krakdhumvror_crisis_republic_tooltip
	hidden_effect = { 
		random_list = {
			40 = { change_variable = { which = krak_disaster_republic value = 1 } }
			40 = { change_variable = { which = krak_disaster_republic value = 2 } }
			20 = { change_variable = { which = krak_disaster_republic value = 3 } }
		}
	}
}
krak_add_clan_republic_support = {
	custom_tooltip = krakdhumvror_crisis_republic_tooltip2
	hidden_effect = {
		random_list = {
			40 = { change_variable = { which = krak_disaster_republic value = 4 } }
			40 = { change_variable = { which = krak_disaster_republic value = 5 } }
			20 = { change_variable = { which = krak_disaster_republic value = 6 } }
		}
	}
}

############
##Corintar##
############
corintar_refresh_reconstruction = {
	if = {
		limit = { has_country_modifier = corintar_reconstruction_permanent }
		# pass
	}
	else_if = {
		limit = {
			OR = {
				has_country_modifier = corintar_reconstruction
				has_country_modifier = corintar_reconstruction_improved
			}
		}
		custom_tooltip = corintar_extend_restoration_tt
	}
	else = {
		custom_tooltip = corintar_restart_restoration_tt
	}
	hidden_effect = {
		remove_country_modifier = corintar_reconstruction
		remove_country_modifier = corintar_reconstruction_improved
		if = {
			limit = { has_country_modifier = corintar_reconstruction_permanent }
			# pass
		}
		else_if = {
			limit = {
				mission_completed = corintar_lumber_shortage
			}
			add_country_modifier = {
				name = corintar_reconstruction_improved
				duration = 5475
			}
		}
		else = {
			add_country_modifier = {
				name = corintar_reconstruction
				duration = 5475
			}
		}
	}
}
corintar_establish_chapter_effect = {
	if = {
		limit = {
			exists = $tag$
		}
		$tag$ = {
			add_country_modifier = {
				name = $chapter$
				duration = -1
			}
			hidden_effect = {
				#country_event = { id = $lore$ }
				set_country_flag = corintar_chapter
			}
		}
		add_country_modifier = {
			name = $modifier$
			duration = 7300
		}
		hidden_effect = {
			#country_event = { id = $lore$ }
		}
	}
	else_if = {
		limit = {
			NOT = { owns = $capital$ }
		}
		$capital$ = {
			owner = {
				add_country_modifier = {
					name = $chapter$
					duration = -1
				}
				hidden_effect = {
					set_country_flag = corintar_chapter
					#country_event = { id = $lore$ }
				}
			}
		}
		add_country_modifier = {
			name = $modifier$
			duration = 7300
		}
		hidden_effect = {
			#country_event = { id = $lore$ }
		}
	}
}
corintar_fort_manpower = {
	random_owned_province = {
		limit = {
			fort_level = 1
			NOT = { has_province_flag = corintar_flag }
		}
		set_province_flag = corintar_flag
		add_base_manpower = 1
	}
}
corintar_orc_production = {
	random_owned_province = {
		limit = {
			has_integrated_orcish_minority_trigger = yes
			NOT = { has_province_flag = corintar_flag }
		}
		set_province_flag = corintar_flag
		add_base_production = 1
	}
}
corintar_deforestation = {
	random_owned_province = {
		limit = {
			OR = {
				has_terrain = woods
				has_terrain = forest
			}
			superregion = escann_superregion
			base_production = 2
			NOT = { has_province_flag = corintar_flag }
		}
		set_province_flag = corintar_flag
		add_base_production = -1
	}
}
corintar_violent_conversion = {
	random_owned_province = {
		limit = { religion = regent_court }
		change_religion = corinite
		add_province_modifier = {
			name = forced_conversion
			duration = 730
		}
	}
}

################
##Ovdal Lodhum##
################
lodhum_upgrade_gerin_modifier = { #province scope for 4098 Orcsfall
	4098 = {
		if = {
			limit = { has_province_modifier = lodhum_gerins_glory1 }
			hidden_effect = { remove_province_modifier = lodhum_gerins_glory1 }
			add_permanent_province_modifier = { name = lodhum_gerins_glory2 duration = -1 }
		}
		else_if = {
			limit = { has_province_modifier = lodhum_gerins_glory2 }
			hidden_effect = { remove_province_modifier = lodhum_gerins_glory2 }
			add_permanent_province_modifier = { name = lodhum_gerins_glory3 duration = -1 }
		}
		else_if = {
			limit = { has_province_modifier = lodhum_gerins_glory3 }
			hidden_effect = { remove_province_modifier = lodhum_gerins_glory3 }
			add_permanent_province_modifier = { name = lodhum_gerins_glory4 duration = -1 }
		}
	}
}

############
##Rogieria##
############
shadowmoon_effects = {
	if = {
		limit = {
			OR = {
				AND = {
					has_opinion = {
						who = B37
						amount = 100
					}
					exists = B37
				}
				tag = B37
			}
		}
		random_list = {
			25 = {
				# Hurt Legitimacy
				country_event = {
					id = flavor_rogieria.24
					random = 185
				}
			}
			25 = {
				# Hurt Prestige
				country_event = {
					id = flavor_rogieria.25
					random = 185
				}
			}
			10 = {
				# Hurt Relations
				trigger = {
					tag = B37
				}
				country_event = {
					id = flavor_rogieria.26
					random = 185
				}
			}
			25 = {
			}
		}
	}
	else = {
		clr_country_flag = in_shadowmoon_conspiracy
		B37 = {
			country_event = { id = flavor_rogieria.27 days = 7 }
		}
	}
}

############
##Seghdihr##
############
seghdihr_update_flow_modifiers = {
	#intentionally clears everything and recalcs, so it doesn't get stuck when you eclipse rivals
	remove_country_modifier = seghdihr_limit_flow_1a
	remove_country_modifier = seghdihr_limit_flow_1b
	remove_country_modifier = seghdihr_limit_flow_2a
	remove_country_modifier = seghdihr_limit_flow_2b
	remove_country_modifier = seghdihr_limit_flow_2c
	remove_country_modifier = seghdihr_limit_flow_3a
	remove_country_modifier = seghdihr_limit_flow_3b
	remove_country_modifier = seghdihr_limit_flow_3c
	remove_country_modifier = seghdihr_limit_flow_3d

	#lvl 3 modifier
	if = {
		limit = { mission_completed = seghdihr_the_syndicates }
		if = {
			limit = { 
				calc_true_if = {
					amount = 3
					all_known_country = {
						trade_embargo_by = H78
						NOT = { is_enemy = H78 }
					}
				}
			}
			add_country_modifier = { name = seghdihr_limit_flow_3d duration = -1 }
		}
		else_if = {
			limit = { 
				calc_true_if = {
					amount = 2
					all_known_country = {
						trade_embargo_by = H78
						NOT = { is_enemy = H78 }
					}
				}
			}
			add_country_modifier = { name = seghdihr_limit_flow_3c duration = -1 }
		}
		else_if = {
			limit = { 
					any_known_country = {
						trade_embargo_by = H78
						NOT = { is_enemy = H78 }
					}
				}
			add_country_modifier = { name = seghdihr_limit_flow_3b duration = -1 }
		}
		else = { add_country_modifier = { name = seghdihr_limit_flow_3a duration = -1 } }
	}
	#lvl 2 modifier
	else_if = {
		limit = { mission_completed = seghdihr_first_last_stop }
		if = {
			limit = {
				calc_true_if = {
					amount = 2
					all_known_country = {
						trade_embargo_by = H78
						NOT = { is_enemy = H78 }
					}
				}
			}
			add_country_modifier = { name = seghdihr_limit_flow_2c duration = -1 }
		}
		else_if = {
			limit = { 
					any_known_country = {
						trade_embargo_by = H78
						NOT = { is_enemy = H78 }
					}
				}
			add_country_modifier = { name = seghdihr_limit_flow_2b duration = -1 }
		}
		else = { add_country_modifier = { name = seghdihr_limit_flow_2a duration = -1 } }
	}
	#lvl 1 modifier
	else = {
		if = {
			limit = { 
				any_known_country = {
					trade_embargo_by = H78
					NOT = { is_enemy = H78 }
				}
			}
			add_country_modifier = { name = seghdihr_limit_flow_1b duration = -1 }
		}
		else = { add_country_modifier = { name = seghdihr_limit_flow_1a duration = -1 } }
	}
}
seghdihr_calculate_incursion_strength = {
	set_variable = { which = incursion_empty_provinces value = 0 }
	set_variable = { which = incursion_goblin_provinces value = 0 }
	set_variable = { which = incursion_goblin_tribes value = 0 }
	set_variable = { which = incursion_ozumbrog_forts value = 0 }
	set_variable = { which = incursion_kanzad_hold value = 0 }
	set_variable = { which = incursion_grozumdihr_hold value = 0 }
	set_variable = { which = incursion_azan_hold value = 0 }
	set_variable = { which = incursion_krakazol_hold value = 0 }
	set_variable = { which = incursion_total value = 1000 } #1k base

	#tree of stone provinces
	tree_of_stone_region = {
		limit = { NOT = { province_group = hold_province } }
		if = {
			limit = { is_city = no }
			ROOT = { change_variable = { which = incursion_empty_provinces value = 10 } }
		}
		else_if = {
			limit = { culture_group = goblin } #yes even if owned by a dwarf
			ROOT = { change_variable = { which = incursion_goblin_provinces value = 20 } } 
		}
	}

	#goblin tags
	if = {
		limit = { exists = H92 } #poisoned rock
		change_variable = { which = incursion_goblin_tribes value = 100 }
	}
	if = {
		limit = { exists = H88 } #ambersniffer
		change_variable = { which = incursion_goblin_tribes value = 100 }
	}
	if = {
		limit = { exists = H93 } #dirtwater
		change_variable = { which = incursion_goblin_tribes value = 100 }
	}
	if = {
		limit = { exists = H74 } #chaingrasper
		change_variable = { which = incursion_goblin_tribes value = 200 }
	}

	####holds
	#fort lvl in ozumbrog
	4218 = {
		if = {
			limit = { fort_level = 8 }
			ROOT = { set_variable = { which = incursion_ozumbrog_forts value = -80 } }
		}
		else_if = {
			limit = { fort_level = 6 }
			ROOT = { set_variable = { which = incursion_ozumbrog_forts value = -60 } }
		}
		else_if = {
			limit = { fort_level = 4 }
			ROOT = { set_variable = { which = incursion_ozumbrog_forts value = -40 } }
		}
		else_if = {
			limit = { fort_level = 2 }
			ROOT = { set_variable = { which = incursion_ozumbrog_forts value = -20 } }
		}
	}
	#kanzad
	4247 = {
		if = {
			limit = { owner = { culture_group = dwarven } }
			ROOT = { change_variable = { which = incursion_kanzad_hold value = -100 } }
		}
		else_if = {
			limit = { is_city = no }
			ROOT = { change_variable = { which = incursion_kanzad_hold value = 50 } }
		}
		else = { ROOT = { change_variable = { which = incursion_kanzad_hold value = 100 } } }
	}
	#grozumdihr
	4265 = {
		if = {
			limit = { owner = { culture_group = dwarven } }
			ROOT = { change_variable = { which = incursion_grozumdihr_hold value = -100 } }
		}
		else_if = {
			limit = { is_city = no }
			ROOT = { change_variable = { which = incursion_grozumdihr_hold value = 50 } }
		}
		else = { ROOT = { change_variable = { which = incursion_grozumdihr_hold value = 100 } } }
	}
	#az-an
	4284 = {
		if = {
			limit = { owner = { culture_group = dwarven } }
			ROOT = { change_variable = { which = incursion_azan_hold value = -100 } }
		}
		else_if = {
			limit = { is_city = no }
			ROOT = { change_variable = { which = incursion_azan_hold value = 50 } }
		}
		else = { ROOT = { change_variable = { which = incursion_azan_hold value = 100 } } }
	}
	#krakazol
	4266 = {
		if = {
			limit = { owner = { culture_group = dwarven } }
			ROOT = { change_variable = { which = incursion_krakazol_hold value = -100 } }
		}
		else_if = {
			limit = { is_city = no }
			ROOT = { change_variable = { which = incursion_krakazol_hold value = 50 } }
		}
		else = { ROOT = { change_variable = { which = incursion_krakazol_hold value = 100 } } }
	}

	##calc
	change_variable = { which = incursion_total which = incursion_empty_provinces }
	change_variable = { which = incursion_total which = incursion_goblin_provinces }
	change_variable = { which = incursion_total which = incursion_goblin_tribes }
	change_variable = { which = incursion_total which = incursion_kanzad_hold }
	change_variable = { which = incursion_total which = incursion_grozumdihr_hold }
	change_variable = { which = incursion_total which = incursion_azan_hold }
	change_variable = { which = incursion_total which = incursion_krakazol_hold }
	change_variable = { which = incursion_total which = incursion_ozumbrog_forts }
	change_variable = { which = incursion_total which = incursion_gathering_strength }
	change_variable = { which = incursion_total which = incursion_mission_bonus }
}
seghdihr_spawn_incursion_main_goblins = {
	if = {
		limit = { ROOT = { check_variable = { which = incursion_total value = 2500 } } }
		spawn_dwarovar_goblin_rebels = { size = 5 }
	}
	else_if = {
		limit = { ROOT = { check_variable = { which = incursion_total value = 2000 } } }
		spawn_dwarovar_goblin_rebels = { size = 4.5 }
	}
	else_if = {
		limit = { ROOT = { check_variable = { which = incursion_total value = 1500 } } }
		spawn_dwarovar_goblin_rebels = { size = 4 }
	}
	else_if = {
		limit = { ROOT = { check_variable = { which = incursion_total value = 1000 } } }
		spawn_dwarovar_goblin_rebels = { size = 3.5 }
	}
	else_if = {
		limit = { ROOT = { check_variable = { which = incursion_total value = 500 } } }
		spawn_dwarovar_goblin_rebels = { size = 3 }
	}
	else = { 
		spawn_dwarovar_goblin_rebels = { size = 2.5 }
	}
}
seghdihr_spawn_incursion_small_goblins = {
	if = {
		limit = { ROOT = { check_variable = { which = incursion_total value = 2500 } } }
		spawn_dwarovar_goblin_rebels = { size = 2.5 }
	}
	else_if = {
		limit = { ROOT = { check_variable = { which = incursion_total value = 2000 } } }
		spawn_dwarovar_goblin_rebels = { size = 2 }
	}
	else_if = {
		limit = { ROOT = { check_variable = { which = incursion_total value = 1500 } } }
		spawn_dwarovar_goblin_rebels = { size = 1.5 }
	}
	else_if = {
		limit = { ROOT = { check_variable = { which = incursion_total value = 1000 } } }
		spawn_dwarovar_goblin_rebels = { size = 1 }
	}
	else = {
		spawn_dwarovar_goblin_rebels = { size = 0.5 }
	}
}
seghdihr_sgc_update_trade_modifiers = {
	custom_tooltip = seghdihr_sgc_update_trade_modifiers_tooltip_$value$
	hidden_effect = {
		[[Highway]
			change_variable = { which = sgc_highway_power value = $value$ } 
			2901 = { remove_trade_modifier = { who = ROOT key = seghdihr_sgc_power } }
			if = {
				limit = { check_variable = { which = sgc_highway_power value = 200 } }
				2901 = { add_trade_modifier = { who = ROOT duration = -1 power = 200 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_highway_power value = 190 } }
				2901 = { add_trade_modifier = { who = ROOT duration = -1 power = 190 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_highway_power value = 180 } }
				2901 = { add_trade_modifier = { who = ROOT duration = -1 power = 180 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_highway_power value = 170 } }
				2901 = { add_trade_modifier = { who = ROOT duration = -1 power = 170 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_highway_power value = 160 } }
				2901 = { add_trade_modifier = { who = ROOT duration = -1 power = 160 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_highway_power value = 150 } }
				2901 = { add_trade_modifier = { who = ROOT duration = -1 power = 150 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_highway_power value = 140 } }
				2901 = { add_trade_modifier = { who = ROOT duration = -1 power = 140 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_highway_power value = 130 } }
				2901 = { add_trade_modifier = { who = ROOT duration = -1 power = 130 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_highway_power value = 120 } }
				2901 = { add_trade_modifier = { who = ROOT duration = -1 power = 120 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_highway_power value = 110 } }
				2901 = { add_trade_modifier = { who = ROOT duration = -1 power = 110 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_highway_power value = 100 } }
				2901 = { add_trade_modifier = { who = ROOT duration = -1 power = 100 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_highway_power value = 90 } }
				2901 = { add_trade_modifier = { who = ROOT duration = -1 power = 90 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_highway_power value = 80 } }
				2901 = { add_trade_modifier = { who = ROOT duration = -1 power = 80 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_highway_power value = 70 } }
				2901 = { add_trade_modifier = { who = ROOT duration = -1 power = 70 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_highway_power value = 60 } }
				2901 = { add_trade_modifier = { who = ROOT duration = -1 power = 60 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_highway_power value = 50 } }
				2901 = { add_trade_modifier = { who = ROOT duration = -1 power = 50 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_highway_power value = 40 } }
				2901 = { add_trade_modifier = { who = ROOT duration = -1 power = 40 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_highway_power value = 30 } }
				2901 = { add_trade_modifier = { who = ROOT duration = -1 power = 30 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_highway_power value = 20 } }
				2901 = { add_trade_modifier = { who = ROOT duration = -1 power = 20 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_highway_power value = 10 } }
				2901 = { add_trade_modifier = { who = ROOT duration = -1 power = 10 key = seghdihr_sgc_power } }
			}
		]
		[[Davharral]
			change_variable = { which = sgc_davharral_power value = $value$ } 
			1348 = { remove_trade_modifier = { who = ROOT key = seghdihr_sgc_power } }
			if = {
				limit = { check_variable = { which = sgc_davharral_power value = 200 } }
				1348 = { add_trade_modifier = { who = ROOT duration = -1 power = 200 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_davharral_power value = 190 } }
				1348 = { add_trade_modifier = { who = ROOT duration = -1 power = 190 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_davharral_power value = 180 } }
				1348 = { add_trade_modifier = { who = ROOT duration = -1 power = 180 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_davharral_power value = 170 } }
				1348 = { add_trade_modifier = { who = ROOT duration = -1 power = 170 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_davharral_power value = 160 } }
				1348 = { add_trade_modifier = { who = ROOT duration = -1 power = 160 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_davharral_power value = 150 } }
				1348 = { add_trade_modifier = { who = ROOT duration = -1 power = 150 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_davharral_power value = 140 } }
				1348 = { add_trade_modifier = { who = ROOT duration = -1 power = 140 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_davharral_power value = 130 } }
				1348 = { add_trade_modifier = { who = ROOT duration = -1 power = 130 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_davharral_power value = 120 } }
				1348 = { add_trade_modifier = { who = ROOT duration = -1 power = 120 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_davharral_power value = 110 } }
				1348 = { add_trade_modifier = { who = ROOT duration = -1 power = 110 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_davharral_power value = 100 } }
				1348 = { add_trade_modifier = { who = ROOT duration = -1 power = 100 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_davharral_power value = 90 } }
				1348 = { add_trade_modifier = { who = ROOT duration = -1 power = 90 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_davharral_power value = 80 } }
				1348 = { add_trade_modifier = { who = ROOT duration = -1 power = 80 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_davharral_power value = 70 } }
				1348 = { add_trade_modifier = { who = ROOT duration = -1 power = 70 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_davharral_power value = 60 } }
				1348 = { add_trade_modifier = { who = ROOT duration = -1 power = 60 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_davharral_power value = 50 } }
				1348 = { add_trade_modifier = { who = ROOT duration = -1 power = 50 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_davharral_power value = 40 } }
				1348 = { add_trade_modifier = { who = ROOT duration = -1 power = 40 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_davharral_power value = 30 } }
				1348 = { add_trade_modifier = { who = ROOT duration = -1 power = 30 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_davharral_power value = 20 } }
				1348 = { add_trade_modifier = { who = ROOT duration = -1 power = 20 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_davharral_power value = 10 } }
				1348 = { add_trade_modifier = { who = ROOT duration = -1 power = 10 key = seghdihr_sgc_power } }
			}
		]
		[[Gulf]
			change_variable = { which = sgc_gulf_power value = $value$ } 
			1361 = { remove_trade_modifier = { who = ROOT key = seghdihr_sgc_power } }
			if = {
				limit = { check_variable = { which = sgc_gulf_power value = 300 } }
				1361 = { add_trade_modifier = { who = ROOT duration = -1 power = 300 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_gulf_power value = 290 } }
				1361 = { add_trade_modifier = { who = ROOT duration = -1 power = 290 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_gulf_power value = 280 } }
				1361 = { add_trade_modifier = { who = ROOT duration = -1 power = 280 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_gulf_power value = 270 } }
				1361 = { add_trade_modifier = { who = ROOT duration = -1 power = 270 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_gulf_power value = 260 } }
				1361 = { add_trade_modifier = { who = ROOT duration = -1 power = 260 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_gulf_power value = 250 } }
				1361 = { add_trade_modifier = { who = ROOT duration = -1 power = 250 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_gulf_power value = 240 } }
				1361 = { add_trade_modifier = { who = ROOT duration = -1 power = 240 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_gulf_power value = 230 } }
				1361 = { add_trade_modifier = { who = ROOT duration = -1 power = 230 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_gulf_power value = 220 } }
				1361 = { add_trade_modifier = { who = ROOT duration = -1 power = 220 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_gulf_power value = 210 } }
				1361 = { add_trade_modifier = { who = ROOT duration = -1 power = 210 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_gulf_power value = 200 } }
				1361 = { add_trade_modifier = { who = ROOT duration = -1 power = 200 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_gulf_power value = 190 } }
				1361 = { add_trade_modifier = { who = ROOT duration = -1 power = 190 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_gulf_power value = 180 } }
				1361 = { add_trade_modifier = { who = ROOT duration = -1 power = 180 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_gulf_power value = 170 } }
				1361 = { add_trade_modifier = { who = ROOT duration = -1 power = 170 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_gulf_power value = 160 } }
				1361 = { add_trade_modifier = { who = ROOT duration = -1 power = 160 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_gulf_power value = 150 } }
				1361 = { add_trade_modifier = { who = ROOT duration = -1 power = 150 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_gulf_power value = 140 } }
				1361 = { add_trade_modifier = { who = ROOT duration = -1 power = 140 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_gulf_power value = 130 } }
				1361 = { add_trade_modifier = { who = ROOT duration = -1 power = 130 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_gulf_power value = 120 } }
				1361 = { add_trade_modifier = { who = ROOT duration = -1 power = 120 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_gulf_power value = 110 } }
				1361 = { add_trade_modifier = { who = ROOT duration = -1 power = 110 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_gulf_power value = 100 } }
				1361 = { add_trade_modifier = { who = ROOT duration = -1 power = 100 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_gulf_power value = 90 } }
				1361 = { add_trade_modifier = { who = ROOT duration = -1 power = 90 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_gulf_power value = 80 } }
				1361 = { add_trade_modifier = { who = ROOT duration = -1 power = 80 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_gulf_power value = 70 } }
				1361 = { add_trade_modifier = { who = ROOT duration = -1 power = 70 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_gulf_power value = 60 } }
				1361 = { add_trade_modifier = { who = ROOT duration = -1 power = 60 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_gulf_power value = 50 } }
				1361 = { add_trade_modifier = { who = ROOT duration = -1 power = 50 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_gulf_power value = 40 } }
				1361 = { add_trade_modifier = { who = ROOT duration = -1 power = 40 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_gulf_power value = 30 } }
				1361 = { add_trade_modifier = { who = ROOT duration = -1 power = 30 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_gulf_power value = 20 } }
				1361 = { add_trade_modifier = { who = ROOT duration = -1 power = 20 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_gulf_power value = 10 } }
				1361 = { add_trade_modifier = { who = ROOT duration = -1 power = 10 key = seghdihr_sgc_power } }
			}
		]
		[[Dhen]
			change_variable = { which = sgc_dhen_power value = $value$ } 
			4435 = { remove_trade_modifier = { who = ROOT key = seghdihr_sgc_power } }
			if = {
				limit = { check_variable = { which = sgc_dhen_power value = 200 } }
				4435 = { add_trade_modifier = { who = ROOT duration = -1 power = 200 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_dhen_power value = 190 } }
				4435 = { add_trade_modifier = { who = ROOT duration = -1 power = 190 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_dhen_power value = 180 } }
				4435 = { add_trade_modifier = { who = ROOT duration = -1 power = 180 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_dhen_power value = 170 } }
				4435 = { add_trade_modifier = { who = ROOT duration = -1 power = 170 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_dhen_power value = 160 } }
				4435 = { add_trade_modifier = { who = ROOT duration = -1 power = 160 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_dhen_power value = 150 } }
				4435 = { add_trade_modifier = { who = ROOT duration = -1 power = 150 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_dhen_power value = 140 } }
				4435 = { add_trade_modifier = { who = ROOT duration = -1 power = 140 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_dhen_power value = 130 } }
				4435 = { add_trade_modifier = { who = ROOT duration = -1 power = 130 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_dhen_power value = 120 } }
				4435 = { add_trade_modifier = { who = ROOT duration = -1 power = 120 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_dhen_power value = 110 } }
				4435 = { add_trade_modifier = { who = ROOT duration = -1 power = 110 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_dhen_power value = 100 } }
				4435 = { add_trade_modifier = { who = ROOT duration = -1 power = 100 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_dhen_power value = 90 } }
				4435 = { add_trade_modifier = { who = ROOT duration = -1 power = 90 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_dhen_power value = 80 } }
				4435 = { add_trade_modifier = { who = ROOT duration = -1 power = 80 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_dhen_power value = 70 } }
				4435 = { add_trade_modifier = { who = ROOT duration = -1 power = 70 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_dhen_power value = 60 } }
				4435 = { add_trade_modifier = { who = ROOT duration = -1 power = 60 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_dhen_power value = 50 } }
				4435 = { add_trade_modifier = { who = ROOT duration = -1 power = 50 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_dhen_power value = 40 } }
				4435 = { add_trade_modifier = { who = ROOT duration = -1 power = 40 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_dhen_power value = 30 } }
				4435 = { add_trade_modifier = { who = ROOT duration = -1 power = 30 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_dhen_power value = 20 } }
				4435 = { add_trade_modifier = { who = ROOT duration = -1 power = 20 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_dhen_power value = 10 } }
				4435 = { add_trade_modifier = { who = ROOT duration = -1 power = 10 key = seghdihr_sgc_power } }
			}
		]
		[[Rahen]
			change_variable = { which = sgc_rahen_power value = $value$ } 
			4485 = { remove_trade_modifier = { who = ROOT key = seghdihr_sgc_power } }
			if = {
				limit = { check_variable = { which = sgc_rahen_power value = 180 } }
				4485 = { add_trade_modifier = { who = ROOT duration = -1 power = 180 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_rahen_power value = 170 } }
				4485 = { add_trade_modifier = { who = ROOT duration = -1 power = 170 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_rahen_power value = 160 } }
				4485 = { add_trade_modifier = { who = ROOT duration = -1 power = 160 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_rahen_power value = 150 } }
				4485 = { add_trade_modifier = { who = ROOT duration = -1 power = 150 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_rahen_power value = 140 } }
				4485 = { add_trade_modifier = { who = ROOT duration = -1 power = 140 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_rahen_power value = 130 } }
				4485 = { add_trade_modifier = { who = ROOT duration = -1 power = 130 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_rahen_power value = 120 } }
				4485 = { add_trade_modifier = { who = ROOT duration = -1 power = 120 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_rahen_power value = 110 } }
				4485 = { add_trade_modifier = { who = ROOT duration = -1 power = 110 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_rahen_power value = 100 } }
				4485 = { add_trade_modifier = { who = ROOT duration = -1 power = 100 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_rahen_power value = 90 } }
				4485 = { add_trade_modifier = { who = ROOT duration = -1 power = 90 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_rahen_power value = 80 } }
				4485 = { add_trade_modifier = { who = ROOT duration = -1 power = 80 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_rahen_power value = 70 } }
				4485 = { add_trade_modifier = { who = ROOT duration = -1 power = 70 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_rahen_power value = 60 } }
				4485 = { add_trade_modifier = { who = ROOT duration = -1 power = 60 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_rahen_power value = 50 } }
				4485 = { add_trade_modifier = { who = ROOT duration = -1 power = 50 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_rahen_power value = 40 } }
				4485 = { add_trade_modifier = { who = ROOT duration = -1 power = 40 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_rahen_power value = 30 } }
				4485 = { add_trade_modifier = { who = ROOT duration = -1 power = 30 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_rahen_power value = 20 } }
				4485 = { add_trade_modifier = { who = ROOT duration = -1 power = 20 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_rahen_power value = 10 } }
				4485 = { add_trade_modifier = { who = ROOT duration = -1 power = 10 key = seghdihr_sgc_power } }
			}
		]
		[[Nadimraj]
			change_variable = { which = sgc_nadimraj_power value = $value$ } 
			4460 = { remove_trade_modifier = { who = ROOT key = seghdihr_sgc_power } }
			if = {
				limit = { check_variable = { which = sgc_nadimraj_power value = 180 } }
				4460 = { add_trade_modifier = { who = ROOT duration = -1 power = 180 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_nadimraj_power value = 170 } }
				4460 = { add_trade_modifier = { who = ROOT duration = -1 power = 170 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_nadimraj_power value = 160 } }
				4460 = { add_trade_modifier = { who = ROOT duration = -1 power = 160 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_nadimraj_power value = 150 } }
				4460 = { add_trade_modifier = { who = ROOT duration = -1 power = 150 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_nadimraj_power value = 140 } }
				4460 = { add_trade_modifier = { who = ROOT duration = -1 power = 140 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_nadimraj_power value = 130 } }
				4460 = { add_trade_modifier = { who = ROOT duration = -1 power = 130 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_nadimraj_power value = 120 } }
				4460 = { add_trade_modifier = { who = ROOT duration = -1 power = 120 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_nadimraj_power value = 110 } }
				4460 = { add_trade_modifier = { who = ROOT duration = -1 power = 110 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_nadimraj_power value = 100 } }
				4460 = { add_trade_modifier = { who = ROOT duration = -1 power = 100 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_nadimraj_power value = 90 } }
				4460 = { add_trade_modifier = { who = ROOT duration = -1 power = 90 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_nadimraj_power value = 80 } }
				4460 = { add_trade_modifier = { who = ROOT duration = -1 power = 80 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_nadimraj_power value = 70 } }
				4460 = { add_trade_modifier = { who = ROOT duration = -1 power = 70 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_nadimraj_power value = 60 } }
				4460 = { add_trade_modifier = { who = ROOT duration = -1 power = 60 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_nadimraj_power value = 50 } }
				4460 = { add_trade_modifier = { who = ROOT duration = -1 power = 50 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_nadimraj_power value = 40 } }
				4460 = { add_trade_modifier = { who = ROOT duration = -1 power = 40 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_nadimraj_power value = 30 } }
				4460 = { add_trade_modifier = { who = ROOT duration = -1 power = 30 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_nadimraj_power value = 20 } }
				4460 = { add_trade_modifier = { who = ROOT duration = -1 power = 20 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_nadimraj_power value = 10 } }
				4460 = { add_trade_modifier = { who = ROOT duration = -1 power = 10 key = seghdihr_sgc_power } }
			}
		]

		[[Kharun]
			change_variable = { which = sgc_kharun_power value = $value$ } 
			4500 = { remove_trade_modifier = { who = ROOT key = seghdihr_sgc_power } }
			if = {
				limit = { check_variable = { which = sgc_kharun_power value = 210 } }
				4500 = { add_trade_modifier = { who = ROOT duration = -1 power = 210 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_kharun_power value = 200 } }
				4500 = { add_trade_modifier = { who = ROOT duration = -1 power = 200 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_kharun_power value = 190 } }
				4500 = { add_trade_modifier = { who = ROOT duration = -1 power = 190 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_kharun_power value = 180 } }
				4500 = { add_trade_modifier = { who = ROOT duration = -1 power = 180 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_kharun_power value = 170 } }
				4500 = { add_trade_modifier = { who = ROOT duration = -1 power = 170 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_kharun_power value = 160 } }
				4500 = { add_trade_modifier = { who = ROOT duration = -1 power = 160 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_kharun_power value = 150 } }
				4500 = { add_trade_modifier = { who = ROOT duration = -1 power = 150 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_kharun_power value = 140 } }
				4500 = { add_trade_modifier = { who = ROOT duration = -1 power = 140 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_kharun_power value = 130 } }
				4500 = { add_trade_modifier = { who = ROOT duration = -1 power = 130 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_kharun_power value = 120 } }
				4500 = { add_trade_modifier = { who = ROOT duration = -1 power = 120 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_kharun_power value = 110 } }
				4500 = { add_trade_modifier = { who = ROOT duration = -1 power = 110 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_kharun_power value = 100 } }
				4500 = { add_trade_modifier = { who = ROOT duration = -1 power = 100 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_kharun_power value = 90 } }
				4500 = { add_trade_modifier = { who = ROOT duration = -1 power = 90 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_kharun_power value = 80 } }
				4500 = { add_trade_modifier = { who = ROOT duration = -1 power = 80 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_kharun_power value = 70 } }
				4500 = { add_trade_modifier = { who = ROOT duration = -1 power = 70 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_kharun_power value = 60 } }
				4500 = { add_trade_modifier = { who = ROOT duration = -1 power = 60 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_kharun_power value = 50 } }
				4500 = { add_trade_modifier = { who = ROOT duration = -1 power = 50 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_kharun_power value = 40 } }
				4500 = { add_trade_modifier = { who = ROOT duration = -1 power = 40 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_kharun_power value = 30 } }
				4500 = { add_trade_modifier = { who = ROOT duration = -1 power = 30 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_kharun_power value = 20 } }
				4500 = { add_trade_modifier = { who = ROOT duration = -1 power = 20 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_kharun_power value = 10 } }
				4500 = { add_trade_modifier = { who = ROOT duration = -1 power = 10 key = seghdihr_sgc_power } }
			}
		]
		[[Xia]
			change_variable = { which = sgc_xia_power value = $value$ } 
			4559 = { remove_trade_modifier = { who = ROOT key = seghdihr_sgc_power } }
			if = {
				limit = { check_variable = { which = sgc_xia_power value = 190 } }
				4559 = { add_trade_modifier = { who = ROOT duration = -1 power = 190 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_xia_power value = 180 } }
				4559 = { add_trade_modifier = { who = ROOT duration = -1 power = 180 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_xia_power value = 170 } }
				4559 = { add_trade_modifier = { who = ROOT duration = -1 power = 170 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_xia_power value = 160 } }
				4559 = { add_trade_modifier = { who = ROOT duration = -1 power = 160 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_xia_power value = 150 } }
				4559 = { add_trade_modifier = { who = ROOT duration = -1 power = 150 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_xia_power value = 140 } }
				4559 = { add_trade_modifier = { who = ROOT duration = -1 power = 140 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_xia_power value = 130 } }
				4559 = { add_trade_modifier = { who = ROOT duration = -1 power = 130 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_xia_power value = 120 } }
				4559 = { add_trade_modifier = { who = ROOT duration = -1 power = 120 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_xia_power value = 110 } }
				4559 = { add_trade_modifier = { who = ROOT duration = -1 power = 110 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_xia_power value = 100 } }
				4559 = { add_trade_modifier = { who = ROOT duration = -1 power = 100 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_xia_power value = 90 } }
				4559 = { add_trade_modifier = { who = ROOT duration = -1 power = 90 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_xia_power value = 80 } }
				4559 = { add_trade_modifier = { who = ROOT duration = -1 power = 80 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_xia_power value = 70 } }
				4559 = { add_trade_modifier = { who = ROOT duration = -1 power = 70 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_xia_power value = 60 } }
				4559 = { add_trade_modifier = { who = ROOT duration = -1 power = 60 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_xia_power value = 50 } }
				4559 = { add_trade_modifier = { who = ROOT duration = -1 power = 50 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_xia_power value = 40 } }
				4559 = { add_trade_modifier = { who = ROOT duration = -1 power = 40 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_xia_power value = 30 } }
				4559 = { add_trade_modifier = { who = ROOT duration = -1 power = 30 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_xia_power value = 20 } }
				4559 = { add_trade_modifier = { who = ROOT duration = -1 power = 20 key = seghdihr_sgc_power } }
			}
			else_if = {
				limit = { check_variable = { which = sgc_xia_power value = 10 } }
				4559 = { add_trade_modifier = { who = ROOT duration = -1 power = 10 key = seghdihr_sgc_power } }
			}
		]
	}
}
seghdihr_sgc_adm_missing_req = {
	if = {
		limit = { NOT = { treasury = 750 } }
		custom_tooltip = seghdihr_sgc_missing_req_750g
	}
	if = {
		limit = { NOT = { adm_power = 100 } }
		custom_tooltip = seghdihr_sgc_missing_req_100adm
	}
	if = {
		limit = { seghdihr_sgc_adm_req = yes }
		custom_tooltip = seghdihr_sgc_node_busy
	}
}
seghdihr_sgc_dip_missing_req = {
	if = {
		limit = { NOT = { treasury = 500 } }
		custom_tooltip = seghdihr_sgc_missing_req_500g
	}
	if = {
		limit = { NOT = { dip_power = 100 } }
		custom_tooltip = seghdihr_sgc_missing_req_100dip
	}
	if = {
		limit = { seghdihr_sgc_dip_req = yes }
		custom_tooltip = seghdihr_sgc_node_busy
	}
}
seghdihr_sgc_mil_missing_req = {
	if = {
		limit = { NOT = { manpower = 10 } }
		custom_tooltip = seghdihr_sgc_missing_req_10kman
	}
	if = {
		limit = { NOT = { mil_power = 100 } }
		custom_tooltip = seghdihr_sgc_missing_req_100mil
	}
	if = {
		limit = { seghdihr_sgc_mil_req = yes }
		custom_tooltip = seghdihr_sgc_node_busy
	}
}
seghdihr_sgc_adm_cost = {
	add_treasury = -750
	add_adm_power = -100
}
seghdihr_sgc_dip_cost = {
	add_treasury = -500
	add_dip_power = -100
}
seghdihr_sgc_mil_cost = {
	add_manpower = -10
	add_mil_power = -100
}

#############
##Skurkokli##
#############
ogre_battle_count_win = {
	if = {
		limit = { tag = J47 has_ruler_flag = is_rancor }
		change_variable = { nbCharge = 1 }
		change_variable = { totalBattle = 1 }
		set_variable = {
			which = battleWinRate
			which = nbCharge
		}
		divide_variable = {
			which = battleWinRate
			which = totalBattle
		}
		multiply_variable = {
			which = battleWinRate
			value = 100
		}
	}
}

###################
##Hul-az-Krakazol##
###################
krakazol_clr_drunk_modifiers = {
	if = {
		limit = { krakazol_is_drunk = { Drunk = yes } }
		custom_tooltip = krakazol_clr_drunk_modifiers_tooltip
		hidden_effect = {
			remove_country_modifier = krakazol_drinking_tipsy
			remove_country_modifier = krakazol_drinking_drunk
			remove_country_modifier = krakazol_drinking_hammered
		}
	}
}
krakazol_clr_ale_modifiers = {
	hidden_effect = {
		remove_country_modifier = krakazol_drinking_iron_1
		remove_country_modifier = krakazol_drinking_iron_2
		remove_country_modifier = krakazol_drinking_iron_3
		remove_country_modifier = krakazol_drinking_iron_4
		remove_country_modifier = krakazol_drinking_iron_5
		remove_country_modifier = krakazol_drinking_iron_6
		remove_country_modifier = krakazol_drinking_iron_7
		remove_country_modifier = krakazol_drinking_dark_1
		remove_country_modifier = krakazol_drinking_dark_2
		remove_country_modifier = krakazol_drinking_dark_3
		remove_country_modifier = krakazol_drinking_dark_4
		remove_country_modifier = krakazol_drinking_dark_5
		remove_country_modifier = krakazol_drinking_dark_6
		remove_country_modifier = krakazol_drinking_dark_7
		remove_country_modifier = krakazol_drinking_beard_1
		remove_country_modifier = krakazol_drinking_beard_2
		remove_country_modifier = krakazol_drinking_beard_3
		remove_country_modifier = krakazol_drinking_beard_4
		remove_country_modifier = krakazol_drinking_beard_5
		remove_country_modifier = krakazol_drinking_beard_6
		remove_country_modifier = krakazol_drinking_beard_7
		remove_country_modifier = krakazol_drinking_digging_1
		remove_country_modifier = krakazol_drinking_digging_2
		remove_country_modifier = krakazol_drinking_digging_3
		remove_country_modifier = krakazol_drinking_digging_4
		remove_country_modifier = krakazol_drinking_digging_5
		remove_country_modifier = krakazol_drinking_digging_6
		remove_country_modifier = krakazol_drinking_digging_7
		remove_country_modifier = krakazol_drinking_heart_1
		remove_country_modifier = krakazol_drinking_heart_2
		remove_country_modifier = krakazol_drinking_heart_3
		remove_country_modifier = krakazol_drinking_heart_4
		remove_country_modifier = krakazol_drinking_heart_5
		remove_country_modifier = krakazol_drinking_heart_6
		remove_country_modifier = krakazol_drinking_heart_7
		remove_country_modifier = krakazol_drinking_yellow_1
		remove_country_modifier = krakazol_drinking_yellow_2
		remove_country_modifier = krakazol_drinking_yellow_3
		remove_country_modifier = krakazol_drinking_yellow_4
		remove_country_modifier = krakazol_drinking_yellow_5
		remove_country_modifier = krakazol_drinking_yellow_6
		remove_country_modifier = krakazol_drinking_yellow_7
		remove_country_modifier = krakazol_drinking_gizzard_1
		remove_country_modifier = krakazol_drinking_gizzard_2
		remove_country_modifier = krakazol_drinking_gizzard_3
		remove_country_modifier = krakazol_drinking_gizzard_4
		remove_country_modifier = krakazol_drinking_gizzard_5
		remove_country_modifier = krakazol_drinking_gizzard_6
		remove_country_modifier = krakazol_drinking_gizzard_7
		remove_country_modifier = krakazol_drinking_shattered_1
		remove_country_modifier = krakazol_drinking_shattered_2
		remove_country_modifier = krakazol_drinking_shattered_3
		remove_country_modifier = krakazol_drinking_shattered_4
		remove_country_modifier = krakazol_drinking_shattered_5
		remove_country_modifier = krakazol_drinking_shattered_6
		remove_country_modifier = krakazol_drinking_shattered_7
		remove_country_modifier = krakazol_drinking_gut_1
		remove_country_modifier = krakazol_drinking_gut_2
		remove_country_modifier = krakazol_drinking_gut_3
		remove_country_modifier = krakazol_drinking_gut_4
		remove_country_modifier = krakazol_drinking_gut_5
		remove_country_modifier = krakazol_drinking_gut_6
		remove_country_modifier = krakazol_drinking_gut_7
		remove_country_modifier = krakazol_drinking_dispute_1
		remove_country_modifier = krakazol_drinking_dispute_2
		remove_country_modifier = krakazol_drinking_dispute_3
		remove_country_modifier = krakazol_drinking_dispute_4
		remove_country_modifier = krakazol_drinking_dispute_5
		remove_country_modifier = krakazol_drinking_dispute_6
		remove_country_modifier = krakazol_drinking_dispute_7
		remove_country_modifier = krakazol_drinking_belly_1
		remove_country_modifier = krakazol_drinking_belly_2
		remove_country_modifier = krakazol_drinking_belly_3
		remove_country_modifier = krakazol_drinking_belly_4
		remove_country_modifier = krakazol_drinking_belly_5
		remove_country_modifier = krakazol_drinking_belly_6
		remove_country_modifier = krakazol_drinking_belly_7
		remove_country_modifier = krakazol_drinking_ancestor_1
		remove_country_modifier = krakazol_drinking_ancestor_2
		remove_country_modifier = krakazol_drinking_ancestor_3
		remove_country_modifier = krakazol_drinking_ancestor_4
		remove_country_modifier = krakazol_drinking_ancestor_5
		remove_country_modifier = krakazol_drinking_ancestor_6
		remove_country_modifier = krakazol_drinking_ancestor_7
		set_variable = { experienceModifier = 0 } #mage drink
	}
}
krakazol_clr_perm_modifiers = {
	hidden_effect = {
		remove_country_modifier = krakazol_drinking_iron_perm
		remove_country_modifier = krakazol_drinking_dark_perm
		remove_country_modifier = krakazol_drinking_beard_perm
		remove_country_modifier = krakazol_drinking_digging_perm
		remove_country_modifier = krakazol_drinking_heart_perm
		remove_country_modifier = krakazol_drinking_yellow_perm
		remove_country_modifier = krakazol_drinking_gizzard_perm
		remove_country_modifier = krakazol_drinking_shattered_perm
		remove_country_modifier = krakazol_drinking_gut_perm
		remove_country_modifier = krakazol_drinking_dispute_perm
		remove_country_modifier = krakazol_drinking_belly_perm
		remove_country_modifier = krakazol_drinking_ancestor_perm
	}
}
krakazol_clr_drinking_flags = {
	hidden_effect = {
		clr_ruler_flag = krakazol_ruler_drinking_iron
		clr_ruler_flag = krakazol_ruler_drinking_dark
		clr_ruler_flag = krakazol_ruler_drinking_beard
		clr_ruler_flag = krakazol_ruler_drinking_digging
		clr_ruler_flag = krakazol_ruler_drinking_heart
		clr_ruler_flag = krakazol_ruler_drinking_yellow
		clr_ruler_flag = krakazol_ruler_drinking_gizzard
		clr_ruler_flag = krakazol_ruler_drinking_shattered
		clr_ruler_flag = krakazol_ruler_drinking_gut
		clr_ruler_flag = krakazol_ruler_drinking_dispute
		clr_ruler_flag = krakazol_ruler_drinking_belly
		clr_ruler_flag = krakazol_ruler_drinking_ancestor
		clr_country_flag = krakazol_drinking_menu_open
	}
}
krakazol_drink_effect = {
	krakazol_clr_ale_modifiers = yes
	trigger_switch = {
		on_trigger = has_ruler_flag
				#tier 1
		krakazol_ruler_drinking_iron = { add_ruler_modifier = { name = krakazol_drinking_iron_$Round$ duration = 5475 } krakazol_drink_cost = { Low = yes } }
		krakazol_ruler_drinking_dark = { add_ruler_modifier = { name = krakazol_drinking_dark_$Round$ duration = 5475 } krakazol_drink_cost = { Low = yes } }
		krakazol_ruler_drinking_beard = { add_ruler_modifier = { name = krakazol_drinking_beard_$Round$ duration = 5475 } krakazol_drink_cost = { Low = yes } }
		krakazol_ruler_drinking_digging = { add_ruler_modifier = { name = krakazol_drinking_digging_$Round$ duration = 5475 } custom_tooltip = krakazol_drinking_digging_$Round$_tooltip krakazol_drink_cost = { Low = yes } }
		#tier 2
		krakazol_ruler_drinking_heart = { add_ruler_modifier = { name = krakazol_drinking_heart_$Round$ duration = 5475 } krakazol_drink_cost = { Med = yes } }
		krakazol_ruler_drinking_yellow = { add_ruler_modifier = { name = krakazol_drinking_yellow_$Round$ duration = 5475 } krakazol_drink_cost = { Med = yes } }
		krakazol_ruler_drinking_gizzard = { add_ruler_modifier = { name = krakazol_drinking_gizzard_$Round$ duration = 5475 } krakazol_drink_cost = { Med = yes } }
		krakazol_ruler_drinking_shattered = { add_ruler_modifier = { name = krakazol_drinking_shattered_$Round$ duration = 5475 } krakazol_drink_cost = { Med = yes } }

		#tier 3
		krakazol_ruler_drinking_gut = { add_ruler_modifier = { name = krakazol_drinking_gut_$Round$ duration = 5475 } krakazol_drink_cost = { High = yes } }
		krakazol_ruler_drinking_dispute = { add_ruler_modifier = { name = krakazol_drinking_dispute_$Round$ duration = 5475 } krakazol_drink_cost = { High = yes } }
		krakazol_ruler_drinking_belly = { add_ruler_modifier = { name = krakazol_drinking_belly_$Round$ duration = 5475 } krakazol_drink_cost = { High = yes } }
		krakazol_ruler_drinking_ancestor = { 
			add_ruler_modifier = { name = krakazol_drinking_ancestor_$Round$ duration = 5475 } 
			if = {
				limit = { check_variable = { drink_lvl = 5 } }
				if = {
					limit = { NOT = { ruler_has_personality = mage_personality } }
					force_add_ruler_personality = { personality = mage_personality }
				}
				custom_tooltip = add_magic_study_modifier_10_tt
				#done this way because it gets reset to 0 with every round
				if = {
					limit = { check_variable = { drink_lvl = 7 } }
					update_magic_study_experience_modifier = { value = 30 }
				}
				else_if = {
					limit = { check_variable = { drink_lvl = 6 } }
					update_magic_study_experience_modifier = { value = 20 }
				}
				else = { update_magic_study_experience_modifier = { value = 10 } }
			}
			krakazol_drink_cost = { High = yes } 
		}
	}
	custom_tooltip = krakazol_empty_tooltip
}
krakazol_drink_cost = {
	[[Low]
		if = {
			limit = { has_country_modifier = krakazol_keglord_flagon }
			if = {
				limit = { has_ruler_flag = krakazol_ruler_drinking_digging }
				add_years_of_income = -0.12
			}
			else = { add_years_of_income = -0.06 }
		}
		else_if = {
			limit = { has_ruler_flag = krakazol_ruler_drinking_digging }
			add_years_of_income = -0.16
		}
		else = { add_years_of_income = -0.1 }
	]
	[[Med]
		if = {
			limit = { has_country_modifier = krakazol_keglord_alethrone }
			if = {
				limit = { has_ruler_flag = krakazol_ruler_drinking_yellow }
				add_years_of_income = -0.06
			}
			else = { add_years_of_income = -0.11 }
		}
		else = { 
			if = {
				limit = { has_ruler_flag = krakazol_ruler_drinking_yellow }
				add_years_of_income = -0.1
			}
			else = { add_years_of_income = -0.14 } 
		}
	]
	[[High]
		if = {
			limit = { has_ruler_flag = krakazol_ruler_drinking_ancestor }
			add_years_of_income = -0.23
		}
		else = { add_years_of_income = -0.17 }
	]
}
krakazol_drink_death_effect = {
	if = {
		limit = { has_ruler_modifier = krakazol_legendary_quest }
		add_ruler_modifier = { name = krakazol_drinking_$type$ duration = 1460 }
	}
	else = {
		random_list = {
			95 = {
				add_ruler_modifier = { name = krakazol_drinking_$type$ duration = 1460 }
			}
			5 = {
				set_ruler_flag = krakazol_died
				kill_ruler = yes
				modifier = {
					factor = $Base$
					always = yes
				}

				#drink potency
				modifier = {
					factor = 0.8
					has_ruler_flag = krakazol_ruler_drinking_yellow  #balance, this drink is cheaper so no easy deaths
				}
				modifier = {
					factor = 1.1
					has_ruler_flag = krakazol_ruler_drinking_dark  #lore reasons
				}

				#age
				modifier = {
					factor = 1.1
					ruler_age = 83
				}
				modifier = {
					factor = 1.1
					ruler_age = 86
				}
				modifier = {
					factor = 1.1
					ruler_age = 89
				}
				modifier = {
					factor = 1.1
					ruler_age = 92
				}
				modifier = {
					factor = 1.1
					ruler_age = 95
				}
				modifier = {
					factor = 1.1
					ruler_age = 98
				}
				modifier = {
					factor = 1.1
					ruler_age = 101
				}
				modifier = {
					factor = 1.1
					ruler_age = 104
				}

				#mil skills, stronger fighters would rather die in battle
				modifier = {
					factor = 0.9
					mil = 4
				}
				modifier = {
					factor = 0.8
					mil = 5
				}
				modifier = {
					factor = 0.8
					mil = 6
				}
				modifier = {
					factor = 0.8
					OR = {
						ruler_has_personality = tactical_genius_personality
						ruler_has_personality = bold_fighter_personality
						ruler_has_personality = inspiring_leader_personality
						ruler_has_personality = conqueror_personality
					}
				}
				modifier = {
					factor = 0.7
					ruler_has_personality = strict_personality
				}
				

				#"good" personalities
				modifier = {
					factor = 0.9
					ruler_has_personality = calm_personality
				}
				modifier = {
					factor = 0.8
					ruler_has_personality = careful_personality
				}
				modifier = {
					factor = 0.9
					ruler_has_personality = fertile_personality
				}
				modifier = {
					factor = 0.8
					ruler_has_personality = well_advised_personality
				}
				modifier = {
					factor = 0.9
					ruler_has_personality = lawgiver_personality
				}
				modifier = {
					factor = 0.8
					OR = {
						ruler_has_personality = scholar_personality
						ruler_has_personality = free_thinker_personality
					}
				}

				#"bad" personalities
				modifier = {
					factor = 1.5
					ruler_has_personality = babbling_buffoon_personality
				}
				modifier = {
					factor = 2
					ruler_has_personality = drunkard_personality #indulgent
				}
				modifier = {
					factor = 1.25
					ruler_has_personality = greedy_personality
				}
				modifier = {
					factor = 1.25
					ruler_has_personality = loose_lips_personality
				}


				#policies
				modifier = {
					factor = 0.8
					has_active_policy = public_welfare_act
				}
				modifier = {
					factor = 0.5
					has_active_policy = the_liquor_act #you monster
				}
				modifier = {
					factor = 0.8
					has_active_policy = the_tenures_abolition_act
				}
				modifier = {
					factor = 1.2
					has_active_policy = agricultural_cultivations
				}
				modifier = {
					factor = 1.2
					has_active_policy = production_quota_act
				}
			}
		}
	}
}
krakazol_slaying_effect = {
	[[Track]
		random_list = {
			#success
			50 = {
				#ruler dip
				modifier = {
					factor = 0.8
					NOT = { dip = 2 }
				}
				modifier = {
					factor = 1.25
					dip = 4
				}
				modifier = {
					factor = 1.25
					dip = 5
				}
				modifier = {
					factor = 1.5
					dip = 6
				}

				#ruler traits
				modifier = {
					factor = 1.2
					OR = {
						ruler_has_personality = free_thinker_personality
						ruler_has_personality = calm_personality
						ruler_has_personality = well_advised_personality
					}
				}
				modifier = {
					factor = 1.5
					ruler_has_personality = careful_personality
				}
				modifier = {
					factor = 1.1
					OR = {
						ruler_has_personality = secretive_personality
						ruler_has_personality = intricate_web_weaver_personality
					}
				}
				modifier = {
					factor = 0.5
					ruler_has_personality = naive_personality
				}

				#divination magic
				modifier = {
					factor = 1.25
					has_ruler_flag = divination_1
				}
				modifier = {
					factor = 1.25
					has_ruler_flag = divination_2
				}
				modifier = {
					factor = 1.5
					has_ruler_flag = divination_3
				}

				#general stats
				modifier = {
					factor = 1.1
					has_leader_with = {
						is_monarch_leader = yes
						manuever = 3
					}
				}
				modifier = {
					factor = 1.1
					has_leader_with = {
						is_monarch_leader = yes
						manuever = 4
					}
				}
				modifier = {
					factor = 1.2
					has_leader_with = {
						is_monarch_leader = yes
						manuever = 5
					}
				}
				modifier = {
					factor = 1.2
					has_leader_with = {
						is_monarch_leader = yes
						manuever = 6
					}
				}

				#drunk
				modifier = {
					factor = 1.1
					has_ruler_modifier = krakazol_drinking_tipsy
				}
				modifier = {
					factor = 1.25
					has_ruler_modifier = krakazol_drinking_drunk
				}
				modifier = {
					factor = 1.5
					has_ruler_modifier = krakazol_drinking_hammered
				}

				#advisors
				modifier = {
					factor = 1.2
					OR = {
						spymaster = 3
						army_organiser = 3
					}
				}
				modifier = {
					factor = 1.4
					OR = {
						spymaster = 4
						army_organiser = 4
					}
				}
				modifier = {
					factor = 1.7
					OR = {
						spymaster = 5
						army_organiser = 5
					}
				}

				set_ruler_flag = krakazol_slaying_tracking_success
				custom_tooltip = krakazol_successful_tracking
				hidden_effect = { country_event = { id = flavor_krakazol.$ID$ days = 30 random = 10 } }
			}
			
			#failure
			50 = {
				modifier = {
					factor = $Difficulty$
					always = yes
				}
				custom_tooltip = krakazol_failed_tracking
				hidden_effect = { country_event = { id = flavor_krakazol.$ID$ days = 60 random = 30 } }
			}
		}
	]
	[[Prep]
		random_list = {
			#success
			50 = {
				#ruler adm
				modifier = {
					factor = 0.8
					NOT = { adm = 2 }
				}
				modifier = {
					factor = 1.25
					adm = 4
				}
				modifier = {
					factor = 1.25
					adm = 5
				}
				modifier = {
					factor = 1.5
					adm = 6
				}

				#ruler traits
				modifier = {
					factor = 1.2
					OR = {
						ruler_has_personality = free_thinker_personality
						ruler_has_personality = calm_personality
						ruler_has_personality = tolerant_personality
					}
				}
				modifier = {
					factor = 1.5
					OR = {
						ruler_has_personality = industrious_personality
						ruler_has_personality = architectural_visionary_personality
					}
				}
				modifier = {
					factor = 0.5
					ruler_has_personality = obsessive_perfectionist_personality
				}

				#enchantment magic
				modifier = {
					factor = 1.1
					has_ruler_flag = enchantment_1
				}
				modifier = {
					factor = 1.2
					has_ruler_flag = enchantment_2
				}
				modifier = {
					factor = 1.3
					has_ruler_flag = enchantment_3
				}

				#general stats
				modifier = {
					factor = 1.1
					has_leader_with = {
						is_monarch_leader = yes
						siege = 3
					}
				}
				modifier = {
					factor = 1.1
					has_leader_with = {
						is_monarch_leader = yes
						siege = 4
					}
				}
				modifier = {
					factor = 1.2
					has_leader_with = {
						is_monarch_leader = yes
						siege = 5
					}
				}
				modifier = {
					factor = 1.2
					has_leader_with = {
						is_monarch_leader = yes
						siege = 6
					}
				}

				#drunk
				modifier = {
					factor = 1.1
					has_ruler_modifier = krakazol_drinking_tipsy
				}
				modifier = {
					factor = 1.25
					has_ruler_modifier = krakazol_drinking_drunk
				}
				modifier = {
					factor = 1.5
					has_ruler_modifier = krakazol_drinking_hammered
				}

				#advisors
				modifier = {
					factor = 1.2
					OR = {
						natural_scientist = 3
						fortification_expert = 3
					}
				}
				modifier = {
					factor = 1.4
					OR = {
						natural_scientist = 4
						fortification_expert = 4
					}
				}
				modifier = {
					factor = 1.7
					OR = {
						natural_scientist = 5
						fortification_expert = 5
					}
				}

				set_ruler_flag = krakazol_slaying_prep_success
				custom_tooltip = krakazol_successful_prep
				hidden_effect = { country_event = { id = flavor_krakazol.$ID$ days = 30 random = 10 } }
			}
			
			#failure
			50 = {
				modifier = {
					factor = $Difficulty$
					always = yes
				}
				custom_tooltip = krakazol_failed_prep
				hidden_effect = { country_event = { id = flavor_krakazol.$ID$ days = 60 random = 30 } }
			}
		}
	]
	[[SpecialPrep]
		random_list = {
			#success
			50 = {
				#ruler adm
				modifier = {
					factor = 0.8
					NOT = { adm = 2 }
				}
				modifier = {
					factor = 1.25
					adm = 4
				}
				modifier = {
					factor = 1.25
					adm = 5
				}
				modifier = {
					factor = 1.5
					adm = 6
				}

				#general stats
				modifier = {
					factor = 1.1
					has_leader_with = {
						is_monarch_leader = yes
						fire = 3
					}
				}
				modifier = {
					factor = 1.1
					has_leader_with = {
						is_monarch_leader = yes
						fire = 4
					}
				}
				modifier = {
					factor = 1.2
					has_leader_with = {
						is_monarch_leader = yes
						fire = 5
					}
				}
				modifier = {
					factor = 1.2
					has_leader_with = {
						is_monarch_leader = yes
						fire = 6
					}
				}

				#drunk
				modifier = {
					factor = 1.1
					has_ruler_modifier = krakazol_drinking_tipsy
				}
				modifier = {
					factor = 1.25
					has_ruler_modifier = krakazol_drinking_drunk
				}
				modifier = {
					factor = 1.5
					has_ruler_modifier = krakazol_drinking_hammered
				}

				#mt progress so it doesn't become a huge roadblock
				modifier = {
					factor = 1.5
					mission_completed = krakazol_dragged_light
				}
				modifier = {
					factor = 1.5
					mission_completed = krakazol_off_heads
				}
				modifier = {
					factor = 2
					mission_completed = krakazol_pure_spirits
				}

				set_ruler_flag = krakazol_slaying_prep2_success
				custom_tooltip = krakazol_successful_prep
				hidden_effect = { country_event = { id = flavor_krakazol.$ID$ days = 30 random = 10 } }
			}
			
			#failure
			50 = {
				modifier = {
					factor = $Difficulty$
					always = yes
				}
				custom_tooltip = krakazol_failed_prep
				hidden_effect = { country_event = { id = flavor_krakazol.$ID$ days = 60 random = 30 } }
			}
		}
	]
	[[Slaying]
		random_list = {
			#success
			50 = {
				#slaying quest
				modifier = {
					factor = 1.3
					has_ruler_flag = krakazol_slaying_tracking_success
				}
				modifier = {
					factor = 1.3
					has_ruler_flag = krakazol_slaying_prep_success
				}
				modifier = {
					factor = 1.3
					has_ruler_flag = krakazol_slaying_prep2_success
				}

				#ruler mil
				modifier = {
					factor = 0.7
					NOT = { mil = 2 } #not having 1 is impossible
				}
				modifier = {
					factor = 1.25
					mil = 4
				}
				modifier = {
					factor = 1.25
					mil = 5
				}
				modifier = {
					factor = 1.5
					mil = 6
				}

				#ruler traits
				modifier = {
					factor = 1.3
					OR = {
						ruler_has_personality = inspiring_leader_personality
						ruler_has_personality = conqueror_personality
						ruler_has_personality = strict_personality
						ruler_has_personality = martial_educator_personality
					}
				}
				modifier = {
					factor = 1.6
					OR = {
						ruler_has_personality = tactical_genius_personality
						ruler_has_personality = bold_fighter_personality
					}
				}
				modifier = {
					factor = 0.5
					ruler_has_personality = craven_personality
				}

				#mages only enchantment matters, they buff themselves not throw fireballs like cowards
				modifier = {
					factor = 1.3
					has_ruler_flag = enchantment_1
				}
				modifier = {
					factor = 1.4
					has_ruler_flag = enchantment_2
				}
				modifier = {
					factor = 1.7
					has_ruler_flag = enchantment_3
				}

				#general stats
				modifier = {
					factor = 1.2
					has_leader_with = {
						is_monarch_leader = yes
						shock = 4
					}
				}
				modifier = {
					factor = 1.4
					has_leader_with = {
						is_monarch_leader = yes
						shock = 5
					}
				}
				modifier = {
					factor = 1.6
					has_leader_with = {
						is_monarch_leader = yes
						shock = 6
					}
				}
				#no extra bonus for mage generals

				#drunk
				modifier = {
					factor = 1.1
					has_ruler_modifier = krakazol_drinking_tipsy
				}
				modifier = {
					factor = 1.25
					has_ruler_modifier = krakazol_drinking_drunk
				}
				modifier = {
					factor = 1.5
					has_ruler_modifier = krakazol_drinking_hammered
				}

				country_event = { id = flavor_krakazol.101 }
			}
			
			#failure
			50 = {
				modifier = {
					factor = $Difficulty$
					always = yes
				}
				set_ruler_flag = krakazol_slaying_in_combat
				country_event = { id = flavor_krakazol.102 }
			}
		}
	]

	[[Reward]
		trigger_switch = {
			on_trigger = has_ruler_flag

			krakazol_slaying_yeti = {
				add_adm_power = 10
				add_dip_power = 10
				add_mil_power = 10
				add_splendor = 15
				if = {
					limit = { NOT = { has_country_flag = slaying_yeti_trophy } }
					custom_tooltip = krakazol_slaying_yeti_trophy_unlocked_tooltip
					set_country_flag = slaying_yeti_trophy
				}
			}
			
			krakazol_slaying_manticore = {
				add_adm_power = 30
				add_dip_power = 30
				add_mil_power = 30
				add_splendor = 25
				if = {
					limit = { NOT = { has_country_flag = slaying_manticore_trophy } }
					custom_tooltip = krakazol_slaying_manticore_trophy_unlocked_tooltip
					set_country_flag = slaying_manticore_trophy
				}
			}
			
			krakazol_slaying_cockatrice = {
				add_adm_power = 30
				add_dip_power = 30
				add_mil_power = 30
				add_splendor = 25
				if = {
					limit = { NOT = { has_country_flag = slaying_cockatrice_trophy } }
					custom_tooltip = krakazol_slaying_cockatrice_trophy_unlocked_tooltip
					set_country_flag = slaying_cockatrice_trophy
				}
			}
			
			krakazol_slaying_baku = {
				add_adm_power = 30
				add_dip_power = 30
				add_mil_power = 30
				add_splendor = 25
				if = {
					limit = { NOT = { has_country_flag = slaying_baku_trophy } }
					custom_tooltip = krakazol_slaying_baku_trophy_unlocked_tooltip
					set_country_flag = slaying_baku_trophy
				}
			}
			
			krakazol_slaying_kirin = {
				add_adm_power = 100
				add_dip_power = 100
				add_mil_power = 100
				add_splendor = 50
			}
			
			krakazol_slaying_hydra = {
				add_adm_power = 100
				add_dip_power = 100
				add_mil_power = 100
				add_splendor = 50
			}
			
			krakazol_slaying_kirin_special = {
				add_adm_power = 150
				add_dip_power = 150
				add_mil_power = 150
				add_splendor = 100
				custom_tooltip = krakazol_slaying_kirin_trophy_unlocked_tooltip
				set_country_flag = slaying_kirin_trophy
				custom_tooltip = krakazol_slaying_kirin_unlocked_tooltip
				set_country_flag = krakazol_slaying_kirin_unlocked
			}
			
			krakazol_slaying_hydra_special = {
				add_adm_power = 150
				add_dip_power = 150
				add_mil_power = 150
				add_splendor = 100
				custom_tooltip = krakazol_slaying_hydra_trophy_unlocked_tooltip
				set_country_flag = slaying_hydra_trophy
				custom_tooltip = krakazol_slaying_hydra_unlocked_tooltip
				set_country_flag = krakazol_slaying_hydra_unlocked
			}
		}
		if = {
			limit = { check_variable = { krakazol_slaying_counter = 3 } }
			custom_tooltip = krakazol_slaying_not_dead
			reduce_stability_or_adm_power = yes
			add_prestige = -10
		}
	]
	[[Clear]
		clr_ruler_flag = krakazol_slaying_yeti
		clr_ruler_flag = krakazol_slaying_manticore
		clr_ruler_flag = krakazol_slaying_cockatrice
		clr_ruler_flag = krakazol_slaying_baku
		clr_ruler_flag = krakazol_slaying_kirin
		clr_ruler_flag = krakazol_slaying_hydra
		clr_ruler_flag = krakazol_slaying_kirin_special
		clr_ruler_flag = krakazol_slaying_hydra_special
		clr_ruler_flag = krakazol_slaying_tracking_success
		clr_ruler_flag = krakazol_slaying_prep_success
		clr_ruler_flag = krakazol_slaying_prep2_success
		remove_country_modifier = krakazol_slaying_quest
	]
}

##########
##Ameion##
##########

ameion_taychend_cores = { #This fires in 1444, but only if Ameion is a player
	south_america = {
		limit = { 
			OR = {
				culture = larankarha
				culture = kalavendhi
			}
		}
		if = {
			limit = { is_core = G65 }
			set_province_flag = G52_c_G65
		}
		if = {
			limit = { is_core = G66 }
			set_province_flag = G52_c_G66
		}
		if = {
			limit = { is_core = G67 }
			set_province_flag = G52_c_G67
		}
		if = {
			limit = { is_core = G68 }
			set_province_flag = G52_c_G68
		}
		if = {
			limit = { is_core = G69 }
			set_province_flag = G52_c_G69
		}
		if = {
			limit = { is_core = G70 }
			set_province_flag = G52_c_G70
		}
		if = {
			limit = { is_core = G71 }
			set_province_flag = G52_c_G71
		}
		if = {
			limit = { is_core = G72 }
			set_province_flag = G52_c_G72
		}
	}
	G77 = { every_core_province = { set_province_flag = G52_c_G77 } }
	2474 = { set_province_flag = G52_c_G65 } #Not 1444
}

ameion_taychend_restore = {
	hidden_effect = {
		south_america = {
			#limit = {
			#	OR = {
			#		region = yodhanchend_region
			#		region = larankarha_highlands_region
			#	}
			#}
			if = {
				limit = { has_province_flag = G52_c_G65 }
				clr_province_flag = G52_c_G65
				add_core = G65
				cede_province = G65
			}
			if = {
				limit = { has_province_flag = G52_c_G66 }
				clr_province_flag = G52_c_G66
				add_core = G66
				cede_province = G66
			}
			if = {
				limit = { has_province_flag = G52_c_G67 }
				clr_province_flag = G52_c_G67
				add_core = G67
				cede_province = G67
			}
			if = {
				limit = { has_province_flag = G52_c_G68 }
				clr_province_flag = G52_c_G68
				add_core = G68
				cede_province = G68
			}
			if = {
				limit = { has_province_flag = G52_c_G69 }
				clr_province_flag = G52_c_G69
				add_core = G69
				cede_province = G69
			}
			if = {
				limit = { has_province_flag = G52_c_G70 }
				clr_province_flag = G52_c_G70
				add_core = G70
				cede_province = G70
			}
			if = {
				limit = { has_province_flag = G52_c_G71 }
				#clr_province_flag = G52_c_G71
				add_core = G71
				cede_province = G71
			}
			if = {
				limit = { has_province_flag = G52_c_G72 }
				clr_province_flag = G52_c_G72
				add_core = G72
				cede_province = G72
			}
			if = {
				limit = { has_province_flag = G52_c_G77 }
				clr_province_flag = G52_c_G77
				add_core = G77
				cede_province = G77
			}
			if = {
				limit = { 
					is_core = G52
					NOT = { owned_by = G52 }
					OR = {
						region = yodhanchend_region
						region = larankarha_highlands_region
					}
					NOT = { province_id = 2525 }
				}
				cede_province = G52
				add_province_modifier = { 
					name = G52_resistance
					duration = 3650
				}
				set_local_autonomy = 100
			}
			if = {
				limit = { NOT = { owned_by = G64 } }
				remove_core = G64
			}
		}
	}
}

ameion_site_mage_buff = {
	if = {
		limit = { has_country_modifier = G52_mage_7 }
		hidden_effect = { remove_country_modifier = G52_mage_7 }
		add_country_modifier = { name = G52_mage_8 duration = -1 }
	}
	else_if = {
		limit = { has_country_modifier = G52_mage_6 }
		hidden_effect = { remove_country_modifier = G52_mage_6 }
		add_country_modifier = { name = G52_mage_7 duration = -1 }
	}
	else_if = {
		limit = { has_country_modifier = G52_mage_5 }
		hidden_effect = { remove_country_modifier = G52_mage_5 }
		add_country_modifier = { name = G52_mage_6 duration = -1 }
	}
	else_if = {
		limit = { has_country_modifier = G52_mage_4 }
		hidden_effect = { remove_country_modifier = G52_mage_4 }
		add_country_modifier = { name = G52_mage_5 duration = -1 }
	}
	else_if = {
		limit = { has_country_modifier = G52_mage_3 }
		hidden_effect = { remove_country_modifier = G52_mage_3 }
		add_country_modifier = { name = G52_mage_4 duration = -1 }
	}
	else_if = {
		limit = { has_country_modifier = G52_mage_2 }
		hidden_effect = { remove_country_modifier = G52_mage_2 }
		add_country_modifier = { name = G52_mage_3 duration = -1 }
	}
	else_if = {
		limit = { has_country_modifier = G52_mage_1 }
		hidden_effect = { remove_country_modifier = G52_mage_1 }
		add_country_modifier = { name = G52_mage_2 duration = -1 }
	}
	else = {
		add_country_modifier = { name = G52_mage_1 duration = -1 }
	}
}

ameion_check_site = {
	if = {
		limit = { $PROVINCE$ = { NOT = { religion = kheionism } } }
		custom_tooltip = ameion_site_not_kheionism
	}
	else = { custom_tooltip = ameion_site_kheionism }
	if = {
		limit = { $PROVINCE$ = { NOT = { culture_group = kheionai_ruinborn_elf } } }
		custom_tooltip = ameion_site_not_kheionai
	}
	else = { custom_tooltip = ameion_site_kheionai }
	tooltip = {
		$PROVINCE$ = {
			add_permanent_province_modifier = {
				name = G52_excavation
				duration = 1825
			}
			ameion_new_relics = yes
		}
		ameion_site_cost = yes
	}
}

ameion_new_relics = {
	if = {
		limit = { NOT = { trade_goods = precursor_relics } }
		change_trade_goods = precursor_relics
	}
	if = {
		limit = { NOT = { has_province_flag = permanent_precursor_relics } }
		set_province_flag = permanent_precursor_relics
	}
}

ameion_site_cost = {
	add_adm_power = -50
	add_mil_power = -50
	add_manpower = -5
}

ameion_tacenie = {
	if = {
		limit = { NOT = { trade_goods = precursor_relics } }
		change_trade_goods = precursor_relics
	}
	if = {
		limit = { NOT = { has_province_flag = permanent_precursor_relics } }
		set_province_flag = permanent_precursor_relics
	}
	add_permanent_province_modifier = {
		name = G52_tacenie
		duration = -1
	}
	add_base_tax = 2
	add_base_production = 2
	add_base_manpower = 2
}


ameion_administration = {
	if = {
		limit = {
			NOT = {
				num_of_owned_provinces_with = {
					value = 10
					has_province_modifier = G52_administrative_center
				}
			}
		}
		random_owned_province = {
			limit = {
				NOT = { area = nanru_nakar_area }
				development = 20
				has_courthouse_building_trigger = yes
				has_building = state_house
			}
			add_permanent_province_modifier = {
				name = G52_administrative_center
				duration = -1
			}
			set_seat_in_parliament = yes
		}
	}
}

ameion_gly_clear_claim_core = {
	$TAG$ = {
		every_core_province = {
			if = {
				limit = { NOT = { owned_by = $TAG$ } }
				remove_core = $TAG$
			}
		}
	}
}

ameion_G71_reinforce = {
	add_treasury = 250
	add_manpower = 10
	if = {
		limit = { NOT = { army_size_percentage = 0.4 } }
		6559 = {
			build_to_forcelimit = {
				infantry = 0.6
				cavalry = 0.1
				artillery = 0.3
			}
			infantry = PREV
			infantry = PREV
		}
	}
	else = {
		6559 = {
			infantry = PREV
			infantry = PREV
			infantry = PREV
			infantry = PREV
			infantry = PREV
			infantry = PREV
		}
	}
	if = {
		limit = { NOT = { navy_size_percentage = 0.9 } }
		6559 = {
			build_to_forcelimit = {
				heavy_ship = 0.5
				light_ship = 0.5
			}
			heavy_ship = PREV
			light_ship = PREV
		}
	}
	else = {
		6559 = {
			heavy_ship = PREV
			heavy_ship = PREV
			heavy_ship = PREV
			light_ship = PREV
			light_ship = PREV
			light_ship = PREV
		}
	}
}

ameion_G00_war = {
	custom_tooltip = ameion_G00_prep
	hidden_effect = {
		capital_scope = {
			infantry = PREV
			infantry = PREV
			infantry = PREV
			infantry = PREV
			artillery = PREV
			artillery = PREV
			if = {
				limit = { NOT = { fort_level = 5 } }
				add_building = fort_17th
			}
		}
		random_owned_province = {
			limit = { 
				NOT = { 
					is_island = yes
					region = chendhya_region
				}
			}
			infantry = PREV
			infantry = PREV
			infantry = PREV
			infantry = PREV
			artillery = PREV
			artillery = PREV
			if = {
				limit = { NOT = { fort_level = 5 } }
				add_building = fort_17th
			}
		}
		2525 = {
			if = {
				limit = {
					owned_by = PREV
					NOT = { fort_level = 5 }
				}
				add_building = fort_17th
			}
		}
		if = {
			limit = { 
				NOT = { 
					num_of_owned_provinces_with = {
						value = 8
						fort_level = 5
					}
				}
			}
			random_owned_province = {
				limit = { 
					NOT = { 
						fort_level = 3
						region = chendhya_region
					}
				}
				add_building = fort_17th
			}
			random_owned_province = {
				limit = { 
					NOT = { 
						fort_level = 3
						region = chendhya_region
					}
				}
				add_building = fort_17th
			}
		}
		if = {
			limit = { 
				NOT = { 
					num_of_owned_provinces_with = {
						value = 10
						fort_level = 3
					}
				}
			}
			random_owned_province = {
				limit = { NOT = { fort_level = 3 } }
				add_building = fort_16th
			}
			random_owned_province = {
				limit = { NOT = { fort_level = 3 } }
				add_building = fort_16th
			}
		}
		random_owned_province = {
			limit = { has_port = yes }
			build_to_forcelimit = {
				heavy_ship = 0.3
				light_ship = 0.3
				transport = 0.3
			}
		}
		if = {
			limit = { NOT = { has_country_flag = G52_G00_initial } }
			set_country_flag = G52_G00_initial
			add_adm_power = 345
			add_dip_power = 345
			add_mil_power = 345
			add_treasury = 2000
			create_general = { tradition = 30 }
			create_general = { tradition = 50 }
			create_general = { tradition = 70 }
			country_event = { id = flavor_ameion.55 days = 35 }
		}
	}
}

#gelkalis
gelkalis_build_cliff_citadel = {
	if = {
		limit = { owner = { has_country_flag = gelkalis_citadel_lv_3 } }
		add_permanent_province_modifier = {
			name = gelkalis_cliff_citadel_3
			duration = -1
		}
	}
	else_if = {
		limit = { owner = { has_country_flag = gelkalis_citadel_lv_2 } }
		add_permanent_province_modifier = {
			name = gelkalis_cliff_citadel_2
			duration = -1
		}
	}
	else = {
		add_permanent_province_modifier = {
			name = gelkalis_cliff_citadel_1
			duration = -1
		}
	}
}

###############
##Orlghelovar##
###############
orlghelovar_glasslords_upgrade = { #Upgradeable Modifier for Province 4238 (Orlghelovar)
	4238 = {
		if = {
			limit = { has_province_modifier = orlghelovar_glasslords1 }
			hidden_effect = { remove_province_modifier = orlghelovar_glasslords1 }
			add_permanent_province_modifier = { name = orlghelovar_glasslords2 duration = -1 }
		}
		else_if = {
			limit = { has_province_modifier = orlghelovar_glasslords2 }
			hidden_effect = { remove_province_modifier = orlghelovar_glasslords2 }
			add_permanent_province_modifier = { name = orlghelovar_glasslords3 duration = -1 }
		}
		else_if = {
			limit = { has_province_modifier = orlghelovar_glasslords3 }
			hidden_effect = { remove_province_modifier = orlghelovar_glasslords3 }
			add_permanent_province_modifier = { name = orlghelovar_glasslords4 duration = -1 }
		}
		else_if = {
			limit = { has_province_modifier = orlghelovar_glasslords4 }
			hidden_effect = { remove_province_modifier = orlghelovar_glasslords4 }
			add_permanent_province_modifier = { name = orlghelovar_glasslords5 duration = -1 }
		}
	}
}

orlghelovar_research_center_upgrade = { #Upgradeable Modifier for Province 4238 (Orlghelovar)
	4238 = {
		if = {
			limit = { has_province_modifier = orlghelovar_research_center1 }
			hidden_effect = { remove_province_modifier = orlghelovar_research_center1 }
			add_permanent_province_modifier = { name = orlghelovar_research_center2 duration = -1 }
		}
		else_if = {
			limit = { has_province_modifier = orlghelovar_research_center2 }
			hidden_effect = { remove_province_modifier = orlghelovar_research_center2 }
			add_permanent_province_modifier = { name = orlghelovar_research_center3 duration = -1 }
		}
		else_if = {
			limit = { has_province_modifier = orlghelovar_research_center3 }
			hidden_effect = { remove_province_modifier = orlghelovar_research_center3 }
			add_permanent_province_modifier = { name = orlghelovar_research_center4 duration = -1 }
		}
		else_if = {
			limit = { has_province_modifier = orlghelovar_research_center4 }
			hidden_effect = { remove_province_modifier = orlghelovar_research_center4 }
			add_permanent_province_modifier = { name = orlghelovar_research_center5 duration = -1 }
		}
	}
}

siadan_crest_upgrade = {
	custom_tooltip = siadan_crest_upgrade_tt
	if = {
		limit = { has_country_modifier = siadan_crest_of_ishtara_1 }
		hidden_effect = { remove_country_modifier = siadan_crest_of_ishtara_1 }
		add_country_modifier = { name = siadan_crest_of_ishtara_2 duration = -1 }
	}
	else_if = {
		limit = { has_country_modifier = siadan_crest_of_ishtara_2 }
		hidden_effect = { remove_country_modifier = siadan_crest_of_ishtara_2 }
		add_country_modifier = { name = siadan_crest_of_ishtara_3 duration = -1 }
	}
	else_if = {
		limit = { has_country_modifier = siadan_crest_of_ishtara_3 }
		hidden_effect = { remove_country_modifier = siadan_crest_of_ishtara_3 }
		add_country_modifier = { name = siadan_crest_of_ishtara_4 duration = -1 }
	}
	else_if = {
		limit = { has_country_modifier = siadan_crest_of_ishtara_4 }
		hidden_effect = { remove_country_modifier = siadan_crest_of_ishtara_4 }
		add_country_modifier = { name = siadan_crest_of_ishtara_5 duration = -1 }
	}
	else_if = {
		limit = { has_country_modifier = siadan_crest_of_ishtara_5 }
		hidden_effect = { remove_country_modifier = siadan_crest_of_ishtara_5 }
		add_country_modifier = { name = siadan_crest_of_ishtara_6 duration = -1 }
	}
	else_if = {
		limit = { has_country_modifier = siadan_crest_of_ishtara_6 }
		hidden_effect = { remove_country_modifier = siadan_crest_of_ishtara_6 }
		add_country_modifier = { name = siadan_crest_of_ishtara_7 duration = -1 }
	}
	else_if = {
		limit = { has_country_modifier = siadan_crest_of_ishtara_7 }
		hidden_effect = { remove_country_modifier = siadan_crest_of_ishtara_7 }
		add_country_modifier = { name = siadan_crest_of_ishtara_8 duration = -1 }
	}
	else_if = {
		limit = { has_country_modifier = siadan_crest_of_ishtara_8 }
		hidden_effect = { remove_country_modifier = siadan_crest_of_ishtara_8 }
		add_country_modifier = { name = siadan_crest_of_ishtara_9 duration = -1 }
	}
}

siadan_add_scope_permanent_claim = {
	$scope$ = {
		limit = {
			NOT = { is_core = PREV }
			NOT = { is_permanent_claim = PREV }
		}
		add_permanent_claim = PREV
	}
}

siadan_add_province_permanent_claim = {
	$province$ = {
		if = {
			limit = {
				NOT = { is_core = PREV }
				NOT = { is_permanent_claim = PREV }
			}
		}
		add_permanent_claim = PREV
	}
}

### Varainé ###
A99_add_minority = { #Receives parameters 'race' and 'amount'. Adds/increases pop of 'race' in a random province (that doesn't have this race as a large/majoritary pop), repeats this 'amount' times. Code based on 'For' scripted effect
	custom_tooltip = A99_add_minority_$race$_$amount$_tt	
	hidden_effect = {
		set_variable = {
			which = A99_ForLoopCounter
			value = $amount$
		}
		while = {
			limit = {
				check_variable = {
					which = A99_ForLoopCounter
					value = 1
				}
			}
			random_owned_province = {
				limit = {
					has_$race$_majority_trigger = no
					has_large_$race$_minority_trigger = no
				}
				add_$race$_minority_size_effect = yes
			}
			subtract_variable = {
				which = A99_ForLoopCounter
				value = 1
			}
		}
	}
}
A99_add_minority_if_tolerated = { #Receives parameters 'race', 'amount', and medium/high. If tolerance of 'race' is medium/high, executes A99_add_minority
	[[medium]
		hidden_effect = {
			if = {
				limit = {
					OR = {
						medium_tolerance_$race$_race_trigger = yes
						high_tolerance_$race$_race_trigger = yes
					}
				}
				A99_add_minority = {
					race = $race$
					amount = $amount$
				}
			}
		}
	]
	[[high]
		hidden_effect = {
			if = {
				limit = {
					high_tolerance_$race$_race_trigger = yes
				}
				A99_add_minority = {
					race = $race$
					amount = $amount$
				}
			}
		}
	]
}

### Anisikheion ###
upgrade_admiralty_influence_modifier_effect = {
	custom_tooltip = upgrade_admiralty_influence_modifier_effect_tt
	hidden_effect = {
		if = {
			limit = { has_country_modifier = G59_admiralty_influence_small }
			remove_country_modifier = G59_admiralty_influence_small
			add_country_modifier = {
				name = G59_admiralty_influence_medium
				duration = -1
			}
		}
		else_if = {
			limit = { has_country_modifier = G59_admiralty_influence_medium }
			remove_country_modifier = G59_admiralty_influence_medium
			add_country_modifier = {
				name = G59_admiralty_influence_large
				duration = -1
			}
		}
		else_if = {
			limit = { has_country_modifier = G59_admiralty_influence_large }
			remove_country_modifier = G59_admiralty_influence_large
			add_country_modifier = {
				name = G59_admiralty_influence_massive
				duration = -1
			}
		}
		else_if = {
			limit = { has_country_modifier = G59_admiralty_influence_massive }
			remove_country_modifier = G59_admiralty_influence_massive
			add_country_modifier = {
				name = G59_admiralty_influence_domineering
				duration = -1
			}
		}
	}
}

#Truedagger#
truedagger_define_heir_with_changed_stats = {
	hidden_effect = {
		export_to_variable = {
			which = truedagger_heir_adm
			value = heir_adm
			who = ROOT
		}
		export_to_variable = {
			which = truedagger_heir_dip
			value = heir_dip
			who = ROOT
		}
		export_to_variable = {
			which = truedagger_heir_mil
			value = heir_mil
			who = ROOT
		}

		[[adm]
			change_variable = {
				which = truedagger_heir_adm
				value = $adm$
			}
		]

		[[dip]
			change_variable = {
				which = truedagger_heir_dip
				value = $dip$
			}
		]

		[[mil]
			change_variable = {
				which = truedagger_heir_mil
				value = $mil$
			}
		]
	}

	kill_heir = {
		allow_new_heir = no
	}

	define_heir = {
		dip = 0
		adm = 0
		mil = 0
		hide_skills = yes
		dynasty = ROOT
	}
	
	custom_tooltip = truedagger_new_heir_stats_tt
	[[adm]
		custom_tooltip = truedagger_new_heir_stat_adm_$adm$_tt
	]
	[[dip]
		custom_tooltip = truedagger_new_heir_stat_dip_$dip$_tt
	]
	[[mil]
		custom_tooltip = truedagger_new_heir_stat_mil_$mil$_tt
	]

	hidden_effect = {
		while = {
			limit = { 
				check_variable = {
					which = truedagger_heir_adm
					value = 1
				}
				NOT = { heir_adm = 6 }
			}
	
			change_variable = {
				which = truedagger_heir_adm
				value = -1
			}
			change_heir_adm = 1
		}

		while = {
			limit = { 
				check_variable = {
					which = truedagger_heir_dip
					value = 1
				}
				NOT = { heir_dip = 6 }
			}
	
			change_variable = {
				which = truedagger_heir_dip
				value = -1
			}
			change_heir_dip = 1
		}

		while = {
			limit = { 
				check_variable = {
					which = truedagger_heir_mil
					value = 1
				}
				NOT = { heir_mil = 6 }
			}
	
			change_variable = {
				which = truedagger_heir_mil
				value = -1
			}
			change_heir_mil = 1
		}
	}
}

# Verkal Ozovar

clear_grand_rune_amekh_effect = {
	every_subject_country = {
		remove_country_modifier = Y63_grand_rune_amekh
	}
}

clear_grand_rune_jorkid_effect = {
	every_subject_country = { limit = { has_country_modifier = Y63_grand_rune_jolkin }
		remove_country_modifier = Y63_grand_rune_jolkin
	}
}

clear_grand_rune_krakdhum_effect = {
	5424 = { remove_province_modifier = Y63_grand_rune_krakdhum }
	every_subject_country = {
		every_owned_province = {
			remove_province_modifier = Y63_grand_rune_krakdhum
		}
	}
}

add_grand_rune_haln_effect = {
	if = { limit = { has_province_modifier = dig_10 } remove_province_modifier = Y63_grand_rune_haln_9 add_province_modifier = { name = Y63_grand_rune_haln_10 duration = -1 } }
	else_if = { limit = { has_province_modifier = dig_9 } remove_province_modifier = Y63_grand_rune_haln_8 add_province_modifier = { name = Y63_grand_rune_haln_9 duration = -1 } }
	else_if = { limit = { has_province_modifier = dig_8 } remove_province_modifier = Y63_grand_rune_haln_7 add_province_modifier = { name = Y63_grand_rune_haln_8 duration = -1 } }
	else_if = { limit = { has_province_modifier = dig_7 } remove_province_modifier = Y63_grand_rune_haln_6 add_province_modifier = { name = Y63_grand_rune_haln_7 duration = -1 } }
	else_if = { limit = { has_province_modifier = dig_6 } remove_province_modifier = Y63_grand_rune_haln_5 add_province_modifier = { name = Y63_grand_rune_haln_6 duration = -1 } }
	else_if = { limit = { has_province_modifier = dig_5 } remove_province_modifier = Y63_grand_rune_haln_4 add_province_modifier = { name = Y63_grand_rune_haln_5 duration = -1 } }
	else_if = { limit = { has_province_modifier = dig_4 } remove_province_modifier = Y63_grand_rune_haln_3 add_province_modifier = { name = Y63_grand_rune_haln_4 duration = -1 } }
	else_if = { limit = { has_province_modifier = dig_3 } remove_province_modifier = Y63_grand_rune_haln_2 add_province_modifier = { name = Y63_grand_rune_haln_3 duration = -1 } }
	else_if = { limit = { has_province_modifier = dig_2 } remove_province_modifier = Y63_grand_rune_haln_1 add_province_modifier = { name = Y63_grand_rune_haln_2 duration = -1 } }
}

clear_grand_rune_haln_effect = {
	5424 = {
		remove_province_modifier = Y63_grand_rune_haln_1
		remove_province_modifier = Y63_grand_rune_haln_2
		remove_province_modifier = Y63_grand_rune_haln_3
		remove_province_modifier = Y63_grand_rune_haln_4
		remove_province_modifier = Y63_grand_rune_haln_5
		remove_province_modifier = Y63_grand_rune_haln_6
		remove_province_modifier = Y63_grand_rune_haln_7
		remove_province_modifier = Y63_grand_rune_haln_8
		remove_province_modifier = Y63_grand_rune_haln_9
		remove_province_modifier = Y63_grand_rune_haln_10
	}
	every_subject_country = {
		every_owned_province = { limit = { has_province_modifier = Y63_grand_rune_haln }
			remove_province_modifier = Y63_grand_rune_haln
		}
	}
}

#Cestirmark
concord_influence_effect = {
	add_country_modifier = {
		name = H33_concord_$member$_influence
		duration = 1825
	}
	custom_tooltip = H33_concord_influence_effect_tt
	hidden_effect = {
		every_known_country = {
			limit = { has_country_flag = trollsbay_concord_member }
			add_country_modifier = {
				name = H33_concord_$member$_influence
				duration = 1825
			}
		}
	}
}

trollsbay_sovereignist_effect = {
	custom_tooltip = H33_sovereignist_effect_$culture$_tt
	hidden_effect = {
		every_owned_province = {
			limit = { culture = $culture$ }
			add_province_modifier = {
				name = H33_sovereignist_opposition
				duration = 7300
			}
			add_nationalism = 20
		}
	}
}

add_cult_aw_to_random_province = {
	random_owned_province = {
		limit = {
			NOT = { 
				OR = {
					has_province_modifier = aw_eldritch_cultists_1
					has_province_modifier = aw_eldritch_cultists_2
					has_province_modifier = aw_eldritch_cultists_3
				} 
			}
		}
		add_permanent_province_modifier = { 
			name = aw_eldritch_cultists_2
			duration = -1
		}
	}
}

give_all_embraced_institutions_to_province_effect = {
	if = {
		limit = { ROOT = { has_institution = feudalism } }
		add_institution_embracement = { which = feudalism value = 100 }
	}
	if = {
		limit = { ROOT = { has_institution = renaissance } }
		add_institution_embracement = { which = renaissance value = 100 }
	}
	if = {
		limit = { ROOT = { has_institution = new_world_i } }
		add_institution_embracement = { which = new_world_i value = 100 }
	}
	if = {
		limit = { ROOT = { has_institution = printing_press } }
		add_institution_embracement = { which = printing_press value = 100 }
	}
	if = {
		limit = { ROOT = { has_institution = global_trade } }
		add_institution_embracement = { which = global_trade value = 100 }
	}
	if = {
		limit = { ROOT = { has_institution = manufactories } }
		add_institution_embracement = { which = manufactories value = 100 }
	}
	if = {
		limit = { ROOT = { has_institution = enlightenment } }
		add_institution_embracement = { which = enlightenment value = 100 }
	}
	if = {
		limit = { ROOT = { has_institution = industrialization } }
		add_institution_embracement = { which = industrialization value = 100 }
	}
}


################
# Dur-Vazhatun #
################
vazhatun_unlock_astronomy = {
	custom_tooltip = vazhatun_enable_astral_knowledge_tt
	hidden_effect = {
		set_country_flag = vazhatun_astronomy_unlocked
		set_variable = {
			which = vazhatun_observation_efficiency
			value = 10
		}
		set_variable = {
			which = vazhatun_astral_knowledge
			value = 0
		}
		set_variable = {
			which = vazhatun_observations_completed
			value = 0
		}
		set_variable = {
			which = vazhatun_disasters_completed
			value = 0
		}
	}
}

vazhatun_increase_observation_efficiency_small = {
	custom_tooltip = vazhatun_increase_observation_efficiency_small_tt
	hidden_effect = {
		change_variable = {
			which = vazhatun_observation_efficiency
			value = 10
		}
	}
}

vazhatun_increase_observation_efficiency = {
	custom_tooltip = vazhatun_increase_observation_efficiency_tt
	hidden_effect = {
		change_variable = {
			which = vazhatun_observation_efficiency
			value = 20
		}
	}
}

vazhatun_increase_observation_efficiency_large = {
	custom_tooltip = vazhatun_increase_observation_efficiency_large_tt
	hidden_effect = {
		change_variable = {
			which = vazhatun_observation_efficiency
			value = 30
		}
	}
}

vazhatun_increase_observation_efficiency_huge = {
	custom_tooltip = vazhatun_increase_observation_efficiency_huge_tt
	hidden_effect = {
		change_variable = {
			which = vazhatun_observation_efficiency
			value = 40
		}
	}
}

vazhatun_increase_observation_efficiency_massive = {
	custom_tooltip = vazhatun_increase_observation_efficiency_massive_tt
	hidden_effect = {
		change_variable = {
			which = vazhatun_observation_efficiency
			value = 50
		}
	}
}

vazhatun_decrease_observation_efficiency_small = {
	custom_tooltip = vazhatun_decrease_observation_efficiency_small_tt
	hidden_effect = {
		subtract_variable = {
			which = vazhatun_observation_efficiency
			value = 10
		}
	}
}

vazhatun_decrease_observation_efficiency = {
	custom_tooltip = vazhatun_decrease_observation_efficiency_tt
	hidden_effect = {
		subtract_variable = {
			which = vazhatun_observation_efficiency
			value = 20
		}
	}
}

vazhatun_decrease_observation_efficiency_large = {
	custom_tooltip = vazhatun_decrease_observation_efficiency_large_tt
	hidden_effect = {
		subtract_variable = {
			which = vazhatun_observation_efficiency
			value = 30
		}
	}
}

vazhatun_decrease_observation_efficiency_huge = {
	custom_tooltip = vazhatun_decrease_observation_efficiency_huge_tt
	hidden_effect = {
		subtract_variable = {
			which = vazhatun_observation_efficiency
			value = 40
		}
	}
}

vazhatun_decrease_observation_efficiency_massive = {
	custom_tooltip = vazhatun_decrease_observation_efficiency_massive_tt
	hidden_effect = {
		subtract_variable = {
			which = vazhatun_observation_efficiency
			value = 50
		}
	}
}

vazhatun_calculate_digging_knowledge = {
	if = {
		limit = { has_province_modifier = dig_1 }
		owner = {
			set_variable = {
				which = vazhatun_digging_knowledge
				value = 10
			}
		}
	}
	else_if = {
		limit = { has_province_modifier = dig_2 }
		owner = {
			set_variable = {
				which = vazhatun_digging_knowledge
				value = 20
			}
		}
	}
	else_if = {
		limit = { has_province_modifier = dig_3 }
		owner = {
			set_variable = {
				which = vazhatun_digging_knowledge
				value = 30
			}
		}
	}
	else_if = {
		limit = { has_province_modifier = dig_4 }
		owner = {
			set_variable = {
				which = vazhatun_digging_knowledge
				value = 40
			}
		}
	}
	else_if = {
		limit = { has_province_modifier = dig_5 }
		owner = {
			set_variable = {
				which = vazhatun_digging_knowledge
				value = 50
			}
		}
	}
	else_if = {
		limit = { has_province_modifier = dig_6 }
		owner = {
			set_variable = {
				which = vazhatun_digging_knowledge
				value = 60
			}
		}
	}
	else_if = {
		limit = { has_province_modifier = dig_7 }
		owner = {
			set_variable = {
				which = vazhatun_digging_knowledge
				value = 70
			}
		}
	}
	else_if = {
		limit = { has_province_modifier = dig_8 }
		owner = {
			set_variable = {
				which = vazhatun_digging_knowledge
				value = 80
			}
		}
	}
	else_if = {
		limit = { has_province_modifier = dig_9 }
		owner = {
			set_variable = {
				which = vazhatun_digging_knowledge
				value = 90
			}
		}
	}
	else_if = {
		limit = { has_province_modifier = dig_10 }
		owner = {
			set_variable = {
				which = vazhatun_digging_knowledge
				value = 100
			}
		}
	}
	else_if = {
		limit = { has_province_modifier = dig_11 }
		owner = {
			set_variable = {
				which = vazhatun_digging_knowledge
				value = 110
			}
		}
	}
}

vazhatun_realize_digging_knowledge = {
	custom_tooltip = vazhatun_gain_digging_knowledge_tt
	hidden_effect = {
		change_variable = {
			which = vazhatun_astral_knowledge
			which = vazhatun_digging_knowledge
		}
		set_variable = {
			which = vazhatun_digging_knowledge
			value = 0
		}
	}
}

vazhatun_clamp_terror_points = {
	hidden_effect = {
		change_variable = {
			which = vazhatun_terror_points
			value = $AMOUNT$
		}
		if = {
			limit = {
				NOT = {
					check_variable = {
						which = vazhatun_terror_points
						value = 0
					}
				}
			}
			set_variable = {
				which = vazhatun_terror_points
				value = 0
			}
		}
		if = {
			limit = {
				check_variable = {
					which = vazhatun_terror_points
					value = 100
				}
			}
			set_variable = {
				which = vazhatun_terror_points
				value = 100
			}
		}
	}
}
			
vazhatun_drop_terror = {
	[[small]
		if = {
			limit = {
				has_disaster = astral_terror
				has_estate_privilege = estate_church_vazhatun_mental_care
			}
			custom_tooltip = vazhatun_drop_terror_small_enhanced_tt
			vazhatun_clamp_terror_points = { AMOUNT = -7 }
		}
		else_if = {
			limit = { has_disaster = astral_terror }
			custom_tooltip = vazhatun_drop_terror_small_tt
			vazhatun_clamp_terror_points = { AMOUNT = -5 }
		}
		else = {
			add_disaster_progress = {
				disaster = astral_terror
				value = -5
			}
		}
	]
	[[medium]
		if = {
			limit = {
				has_disaster = astral_terror
				has_estate_privilege = estate_church_vazhatun_mental_care
			}
			custom_tooltip = vazhatun_drop_terror_medium_enhanced_tt
			vazhatun_clamp_terror_points = { AMOUNT = -14 }
		}
		else_if = {
			limit = { has_disaster = astral_terror }
			custom_tooltip = vazhatun_drop_terror_medium_tt
			vazhatun_clamp_terror_points = { AMOUNT = -10 }
		}
		else = {
			add_disaster_progress = {
				disaster = astral_terror
				value = -10
			}
		}
	]
	[[large]
		if = {
			limit = {
				has_disaster = astral_terror
				has_estate_privilege = estate_church_vazhatun_mental_care
			}
			custom_tooltip = vazhatun_drop_terror_large_enhanced_tt
			vazhatun_clamp_terror_points = { AMOUNT = -21 }
		}
		else_if = {
			limit = { has_disaster = astral_terror }
			custom_tooltip = vazhatun_drop_terror_large_tt
			vazhatun_clamp_terror_points = { AMOUNT = -15 }
		}
		else = {
			add_disaster_progress = {
				disaster = astral_terror
				value = -15
			}
		}
	]
}

vazhatun_raise_terror = {
	[[small]
		if = {
			limit = { has_disaster = astral_terror }
			custom_tooltip = vazhatun_raise_terror_small_tt
			vazhatun_clamp_terror_points = { AMOUNT = 5 }
		}
		else = {
			add_disaster_progress = {
				disaster = astral_terror
				value = 5
			}
		}
	]
	[[medium]
		if = {
			limit = { has_disaster = astral_terror }
			custom_tooltip = vazhatun_raise_terror_medium_tt
			vazhatun_clamp_terror_points = { AMOUNT = 10 }
		}
		else = {
			add_disaster_progress = {
				disaster = astral_terror
				value = 10
			}
		}
	]
	[[large]
		if = {
			limit = { has_disaster = astral_terror }
			custom_tooltip = vazhatun_raise_terror_large_tt
			vazhatun_clamp_terror_points = { AMOUNT = 15 }
		}
		else = {
			add_disaster_progress = {
				disaster = astral_terror
				value = 15
			}
		}
	]
}

vazhatun_spend_knowledge_effect = {
	custom_tooltip = $TOOLTIP$
	hidden_effect = {
		subtract_variable = {
			which = vazhatun_astral_knowledge
			value = $AMOUNT$
		}
	}
}

vazhatun_spend_knowledge = {
	[[amount_1] vazhatun_spend_knowledge_effect = { TOOLTIP = vazhatun_spend_knowledge_1_tt AMOUNT = 1 } ]
	[[amount_5] vazhatun_spend_knowledge_effect = { TOOLTIP = vazhatun_spend_knowledge_5_tt AMOUNT = 5 } ]
	[[amount_10] vazhatun_spend_knowledge_effect = { TOOLTIP = vazhatun_spend_knowledge_10_tt AMOUNT = 10 } ]
	[[amount_15] vazhatun_spend_knowledge_effect = { TOOLTIP = vazhatun_spend_knowledge_15_tt AMOUNT = 15 } ]
	[[amount_20] vazhatun_spend_knowledge_effect = { TOOLTIP = vazhatun_spend_knowledge_20_tt AMOUNT = 20 } ]
	[[amount_25] vazhatun_spend_knowledge_effect = { TOOLTIP = vazhatun_spend_knowledge_25_tt AMOUNT = 25 } ]
	[[amount_30] vazhatun_spend_knowledge_effect = { TOOLTIP = vazhatun_spend_knowledge_30_tt AMOUNT = 30 } ]
	[[amount_45] vazhatun_spend_knowledge_effect = { TOOLTIP = vazhatun_spend_knowledge_45_tt AMOUNT = 45 } ]
	[[amount_50] vazhatun_spend_knowledge_effect = { TOOLTIP = vazhatun_spend_knowledge_50_tt AMOUNT = 50 } ]
	[[amount_65] vazhatun_spend_knowledge_effect = { TOOLTIP = vazhatun_spend_knowledge_65_tt AMOUNT = 65 } ]
	[[amount_90] vazhatun_spend_knowledge_effect = { TOOLTIP = vazhatun_spend_knowledge_90_tt AMOUNT = 90 } ]
	[[amount_115] vazhatun_spend_knowledge_effect = { TOOLTIP = vazhatun_spend_knowledge_115_tt AMOUNT = 115 } ]
	[[amount_140] vazhatun_spend_knowledge_effect = { TOOLTIP = vazhatun_spend_knowledge_140_tt AMOUNT = 140 } ]
	[[amount_150] vazhatun_spend_knowledge_effect = { TOOLTIP = vazhatun_spend_knowledge_150_tt AMOUNT = 150 } ]
	[[amount_180] vazhatun_spend_knowledge_effect = { TOOLTIP = vazhatun_spend_knowledge_180_tt AMOUNT = 180 } ]
	[[amount_220] vazhatun_spend_knowledge_effect = { TOOLTIP = vazhatun_spend_knowledge_220_tt AMOUNT = 220 } ]
	[[amount_260] vazhatun_spend_knowledge_effect = { TOOLTIP = vazhatun_spend_knowledge_260_tt AMOUNT = 260 } ]
	[[amount_300] vazhatun_spend_knowledge_effect = { TOOLTIP = vazhatun_spend_knowledge_300_tt AMOUNT = 300 } ]
}

vazhatun_add_scaling_knowledge = {
	hidden_effect = {
		set_variable = {
			which = vazhatun_scaling_knowledge
			value = $AMOUNT$
		}
		multiply_variable = {
			which = vazhatun_scaling_knowledge
			which = vazhatun_observation_efficiency
		}
		divide_variable = {
			which = vazhatun_scaling_knowledge
			value = 100
		}
		change_variable = {
			which = vazhatun_astral_knowledge
			which = vazhatun_scaling_knowledge
		}
		set_variable = {
			which = vazhatun_scaling_knowledge
			value = 0
		}
	}
}

# #Thilvis
# claim_lencori_or_alenic_colonies = {
# 	if = {
# 		limit = {
# 			owner_is_colonial_nation = yes
# 			owner = { 
# 				overlord = {
# 					OR = {
# 						culture_group = lencori
# 						culture_group = alenic
# 					}
# 				}
# 			}
# 		}
# 	}
# 	add_claim = ROOT
# }

gemradcurt_creeping_winder_upgrade = {
	if = {
		limit = { has_country_modifier = gemradcurt_creeping_winter_1 }
		hidden_effect = { remove_country_modifier = gemradcurt_creeping_winter_1 }
		add_country_modifier = { name = gemradcurt_creeping_winter_2 duration = -1 }
	}
	else_if = {
		limit = { has_country_modifier = gemradcurt_creeping_winter_2 }
		hidden_effect = { remove_country_modifier = gemradcurt_creeping_winter_2 }
		add_country_modifier = { name = gemradcurt_creeping_winter_3 duration = -1 }
	}
	else_if = {
		limit = { has_country_modifier = gemradcurt_creeping_winter_3 }
		hidden_effect = { remove_country_modifier = gemradcurt_creeping_winter_3 }
		add_country_modifier = { name = gemradcurt_creeping_winter_4 duration = -1 }
	}
	else = {
		add_country_modifier = { name = gemradcurt_creeping_winter_1 duration = -1 }
	}
}

gemradcurt_add_hearthwards = {
	hidden_effect = { remove_province_modifier = gemradcurt_lesser_hearthwards }

	if = { 
		limit = { NOT = { has_province_modifier = gemradcurt_greater_hearthwards } }
		add_province_modifier = {
			name = gemradcurt_hearthwards
			duration = -1
		}
	}
}

gemradcurt_add_greater_hearthwards = {
	hidden_effect = { 
		remove_province_modifier = gemradcurt_lesser_hearthwards 
		remove_province_modifier = gemradcurt_hearthwards 
	}

	add_province_modifier = {
		name = gemradcurt_greater_hearthwards
		duration = -1
	}
}
#Snotfinger
H89_remove_orc_pop = {
	# custom_tooltip = $TOOLTIP$
	if = {
		limit = {
			has_orcish_minority_trigger = yes
		}
		remove_orcish_minority_size_effect = yes
	}
	else_if = {
		limit = { 
			has_orcish_majority_trigger = yes
		}
		change_culture = ROOT
	}
	hidden_effect = {
		remove_orcish_minority_size_effect = yes
		remove_orcish_minority_size_effect = yes
	}
}

H89_remove_orc_pop_in_escann = {
	# custom_tooltip = $TOOLTIP$
	random_owned_province = {
		limit = {
			has_any_orcish_pop_trigger = yes
			# superregion = escann_superregion
		}
		H89_remove_orc_pop = yes
	}
}

#Chien Binhrung

Y72_upgrade_spirit_queens = {
	custom_tooltip = Y72_spirit_queens_upgrade_tt
	hidden_effect = { 
		if = {
			limit = {
				has_country_flag = chien_spirit_queens_3
			}
		clr_country_flag = chien_spirit_queens_3
		set_country_flag = chien_spirit_queens_4
		}
		if = {
			limit = {
				has_country_flag = chien_spirit_queens_2
			}
		clr_country_flag = chien_spirit_queens_2
		set_country_flag = chien_spirit_queens_3
		}
		if = {
			limit = {
				has_country_flag = chien_spirit_queens_1
			}
		clr_country_flag = chien_spirit_queens_1
		set_country_flag = chien_spirit_queens_2
		}
		if = {
			limit = {
				has_ruler_modifier = Y72_spirit_queens_1c
			}
			remove_country_modifier = Y72_spirit_queens_1c
			add_ruler_modifier = {
				name = Y72_spirit_queens_1d
				duration = -1
			}
		}
		if = {
			limit = {
				has_ruler_modifier = Y72_spirit_queens_1b
			}
			remove_country_modifier = Y72_spirit_queens_1b
			add_ruler_modifier = {
				name = Y72_spirit_queens_1c
				duration = -1
			}
		}
		if = {
			limit = {
				has_ruler_modifier = Y72_spirit_queens_1a
			}
			remove_country_modifier = Y72_spirit_queens_1a
			add_ruler_modifier = {
				name = Y72_spirit_queens_1b
				duration = -1
			}
		}
		if = {
			limit = {
				has_ruler_modifier = Y72_spirit_queens_2c
			}
			remove_country_modifier = Y72_spirit_queens_2c
			add_ruler_modifier = {
				name = Y72_spirit_queens_2d
				duration = -1
			}
		}
		if = {
			limit = {
				has_ruler_modifier = Y72_spirit_queens_2b
			}
			remove_country_modifier = Y72_spirit_queens_2b
			add_ruler_modifier = {
				name = Y72_spirit_queens_2c
				duration = -1
			}
		}
		if = {
			limit = {
				has_ruler_modifier = Y72_spirit_queens_2a
			}
			remove_country_modifier = Y72_spirit_queens_2a
			add_ruler_modifier = {
				name = Y72_spirit_queens_2b
				duration = -1
			}
		}
		if = {
			limit = {
				has_ruler_modifier = Y72_spirit_queens_3c
			}
			remove_country_modifier = Y72_spirit_queens_3c
			add_ruler_modifier = {
				name = Y72_spirit_queens_3d
				duration = -1
			}
		}
		if = {
			limit = {
				has_ruler_modifier = Y72_spirit_queens_3b
			}
			remove_country_modifier = Y72_spirit_queens_3b
			add_ruler_modifier = {
				name = Y72_spirit_queens_3c
				duration = -1
			}
		}
		if = {
			limit = {
				has_ruler_modifier = Y72_spirit_queens_3a
			}
			remove_country_modifier = Y72_spirit_queens_3a
			add_ruler_modifier = {
				name = Y72_spirit_queens_3b
				duration = -1
			}
		}
		if = {
			limit = {
				has_ruler_modifier = Y72_spirit_queens_4c
			}
			remove_country_modifier = Y72_spirit_queens_4c
			add_ruler_modifier = {
				name = Y72_spirit_queens_4d
				duration = -1
			}
		}
		if = {
			limit = {
				has_ruler_modifier = Y72_spirit_queens_4b
			}
			remove_country_modifier = Y72_spirit_queens_4b
			add_ruler_modifier = {
				name = Y72_spirit_queens_4c
				duration = -1
			}
		}
		if = {
			limit = {
				has_ruler_modifier = Y72_spirit_queens_4a
			}
			remove_country_modifier = Y72_spirit_queens_4a
			add_ruler_modifier = {
				name = Y72_spirit_queens_4b
				duration = -1
			}
		}
		if = {
			limit = {
				has_ruler_modifier = Y72_spirit_queens_5c
			}
			remove_country_modifier = Y72_spirit_queens_5c
			add_ruler_modifier = {
				name = Y72_spirit_queens_5d
				duration = -1
			}
		}
		if = {
			limit = {
				has_ruler_modifier = Y72_spirit_queens_5b
			}
			remove_country_modifier = Y72_spirit_queens_5b
			add_ruler_modifier = {
				name = Y72_spirit_queens_5c
				duration = -1
			}
		}
		if = {
			limit = {
				has_ruler_modifier = Y72_spirit_queens_5a
			}
			remove_country_modifier = Y72_spirit_queens_5a
			add_ruler_modifier = {
				name = Y72_spirit_queens_5b
				duration = -1
			}
		}
		if = {
			limit = {
				has_ruler_modifier = Y72_spirit_queens_6c
			}
			remove_country_modifier = Y72_spirit_queens_6c
			add_ruler_modifier = {
				name = Y72_spirit_queens_6d
				duration = -1
			}
		}
		if = {
			limit = {
				has_ruler_modifier = Y72_spirit_queens_6b
			}
			remove_country_modifier = Y72_spirit_queens_6b
			add_ruler_modifier = {
				name = Y72_spirit_queens_6c
				duration = -1
			}
		}
		if = {
			limit = {
				has_ruler_modifier = Y72_spirit_queens_6a
			}
			remove_country_modifier = Y72_spirit_queens_6a
			add_ruler_modifier = {
				name = Y72_spirit_queens_6b
				duration = -1
			}
		}
	}
}

Y72_remove_dev_from_building = { ##If this looks familiar it's because there's an nearly identical line of code for both Eco Ideas and Keyolion's MT.  
	if = { 						 ##What this code does is allow me to add dev for churches/cathedrals specifically instead of manufactories.
		limit = {				 ##If anyone wants to know how this works check out the code for Eco Ideas or ping @Everest on Discord.
			gained_dev_from_eco_building = { building = $building$ }
		}
		add_base_$type$ = -$value$
		if = {
			limit = {
				NOT = { base_$type$ = 1 }
			}
			set_base_$type$ = 1
		}
		hidden_effect = {
			clr_province_flag = built_eco_dev_$building$
		}
	}
}

Y72_add_dev_from_building = {
	if = {
		limit = {
			FROM = { 
				has_country_flag = Y72_improve_development_on_buildings_built
			}
			NOT = { gained_dev_from_eco_building = { building = $building$ } }
		}
		add_base_$type$ = $value$
		hidden_effect = {
			set_province_flag = built_eco_dev_$building$
		}
	}
}

build_production_manufactory = { #SPEED = % of base time | COST = % of base cost
	if = {
		limit = {
			OR = {
				trade_goods = grain
				trade_goods = livestock
				trade_goods = wine
				trade_goods = fungi
				trade_goods = serpentbloom
			}
		}
		add_building_construction = {
			building = farm_estate
			speed = $SPEED$
			cost = $COST$
		}
	}
	else_if = {
		limit = {
			OR = {
				trade_goods = fish
				trade_goods = naval_supplies
				trade_goods = salt
			}
		}
		add_building_construction = {
			building = wharf
			speed = $SPEED$
			cost = $COST$
		}
	}
	else_if = {
		limit = {
			OR = {
				trade_goods = wool
				trade_goods = cloth
				trade_goods = silk
				trade_goods = dyes
			}
		}
		add_building_construction = {
			building = textile
			speed = $SPEED$
			cost = $COST$
		}
	}
	else_if = {
		limit = {
			OR = {
				trade_goods = iron
				trade_goods = copper
				trade_goods = mithril
			}
		}
		add_building_construction = {
			building = weapons
			speed = $SPEED$
			cost = $COST$
		}
	}
	else_if = {
		limit = {
			OR = {
				trade_goods = coffee
				trade_goods = cotton
				trade_goods = sugar
				trade_goods = tobacco
				trade_goods = tea
				trade_goods = cocoa
			}
		}
		add_building_construction = {
			building = plantations
			speed = $SPEED$
			cost = $COST$
		}
	}
	else_if = {
		limit = {
			OR = {
				trade_goods = ivory
				trade_goods = slaves
				trade_goods = spices
				trade_goods = cloves
				trade_goods = fur
				trade_goods = incense
				trade_goods = precursor_relics
				trade_goods = damestear
			}
		}
		add_building_construction = {
			building = tradecompany
			speed = $SPEED$
			cost = $COST$
		}
	}
	else_if = {
		limit = {
			OR = {
				trade_goods = paper
				trade_goods = gems
				trade_goods = tropical_wood
				trade_goods = glass
				trade_goods = chinaware
			}
		}
		add_building_construction = {
			building = mills
			speed = $SPEED$
			cost = $COST$
		}
	}
	else_if = {
		limit = {
			OR = {
				trade_goods = coal
			}
		}
		add_building_construction = {
			building = furnace
			speed = $SPEED$
			cost = $COST$
		}
	}
}

update_epednar_autonomy = {
	if = {
		limit = {
			owner = { has_estate_privilege = estate_nomadic_tribes_local_epednar_autonomy }
		}
		if = {
			limit = {
				culture = epednar
				NOT = { has_province_modifier = H61_epednar_autonomy }
			}
			hidden_effect = {
				add_province_modifier = {
					name = H61_epednar_autonomy
					duration = -1
					hidden = yes
				}
			}
		}
		else_if = {
			limit = {
				NOT = { culture = epednar }
			}
			hidden_effect = { 
				remove_province_modifier = H61_epednar_autonomy 
			}
		}
	}
}

#Zabutodask
J53_update_modifier = {
	if = {
		limit = {
			OR = {
				has_country_modifier = J53_subjugate_bulwar_3
				has_country_modifier = J53_subjugate_bulwar_2
			}
		}
		remove_country_modifier = J53_subjugate_bulwar_2
		add_country_modifier = {
			name = J53_subjugate_bulwar_3
			duration = -1
		}
	}
	else_if = {
		limit = {
			OR = {
				has_country_modifier = J53_conquer_bulwar_3
				has_country_modifier = J53_conquer_bulwar_2
			}
		}
		remove_country_modifier = J53_conquer_bulwar_2
		add_country_modifier = {
			name = J53_conquer_bulwar_3
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = J53_subjugate_bulwar_1 }
		remove_country_modifier = J53_subjugate_bulwar_1
		add_country_modifier = {
			name = J53_subjugate_bulwar_2
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_modifier = J53_conquer_bulwar_1 }
		remove_country_modifier = J53_conquer_bulwar_1
		add_country_modifier = {
			name = J53_conquer_bulwar_2
			duration = -1
		}
	}
	else_if = {
		limit = { has_country_flag = J53_subjugate_bulwar }
		add_country_modifier = {
			name = J53_subjugate_bulwar_1
			duration = -1
		}
	}
	else = {
		custom_tooltip = J53_invasion
		add_country_modifier = {
			name = J53_conquer_bulwar_1
			duration = -1
		}
	}
}

#Yinquan
holi_retirement_flag_clearance = {
	hidden_effect = {
		clr_country_flag = holi_retirement_1
		clr_country_flag = holi_retirement_2
		clr_country_flag = holi_retirement_3
		clr_country_flag = holi_retirement_4
		clr_country_flag = holi_retirement_5
		clr_country_flag = holi_retirement_6
		clr_country_flag = holi_retirement_7
		clr_country_flag = Y26_election_loop
	}
}

yinquan_exile_effect = {
	hidden_effect = {
		set_country_flag = Y26_election_loop
		if = {
			limit = { check_variable = { PatronApproval = 8 } }
			set_ruler_flag = patron_approval_8
		}
		else_if = {
			limit = { check_variable = { PatronApproval = 7 } }
			set_ruler_flag = patron_approval_7
		}
		else_if = {
			limit = { check_variable = { PatronApproval = 6 } }
			set_ruler_flag = patron_approval_6
		}
		else_if = {
			limit = { check_variable = { PatronApproval = 5 } }
			set_ruler_flag = patron_approval_5
		}
		else_if = {
			limit = { check_variable = { PatronApproval = 4 } }
			set_ruler_flag = patron_approval_4
		}
		else_if = {
			limit = { check_variable = { PatronApproval = 3 } }
			set_ruler_flag = patron_approval_3
		}
		else_if = {
			limit = { check_variable = { PatronApproval = 2 } }
			set_ruler_flag = patron_approval_2
		}
		else_if = {
			limit = { check_variable = { PatronApproval = 1 } }
			set_ruler_flag = patron_approval_1
		}
		else = {
			set_ruler_flag = patron_approval_0
		}
		exile_ruler_as = { name = $ruler$_ruler }
	}
}

yinquan_ruler_returns_effect = {
	set_ruler = $ruler$_ruler
	close_single_menu = yes
	clr_ruler_flag = mage_ruler_general
	magic_study_clear_study_effects = yes
	clr_ruler_flag = magic_just_casted_spell
	clr_ruler_flag = magic_project_summoning_started
	clr_ruler_flag = magic_project_homunculus_1
	clr_ruler_flag = magic_project_homunculus_2
	clr_ruler_flag = magic_project_homunculus_3
	clr_ruler_flag = magic_project_homunculus_4
	clr_ruler_flag = magic_project_homunculus_5
	clr_ruler_flag = magic_project_homunculus_started
	clr_ruler_flag = magic_project_summoning_started
	clr_ruler_flag = magic_project_alchemy_started
	clr_ruler_flag = magic_project_celestial_summoning_1
	clr_ruler_flag = magic_project_celestial_summoning_2
	clr_ruler_flag = magic_project_celestial_summoning_3
	clr_ruler_flag = magic_project_fey_summoning_1
	clr_ruler_flag = magic_project_fey_summoning_2
	clr_ruler_flag = magic_project_fey_summoning_3
	clr_ruler_flag = magic_project_infernal_summoning_1
	clr_ruler_flag = magic_project_infernal_summoning_2
	clr_ruler_flag = magic_project_infernal_summoning_3
	set_ruler_flag = allow_war_wizard_after_exile
	hidden_effect = {
		add_ruler_modifier = {
			name = allow_war_wizard_after_exile_delay
			duration = 1
			hidden = yes
		}
		trigger_switch = {
			on_trigger = has_ruler_flag

			patron_approval_0 = { set_variable = { PatronApproval = 0 } clr_ruler_flag = patron_approval_0 }
			patron_approval_1 = { set_variable = { PatronApproval = 1 } clr_ruler_flag = patron_approval_1 }
			patron_approval_2 = { set_variable = { PatronApproval = 2 } clr_ruler_flag = patron_approval_2 }
			patron_approval_3 = { set_variable = { PatronApproval = 3 } clr_ruler_flag = patron_approval_3 }
			patron_approval_4 = { set_variable = { PatronApproval = 4 } clr_ruler_flag = patron_approval_4 }
			patron_approval_5 = { set_variable = { PatronApproval = 5 } clr_ruler_flag = patron_approval_5 }
			patron_approval_6 = { set_variable = { PatronApproval = 6 } clr_ruler_flag = patron_approval_6 }
			patron_approval_7 = { set_variable = { PatronApproval = 7 } clr_ruler_flag = patron_approval_7 }
			patron_approval_8 = { set_variable = { PatronApproval = 8 } clr_ruler_flag = patron_approval_8 }
		}
	}
}

#### Isobelin

#increase level of control (province scope)
isobelin_scripted_effect_increase_control = {

	if = {
		limit = { has_province_modifier = isobelin_modifier_tight_control }
		remove_province_modifier = isobelin_modifier_tight_control
		add_province_modifier = {
			name = isobelin_modifier_complete_control
			duration = -1
		}
	}
	else_if = {
		limit = { has_province_modifier = isobelin_modifier_medium_control }
		remove_province_modifier = isobelin_modifier_medium_control
		add_province_modifier = {
			name = isobelin_modifier_tight_control
			duration = -1
		}
	}
	else_if = {
		limit = { has_province_modifier = isobelin_modifier_loose_control }
		remove_province_modifier = isobelin_modifier_loose_control
		add_province_modifier = {
			name = isobelin_modifier_medium_control
			duration = -1
		}
	}
	else = {
		add_province_modifier = {
			name = isobelin_modifier_loose_control
			duration = -1
		}
	}
}
#comissioners plan increments
isobelin_scripted_effect_inscrease_comissioners_plan_variable = {
	if = {
		limit = { 
			1036 = {
				owned_by = G91
				has_great_project = {
					type = city_that_never_sleeps
					tier = 3
				}
			}
		}
		change_variable = {
			which = isobelin_variable_comissioners_plan
			value = 1
		}
	}

	#isobel island - max 4
	if = {
		limit = {
			province_id = 1036
			development = 50
		}
		G91 = {
			change_variable = {
				which = isobelin_variable_comissioners_plan
				value = 1
			}
		}
	}
	if = {
		limit = {
			province_id = 1036
			development = 40
		}
		G91 = {
			change_variable = {
				which = isobelin_variable_comissioners_plan
				value = 1
			}
		}
	}
	if = {
		limit = {
			province_id = 1036
			development = 30
		}
		G91 = {
			change_variable = {
				which = isobelin_variable_comissioners_plan
				value = 1
			}
		}
	}
	if = {
		limit = {
			province_id = 1036
			development = 20
		}
		G91 = {
			change_variable = {
				which = isobelin_variable_comissioners_plan
				value = 1
			}
		}
	}
	# port isobel - max 3
	if = {
		limit = {
			province_id = 1035
			development = 50
		}
		G91 = {
			change_variable = {
				which = isobelin_variable_comissioners_plan
				value = .25
			}
		}
	}
	if = {
		limit = {
			province_id = 1035
			development = 40
		}
		G91 = {
			change_variable = {
				which = isobelin_variable_comissioners_plan
				value = .25
			}
		}
	}
	if = {
		limit = {
			province_id = 1035
			development = 30
		}
		G91 = {
			change_variable = {
				which = isobelin_variable_comissioners_plan
				value = 1
			}
		}
	}
	if = {
		limit = {
			province_id = 1035
			development = 20
		}
		G91 = {
			change_variable = {
				which = isobelin_variable_comissioners_plan
				value = 1
			}
		}
	}
	#jayekmoot max 2
	if = {
		limit = {
			province_id = 1952
			development = 50
		}
		G91 = {
			change_variable = {
				which = isobelin_variable_comissioners_plan
				value = .25
			}
		}
	}
	if = {
		limit = {
			province_id = 1952
			development = 40
		}
		G91 = {
			change_variable = {
				which = isobelin_variable_comissioners_plan
				value = .25
			}
		}
	}
	if = {
		limit = {
			province_id = 1952
			development = 30
		}
		G91 = {
			change_variable = {
				which = isobelin_variable_comissioners_plan
				value = .75
			}
		}
	}
	if = {
		limit = {
			province_id = 1952
			development = 20
		}
		G91 = {
			change_variable = {
				which = isobelin_variable_comissioners_plan
				value = .75
			}
		}
	}
	#trasilden max 2
	if = {
		limit = {
			province_id = 1033
			development = 50
		}
		G91 = {
			change_variable = {
				which = isobelin_variable_comissioners_plan
				value = .25
			}
		}
	}
	if = {
		limit = {
			province_id = 1033
			development = 40
		}
		G91 = {
			change_variable = {
				which = isobelin_variable_comissioners_plan
				value = .25
			}
		}
	}
	if = {
		limit = {
			province_id = 1033
			development = 30
		}
		G91 = {
			change_variable = {
				which = isobelin_variable_comissioners_plan
				value = .75
			}
		}
	}
	if = {
		limit = {
			province_id = 1033
			development = 20
		}
		G91 = {
			change_variable = {
				which = isobelin_variable_comissioners_plan
				value = .75
			}
		}
	}
	#smallmouth - max 2
	if = {
		limit = {
			province_id = 1958
			development = 50
		}
		G91 = {
			change_variable = {
				which = isobelin_variable_comissioners_plan
				value = .25
			}
		}
	}
	if = {
		limit = {
			province_id = 1958
			development = 40
		}
		G91 = {
			change_variable = {
				which = isobelin_variable_comissioners_plan
				value = .25
			}
		}
	}
	if = {
		limit = {
			province_id = 1958
			development = 30
		}
		G91 = {
			change_variable = {
				which = isobelin_variable_comissioners_plan
				value = .75
			}
		}
	}
	if = {
		limit = {
			province_id = 1958
			development = 20
		}
		G91 = {
			change_variable = {
				which = isobelin_variable_comissioners_plan
				value = .75
			}
		}
	}
	if = { #immediately trigger isobelin.325 after 1st dev post-completion
		limit = {
			owner = { 
				tag = G91  
				has_country_flag = isobelin_country_flag_comissioners_plan
				check_variable = {
					which = isobelin_variable_comissioners_plan
					value = 150
				}
			}
		}
		G91 = {
			country_event = {
				id = flavor_isobelin.325
			}
		}
	}
}

#Allclan
#I know we use an inconsistent naming scheme for these, it made sense organizationally trust me
add_pandemonium = {
	add_government_power = {
		mechanic_type = allclan_pandemonium_mechanic
		power_type = allclan_pandemonium_power
		value = $amount$
	}
}

I98_increase_overgobulation = {
	custom_tooltip = I98_increase_overgobulation_tt
	hidden_effect = {
		if = {
			limit = { has_country_modifier = I98_overgobulation_1 }
			remove_country_modifier = I98_overgobulation_1
			add_country_modifier = { name = I98_overgobulation_2 duration = -1 }
		}
		else_if = {
			limit = { has_country_modifier = I98_overgobulation_2 }
			remove_country_modifier = I98_overgobulation_2
			add_country_modifier = { name = I98_overgobulation_3 duration = -1 }
		}
		else_if = {
			limit = { has_country_modifier = I98_overgobulation_3 }
			remove_country_modifier = I98_overgobulation_3
			add_country_modifier = { name = I98_overgobulation_4 duration = -1 }
		}
		else_if = {
			limit = { has_country_modifier = I98_overgobulation_4 }
			#do nothing, you are maximum overgobulated
		}
		else = {
			#catch-all if this effect triggers without you already having at least one level of overgobulation.
			add_country_modifier = { name = I98_overgobulation_1 duration = -1 }
		}
	}
}

I98_decrease_overgobulation = {
	custom_tooltip = I98_decrease_overgobulation_tt
	hidden_effect = {
		if = {
			limit = { has_country_modifier = I98_overgobulation_4 }
			remove_country_modifier = I98_overgobulation_4
			add_country_modifier = { name = I98_overgobulation_3 duration = -1 }
		}
		else_if = {
			limit = { has_country_modifier = I98_overgobulation_3 }
			remove_country_modifier = I98_overgobulation_3
			add_country_modifier = { name = I98_overgobulation_2 duration = -1 }
		}
		else_if = {
			limit = { has_country_modifier = I98_overgobulation_2 }
			remove_country_modifier = I98_overgobulation_2
			add_country_modifier = { name = I98_overgobulation_1 duration = -1 }
		}
		else_if = {
			limit = { has_country_modifier = I98_overgobulation_1 }
			#you are no longer overgobulated, congrats
			remove_country_modifier = I98_overgobulation_1
		}
	}
}

I98_increase_plunge_severity = {
	custom_tooltip = I98_increase_severity_tt
	hidden_effect = {
		if = {
			limit = { has_country_flag = I98_frenzy_flag has_country_flag = I98_severity_0 }
			clr_country_flag = I98_severity_0
			set_country_flag = I98_severity_1
		}
		else_if = {
			limit = { has_country_flag = I98_frenzy_flag has_country_flag = I98_severity_1 }
			clr_country_flag = I98_severity_1
			set_country_flag = I98_severity_2
		}
		else_if = {
			limit = { has_country_flag = I98_frenzy_flag has_country_flag = I98_severity_2 }
			clr_country_flag = I98_severity_2
			set_country_flag = I98_severity_3
		}
		else_if = {
			limit = { has_country_flag = I98_frenzy_flag has_country_flag = I98_severity_3 }
			clr_country_flag = I98_severity_3
			set_country_flag = I98_severity_4
		}
		else_if = {
			limit = { has_country_flag = I98_frenzy_flag has_country_flag = I98_severity_4 }
			clr_country_flag = I98_severity_4
			set_country_flag = I98_severity_5
		}
	}
}

I98_decrease_plunge_severity = {
	custom_tooltip = I98_decrease_severity_tt
	hidden_effect = {
		if = {
			limit = { has_country_flag = I98_frenzy_flag has_country_flag = I98_severity_5 }
			clr_country_flag = I98_severity_5
			set_country_flag = I98_severity_4
		}
		else_if = {
			limit = { has_country_flag = I98_frenzy_flag has_country_flag = I98_severity_4 }
			clr_country_flag = I98_severity_4
			set_country_flag = I98_severity_3
		}
		else_if = {
			limit = { has_country_flag = I98_frenzy_flag has_country_flag = I98_severity_3 }
			clr_country_flag = I98_severity_3
			set_country_flag = I98_severity_2
		}
		else_if = {
			limit = { has_country_flag = I98_frenzy_flag has_country_flag = I98_severity_2 }
			clr_country_flag = I98_severity_2
			set_country_flag = I98_severity_1
		}
		else_if = {
			limit = { has_country_flag = I98_frenzy_flag has_country_flag = I98_severity_1 }
			clr_country_flag = I98_severity_1
			set_country_flag = I98_severity_0
		}
	}
}

I98_devastate_province = {
	hidden_effect = {
		random = { chance = 75 add_devastation = 1 }
		random = { chance = 75 add_devastation = 1 }
		random = { chance = 75 add_devastation = 1 }
		random = { chance = 75 add_devastation = 1 }
		random = { chance = 75 add_devastation = 1 }
		random = { chance = 75 add_devastation = 1 }
		random = { chance = 75 add_devastation = 1 }
		random = { chance = 75 add_devastation = 1 }
		random = { chance = 75 add_devastation = 1 }
		random = { chance = 75 add_devastation = 1 }
	}
}

I98_goblintide_effect = {
	custom_tooltip = I98_goblintide_effect_tt
	hidden_effect = {
		random_list = {
			1 = { change_culture = trolltamer_goblin }
			1 = { change_culture = cave_goblin }
			1 = { change_culture = undergrowth_goblin }
			1 = { change_culture = rustroad_goblin }
			1 = { change_culture = coldcave_goblin }
			1 = { change_culture = goldtooth_goblin }
			1 = { change_culture = straggler_goblin }
			1 = { change_culture = common_goblin }
			1 = { change_culture = skinburner_goblin }
			1 = { change_culture = crawler_goblin }
			1 = { change_culture = exodus_goblin }
		}
	}
}

I98_increment_tithic = {
	change_variable = {
		which = tithicIncrement
		value = 1
	}
}

I98_define_befuddle_menu = {
	random_owned_province = {
		limit = { I98_can_befuddle_hold = yes NOT = { has_province_flag = hold_@ROOT } }
		set_province_flag = option_hold_1_@ROOT
		set_province_flag = hold_@ROOT
		save_event_target_as = hold1
	}
	random_owned_province = {
		limit = { I98_can_befuddle_hold = yes NOT = { has_province_flag = hold_@ROOT } }
		set_province_flag = option_hold_2_@ROOT
		set_province_flag = hold_@ROOT
		save_event_target_as = hold2
	}
	random_owned_province = {
		limit = { I98_can_befuddle_hold = yes NOT = { has_province_flag = hold_@ROOT } }
		set_province_flag = option_hold_3_@ROOT
		set_province_flag = hold_@ROOT
		save_event_target_as = hold3
	}
	random_owned_province = {
		limit = { I98_can_befuddle_hold = yes NOT = { has_province_flag = hold_@ROOT } }
		set_province_flag = option_hold_4_@ROOT
		set_province_flag = hold_@ROOT
		save_event_target_as = hold4
	}
	random_owned_province = {
		limit = { I98_can_befuddle_hold = yes NOT = { has_province_flag = hold_@ROOT } }
		set_province_flag = option_hold_5_@ROOT
		set_province_flag = hold_@ROOT
		save_event_target_as = hold5
	}
	random_owned_province = {
		limit = { I98_can_befuddle_hold = yes NOT = { has_province_flag = hold_@ROOT } }
		set_province_flag = option_hold_6_@ROOT
		set_province_flag = hold_@ROOT
		save_event_target_as = hold6
	}
	random_owned_province = {
		limit = { I98_can_befuddle_hold = yes NOT = { has_province_flag = hold_@ROOT } }
		set_province_flag = option_hold_7_@ROOT
		set_province_flag = hold_@ROOT
		save_event_target_as = hold7
	}
	random_owned_province = {
		limit = { I98_can_befuddle_hold = yes NOT = { has_province_flag = hold_@ROOT } }
		set_province_flag = option_hold_8_@ROOT
		set_province_flag = hold_@ROOT
		save_event_target_as = hold8
	}
	random_owned_province = {
		limit = { I98_can_befuddle_hold = yes NOT = { has_province_flag = hold_@ROOT } }
		set_province_flag = option_hold_9_@ROOT
		set_province_flag = hold_@ROOT
		save_event_target_as = hold9
	}
	random_owned_province = {
		limit = { I98_can_befuddle_hold = yes NOT = { has_province_flag = hold_@ROOT } }
		set_province_flag = option_hold_10_@ROOT
		set_province_flag = hold_@ROOT
		save_event_target_as = hold10
	}
	random_owned_province = {
		limit = { I98_can_befuddle_hold = yes NOT = { has_province_flag = hold_@ROOT } }
		set_province_flag = option_hold_11_@ROOT
		set_province_flag = hold_@ROOT
		save_event_target_as = hold11
	}
	random_owned_province = {
		limit = { I98_can_befuddle_hold = yes NOT = { has_province_flag = hold_@ROOT } }
		set_province_flag = option_hold_12_@ROOT
		set_province_flag = hold_@ROOT
		save_event_target_as = hold12
	}
	random_owned_province = {
		limit = { I98_can_befuddle_hold = yes NOT = { has_province_flag = hold_@ROOT } }
		set_province_flag = option_hold_13_@ROOT
		set_province_flag = hold_@ROOT
		save_event_target_as = hold13
	}
	random_owned_province = {
		limit = { I98_can_befuddle_hold = yes NOT = { has_province_flag = hold_@ROOT } }
		set_province_flag = option_hold_14_@ROOT
		set_province_flag = hold_@ROOT
		save_event_target_as = hold14
	}
	random_owned_province = {
		limit = { I98_can_befuddle_hold = yes NOT = { has_province_flag = hold_@ROOT } }
		set_province_flag = option_hold_15_@ROOT
		set_province_flag = hold_@ROOT
		save_event_target_as = hold15
	}
	random_owned_province = {
		limit = { I98_can_befuddle_hold = yes NOT = { has_province_flag = hold_@ROOT } }
		set_province_flag = option_hold_16_@ROOT
		set_province_flag = hold_@ROOT
		save_event_target_as = hold16
	}
	random_owned_province = {
		limit = { I98_can_befuddle_hold = yes NOT = { has_province_flag = hold_@ROOT } }
		set_province_flag = option_hold_17_@ROOT
		set_province_flag = hold_@ROOT
		save_event_target_as = hold17
	}
	random_owned_province = {
		limit = { I98_can_befuddle_hold = yes NOT = { has_province_flag = hold_@ROOT } }
		set_province_flag = option_hold_18_@ROOT
		set_province_flag = hold_@ROOT
		save_event_target_as = hold18
	}
	random_owned_province = {
		limit = { I98_can_befuddle_hold = yes NOT = { has_province_flag = hold_@ROOT } }
		set_province_flag = option_hold_19_@ROOT
		set_province_flag = hold_@ROOT
		save_event_target_as = hold19
	}
	random_owned_province = {
		limit = { I98_can_befuddle_hold = yes NOT = { has_province_flag = hold_@ROOT } }
		set_province_flag = option_hold_20_@ROOT
		set_province_flag = hold_@ROOT
		save_event_target_as = hold20
	}
	random_owned_province = {
		limit = { I98_can_befuddle_hold = yes NOT = { has_province_flag = hold_@ROOT } }
		set_province_flag = option_hold_21_@ROOT
		set_province_flag = hold_@ROOT
		save_event_target_as = hold21
	}
	random_owned_province = {
		limit = { I98_can_befuddle_hold = yes NOT = { has_province_flag = hold_@ROOT } }
		set_province_flag = option_hold_22_@ROOT
		set_province_flag = hold_@ROOT
		save_event_target_as = hold22
	}
	random_owned_province = {
		limit = { I98_can_befuddle_hold = yes NOT = { has_province_flag = hold_@ROOT } }
		set_province_flag = option_hold_23_@ROOT
		set_province_flag = hold_@ROOT
		save_event_target_as = hold23
	}
	random_owned_province = {
		limit = { I98_can_befuddle_hold = yes NOT = { has_province_flag = hold_@ROOT } }
		set_province_flag = option_hold_24_@ROOT
		set_province_flag = hold_@ROOT
		save_event_target_as = hold24
	}
	random_owned_province = {
		limit = { I98_can_befuddle_hold = yes NOT = { has_province_flag = hold_@ROOT } }
		set_province_flag = option_hold_25_@ROOT
		set_province_flag = hold_@ROOT
		save_event_target_as = hold25
	}
	random_owned_province = {
		limit = { I98_can_befuddle_hold = yes NOT = { has_province_flag = hold_@ROOT } }
		set_province_flag = option_hold_26_@ROOT
		set_province_flag = hold_@ROOT
		save_event_target_as = hold26
	}
	random_owned_province = {
		limit = { I98_can_befuddle_hold = yes NOT = { has_province_flag = hold_@ROOT } }
		set_province_flag = option_hold_27_@ROOT
		set_province_flag = hold_@ROOT
		save_event_target_as = hold27
	}
	random_owned_province = {
		limit = { I98_can_befuddle_hold = yes NOT = { has_province_flag = hold_@ROOT } }
		set_province_flag = option_hold_28_@ROOT
		set_province_flag = hold_@ROOT
		save_event_target_as = hold28
	}
	random_owned_province = {
		limit = { I98_can_befuddle_hold = yes NOT = { has_province_flag = hold_@ROOT } }
		set_province_flag = option_hold_29_@ROOT
		set_province_flag = hold_@ROOT
		save_event_target_as = hold29
	}
}

I98_befuddle_hold = {
	set_province_flag = I98_befuddling_hold_flag
	if = {
		limit = { has_province_modifier = dig_1 }
		add_province_modifier = {
			name = I98_befuddling_hold_mod
			duration = 365
		}
		owner = { add_treasury = -200 }
		set_province_flag = I98_befuddling_hold_flag
		hidden_effect = { province_event = { id = allclan.31 days = 366 } }
	}
	if = {
		limit = { has_province_modifier = dig_2 }
		add_province_modifier = {
			name = I98_befuddling_hold_mod
			duration = 730
		}
		owner = { add_treasury = -400 }
		set_province_flag = I98_befuddling_hold_flag
		hidden_effect = { province_event = { id = allclan.31 days = 731 } }
	}
	if = {
		limit = { has_province_modifier = dig_3 }
		add_province_modifier = {
			name = I98_befuddling_hold_mod
			duration = 1095
		}
		owner = { add_treasury = -600 }
		set_province_flag = I98_befuddling_hold_flag
		hidden_effect = { province_event = { id = allclan.31 days = 1096 } }
	}
	if = {
		limit = { has_province_modifier = dig_4 }
		add_province_modifier = {
			name = I98_befuddling_hold_mod
			duration = 1460
		}
		owner = { add_treasury = -800 }
		set_province_flag = I98_befuddling_hold_flag
		hidden_effect = { province_event = { id = allclan.31 days = 1461 } }
	}
	if = {
		limit = { has_province_modifier = dig_5 }
		add_province_modifier = {
			name = I98_befuddling_hold_mod
			duration = 1825
		}
		owner = { add_treasury = -1000 }
		set_province_flag = I98_befuddling_hold_flag
		hidden_effect = { province_event = { id = allclan.31 days = 1826 } }
	}
	if = {
		limit = { has_province_modifier = dig_6 }
		add_province_modifier = {
			name = I98_befuddling_hold_mod
			duration = 2190
		}
		owner = { add_treasury = -1200 }
		set_province_flag = I98_befuddling_hold_flag
		hidden_effect = { province_event = { id = allclan.31 days = 2191 } }
	}
	if = {
		limit = { has_province_modifier = dig_7 }
		add_province_modifier = {
			name = I98_befuddling_hold_mod
			duration = 2555
		}
		owner = { add_treasury = -1400 }
		set_province_flag = I98_befuddling_hold_flag
		hidden_effect = { province_event = { id = allclan.31 days = 2556 } }
	}
	if = {
		limit = { has_province_modifier = dig_8 }
		add_province_modifier = {
			name = I98_befuddling_hold_mod
			duration = 2920
		}
		owner = { add_treasury = -1600 }
		set_province_flag = I98_befuddling_hold_flag
		hidden_effect = { province_event = { id = allclan.31 days = 2921 } }
	}
	if = {
		limit = { has_province_modifier = dig_9 }
		add_province_modifier = {
			name = I98_befuddling_hold_mod
			duration = 3285
		}
		owner = { add_treasury = -1800 }
		set_province_flag = I98_befuddling_hold_flag
		hidden_effect = { province_event = { id = allclan.31 days = 3286 } }
	}
	if = {
		limit = { has_province_modifier = dig_10 }
		add_province_modifier = {
			name = I98_befuddling_hold_mod
			duration = 3650
		}
		owner = { add_treasury = -2000 }
		set_province_flag = I98_befuddling_hold_flag
		hidden_effect = { province_event = { id = allclan.31 days = 3650 } }
	}
	if = {
		limit = { has_province_modifier = dig_11 }
		add_province_modifier = {
			name = I98_befuddling_hold_mod
			duration = 4015
		}
		owner = { add_treasury = -2200 }
		set_province_flag = I98_befuddling_hold_flag
		hidden_effect = { province_event = { id = allclan.31 days = 4016 } }
	}
}

I98_apply_confoundment = {
	hidden_effect = {
		remove_province_modifier = I98_confounded_2
		remove_province_modifier = I98_confounded_3
		remove_province_modifier = I98_confounded_4
		remove_province_modifier = I98_confounded_5
		remove_province_modifier = I98_confounded_6
		remove_province_modifier = I98_confounded_7
		remove_province_modifier = I98_confounded_8
		remove_province_modifier = I98_confounded_9
		remove_province_modifier = I98_confounded_10
		remove_province_modifier = I98_confounded_11
		if = {
			limit = { has_province_modifier = dig_2 }
			add_province_modifier = {
				name = I98_confounded_2
				duration = -1
			}
		}
		else_if = {
			limit = { has_province_modifier = dig_3 }
			add_province_modifier = {
				name = I98_confounded_3
				duration = -1
			}
		}
		else_if = {
			limit = { has_province_modifier = dig_4 }
			add_province_modifier = {
				name = I98_confounded_4
				duration = -1
			}
		}
		else_if = {
			limit = { has_province_modifier = dig_5 }
			add_province_modifier = {
				name = I98_confounded_5
				duration = -1
			}
		}
		else_if = {
			limit = { has_province_modifier = dig_6 }
			add_province_modifier = {
				name = I98_confounded_6
				duration = -1
			}
		}
		else_if = {
			limit = { has_province_modifier = dig_7 }
			add_province_modifier = {
				name = I98_confounded_7
				duration = -1
			}
		}
		else_if = {
			limit = { has_province_modifier = dig_8 }
			add_province_modifier = {
				name = I98_confounded_8
				duration = -1
			}
		}
		else_if = {
			limit = { has_province_modifier = dig_9 }
			add_province_modifier = {
				name = I98_confounded_9
				duration = -1
			}
		}
		else_if = {
			limit = { has_province_modifier = dig_10 }
			add_province_modifier = {
				name = I98_confounded_10
				duration = -1
			}
		}
		else_if = {
			limit = { has_province_modifier = dig_11 }
			add_province_modifier = {
				name = I98_confounded_11
				duration = -1
			}
		}
	}
}

I98_adm_tech_tracker = {
	hidden_effect = {
		if = {
			limit = { adm_tech = 4 }
			set_global_flag = adm_tech_4
		}
		else_if = {
			limit = { adm_tech = 5 }
			set_global_flag = adm_tech_5
		}
		else_if = {
			limit = { adm_tech = 6 }
			set_global_flag = adm_tech_6
		}
		else_if = {
			limit = { adm_tech = 7 }
			set_global_flag = adm_tech_7
		}
		else_if = {
			limit = { adm_tech = 8 }
			set_global_flag = adm_tech_8
		}
		else_if = {
			limit = { adm_tech = 9 }
			set_global_flag = adm_tech_9
		}
		else_if = {
			limit = { adm_tech = 10 }
			set_global_flag = adm_tech_10
		}
		else_if = {
			limit = { adm_tech = 11 }
			set_global_flag = adm_tech_11
		}
		else_if = {
			limit = { adm_tech = 12 }
			set_global_flag = adm_tech_12
		}
		else_if = {
			limit = { adm_tech = 13 }
			set_global_flag = adm_tech_13
		}
		else_if = {
			limit = { adm_tech = 14 }
			set_global_flag = adm_tech_14
		}
		else_if = {
			limit = { adm_tech = 15 }
			set_global_flag = adm_tech_15
		}
		else_if = {
			limit = { adm_tech = 16 }
			set_global_flag = adm_tech_16
		}
		else_if = {
			limit = { adm_tech = 17 }
			set_global_flag = adm_tech_17
		}
		else_if = {
			limit = { adm_tech = 18 }
			set_global_flag = adm_tech_18
		}
		else_if = {
			limit = { adm_tech = 19 }
			set_global_flag = adm_tech_19
		}
		else_if = {
			limit = { adm_tech = 20 }
			set_global_flag = adm_tech_20
		}
		else_if = {
			limit = { adm_tech = 21 }
			set_global_flag = adm_tech_21
		}
		else_if = {
			limit = { adm_tech = 22 }
			set_global_flag = adm_tech_22
		}
		else_if = {
			limit = { adm_tech = 23 }
			set_global_flag = adm_tech_23
		}
		else_if = {
			limit = { adm_tech = 24 }
			set_global_flag = adm_tech_24
		}
		else_if = {
			limit = { adm_tech = 25 }
			set_global_flag = adm_tech_25
		}
		else_if = {
			limit = { adm_tech = 26 }
			set_global_flag = adm_tech_26
		}
		else_if = {
			limit = { adm_tech = 27 }
			set_global_flag = adm_tech_27
		}
		else_if = {
			limit = { adm_tech = 28 }
			set_global_flag = adm_tech_28
		}
		else_if = {
			limit = { adm_tech = 29 }
			set_global_flag = adm_tech_29
		}
		else_if = {
			limit = { adm_tech = 30 }
			set_global_flag = adm_tech_30
		}
		else_if = {
			limit = { adm_tech = 31 }
			set_global_flag = adm_tech_31
		}
		else_if = {
			limit = { adm_tech = 32 }
			set_global_flag = adm_tech_32
		}
	}
}

I98_rename_gobgorod = {
	if = {limit = {province_id = 2864} change_province_name = "Gobgorod |1|"}
	if = {limit = {province_id = 2865} change_province_name = "Gobgorod |3|"}
	if = {limit = {province_id = 2866} change_province_name = "Gobgorod |4|"}
	if = {limit = {province_id = 2867} change_province_name = "Gobgorod |5|"}
	if = {limit = {province_id = 2871} change_province_name = "Gobgorod |6|"}
	if = {limit = {province_id = 2872} change_province_name = "Gobgorod |8|"}
	if = {limit = {province_id = 2873} change_province_name = "Gobgorod |10|"}
	if = {limit = {province_id = 2874} change_province_name = "Gobgorod |11|"}
	if = {limit = {province_id = 2875} change_province_name = "Gobgorod |13|"}
	if = {limit = {province_id = 2877} change_province_name = "Gobgorod |15|"}
	if = {limit = {province_id = 2878} change_province_name = "Gobgorod |17|"}
	if = {limit = {province_id = 2879} change_province_name = "Gobgorod |18|"}
	if = {limit = {province_id = 2880} change_province_name = "Gobgorod |19|"}
	if = {limit = {province_id = 2881} change_province_name = "Gobgorod |20|"}
	if = {limit = {province_id = 2882} change_province_name = "Gobgorod |21|"}
	if = {limit = {province_id = 2883} change_province_name = "Gobgorod |22|"}
	if = {limit = {province_id = 2884} change_province_name = "Gobgorod |24|"}
	if = {limit = {province_id = 2885} change_province_name = "Gobgorod |25|"}
	if = {limit = {province_id = 2886} change_province_name = "Gobgorod |27|"}
	if = {limit = {province_id = 2887} change_province_name = "Gobgorod |28|"}
	if = {limit = {province_id = 2888} change_province_name = "Gobgorod |29|"}
	if = {limit = {province_id = 2889} change_province_name = "Gobgorod |30|"}
	if = {limit = {province_id = 2890} change_province_name = "Gobgorod |31|"}
	if = {limit = {province_id = 2891} change_province_name = "Gobgorod |32|"}
	if = {limit = {province_id = 2892} change_province_name = "Gobgorod |34|"}
	if = {limit = {province_id = 2893} change_province_name = "Gobgorod |35|"}
	if = {limit = {province_id = 2894} change_province_name = "Gobgorod |36|"}
	if = {limit = {province_id = 2895} change_province_name = "Gobgorod |37|"}
	if = {limit = {province_id = 2932} change_province_name = "Gobgorod |14|"}
	if = {limit = {province_id = 2933} change_province_name = "Gobgorod |9|"}
	if = {limit = {province_id = 2934} change_province_name = "Gobgorod |12|"}
	if = {limit = {province_id = 2935} change_province_name = "Gobgorod |2|"}
	if = {limit = {province_id = 2937} change_province_name = "Gobgorod |16|"}
	if = {limit = {province_id = 4027} change_province_name = "Gobgorod |33|"}
	if = {limit = {province_id = 4028} change_province_name = "Gobgorod |26|"}
	if = {limit = {province_id = 4029} change_province_name = "Gobgorod |23|"}
	if = {limit = {province_id = 4043} change_province_name = "Gobgorod |7|"}
	if = {limit = {province_id = 4090} change_province_name = "Gobgorod |44|"}
	if = {limit = {province_id = 4091} change_province_name = "Gobgorod |39|"}
	if = {limit = {province_id = 4111} change_province_name = "Gobgorod |40|"}
	if = {limit = {province_id = 4112} change_province_name = "Gobgorod |41|"}
	if = {limit = {province_id = 4113} change_province_name = "Gobgorod |42|"}
	if = {limit = {province_id = 4114} change_province_name = "Gobgorod |43|"}
	if = {limit = {province_id = 4231} change_province_name = "Gobgorod |38|"}
	if = {limit = {province_id = 4242} change_province_name = "Gobgorod |45|"}
	if = {limit = {province_id = 4243} change_province_name = "Gobgorod |46|"}
	if = {limit = {province_id = 4244} change_province_name = "Gobgorod |47|"}
	if = {limit = {province_id = 4245} change_province_name = "Gobgorod |49|"}
	if = {limit = {province_id = 4246} change_province_name = "Gobgorod |48|"}
	if = {limit = {province_id = 4248} change_province_name = "Gobgorod |50|"}
	if = {limit = {province_id = 4249} change_province_name = "Gobgorod |51|"}
	if = {limit = {province_id = 4250} change_province_name = "Gobgorod |52|"}
	if = {limit = {province_id = 4255} change_province_name = "Gobgorod |53|"}
	if = {limit = {province_id = 4256} change_province_name = "Gobgorod |54|"}
	if = {limit = {province_id = 4257} change_province_name = "Gobgorod |55|"}
	if = {limit = {province_id = 4258} change_province_name = "Gobgorod |56|"}
	if = {limit = {province_id = 4259} change_province_name = "Gobgorod |57|"}
	if = {limit = {province_id = 4260} change_province_name = "Gobgorod |58|"}
	if = {limit = {province_id = 4261} change_province_name = "Gobgorod |59|"}
	if = {limit = {province_id = 4262} change_province_name = "Gobgorod |60|"}
	if = {limit = {province_id = 4263} change_province_name = "Gobgorod |61|"}
	if = {limit = {province_id = 4264} change_province_name = "Gobgorod |62|"}
	if = {limit = {province_id = 4297} change_province_name = "Gobgorod |63|"}
	if = {limit = {province_id = 4298} change_province_name = "Gobgorod |64|"}
	if = {limit = {province_id = 4300} change_province_name = "Gobgorod |65|"}
	if = {limit = {province_id = 4302} change_province_name = "Gobgorod |66|"}
	if = {limit = {province_id = 4303} change_province_name = "Gobgorod |67|"}
	if = {limit = {province_id = 4304} change_province_name = "Gobgorod |68|"}
	if = {limit = {province_id = 4305} change_province_name = "Gobgorod |69|"}
	if = {limit = {province_id = 4306} change_province_name = "Gobgorod |70|"}
	if = {limit = {province_id = 4307} change_province_name = "Gobgorod |71|"}
	if = {limit = {province_id = 4308} change_province_name = "Gobgorod |72|"}
	if = {limit = {province_id = 4309} change_province_name = "Gobgorod |73|"}
	if = {limit = {province_id = 4310} change_province_name = "Gobgorod |74|"}
	if = {limit = {province_id = 4314} change_province_name = "Gobgorod |75|"}
	if = {limit = {province_id = 4315} change_province_name = "Gobgorod |76|"}
	if = {limit = {province_id = 4316} change_province_name = "Gobgorod |77|"}
	if = {limit = {province_id = 4317} change_province_name = "Gobgorod |78|"}
	if = {limit = {province_id = 4318} change_province_name = "Gobgorod |79|"}
	if = {limit = {province_id = 4319} change_province_name = "Gobgorod |80|"}
	if = {limit = {province_id = 4320} change_province_name = "Gobgorod |81|"}
	if = {limit = {province_id = 4356} change_province_name = "Gobgorod |82|"}
	if = {limit = {province_id = 4359} change_province_name = "Gobgorod |83|"}
}

I98_generate_nuke_options = {
	random_war_enemy_country = {
		limit = {
			any_owned_province = {
				sieged_by = ROOT
				fort_level = 1
			}
		}
		random_owned_province = {
			limit = {
				sieged_by = ROOT
				fort_level = 1
			}
			save_event_target_as = nuke_target_1
			set_province_flag = nuke_target_1
			ROOT = { set_country_flag = nuke_target_1 }
		}
	}
	if = {
		limit = {
			any_war_enemy_country = {
				any_owned_province = {
					sieged_by = ROOT
					fort_level = 1
					NOT = { has_province_flag = nuke_target_1 }
				}
			}
		}
		random_war_enemy_country = {
			limit = {
				any_owned_province = {
					sieged_by = ROOT
					fort_level = 1
					NOT = { has_province_flag = nuke_target_1 }
				}
			}
			random_owned_province = {
				limit = {
					sieged_by = ROOT
					fort_level = 1
					NOT = { has_province_flag = nuke_target_1 }
				}
				save_event_target_as = nuke_target_2
				set_province_flag = nuke_target_2
				ROOT = { set_country_flag = nuke_target_2 }
			}
		}
	}
	if = {
		limit = {
			any_war_enemy_country = {
				any_owned_province = {
					sieged_by = ROOT
					fort_level = 1
					NOT = {
						has_province_flag = nuke_target_1
						has_province_flag = nuke_target_2
					}
				}
			}
		}
		random_war_enemy_country = {
			limit = {
				any_owned_province = {
					sieged_by = ROOT
					fort_level = 1
					NOT = {
						has_province_flag = nuke_target_1
						has_province_flag = nuke_target_2
					}
				}
			}
			random_owned_province = {
				limit = {
					sieged_by = ROOT
					fort_level = 1
					NOT = {
						has_province_flag = nuke_target_1
						has_province_flag = nuke_target_2
					}
				}
				save_event_target_as = nuke_target_3
				set_province_flag = nuke_target_3
				ROOT = { set_country_flag = nuke_target_3 }
			}
		}
	}
}

I98_tame_creature = {
	custom_tooltip = I98_tame_$creature$_tt
	custom_tooltip = I98_tame_tt
	owner = { set_country_flag = I98_bestiary_$creature$ }
	clr_province_flag = taming_$creature$_flag
}

I98_spawn_kinstrife_troops = {
	infantry = THIS
}

# Gor Burad
gor_burad_set_rage = {
	if = {
		limit = {
			check_variable = {
				which = gor_burad_raging_level
				value = 6
			}
		}
		# 6, 7, 8, 9, 10
		if = {
			limit = {
				check_variable = {
					which = gor_burad_raging_level
					value = 8
				}
			}
			# 8, 9, 10
			if = {
				limit = {
					check_variable = {
						which = gor_burad_raging_level
						value = 10
					}
				}
				# 10

				# The variable should never be above 10.
				set_variable = {
					which = gor_burad_raging_level
					value = 10
				}
				
				if = {
					limit = {
						has_country_flag = gor_burad_rage_untamed
					}
					add_country_modifier = {
						name = gor_burad_basalt_rage_10
						duration = -1
					}
				}
				else_if = {
					limit = {
						has_country_flag = gor_burad_rage_harnessed
					}
					add_country_modifier = {
						name = gor_burad_basalt_rage_harnessed_10
						duration = -1
					}
				}
				else_if = {
					limit = {
						has_country_flag = gor_burad_rage_unleashed
					}
					add_country_modifier = {
						name = gor_burad_basalt_rage_unleashed_10
						duration = -1
					}
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = gor_burad_raging_level
						value = 9
					}
				}
				# 9
				if = {
					limit = {
						has_country_flag = gor_burad_rage_untamed
					}
					add_country_modifier = {
						name = gor_burad_basalt_rage_9
						duration = -1
					}
				}
				else_if = {
					limit = {
						has_country_flag = gor_burad_rage_harnessed
					}
					add_country_modifier = {
						name = gor_burad_basalt_rage_harnessed_9
						duration = -1
					}
				}
				else_if = {
					limit = {
						has_country_flag = gor_burad_rage_unleashed
					}
					add_country_modifier = {
						name = gor_burad_basalt_rage_unleashed_9
						duration = -1
					}
				}
			}
			else = {
				# 8
				if = {
					limit = {
						has_country_flag = gor_burad_rage_untamed
					}
					add_country_modifier = {
						name = gor_burad_basalt_rage_8
						duration = -1
					}
				}
				else_if = {
					limit = {
						has_country_flag = gor_burad_rage_harnessed
					}
					add_country_modifier = {
						name = gor_burad_basalt_rage_harnessed_8
						duration = -1
					}
				}
				else_if = {
					limit = {
						has_country_flag = gor_burad_rage_unleashed
					}
					add_country_modifier = {
						name = gor_burad_basalt_rage_unleashed_8
						duration = -1
					}
				}
			}
		}
		else = {
			# 6, 7
			if = {
				limit = {
					check_variable = {
						which = gor_burad_raging_level
						value = 7
					}
				}
				# 7
				if = {
					limit = {
						has_country_flag = gor_burad_rage_untamed
					}
					add_country_modifier = {
						name = gor_burad_basalt_rage_7
						duration = -1
					}
				}
				else_if = {
					limit = {
						has_country_flag = gor_burad_rage_harnessed
					}
					add_country_modifier = {
						name = gor_burad_basalt_rage_harnessed_7
						duration = -1
					}
				}
				else_if = {
					limit = {
						has_country_flag = gor_burad_rage_unleashed
					}
					add_country_modifier = {
						name = gor_burad_basalt_rage_unleashed_7
						duration = -1
					}
				}
			}
			else = {
				# 6
				if = {
					limit = {
						has_country_flag = gor_burad_rage_untamed
					}
					add_country_modifier = {
						name = gor_burad_basalt_rage_6
						duration = -1
					}
				}
				else_if = {
					limit = {
						has_country_flag = gor_burad_rage_harnessed
					}
					add_country_modifier = {
						name = gor_burad_basalt_rage_harnessed_6
						duration = -1
					}
				}
				else_if = {
					limit = {
						has_country_flag = gor_burad_rage_unleashed
					}
					add_country_modifier = {
						name = gor_burad_basalt_rage_unleashed_6
						duration = -1
					}
				}
			}
		}
	}
	else = {
		# 0, 1, 2, 3, 4, 5
		if = {
			limit = {
				check_variable = {
					which = gor_burad_raging_level
					value = 3
				}
			}
			# 3, 4, 5
			if = {
				limit = {
					check_variable = {
						which = gor_burad_raging_level
						value = 5
					}
				}
				# 5
				if = {
					limit = {
						has_country_flag = gor_burad_rage_untamed
					}
					add_country_modifier = {
						name = gor_burad_basalt_rage_5
						duration = -1
					}
				}
				else_if = {
					limit = {
						has_country_flag = gor_burad_rage_harnessed
					}
					add_country_modifier = {
						name = gor_burad_basalt_rage_harnessed_5
						duration = -1
					}
				}
				else_if = {
					limit = {
						has_country_flag = gor_burad_rage_unleashed
					}
					add_country_modifier = {
						name = gor_burad_basalt_rage_unleashed_5
						duration = -1
					}
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = gor_burad_raging_level
						value = 4
					}
				}
				# 4	
				if = {
					limit = {
						has_country_flag = gor_burad_rage_untamed
					}
					add_country_modifier = {
						name = gor_burad_basalt_rage_4
						duration = -1
					}
				}
				else_if = {
					limit = {
						has_country_flag = gor_burad_rage_harnessed
					}
					add_country_modifier = {
						name = gor_burad_basalt_rage_harnessed_4
						duration = -1
					}
				}
				else_if = {
					limit = {
						has_country_flag = gor_burad_rage_unleashed
					}
					add_country_modifier = {
						name = gor_burad_basalt_rage_unleashed_4
						duration = -1
					}
				}
			}
			else = {
				# 3
				if = {
					limit = {
						has_country_flag = gor_burad_rage_untamed
					}
					add_country_modifier = {
						name = gor_burad_basalt_rage_3
						duration = -1
					}
				}
				else_if = {
					limit = {
						has_country_flag = gor_burad_rage_harnessed
					}
					add_country_modifier = {
						name = gor_burad_basalt_rage_harnessed_3
						duration = -1
					}
				}
				else_if = {
					limit = {
						has_country_flag = gor_burad_rage_unleashed
					}
					add_country_modifier = {
						name = gor_burad_basalt_rage_unleashed_3
						duration = -1
					}
				}				
			}
		}
		else = {
			# 0, 1, 2
			if = {
				limit = {
					check_variable = {
						which = gor_burad_raging_level
						value = 2
					}				
				}
				# 2
				if = {
					limit = {
						has_country_flag = gor_burad_rage_untamed
					}
					add_country_modifier = {
						name = gor_burad_basalt_rage_2
						duration = -1
					}
				}
				else_if = {
					limit = {
						has_country_flag = gor_burad_rage_harnessed
					}
					add_country_modifier = {
						name = gor_burad_basalt_rage_harnessed_2
						duration = -1
					}
				}
				else_if = {
					limit = {
						has_country_flag = gor_burad_rage_unleashed
					}
					add_country_modifier = {
						name = gor_burad_basalt_rage_unleashed_2
						duration = -1
					}
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = gor_burad_raging_level
						value = 1
					}				
				}
				# 1
				if = {
					limit = {
						has_country_flag = gor_burad_rage_untamed
					}
					add_country_modifier = {
						name = gor_burad_basalt_rage_1
						duration = -1
					}
				}
				else_if = {
					limit = {
						has_country_flag = gor_burad_rage_harnessed
					}
					add_country_modifier = {
						name = gor_burad_basalt_rage_harnessed_1
						duration = -1
					}
				}
				else_if = {
					limit = {
						has_country_flag = gor_burad_rage_unleashed
					}
					add_country_modifier = {
						name = gor_burad_basalt_rage_unleashed_1
						duration = -1
					}
				}				
			}
			else = {
				set_variable = {
					which = gor_burad_raging_level
					value = 0
				}
			}
		}		
	}
}

gor_burad_wipe_rage = {
	if = {
		limit = {
			check_variable = {
				which = gor_burad_raging_level
				value = 6
			}
		}
		# 6, 7, 8, 9, 10
		if = {
			limit = {
				check_variable = {
					which = gor_burad_raging_level
					value = 8
				}
			}
			# 8, 9, 10
			if = {
				limit = {
					check_variable = {
						which = gor_burad_raging_level
						value = 10
					}				
				}
				# 10
				remove_country_modifier = gor_burad_basalt_rage_10
				remove_country_modifier = gor_burad_basalt_rage_harnessed_10
				remove_country_modifier = gor_burad_basalt_rage_unleashed_10
			}
			else_if = {
				limit = {
					check_variable = {
						which = gor_burad_raging_level
						value = 9
					}				
				}
				# 9
				remove_country_modifier = gor_burad_basalt_rage_9
				remove_country_modifier = gor_burad_basalt_rage_harnessed_9
				remove_country_modifier = gor_burad_basalt_rage_unleashed_9
			}
			else = {
				# 8
				remove_country_modifier = gor_burad_basalt_rage_8
				remove_country_modifier = gor_burad_basalt_rage_harnessed_8
				remove_country_modifier = gor_burad_basalt_rage_unleashed_8
			}
		}
		else = {
			# 6, 7
			if = {
				limit = {
					check_variable = {
						which = gor_burad_raging_level
						value = 7
					}				
				}
				# 7
				remove_country_modifier = gor_burad_basalt_rage_7
				remove_country_modifier = gor_burad_basalt_rage_harnessed_7
				remove_country_modifier = gor_burad_basalt_rage_unleashed_7
			}
			else = {
				# 6
				remove_country_modifier = gor_burad_basalt_rage_6
				remove_country_modifier = gor_burad_basalt_rage_harnessed_6
				remove_country_modifier = gor_burad_basalt_rage_unleashed_6
			}
		}
	}
	else = {
		# 1, 2, 3, 4, 5
		if = {
			limit = {
				check_variable = {
					which = gor_burad_raging_level
					value = 3
				}
			}
			# 3, 4, 5
			if = {
				limit = {
					check_variable = {
						which = gor_burad_raging_level
						value = 5
					}				
				}
				# 5
				remove_country_modifier = gor_burad_basalt_rage_5
				remove_country_modifier = gor_burad_basalt_rage_harnessed_5
				remove_country_modifier = gor_burad_basalt_rage_unleashed_5
			}
			else_if = {
				limit = {
					check_variable = {
						which = gor_burad_raging_level
						value = 4
					}				
				}
				# 4
				remove_country_modifier = gor_burad_basalt_rage_4
				remove_country_modifier = gor_burad_basalt_rage_harnessed_4
				remove_country_modifier = gor_burad_basalt_rage_unleashed_4
			}
			else = {
				# 3
				remove_country_modifier = gor_burad_basalt_rage_3
				remove_country_modifier = gor_burad_basalt_rage_harnessed_3
				remove_country_modifier = gor_burad_basalt_rage_unleashed_3
			}
		}
		else = {
			# 0, 1, 2
			if = {
				limit = {
					check_variable = {
						which = gor_burad_raging_level
						value = 2
					}				
				}
				# 2
				remove_country_modifier = gor_burad_basalt_rage_2
				remove_country_modifier = gor_burad_basalt_rage_harnessed_2
				remove_country_modifier = gor_burad_basalt_rage_unleashed_2
			}
			else_if = {
				limit = {
					check_variable = {
						which = gor_burad_raging_level
						value = 1
					}				
				}
				# 1
				remove_country_modifier = gor_burad_basalt_rage_1
				remove_country_modifier = gor_burad_basalt_rage_harnessed_1
				remove_country_modifier = gor_burad_basalt_rage_unleashed_1
				
			}
			else = {
				# 0
				set_variable = {
					which = gor_burad_raging_level
					value = 0
				}
			}
		}
	}
}

gor_burad_change_rage = {
	custom_tooltip = gor_burad_change_rage_by_$value$
	hidden_effect = {
		gor_burad_wipe_rage = yes
		change_variable = { gor_burad_raging_level = $value$ }

		# Makes sure that the rage level is 0-10, both inclusive.
		if = {
			limit = {
				NOT = {
					check_variable = {
						which = gor_burad_raging_level
						value = 0
					}
				}
			}
			set_variable = {
				which = gor_burad_raging_level
				value = 0
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = gor_burad_raging_level
					value = 11
				}
			}
			set_variable = {
				which = gor_burad_raging_level
				value = 10
			}
			
		}
		
		gor_burad_set_rage = yes
	}
}

gor_burad_innovation_build = {
	if = {
		limit = {
			has_terrain = cavern
		}
		remove_province_modifier = gor_burad_irrigated_cave
		add_permanent_province_modifier = { 
			name = gor_burad_$track$_1 
			duration = -1
		}
	}
	else = {
		remove_province_modifier = gor_burad_lava_connection
		add_permanent_province_modifier = { 
			name = gor_burad_$track$_hold_1
			duration = -1
		}
	}
	owner = {
		subtract_variable = {
			which = gor_burad_industry
			value = 40
		}
	}
	
	hidden_effect = {
		set_province_flag = gor_burad_innovation_$track$_track
	}
}


gor_burad_innovation_upgrade = {
	if = {
		limit = {
			has_province_modifier = gor_burad_$track$_1
		}
		remove_province_modifier = gor_burad_$track$_1
		add_permanent_province_modifier = { 
			name = gor_burad_$track$_2
			duration = -1
		}
		
		owner = {
			subtract_variable = {
				which = gor_burad_industry
				value = 80	
			}
		}
	}
	else_if = {
		limit = {
			has_province_modifier = gor_burad_$track$_2
		}
		remove_province_modifier = gor_burad_$track$_2
		add_permanent_province_modifier = { 
			name = gor_burad_$track$_3
			duration = -1
		}

		owner = {
			subtract_variable = {
				which = gor_burad_industry
				value = 160
			}
		}
		
		custom_tooltip = gor_burad_innovation_upgrade_tt_1
		area = {
			if = {
				limit = {
					NOT = {
						has_terrain = dwarven_road
					}
				}
				set_province_flag = gor_burad_has_tier_3_innovation
				add_permanent_province_modifier = { 
					name = gor_burad_$track$_area_buff
					duration = -1
				}
			}
		}		
		custom_tooltip = gor_burad_innovation_upgrade_tt_2
	}	
}

gor_burad_innovation_downgrade = {
	remove_province_modifier = gor_burad_$track$_3
	add_permanent_province_modifier = { 
		name = gor_burad_$track$_2 
		duration = -1
	}
	
	area = {
		remove_province_modifier = gor_burad_$track$_area_buff
		hidden_effect = {
			clr_province_flag = gor_burad_has_tier_3_innovation
		}		
	}
}

gor_burad_innovation_remove_sub = {
	if = {
		limit = {
			has_province_modifier = gor_burad_$track$_$level$
		}
		remove_province_modifier = gor_burad_$track$_$level$
	}	
}

gor_burad_innovation_remove = {
	gor_burad_innovation_remove_sub = {	track = $track$ level = 3 }
	gor_burad_innovation_remove_sub = {	track = $track$ level = 2 }
	gor_burad_innovation_remove_sub = {	track = $track$ level = 1 }
	
	if = {
		custom_tooltip = gor_burad_innovation_remove_tt
		limit = {
			has_province_modifier = gor_burad_$track$_3
		}
		area = {
			remove_province_modifier = gor_burad_$track$_area_buff
			hidden_effect = {
				clr_province_flag = gor_burad_has_tier_3_innovation
			}		
		}
	}
	
	if = {
		limit = {
			has_terrain = cavern
		}
		add_permanent_province_modifier = { 
			name = gor_burad_irrigated_cave 
			duration = -1
		}
	}
	else = {
		add_permanent_province_modifier = { 
			name = gor_burad_lava_connection 
			duration = -1
		}
	}
	
	clr_province_flag = gor_burad_innovation_defensive_track
	clr_province_flag = gor_burad_innovation_military_track
	clr_province_flag = gor_burad_innovation_production_track
	clr_province_flag = gor_burad_innovation_administration_track
}


gor_burad_innovation_set_flags = {
	if = {
		limit = {
			OR = {
				has_province_modifier = gor_burad_$track$_1
				has_province_modifier = gor_burad_$track$_hold_1
			}
			owner = {
				has_country_flag = gor_burad_$track$_track_2
			}
		}
		if = {
			limit = {
				owner = {
					check_variable = {
						which = gor_burad_industry
						value = 80
					}
				}
			}
			set_province_flag = gor_burad_innovation_can_upgrade
		}
		else = {
			set_province_flag = gor_burad_innovation_cannot_upgrade
		}
	}
	else_if = {
		limit = {
			OR = {
				has_province_modifier = gor_burad_$track$_2
				has_province_modifier = gor_burad_$track$_hold_2
			}
			owner = {
				has_country_flag = gor_burad_$track$_track_3
			}
		}
		if = {
			limit = {
				has_province_flag = gor_burad_has_tier_3_innovation			
			}
			set_province_flag = gor_burad_already_has_tier_3
		}
		else_if = {
			limit = {
				owner = {
					check_variable = {
						which = gor_burad_industry
						value = 160
					}
				}
			}
			set_province_flag = gor_burad_innovation_can_upgrade
		}
		else = {
			set_province_flag = gor_burad_innovation_cannot_upgrade
		}
		
	}
	if = {
		limit = {
			OR = {
				has_province_modifier = gor_burad_$track$_3
				has_province_modifier = gor_burad_$track$_hold_3
			}
		}
		set_province_flag = gor_burad_innovation_can_downgrade
	}
	set_province_flag = gor_burad_innovation_can_remove
}

gor_burad_innovation_clear_flags = {
	clr_province_flag = gor_burad_innovation_can_upgrade
	clr_province_flag = gor_burad_innovation_cannot_upgrade
	clr_province_flag = gor_burad_innovation_can_remove
	clr_province_flag = gor_burad_innovation_cannot_remove
	clr_province_flag = gor_burad_innovation_can_downgrade
	clr_province_flag = gor_burad_innovation_cannot_downgrade
	clr_province_flag = gor_burad_already_has_tier_3
	owner = {
		clr_country_flag = innovation_menu_open
	}
}

gor_burad_evacuate_development = {
	if = {
		limit = {
			4039 = {
				base_$category$ = 2
			}			
		}
		4039 = {
			add_base_$category$ = -1
		}
		event_target:evacuation_target = {
			add_base_$category$ = 1
			change_variable = {
				which = $category$_evacuated
				value = 1
			}
		}
	}
}

gor_burad_return_development = {
	multiply_variable = {
		which = $category$_evacuated
		value = $fraction$
	}

	while = {
		limit = {
			check_variable = {
				which = $category$_evacuated
				value = 1
			}
		}
		subtract_variable = {
			which = $category$_evacuated
			value = 1
		}
		if = {
			limit = {
				base_$category$ = 2
			}
			add_base_$category$ = -1
		}
		4039 = {
			add_base_$category$ = 1
		}
	}
}

# Borborduz
gor_burad_borborduz_set_fighter_scores = {
	set_variable = { gor_burad_borborduz_difficulty = $challenge_difficulty$ }
	
	set_variable = { gor_burad_borborduz_bureaucrat_score = 1 }

	export_to_variable = {
		which = gor_burad_borborduz_heir_score
		value = heir_mil
		who = ROOT
	}
	
	export_to_variable = {
		which = gor_burad_borborduz_ruler_score
		value = MIL
		who = ROOT
	}
	
	[[Mil_challenge]
		set_country_flag = gor_burad_borborduz_advisor_mil
		if = {
			limit = { has_mil_advisor = yes }
			set_country_flag = gor_burad_borborduz_has_advisor
		}
		if = {
			limit = { has_mil_advisor_5 = yes }
			set_variable = { gor_burad_borborduz_advisor_score = 5 }
		}
		else_if = {
			limit = { has_mil_advisor_4 = yes }
			set_variable = { gor_burad_borborduz_advisor_score = 4 }
		}
		else_if = {
			limit = { has_mil_advisor_3 = yes }
			set_variable = { gor_burad_borborduz_advisor_score = 3 }
		}
		else_if = {
			limit = { has_mil_advisor_2 = yes }
			set_variable = { gor_burad_borborduz_advisor_score = 2 }
		}
		else_if = {
			limit = { has_mil_advisor = yes }
			set_variable = { gor_burad_borborduz_advisor_score = 1 }
		}
		else = {
			set_variable = { gor_burad_borborduz_advisor_score = 0 }		
		}
	]
	[[Dip_challenge]
		set_country_flag = gor_burad_borborduz_advisor_dip
		if = {
			limit = { has_dip_advisor = yes }
			set_country_flag = gor_burad_borborduz_has_advisor
		}
		if = {
			limit = { has_dip_advisor_5 = yes }
			set_variable = { gor_burad_borborduz_advisor_score = 5 }
		}
		else_if = {
			limit = { has_dip_advisor_4 = yes }
			set_variable = { gor_burad_borborduz_advisor_score = 4 }
		}
		else_if = {
			limit = { has_dip_advisor_3 = yes }
			set_variable = { gor_burad_borborduz_advisor_score = 3 }
		}
		else_if = {
			limit = { has_dip_advisor_2 = yes }
			set_variable = { gor_burad_borborduz_advisor_score = 2 }
		}
		else_if = {
			limit = { has_dip_advisor = yes }
			set_variable = { gor_burad_borborduz_advisor_score = 1 }
		}
	
	]
	[[Adm_challenge]
		set_country_flag = gor_burad_borborduz_advisor_adm
		if = {
			limit = { has_adm_advisor = yes }
			set_country_flag = gor_burad_borborduz_has_advisor
		}
		if = {
			limit = { has_adm_advisor_5 = yes }
			set_variable = { gor_burad_borborduz_advisor_score = 5 }
		}
		else_if = {
			limit = { has_adm_advisor_4 = yes }
			set_variable = { gor_burad_borborduz_advisor_score = 4 }
		}
		else_if = {
			limit = { has_adm_advisor_3 = yes }
			set_variable = { gor_burad_borborduz_advisor_score = 3 }
		}
		else_if = {
			limit = { has_adm_advisor_2 = yes }
			set_variable = { gor_burad_borborduz_advisor_score = 2 }
		}
		else_if = {
			limit = { has_adm_advisor = yes }
			set_variable = { gor_burad_borborduz_advisor_score = 1 }
		}
	]
}

gor_burad_borborduz_clear = {
	clr_country_flag = gor_burad_borborduz_has_advisor

	clr_country_flag = gor_burad_borborduz_advisor_mil
	clr_country_flag = gor_burad_borborduz_advisor_dip
	clr_country_flag = gor_burad_borborduz_advisor_adm

}

gor_burad_borborduz_rage_tamed = {
	if = {
		limit = {
			has_country_flag = gor_burad_rage_untamed
		}
		clr_country_flag = gor_burad_rage_untamed
		if = {
			limit = {
				has_country_flag = gor_burad_reactor_flag
			}
			set_country_flag = gor_burad_rage_unleashed
		}
		else = {
			set_country_flag = gor_burad_rage_harnessed
		}
		gor_burad_change_rage = { value = 0 }
	}
}

gor_burad_borborduz_determine_outcome = {
	[[Heir]
		hidden_effect = {
			change_variable = { gor_burad_borborduz_royal_participation = 1 }			
		}
	]
	[[Ruler]
		hidden_effect = {
			change_variable = { gor_burad_borborduz_royal_participation = 1 }			
		}
	]
	random_list = {
		50 = { # Victory
			modifier = { factor = 2 check_variable = { gor_burad_borborduz_$fighter$_score = 1 }}
			modifier = { factor = 2 check_variable = { gor_burad_borborduz_$fighter$_score = 2 }}
			modifier = { factor = 2 check_variable = { gor_burad_borborduz_$fighter$_score = 3 }}
			modifier = { factor = 2 check_variable = { gor_burad_borborduz_$fighter$_score = 4 }}
			modifier = { factor = 2 check_variable = { gor_burad_borborduz_$fighter$_score = 5 }}
			modifier = { factor = 2 check_variable = { gor_burad_borborduz_$fighter$_score = 6 }}
			
			[[Bureaucrat]
				add_prestige = 10
				add_legitimacy = 10
				
				gor_burad_borborduz_rage_tamed = yes
			]
			[[Advisor]
				add_prestige = 10
				add_legitimacy = 10
				gor_burad_change_rage = { value = -1 }
				
				gor_burad_borborduz_rage_tamed = yes
			]
			[[Heir]
				if = { 
					limit = { 
						has_country_flag = gor_burad_has_dueling_tradition
					}
					gor_burad_change_rage = { value = -2 }
				}
				else = {
					gor_burad_change_rage = { value = -1 }					
				}
				
				gor_burad_borborduz_rage_tamed = yes
				
				add_power_projection = {
					type = mission_rewards_power_projection
					amount = 5
				}
			]
			[[Ruler]
				if = { 
					limit = { 
						has_country_flag = gor_burad_has_dueling_tradition
					}
					gor_burad_change_rage = { value = -2 }
				}
				else = {
					gor_burad_change_rage = { value = -1 }					
				}
				
				gor_burad_borborduz_rage_tamed = yes
				
				add_power_projection = {
					type = mission_rewards_power_projection
					amount = 5
				}			
			]
			
			if = {
				limit = {
					has_estate_privilege = estate_burghers_steam_barons_sponsorship_of_borborduz
				}
				add_prestige = 5
				add_estate_loyalty = {
					estate = estate_burghers
					loyalty = 5
				}
			}
			
		}
		50 = { # Defeat
			modifier = { factor = 2 check_variable = { gor_burad_borborduz_difficulty = 1 }}
			modifier = { factor = 2 check_variable = { gor_burad_borborduz_difficulty = 2 }}
			modifier = { factor = 2 check_variable = { gor_burad_borborduz_difficulty = 3 }}
			modifier = { factor = 2 check_variable = { gor_burad_borborduz_difficulty = 4 }}
			modifier = { factor = 2 check_variable = { gor_burad_borborduz_difficulty = 5 }}
			modifier = { factor = 2 check_variable = { gor_burad_borborduz_difficulty = 6 }}
			
			[[Bureaucrat]
				add_prestige = -10
				add_legitimacy = -10
			]
			[[Advisor]
				add_prestige = -10
				add_legitimacy = -10
				
				trigger_switch = {
					on_trigger = has_country_flag
					gor_burad_borborduz_advisor_mil = { 
						kill_advisor_by_category_effect = { MIL = yes } 
						add_mil_power = -25
					}
					gor_burad_borborduz_advisor_dip = { 
						kill_advisor_by_category_effect = { DIP = yes } 
						add_dip_power = -25
					}
					gor_burad_borborduz_advisor_adm = { 
						kill_advisor_by_category_effect = { ADM = yes } 
						add_mil_power = -25
					}
				}
			]
			[[Heir]
				add_power_projection = {
					type = mission_rewards_power_projection
					amount = -5
				}
				
				kill_heir = {}				
				hidden_effect = {
					if = {
						limit = {
							has_country_flag = gor_burad_has_dueling_tradition
						}
						add_stability = 1
					}
				}
			]
			[[Ruler]
				add_power_projection = {
					type = mission_rewards_power_projection
					amount = -5
				}
				kill_ruler = yes
				
				hidden_effect = {
					if = {
						limit = {
							has_country_flag = gor_burad_has_dueling_tradition
						}
						add_stability = 1
					}
				}
			]
		}
		
	}
}

gor_burad_denied_borborduz_too_much = {
	clr_country_flag = gor_burad_rage_harnessed
	clr_country_flag = gor_burad_rage_unleashed
	set_country_flag = gor_burad_rage_untamed
	
	gor_burad_change_rage = { value = 0 }
}

mission_faction_effect = {
    if = {
        limit = {
            NOT = { faction_in_power = $faction$ }
        }
        add_$type$_power = $value$
    }
}

plumstead_generate_random_advisor = {
	custom_tooltip = H61_generate_random_advisor_tt
	hidden_effect = {
		random_list = {
			10 = {
				define_advisor = {
					type = artist
					skill = 2
					cost_multiplier = 0.5
				}
			}
			10 = {
				define_advisor = {
					type = inquisitor
					skill = 2
					cost_multiplier = 0.5
				}
			}
			10 = {
				define_advisor = {
					type = master_of_mint
					skill = 2
					cost_multiplier = 0.5
				}
			}
			10 = {
				define_advisor = {
					type = natural_scientist
					skill = 2
					cost_multiplier = 0.5
				}
			}
			10 = {
				define_advisor = {
					type = philosopher
					skill = 2
					cost_multiplier = 0.5
				}
			}
			10 = {
				define_advisor = {
					type = theologian
					skill = 2
					cost_multiplier = 0.5
				}
			}
			10 = {
				define_advisor = {
					type = treasurer
					skill = 2
					cost_multiplier = 0.5
				}
			}
			1 = {
				define_advisor = {
					type = court_mage
					skill = 2
					cost_multiplier = 0.5
				}
			}
			10 = {
				define_advisor = {
					type = diplomat
					skill = 2
					cost_multiplier = 0.5
				}
			}
			10 = {
				define_advisor = {
					type = spymaster
					skill = 2
					cost_multiplier = 0.5
				}
			}
			10 = {
				define_advisor = {
					type = statesman
					skill = 2
					cost_multiplier = 0.5
				}
			}
			10 = {
				define_advisor = {
					type = trader
					skill = 2
					cost_multiplier = 0.5
				}
			}
			10 = {
				define_advisor = {
					type = army_organiser
					skill = 2
					cost_multiplier = 0.5
				}
			}
			10 = {
				define_advisor = {
					type = army_reformer
					skill = 2
					cost_multiplier = 0.5
				}
			}
			10 = {
				define_advisor = {
					type = commandant
					skill = 2
					cost_multiplier = 0.5
				}
			}
			10 = {
				define_advisor = {
					type = grand_captain
					skill = 2
					cost_multiplier = 0.5
				}
			}
			10 = {
				define_advisor = {
					type = recruitmaster
					skill = 2
					cost_multiplier = 0.5
				}
			}
			10 = {
				define_advisor = {
					type = fortification_expert
					skill = 2
					cost_multiplier = 0.5
				}
			}
			10 = {
				define_advisor = {
					type = quartermaster
					skill = 2
					cost_multiplier = 0.5
				}
			}
		}
	}
}

mountainshark_glozok_candidate = {
	if = {
		limit = {
			has_estate_privilege = estate_$estate$_glozok_the_$check$
		}
		add_ruler_modifier = {
			name = H84_$check$_candidate_o
			duration = -1
		}
	}
}

mountainshark_new_mil_ruler = {
	define_ruler = {
		mil = 4
		adm = 1
		dip = 1
		random_gender = yes # Allows random gender for republics
	}
}

mountainshark_new_adm_ruler = {
	define_ruler = {
		mil = 1
		adm = 4
		dip = 1
		random_gender = yes # Allows random gender for republics
	}
}

mountainshark_new_dip_ruler = {
	define_ruler = {
		mil = 1
		adm = 1
		dip = 4
		random_gender = yes # Allows random gender for republics
	}
}

mountainshark_nepotism_ruler = {
	add_scaled_republican_tradition = -4
	define_ruler = {
		change_mil = -2
		change_adm = -2
		change_dip = -2
		min_age = 30
		max_age = 50
		name = "lastname"
		random_gender = yes
	}
	mountainshark_random_candidate = yes
	if = {
		limit = { has_government_attribute = elections_influence_estates }
		add_estate_loyalty = {
			estate = all
			loyalty = 10
		}
	}
}

mountainshark_influence_add = {
	if = {
		limit = { has_government_attribute = elections_increase_factions_influence }
		add_influence_to_adm_faction = {
			influence = 20
		}
	}
	add_karma = 10
	if = {
		limit = { has_government_attribute = elections_influence_estates }
		add_estate_loyalty_by_class_adm = {
			loyalty = 10
		}
	}
}

mountainshark_reelection_effect = {
	if = {
		limit = {
			has_government_attribute = reelection_depowers_estates
		}
		add_estate_influence_modifier = {
			estate = all
			influence = -10
			duration = 1460
			desc = REELCTION_DEPOWER_ESTATES
		}
	}
	if = {
		limit = { has_government_attribute = elections_influence_estates }
		add_estate_loyalty = {
			estate = all
			loyalty = 5
		}
	}
	if = {
		limit = { has_government_attribute = reelection_increases_absolutism }
		tooltip = {
			add_absolutism = 10
		}
		custom_tooltip = ADD_ABSOLUTISM_BASED_ON_ELECTION_TERM
		hidden_effect = {
			for_variable_amount = {
				variable = election_term
				effect = "add_absolutism = 10"
			}
		}
		hidden_effect = {
			change_variable = {
				which = election_term
				value = 1
			}
		}
	}
	add_karma = -5
}

mountainshark_random_candidate = {
	random_list = {
		10 = {
			trigger = {
				has_estate_privilege = estate_nobles_glozok_the_violent
			}
			mountainshark_check_modifier = { prov = 4147 mod = H84_mega_foundry to = violent }
		}
		10 = {
			trigger = {
				has_estate_privilege = estate_nobles_glozok_the_liberator
			}
			mountainshark_check_modifier = { prov = 4147 mod = H84_mega_foundry to = liberator }
		}
		10 = {
			trigger = {
				has_estate_privilege = estate_nobles_glozok_the_destroyer
			}
			mountainshark_check_modifier = { prov = 4147 mod = H84_mega_foundry to = destroyer }
		}
		10 = {
			trigger = {
				has_estate_privilege = estate_burghers_glozok_the_cunning
			}
			mountainshark_check_modifier = { prov = 2836 mod = H84_mega_mint to = cunning }
		}
		10 = {
			trigger = {
				has_estate_privilege = estate_burghers_glozok_the_mastermind
			}
			mountainshark_check_modifier = { prov = 2836 mod = H84_mega_mint to = mastermind }
		}
		10 = {
			trigger = {
				has_estate_privilege = estate_burghers_glozok_the_dominator
			}
			mountainshark_check_modifier = { prov = 2836 mod = H84_mega_mint to = dominator }
		}
		10 = {
			trigger = {
				has_estate_privilege = estate_church_glozok_the_genius
			}
			mountainshark_check_modifier = { prov = 4236 mod = H84_mega_forge to = genius }
		}
		10 = {
			trigger = {
				has_estate_privilege = estate_church_glozok_the_clanfather
			}
			mountainshark_check_modifier = { prov = 4236 mod = H84_mega_forge to = clanfather }
		}
		10 = {
			trigger = {
				has_estate_privilege = estate_church_glozok_the_allknowing
			}
			mountainshark_check_modifier = { prov = 4236 mod = H84_mega_forge to = allknowing }
		}
	}
}

mountainshark_upgrade = {
	if = {
		limit = {
			has_ruler_modifier = H84_$from$_candidate
		}
		remove_country_modifier = H84_$from$_candidate
		add_ruler_modifier = {
			name = H84_$from$_candidate_o
			duration = -1
		}
	}
}

mountainshark_change = {
	if = {
		limit = {
			has_ruler_modifier = H84_$from$_candidate
		}
		remove_country_modifier = H84_$from$_candidate
		add_ruler_modifier = {
			name = H84_$to$_candidate
			duration = -1
		}
	}
	if = {
		limit = {
			has_ruler_modifier = H84_$from$_candidate_o
		}
		remove_country_modifier = H84_$from$_candidate_o
		add_ruler_modifier = {
			name = H84_$to$_candidate_o
			duration = -1
		}
	}
}

mountainshark_check_modifier = {
	if = {
		limit = {
			$prov$ = {
				has_province_modifier = $mod$
			}
		}
		add_ruler_modifier = {
			name = H84_$to$_candidate_o
			duration = -1
		}
	}
	else = {
		add_ruler_modifier = {
			name = H84_$to$_candidate
			duration = -1
		}
	}
}

# Vels Fadhecai
vf_battle_count_win = {
    if = {
   		limit = {  
			OR = {
				tag = G38
				was_tag = G38
			}  
   			has_country_flag = vf_count_flg
   	 	}
		if = {
			limit = {
				has_leader = "Nathasadra Latekyr"
				has_leader_with = {
					fire = 1
					shock = 3
					manuever = 2
					siege = 2
				}
			}
			change_variable = { nbCharge = 2 }
			change_variable = { totalBattle = 2 }
		}
		else = {
			change_variable = { nbCharge = 1 }
			change_variable = { totalBattle = 1 }
		}
		set_variable = {
			which = battleWinRate
			which = nbCharge
		}
		divide_variable = {
			which = battleWinRate
			which = totalBattle
		}
		multiply_variable = {
			which = battleWinRate
			value = 100
		}
    }
}


miremaw_count_subjects_effect = {
	custom_tooltip = miremaw_subjects_tt
	hidden_effect = {
		set_variable = {
			which = miremaw_goblin_and_kobold_subject_amount
			value = 0
		}
		set_variable = {
			which = miremaw_dwarf_subject_amount
			value = 0
		}
		set_variable = {
			which = miremaw_orc_subject_amount
			value = 0
		}
		every_subject_country = {
			if = {
				limit = {
					OR = {
						culture_group = goblin
						culture_group = kobold
					}
				}
				PREV = {
					change_variable = {
						which = miremaw_goblin_and_kobold_subject_amount
						value = 1
					}
				}
			}
			if = {
				limit = {
					culture_group = dwarven
				}
				PREV = {
					change_variable = {
						which = miremaw_dwarf_subject_amount
						value = 1
					}
				}
			}
			if = {
				limit = {
					culture_group = orcish
				}
				PREV = {
					change_variable = {
						which = miremaw_orc_subject_amount
						value = 1
					}
				}			
			}
		}
		while = {
			limit = {
				check_variable = {
					which = miremaw_goblin_and_kobold_subject_amount
					value = 1
				}
			}				
			J32 = {
				add_manpower = 0.5
				add_adm_power = 10
				add_dip_power = 10
				add_mil_power = 10
			}
			subtract_variable = {
				which = miremaw_goblin_and_kobold_subject_amount
				value = 1
			}
		}
		while = {
			limit = {
				check_variable = {
					which = miremaw_dwarf_subject_amount
					value = 1
				}
			}
			J32 = {
				add_treasury = 100
				add_adm_power = 25
				add_dip_power = 25
				add_mil_power = 25
			}
			subtract_variable = {
				which = miremaw_dwarf_subject_amount
				value = 1
			}
		}
		while = {
			limit = {
				check_variable = {
					which = miremaw_orc_subject_amount
					value = 1
				}
			}
			J32 = {
				add_manpower = 1
				add_prestige_excess_to_splendour_effect = { VAL = 10 }
			}
			subtract_variable = {
				which = miremaw_orc_subject_amount
				value = 1
			}
		}
	}
}

count_holds_in_tributaries_effect = {
	hidden_effect = {
		set_variable = { which = tributary_hold_count value = 0 }
		every_subject_country = {
			if = {
				limit = { is_subject_of_type = tributary_state_anb }
				every_owned_province = {
					if = {
						limit = { province_group = hold_province }
						ROOT = {
							change_variable = {
								which = tributary_hold_count
								value = 1
							}
						}
					}
				}
			}
		}
	}
}

#azkabar
azkabar_apply_headquarter_modifier = {
	remove_country_modifier = F35_eclipse_headquarter_1_independent
	remove_country_modifier = F35_eclipse_headquarter_2_independent
	remove_country_modifier = F35_eclipse_headquarter_3_independent
	remove_country_modifier = F35_eclipse_headquarter_1_subject
	remove_country_modifier = F35_eclipse_headquarter_2_subject
	remove_country_modifier = F35_eclipse_headquarter_3_subject
	if = {
		limit = { is_subject_of = event_target:azkabar_eclipse }
		if = {
			limit = { has_country_flag = eclipse_headquarter_3 }
			add_country_modifier = {
				name = F35_eclipse_headquarter_3_subject
				duration = -1
			}
		}
		else_if = {
			limit = { has_country_flag = eclipse_headquarter_2 }
			add_country_modifier = {
				name = F35_eclipse_headquarter_2_subject
				duration = -1
			}
		}
		else_if = {
			limit = { has_country_flag = eclipse_headquarter_1 }
			add_country_modifier = {
				name = F35_eclipse_headquarter_1_subject
				duration = -1
			}
		}
	}
	else = {
		if = {
			limit = { has_country_flag = eclipse_headquarter_3 }
			add_country_modifier = {
				name = F35_eclipse_headquarter_3_independent
				duration = -1
			}
		}
		else_if = {
			limit = { has_country_flag = eclipse_headquarter_2 }
			add_country_modifier = {
				name = F35_eclipse_headquarter_2_independent
				duration = -1
			}
		}
		else_if = {
			limit = { has_country_flag = eclipse_headquarter_1 }
			add_country_modifier = {
				name = F35_eclipse_headquarter_1_independent
				duration = -1
			}
		}
	}
}

#viakkoc
U07_krah_economy_upgrade = {
	custom_tooltip = U07_krah_economy_upgrade_tt
	if = {
		limit = { has_country_modifier = U07_krah_economy_1 }
		hidden_effect = { remove_country_modifier = U07_krah_economy_1 }
		add_country_modifier = { name = U07_krah_economy_2 duration = -1 }
	}
	else_if = {
		limit = { has_country_modifier = U07_krah_economy_2 }
		hidden_effect = { remove_country_modifier = U07_krah_economy_2 }
		add_country_modifier = { name = U07_krah_economy_3 duration = -1 }
	}
	else_if = {
		limit = { has_country_modifier = U07_krah_economy_3 }
		hidden_effect = { remove_country_modifier = U07_krah_economy_3 }
		add_country_modifier = { name = U07_krah_economy_4 duration = -1 }
	}
	else_if = {
		limit = { has_country_modifier = U07_krah_economy_4 }
		hidden_effect = { remove_country_modifier = U07_krah_economy_4 }
		add_country_modifier = { name = U07_krah_economy_5 duration = -1 }
	}
}