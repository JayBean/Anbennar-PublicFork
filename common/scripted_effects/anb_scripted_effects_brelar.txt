
g27_boats_uprising_check_effect = {
	#boats uprising if you don't enforce the rebel's demands
	if = {
		limit = {
			ROOT = {
				has_country_flag = g27_boats_uprising_flag
			}
			FROM = {
				has_country_flag = g27_bosancovac_owner_flag
			}
		}
		FROM = {
			country_event = {
				id = flavour_brelar.13
			}
		}
	}

	#clear the flags if the uprising fails
	if = {
		limit = {
			FROM = {
				ROOT = {
					has_country_flag = g27_bosancovac_owner_flag
				}
				has_country_flag = g27_boats_uprising_flag
			}
		}
		FROM = {
			clr_country_flag = g27_boats_uprising_flag
			1165 = {
				remove_province_modifier = g27_boats_revolt
			}
		}
		ROOT = {
			clr_country_flag = g27_boats_uprising_flag
		}
	}
}

g27_civil_war_end_effect = {
	#Brelar stuff
	if = {
		limit = {
			ROOT = {
				has_country_flag = g27_brelar_rebellion
			}
			FROM = {
				has_country_flag = g27_lead_monarchist
			}
		}
		G27 = {
			country_event = {
				id = flavour_brelar.55
			}
		}
	}
	if = {
		limit = {
			ROOT = {
				has_country_flag = g27_lead_monarchist
			}
			FROM = {
				has_country_flag = g27_brelar_rebellion
			}
		}
		G27 = {
			country_event = {
				id = flavour_brelar.56
			}
		}
	}
}

g27_breluslad_integration_effect = {
	#Breluslad integration stuff
	if = {
		limit = {
			OR = {
				owner = {
					has_country_flag = g27_breluslad_flag
				}
				FROM = {
					has_country_flag = g27_breluslad_flag
				}
			}
		}
		if = {
			limit = {
				owner = {
					has_country_flag = g27_breluslad_flag
					NOT = {
						mission_completed = g27_grant_representation
					}
				}
				FROM = {
					has_country_flag = g27_iosahar_to_annex
				}
			}
			add_province_modifier = {
				name = g27_slow_integration
				duration = -1
			}
		}
		else_if = {
			limit = {
				owner = {
					has_country_flag = g27_breluslad_flag
					mission_completed = g27_grant_representation
				}
				FROM = {
					has_country_flag = g27_iosahar_to_annex
				}
			}
			set_local_autonomy = 25
			if = { limit = { has_province_modifier = g27_slow_integration } remove_province_modifier = g27_slow_integration }
		}
		else_if = {
			limit = { 
				has_province_modifier = g27_slow_integration
			}
			remove_province_modifier = g27_slow_integration
		}
	}
}

g27_vareynn_liberty_effect = {
	#brelar vareynn LD
	if = {
		limit = {
			ROOT = {
				tag = G27
			}
			FROM = {
				OR = {
					any_subject_country = {
						has_country_flag = g27_vareynn_swayed
					}
					has_country_flag = g27_vareynn_swayed
				}
			}
		}
		FROM = {
			if = {
				limit = {
					any_subject_country = {
						has_country_flag = g27_vareynn_swayed
					}
				}
				random_subject_country = {
					limit = {
						has_country_flag = g27_vareynn_swayed
					}
					clr_country_flag = g27_vareynn_swayed
					add_liberty_desire = -50
				}
			}
			else = {
				clr_country_flag = g27_vareynn_swayed
				add_liberty_desire = -50
			}
		}
	}
}

g27_breluslad_subject_ae_effect = {
	#breluslad AE for subjects
	if = {
		limit = {
			ROOT = {
				has_country_flag = g27_breluslad_flag
			}
		}
		if = {
			limit = {
				FROM = {
					OR = {
						culture = sarda
						culture = dolindhan
					}
				}
			}
			every_known_country = {
				limit = {
					OR = {
						culture = sarda
						culture = dolindhan
					}
				}
				add_aggressive_expansion = {
					who = ROOT
					value = 10
					apply_calc = yes
				}
			}
		}
		#Give confluence to subjects
		if = {
			limit = {
				ROOT = {
					has_reform = breluslad_north_confluence
					mission_completed = g27_votes_rzentur
				}
			}
			FROM = {
				if = {
					limit = {
						NOT = {
							government = republic
						}
					}
					change_government = republic
				}
				add_government_reform = breluslad_north_confluence
			}
		}
		#check if you should be bad at annexing
		if = {
			limit = {
				ROOT = {
					NOT = {
						mission_completed = g27_grant_representation
					}
				}
				FROM = {
					is_subject_of_type = ynnic_iosahar
				}
			}
			FROM = {
				set_country_flag = g27_iosahar_to_annex
			}
		}
	}
}

g27_breluslad_annex_debug = {
	#Breluslad iosahar annex stuff
	if = {
		limit = {
			FROM = {
				has_country_flag = g27_iosahar_to_annex
			}
		}
		FROM = {
			clr_country_flag = g27_iosahar_to_annex
		}
	}
}

g27_breluslad_conquest_ae_effect = {
	#Breluslad AE against ynnics
	if = {
		limit = {
			owner = {
				OR = {
					has_country_flag = g27_breluslad_flag
					overlord = {
						has_country_flag = g27_breluslad_flag
					}
				}
			}
		}
		if = {
			limit = {
				OR = {
					culture = sarda
					culture = dolindhan
				}
			}
			owner = {
				if = {
					limit = {
						has_country_flag = g27_breluslad_flag
					}
					every_known_country = {
						limit = {
							OR = {
								culture = sarda
								culture = dolindhan
							}
						}
						add_aggressive_expansion = {
							who = PREV
							value = 2
							apply_calc = yes
						}
					}
				}
				else = {
					overlord = {
						every_known_country = {
							limit = {
								OR = {
									culture = sarda
									culture = dolindhan
								}
							}
							add_aggressive_expansion = {
								who = PREV
								value = 2
								apply_calc = yes
							}
						}
					}
				}
			}
		}
	}
}

g27_breluslad_supplies_effect = {
	#Breluslad supplies
	if = {
		limit = {
			owner = {
				has_country_modifier = g27_thriving_forestry_1
			}
		}
		add_province_modifier = {
			name = g27_well_supplied
			duration = 3650
		}
	}
}

g27_breluslad_village_elections_effect = {
	if = {
		limit = {
			owner = {
				has_country_flag = g27_village_elections_flag
			}
		}
		add_province_modifier = {
			name = g27_village_elections
			duration = -1
		}
	}
}