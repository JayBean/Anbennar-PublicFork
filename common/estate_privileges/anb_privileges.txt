
#Mages

estate_mages_organization_magisterium = {
	icon = privilege_promote_maratha_nobility
	max_absolutism = -10
	#Removed this so AI doesn't sit at negative mages loyalty
	#loyalty = -0.05
	land_share = 5
	influence = 0.2
	is_valid = {
		NOT = { tag = I02 }
	}
	can_select = {
		OR = {
			if = {
				limit = { 
					exists = A85
					NOT = { tag = A85 }
				}
				A85 = {	#Magisterium likes you
					has_opinion = { who = ROOT value = 200 }
				}
			}
			is_part_of_hre = yes
			tag = A85
		}

		if = {
			limit = { has_mages_organization_privilege = yes }
			
			NOT = {
				estate_influence = {
					estate = estate_mages
					influence = 25
				}
			}
			estate_loyalty = {
				estate = estate_mages
				loyalty = 30
			}
			
			if = {
				limit = {
					estate_loyalty = {
						estate = estate_mages
						loyalty = 60
					}
				}
				adm_power = 100
				stability = 1
			}
			else = {
				adm_power = 200
				stability = 2
			}
		}
		has_discovered = 8 #Anbenncost
	}
	can_revoke = {
		always = no
	}
	on_granted = {
		custom_tooltip = mages_benefits_tt
		if = {
			limit = {
				has_mages_organization_privilege = yes
				NOT = { has_estate_privilege = estate_mages_organization_magisterium }
			}
			if = {
				limit = {
					estate_loyalty = {
						estate = estate_mages
						loyalty = 60
					}
				}
				add_adm_power = -100
				add_stability = -1
			}
			else = {
				add_stability = -2
				add_adm_power = -200
			}
			custom_tooltip = estate_mages_organization_cost_tooltip
			custom_tooltip = estate_mages_organization_revoke_tooltip
			hidden_effect = {
				if = {
					limit = { has_estate_privilege = estate_mages_organization_state }
					remove_estate_privilege = estate_mages_organization_state
				}
				if = {
					limit = { has_estate_privilege = estate_mages_organization_guilds }
					remove_estate_privilege = estate_mages_organization_guilds
				}
				if = {
					limit = { has_estate_privilege = estate_mages_organization_religious }
					remove_estate_privilege = estate_mages_organization_religious
				}
			}
		}
		else = {
			custom_tooltip = estate_mages_magisterium_relations_tooltip
		}
		hidden_effect = {
			if = {
				limit = {
					NOT = { is_year = 1445 }
				}
				take_estate_land_share_massive = { estate = estate_mages }
			}
		}
	}
	penalties = {
	}
	benefits = {
		global_tax_modifier = 0.05
		imperial_authority = 0.05
	}
	#Removed this so AI doesn't sit at negative mages loyalty
	# conditional_modifier = {
		# trigger = {
			# NOT = { tag = A85 }
			# NOT = {
				# reverse_has_opinion = {
					# who = A85 #Magisterium
					# value = -150
				# }
			# }
		# }
		# modifier = {
			# mages_loyalty_modifier = -0.1
		# }
	# }
	# conditional_modifier = {
		# trigger = {
			# NOT = { tag = A85 }
			# reverse_has_opinion = {
				# who = A85 #Magisterium
				# value = -150
			# }
			# NOT = {
				# reverse_has_opinion = {
					# who = A85 #Magisterium
					# value = -100
				# }
			# }
		# }
		# modifier = {
			# mages_loyalty_modifier = -0.05
		# }
	# }
	conditional_modifier = {
		trigger = {
			NOT = { tag = A85 }
			reverse_has_opinion = {
				who = A85 #Magisterium
				value = 100
			}
			NOT = {
				reverse_has_opinion = {
					who = A85 #Magisterium
					value = 150
				}
			}
		}
		modifier = {
			mages_loyalty_modifier = 0.05
		}
	}
	conditional_modifier = {
		trigger = {
			NOT = { tag = A85 }
			reverse_has_opinion = {
				who = A85 #Magisterium
				value = 150
			}
		}
		modifier = {
			mages_loyalty_modifier = 0.1
		}
	}
	conditional_modifier = {
		trigger = {
			tag = A85
		}
		modifier = {
			mages_loyalty_modifier = 0.15
		}
	}
	ai_will_do = {
		factor = 5
		modifier = {
			factor = 100
			tag = A85
		}
		modifier = {
			factor = 10
			is_part_of_hre = yes
		}
	}
}


estate_mages_organization_state = {
	icon = privilege_promote_maratha_nobility
	loyalty = 0.1
	influence = 0.1
	land_share = 10
	is_valid = {
		NOT = { tag = A85 }
		NOT = { tag = I02 }
	}
	can_select = {
		if = {
			limit = { has_mages_organization_privilege = yes }
			
			NOT = {
				estate_influence = {
					estate = estate_mages
					influence = 25
				}
			}
			estate_loyalty = {
				estate = estate_mages
				loyalty = 30
			}
			
			if = {
				limit = {
					estate_loyalty = {
						estate = estate_mages
						loyalty = 60
					}
				}
				adm_power = 100
				stability = 1
			}
			else = {
				adm_power = 200
				stability = 2
			}
		}
	}
	can_revoke = {
		always = no
	}
	on_granted = {
		custom_tooltip = mages_benefits_tt
		if = {
			limit = {
				has_mages_organization_privilege = yes
				NOT = { has_estate_privilege = estate_mages_organization_state }
			}
			if = {
				limit = {
					estate_loyalty = {
						estate = estate_mages
						loyalty = 60
					}
				}
				add_adm_power = -100
				add_stability = -1
			}
			else = {
				add_stability = -2
				add_adm_power = -200
			}
			custom_tooltip = estate_mages_organization_cost_tooltip
			custom_tooltip = estate_mages_organization_revoke_tooltip
			hidden_effect = {
				if = {
					limit = { has_estate_privilege = estate_mages_organization_magisterium }
					remove_estate_privilege = estate_mages_organization_magisterium
					country_event = { id = magic_estate.18 days = 15 random = 30 }
				}
				if = {
					limit = { has_estate_privilege = estate_mages_organization_guilds }
					remove_estate_privilege = estate_mages_organization_guilds
				}
				if = {
					limit = { has_estate_privilege = estate_mages_organization_religious }
					remove_estate_privilege = estate_mages_organization_religious
				}
			}
		}
		hidden_effect = {
			if = {
				limit = {
					NOT = { is_year = 1445 }
				}
				take_estate_land_share_gigantic = { estate = estate_mages }
			}
		}
	}
	penalties = {
	}
	benefits = {
		global_tax_modifier = -0.05
	}
	ai_will_do = {
		factor = 5
		modifier = {
			factor = 10
			current_age = age_of_absolutism
		}
		modifier = {
			factor = 0
			has_estate_privilege = estate_mages_organization_magisterium
		}
	}
}

estate_mages_organization_guilds = {
	icon = privilege_promote_maratha_nobility
	max_absolutism = -5
	#Buffed this so it's not just worse than the Magisterium one
	loyalty = 0.05
	influence = 0.1
	is_valid = {
		NOT = { tag = A85 }
		NOT = { tag = I02 }
	}
	can_select = {
		if = {
			limit = { has_mages_organization_privilege = yes }
			
			NOT = {
				estate_influence = {
					estate = estate_mages
					influence = 25
				}
			}
			estate_loyalty = {
				estate = estate_mages
				loyalty = 30
			}
			
			if = {
				limit = {
					estate_loyalty = {
						estate = estate_mages
						loyalty = 60
					}
				}
				adm_power = 100
				stability = 1
			}
			else = {
				adm_power = 200
				stability = 2
			}
		}
	}
	can_revoke = {
		always = no
	}
	on_granted = {
		custom_tooltip = mages_benefits_tt
		if = {
			limit = {
				has_mages_organization_privilege = yes
				NOT = { has_estate_privilege = estate_mages_organization_guilds }
			}
			if = {
				limit = {
					estate_loyalty = {
						estate = estate_mages
						loyalty = 60
					}
				}
				add_adm_power = -100
				add_stability = -1
			}
			else = {
				add_stability = -2
				add_adm_power = -200
			}
			custom_tooltip = estate_mages_organization_cost_tooltip
			custom_tooltip = estate_mages_organization_revoke_tooltip
			hidden_effect = {
				if = {
					limit = { has_estate_privilege = estate_mages_organization_magisterium }
					country_event = { id = magic_estate.18 days = 15 random = 30 }
					remove_estate_privilege = estate_mages_organization_magisterium
				}
				if = {
					limit = { has_estate_privilege = estate_mages_organization_state }
					remove_estate_privilege = estate_mages_organization_state
				}
				if = {
					limit = { has_estate_privilege = estate_mages_organization_religious }
					remove_estate_privilege = estate_mages_organization_religious
				}
			}
		}
	}
	penalties = {
	}
	benefits = {
		#global_tax_modifier = 0.05
	}
	ai_will_do = {
		factor = 0
	}
}

estate_mages_organization_religious = {
	icon = privilege_promote_maratha_nobility
	max_absolutism = -5
	#Removed this so AI doesn't sit at negative mages loyalty
	#loyalty = -0.05
	influence = 0.15
	land_share = 5
	is_valid = {
		NOT = { tag = A85 }
		NOT = { tag = I02 }
		OR = {
			religion = ravelian
			religion = the_jadd
			religion = bulwari_sun_cult
			religion = old_bulwari_sun_cult
			religion = xhazobkult
			religion = skaldhyrric_faith 
			religion = righteous_path
			religion = lefthand_path
			has_country_flag = updating_isolationism_window
			has_country_flag = elikhand_magic_khet
		}
	}
	can_select = {
		if = {
			limit = { has_mages_organization_privilege = yes }
			
			NOT = {
				estate_influence = {
					estate = estate_mages
					influence = 25
				}
			}
			estate_loyalty = {
				estate = estate_mages
				loyalty = 30
			}
			
			if = {
				limit = {
					estate_loyalty = {
						estate = estate_mages
						loyalty = 60
					}
				}
				adm_power = 100
				stability = 1
			}
			else = {
				adm_power = 200
				stability = 2
			}
		}
	}
	can_revoke = {
		always = no
	}
	on_granted = {
		custom_tooltip = mages_benefits_tt
		if = {
			limit = {
				has_mages_organization_privilege = yes
				NOT = { has_estate_privilege = estate_mages_organization_religious }
			}
			if = {
				limit = {
					estate_loyalty = {
						estate = estate_mages
						loyalty = 60
					}
				}
				add_adm_power = -100
				add_stability = -1
			}
			else = {
				add_stability = -2
				add_adm_power = -200
			}
			custom_tooltip = estate_mages_organization_cost_tooltip
			custom_tooltip = estate_mages_organization_revoke_tooltip
			hidden_effect = {
				if = {
					limit = { has_estate_privilege = estate_mages_organization_magisterium }
					country_event = { id = magic_estate.18 days = 15 random = 30 }
					remove_estate_privilege = estate_mages_organization_magisterium
				}
				if = {
					limit = { has_estate_privilege = estate_mages_organization_state }
					remove_estate_privilege = estate_mages_organization_state
				}
				if = {
					limit = { has_estate_privilege = estate_mages_organization_guilds }
					remove_estate_privilege = estate_mages_organization_guilds
				}
			}
		}
		hidden_effect = {
			if = {
				limit = {
					NOT = { is_year = 1445 }
				}
				take_estate_land_share_massive = { estate = estate_mages }
			}
		}
	}
	on_invalid = {
		custom_tooltip = estate_mages_religious_invalid_tooltip
		hidden_effect = {
			if = {
				limit = { NOT = { has_mages_organization_privilege = yes } }
				set_estate_privilege = estate_mages_organization_state
			}
		}
	}
	penalties = {
	}
	benefits = {
		global_missionary_strength = 0.02
		church_loyalty_modifier = 0.05
		church_influence_modifier = 0.05
		
		papal_influence = 0.5
		church_power_modifier = 0.5
		monthly_fervor_increase = 1
	}
	ai_will_do = {
		factor = 5
		modifier = {
			factor = 0.8
			OR = {
				NOT = { crown_land_share = 40 }
				AND = {
					is_absolutism_active = yes
					NOT = { crown_land_share = 60 }
				}
			}
		}
		modifier = {
			factor = 0.8
			OR = {
				NOT = { crown_land_share = 30 }
				AND = {
					is_absolutism_active = yes
					NOT = { crown_land_share = 50 }
				}
			}
		}
		modifier = {
			factor = 0.8
			is_absolutism_active = yes
		}
	}
}

estate_mages_battlemage_academies = {
	icon = privilege_demand_more_troops
	max_absolutism = -5
	influence = 0.05
	land_share = 10
	is_valid = {
		NOT = { tag = I02 }
	}
	can_select = {
		army_tradition = 15
		estate_influence = {
			estate = estate_mages
			influence = 30
		}
		NOT = { has_estate_privilege = estate_mages_empowered_mages }
	}
	on_granted = {
		add_army_tradition = -15
		
		custom_tooltip = tooltip_estate_mages_battlemage_academies
	}
	penalties = {
		army_tradition_decay = 0.01
		country_military_power = -1
	}
	benefits = {
		land_morale = 0.05
	}
	ai_will_do = {
		factor = 5
		modifier = {
			factor = 2
			personality = ai_militarist
		}
		modifier = {
			factor = 1.5
			is_at_war = yes
		}
		modifier = {
			factor = 0
			NOT = { army_tradition = 1 }	#if you have hella low army tradition, you're gonna want to turn this off
		}
	}
}


estate_mages_patronage_of_the_magical_arts = {	#magical patronage 
	icon = privilege_give_money
	max_absolutism = -5
	loyalty = 0.05
	influence = 0.05
	land_share = 5
	penalties = {
		global_tax_modifier = -0.05
	}
	benefits = {
		prestige = 0.5
	}
	on_granted = {
		if = {
			limit = { prestige = 50 }
			add_prestige = 10
		}
		else_if = {
			limit = { prestige = 0 }
			add_prestige = 15
		}
		else_if = {
			limit = { prestige = -25 }
			add_prestige = 20
		}
		else_if = {
			limit = { prestige = -50 }
			add_prestige = 25
		}
		else = {
			add_prestige = 30
		}
	}
	ai_will_do = {
		factor = 5
		modifier = {
			factor = 2
			NOT = {
				estate_influence = {
					estate = estate_mages
					influence = 10
				}
			}
		}
		modifier = {
			factor = 0.5
			NOT = { years_of_income = 0.5 }
		}
	}
}

estate_mages_reduced_research_regulations = {
	icon = privilege_grant_autonomy
	loyalty = 0.05
	influence = 0.1
	max_absolutism = -10
	is_valid = {
		NOT = { tag = I02 }
	}
	on_granted = {
		custom_tooltip = tooltip_estate_mages_reduced_research_regulations
	}
	penalties = {
		diplomatic_reputation = -2
	}
	conditional_modifier = {
		trigger = { has_country_flag = reduced_dip_from_regulations }
		modifier = {
			diplomatic_reputation = 1
			max_absolutism = 5
		}
	}
	benefits = {
	}
	ai_will_do = {
		factor = 5
		modifier = {	#witch kings baby
			factor = 3
			capital_scope = { superregion = escann_superregion }
			current_age = age_of_absolutism
		}
		modifier = {	#witch kings are evil baby
			factor = 3
			has_ruler_modifier = witch_king_modifier
		}
		modifier = {
			factor = 0.75
			NOT = { diplomatic_reputation = 1 }	#dont want to take this if you have low dip rep anyway
		}
		modifier = {
			factor = 1.5
			ruler_has_mage_personality = yes
		}
		modifier = {
			factor = 2
			OR = {
				ruler_has_personality = naive_personality
				ruler_has_personality = free_thinker_personality
				ruler_has_personality = zealot_personality
			}
		}
		modifier = {
			factor = 0.75
			OR = {
				ruler_has_personality = careful_personality
				ruler_has_personality = just_personality
				ruler_has_personality = righteous_personality
			}
		}
		modifier = {	
			factor = 0.5
			has_estate_privilege = estate_mages_organization_magisterium
		}
	}
}

# estate_mages_loyalty_privilege = {
	# icon = privilege_royal_authority
	# max_absolutism = -10
	# loyalty = 0.1
	# influence = 0.1
	# penalties = {
	# }
	# benefits = {
	# }
	# ai_will_do = {
		# factor = 10
		# modifier = {
			# factor = 0
			# is_absolutism_active = yes
		# }
	# }
# }

estate_mages_monopoly_of_damestear = {
	icon = privilege_monopoly_of_goods_damestear
	max_absolutism = -10
	loyalty = 0.1
	is_valid = {
		has_dlc = "Emperor"
		NOT = { tag = I02 }
		any_owned_province = {
			trade_goods = damestear
		}
	}
	can_select = {
		custom_trigger_tooltip = {
			tooltip = unavailable_during_revolution_disaster
			NOT = { has_disaster = revolution }
			NOT = {
				has_disaster_progress = {
					disaster = revolution
					value = 1
				}
			}
			# NOT = { has_disaster = french_revolution }
			# NOT = {
				# has_disaster_progress = {
					# disaster = french_revolution
					# value = 1
				# }
			# }
		}
	}
	on_granted = {
		add_mercantilism = 1
		add_years_of_owned_provinces_production_income = {
			years = 8
			trigger = {
				trade_goods = damestear
			}
			custom_tooltip = MONOPOLY_INCOME_DAMESTEAR_DESC
		}
		custom_tooltip = estate_mages_monopoly_of_damestear_effect_tooltip
		# hidden_effect = {
		# 	every_owned_province = {
		# 		limit = {
		# 			trade_goods = damestear
		# 		}
		# 		add_province_modifier = {
		# 			name = estate_mages_monopoly_of_damestear_mod
		# 			duration = -1
		# 		}
		# 	}
		# }
	}
	on_granted_province = {
		if = {
			limit = {
				trade_goods = damestear
			}
			add_province_modifier = {
				name = estate_mages_monopoly_of_damestear_mod
				duration = -1
			}
		}
		else_if = {
			limit = {
				has_province_modifier = estate_mages_monopoly_of_damestear_mod
			}
			remove_province_modifier = estate_mages_monopoly_of_damestear_mod
		}
	}
	on_revoked = {
		custom_tooltip = estate_mages_monopoly_of_damestear_revoke_tooltip
	}
	on_revoked_province = {
		if = {
			limit = {
				has_province_modifier = estate_mages_monopoly_of_damestear_mod
			}
			remove_province_modifier = estate_mages_monopoly_of_damestear_mod
		}
	}
	on_invalid = {
		custom_tooltip = estate_mages_monopoly_of_damestear_revoke_tooltip
	}
	on_invalid_province = {
		if = {
			limit = {
				has_province_modifier = estate_mages_monopoly_of_damestear_mod
			}
			remove_province_modifier = estate_mages_monopoly_of_damestear_mod
		}
	}
	penalties = {
	}
	benefits = {
	}
	cooldown_years = 10
	on_cooldown_expires = {
		country_event = { id = monopoly_privileges.12 }
	}
	ai_will_do = { #having the AI use these could lead to an unstoppable downwards spiral if it can't work out how to get rid of them
		factor = 0
	}
}

estate_mages_cast_spells = {
	icon = privilege_tolerance_heathen
	can_select = {
		estate_influence = {
			estate = estate_mages
			influence = 15
		}
	}
	is_valid = {
		NOT = { tag = I02 }
		OR = {
			NOT = { has_country_flag = revoke_mage_estate_spells }
			NOT = { has_estate_privilege = estate_mages_cast_spells }
		}
	}
	on_granted = {
		country_event = { id = magic_estate.1 }
		hidden_effect = { clr_country_flag = revoke_mage_estate_spells } # Just in case
	}
	penalties = {
	}
	benefits = {
	}
	cooldown_years = 10
	on_cooldown_expires = {
		set_country_flag = revoke_mage_estate_spells # on_invalid gives a notification, on_revoked does not.
	}
	on_invalid = {
		clr_country_flag = revoke_mage_estate_spells
	}
	ai_will_do = {
		factor = 10 #ai will crash the game on linux. it uses a hidden decision in mages.txt to do this. Was fixed
	}
}

#Adventurers
estate_adventurers_organization_chronicler_grants = {
	icon = privilege_promote_maratha_nobility
	max_absolutism = -5
	loyalty = 0.05
	influence = 0.05
	land_share = 5
	can_select = {
		if = {
			limit = { has_adventurers_organization_privilege = yes }
			
			NOT = {
				estate_influence = {
					estate = estate_adventurers
					influence = 25
				}
			}
			estate_loyalty = {
				estate = estate_adventurers
				loyalty = 30
			}
			
			if = {
				limit = {
					estate_loyalty = {
						estate = estate_adventurers
						loyalty = 60
					}
				}
				mil_power = 100
				stability = 1
			}
			else = {
				mil_power = 200
				stability = 2
			}
		}
		has_discovered = 8 #Anbenncost
	}
	can_revoke = {
		always = no
	}
	on_granted = {
		if = {
			limit = {
				has_adventurers_organization_privilege = yes
				NOT = { has_estate_privilege = estate_adventurers_organization_chronicler_grants }
			}
			if = {
				limit = {
					estate_loyalty = {
						estate = estate_adventurers
						loyalty = 60
					}
				}
				add_mil_power = -100
				add_stability = -1
			}
			else = {
				add_stability = -2
				add_mil_power = -200
			}
			custom_tooltip = estate_adventurers_organization_cost_tooltip
			custom_tooltip = estate_adventurers_organization_revoke_tooltip
			hidden_effect = {
				if = {
					limit = { has_estate_privilege = estate_adventurers_organization_land_of_adventure }
					remove_estate_privilege = estate_adventurers_organization_land_of_adventure
				}
				if = {
					limit = { has_estate_privilege = estate_adventurers_organization_licensed_adventurers }
					remove_estate_privilege = estate_adventurers_organization_licensed_adventurers
				}
			}
		}
		hidden_effect = {
			if = {
				limit = {
					NOT = { is_year = 1445 }
				}
				take_estate_land_share_massive = { estate = estate_adventurers }
			}
		}
	}
	penalties = {
		mercenary_manpower = -0.2
	}
	benefits = {
		global_institution_spread = 0.2
		innovativeness_gain = 0.25
	}
	ai_will_do = {
		factor = 1
		modifier = {
			factor = 10
			any_known_country = {
				institution_difference = {
					who = ROOT
					value = 2
				}
			}
		}
	}
}

estate_adventurers_organization_licensed_adventurers = {
	icon = privilege_promote_maratha_nobility
	loyalty = 0.1
	influence = 0.15
	can_select = {
		if = {
			limit = { has_adventurers_organization_privilege = yes }
			
			NOT = {
				estate_influence = {
					estate = estate_adventurers
					influence = 25
				}
			}
			estate_loyalty = {
				estate = estate_adventurers
				loyalty = 30
			}
			
			if = {
				limit = {
					estate_loyalty = {
						estate = estate_adventurers
						loyalty = 60
					}
				}
				mil_power = 100
				stability = 1
			}
			else = {
				mil_power = 200
				stability = 2
			}
		}
	}
	can_revoke = {
		always = no
	}
	on_granted = {
		if = {
			limit = {
				has_adventurers_organization_privilege = yes
				NOT = { has_estate_privilege = estate_adventurers_organization_licensed_adventurers }
			}
			if = {
				limit = {
					estate_loyalty = {
						estate = estate_adventurers
						loyalty = 60
					}
				}
				add_mil_power = -100
				add_stability = -1
			}
			else = {
				add_stability = -2
				add_mil_power = -200
			}
			custom_tooltip = estate_adventurers_organization_cost_tooltip
			custom_tooltip = estate_adventurers_organization_revoke_tooltip
			hidden_effect = {
				if = {
					limit = { has_estate_privilege = estate_adventurers_organization_land_of_adventure }
					remove_estate_privilege = estate_adventurers_organization_land_of_adventure
				}
				if = {
					limit = { has_estate_privilege = estate_adventurers_organization_chronicler_grants }
					remove_estate_privilege = estate_adventurers_organization_chronicler_grants
				}
			}
		}
	}
	penalties = {
	}
	benefits = {
		global_tax_modifier = 0.05
	}
	ai_will_do = {
		factor = 5
		modifier = {
			factor = 10
			current_age = age_of_absolutism
		}
		modifier = {
			factor = 0
			has_discovered = 8 #Anbenncost
			any_known_country = {
				institution_difference = {
					who = ROOT
					value = 2
				}
			}
		}
	}
}

estate_adventurers_organization_land_of_adventure = {
	icon = privilege_promote_maratha_nobility
	max_absolutism = -10
	#loyalty = 0.05
	influence = 0.1
	can_select = {
		if = {
			limit = { has_adventurers_organization_privilege = yes }
			
			NOT = {
				estate_influence = {
					estate = estate_adventurers
					influence = 25
				}
			}
			estate_loyalty = {
				estate = estate_adventurers
				loyalty = 30
			}
			
			if = {
				limit = {
					estate_loyalty = {
						estate = estate_adventurers
						loyalty = 60
					}
				}
				mil_power = 100
				stability = 1
			}
			else = {
				mil_power = 200
				stability = 2
			}
		}
	}
	can_revoke = {
		always = no
	}
	on_granted = {
		if = {
			limit = {
				has_adventurers_organization_privilege = yes
				NOT = { has_estate_privilege = estate_adventurers_organization_land_of_adventure }
			}
			if = {
				limit = {
					estate_loyalty = {
						estate = estate_adventurers
						loyalty = 60
					}
				}
				add_mil_power = -100
				add_stability = -1
			}
			else = {
				add_stability = -2
				add_mil_power = -200
			}
			custom_tooltip = estate_adventurers_organization_cost_tooltip
			custom_tooltip = estate_adventurers_organization_revoke_tooltip
			hidden_effect = {
				if = {
					limit = { has_estate_privilege = estate_adventurers_organization_licensed_adventurers }
					remove_estate_privilege = estate_adventurers_organization_licensed_adventurers
				}
				if = {
					limit = { has_estate_privilege = estate_adventurers_organization_chronicler_grants }
					remove_estate_privilege = estate_adventurers_organization_chronicler_grants
				}
			}
		}
	}
	penalties = {
	}
	benefits = {
		mercenary_manpower = 0.25
	}
	ai_will_do = {
		factor = 0
	}
}

estate_adventurers_free_company_rosters = {
	icon = privilege_demand_more_troops
	max_absolutism = -5
	influence = 0.05
	can_select = {
		army_tradition = 15
	}
	on_granted = {
		add_army_tradition = -15
	}
	penalties = {
		
	}
	benefits = {
		mercenary_discipline = 0.05
	}
	ai_will_do = {
		factor = 10
		modifier = {
			factor = 0
			NOT = {
				num_of_mercenaries = 2
			}
		}
	}
}

estate_adventurers_ennoblement_of_adventurers = {
	icon = privilege_royal_authority
	max_absolutism = -5
	loyalty = 0.05
	land_share = 5
	influence = 0.05
	can_select = {
		has_estate = estate_nobles
	}
	on_granted = {
	}
	penalties = {
		nobles_loyalty_modifier = -0.05
	}
	benefits = {
		governing_capacity = 100
	}
	conditional_modifier = {		#part of arbaran's mission tree
		trigger = {
			has_country_flag = arbaran_improved_ennoblement_privilege
		}
		modifier = {
			mercenary_cost = -0.20
			mercenary_discipline = 0.05
		}
	}
	ai_will_do = {
		factor = 5
		modifier = {
			factor = 5
			tag = A46			#ennoblement of adventurers is a very Arbarani thing to do, it's part of their national ideas, also it will help the AI complete a mission
		}
		modifier = {
			factor = 1.4
			num_of_territories = 5
		}
		modifier = {
			factor = 1.5
			num_of_territories = 10
		}
		modifier = {
			factor = 1.5
			num_of_territories = 15
		}
		modifier = {
			factor = 0
			OR = {
				NOT = { crown_land_share = 25 }
				estate_influence = {
					estate = estate_adventurers
					influence = 75
				}
			}
			NOT = { has_estate_privilege = estate_adventurers_ennoblement_of_adventurers }
		}

		modifier = {
			factor = 3
			OR = {
				AND = {
					governing_capacity_percentage = 0.9
					NOT = { has_estate_privilege = estate_adventurers_ennoblement_of_adventurers }
				}
				#The trigger below should make sure that the AI actually keeps this privilege when enacting it early game
				AND = {
					governing_capacity_percentage = 0.6
					has_estate_privilege = estate_adventurers_ennoblement_of_adventurers
				}
			}
		}
		modifier = {
			factor = 0
			NOT = { governing_capacity_percentage = 0.5 }
		}
		modifier = {
			factor = 0.8
			OR = {
				NOT = { crown_land_share = 40 }
				AND = {
					is_absolutism_active = yes
					NOT = { crown_land_share = 60 }
				}
			}
			NOT = { has_estate_privilege = estate_adventurers_ennoblement_of_adventurers }
		}
		modifier = {
			factor = 0.8
			OR = {
				NOT = { crown_land_share = 30 }
				AND = {
					is_absolutism_active = yes
					NOT = { crown_land_share = 50 }
				}
			}
			NOT = { has_estate_privilege = estate_adventurers_ennoblement_of_adventurers }
		}
		modifier = {
			factor = 0.8
			is_absolutism_active = yes
		}
		modifier = {
			factor = 0.5
			NOT = {
				estate_loyalty = {
					estate = estate_nobles
					loyalty = 25
				}
			}
		}
	}
}

estate_adventurers_heroes_in_the_army = {
	icon = privilege_recruit_minister
	max_absolutism = -10
	influence = 0.2
	loyalty = -0.1
	can_select = {
		army_tradition = 30
	}
	on_granted = {
		add_army_tradition = -30
	}
	penalties = {
		yearly_army_professionalism = -0.01	#this is easily offset by hiring a general
		#drill_decay_modifier = 0.33
	}
	benefits = {
		leader_land_manuever = 1
		land_morale = 0.1
		general_cost = 0.25
	}
	ai_will_do = {
		factor = 5
		modifier = {
			factor = 0
			NOT = { crown_land_share = 25 }
			estate_influence = {
				estate = estate_adventurers
				influence = 60
			}
		}
		modifier = {
			factor = 0.8
			is_absolutism_active = yes
		}
	}
}

estate_adventurers_pioneer_initiatives = {
	icon = privilege_grant_new_world_charter
	max_absolutism = -5
	loyalty = 0.05
	influence = 0.05
	is_valid = {
		OR = {
			num_of_colonists = 1
			num_of_colonies = 1
		}
	}
	penalties = {
		global_tariffs = -0.10
	}
	benefits = {
		global_colonial_growth = 10
		colonist_placement_chance = 0.05
	}
	ai_will_do = {
		factor = 1
		modifier = {
			factor = 10
			OR = {
				tag = A01 #Lorent
				tag = A02 #Deranne
				tag = A21 #Venail
				tag = A33 #Verne
				tag = A11 #Pearlsedge
				tag = A47 #Eborthil
				tag = A29 #Busilar
				
				AND = {
					capital_scope = {
						OR = {
							continent = serpentspine
							superregion = escann_superregion
						}
					}
					any_owned_province = {
						has_empty_adjacent_province = yes
					}
				}
			}
		}
		modifier = {
			factor = 0
			is_absolutism_active = yes
		}
	}
}

estate_adventurers_generous_quest_rewards = {
	icon = privilege_give_money
	max_absolutism = -5
	loyalty = 0.1
	#influence = 0.1
	land_share = 5
	can_select = {
	}
	on_granted = {
		custom_tooltip = estate_adventurers_generous_quest_rewards_aw_increase_tooltip
	}
	penalties = {
		global_tax_modifier = -0.1
	}
	benefits = {
		global_unrest = -1
		mercenary_manpower = 0.1
	}
	cooldown_years = 10
	ai_will_do = {
		factor = 10 # AI need this to ever seize land, DO NOT disable it
		modifier = {
			factor = 0
			is_bankrupt = yes
		}
		modifier = {
			factor = 0
			NOT = { crown_land_share = 35 }
		}
		modifier = {
			factor = 0
			is_absolutism_active = yes
		}
	}
}

estate_adventurers_advisors = {
	icon = privilege_empty_throne
	max_absolutism = -10
	influence = 0.1
	loyalty = 0.05
	penalties = {
		stability_cost_modifier = 0.25
	}
	benefits = {
		advisor_cost = -0.1
	}
	ai_will_do = {
		factor = 8
		modifier = {
			factor = 0.5
			is_absolutism_active = yes
		}
		modifier = {
			factor = 1.3
			NOT = { adm = 2 }
		}
		modifier = {
			factor = 0.75
			adm = 5
		}
		modifier = {
			factor = 1.3
			NOT = { dip = 2 }
		}
		modifier = {
			factor = 0.75
			dip = 5
		}
		modifier = {
			factor = 1.3
			NOT = { mil = 2 }
		}
		modifier = {
			factor = 0.75
			mil = 5
		}
		modifier = {
			factor = 0.8
			is_absolutism_active = yes
		}
	}
}

estate_adventurers_monopoly_of_slaves = {
	icon = privilege_monopoly_of_goods_slaves
	max_absolutism = -10
	loyalty = 0.1
	is_valid = {
		has_dlc = "Emperor"
		any_owned_province = {
			trade_goods = slaves
		}
	}
	can_select = {
		custom_trigger_tooltip = {
			tooltip = unavailable_during_revolution_disaster
			NOT = { has_disaster = revolution }
			NOT = {
				has_disaster_progress = {
					disaster = revolution
					value = 1
				}
			}
			# NOT = { has_disaster = french_revolution }
			# NOT = {
				# has_disaster_progress = {
					# disaster = french_revolution
					# value = 1
				# }
			# }
		}
	}
	on_granted = {
		add_mercantilism = 1
		add_years_of_owned_provinces_production_income = {
			years = 8
			trigger = {
				trade_goods = slaves
			}
			custom_tooltip = MONOPOLY_INCOME_SLAVES_DESC
		}
		custom_tooltip = estate_church_monopoly_of_slaves_effect_tooltip

	}
	on_granted_province = {
		if = {
			limit = {
				trade_goods = slaves
			}
			add_province_modifier = {
				name = estate_adventurers_monopoly_of_slaves_mod
				duration = -1
			}
		}
		else_if = {
			limit = {
				has_province_modifier = estate_adventurers_monopoly_of_slaves_mod
			}
			remove_province_modifier = estate_adventurers_monopoly_of_slaves_mod
		}
	}

	on_revoked = {
		custom_tooltip = estate_church_monopoly_of_slaves_revoke_tooltip
	}
	on_revoked_province = {
		if = {
			limit = {
				has_province_modifier = estate_adventurers_monopoly_of_slaves_mod
			}
			remove_province_modifier = estate_adventurers_monopoly_of_slaves_mod
		}
	}
	on_invalid = {
		custom_tooltip = estate_church_monopoly_of_slaves_revoke_tooltip
	}
	on_invalid_province = {
		if = {
			limit = {
				has_province_modifier = estate_adventurers_monopoly_of_slaves_mod
			}
			remove_province_modifier = estate_adventurers_monopoly_of_slaves_mod
		}
	}
	penalties = {
	}
	benefits = {
	}
	cooldown_years = 10
	on_cooldown_expires = {
		country_event = { id = monopoly_privileges.13 }
	}
	ai_will_do = {
		factor = 0
	}
}

estate_adventurers_sponsor_monster_hunters = {
	icon = privilege_demand_more_troops
	max_absolutism = -5
	penalties = {
			global_autonomy = 0.05
	}
	benefits = {
		
	}
	on_granted = {
		custom_tooltip = estate_adventurers_monster_hunters_tooltip
	}
	ai_will_do = {
		factor = 5
	}
}

estate_adventurers_sponsor_sellswords = {
	icon = privilege_demand_more_troops
	max_absolutism = -5
	penalties = {
		yearly_corruption = 0.1
	}
	benefits = {
		
	}
	on_granted = {
		custom_tooltip = estate_adventurers_sponsor_sellswords_tooltip
	}
	ai_will_do = {
		factor = 5
	}
}

estate_adventurers_sponsor_beast_slayers = {
	icon = privilege_demand_more_troops
	max_absolutism = -5
	penalties = {
		prestige_decay = 0.01
	}
	benefits = {
		
	}
	on_granted = {
		custom_tooltip = estate_adventurers_beast_slayers_tooltip
	}
	ai_will_do = {
		factor = 5
	}
}

estate_adventurers_sponsor_do_gooders = {
	icon = privilege_demand_more_troops
	max_absolutism = -5
	penalties = {
		stability_cost_modifier = 0.1
	}
	benefits = {
		
	}
	on_granted = {
		custom_tooltip = estate_adventurers_do_gooders_tooltip
	}
	ai_will_do = {
		factor = 5
	}
}

estate_adventurers_sponsor_holy_paladins = {
	icon = privilege_demand_more_troops
	max_absolutism = -5
	penalties = {
		global_missionary_strength = -0.005
	}
	benefits = {
		
	}
	on_granted = {
		custom_tooltip = estate_adventurers_holy_paladins_tooltip
	}
	ai_will_do = {
		factor = 5
	}
}

estate_adventurers_sponsor_rogues = {
	icon = privilege_demand_more_troops
	max_absolutism = -5
	penalties = {
		global_tax_modifier = -0.05
	}
	benefits = {
		
	}
	on_granted = {
		custom_tooltip = estate_adventurers_rogues_tooltip
	}
	ai_will_do = {
		factor = 5
	}
}

estate_adventurers_in_her_acolytes_service = {
	icon = privilege_dominion_law
	loyalty = 0.2
	is_valid = {
		tag = Z99	#Black Demesne
		has_country_flag = in_her_acolytes_service
	}
	
	can_select = {
		always = yes
	}
	
	can_revoke = {
		is_at_war = no
	}
	
	penalties = {
		global_tax_modifier = -0.10
	}
	
	benefits = {
		spy_offence = 0.1
	}
	
	on_granted = {
		custom_tooltip = estate_adventurers_in_her_acolytes_service_tooltip
	}
	
	ai_will_do = {
		factor = 5
	}
}

#Artificers

estate_artificers_organization_international_gommo = {
	icon = privilege_promote_maratha_nobility
	max_absolutism = -10
	loyalty = -0.1
	influence = 0.2
	is_valid = {
		NOT = { has_country_flag = nsc_sun_elf_artificery }
	}
	can_select = {
		if = {
			limit = { has_artificers_organization_privilege = yes }
			
			NOT = {
				estate_influence = {
					estate = estate_artificers
					influence = 25
				}
			}
			estate_loyalty = {
				estate = estate_artificers
				loyalty = 30
			}
			
			if = {
				limit = {
					estate_loyalty = {
						estate = estate_artificers
						loyalty = 60
					}
				}
				dip_power = 100
				stability = 1
			}
			else = {
				dip_power = 200
				stability = 2
			}
		}
	}
	can_revoke = {
		always = no
	}
	on_revoked = {
		custom_tooltip = artificer_points_hover_over_me_tt
	}
	on_granted = {
		custom_tooltip = artificer_points_hover_over_me_tt
		if = {
			limit = {
				has_artificers_organization_privilege = yes
				NOT = { has_estate_privilege = estate_artificers_organization_international_gommo }
			}
			if = {
				limit = {
					estate_loyalty = {
						estate = estate_artificers
						loyalty = 60
					}
				}
				add_dip_power = -100
				add_stability = -1
			}
			else = {
				add_stability = -2
				add_dip_power = -200
			}
			custom_tooltip = estate_artificers_organization_cost_tooltip
			custom_tooltip = estate_artificers_organization_revoke_tooltip
			hidden_effect = {
				if = {
					limit = { has_estate_privilege = estate_artificers_organization_state }
					remove_estate_privilege = estate_artificers_organization_state
				}
				if = {
					limit = { has_estate_privilege = estate_artificers_organization_independent_unions }
					remove_estate_privilege = estate_artificers_organization_independent_unions
				}
				if = {
					limit = { has_estate_privilege = estate_artificers_organization_ravelian_control }
					remove_estate_privilege = estate_artificers_organization_ravelian_control
				}
			}
		}
		#hidden_effect = {
		#	add_country_modifier = {
		#		name = rajput_to_artificer
		#		duration = -1
		#		hidden = yes
		#	}
		#}
	}
	mechanics = {
        enables_rajput_regiments
    }
	penalties = {
	}
	benefits = {
		production_efficiency = 0.1
		special_unit_forcelimit = 0.05
	}
	ai_will_do = {
		factor = 5
	}
}

estate_artificers_organization_state = {
	icon = privilege_promote_maratha_nobility
	loyalty = 0.1
	influence = 0.15
	land_share = 5
	is_valid = {
		NOT = { has_country_flag = nsc_sun_elf_artificery }
	}
	can_select = {
		if = {
			limit = { has_artificers_organization_privilege = yes }
			
			NOT = {
				estate_influence = {
					estate = estate_artificers
					influence = 25
				}
			}
			estate_loyalty = {
				estate = estate_artificers
				loyalty = 30
			}
			
			if = {
				limit = {
					estate_loyalty = {
						estate = estate_artificers
						loyalty = 60
					}
				}
				dip_power = 100
				stability = 1
			}
			else = {
				dip_power = 200
				stability = 2
			}
		}
	}
	can_revoke = {
		always = no
	}
	on_revoked = {
		custom_tooltip = artificer_points_hover_over_me_tt
	}
	on_granted = {
		custom_tooltip = artificer_points_hover_over_me_tt
		if = {
			limit = {
				has_artificers_organization_privilege = yes
				NOT = { has_estate_privilege = estate_artificers_organization_state }
			}
			if = {
				limit = {
					estate_loyalty = {
						estate = estate_artificers
						loyalty = 60
					}
				}
				add_dip_power = -100
				add_stability = -1
			}
			else = {
				add_stability = -2
				add_dip_power = -200
			}
			custom_tooltip = estate_artificers_organization_cost_tooltip
			custom_tooltip = estate_artificers_organization_revoke_tooltip
			hidden_effect = {
				if = {
					limit = { has_estate_privilege = estate_artificers_organization_international_gommo }
					remove_estate_privilege = estate_artificers_organization_international_gommo
				}
				if = {
					limit = { has_estate_privilege = estate_artificers_organization_independent_unions }
					remove_estate_privilege = estate_artificers_organization_independent_unions
				}
				if = {
					limit = { has_estate_privilege = estate_artificers_organization_ravelian_control }
					remove_estate_privilege = estate_artificers_organization_ravelian_control
				}
			}
		}
		#hidden_effect = {
		#	add_country_modifier = {
		#		name = rajput_to_artificer
		#		duration = -1
		#		hidden = yes
		#	}
		#}
		hidden_effect = {
			if = {
				limit = {
					NOT = { is_year = 1445 }
				}
				take_estate_land_share_massive = { estate = estate_artificers }
			}
		}
	}
	mechanics = {
        enables_rajput_regiments
    }
	penalties = {
	}
	benefits = {
		production_efficiency = -0.1
		special_unit_forcelimit = 0.1
	}
	ai_will_do = {
		factor = 5
		modifier = {
			factor = 10
			current_age = age_of_absolutism
		}
	}
}

estate_artificers_organization_independent_unions = {
	icon = privilege_promote_maratha_nobility
	max_absolutism = -5
	loyalty = 0
	influence = 0.1
	is_valid = {
		NOT = { has_country_flag = nsc_sun_elf_artificery }
	}
	can_select = {
		if = {
			limit = { has_artificers_organization_privilege = yes }
			
			NOT = {
				estate_influence = {
					estate = estate_artificers
					influence = 25
				}
			}
			estate_loyalty = {
				estate = estate_artificers
				loyalty = 30
			}
			
			if = {
				limit = {
					estate_loyalty = {
						estate = estate_artificers
						loyalty = 60
					}
				}
				dip_power = 100
				stability = 1
			}
			else = {
				dip_power = 200
				stability = 2
			}
		}
	}
	can_revoke = {
		always = no
	}
	on_revoked = {
		custom_tooltip = artificer_points_hover_over_me_tt
	}
	on_granted = {
		custom_tooltip = artificer_points_hover_over_me_tt
		if = {
			limit = {
				has_artificers_organization_privilege = yes
				NOT = { has_estate_privilege = estate_artificers_organization_independent_unions }
			}
			if = {
				limit = {
					estate_loyalty = {
						estate = estate_artificers
						loyalty = 60
					}
				}
				add_dip_power = -100
				add_stability = -1
			}
			else = {
				add_stability = -2
				add_dip_power = -200
			}
			custom_tooltip = estate_artificers_organization_cost_tooltip
			custom_tooltip = estate_artificers_organization_revoke_tooltip
			hidden_effect = {
				if = {
					limit = { has_estate_privilege = estate_artificers_organization_international_gommo }
					remove_estate_privilege = estate_artificers_organization_international_gommo
				}
				if = {
					limit = { has_estate_privilege = estate_artificers_organization_state }
					remove_estate_privilege = estate_artificers_organization_state
				}
				if = {
					limit = { has_estate_privilege = estate_artificers_organization_ravelian_control }
					remove_estate_privilege = estate_artificers_organization_ravelian_control
				}
			}
		}
		#hidden_effect = {
		#	add_country_modifier = {
		#		name = rajput_to_artificer
		#		duration = -1
		#		hidden = yes
		#	}
		#}
	}
	mechanics = {
        enables_rajput_regiments
    }
	penalties = {
	}
	benefits = {
		production_efficiency = 0.05
		special_unit_forcelimit = 0.05
	}
	ai_will_do = {
		factor = 0
	}
}

estate_artificers_organization_ravelian_control = {
	icon = privilege_promote_maratha_nobility
	max_absolutism = -5
	#Removed this so AI doesn't sit at negative mages loyalty
	#loyalty = -0.05
	influence = 0.1
	is_valid = {
		religion = ravelian
		NOT = { has_country_flag = nsc_sun_elf_artificery }
	}
	can_select = {
		if = {
			limit = { has_artificers_organization_privilege = yes }
			
			NOT = {
				estate_influence = {
					estate = estate_artificers
					influence = 25
				}
			}
			estate_loyalty = {
				estate = estate_artificers
				loyalty = 30
			}
			
			if = {
				limit = {
					estate_loyalty = {
						estate = estate_artificers
						loyalty = 60
					}
				}
				dip_power = 100
				stability = 1
			}
			else = {
				dip_power = 200
				stability = 2
			}
		}
	}
	can_revoke = {
		always = no
	}
	on_revoked = {
		custom_tooltip = artificer_points_hover_over_me_tt
	}
	on_granted = {
		custom_tooltip = artificer_points_hover_over_me_tt
		if = {
			limit = {
				has_artificers_organization_privilege = yes
				NOT = { has_estate_privilege = estate_artificers_organization_ravelian_control }
			}
			if = {
				limit = {
					estate_loyalty = {
						estate = estate_artificers
						loyalty = 60
					}
				}
				add_dip_power = -100
				add_stability = -1
			}
			else = {
				add_stability = -2
				add_dip_power = -200
			}
			custom_tooltip = estate_artificers_organization_cost_tooltip
			custom_tooltip = estate_artificers_organization_revoke_tooltip
			hidden_effect = {
				if = {
					limit = { has_estate_privilege = estate_artificers_organization_international_gommo }
					remove_estate_privilege = estate_artificers_organization_international_gommo
				}
				if = {
					limit = { has_estate_privilege = estate_artificers_organization_state }
					remove_estate_privilege = estate_artificers_organization_state
				}
				if = {
					limit = { has_estate_privilege = estate_artificers_organization_independent_unions }
					remove_estate_privilege = estate_artificers_organization_independent_unions
				}
			}
		}
		#hidden_effect = {
		#	add_country_modifier = {
		#		name = rajput_to_artificer
		#		duration = -1
		#		hidden = yes
		#	}
		#}
	}
	on_invalid = {
		custom_tooltip = estate_artificers_ravelian_control_invalid_tooltip
		hidden_effect = {
			if = {
				limit = { NOT = { has_artificers_organization_privilege = yes } }
				set_estate_privilege = estate_artificers_organization_state
			}
		}
	}
	mechanics = {
        enables_rajput_regiments
    }
	penalties = {
	}
	benefits = {
		global_missionary_strength = 0.02
		church_loyalty_modifier = 0.05
		church_influence_modifier = 0.05
		
		papal_influence = 0.5
		special_unit_forcelimit = 0.1
	}
	ai_will_do = {
		factor = 5
	}
}

estate_artificers_organization_sun_elf = {
	icon = privilege_promote_maratha_nobility
	influence = -0.10
	max_absolutism = -0.05
	is_valid = {
		is_chosen_country = yes
		OR = {
			religion = bulwari_sun_cult
			has_country_flag = updating_isolationism_window
		}
	}
	on_invalid = {
		clr_country_flag = nsc_sun_elf_artificery
		country_event = { id = estate_organization.5 }
	}
	can_select = {
		if = {
			limit = { has_artificers_organization_privilege = yes }
			
			NOT = {
				estate_influence = {
					estate = estate_artificers
					influence = 25
				}
			}
			estate_loyalty = {
				estate = estate_artificers
				loyalty = 30
			}
			
			if = {
				limit = {
					estate_loyalty = {
						estate = estate_artificers
						loyalty = 60
					}
				}
				dip_power = 100
				stability = 1
			}
			else = {
				dip_power = 200
				stability = 2
			}
		}
	}
	can_revoke = {
		always = no
	}
	on_revoked = {
		custom_tooltip = artificer_points_hover_over_me_tt
		clr_country_flag = nsc_sun_elf_artificery
	}
	on_granted = {
		custom_tooltip = artificer_points_hover_over_me_tt
		if = {
			limit = {
				has_artificers_organization_privilege = yes
				NOT = { has_estate_privilege = estate_artificers_organization_sun_elf }
			}
			if = {
				limit = {
					estate_loyalty = {
						estate = estate_artificers
						loyalty = 60
					}
				}
				add_dip_power = -100
				add_stability = -1
			}
			else = {
				add_stability = -2
				add_dip_power = -200
			}
			custom_tooltip = estate_artificers_organization_cost_tooltip
			custom_tooltip = estate_artificers_organization_revoke_tooltip
			hidden_effect = {
				if = {
					limit = { has_estate_privilege = estate_artificers_organization_state }
					remove_estate_privilege = estate_artificers_organization_state
				}
				if = {
					limit = { has_estate_privilege = estate_artificers_organization_international_gommo }
					remove_estate_privilege = estate_artificers_organization_international_gommo
				}
				if = {
					limit = { has_estate_privilege = estate_artificers_organization_independent_unions }
					remove_estate_privilege = estate_artificers_organization_independent_unions
				}
				if = {
					limit = { has_estate_privilege = estate_artificers_organization_ravelian_control }
					remove_estate_privilege = estate_artificers_organization_ravelian_control
				}
			}
		}
	}
	mechanics = {
        enables_rajput_regiments
    }
	penalties = {
		global_unrest = 1
	}
	benefits = {
		nobles_influence_modifier = 0.10
		special_unit_forcelimit = 0.025
	}
	ai_will_do = {
		factor = 0
	}
}

#estate_artificers_siegecraft = {
#	icon = privilege_comission_merchant_ships_for_war
#	max_absolutism = -5
#	influence = 0
#	can_select = {
#		artifice_has_points_for_basic = yes
#	}
#	on_granted = {
#		artifice_granted_basic = yes
#		#update_artifice_points = yes #is included in the above effect
#	}
#	on_revoked = {
#		artifice_remove_basic = yes
#		#update_artifice_points = yes #is included in the above effect
#	}
#	penalties = {
#	}
#	benefits = {
#		siege_ability = 0.1
#		defensiveness = 0.1
#	}
#	#cooldown_years = 10 #ai can crash the game when using privileges with cooldowns
#	ai_will_do = {
#		factor = 10
#		modifier = {
#			factor = 0.8
#			is_absolutism_active = yes
#		}
#	}
#}
#
#estate_artificers_loyalty_privilege = {
#	icon = privilege_royal_authority
#	max_absolutism = -10
#	loyalty = 0.1
#	influence = 0
#	can_select = {
#		artifice_has_points_for_basic = yes
#	}
#	on_granted = {
#		artifice_granted_basic = yes
#		#update_artifice_points = yes #is included in the above effect
#	}
#	on_revoked = {
#		artifice_remove_basic = yes
#		#update_artifice_points = yes #is included in the above effect
#	}
#	penalties = {
#	}
#	benefits = {
#	}
#	ai_will_do = {
#		factor = 10
#		modifier = {
#			factor = 0
#			is_absolutism_active = yes
#		}
#	}
#}
#
#estate_artificers_monopoly_of_precursor_relics = {
#	icon = privilege_monopoly_of_goods_precursor_relics
#	max_absolutism = -10
#	loyalty = 0.1
#	is_valid = {
#		has_dlc = "Emperor"
#		any_owned_province = {
#			trade_goods = precursor_relics
#		}
#	}
#	can_select = {
#		custom_trigger_tooltip = {
#			tooltip = unavailable_during_revolution_disaster
#			NOT = { has_disaster = revolution }
#			NOT = {
#				has_disaster_progress = {
#					disaster = revolution
#					value = 1
#				}
#			}
#			# NOT = { has_disaster = french_revolution }
#			# NOT = {
#				# has_disaster_progress = {
#					# disaster = french_revolution
#					# value = 1
#				# }
#			# }
#		}
#	}
#	on_granted = {
#		add_mercantilism = 1
#		add_years_of_owned_provinces_production_income = {
#			years = 8
#			trigger = {
#				trade_goods = precursor_relics
#			}
#			custom_tooltip = MONOPOLY_INCOME_PRECURSOR_RELICS_DESC
#		}
#		custom_tooltip = estate_artificers_monopoly_of_precursor_relics_effect_tooltip
#		hidden_effect = {
#			every_owned_province = {
#				limit = {
#					trade_goods = precursor_relics
#				}
#				add_province_modifier = {
#					name = estate_artificers_monopoly_of_precursor_relics_mod
#					duration = -1
#				}
#			}
#		}
#	}
#	on_revoked = {
#		custom_tooltip = estate_artificers_monopoly_of_precursor_relics_revoke_tooltip
#		hidden_effect = {
#			every_owned_province = {
#				limit = {
#					has_province_modifier = estate_artificers_monopoly_of_precursor_relics_mod
#				}
#				remove_province_modifier = estate_artificers_monopoly_of_precursor_relics_mod
#			}
#		}
#	}
#	on_invalid = {
#		custom_tooltip = estate_artificers_monopoly_of_precursor_relics_revoke_tooltip
#		hidden_effect = {
#			every_owned_province = {
#				limit = {
#					has_province_modifier = estate_artificers_monopoly_of_precursor_relics_mod
#				}
#				remove_province_modifier = estate_artificers_monopoly_of_precursor_relics_mod
#			}
#		}
#	}
#	penalties = {
#	}
#	benefits = {
#	}
#	cooldown_years = 10
#	on_cooldown_expires = {
#		country_event = { id = monopoly_privileges.14 }
#	}
#	ai_will_do = { #having the AI use these could lead to an unstoppable downwards spiral if it can't work out how to get rid of them
#		factor = 0
#	}
#}

#Monstrous Tribes
estate_monstrous_tribes_land_rights = {
	icon = privilege_grant_autonomy
	land_share = 5
	max_absolutism = -5
	loyalty = 0.05
	influence = 0.05
	can_select = {
	}
	on_granted = {
	}
	penalties = {
	}
	benefits = {
		governing_capacity = 100
	}
	ai_will_do = {
		factor = 5
		modifier = {
			factor = 1.4
			num_of_territories = 5
		}
		modifier = {
			factor = 1.5
			num_of_territories = 10
		}
		modifier = {
			factor = 1.5
			num_of_territories = 15
		}
		modifier = {
			factor = 0
			OR = {
				NOT = { crown_land_share = 25 }
				estate_influence = {
					estate = estate_monstrous_tribes
					influence = 75
				}
			}
			NOT = { has_estate_privilege = estate_monstrous_tribes_land_rights }
		}
		modifier = {
			factor = 3
			OR = {
				AND = {
					governing_capacity_percentage = 0.9
					NOT = { has_estate_privilege = estate_monstrous_tribes_land_rights }
				}
				#The trigger below should make sure that the AI actually keeps this privilege when enacting it early game
				AND = {
					governing_capacity_percentage = 0.6
					has_estate_privilege = estate_monstrous_tribes_land_rights
				}
			}
		}
		modifier = {
			factor = 0
			NOT = { governing_capacity_percentage = 0.5 }
		}
		modifier = {
			factor = 0.8
			OR = {
				NOT = { crown_land_share = 40 }
				AND = {
					is_absolutism_active = yes
					NOT = { crown_land_share = 60 }
				}
			}
			NOT = { has_estate_privilege = estate_monstrous_tribes_land_rights }
		}
		modifier = {
			factor = 0.8
			OR = {
				NOT = { crown_land_share = 30 }
				AND = {
					is_absolutism_active = yes
					NOT = { crown_land_share = 50 }
				}
			}
			NOT = { has_estate_privilege = estate_monstrous_tribes_land_rights }
		}
		modifier = {
			factor = 0.8
			is_absolutism_active = yes
		}
	}
}

estate_monstrous_tribes_share_of_the_spoils = {
	icon = privilege_supply_arms
	max_absolutism = -5
	loyalty = 0.05
	penalties = {
		available_province_loot = -0.1
	}
	benefits = {
	}
	ai_will_do = {
		factor = 0
	}
}

estate_monstrous_tribes_chieftains_autonomy = {
	icon = privilege_grant_autonomy
	max_absolutism = -10
	loyalty = 0.1
	influence = 0.1
	penalties = {
	}
	benefits = {
	}
	ai_will_do = {
		factor = 10
		modifier = {
			factor = 0
			is_absolutism_active = yes
		}
	}
}

estate_monstrous_tribes_guaranteed_leadgership_in_host = {
	icon = privilege_conscript_cossack_elite
	max_absolutism = -5
	influence = 0.05
	can_select = {
		army_tradition = 30
	}
	on_granted = {
		add_army_tradition = -15
	}
	penalties = {
	}
	benefits = {
		general_cost = -0.25
		army_tradition_decay = -0.005
	}
	ai_will_do = {
		factor = 0
	}
}

estate_monstrous_tribes_tribal_host = {
	icon = privilege_raise_host
	max_absolutism = -5
	loyalty = -0.05
	influence = 0.1
	benefits = {
		global_manpower_modifier = 0.2
	}
	ai_will_do = {
		factor = 10
		modifier = {
			factor = 0.5
			is_absolutism_active = yes
		}
	}
}



estate_raj_ministries_delegate_territorial_management = {
	icon = privilege_grant_new_world_charter
	max_absolutism = -10
	influence = 0.1
	loyalty = 0.05
	land_share = 5
	benefits = {
		development_cost = -0.05
	}
	modifier_by_land_ownership = {
		state_maintenance_modifier = -0.5
		vassal_income = 0.5
	}
	mechanics = {
		exempt_from_seize_land
	}
	ai_will_do = {
		factor = 0
	}
}

estate_raj_ministries_extend_education_grants = {
	icon = privilege_patronize_jain_families
	max_absolutism = -5
	influence = 0.05
	loyalty = 0.05
	benefits = {
		advisor_cost = -0.1
	}
	penalties = {
		global_tax_modifier = -0.1
	}
	ai_will_do = {
		factor = 0
	}
}

estate_raj_ministries_land_rights = {
	icon = privilege_grant_autonomy
	land_share = 5
	max_absolutism = -5
	loyalty = 0.05
	influence = 0.05
	can_select = {
	}
	on_granted = {
	}
	penalties = {
	}
	benefits = {
		governing_capacity = 100
	}
	ai_will_do = {
		factor = 5
		modifier = {
			factor = 1.4
			num_of_territories = 5
		}
		modifier = {
			factor = 1.5
			num_of_territories = 10
		}
		modifier = {
			factor = 1.5
			num_of_territories = 15
		}
		modifier = {
			factor = 0
			OR = {
				NOT = { crown_land_share = 25 }
				estate_influence = {
					estate = estate_raj_ministries
					influence = 75
				}
			}
			NOT = { has_estate_privilege = estate_raj_ministries_land_rights }
		}
		modifier = {
			factor = 3
			OR = {
				AND = {
					governing_capacity_percentage = 0.9
					NOT = { has_estate_privilege = estate_raj_ministries_land_rights }
				}
				#The trigger below should make sure that the AI actually keeps this privilege when enacting it early game
				AND = {
					governing_capacity_percentage = 0.6
					has_estate_privilege = estate_raj_ministries_land_rights
				}
			}
		}
		modifier = {
			factor = 0
			NOT = { governing_capacity_percentage = 0.5 }
		}
		modifier = {
			factor = 0.8
			OR = {
				NOT = { crown_land_share = 40 }
				AND = {
					is_absolutism_active = yes
					NOT = { crown_land_share = 60 }
				}
			}
			NOT = { has_estate_privilege = estate_raj_ministries_land_rights }
		}
		modifier = {
			factor = 0.8
			OR = {
				NOT = { crown_land_share = 30 }
				AND = {
					is_absolutism_active = yes
					NOT = { crown_land_share = 50 }
				}
			}
			NOT = { has_estate_privilege = estate_raj_ministries_land_rights }
		}
		modifier = {
			factor = 0.8
			is_absolutism_active = yes
		}
	}
}

estate_raj_ministries_strict_caste_regulation = {
	icon = privilege_seek_support_of_clergy
	max_absolutism = -5
	loyalty = 0.1
	influence = 0.05
	penalties = {
		advisor_cost = 0.05
		advisor_pool = -1
	}
	benefits = {
		same_culture_advisor_cost = -0.2
	}
	on_revoked = {
		#Add unrest
	} 
	ai_will_do = {
		factor = 10
		modifier = {
			factor = 0
			is_absolutism_active = yes
		}
	}
}

estate_raj_ministries_ministerial_tithes = {
	icon = privilege_build_jain_temple
	max_absolutism = -5
	loyalty = 0.05
	influence = 0.05
	penalties = {
		global_tax_modifier = -0.1
	}
	modifier_by_land_ownership = {
		build_cost = -0.5
	}
	ai_will_do = {
		factor = 0
	}
}

estate_raj_ministries_ceremonial_ruler_act = {
	icon = privilege_royal_authority
	max_absolutism = -40
	loyalty = 0.05
	influence = 0.1
	land_share = 10
	benefits = {
		advisor_cost = -0.33
	}
	penalties = {
		all_power_cost = 0.05
	}
	ai_will_do = {
		factor = 0
	}
}

estate_raj_ministries_establish_the_ministry_of_war = {
	icon = privilege_promote_purbias
	max_absolutism = -5
	influence = 0.1
	loyalty = 0.05
	penalties = {
		army_tradition_decay = 0.01
	}
	benefits = {
		free_mil_policy = 1
		possible_mil_policy = 1
	}
	ai_will_do = {
		factor = 1
		modifier = {
			factor = 0
			is_absolutism_active = yes
		}
	}
}

estate_raj_ministries_control_over_monetary_policy = {
	icon = privilege_give_money
	max_absolutism = -10
	influence = 0.05
	loyalty = 0.05
	is_valid = {
		has_dlc = "Emperor"
	}
	penalties = {
		all_power_cost = 0.05
	}
	benefits = {
		inflation_reduction = 0.15
		interest = -0.5
		production_efficiency = 0.05
	}
	ai_will_do = {
		factor = 1
		modifier = {
			factor = 10
			OR = {
				inflation = 15
				num_of_loans = 15
			}
		}
		modifier = {
			factor = 0
			is_absolutism_active = yes
		}
	}
}

estate_raj_ministries_expanded_senaptia_ranks = {
	icon = privilege_supply_arms
	max_absolutism = -5
	influence = 0.05
	loyalty = 0.05
	is_valid = {
		has_reform = raja_reform
		NOT = { has_estate_privilege = estate_raj_ministries_reduced_senaptia_ranks }
	}
	penalties = {
		land_forcelimit_modifier = -0.1
	}
	benefits = {
		
	}
	on_granted = {
		custom_tooltip = estate_raj_ministries_expanded_senaptia_ranks_tt #increase max senaptia ranks by 2
		hidden_effect = {
			4411 = {
				change_variable = {
					which = raj_max_allowed_senaptia
					value = 2
				}
			}
		}
	}
	on_revoked = {
		custom_tooltip = estate_raj_ministries_expanded_senaptia_ranks_tt #increase max senaptia ranks by 2
		hidden_effect = {
			4411 = {
				change_variable = {
					which = raj_max_allowed_senaptia
					value = -2
				}
			}
		}
	}
	ai_will_do = {
		factor = 1
		modifier = {
			factor = 0
			is_absolutism_active = yes
		}
	}
}

estate_raj_ministries_reduced_senaptia_ranks = {
	icon = privilege_supply_arms
	max_absolutism = -5
	influence = 0.05
	loyalty = 0.05
	is_valid = {
		has_reform = raja_reform
		NOT = { has_estate_privilege = estate_raj_ministries_expanded_senaptia_ranks }
	}
	penalties = {
		
	}
	benefits = {
		vassal_income = 0.2
	}
	on_granted = {
		custom_tooltip = estate_raj_ministries_reduced_senaptia_ranks_tt #decrease max senaptia ranks by 2
		hidden_effect = {
			4411 = {
				change_variable = {
					which = raj_max_allowed_senaptia
					value = -2
				}
			}
		}
	}
	on_revoked = {
		custom_tooltip = estate_raj_ministries_reduced_senaptia_ranks_tt #decrease max senaptia ranks by 2
		hidden_effect = {
			4411 = {
				change_variable = {
					which = raj_max_allowed_senaptia
					value = 2
				}
			}
		}
	}
	ai_will_do = {
		factor = 1
		modifier = {
			factor = 0
			is_absolutism_active = yes
		}
	}
}

estate_raj_ministries_ministerial_census = {
	icon = privilege_royal_authority
	max_absolutism = -5
	influence = 0.05
	loyalty = 0.05
	is_valid = {
		has_reform = raja_reform
		NOT = { has_country_flag = revoke_ministry_census }
	}
	can_select = {
		adm_power = 50
		dip_power = 50
		mil_power = 50
	}
	penalties = {
		global_tax_modifier = -0.1
	}
	on_granted = {
		add_adm_power = -50
		add_dip_power = -50
		add_mil_power = -50
		custom_tooltip = estate_raj_ministries_ministerial_census_tt
		hidden_effect = {
			every_subject_country = {
				country_event = {
					id = rahenraj.1200
					days = 14
					random = 30
				}
			}
		}
		raj_cohesion_change_absolute = { amount = 5 }
	}
	on_revoked = {
		
	}
	cooldown_years = 10
	on_cooldown_expires = {
		set_country_flag = revoke_ministry_census # on_invalid gives a notification, on_revoked does not.
	}
	on_invalid = {
		clr_country_flag = revoke_ministry_census
	}
	ai_will_do = {
		factor = 1
	}
}

estate_raj_ministries_raj_cohesion = {
	icon = privilege_raj_cohesion
	max_absolutism = -5
	is_valid = {
		
	}
	can_revoke = {
		always = no
	}
	on_granted = {
		custom_tooltip = raj_cohesion_explanation_tt
	}
	on_revoked = {
		custom_tooltip = raj_cohesion_explanation_tt
	}
	conditional_modifier = {
		trigger = {
			4411 = {
				check_variable = {
					which = raj_cohesion
					value = 80
				}
			}
		}
		modifier = {
			development_cost = -0.05
			global_unrest = -1
			raj_ministries_influence_modifier = 0.10
		}
	}
	conditional_modifier = {
		trigger = {
			4411 = {
				check_variable = {
					which = raj_cohesion
					value = 60
				}
				NOT = {
					check_variable = {
						which = raj_cohesion
						value = 80
					}
				}
			}
		}
		modifier = {
			
		}
	}
	conditional_modifier = {
		trigger = {
			4411 = {
				check_variable = {
					which = raj_cohesion
					value = 40
				}
				NOT = {
					check_variable = {
						which = raj_cohesion
						value = 60
					}
				}
			}
		}
		modifier = {
			development_cost = 0.05
			reduced_liberty_desire = -5
			global_unrest = 1
			raj_ministries_influence_modifier = -0.05
		}
		is_bad = yes
	}
	conditional_modifier = {
		trigger = {
			4411 = {
				check_variable = {
					which = raj_cohesion
					value = 20
				}
				NOT = {
					check_variable = {
						which = raj_cohesion
						value = 40
					}
				}
			}
		}
		modifier = {
			development_cost = 0.10
			reduced_liberty_desire = -10
			global_unrest = 2
			raj_ministries_influence_modifier = -0.10
		}
		is_bad = yes
	}
	conditional_modifier = {
		trigger = {
			4411 = {
				NOT = {
					check_variable = {
						which = raj_cohesion
						value = 20
					}
				}
			}
		}
		modifier = {
			development_cost = 0.20
			reduced_liberty_desire = -15
			global_unrest = 4
			raj_ministries_influence_modifier = -0.15
		}
		is_bad = yes
	}
	ai_will_do = {
		factor = 0
	}
}

estate_mages_organization_covenant = {
	icon = privilege_promote_maratha_nobility
	max_absolutism = 5
	loyalty = 0.10
	influence = -0.10
	is_valid = {
		has_estate_privilege = estate_mages_organization_covenant
	}
	can_select = {
	}
	can_revoke = {
		always = no
	}
	on_granted = {
	}
	penalties = {
	}
	benefits = {
		yearly_absolutism = 0.1
	}
	ai_will_do = {
		factor = 5
	}
}

estate_mages_organization_elissa = {
	icon = privilege_promote_maratha_nobility
	max_absolutism = 10
	loyalty = 0.15
	influence = 0.15
	is_valid = {
		has_estate_privilege = estate_mages_organization_elissa
	}
	can_select = {
	}
	can_revoke = {
		always = no
	}
	on_granted = {
	}
	penalties = {
	}
	benefits = {
		yearly_absolutism = 0.1
	}
	ai_will_do = {
		factor = 5
	}
}

estate_adventurers_organization_covenant = {
	icon = privilege_promote_maratha_nobility
	max_absolutism = 5
	loyalty = 0.10
	influence = -0.10
	is_valid = {
		has_estate_privilege = estate_adventurers_organization_covenant
	}
	can_select = {
	}
	can_revoke = {
		always = no
	}
	on_granted = {
	}
	penalties = {
	}
	benefits = {
		mercenary_manpower = 0.1
	}
	ai_will_do = {
		factor = 1
	}
}

estate_artificers_organization_covenant = {
	icon = privilege_promote_maratha_nobility
	max_absolutism = 5
	loyalty = 0.10
	influence = -0.10
	is_valid = {
		has_estate_privilege = estate_artificers_organization_covenant
	}
	can_select = {
	}
	can_revoke = {
		always = no
	}
	on_revoked = {
		custom_tooltip = artificer_points_hover_over_me_tt
	}
	on_granted = {
		custom_tooltip = artificer_points_hover_over_me_tt
	}
	mechanics = {
        enables_rajput_regiments
    }
	penalties = {
	}
	benefits = {
		special_unit_forcelimit = 0.05
	}
	ai_will_do = {
		factor = 5
	}
}
estate_nobles_castanor_upgraded_strong_duchies = {
	icon = privilege_royal_authority
	max_absolutism = -10
	influence = 0.1
	loyalty = 0.05
	is_valid = {
		has_country_flag = estate_nobles_castanor_upgraded_strong_duchies_unlocked
		castanor_dominion = 1
	}
	can_select = {
		castanor_dominion = 2
	}
	penalties = {
	}
	benefits = {
		diplomatic_upkeep = 2
		reduced_liberty_desire = 20
		vassal_forcelimit_bonus = 0.1
	}
	ai_will_do = {
		factor = 1
		modifier = { #will lose it via invalid sooner or later
			factor = 10
			has_estate_privilege = estate_nobles_castanor_upgraded_strong_duchies
		}
	}
}

estate_burghers_magnate_council = {
	icon = privilege_royal_authority
	max_absolutism = -20
	influence = 0.15
	loyalty = 0.05
	is_valid = {
		# Dudes who get Magnates
		OR = {
			AND = {
				culture_group = alenic
				NOT = {
					primary_culture = wexonard
					primary_culture = marrodic
				}
			}
			culture_group = gerudian
			primary_culture = city_goblin
			has_estate_privilege = estate_burghers_magnate_council # Cannot go invalid by culture shifting
		}
		NOT = { has_disaster = magnate_uprising }
	}
	can_select = {
		#always
	}
	can_revoke = {
		is_year = 1650
		stability = 2
		has_regency = no
	}
	on_revoked = {
		add_stability = -2
	}
	penalties = {
	}
	benefits = {
		global_trade_power = 0.10
	}
	# This is too much, adding more crownland through events is more sustainable
	# mechanics = {
	# 	exempt_from_seize_land
	# }
	ai_will_do = {
		factor = 1
		# AI shouldn't really revoke this
		modifier = {
			factor = 10
			has_estate_privilege = estate_burghers_magnate_council
		}
	}
}

estate_church_independent_clergy = {
	icon = privilege_build_jain_temple
	max_absolutism = -10
	loyalty = -0.10
	influence = 0.05
	is_valid = {
		OR = {
			religion = bulwari_sun_cult
			has_country_flag = updating_isolationism_window
		}
		is_chosen_country = no
	}
	can_select = { }
	
	can_revoke = {
		custom_trigger_tooltip = {
			tooltip = nsc_isolationism_level_is_not_2_tt
			NOT = { isolationism = 2 }
		}
		NOT = { estate_influence = { estate = estate_church influence = 30 } }
		estate_loyalty = { estate = estate_church loyalty = 40 }
		stability = 2
		if = { limit = { isolationism = 1 }
			adm_power = 300
		}
		else_if = { limit = { isolationism = 0 }
			adm_power = 200
		}
	}
	on_revoked = {
		if = { limit = { isolationism = 1 }
			if = { limit = { NOT = { has_disaster = nsc_dinam_elutur } }
				add_stability = -3
				add_adm_power = -300
			}
			custom_tooltip = sun_elf_loyalists_spawn_big_tt
			hidden_effect = {
				random_owned_province = {
					spawn_rebels = {
						type = sun_elf_loyalists_rebels
						size = 2
					}
				}
				random_owned_province = {
					spawn_rebels = {
						type = sun_elf_loyalists_rebels
						size = 2
					}
				}
				random_owned_province = {
					spawn_rebels = {
						type = sun_elf_loyalists_rebels
						size = 2
					}
				}
			}
			custom_tooltip = lesser_effect_with_lower_isolationism_tt
		}
		else_if = { limit = { isolationism = 0 }
			add_stability = -2
			add_adm_power = 200
			custom_tooltip = sun_elf_loyalists_spawn_small_tt
			hidden_effect = {
				random_owned_province = {
					spawn_rebels = {
						type = sun_elf_loyalists_rebels
						size = 2
					}
				}
				random_owned_province = {
					spawn_rebels = {
						type = sun_elf_loyalists_rebels
						size = 2
					}
				}
			}
		}
	}
	
	on_granted = { }
	
	penalties = { }
	
	benefits = { }
	
	conditional_modifier = {
 		trigger = { 
			isolationism = 1
			NOT = { isolationism = 2 }
			OR = {
				is_subject = no
				overlord = { is_chosen_country = no }
			}
		}
 		modifier = {
			church_influence_modifier = 0.05
		}
		is_bad = yes
 	}
	conditional_modifier = {
 		trigger = { 
			isolationism = 2
			NOT = { isolationism = 3 }
			OR = {
				is_subject = no
				overlord = { is_chosen_country = no }
			}
		}
 		modifier = {
			church_loyalty_modifier = -0.05
			church_influence_modifier = 0.10
			global_tax_modifier = -0.05
		}
		is_bad = yes
 	}
	conditional_modifier = {
 		trigger = { 
			isolationism = 3
			NOT = { isolationism = 4 }
			OR = {
				is_subject = no
				overlord = { is_chosen_country = yes }
			}
		}
 		modifier = {
			church_loyalty_modifier = -0.10
			church_influence_modifier = 0.15
			global_tax_modifier = -0.10
		}
		is_bad = yes
 	}
	conditional_modifier = {
 		trigger = { 
			isolationism = 4
			OR = {
				is_subject = no
				overlord = { is_chosen_country = no }
			}
		}
 		modifier = {
			church_loyalty_modifier = -0.20
			church_influence_modifier = 0.20
			global_tax_modifier = -0.20
		}
		is_bad = yes
 	}
	
	ai_will_do = {
		factor = 11
		modifier = {
			factor = 0.5
			stability = 2
		}
		modifier = {
			factor = 0.5
			stability = 3
		}
		modifier = {
			factor = 0.5
			NOT = { isolationism = 1 }
		}
		modifier = {
			factor = 10
			is_at_war = yes
		}
	}
}

estate_church_sponsored_festivals = {
	icon = privilege_nsc_sponsored_festivals
	influence = 0.05
	
	is_valid = {
		has_country_flag = nsc_sponsored_festivals_flag
	}
	
	can_select = {
		has_country_flag = nsc_sponsored_festivals_flag
	}
	
	on_revoked = { }
	
	on_granted = { }

	penalties = {
		global_tax_modifier = -0.10
	}
	benefits = {
		tolerance_own = 1
	}
	ai_will_do = {
		factor = 10
	}
}

estate_church_tax_on_local_festivals = {
	icon = privilege_give_money
	loyalty = 0.10
	influence = 0.05
	
	is_valid = {
		has_country_flag = nsc_church_tax_on_festivals
	}
	
	can_select = {
		has_country_flag = nsc_church_tax_on_festivals
	}
	
	on_revoked = { }
	
	on_granted = { }

	penalties = {
		tolerance_own = -1
	}
	benefits = {
	}
	ai_will_do = {
		factor = 10
	}
}

estate_mages_empowered_mages = {
	icon = privilege_demand_more_troops
	influence = 0.10
	is_valid = {
		OR = {
			religion = bulwari_sun_cult
			has_country_flag = updating_isolationism_window
		}
		is_chosen_country = no
	}
	can_select = { }
	
	on_granted = { }
	
	penalties = {
		army_tradition_decay = 0.01
		country_military_power = -1
	}
	benefits = {
		land_morale = 0.05
	}
	conditional_modifier = {
		
	}
	ai_will_do = {
		factor = 10
	}
}

estate_mages_organization_bardic_college = {
	icon = privilege_promote_maratha_nobility
	max_absolutism = -25
	loyalty = 0.10
	influence = 0.10
	is_valid = {
		has_estate_privilege = estate_mages_organization_bardic_college
	}
	can_select = {
	}
	can_revoke = {
		always = no
	}
	on_granted = {
	}
	penalties = {
	}
	benefits = {
	prestige = 0.5
	stability_cost_modifier = -0.10
	}
	ai_will_do = {
		factor = 5
	}
}

estate_mages_bardic_general = {
	icon = privilege_demand_more_troops
	max_absolutism = -5
	loyalty = 0.05
	influence = 0.05
	is_valid = {
		has_estate_privilege = estate_mages_organization_bardic_college
	}
	land_share = 5
	can_select = {
		army_tradition = 5
		estate_influence = {
			estate = estate_mages
			influence = 30
		}
	}
	on_granted = {
		add_army_tradition = -5
		custom_tooltip = tooltip_estate_mages_bardic_general
	}
	penalties = {
		army_tradition_decay = 0.005
	}
	benefits = {
		land_morale = 0.05
	}
	ai_will_do = {
		factor = 5
		modifier = {
			factor = 2
			personality = ai_militarist
		}
		modifier = {
			factor = 1.5
			is_at_war = yes
		}
		modifier = {
			factor = 0
			NOT = { army_tradition = 1 }	#if you have hella low army tradition, you're gonna want to turn this off
		}
	}
}

estate_mages_peace_songs = {
	icon = privilege_commission_jain_scripture
	max_absolutism = 0
	loyalty = 0.15
	influence = 0.10
	is_valid = {
		has_estate_privilege = estate_mages_organization_bardic_college
	}
	can_select = {
	}
	on_granted = {
	}
	penalties = {
		land_morale = -0.10
	}
	benefits = {
		global_tax_modifier = 0.20
		production_efficiency = 0.20
	}
	ai_will_do = {
		factor = 1
	}
}

estate_mages_skaldic_teachings = {
	icon = privilege_loan_interaction
	max_absolutism = 0
	loyalty = -0.15
	influence = 0.10
	is_valid = {
		has_estate_privilege = estate_mages_organization_bardic_college
		has_country_flag = seinathil_skaldic_teachings
	}
	can_select = {
	}
	on_granted = {
	}
	penalties = {
	}
	benefits = {
		technology_cost  = -0.075
		all_power_cost  = -0.025
	}
	ai_will_do = {
		factor = 1
	}
}

#krakdhumvror
estate_mages_organization_ice_smiths = {
	icon = privilege_promote_maratha_nobility
	loyalty = 0.1
	influence = 0.2
	land_share = 10
	is_valid = {
		tag = I02
	}
	can_select = {
		always = yes
	}
	can_revoke = {
		always = no
	}
	on_granted = {
		custom_tooltip = mages_benefits_tt	
	}
	penalties = {
		production_efficiency = -0.05
	}
	benefits = {
	}
	ai_will_do = {
		factor = 1
	}
}

estate_mages_supply_more_iron = {
	icon = privilege_monopoly_of_goods_iron
	influence = 0.2
	loyalty = 0.1
	is_valid = { tag = I02 }
	can_select = { 
		any_owned_province = { trade_goods = iron }
		NOT = { has_estate_privilege = estate_nobles_monopoly_of_metals }
	}
	on_granted = {
		custom_tooltip = estate_mages_supply_more_iron_effect
	}
	on_granted_province = {
		if = {
			limit = { trade_goods = iron }
			add_province_modifier = { name = krak_supply_more_iron duration = 3650 }
		}
		else_if = {
			limit = {
				has_province_modifier = krak_supply_more_iron
			}
			remove_province_modifier = krak_supply_more_iron
		}
	}
	on_revoked = {
		custom_tooltip = estate_mages_supply_more_iron_revoke
	}
	on_revoked_province = {
		if = {
			limit = { has_province_modifier = krak_supply_more_iron }
			remove_province_modifier = krak_supply_more_iron
		}
	}
	on_invalid = {
		custom_tooltip = estate_mages_supply_more_iron_revoke
	}
	on_invalid_province = {
		if = {
			limit = { has_province_modifier = krak_supply_more_iron }
			remove_province_modifier = krak_supply_more_iron
		}
	}
	penalties = {}
	benefits = {}
	cooldown_years = 10
	on_cooldown_expires = { country_event = { id = flavor_krak.107 } }
	ai_will_do = { factor = 0 }
}

estate_mages_perform_icecraft = {
	icon = privilege_tolerance_heathen
	can_select = {
		estate_influence = {
			estate = estate_mages
			influence = 15
		}
		mission_completed = krak_relighting_forges
	}
	is_valid = {
		tag = I02
		OR = {
			NOT = { has_country_flag = revoke_mage_estate_spells }
			NOT = { has_estate_privilege = estate_mages_perform_icecraft }
		}
	}
	on_granted = {
		country_event = { id = flavor_krak.100 }
		hidden_effect = { clr_country_flag = revoke_mage_estate_spells } # Just in case
	}
	penalties = {}
	benefits = {}
	cooldown_years = 10
	on_cooldown_expires = {
		set_country_flag = revoke_mage_estate_spells # on_invalid gives a notification, on_revoked does not.
	}
	on_invalid = {
		clr_country_flag = revoke_mage_estate_spells
	}
	ai_will_do = {
		factor = 10
	}
}

estate_mages_ice_sculptures = {
	icon = privilege_build_jain_temple
	is_valid = {
		tag = I02
		mission_completed = krak_freezing_history
	}
	can_select = { always = yes }
	can_revoke = { always = no }
	on_granted = {}
	penalties = {}
	benefits = {
		diplomatic_reputation = 1
		monthly_splendor = 1
	}
	
	ai_will_do = { factor = 0 }
}

xhazobkult_privilege_organised_sacrifices = {
	icon = privilege_seek_support_of_clergy
	max_absolutism = -5
	influence = 0.05
	loyalty = 0.05
	is_valid = {
		religion = xhazobkult
	}
	can_select = {
		NOT = { has_estate_privilege = xhazobkult_privilege_organised_sacrifices }
	}
	can_revoke = {
		#always
	}
	on_revoked = {
	}
	penalties = {
		development_cost = 0.1
	}
	benefits = {
		yearly_patriarch_authority = 0.005
	}
	mechanics = {
	}
	ai_will_do = {
		factor = 5
	}
}

xhazobkult_privilege_the_weak_serve_the_strong = {
	icon = privilege_monopoly_of_goods_slaves
	max_absolutism = -5
	influence = 0.1
	loyalty = 0.05
	land_share = 10
	is_valid = {
		religion = xhazobkult
	}
	can_select = {
		NOT = { has_estate_privilege = xhazobkult_privilege_the_weak_serve_the_strong }
	}
	can_revoke = {
		#always
	}
	on_granted = {
		custom_tooltip = xhazobkult_privilege_the_weak_serve_the_strong_tt
		hidden_effect = {
			set_country_flag = xhazobkult_privilege_the_weak_serve_the_strong_flag
			xhazobkult_privilege_the_weak_serve_the_strong_effect = yes
			every_owned_province = { xhazobkult_set_appropriate_modifier = yes }
		}
	}
	on_revoked = {
		custom_tooltip = xhazobkult_privilege_the_weak_serve_the_strong_tt
		hidden_effect = {
			clr_country_flag = xhazobkult_privilege_the_weak_serve_the_strong_flag
			every_owned_province = { remove_province_modifier = xhazobkult_slave_estate }
			xhazobkult_privilege_the_weak_serve_the_strong_effect = yes
		}
	}
	penalties = {
	}
	benefits = {
	}
	mechanics = {
	}
	ai_will_do = {
		factor = 10
	}
}

estate_mages_sun_elf_evocation = {
	icon = privilege_seek_support_of_clergy
	max_absolutism = 0
	loyalty = 0
	influence = 0.05
	is_valid = {
		religion_group = bulwari
		has_country_flag = nsc_szal_fazil_evocation
	}
	can_revoke = {
		always = no
	}
	penalties = {
	}
	benefits = {
		shock_damage = 0.10
		defensiveness = 0.05
	}
	conditional_modifier = {        #Burghers
        trigger = {
            has_country_flag = nsc_privilege_burgher_influence
        }
        modifier = {
            max_absolutism = -5
            burghers_influence_modifier = 0.1
            mages_loyalty_modifier = -0.1
        }
    }
    conditional_modifier = {        #Nobility
        trigger = {
            has_country_flag = nsc_privilege_noble_influence
        }
        modifier = {
            max_absolutism = -5
            nobles_influence_modifier = 0.1
            mages_loyalty_modifier = -0.1
        }
    }
    conditional_modifier = {        #Mages
        trigger = {
            has_country_flag = nsc_privilege_magi_influence
        }
        modifier = {
			mages_influence_modifier = 0.1
            mages_loyalty_modifier = 0.1
        }
    }
	conditional_modifier = {        #Both
        trigger = {
            has_country_flag = nsc_privilege_both_influence
        }
        modifier = {
            nobles_influence_modifier = 0.05
			burghers_influence_modifier = 0.05
            mages_loyalty_modifier = -0.1
        } 
    }
	ai_will_do = {
		factor = 10
	}
}

estate_mages_sun_elf_abjuration = {
	icon = privilege_seek_support_of_clergy
	max_absolutism = 0
	loyalty = 0
	influence = 0.05
	is_valid = {
		religion_group = bulwari
		has_country_flag = nsc_szal_fazil_abjuration
	}
	can_revoke = {
		always = no
	}
	penalties = {
	}
	benefits = {
		shock_damage = 0.05
		defensiveness = 0.1
	}
	conditional_modifier = {        #Burghers
        trigger = {
            has_country_flag = nsc_privilege_burgher_influence
        }
        modifier = {
            max_absolutism = -5
            burghers_influence_modifier = 0.1
            mages_loyalty_modifier = -0.1
        }
    }
    conditional_modifier = {        #Nobility
        trigger = {
            has_country_flag = nsc_privilege_noble_influence
        }
        modifier = {
            max_absolutism = -5
            nobles_influence_modifier = 0.1
            mages_loyalty_modifier = -0.1
        }
    }
    conditional_modifier = {        #Mages
        trigger = {
            has_country_flag = nsc_privilege_magi_influence
        }
        modifier = {
			mages_influence_modifier = 0.1
            mages_loyalty_modifier = 0.1
        }
    }
	conditional_modifier = {        #Both
        trigger = {
            has_country_flag = nsc_privilege_both_influence
        }
        modifier = {
            nobles_influence_modifier = 0.05
			burghers_influence_modifier = 0.05
            mages_loyalty_modifier = -0.1
        } 
    }
	ai_will_do = {
		factor = 10
	}
}

estate_mages_syncretic_transmutation = {
	icon = privilege_seek_support_of_clergy
	max_absolutism = 0
	loyalty = 0
	influence = 0.05
	is_valid = {
		religion_group = bulwari
		has_country_flag = nsc_szal_fazil_transmutation
	}
	can_revoke = {
		always = no
	}
	penalties = {
	}
	benefits = {
		production_efficiency = 0.1
	}
	conditional_modifier = {        #Burghers
        trigger = {
            has_country_flag = nsc_privilege_burgher_influence
        }
        modifier = {
            max_absolutism = -5
            burghers_influence_modifier = 0.1
            mages_loyalty_modifier = -0.1
        }
    }
    conditional_modifier = {        #Nobility
        trigger = {
            has_country_flag = nsc_privilege_noble_influence
        }
        modifier = {
            max_absolutism = -5
            nobles_influence_modifier = 0.1
            mages_loyalty_modifier = -0.1
        }
    }
    conditional_modifier = {        #Mages
        trigger = {
            has_country_flag = nsc_privilege_magi_influence
        }
        modifier = {
			mages_influence_modifier = 0.1
            mages_loyalty_modifier = 0.1
        }
    }
	conditional_modifier = {        #Both
        trigger = {
            has_country_flag = nsc_privilege_both_influence
        }
        modifier = {
            nobles_influence_modifier = 0.05
			burghers_influence_modifier = 0.05
            mages_loyalty_modifier = -0.1
        } 
    }
	ai_will_do = {
		factor = 10
	}
}

estate_mages_bulwari_divination = {
	icon = privilege_seek_support_of_clergy
	max_absolutism = 0
	loyalty = 0
	influence = 0.05
	is_valid = {
		religion_group = bulwari
		has_country_flag = nsc_szal_fazil_divination
	}
	can_revoke = {
		always = no
	}
	penalties = {
	}
	benefits = {
		idea_cost = -0.05
		improve_relation_modifier = 0.1
	}
	conditional_modifier = {        #Burghers
        trigger = {
            has_country_flag = nsc_privilege_burgher_influence
        }
        modifier = {
            max_absolutism = -5
            burghers_influence_modifier = 0.1
            mages_loyalty_modifier = -0.1
        }
    }
    conditional_modifier = {        #Nobility
        trigger = {
            has_country_flag = nsc_privilege_noble_influence
        }
        modifier = {
            max_absolutism = -5
            nobles_influence_modifier = 0.1
            mages_loyalty_modifier = -0.1
        }
    }
    conditional_modifier = {        #Mages
        trigger = {
            has_country_flag = nsc_privilege_magi_influence
        }
        modifier = {
			mages_influence_modifier = 0.1
            mages_loyalty_modifier = 0.1
        }
    }
	conditional_modifier = {        #Both
        trigger = {
            has_country_flag = nsc_privilege_both_influence
        }
        modifier = {
            nobles_influence_modifier = 0.05
			burghers_influence_modifier = 0.05
            mages_loyalty_modifier = -0.1
        } 
    }
	ai_will_do = {
		factor = 10
	}
}

estate_mages_bulwari_conjuration = {
	icon = privilege_seek_support_of_clergy
	max_absolutism = 0
	loyalty = 0
	influence = 0.05
	is_valid = {
		religion_group = bulwari
		has_country_flag = nsc_szal_fazil_conjuration
	}
	can_revoke = {
		always = no
	}
	penalties = {
	}
	benefits = {
		idea_cost = -0.025
		improve_relation_modifier = 0.2
	}
	conditional_modifier = {        #Burghers
        trigger = {
            has_country_flag = nsc_privilege_burgher_influence
        }
        modifier = {
            max_absolutism = -5
            burghers_influence_modifier = 0.1
            mages_loyalty_modifier = -0.1
        }
    }
    conditional_modifier = {        #Nobility
        trigger = {
            has_country_flag = nsc_privilege_noble_influence
        }
        modifier = {
            max_absolutism = -5
            nobles_influence_modifier = 0.1
            mages_loyalty_modifier = -0.1
        }
    }
    conditional_modifier = {        #Mages
        trigger = {
            has_country_flag = nsc_privilege_magi_influence
        }
        modifier = {
			mages_influence_modifier = 0.1
            mages_loyalty_modifier = 0.1
        }
    }
	conditional_modifier = {        #Both
        trigger = {
            has_country_flag = nsc_privilege_both_influence
        }
        modifier = {
            nobles_influence_modifier = 0.05
			burghers_influence_modifier = 0.05
            mages_loyalty_modifier = -0.1
        } 
    }
	ai_will_do = {
		factor = 10
	}
}

estate_mages_necromancer_death_tax = {
	icon = privilege_give_money
	max_absolutism = -5
	influence = -0.1
	loyalty = -0.05
	land_share = 0
	is_valid = {
		has_country_flag = esthil_lodge_of_necromancers
	}
	can_select = {
		NOT = { has_estate_privilege = estate_mages_empowered_mages }
		has_country_flag = esthil_unlocked_death_tax
	}
	benefits = {
		global_tax_modifier = 0.1
	}
	ai_will_do = {
		factor = 5
		modifier = {
			factor = 2
			personality = ai_militarist
		}
		modifier = {
			factor = 1.5
			is_at_war = no
		}
	}
}

estate_clergy_seelie = {
	icon = privilege_bloody_rose
	max_absolutism = 0
	influence = 0
	loyalty = -0.05
	land_share = 0
	is_valid = {
		religion_group = fey_religion
	}
	can_select = {
		NOT = { has_estate_privilege = estate_clergy_unseelie }
	}
	benefits = {
		monthly_piety = 0.001
		global_unrest = 1
		global_tax_modifier = -0.05
	}
}

estate_clergy_unseelie = {
	icon = privilege_dominion_law
	max_absolutism = 0
	influence = 0
	loyalty = -0.05
	land_share = 0
	is_valid = {
		religion_group = fey_religion
	}
	can_select = {
		NOT = { has_estate_privilege = estate_clergy_seelie }
	}
	benefits = {
		monthly_piety = -0.001
		global_unrest = 1
		global_tax_modifier = -0.05
	}
}

estate_monstrous_tribes_tolerance_heathen_mates = {
	icon = privilege_tolerance_heathen_mates
	max_absolutism = -5
	land_share = 0
	is_valid = {
		religion = the_hunt
	}
	can_select = { }
	benefits = {
		religious_unity = 0.5
		global_missionary_strength = -0.02
	}
	ai_will_do = {
		factor = 6
		modifier = {
			factor = 2
			NOT = { religious_unity = 0.75 }
		}
		modifier = {
			factor = 0
			religious_unity = 1.4
		}
	}
}

estate_church_tolerance_heathen_mates = {
	icon = privilege_tolerance_heathen_mates
	max_absolutism = -5
	land_share = 0
	is_valid = {
		religion = the_hunt
		NOT = { has_estate = estate_monstrous_tribes }
	}
	can_select = { }
	benefits = {
		religious_unity = 0.5
		global_missionary_strength = -0.02
	}
	ai_will_do = {
		factor = 6
		modifier = {
			factor = 2
			NOT = { religious_unity = 0.75 }
		}
		modifier = {
			factor = 0
			religious_unity = 1.4
		}
	}
}

estate_church_protected_burials = {
	icon = privilege_build_jain_temple
	max_absolutism = -5
	loyalty = 0.05
	influence = 0.05
	is_valid = {
		capital_scope = { continent = europe }
	}
	penalties = {
		global_manpower_modifier = -0.10
	}
	benefits = {
		prestige = 0.5
	}
	on_granted = {
		custom_tooltip = reduced_aw_ghouls_tt
		if = {
			limit = { prestige = 50 }
			add_prestige = 5
		}
		else_if = {
			limit = { prestige = 0 }
			add_prestige = 10
		}
		else_if = {
			limit = { prestige = -25 }
			add_prestige = 15
		}
		else_if = {
			limit = { prestige = -50 }
			add_prestige = 20
		}
		else = {
			add_prestige = 25
		}
	}
	on_revoked = {
		custom_tooltip = reduced_aw_ghouls_tt
	}
	ai_will_do = {
		factor = 0
	}
}