##BranchStart 0
Exwes_1_missions = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		tag = A40
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	
	##Mission Start
	exwes_guard_the_south = {
		icon = mission_dominate_genoa
		required_missions = {
			exwes_post_damerian_balance
		}
		position = 2
		provinces_to_highlight = {
			OR = {
				province_id = 18 #troutcoast
				province_id = 28 #módgate
			}
			NOT = {
				ROOT = {
					num_of_owned_provinces_with = {
						AND = {
							OR = {
								AND = {
									province_id = 18
									28 = {
										OR = {
											NOT = {
												owned_by = ROOT
											}
											AND = {
												owned_by = ROOT
												num_of_times_improved_by_owner = 3
											}
										}
									}
								}
								AND = {
									province_id = 28
									num_of_times_improved_by_owner = 3
								}
							}
							province_has_current_tech_fort_trigger = yes
						}
						value = 1
					}
				}
			}
			
		}
		trigger = {
			treasury = 150
			OR = {
				28 = { #módgate
					NOT = {
						owned_by = ROOT
					}
				}
				28 = { #módgate
					AND = {
						owned_by = ROOT
						num_of_times_improved_by_owner = 3
					}
				}
			}
			calc_true_if = {
				all_owned_province = {
					OR = { 
						province_id = 18 #troutcoast
						province_id = 28 #módgate
					}
					AND = {
						province_has_current_tech_fort_trigger = yes
						NOT = {
							has_construction = any
						}
					}
				}
				amount = 1
			}
		}
		effect = {
			add_treasury = -150
			custom_tooltip = exwes_guard_the_south_tt
			if = {
				limit = {
					18 = { #troudcoast
						AND = { 
							owned_by = ROOT
							is_core = ROOT
							province_has_current_tech_fort_trigger = yes
						}
					}
					28 = { #módgate
						OR = {
							province_has_current_tech_fort_trigger = no
							NOT = {
								owned_by = ROOT
							}
						}	 
					}
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				18 = { #troudcoast
					add_building_construction = {
						building = ramparts
						speed = 1
						cost = 0
					}
				}
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = exwes_guard_the_south_tt1
			if = {
				limit = {
					28 = {
						AND = { 
							owned_by = ROOT
							is_core = ROOT
							province_has_current_tech_fort_trigger = yes
						}
					}
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				28 = { #módgate
					add_building_construction = {
						building = ramparts
						speed = 1
						cost = 0
					}
				}
			}
			custom_tooltip = exwes_guard_the_south_tt2
			hidden_effect = {
				if = {
					limit = {
						18 = { #troutcoast
							owned_by = ROOT
							is_core = ROOT
							province_has_current_tech_fort_trigger = yes
						}
						28 = { #módgate
							OR = {
								province_has_current_tech_fort_trigger = no
								NOT = {
									owned_by = ROOT
								}
							}
						}
					}
					18 = { #troutcoast
						add_building_construction = {
							building = ramparts
							speed = 1
							cost = 0
						}
					}
				}
				else = {
					28 = { #módgate
						add_building_construction = {
							building = ramparts
							speed = 1
							cost = 0
						}
					}
				}
				28 = { #módgate
					if = {
						limit = {
							owned_by = ROOT
						}
						change_culture = ROOT
						change_religion = ROOT
					}
					else = {
						remove_claim = ROOT
					}
				}
			}
		}
	}
	##Mission End
	##Mission Start
	exwes_the_ruby_river = {
		icon = hussite_regency
		required_missions = {
			exwes_guard_the_south
		}
		position = 3
		provinces_to_highlight = {
			OR = {
				province_id = 65 #rivergate
				is_capital_of = A20 #rubyhold
			}
			NOT = {
				65 = {
					owned_by = ROOT
					is_core = ROOT
					num_of_times_improved_by_owner = 3
					num_of_buildings_in_province = 2
				}
			}
			NOT = {		
				A20 = {
					alliance_with = ROOT
					has_opinion = {
						who = ROOT
						value = 150
					}
					owes_favors = {
						who = ROOT
						value = 20
					}
				}
			}
		}
		trigger = {
			OR = {
				65 = { #rivergate	
					AND = {
						owned_by = ROOT
						is_core = ROOT
						num_of_times_improved_by_owner = 3
						num_of_buildings_in_province = 2
					}
				}
				A20 = { #Rubyhold
					alliance_with = ROOT
					owns = 65
					has_opinion = {
						who = ROOT
						value = 150
					}
					owes_favors = {
						who = ROOT
						value = 20
					}
				}				
			}
		}
		effect = {
			custom_tooltip = exwes_the_ruby_river_tt
			if = {
				limit = {
					65 = {
						owned_by = ROOT
					}
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				country_event = {
					id = flavour_exwes.1
				}
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = exwes_the_ruby_river_tt1
			if = {
				limit = {
					65 = {
						owned_by = A20 #Rubyhold
					}
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				country_event = {
					id = flavour_exwes.2
				}
				add_favors = {
					who = A20
					amount = -20
				}
			}
			custom_tooltip = exwes_the_ruby_river_tt2
			hidden_effect = {
				if = {
					limit = {
						65 = {
							owned_by = ROOT
						}
					}
					country_event = {
						id = flavour_exwes.1
					}
				}
				else = {
					country_event = {
						id = flavour_exwes.2
					}
					add_favors = {
						who = A20
						amount = -20
					}
				}
			}
		}
	}
	##Mission End
	##Mission Start
	exwes_support_local_fishers = {
		icon = mission_develop_nevas_port
		required_missions = { } #NO
		position = 4
		provinces_to_highlight = {
			province_id = 154 #Exwes-at-sea
			NOT = {
				AND = {
					has_trade_building_trigger = yes
					development = 25
				}
			}
		}
		trigger = {
			treasury = 500
			154 = {
				has_trade_building_trigger = yes
				development = 25
				if = {
					limit = {
						NOT = {
							has_building = grand_shipyard
						}
					}
					NOT = {
						has_construction = any
					}
				}
			}
		}
		effect = {
			add_treasury = -500
			154 = { #Exwes-at-sea
				if = {
					limit = {
						NOT = {
							OR = {
								has_building = shipyard
								has_building = grand_shipyard
							}
						}
					}
					add_building_construction = {
						building = shipyard
						speed = 1
						cost = 0
					}	 
				}
				else_if = {
					limit = {
						has_building = shipyard
					}
					add_building_construction = {
						building = grand_shipyard
						speed = 1
						cost = 0
					}
				}
				else = {
				add_base_production = 2
				}
				center_of_trade = 1
			}
		}
	}
	##Mission End
	##Mission Start
	exwes_fisher_navy = {
		icon = mission_aragonese_navy
		required_missions = {
			exwes_support_local_fishers
		}
		position = 5
		provinces_to_highlight = {
			OR = {
				AND = {
					owned_by = ROOT
					has_port = yes
				}
			}
			NOT = {
				AND = {
					has_dock_building_trigger = yes
					has_shipyard_building_trigger = yes
				}
			}
			NOT = {
				ROOT = {
					num_of_owned_provinces_with = {
						OR = {
							has_dock_building_trigger = yes
							has_shipyard_building_trigger = yes
						}
						value = 10
					}
				}
			}
		}
		trigger = {
			OR = {
				num_of_heavy_ship = 5
				num_of_galley = 15
			}
			num_of_light_ship = 30
			num_of_admirals = 1
			num_of_owned_provinces_with = {
				OR = {
					has_dock_building_trigger = yes
					has_shipyard_building_trigger = yes
				}
				value = 10
			}
		}
		effect = {
			add_country_modifier = {
				name = exwes_renowned_fishers
				duration = -1
			}
		}
	}
	##Mission End
	##Mission Start
	exwes_the_salmon_brigade = {
		icon = mission_swedish_peasantry
		required_missions = {
			exwes_fisher_navy
		}
		position = 6
		
		trigger = {
			num_of_marines = 10
			AND = {
				if = {
					limit = {
						has_dlc = "Cradle of Civilization"
					}
					custom_trigger_tooltip = {
						tooltip = exwes_the_salmon_brigade_tt
						OR = {
							AND = {
								army_tradition = 100
								army_professionalism = 0
							}
							AND = {
								army_tradition = 90
								army_professionalism = 0.1
							}
							AND = {
								army_tradition = 80
								army_professionalism = 0.2
							}
							AND = {
								army_tradition = 70
								army_professionalism = 0.3
							}
							AND = {
								army_tradition = 60
								army_professionalism = 0.4
							}
							AND = {
								army_tradition = 50
								army_professionalism = 0.5
							}
							AND = {
								army_tradition = 40
								army_professionalism = 0.6
							}
							AND = {
								army_tradition = 30
								army_professionalism = 0.7
							}
							AND = {
								army_tradition = 20
								army_professionalism = 0.8
							}
							AND = {
								army_tradition = 10
								army_professionalism = 0.9
							}
							AND = {
								army_tradition = 0
								army_professionalism = 1
							}
							AND = {
								OR = {
									AND = {
										army_tradition = 90
										army_professionalism = 0
									}
									AND = {
										army_tradition = 80
										army_professionalism = 0.1
									}
									AND = {
										army_tradition = 70
										army_professionalism = 0.2
									}
									AND = {
										army_tradition = 60
										army_professionalism = 0.3
									}
									AND = {
										army_tradition = 50
										army_professionalism = 0.4
									}
									AND = {
										army_tradition = 40
										army_professionalism = 0.5
									}
									AND = {
										army_tradition = 30
										army_professionalism = 0.6
									}
									AND = {
										army_tradition = 20
										army_professionalism = 0.7
									}
									AND = {
										army_tradition = 10
										army_professionalism = 0.8
									}
									AND = {
										army_tradition = 0
										army_professionalism = 0.9
									}
								}
								mil_power = 100
							}
							AND = {
								OR = {
									AND = {
										army_tradition = 80
										army_professionalism = 0
									}
									AND = {
										army_tradition = 70
										army_professionalism = 0.1
									}
									AND = {
										army_tradition = 60
										army_professionalism = 0.2
									}
									AND = {
										army_tradition = 50
										army_professionalism = 0.3
									}
									AND = {
										army_tradition = 40
										army_professionalism = 0.4
									}
									AND = {
										army_tradition = 30
										army_professionalism = 0.5
									}
									AND = {
										army_tradition = 20
										army_professionalism = 0.6
									}
									AND = {
										army_tradition = 10
										army_professionalism = 0.7
									}
									AND = {
										army_tradition = 0
										army_professionalism = 0.8
									}
								}
								mil_power = 200
							}
							AND = {
								OR = {
									AND = {
										army_tradition = 70
										army_professionalism = 0
									}
									AND = {
										army_tradition = 60
										army_professionalism = 0.1
									}
									AND = {
										army_tradition = 50
										army_professionalism = 0.2
									}
									AND = {
										army_tradition = 40
										army_professionalism = 0.3
									}
									AND = {
										army_tradition = 30
										army_professionalism = 0.4
									}
									AND = {
										army_tradition = 20
										army_professionalism = 0.5
									}
									AND = {
										army_tradition = 10
										army_professionalism = 0.6
									}
									AND = {
										army_tradition = 0
										army_professionalism = 0.7
									}
								}
								mil_power = 300
							}
							AND = {
								OR = {
									AND = {
										army_tradition = 60
										army_professionalism = 0
									}
									AND = {
										army_tradition = 50
										army_professionalism = 0.1
									}
									AND = {
										army_tradition = 40
										army_professionalism = 0.2
									}
									AND = {
										army_tradition = 30
										army_professionalism = 0.3
									}
									AND = {
										army_tradition = 20
										army_professionalism = 0.4
									}
									AND = {
										army_tradition = 10
										army_professionalism = 0.5
									}
									AND = {
										army_tradition = 0
										army_professionalism = 0.6
									}
								}
								mil_power = 400
							}
							AND = {
								OR = {
									AND = {
										army_tradition = 50
										army_professionalism = 0
									}
									AND = {
										army_tradition = 40
										army_professionalism = 0.1
									}
									AND = {
										army_tradition = 30
										army_professionalism = 0.2
									}
									AND = {
										army_tradition = 20
										army_professionalism = 0.3
									}
									AND = {
										army_tradition = 10
										army_professionalism = 0.4
									}
									AND = {
										army_tradition = 0
										army_professionalism = 0.5
									}
								}
								mil_power = 500
							}
							AND = {
								OR = {
									AND = {
										army_tradition = 40
										army_professionalism = 0
									}
									AND = {
										army_tradition = 30
										army_professionalism = 0.1
									}
									AND = {
										army_tradition = 20
										army_professionalism = 0.2
									}
									AND = {
										army_tradition = 10
										army_professionalism = 0.3
									}
									AND = {
										army_tradition = 0
										army_professionalism = 0.4
									}
								}
								mil_power = 600
							}
							AND = {
								OR = {
									AND = {
										army_tradition = 30
										army_professionalism = 0
									}
									AND = {
										army_tradition = 20
										army_professionalism = 0.1
									}
									AND = {
										army_tradition = 10
										army_professionalism = 0.2
									}
									AND = {
										army_tradition = 0
										army_professionalism = 0.3
									}
								}
								mil_power = 700
							}
							AND = {
								OR = {
									AND = {
										army_tradition = 20
										army_professionalism = 0
									}
									AND = {
										army_tradition = 10
										army_professionalism = 0.1
									}
									AND = {
										army_tradition = 0
										army_professionalism = 0.2
									}
								}
								mil_power = 800
							}
							AND = {
								OR = {
									AND = {
										army_tradition = 10
										army_professionalism = 0
									}
									AND = {
										army_tradition = 0
										army_professionalism = 0.1
									}
								}
								mil_power = 900
							}
							mil_power = 1000
						}
					}
				}
				else = {
					custom_trigger_tooltip = {
						tooltip = exwes_the_salmon_brigade_tt1
						OR = {
							army_tradition = 50
							AND = {
								army_tradition = 40
								mil_power = 100
							}
							AND = {
								army_tradition = 30
								mil_power = 200
							}
							AND = {
								army_tradition = 20
								mil_power = 300
							}
							AND = {
								army_tradition = 10
								mil_power = 400
							}
							mil_power = 500
						}
					}
				}
				if = {
					limit = {
						has_dlc = "Cradle of Civilization"
					}
					if = {
						limit = {
							OR = {
								AND = {
									army_tradition = 100
									army_professionalism = 0
								}
								AND = {
									army_tradition = 90
									army_professionalism = 0.1
								}
								AND = {
									army_tradition = 80
									army_professionalism = 0.2
								}
								AND = {
									army_tradition = 70
									army_professionalism = 0.3
								}
								AND = {
									army_tradition = 60
									army_professionalism = 0.4
								}
								AND = {
									army_tradition = 50
									army_professionalism = 0.5
								}
								AND = {
									army_tradition = 40
									army_professionalism = 0.6
								}
								AND = {
									army_tradition = 30
									army_professionalism = 0.7
								}
								AND = {
									army_tradition = 20
									army_professionalism = 0.8
								}
								AND = {
									army_tradition = 10
									army_professionalism = 0.9
								}
								AND = {
									army_tradition = 0
									army_professionalism = 1
								}
							}
						}
						mil_power = 0
					}
					else_if = {
						limit = {
							OR = {
								AND = {
									army_tradition = 90
									army_professionalism = 0
								}
								AND = {
									army_tradition = 80
									army_professionalism = 0.1
								}
								AND = {
									army_tradition = 70
									army_professionalism = 0.2
								}
								AND = {
									army_tradition = 60
									army_professionalism = 0.3
								}
								AND = {
									army_tradition = 50
									army_professionalism = 0.4
								}
								AND = {
									army_tradition = 40
									army_professionalism = 0.5
								}
								AND = {
									army_tradition = 30
									army_professionalism = 0.6
								}
								AND = {
									army_tradition = 20
									army_professionalism = 0.7
								}
								AND = {
									army_tradition = 10
									army_professionalism = 0.8
								}
								AND = {
									army_tradition = 0
									army_professionalism = 0.9
								}
							}
						}
						mil_power = 100
					}
					else_if = {
						limit = {
							OR = {
								AND = {
									army_tradition = 80
									army_professionalism = 0
								}
								AND = {
									army_tradition = 70
									army_professionalism = 0.1
								}
								AND = {
									army_tradition = 60
									army_professionalism = 0.2
								}
								AND = {
									army_tradition = 50
									army_professionalism = 0.3
								}
								AND = {
									army_tradition = 40
									army_professionalism = 0.4
								}
								AND = {
									army_tradition = 30
									army_professionalism = 0.5
								}
								AND = {
									army_tradition = 20
									army_professionalism = 0.6
								}
								AND = {
									army_tradition = 10
									army_professionalism = 0.7
								}
								AND = {
									army_tradition = 0
									army_professionalism = 0.8
								}
							}
						}
						mil_power = 200
					}
					else_if = {
						limit = {
							OR = {
								AND = {
									army_tradition = 70
									army_professionalism = 0
								}
								AND = {
									army_tradition = 60
									army_professionalism = 0.1
								}
								AND = {
									army_tradition = 50
									army_professionalism = 0.2
								}
								AND = {
									army_tradition = 40
									army_professionalism = 0.3
								}
								AND = {
									army_tradition = 30
									army_professionalism = 0.4
								}
								AND = {
									army_tradition = 20
									army_professionalism = 0.5
								}
								AND = {
									army_tradition = 10
									army_professionalism = 0.6
								}
								AND = {
									army_tradition = 0
									army_professionalism = 0.7
								}
							}
						}
						mil_power = 300
					}
					else_if = {
						limit = {
							OR = {
								AND = {
									army_tradition = 60
									army_professionalism = 0
								}
								AND = {
									army_tradition = 50
									army_professionalism = 0.1
								}
								AND = {
									army_tradition = 40
									army_professionalism = 0.2
								}
								AND = {
									army_tradition = 30
									army_professionalism = 0.3
								}
								AND = {
									army_tradition = 20
									army_professionalism = 0.4
								}
								AND = {
									army_tradition = 10
									army_professionalism = 0.5
								}
								AND = {
									army_tradition = 0
									army_professionalism = 0.6
								}
							}
						}
						mil_power = 400
					}
					else_if = {
						limit = {
							OR = {
								AND = {
									army_tradition = 50
									army_professionalism = 0
								}
								AND = {
									army_tradition = 40
									army_professionalism = 0.1
								}
								AND = {
									army_tradition = 30
									army_professionalism = 0.2
								}
								AND = {
									army_tradition = 20
									army_professionalism = 0.3
								}
								AND = {
									army_tradition = 10
									army_professionalism = 0.4
								}
								AND = {
									army_tradition = 0
									army_professionalism = 0.5
								}
							}
						}
						mil_power = 500
					}
					else_if = {
						limit = {
							OR = {
								AND = {
									army_tradition = 40
									army_professionalism = 0
								}
								AND = {
									army_tradition = 30
									army_professionalism = 0.1
								}
								AND = {
									army_tradition = 20
									army_professionalism = 0.2
								}
								AND = {
									army_tradition = 10
									army_professionalism = 0.3
								}
								AND = {
									army_tradition = 0
									army_professionalism = 0.4
								}
							}
						}
						mil_power = 600
					}
					else_if = {
						limit = {
							OR = {
								AND = {
									army_tradition = 30
									army_professionalism = 0
								}
								AND = {
									army_tradition = 20
									army_professionalism = 0.1
								}
								AND = {
									army_tradition = 10
									army_professionalism = 0.2
								}
								AND = {
									army_tradition = 0
									army_professionalism = 0.3
								}
							}
						}
						mil_power = 700
					}
					else_if = {
						limit = {
							OR = {
								AND = {
									army_tradition = 20
									army_professionalism = 0
								}
								AND = {
									army_tradition = 10
									army_professionalism = 0.1
								}
								AND = {
									army_tradition = 0
									army_professionalism = 0.2
								}
							}
						}
						mil_power = 800
					}
					else_if = {
						limit = {
							OR = {
								AND = {
									army_tradition = 10
									army_professionalism = 0
								}
								AND = {
									army_tradition = 0
									army_professionalism = 0.1
								}
							}
						}
						mil_power = 900
					}
					else = {
						mil_power = 1000
					}
				}
				else = {
					if = {
						limit = {
							army_tradition = 50
						}
						mil_power = 0
					}
					else_if = {
						limit = {
							army_tradition = 40
						}
						mil_power = 100
					}
					else_if = {
						limit = {
							army_tradition = 30
						}
						mil_power = 200
					}
					else_if = {
						limit = {
							army_tradition = 20
						}
						mil_power = 300
					}
					else_if = {
						limit = {
							army_tradition = 10
						}
						mil_power = 400
					}
					else = {
						mil_power = 500
					}
				}
			}
		}
		effect = {
			remove_country_modifier = exwes_renowned_fishers
			add_country_modifier = {
				name = exwes_the_salmon_brigade
				duration = -1
			}
			add_country_modifier = {
				name = exwes_militia_expanded
				duration = -1
			}
			if = {
				limit = {
					has_dlc = "Cradle of Civilization"
				}
				if = {
					limit = {
						OR = {
							AND = {
								army_tradition = 100
								army_professionalism = 0
							}
							AND = {
								army_tradition = 90
								army_professionalism = 0.1
							}
							AND = {
								army_tradition = 80
								army_professionalism = 0.2
							}
							AND = {
								army_tradition = 70
								army_professionalism = 0.3
							}
							AND = {
								army_tradition = 60
								army_professionalism = 0.4
							}
							AND = {
								army_tradition = 50
								army_professionalism = 0.5
							}
							AND = {
								army_tradition = 40
								army_professionalism = 0.6
							}
							AND = {
								army_tradition = 30
								army_professionalism = 0.7
							}
							AND = {
								army_tradition = 20
								army_professionalism = 0.8
							}
							AND = {
								army_tradition = 10
								army_professionalism = 0.9
							}
							AND = {
								army_tradition = 0
								army_professionalism = 1
							}
						}
					}
					add_mil_power = 0
				}
				else_if = {
					limit = {
						OR = {
							AND = {
								army_tradition = 90
								army_professionalism = 0
							}
							AND = {
								army_tradition = 80
								army_professionalism = 0.1
							}
							AND = {
								army_tradition = 70
								army_professionalism = 0.2
							}
							AND = {
								army_tradition = 60
								army_professionalism = 0.3
							}
							AND = {
								army_tradition = 50
								army_professionalism = 0.4
							}
							AND = {
								army_tradition = 40
								army_professionalism = 0.5
							}
							AND = {
								army_tradition = 30
								army_professionalism = 0.6
							}
							AND = {
								army_tradition = 20
								army_professionalism = 0.7
							}
							AND = {
								army_tradition = 10
								army_professionalism = 0.8
							}
							AND = {
								army_tradition = 0
								army_professionalism = 0.9
							}
						}
					}
					add_mil_power = -100
				}
				else_if = {
					limit = {
						OR = {
							AND = {
								army_tradition = 80
								army_professionalism = 0
							}
							AND = {
								army_tradition = 70
								army_professionalism = 0.1
							}
							AND = {
								army_tradition = 60
								army_professionalism = 0.2
							}
							AND = {
								army_tradition = 50
								army_professionalism = 0.3
							}
							AND = {
								army_tradition = 40
								army_professionalism = 0.4
							}
							AND = {
								army_tradition = 30
								army_professionalism = 0.5
							}
							AND = {
								army_tradition = 20
								army_professionalism = 0.6
							}
							AND = {
								army_tradition = 10
								army_professionalism = 0.7
							}
							AND = {
								army_tradition = 0
								army_professionalism = 0.8
							}
						}
					}
					add_mil_power = -200
				}
				else_if = {
					limit = {
						OR = {
							AND = {
								army_tradition = 70
								army_professionalism = 0
							}
							AND = {
								army_tradition = 60
								army_professionalism = 0.1
							}
							AND = {
								army_tradition = 50
								army_professionalism = 0.2
							}
							AND = {
								army_tradition = 40
								army_professionalism = 0.3
							}
							AND = {
								army_tradition = 30
								army_professionalism = 0.4
							}
							AND = {
								army_tradition = 20
								army_professionalism = 0.5
							}
							AND = {
								army_tradition = 10
								army_professionalism = 0.6
							}
							AND = {
								army_tradition = 0
								army_professionalism = 0.7
							}
						}
					}
					add_mil_power = -300
				}
				else_if = {
					limit = {
						OR = {
							AND = {
								army_tradition = 60
								army_professionalism = 0
							}
							AND = {
								army_tradition = 50
								army_professionalism = 0.1
							}
							AND = {
								army_tradition = 40
								army_professionalism = 0.2
							}
							AND = {
								army_tradition = 30
								army_professionalism = 0.3
							}
							AND = {
								army_tradition = 20
								army_professionalism = 0.4
							}
							AND = {
								army_tradition = 10
								army_professionalism = 0.5
							}
							AND = {
								army_tradition = 0
								army_professionalism = 0.6
							}
						}
					}
					add_mil_power = -400
				}
				else_if = {
					limit = {
						OR = {
							AND = {
								army_tradition = 50
								army_professionalism = 0
							}
							AND = {
								army_tradition = 40
								army_professionalism = 0.1
							}
							AND = {
								army_tradition = 30
								army_professionalism = 0.2
							}
							AND = {
								army_tradition = 20
								army_professionalism = 0.3
							}
							AND = {
								army_tradition = 10
								army_professionalism = 0.4
							}
							AND = {
								army_tradition = 0
								army_professionalism = 0.5
							}
						}
					}
					add_mil_power = -500
				}
				else_if = {
					limit = {
						OR = {
							AND = {
								army_tradition = 40
								army_professionalism = 0
							}
							AND = {
								army_tradition = 30
								army_professionalism = 0.1
							}
							AND = {
								army_tradition = 20
								army_professionalism = 0.2
							}
							AND = {
								army_tradition = 10
								army_professionalism = 0.3
							}
							AND = {
								army_tradition = 0
								army_professionalism = 0.4
							}
						}
					}
					add_mil_power = -600
				}
				else_if = {
					limit = {
						OR = {
							AND = {
								army_tradition = 30
								army_professionalism = 0
							}
							AND = {
								army_tradition = 20
								army_professionalism = 0.1
							}
							AND = {
								army_tradition = 10
								army_professionalism = 0.2
							}
							AND = {
								army_tradition = 0
								army_professionalism = 0.3
							}
						}
					}
					add_mil_power = -700
				}
				else_if = {
					limit = {
						OR = {
							AND = {
								army_tradition = 20
								army_professionalism = 0
							}
							AND = {
								army_tradition = 10
								army_professionalism = 0.1
							}
							AND = {
								army_tradition = 0
								army_professionalism = 0.2
							}
						}
					}
					add_mil_power = -800
				}
				else_if = {
					limit = {
						OR = {
							AND = {
								army_tradition = 10
								army_professionalism = 0
							}
							AND = {
								army_tradition = 0
								army_professionalism = 0.1
							}
						}
					}
					add_mil_power = -900
				}
				else = {
					add_mil_power = -1000
				}
			}
			else = {
				if = {
					limit = {
						army_tradition = 50
					}
					add_mil_power = 0
				}
				else_if = {
					limit = {
						army_tradition = 40
					}
					add_mil_power = -100
				}
				else_if = {
					limit = {
						army_tradition = 30
					}
					add_mil_power = -200
				}
				else_if = {
					limit = {
						army_tradition = 20
					}
					add_mil_power = -300
				}
				else_if = {
					limit = {
						army_tradition = 10
					}
					add_mil_power = -400
				}
				else = {
					add_mil_power = -500
				}
			}
		}
	}
	##Mission End
	##Mission Start
	exwes_grand_naval_buildup = {
		icon = mission_russian_navy
		required_missions = {
			exwes_revenge_on_the_reavers
		}
		position = 8
		provinces_to_highlight = {
			OR = {
				AND = {
					owned_by = ROOT
					has_port = yes
					NOT = {
						has_building = drydock
					}
					NOT = {
						ROOT = {
							OR = {
								dock = 40
								drydock = 20
							}
							
						}
					}
				}
				AND = {
					owned_by = ROOT
					has_port = yes
					NOT = {
						has_building = grand_shipyard
					}
					NOT = {
						ROOT = {
							OR = {
								shipyard = 40
								grand_shipyard = 20
							}
						}
					}
				}
				AND = {
					owned_by = ROOT
					has_wharf_trade_goods = yes
					NOT = {
						has_building = impressment_offices
					}
					NOT = {
						has_building = wharf
					}
					NOT = {
						ROOT = {
							num_of_owned_provinces_with = {
								AND = {
									has_wharf_trade_goods = yes
									OR = {
										has_building = impressment_offices
										has_building = wharf
									}
								}
								value = 15
							}
						}
					}
				}
			}
		}
		trigger = {
			OR = {
				dock = 40
				drydock = 20
			}
			OR = {
				shipyard = 40
				grand_shipyard = 20
			}
			num_of_owned_provinces_with = {
				AND = {
					has_wharf_trade_goods = yes
					OR = {
						has_building = impressment_offices
						has_building = wharf
					}
				}
				value = 15
			}
			AND = {
				custom_trigger_tooltip = {
					tooltip = exwes_grand_naval_buildup_tt
					OR = {
						navy_tradition = 50
						AND = {
							navy_tradition = 40
							dip_power = 100
						}
						AND = {
							navy_tradition = 30
							dip_power = 200
						}
						AND = {
							navy_tradition = 20
							dip_power = 300
						}
						AND = {
							navy_tradition = 10
							dip_power = 400
						}
						dip_power = 500
					}
				}
				if = {
					limit = {
						navy_tradition = 50
					}
					dip_power = 0
				}
				else_if = {
					limit = {
						navy_tradition = 40
					}
					dip_power = 100
				}
				else_if = {
					limit = {
						navy_tradition = 30
					}
					dip_power = 200
				}
				else_if = {
					limit = {
						navy_tradition = 20
					}
					dip_power = 300
				}
				else_if = {
					limit = {
						navy_tradition = 10
					}
					dip_power = 400
				}
				else = {
					dip_power = 500
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = exwes_grand_naval_overhaul
				duration = -1
			}
			if = {
				limit = {
					navy_tradition = 50
				}
				add_dip_power = 0
			}
			else_if = {
				limit = {
					navy_tradition = 40
				}
				add_dip_power = -100
			}
			else_if = {
				limit = {
					navy_tradition = 30
				}
				add_dip_power = -200
			}
			else_if = {
				limit = {
					navy_tradition = 20
				}
				add_dip_power = -300
			}
			else_if = {
				limit = {
					navy_tradition = 10
				}
				add_dip_power = -400
			}
			else = {
				add_dip_power = -500
			}
		}
	}
	##Mission End
	##
}
##BranchEnd 0
##BranchStart 1
Exwes_2_missions = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		tag = A40
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	
	##Mission Start
	exwes_post_damerian_balance = {
		icon = mission_noble_council
		required_missions = { } #NO
		position = 1
		provinces_to_highlight = {
			AND = {
				is_capital = yes
				OR = {
					region = west_dameshead_region
					region = lencenor_region
				}
				owner = {
					is_subject = no
				}
				NOT = {
					owned_by = ROOT
				}
			}
			NOT = {
				OR = {
					owner = {
						alliance_with = ROOT
					}
					calc_true_if = {
						amount = 3
						ROOT = {
							all_ally = {
								capital_scope = {
									OR = {
										region = west_dameshead_region
										region = lencenor_region
									}
								}
								has_75_opinion_improved_relation = {
									target = ROOT
								}
							}
						}
					}
				}
			}
		}
		trigger = {
			calc_true_if = {
				amount = 3
				all_rival_country = {
					capital_scope = {
						OR = {
							region = west_dameshead_region
							region = lencenor_region
						}
					}
				}
				all_ally = {
					capital_scope = {
						OR = {
							region = west_dameshead_region
							region = lencenor_region
						}
					}
					has_75_opinion_improved_relation = {
						target = ROOT
					}
				}
			}
		}
		effect = {
			28 = { #Módgate
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { owned_by = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			65 = { #Rivergate
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { owned_by = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			155 = { #Westmarsh
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { owned_by = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			152 = { #Ár esta
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { owned_by = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			158 = { #Laseán
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { owned_by = ROOT }
					}
					add_claim = ROOT
				}
			}
			custom_tooltip = exwes_post_damerian_balance_tt
			if = {
				limit = {
					calc_true_if = {
						amount = 3
						all_ally = {
							capital_scope = {
								OR = {
									region = west_dameshead_region
									region = lencenor_region
								}
							}
							has_75_opinion_improved_relation = {
								target = ROOT
							} 
						}
					}
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				add_country_modifier = {
					name = exwes_strong_lencori_politics
					duration = 5475
				}
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = exwes_post_damerian_balance_tt1
			if = {
				limit = {
					calc_true_if = {
						amount = 2
						all_ally = {
							capital_scope = {
								OR = {
									region = west_dameshead_region
									region = lencenor_region
								}
							}
							has_75_opinion_improved_relation = {
								target = ROOT
							}
						}
					}
					NOT = {
						calc_true_if = {
							amount = 3
							all_ally = {
								capital_scope = {
									OR = {
										region = west_dameshead_region
										region = lencenor_region
									}
								}
								has_75_opinion_improved_relation = {
									target = ROOT
								}
							}
						}
					}
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				add_country_modifier = {
					name = exwes_lencori_politics
					duration = 5475
				}
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = exwes_post_damerian_balance_tt2
			if = {
				limit = {
					NOT = {
						calc_true_if = {
							amount = 2
							all_ally = {
								capital_scope = {
									OR = {
										region = west_dameshead_region
										region = lencenor_region
									}
								}
								has_75_opinion_improved_relation = {
									target = ROOT
								}
							}
						}
					}
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				add_country_modifier = {
					name = exwes_weak_lencori_politics
					duration = 5475
				}
			}
			hidden_effect = {
				if = {
					limit = {
						calc_true_if = {
							amount = 3
							all_ally = {
								capital_scope = {
									OR = {
										region = west_dameshead_region
										region = lencenor_region
									}
								}
								has_75_opinion_improved_relation = {
									target = ROOT
								}
							}
						}
					}
					set_country_flag = exwes_strong_lencori_politics
					add_country_modifier = {
						name = exwes_strong_lencori_politics
						duration = 5475
					}
				}
				else_if = {
					limit = {
						calc_true_if = {
							amount = 2
							all_ally = {
								capital_scope = {
									OR = {
										region = west_dameshead_region
										region = lencenor_region
									}
								}
								has_75_opinion_improved_relation = {
									target = ROOT
								}
							}
						}
					}
					set_country_flag = exwes_lencori_politics
					add_country_modifier = {
						name = exwes_lencori_politics
						duration = 5475
					}
				}
				else = {
					set_country_flag = exwes_weak_lencori_politics
					add_country_modifier = {
						name = exwes_weak_lencori_politics
						duration = 5475
					}
				}
			}
		}
	}
	##Mission End
	##Mission Start
	exwes_seize_lasean = {
		icon = mission_unite_home_region
		required_missions = {
			exwes_post_damerian_balance
		}
		position = 3
		provinces_to_highlight = {
			OR = {
				OR = {
					AND = {
						province_id = 152 #Ár esta
						NOT = {
							AND = { 
								owned_by = ROOT
								is_core = ROOT
								num_of_times_improved_by_owner = 3
								num_of_buildings_in_province = 2
							}
						}
					}
					AND = {
						owned_by = A96 #Laseán
						superregion = western_cannor_superregion
						NOT = {
							country_or_non_sovereign_subject_holds = ROOT
						}
					}
				}
			}
		}
		trigger = {
			152 = {
				AND = {
					owned_by = ROOT
					is_core = ROOT
					num_of_times_improved_by_owner = 3
					num_of_buildings_in_province = 2
				}
			}
			A96 = {
				OR = {
					is_subject_of = ROOT
					exists = no
					NOT = {
						any_owned_province = {
							superregion = western_cannor_superregion
						}
					}
				}
			}
		}
		effect = {
			152 = {
				change_culture = ROOT
				change_religion = ROOT
			}
			custom_tooltip = exwes_seize_lasean_tt
			if = {
				limit = {
					has_country_flag = exwes_strong_lencori_politics
					has_country_modifier = exwes_strong_lencori_politics
				}
				extend_country_modifier = {
					name = exwes_strong_lencori_politics
					duration = 5475
				}
			}
			else_if = {
				limit = {
					has_country_flag = exwes_strong_lencori_politics
				}
				add_country_modifier = {
					name = exwes_strong_lencori_politics
					duration = 5475
				}
			}
			if = {
				limit = {
					has_country_flag = exwes_lencori_politics
					has_country_modifier = exwes_lencori_politics
				}
				extend_country_modifier = {
					name = exwes_lencori_politics
					duration = 5475
				}
			}
			else_if = {
				limit = {
					has_country_flag = exwes_lencori_politics
				}
				add_country_modifier = {
					name = exwes_lencori_politics
					duration = 5475
				}
			}
			if = {
				limit = {
					has_country_flag = exwes_weak_lencori_politics
					has_country_modifier = exwes_weak_lencori_politics
				}
				extend_country_modifier = {
					name = exwes_weak_lencori_politics
					duration = 5475
				}
			}
			else_if = {
				limit = {
					has_country_flag = exwes_weak_lencori_politics
				}
				add_country_modifier = {
					name = exwes_weak_lencori_politics
					duration = 5475
				}
			}
			clr_country_flag = exwes_strong_lencori_politics
			clr_country_flag = exwes_lencori_politics
			clr_country_flag = exwes_weak_lencori_politics
		}
	}
	##Mission End
	##Mission Start
	exwes_restore_arca_iruanaine = {
		icon = fixed_garrison_system
		required_missions = {
			exwes_the_ruby_river
			exwes_seize_lasean
			exwes_seizing_the_saltmarsh
		}
		position = 4
		provinces_to_highlight = {
			province_id = 153 #Exwes
			NOT = {
				AND = {
					owned_by = ROOT
					is_core = ROOT
					development = 30
					has_forcelimit_building_trigger = yes
					has_manpower_building_trigger = yes
					OR = {
						has_building = mage_tower
						has_building = ramparts
					}
					province_has_current_tech_fort_trigger = yes
				}
			}
		}
		trigger = {
			153 = { #Exwes
				AND = {
					owned_by = ROOT
					is_core = ROOT
					development = 30
					has_forcelimit_building_trigger = yes
					has_manpower_building_trigger = yes
					OR = {
						has_building = mage_tower
						has_building = ramparts
					}
					province_has_current_tech_fort_trigger = yes
				}
			}
		}
		effect = {
			country_event = { #Restoration of Arca Iruanairé
				id = flavour_exwes.3
			}
			custom_tooltip = exwes_restore_arca_iruanaine_tt
		}
	}
	##Mission End
	##Mission Start
	exwes_rallying_support = {
		icon = mission_monarch_diplomacy
		required_missions = {
			exwes_claiming_the_small_country
		}
		position = 5
		provinces_to_highlight = {
			OR = {
				is_capital = yes
			}
			NOT = {
				owner = {
					OR = {
						is_part_of_hre = no
						has_opinion = {
							who = ROOT
							value = 100
						}
					}
				}
			}
		}
		trigger = {
			OR = {
				is_emperor = yes
				any_known_country = {
					is_emperor = yes
					has_opinion = {
						who = ROOT
						value = 100
					}
				}
				calc_true_if = {
					amount = 4
					all_known_country = {
						is_elector = yes
						has_opinion = {
							who = ROOT
							value = 100
						}
					}
				}
				any_known_country = {
					is_emperor = yes
					has_been_insulted_by_root = yes
				}
				is_part_of_hre = no
			}
		}
		effect = {
			custom_tooltip = exwes_rallying_support_tt
			if = {
				limit = {
					calc_true_if = {
						amount = 30
						all_known_country = {
							is_part_of_hre = yes
							has_opinion = {
								who = ROOT
								value = 100
							}
						}
					}
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				add_country_modifier = {
					name = exwes_full_imperial_support
					duration = 5475
				}
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = exwes_rallying_support_tt1
			if = {
				limit = {
					calc_true_if = {
						amount = 20
						all_known_country = {
							is_part_of_hre = yes
							has_opinion = {
								who = ROOT
								value = 100
							}
						}
					}
					NOT = {
						calc_true_if = {
							amount = 30
							all_known_country = {
								is_part_of_hre = yes
								has_opinion = {
									who = ROOT
									value = 100
								}
							}
						}
					}
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				add_country_modifier = {
					name = exwes_imperial_support
					duration = 5475
				}
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = exwes_rallying_support_tt2
			if = {
				limit = {
					calc_true_if = {
						amount = 10
						all_known_country = {
							is_part_of_hre = yes
							has_opinion = {
								who = ROOT
								value = 100
							}
						}
					}
					NOT = {
						calc_true_if = {
							amount = 20
							all_known_country = {
								is_part_of_hre = yes
								has_opinion = {
									who = ROOT
									value = 100
								}
							}
						}
					}
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				add_country_modifier = {
					name = exwes_some_imperial_support
					duration = 5475
				}
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = exwes_rallying_support_tt3
			if = {
				limit = {
					NOT = {
						calc_true_if = {
							amount = 10
							all_known_country = {
								is_part_of_hre = yes
								has_opinion = {
									who = ROOT
									value = 100
								}
							}
						}
					}
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				add_country_modifier = {
					name = exwes_local_support
					duration = 5475
				}
			}
			hidden_effect = {
				if = { #Small country joins EoA later on
					limit = {
						OR = {
							any_known_country = {
								is_emperor = yes
								has_opinion = {
									who = ROOT
									value = 100
								}
							}
							is_emperor = yes
						}
					} 
					set_country_flag = exwes_eao_small_country 
				}
				if = { #Exwes leaves EoA later on and becomes a kingdom
					limit = {
						OR = {
							AND = {
								any_known_country = {
									is_emperor = yes
									has_been_insulted_by_root = yes
								}
								NOT = {
									calc_true_if = {
										amount = 4
										all_known_country = {
											is_elector = yes
											has_opinion = {
												who = ROOT
												value = 100
											}
										}
									}
								}
							}
							eoa_is_dismantled = yes
						}
					} 
					set_country_flag = exwes_eoa_slighted
					add_country_modifier = {
						name = exwes_local_support
						duration = 5475
					}
				}
				else_if = { #Small country joins EoA later on (alternative)
					limit = {
						calc_true_if = { #If there are less then 30 nation in EoA then it is too weak to support you anyways so no max bonus even if everyone loves you.
							amount = 30
							all_known_country = {
								is_part_of_hre = yes
								has_opinion = {
									who = ROOT
									value = 100
								}
							}
						}
					} 
					set_country_flag = exwes_eao_small_country
					add_country_modifier = {
						name = exwes_full_imperial_support
						duration = 5475
					}
				}
				else_if = {
					limit = {
						calc_true_if = {
							amount = 20
							all_known_country = {
								is_part_of_hre = yes
								has_opinion = {
									who = ROOT
									value = 100
								}
							}
						}
					}
					add_country_modifier = {
						name = exwes_imperial_support
						duration = 5475
					}
				}
				else_if = {
					limit = {
						calc_true_if = {
							amount = 10
							all_known_country = {
								is_part_of_hre = yes
								has_opinion = {
									who = ROOT
									value = 100
								}
							}
						}
					}
					add_country_modifier = {
						name = exwes_some_imperial_support
						duration = 5475
					}
				}
				else = { #If you asked EoA for support but got no one to support you
					add_country_modifier = {
						name = exwes_local_support
						duration = 5475
					}
				}
			}
		}
	}
	##Mission End
	##Mission Start
	exwes_revenge_on_the_reavers = {
		icon = mission_viking
		required_missions = {
			exwes_the_salmon_brigade
			exwes_liberate_the_small_country
		}
		position = 7
		provinces_to_highlight = {
			OR = {
				area = iochand_area
				area = reaver_coast_area
				AND = {
					owned_by = A05
					superregion = western_cannor_superregion
				}
			}
			NOT = {
				AND = {
					is_core = ROOT
					owned_by = ROOT
				}
			}
		}
		trigger = {
			iochand_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			reaver_coast_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			western_cannor_superregion = {
				type = all
				NOT = {
					owned_by = A05 #Riveria
				}
			}
		}
		effect = {
			if = {
				limit = {
					A02 = { #Deranne
						exists = yes
						capital_scope = {
							region = lencenor_region
						}
						NOT = {
							total_development = 200
						}
					}
				}
				add_casus_belli = {
					type = cb_vassalize_mission
					target = A02
					months = 360
				}
			}
			if = {
				limit = {
					A11 = { #Pearlsedge
						exists = yes
						capital_scope = {
							region = west_dameshead_region
						}
					}
				}
				add_casus_belli = {
					type = cb_insult
					target = A11
					months = 360
				}
			}
			if = {
				limit = {
					A11 = { #Pearlsedge
						OR = {
							exists = no
							NOT = {
								capital_scope = {
									region = west_dameshead_region
								}
							}
						}
					}
				}
				every_known_country = {
					limit = {
						owns = 43 #Pearlsedge
					}
					reverse_add_casus_belli = {
						type = cb_insult
						target = ROOT
						months = 360
					}
				}
			}
			country_event = {
				id = flavour_exwes.5
			}
			custom_tooltip = exwes_revenge_on_the_reavers_tt
		}
	}
	##Mission End
	##Mission Start
	exwes_end_the_reaver_menace = {
		icon = mission_steppe_warriors
		required_missions = {
			exwes_revenge_on_the_reavers
			exwes_secure_the_south
		}
		position = 8
		provinces_to_highlight = {
			OR = {
				AND = {
					culture = derannic
					superregion = western_cannor_superregion
				}
				AND = {
					culture = pearlsedger
					superregion = western_cannor_superregion
				}
			}
			NOT = {
				OR = {
					owned_by = ROOT
					controlled_by = ROOT
				}
			}
		}
		trigger = {
			deranne_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			OR = {
				43 = {
					OR = {
						controlled_by = ROOT
						country_or_non_sovereign_subject_holds = ROOT
					}
				}
				AND = {
					any_known_country = {
						owns = 43
						has_opinion = {
							who = ROOT
							value = 150
						}
					}
					A11 = {
						NOT = {
							owns = 43
						}
					}
				}
			}
		}
		effect = {
			custom_tooltip = exwes_end_the_reaver_menace_tt
			add_adm_power = 100
			add_dip_power = 100
			add_mil_power = 100
			add_power_projection = {
				type = humiliation_of_a_rival
				amount = 30
			}
			every_province = {
				limit = {
					OR = {
						culture = derannic
						culture = pearlsedger
					}
					superregion = western_cannor_superregion
					OR = {
						controlled_by = ROOT
						country_or_non_sovereign_subject_holds = ROOT
					}
				}
				add_random_development = -1
				add_devastation = 10
				ROOT = {
					add_treasury = 50
				}
				if = {
					limit = {
						NOT = {
							owned_by = ROOT
						}
					}
					owner = {
						add_opinion = {
							who = ROOT
							modifier = exwes_looted_our_lands
						}
					}
				}
			}
		}
	}
	##Mission End
	##Mission Start
	exwes_king_salmon_corps = {
		icon = mission_marines
		required_missions = {
			exwes_grand_naval_buildup
			exwes_end_the_reaver_menace
			exwes_secure_whaling_ports
		}
		position = 9
		provinces_to_highlight = { 
			AND = {
				is_capital = yes
				owner = {
					num_of_heavy_ship = ROOT
					num_of_heavy_ship = 1
				}
			}
			NOT = {
				owned_by = ROOT
			}
		}
		trigger = {
			navy_size = 300
			custom_trigger_tooltip = {
				tooltip = exwes_king_salmon_corps_tt4
				all_known_country = {
					if = {
						limit = {
							capital_scope = {
								continent = europe
								NOT = {
								owned_by = ROOT
								}
							}
						}
						NOT = {
							num_of_heavy_ship = ROOT
						}
					}
				}
			}
		}
		effect = {
			remove_country_modifier = exwes_the_salmon_brigade
			remove_country_modifier = exwes_militia_expanded
			add_country_modifier = {
				name = exwes_king_salmon_corps
				duration = -1
			}
			if = {
				limit = {
					has_dlc = "Emperor"
				}
				custom_tooltip = exwes_king_salmon_corps_tt
			}
			else = {
				custom_tooltip = exwes_king_salmon_corps_tt2
			}
			if = {
				limit = {
					OR = {
						AND = {
							is_hegemon_of_type = naval_hegemon
							has_dlc = "Emperor"
						}
						AND = {
							NOT = {
								has_dlc = "Emperor"
							}
							navy_size = 500
							any_known_country = {
								NOT = {
									num_of_heavy_ship = ROOT
								}
							}
						}
					}
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				add_country_modifier = {
					name = exwes_legendary_corps
					duration = -1
				}
			}
			custom_tooltip = mission_alternatively_tt
			if = {
				limit = {
					has_dlc = "Emperor"
				}
				custom_tooltip = exwes_king_salmon_corps_tt1
			}
			else = {
				custom_tooltip = exwes_king_salmon_corps_tt3
			}
			if = {
				limit = {
					NOT = {
						OR = {
							AND = {
								is_hegemon_of_type = naval_hegemon
								has_dlc = "Emperor"
							}
							AND = {
								NOT = {
									has_dlc = "Emperor"
								}
								navy_size = 500
								any_known_country = {
									NOT = {
										num_of_heavy_ship = ROOT
									}
								}
							}
						}
					}
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				add_country_modifier = {
					name = exwes_corps_expanded
					duration = -1
				}
			}
			hidden_effect = {
				if = {
					limit = {
						OR = {
							AND = {
								is_hegemon_of_type = naval_hegemon
								has_dlc = "Emperor"
							}
							AND = {
								NOT = {
									has_dlc = "Emperor"
								}
								navy_size = 500
								any_known_country = {
									NOT = {
										num_of_heavy_ship = ROOT
									}
								}
							}
						}
					}
					add_country_modifier = {
						name = exwes_legendary_corps
						duration = -1
					}
				}
				else = {
					add_country_modifier = {
						name = exwes_corps_expanded
						duration = -1
					}
				}
			}
		}
	}
	##Mission End
	##
	
}
##BranchEnd 1
##BranchStart 2
Exwes_3_missions = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		tag = A40
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	
	##Mission Start
	exwes_halfling_troubles = {
		icon = mission_expel_the_moriscos
		required_missions = {
			exwes_post_damerian_balance
			exwes_exwesser_resurgence
		}
		position = 2
		provinces_to_highlight = {
			OR = {
				AND = {
					province_id = 157 #Orson
					NOT = {
						AND = {
							num_of_buildings_in_province = 1
							OR = {
								is_core = A12 #Beepeck
								is_claim = A12
								is_permanent_claim = A12
								155 = {
									owned_by = ROOT
									is_core = ROOT
								}
							}
						}
					}
				}
				AND = {
					province_id = 155 #Westmarsh
					NOT = {
						OR = {
							AND = {
								owned_by = ROOT
								is_core = ROOT
							}
							157 = {
								OR = {
									is_core = A12 #Beepeck
									is_claim = A12
									is_permanent_claim = A12
								}
							}
						}
					}
				}
			}
		}
		trigger = {
			157 = { #Orson
				AND = {
					num_of_buildings_in_province = 1
					owned_by = ROOT
					is_core = ROOT
				}
			}
			OR = {
				155 = { #Westmarsh
					owned_by = ROOT
					is_core = ROOT
				}
				157 = { #Orson
					OR = {
						is_core = A12 #Beepeck
						is_claim = A12
						is_permanent_claim = A12
					}
				}
			}
		}
		effect = {
			beepeck_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { owned_by = ROOT }
				}
				add_permanent_claim = ROOT
			}
			add_casus_belli = {
				type = cb_vassalize_mission
				target = A12
				months = 360
			}
			if = {
				limit = {
					157 = {
						NOT = {
							OR = {
								is_core = A12
								is_permanent_claim = A12
							}
						}
					}
				}
				157 = {
					add_permanent_claim = A12
				}
			}
			anb_add_accepted_culture_or_dip_power = {
				culture = imperial_halfling
				dip_reward = yes
			}
			small_increase_of_halfling_tolerance_effect = yes
		}
	}
	##Mission End
	##Mission Start
	exwes_seizing_the_saltmarsh = {
		icon = mission_serfdom
		required_missions = {
			exwes_halfling_troubles
		}
		position = 3
		provinces_to_highlight = {
			OR = {
				area = beepeck_area
				AND = {
					owned_by = A12
					superregion = western_cannor_superregion
				}
			}
			NOT = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		trigger = {
			beepeck_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			A12 = {
				OR = {
					is_subject_of = PREV
					exists = no
					NOT = {
						any_owned_province = {
							superregion = western_cannor_superregion
						}
					}
				}
			}
		}
		effect = {
			custom_tooltip = exwes_seizing_the_saltmarsh_tt
			add_prestige = 10
			add_legitimacy = 10
			small_increase_of_halfling_tolerance_effect = yes
			beepeck_area = {
				limit = {
					is_core = ROOT
					owned_by = ROOT
				}
				add_nationalism = -10
			}
			A12 = { #Beepeck
				if = {
					limit = {
						is_subject_of = PREV
					}
					add_opinion = {
					who = ROOT
					modifier = exwes_placated
					}
					add_trust = {
						who = A12
						value = 10
					}
					add_liberty_desire = -30
					if = {
						limit = {
							ai = yes
						}
						complete_mission = A12_petition_the_emperor
					}
				}
			}
		}
	}
	##Mission End
	##Mission Start
	exwes_claiming_the_small_country = {
		icon = catholic_volunteers
		required_missions = {
			exwes_seize_lasean
			exwes_seizing_the_saltmarsh
			exwes_conquer_the_brow
		}
		position = 4
		provinces_to_highlight = {
			OR = {
				AND = {
					is_capital = yes
					superregion = western_cannor_superregion
					culture_group = halfling
					NOT = {
						owner = {
							has_opinion = {
								who = ROOT
								value = 50
							}
						}
					}
				}
				AND = {
					is_capital = yes
					owned_by = A12
					NOT = {
						owner = {
							has_opinion = {
								who = ROOT
								value = 100
							}
						}
					}
					owner = {
						is_subject_of = ROOT
					}
				}
			}
		}
		trigger = {
			custom_trigger_tooltip = {
				tooltip = exwes_claiming_the_small_country_tt
				all_known_country = {
					if = {
						limit = {
							culture_group = halfling
							capital_scope = {
								superregion = western_cannor_superregion
							}
							NOT = {
								tag = A97 #Small Country
							}
						}
						has_opinion = {
							who = ROOT
							value = 50
						}
					}
				}
			}
			A12 = {
				if = {
					limit = {
						is_subject_of = PREV
					}
					has_opinion = {
						who = ROOT
						value = 100
					}
				}
			}
			OR = {
				army_strength = {
					who = A01 #Lorent
					value = 0.65
				}
				army_strength = {
					who = A13 #Gawed
					value = 0.65
				}
				AND = {
					A01 = {
						exists = no
					}
					A13 = {
						exists = no
					}
					army_size = 30
				}
			}
			high_tolerance_halfling_race_trigger = yes
			NOT = {
				OR = {
					has_country_modifier = racial_pop_halfling_expulsion
					has_country_modifier = racial_pop_halfling_purge
				}
			}
		}
		effect = {
			if = {
				limit = {
					NOT = {
						dynasty = Silcalas
					}
				}
				custom_tooltip = exwes_claiming_the_small_country_tt1
				hidden_effect = {
					country_event = {
						id = flavour_exwes.16
					}
				}
			}
			hidden_effect = {
				change_government = monarchy
				153 = { #Exwes
					add_province_triggered_modifier = exwes_small_country
				}
			}
			add_government_reform = exwesser_monarchy_reform
			small_country_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { owned_by = ROOT }
				}
				add_permanent_claim = ROOT
			}
			large_increase_of_halfling_tolerance_effect = yes
			add_historical_rival = A97 #Small Country
			A97 = {
				add_historical_rival = ROOT
			}
		}
	}
	##Mission End
	##Mission Start
	exwes_backing_your_claim = {
		icon = establish_oktoberfest
		required_missions = {
			exwes_claiming_the_small_country
		}
		position = 5
		provinces_to_highlight = {
			AND = {
				OR = {
					culture = redfoot_halfling
					culture = bluefoot_halfling
					culture = visfoot_halfling
				}
				superregion = western_cannor_superregion
			}
			NOT = {
				OR = {
					ROOT = {
						num_of_owned_provinces_with = {
							value = 12
							superregion = western_cannor_superregion
							OR = {
								culture = redfoot_halfling
								culture = bluefoot_halfling
								culture = visfoot_halfling
							}
						}
					}
					AND = {
						owned_by = ROOT
						is_core = ROOT
					}
				}
			}
		}
		trigger = {
			num_of_owned_provinces_with = {
				value = 12
				superregion = western_cannor_superregion
				OR = {
					culture = redfoot_halfling
					culture = bluefoot_halfling
					culture = visfoot_halfling
				}
			}
		}
		effect = {
			hidden_effect = {
				set_variable = {
					which = exwes_manpower
					value = 0
				}
				set_variable = {
					which = exwes_manpower_tt
					value = 0
				}
				country_event = { #Renewed vigor
					id = flavour_exwes.7
				}
			}
			tooltip = {
				country_event_with_insight = {
					id = flavour_exwes.7
					insight_tooltip = INSIGHT_JUST_TOOLTIP
					effect_tooltip = "
					add_country_modifier = {
						name = exwes_renewed_vigor
						duration = 10950
					}"
				}
			}
			custom_tooltip = exwes_backing_your_claim_tt
		}
	}
	##Mission End
	##Mission Start
	exwes_liberate_the_small_country = {
		icon = mission_unite_the_small_country
		required_missions = {
			exwes_rallying_support
			exwes_backing_your_claim
			exwes_unite_viswall
		}
		position = 6
		provinces_to_highlight = {
			region = small_country_region
			NOT = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		trigger = {
			small_country_region = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			southroy_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { owned_by = ROOT }
				}
				add_permanent_claim = ROOT
			}
			ionnidar_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { owned_by = ROOT }
				}
				add_permanent_claim = ROOT
			}
			redglades_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { owned_by = ROOT }
				}
				add_permanent_claim = ROOT
			}
			iochand_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { owned_by = ROOT }
				}
				add_permanent_claim = ROOT
			}
			reaver_coast_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { owned_by = ROOT }
				}
				add_permanent_claim = ROOT
			}
			gnomish_pass_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { owned_by = ROOT }
				}
				add_permanent_claim = ROOT
			}
			dragonhills_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { owned_by = ROOT }
				}
				add_permanent_claim = ROOT
			}
			tooltip = {
				country_event_with_insight = {
					id = flavour_exwes.8
					insight_tooltip = INSIGHT_JUST_TOOLTIP
					effect_tooltip = "
					add_country_modifier = {
						name = exwes_integrated_halflings
						duration = -1
					}
					add_stability = 1
					custom_tooltip = flavour_exwes.8_tt1"
				}
			}
			custom_tooltip = exwes_liberate_the_small_country_tt
			hidden_effect = {
				country_event = { #Exwes liberates the Small Country
					id = flavour_exwes.8
				}
				153 = { #Exwes 
					remove_province_triggered_modifier = exwes_small_country #If you complete the mission this should be redudant thus gets removed
				}
			}
		}
	}
	##Mission End
	##Mission Start
	exwes_secure_the_south = {
		icon = mission_great_wall
		required_missions = {
			exwes_liberate_the_small_country
		}
		position = 7
		provinces_to_highlight = {
			OR = {
				area = southroy_area
				area = redglades_area
				area = ionnidar_area
				AND = {
					is_capital_of = A01 
					A01 = {
						total_development = ROOT
						any_owned_province = {
							superregion = western_cannor_superregion
						}
					}
					NOT = {
						lencenor_region = {
							type = all
							country_or_non_sovereign_subject_holds = ROOT
						}
					}
				}
			}
			NOT = {
				AND = {
					country_or_non_sovereign_subject_holds = ROOT
					OR = {
						AND = {
							has_influencing_fort = yes
							province_has_current_tech_fort_trigger = yes
						}
						any_neighbor_province = {
							has_influencing_fort = yes
							province_has_current_tech_fort_trigger = yes
						}
					}
				} 
			}
		}
		trigger = {
			southroy_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
				OR = {
					AND = {
						has_influencing_fort = yes
						province_has_current_tech_fort_trigger = yes
					}
					any_neighbor_province = {
						has_influencing_fort = yes
						province_has_current_tech_fort_trigger = yes
					}
				}
			}
			redglades_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
				OR = {
					AND = {
						has_influencing_fort = yes
						province_has_current_tech_fort_trigger = yes
					}
					any_neighbor_province = {
						has_influencing_fort = yes
						province_has_current_tech_fort_trigger = yes
					}
				}
			}
			ionnidar_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
				OR = {
					AND = {
						has_influencing_fort = yes
						province_has_current_tech_fort_trigger = yes
					}
					any_neighbor_province = {
						has_influencing_fort = yes
						province_has_current_tech_fort_trigger = yes
					}
				}
			}
			OR = {
				total_development = A01
				A01 = {
					NOT = {
						any_owned_province = {
							superregion = western_cannor_superregion
						}
					}
				}
				lencenor_region = {
					type = all
					country_or_non_sovereign_subject_holds = ROOT
				}
			}
		}
		effect = {
			venail_area = {
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { owned_by = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			169 = {
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { owned_by = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			deranne_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { owned_by = ROOT }
				}
				add_permanent_claim = ROOT
			}
			add_country_modifier = {
				name = exwes_eclipse_lencenor
				duration = 10950
			}
		}
	}
	##Mission End
	##Mission Start
	exwes_secure_whaling_ports = {
		icon = mission_danzig_or_war
		required_missions = {
			exwes_revenge_on_the_reavers
			exwes_secure_the_south
			exwes_restore_the_north
		}
		position = 8
		provinces_to_highlight = {
			OR = {
				area = dragonpoint_area
				area = dragondowns_area
				area = dragonspine_area
				area = storm_isles_area
				area = venail_area
				area = lonely_isle_area
			}
			NOT = {
				AND = {
					owned_by = ROOT
					is_core = ROOT
					NOT = {
						AND = {
							province_id = 1 #far isle
							province_id = 169 #nimscodd
							province_id = 190 #storm isle
							province_id = 1001 #lonely isle
						}
					}
				}
			}
			NOT = {
				1 = {
					owned_by = ROOT
					is_core = ROOT
					OR = {
						AND = {
							has_building = grand_shipyard
							has_building = drydock
						}
						AND = {
							OR = {
								AND = {
									has_shipyard_building_trigger = yes
									has_building = drydock
								}
								AND = {
									has_dock_building_trigger = yes
									has_building = grand_shipyard
								}
							}
							base_production = 5
						}
						AND = {
							has_shipyard_building_trigger = yes
							has_dock_building_trigger = yes
							base_production = 8
						}
					}
				}
			}
			NOT = {
				169 = {
					owned_by = ROOT
					is_core = ROOT
					OR = {
						AND = {
							has_building = grand_shipyard
							has_building = drydock
						}
						AND = {
							OR = {
								AND = {
									has_shipyard_building_trigger = yes
									has_building = drydock
								}
								AND = {
									has_dock_building_trigger = yes
									has_building = grand_shipyard
								}
							}
							base_production = 5
						}
						AND = {
							has_shipyard_building_trigger = yes
							has_dock_building_trigger = yes
							base_production = 8
						}
					}
				}
			}
			NOT = {
				190 = {
					owned_by = ROOT
					is_core = ROOT
					OR = {
						AND = {
							has_building = grand_shipyard
							has_building = drydock
						}
						AND = {
							OR = {
								AND = {
									has_shipyard_building_trigger = yes
									has_building = drydock
								}
								AND = {
									has_dock_building_trigger = yes
									has_building = grand_shipyard
								}
							}
							base_production = 5
						}
						AND = {
							has_shipyard_building_trigger = yes
							has_dock_building_trigger = yes
							base_production = 8
						}
					}
				}
			}
			NOT = {
				1001 = {
					owned_by = ROOT
					is_core = ROOT
					OR = {
						AND = {
							has_building = grand_shipyard
							has_building = drydock
						}
						AND = {
							OR = {
								AND = {
									has_shipyard_building_trigger = yes
									has_building = drydock
								}
								AND = {
									has_dock_building_trigger = yes
									has_building = grand_shipyard
								}
							}
							base_production = 5
						}
						AND = {
							has_shipyard_building_trigger = yes
							has_dock_building_trigger = yes
							base_production = 8
						}
					}
				}
			}
		}
		trigger = {
			storm_isles_area = {
				owned_by = ROOT
				is_core = ROOT
			}
			169 = {
				owned_by = ROOT
				is_core = ROOT
			}
			dragondowns_area = {
				owned_by = ROOT
				is_core = ROOT
			}
			dragonpoint_area = {
				owned_by = ROOT
				is_core = ROOT
			}
			dragonspine_area = {
				owned_by = ROOT
				is_core = ROOT
			}
			lonely_isle_area = {
				owned_by = ROOT
				is_core = ROOT
			}
			venail_area = {
				owned_by = ROOT
				is_core = ROOT
			}
			1 = { #far isle
				custom_trigger_tooltip = {
					tooltip = exwes_secure_whaling_ports_tt
					OR = {
						AND = {
							has_building = grand_shipyard
							has_building = drydock
						}
						AND = {
							OR = {
								AND = {
									has_shipyard_building_trigger = yes
									has_building = drydock
								}
								AND = {
									has_dock_building_trigger = yes
									has_building = grand_shipyard
								}
							}
							base_production = 5
						}
						AND = {
							has_shipyard_building_trigger = yes
							has_dock_building_trigger = yes
							base_production = 8
						}
					}
				}
			}
			169 = { #nimscodd
				custom_trigger_tooltip = {
					tooltip = exwes_secure_whaling_ports_tt
					OR = {
						AND = {
							has_building = grand_shipyard
							has_building = drydock
						}
						AND = {
							OR = {
								AND = {
									has_shipyard_building_trigger = yes
									has_building = drydock
								}
								AND = {
									has_dock_building_trigger = yes
									has_building = grand_shipyard
								}
							}
							base_production = 5
						}
						AND = {
							has_shipyard_building_trigger = yes
							has_dock_building_trigger = yes
							base_production = 8
						}
					}
				}
			}
			190 = { #storm isle
				custom_trigger_tooltip = {
					tooltip = exwes_secure_whaling_ports_tt
					OR = {
						AND = {
							has_building = grand_shipyard
							has_building = drydock
						}
						AND = {
							OR = {
								AND = {
									has_shipyard_building_trigger = yes
									has_building = drydock
								}
								AND = {
									has_dock_building_trigger = yes
									has_building = grand_shipyard
								}
							}
							base_production = 5
						}
						AND = {
							has_shipyard_building_trigger = yes
							has_dock_building_trigger = yes
							base_production = 8
						}
					}
				}
			}
			1001 = { #lonely isle
				custom_trigger_tooltip = {
					tooltip = exwes_secure_whaling_ports_tt
					OR = {
						AND = {
							has_building = grand_shipyard
							has_building = drydock
						}
						AND = {
							OR = {
								AND = {
									has_shipyard_building_trigger = yes
									has_building = drydock
								}
								AND = {
									has_dock_building_trigger = yes
									has_building = grand_shipyard
								}
							}
							base_production = 5
						}
						AND = {
							has_shipyard_building_trigger = yes
							has_dock_building_trigger = yes
							base_production = 8
						}
					}
				}
			}
		}
		effect = {
			1 = { #far isle
				change_culture = ROOT
				change_religion = ROOT
				change_trade_goods = fish
				add_permanent_province_modifier = {
					name = exwes_whaling_port
					duration = -1
				}
			}
			169 = { #nimscodd
				change_culture = ROOT
				change_religion = ROOT
				change_trade_goods = fish
				add_permanent_province_modifier = {
					name = exwes_whaling_port
					duration = -1
				}
			}
			190 = { #storm isle
				change_culture = ROOT
				change_religion = ROOT
				change_trade_goods = fish
				add_permanent_province_modifier = {
					name = exwes_whaling_port
					duration = -1
				}
			}
			1001 = { #lonely isle
				change_culture = ROOT
				change_religion = ROOT
				change_trade_goods = fish
				add_permanent_province_modifier = {
					name = exwes_whaling_port
					duration = -1
				}
			}
			unlock_estate_privilege = {
				estate_privilege = estate_burghers_exwes_leading_naval_supplier
			}
			country_event = { #The gnomes of Nimscodd
				id = flavour_exwes.9
			}
			custom_tooltip = exwes_secure_whaling_ports_tt1
		}
	}
	##Mission End
	##Mission Start
	exwes_large_small_country = {
		icon = mission_expand_into_the_forest
		required_missions = {
			exwes_end_the_reaver_menace
			exwes_reorient_back_home
		}
		position = 9
		provinces_to_highlight = {
			OR = {
				AND = {
					area = exwes_area
					NOT = {
						AND = {
							owned_by = ROOT
							is_core = ROOT
						}
					}
				}
				AND = {
					area = beepeck_area
					NOT = {
						AND = {
							owned_by = ROOT
							is_core = ROOT
						}
					}
				}
				AND = {
					area = uelaire_area
					NOT = {
						AND = {
							owned_by = ROOT
							is_core = ROOT
						}
					}
				}
				AND = {
					region = small_country_region
					NOT = {
						AND = {
							ROOT = {
								development_in_provinces = {
									value = 500
									region = small_country_region
								}
							}
							owned_by = ROOT
							is_core = ROOT
						}
					}
				}
				AND = {
					superregion = western_cannor_superregion
					owned_by = ROOT
					is_core = ROOT
					culture = exwesser
					NOT = {
						ROOT = {
							development_in_provinces = {
								value = 250
								culture = exwesser
								superregion = western_cannor_superregion
							}
						}
					}
				}
				AND = {
					superregion = western_cannor_superregion
					owned_by = ROOT
					is_core = ROOT
					culture_group = halfling
					NOT = {
						region = small_country_region
					}
					NOT = {
						ROOT = {
							development_in_provinces = {
								value = 250
								culture_group = halfling
								superregion = western_cannor_superregion
								NOT = {
									region = small_country_region
								}
							}
						}
					}
				}
			}
		}
		trigger = {
			development_in_provinces = {
				value = 500
				region = small_country_region
			}
			development_in_provinces = {
				value = 250
				culture = exwesser
				superregion = western_cannor_superregion
			}
			development_in_provinces = {
				value = 250
				culture_group = halfling
				superregion = western_cannor_superregion
				NOT = {
					region = small_country_region
				}
			}
			small_country_region = {
				type = all
				is_core = ROOT
				owned_by = ROOT
			}
			exwes_area = {
				type = all
				is_core = ROOT
				owned_by = ROOT
			}
			beepeck_area = {
				type = all
				is_core = ROOT
				owned_by = ROOT
			}
			uelaire_area = {
				type = all
				is_core = ROOT
				owned_by = ROOT
			}
		}
		effect = {
			small_country_region = {
				add_permanent_province_modifier = {
					name = exwes_halfling_architecture
					duration = -1
				}
			}
			exwes_area = {
				add_permanent_province_modifier = {
					name = exwes_halfling_architecture
					duration = -1
				}
			}
			beepeck_area = {
				add_permanent_province_modifier = {
					name = exwes_halfling_architecture
					duration = -1
				}
			}
			uelaire_area = {
				add_permanent_province_modifier = {
					name = exwes_halfling_architecture
					duration = -1
				}
			}
		}
	}
	##Mission End
	##
	
}
##BranchEnd 2
##BranchStart 3
Exwes_4_missions = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		tag = A40
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	
	##Mission Start
	exwes_exwesser_resurgence = {
		icon = the_italian_league
		required_missions = { } #NO
		position = 1
		provinces_to_highlight = {
			OR = {
				AND = {
					owned_by = ROOT
					NOT = {
						ROOT = {
							has_institution = renaissance
							grown_by_development = 25
						}
					}
				}
				AND = {
					is_capital_of = A12 #Beepeck
					NOT = {
						ROOT = {
							army_size = A12
						}
					}
				}
				AND = {
					is_capital_of = A76 #Uelaire
					NOT = {
						ROOT = {
							army_size = A76
						}
					}
				}
			}
		}
		trigger = {
			grown_by_development = 25
			has_institution = renaissance
			army_size = A12
			army_size = A76
			army_size = 20
		}
		effect = {
			uelaire_area = {
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { owned_by = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			floodmarches_area = {
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { owned_by = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			tooltip = {
				country_event_with_insight = {
					id = flavour_exwes.10
					insight_tooltip = INSIGHT_JUST_TOOLTIP
					effect_tooltip = "
					add_country_modifier = {
						name = exwes_exwesser_renaissance
						duration = 10950
					}"
				}
			}
			hidden_effect = {
				country_event = { #Recognized rivalry
					id = flavour_exwes.10
				}
			}
		}
	}
	##Mission End
	##Mission Start
	exwes_conquer_the_brow = {
		icon = mission_conquer_uelaire
		required_missions = {
			exwes_exwesser_resurgence
		}
		position = 3
		provinces_to_highlight = {
			OR = { 
				province_id = 207 #dame's forhead without westmare
				province_id = 209
				province_id = 347
				area = floodmarches_area
			}
			NOT = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		trigger = {
			207 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			209 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			347 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			floodmarches_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			derwing_area = {
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { owned_by = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			vertesk_area = {
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { owned_by = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			custom_tooltip = exwes_conquer_the_brow_tt
			if = {
				limit = {
					OR = {
						AND = {
							ROOT = {
								accepted_culture = uelairey
							}
							207 = {
								owned_by = ROOT
							}
							209 = {
								owned_by = ROOT
							}
							347 = {
								owned_by = ROOT
							}
							floodmarches_area = {
								type = all
								owned_by = ROOT
							}
						}
						AND = {
							A76 = {
								is_subject = yes
							}
							207 = {
								owned_by = A76
							}
							209 = {
								owned_by = A76
							}
							347 = {
								owned_by = A76
							}
							floodmarches_area = {
								type = all
								owned_by = A76
							}
						}
					}
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				floodmarches_area = {
					add_nationalism = -5
					change_culture = uelairey
				}
				if = {
					limit = {
						207 = {
							owned_by = ROOT
						}
						209 = {
							owned_by = ROOT
						}
						347 = {
							owned_by = ROOT
						}
					}
					uelaire_area = {
						limit = {
							owned_by = ROOT
						}
						add_nationalism = -5
					}
				}
				if = {
					limit = {
						A76 = {
							is_subject_of = PREV
						}
					}
					A76 = {
						add_liberty_desire = -30
					}
				}
			}
			hidden_effect = {
				if = { #uelairey collaborators
					limit = {
						ROOT = {
							accepted_culture = uelairey
						}
						207 = {
							owned_by = ROOT
						}
						209 = {
							owned_by = ROOT
						}
						347 = {
							owned_by = ROOT
						}
						floodmarches_area = {
							type = all
							owned_by = ROOT
						}
					}
					uelaire_area = {
						limit = {
							owned_by = ROOT
						}
						add_nationalism = -5
					}
					floodmarches_area = {
						add_nationalism = -5
						change_culture = uelairey
					}
				}
				else_if = { #uelairey collaborators as subject
					limit = {
						A76 = {
							is_subject_of = PREV
						}
						207 = {
							owned_by = A76
						}
						209 = {
							owned_by = A76
						}
						347 = {
							owned_by = A76
						}
						floodmarches_area = {
							type = all
							owned_by = A76
						}
					}
					floodmarches_area = {
						add_nationalism = -5
						change_culture = uelairey
					}
					A76 = {
						add_liberty_desire = -30
					}
				}
			}
		}
	}
	##Mission End
	##Mission Start
	exwes_salt_monopoly = {
		icon = mission_entrepot_of_india
		required_missions = {
			exwes_seizing_the_saltmarsh
			exwes_conquer_the_brow
		}
		position = 4
		provinces_to_highlight = {
			OR = {
				AND = {
					area = floodmarches_area
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				AND = {
					province_id = 155 #Westmarsh
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				AND = {
					province_id = 60 #Eastmarsh
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				AND = {
					AND = {
						is_capital = yes
						superregion = western_cannor_superregion
						owner = {
							any_owned_province = {
								continent = europe
								trade_goods = salt
								NOT = {
									owned_by = ROOT
								}
							}
							NOT = {
								has_country_modifier = monstrous_nation
							}
						}
					}
					NOT = {
						calc_true_if = {
							amount = 1
							ROOT = {
								all_known_country = {
									capital_scope = {
										continent = europe
									}
									NOT = {
										has_country_modifier = monstrous_nation
									}
									any_owned_province = {
										continent = europe
										trade_goods = salt
									}
									has_opinion = {
										who = ROOT
										value = 100
									}
								}
							}
						}
					}
				}
			}
		}
		trigger = {
			155 = { #Westmarsh
				owned_by = ROOT
				is_core = ROOT
				NOT = {
					has_construction = any
				}
			}
			60 = { #Eastmarsh
				owned_by = ROOT
				is_core = ROOT
			}
			214 = { #South Floodmarshes
				owned_by = ROOT
				is_core = ROOT
				NOT = {
					has_construction = any
				}
			}
			215 = { #North Floodmarshes
				owned_by = ROOT
				is_core = ROOT
			}
			custom_trigger_tooltip = {
				tooltip = exwes_salt_monopoly_tt
				any_known_country = {
					capital_scope = {
						continent = europe
					}	
					NOT = {
						has_country_modifier = monstrous_nation
					}
					any_owned_province = {
						continent = europe
						trade_goods = salt
					}
					has_opinion = {
						who = ROOT
						value = 100
					}
				}
			}
			treasury = 600
		}
		effect = {
			add_treasury = -600
			155 = { #Westmarsh
				add_building_construction = {
					building = wharf
					cost = 0
					speed = 0.5
				}
			}
			214 = { #South Floodmarsh
				add_building_construction = {
					building = wharf
					cost = 0
					speed = 0.5
				}
			}
			custom_tooltip = exwes_salt_monopoly_tt1
			tooltip = {
				add_permanent_province_modifier = {
					name = exwes_cannorian_salt_monopoly
					duration = 10950
				}
			}
			hidden_effect = {
				every_province = { #conspiritor also gets bonus
				limit = {
					trade_goods = salt
					continent = europe
					owner = {
						has_opinion = {
							who = ROOT
							value = 100
						}
					}
				}
				add_permanent_province_modifier = {
					name = exwes_cannorian_salt_monopoly
					duration = 10950
				}
			}
			}
		}
	}
	##Mission End
	##Mission Start
	exwes_unite_viswall = {
		icon = reclaim_the_ducal_lands
		required_missions = {
			exwes_claiming_the_small_country
		}
		position = 5
		provinces_to_highlight = {
			area = viswall_area
			NOT = {
				AND = {
					country_or_non_sovereign_subject_holds = ROOT
					num_of_buildings_in_province = 4
				}
			}
		}
		trigger = {
			accepted_culture = visfoot_halfling
			viswall_area = {
				type = all
				NOT = {
					local_autonomy = 10
				}
				country_or_non_sovereign_subject_holds = ROOT
				num_of_buildings_in_province = 4
				has_manufactory_trigger = yes
				development = 30
			}
		}
		effect = {
			medium_increase_of_halfling_tolerance_effect = yes
			#if = { Will be uncommented if Rainbow Hall monument gets added and will be removed if not.
			#	limit = {
			#		has_dlc = "Leviathan"
			#	}
			#	custom_tooltip = exwes_unite_viswall_tt
			#	viswall_area = { #I will figure this out if Rainbow Hall gets added
			#		add_base_tax = 1
			#		add_base_production = 1
			#		add_base_manpower = 1
			#	}
			#}
			#else = {
				viswall_area = {
					add_permanent_province_modifier = {
						name = exwes_the_rainbow_hall
						duration = -1
					}
				}
			#}
		}
	}
	##Mission End
	##Mission Start
	exwes_restore_the_north = {
		icon = alpine_fortifications
		required_missions = {
			exwes_liberate_the_small_country
		}
		position = 7
		provinces_to_highlight = {
			OR = {
				area = gnomish_pass_area
				area = dragonhills_area
				area = floodmarches_area
				AND = {
					is_capital_of = A13 #Gawed
					A13 = {
						total_development = ROOT
						any_owned_province = {
							superregion = western_cannor_superregion
						}
					}
					NOT = {
						alenic_reach_region = {
							type = all
							country_or_non_sovereign_subject_holds = ROOT
						}
					}
				}
			}
			NOT = {
				AND = {
					country_or_non_sovereign_subject_holds = ROOT
					OR = {
						AND = {
							has_influencing_fort = yes
							province_has_current_tech_fort_trigger = yes
						}
						any_neighbor_province = {
							has_influencing_fort = yes
							province_has_current_tech_fort_trigger = yes
						}
					}
				} 
			}
		}
		trigger = {
			gnomish_pass_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
				OR = {
					AND = {
						has_influencing_fort = yes
						province_has_current_tech_fort_trigger = yes
					}
					any_neighbor_province = {
						has_influencing_fort = yes
						province_has_current_tech_fort_trigger = yes
					}
				}
			}
			dragonhills_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
				OR = {
					AND = {
						has_influencing_fort = yes
						province_has_current_tech_fort_trigger = yes
					}
					any_neighbor_province = {
						has_influencing_fort = yes
						province_has_current_tech_fort_trigger = yes
					}
				}
			}
			floodmarches_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
				OR = {
					AND = {
						has_influencing_fort = yes
						province_has_current_tech_fort_trigger = yes
					}
					any_neighbor_province = {
						has_influencing_fort = yes
						province_has_current_tech_fort_trigger = yes
					}
				}
			}
			OR = {
				total_development = A13
				A13 = {
					NOT = {
						any_owned_province = {
							superregion = western_cannor_superregion
						}
					}
				}
				alenic_reach_region = {
					type = all
					country_or_non_sovereign_subject_holds = ROOT
				}
			}
		}
		effect = {
			storm_isles_area = {
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { owned_by = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			lonely_isle_area = {
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { owned_by = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			dragondowns_area = {
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { owned_by = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			dragonpoint_area = {
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { owned_by = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			dragonspine_area = {
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { owned_by = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			add_country_modifier = {
				name = exwes_gawedi_defeat
				duration = 10950
			}
		}
	}
	##Mission End
	##Mission Start
	exwes_reorient_back_home = {
		icon = mission_conquer_riga
		required_missions = {
			exwes_secure_the_south
			exwes_restore_the_north
		}
		position = 8
		provinces_to_highlight = {
			OR = {
				area = exwes_area
				area = beepeck_area
				area = uelaire_area
			}
			NOT = {
				AND  = {
					if = {
						limit = {
							has_dlc = "Mandate of Heaven"
						}
						is_prosperous = yes
					}
					owned_by = ROOT
					is_core = ROOT
					num_of_buildings_in_province = 4
				}
			}
		}
		trigger = {
			if = {
				limit = {
					NOT = {
						has_dlc = "Mandate of Heaven"
					}
				}
				adm_power = 150
			}
			else_if = {
				limit = {
					calc_true_if = {
						all_states = {
							is_prosperous = yes
							OR = {
								area = exwes_area
								area = beepeck_area
								area = uelaire_area
							}
						}
						amount = 13
					}
				}
				adm_power = 0
			}
			else_if = {
				limit = {
					calc_true_if = {
						all_states = {
							is_prosperous = yes
							OR = {
								area = exwes_area
								area = beepeck_area
								area = uelaire_area
							}
						}
						amount = 2
					}
				}
				adm_power = 100
			}
			else_if = {
				limit = {
					calc_true_if = {
						all_states = {
							is_prosperous = yes
							OR = {
								area = exwes_area
								area = beepeck_area
								area = uelaire_area
							}
						}
						amount = 1
					}
				}
				adm_power = 200
			}
			else = {
				adm_power = 300
			}
			if = {
				limit = {
					has_dlc = "Mandate of Heaven"
				}
				custom_trigger_tooltip = {
					tooltip = exwes_reorient_back_home_tt
					OR = {
						calc_true_if = {
							all_states = {
								is_prosperous = yes
								OR = {
									area = exwes_area
									area = beepeck_area
									area = uelaire_area
								}
							}
							amount = 3
						}
						AND = {
							calc_true_if = {
								all_states = {
									is_prosperous = yes
									OR = {
										area = exwes_area
										area = beepeck_area
										area = uelaire_area
									}
								}
								amount = 2
							}
							adm_power = 100
						}
						AND = {
							calc_true_if = {
								all_states = {
									is_prosperous = yes
									OR = {
										area = exwes_area
										area = beepeck_area
										area = uelaire_area
									}
								}
								amount = 1
							}
							adm_power = 200
						}
						adm_power = 300
					}
				}
			}
			exwes_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
				num_of_buildings_in_province = 4
			}
			beepeck_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
				num_of_buildings_in_province = 4
			}
			uelaire_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
				num_of_buildings_in_province = 4
			}
		}
		effect = {
			add_country_modifier = {
				name = exwes_expanding_settlements
				duration = 10950
			}
			if = {
				limit = {
					NOT = {
						has_dlc = "Mandate of Heaven"
					}
				}
				add_adm_power = -150
			}
			else_if = {
				limit = {
					calc_true_if = {
						all_states = {
							is_prosperous = yes
							OR = {
								area = exwes_area
								area = beepeck_area
								area = uelaire_area
							}
						}
						amount = 3
					}
				}
				add_adm_power = 0
			}
			else_if = {
				limit = {
					calc_true_if = {
						all_states = {
							is_prosperous = yes
							OR = {
								area = exwes_area
								area = beepeck_area
								area = uelaire_area
							}
						}
						amount = 2
					}
				}
				add_adm_power = -100
			}
			else_if = {
				limit = {
					calc_true_if = {
						all_states = {
							is_prosperous = yes
							OR = {
								area = exwes_area
								area = beepeck_area
								area = uelaire_area
							}
						}
						amount = 1
					}
				}
				add_adm_power = -200
			}
			else = {
				add_adm_power = -300
			}
			exwes_area = {
				add_permanent_province_modifier = {
					name = exwes_growing_settlements
					duration = 10950
				}
			}
			beepeck_area = {
				add_permanent_province_modifier = {
					name = exwes_growing_settlements
					duration = 10950
				}
			}
			uelaire_area = {
				add_permanent_province_modifier = {
					name = exwes_growing_settlements
					duration = 10950
				}
			}
		}
	}
	##Mission End
	##Mission Start
	exwes_unite_the_silcalas_realm = {
		icon = mission_pol_deal_mazovia
		required_missions = {
			exwes_reorient_back_home
			exwes_eclipse_arbaran
		}
		position = 9
		provinces_to_highlight = {
			OR = {
				AND = {
					area = arbaran_area
					NOT = {
						OR = {
							country_or_non_sovereign_subject_holds = ROOT
							AND = {
								owned_by = A46
								ROOT = {
									has_opinion = {
										who = A46
										value = 200
									}
									trust = {
										who = A46
										value = 80
									}
								}
							}
						}
					}
				}
				AND = {
					area = golden_plains_area
					NOT = {
						OR = {
							country_or_non_sovereign_subject_holds = ROOT
							AND = {
								owned_by = A46
								ROOT = {
									has_opinion = {
										who = A46
										value = 200
									}
									trust = {
										who = A46
										value = 80
									}
								}
							}
						}
					}
				}
				AND = {
					area = cestir_area
					NOT = {
						OR = {
							country_or_non_sovereign_subject_holds = ROOT
							AND = {
								owned_by = A46
								ROOT = {
									has_opinion = {
										who = A46
										value = 200
									}
									trust = {
										who = A46
										value = 80
									}
								}
							}
						}
					}
				}
				AND = {
					area = teagansfield_area
					NOT = {
						OR = {
							country_or_non_sovereign_subject_holds = ROOT
							AND = {
								owned_by = A46
								ROOT = {
									has_opinion = {
										who = A46
										value = 200
									}
									trust = {
										who = A46
										value = 80
									}
								}
							}
						}
					}
				}
				AND = {
					province_id = 254 #calascandar
					NOT = {
						AND = {
							country_or_non_sovereign_subject_holds = ROOT
							if = {
								limit = {
									has_dlc = "Leviathan"
								}
								has_great_project = {
									type = calascandar
									tier = 2
								}
							}
						}
					}
				}
				AND = {
					province_id = 162 #aelcandar
					NOT = {
						AND = {
							country_or_non_sovereign_subject_holds = ROOT
							if = {
								limit = {
									has_dlc = "Leviathan"
								}
								has_great_project = {
									type = aelcandar
									tier = 2
								}
							}
						}
					}
				}
				AND = {
					province_id = 316 #escandar
					NOT = {
						AND = {
							country_or_non_sovereign_subject_holds = ROOT
							if = {
								limit = {
									has_dlc = "Leviathan"
								}
								has_great_project = {
									type = escandar
									tier = 2
								}
							}
						}
					}
				}
			}
		}
		trigger = {
			arbaran_area = {
				type = all
				OR = {
					country_or_non_sovereign_subject_holds = ROOT
					AND = {
						owned_by = A46
						ROOT = {
							has_opinion = {
								who = A46
								value = 200
							}
							trust = {
								who = A46
								value = 80
							}
						}
					}
				}
			}
			golden_plains_area = {
				type = all
				OR = {
					country_or_non_sovereign_subject_holds = ROOT
					AND = {
						owned_by = A46
						ROOT = {
							has_opinion = {
								who = A46
								value = 200
							}
							trust = {
								who = A46
								value = 80
							}
						}
					}
				}
			}
			cestir_area = {
				type = all
				OR = {
					country_or_non_sovereign_subject_holds = ROOT
					AND = {
						owned_by = A46
						ROOT = {
							has_opinion = {
								who = A46
								value = 200
							}
							trust = {
								who = A46
								value = 80
							}
						}
					}
				}
			}
			teagansfield_area = {
				type = all
				OR = {
					country_or_non_sovereign_subject_holds = ROOT
					AND = {
						owned_by = A46
						ROOT = {
							has_opinion = {
								who = A46
								value = 200
							}
							trust = {
								who = A46
								value = 80
							}
						}
					}
				}
			}
			254 = { #calascandar
				AND = {
					country_or_non_sovereign_subject_holds = ROOT
					if = {
						limit = {
							has_dlc = "Leviathan"
						}
						has_great_project = {
							type = calascandar
							tier = 2
						}
					}
				}
			}
			162 = { #aelcandar
				AND = {
					country_or_non_sovereign_subject_holds = ROOT
					if = {
						limit = {
							has_dlc = "Leviathan"
						}
						has_great_project = {
							type = aelcandar
							tier = 2
						}
					}
				}
			}
			316 = { #escandar
				AND = {
					country_or_non_sovereign_subject_holds = ROOT
					if = {
						limit = {
							has_dlc = "Leviathan"
						}
						has_great_project = {
							type = escandar
							tier = 2
						}
					}
				}
			}
			if = {
				limit = {
					NOT = {
						has_dlc = "Leviathan"
					}
				}
				treasury = 10000
			}
		}
		effect = {
			if = {
				limit = {
					ROOT = {
						has_opinion = {
							who = A46
							value = 200
						}
						trust = {
							who = A46
							value = 80
						}
					}
					A46 = {
						is_subject_of = PREV
					}
				}
				add_historical_friend = A46
				if = {
					limit = {
						A46 = {
							ai = yes
						}
					}
					A46 = {
						complete_mission = A46_fisher_price
						complete_mission = A46_reclaim_aelcandar
						complete_mission = A46_defender_of_the_small_country
						complete_mission = A46_pacifying_the_liberated
					}
				}
			}
			if = {
				limit = {
					NOT = {
						has_dlc = "Leviathan"
					}
				}
				add_treasury = -10000
				add_country_modifier = {
					name = exwes_calascandurs_castles
					duration = -1
				}
				254 = {
					add_permanent_province_modifier = {
						name = exwes_improved_calascandurs_castles
						duration = -1
					}
				}
				162 = {
					add_permanent_province_modifier = {
						name = exwes_improved_calascandurs_castles
						duration = -1
					}
				}
				316 = {
					add_permanent_province_modifier = {
						name = exwes_improved_calascandurs_castles
						duration = -1
					}
				}
			}
			add_country_modifier = {
				name = exwes_silcalas_hegemony
				duration = -1
			}
		}
	}
	##Mission End
	##
	
}
##BranchEnd 3
##BranchStart 4
Exwes_5_missions = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		tag = A40
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	
	##Mission Start
	exwes_sponsor_the_arts = {
		icon = reaffirm_civil_values
		required_missions = {
			exwes_exwesser_resurgence
		}
		position = 2
		trigger = {
			stability = 2
			is_in_deficit = no
			has_adm_advisor_2 = yes
			has_dip_advisor_2 = yes
			has_mil_advisor_2 = yes
			if = {
				limit = {
					has_estate = estate_burghers #Can't if you don't have them somehow
					ai = no #AI is too dumb to do this
				}
				has_estate_privilege = estate_burghers_patronage_of_the_arts
			}
		}
		effect = {
			add_country_modifier = {
				name = exwes_flourishing_arts
				duration = 9125
			}
		}
	}
	##Mission End
	##Mission Start
	exwes_policy_of_tolerance = {
		icon = continue_the_renaissance
		required_missions = {
			exwes_sponsor_the_arts
		}
		position = 3
		trigger = {
			is_religion_enabled = corinite
			religion_group = cannorian
			custom_trigger_tooltip = {
				tooltip = exwes_policy_of_tolerance_tt
				has_global_modifier_value = {
					which = tolerance_heretic
					value = 3
				} 
			}
			any_heretic_province = {
				owned_by = ROOT
				NOT = {
					unrest = 0
				}
			}
			OR = {
				has_idea = ecumenism
				has_idea = state_propaganda
				has_idea = foreign_embassies
			}
		}
		effect = {
			add_country_modifier = {
				name = exwes_aleccian_legacy
				duration = -1
			}
			custom_tooltip = exwes_policy_of_tolerance_tt1
			if = {
				limit = {
					num_of_owned_provinces_with = {
						value = 3
						religion = ROOT
						NOT = {
							is_capital_of = ROOT
						} 
					}
				}
				random_owned_province = {
					limit = {
						superregion = western_cannor_superregion
						NOT = {
							AND = {
								has_province_flag = exwes_religious_minority
								is_capital_of = ROOT
							}	
						}
					}
					add_base_manpower = 1
					add_base_production = 1
					add_base_tax = 1
					set_province_flag = exwes_religious_minority
					if = {
						limit = {
							ROOT = {
								religion = corinite
							}
						}
						change_religion = regent_court
					}
					else = {
						change_religion = corinite
					}
				}
				random_owned_province = {
					limit = {
						superregion = western_cannor_superregion
						NOT = {
							AND = {
								has_province_flag = exwes_religious_minority
								is_capital_of = ROOT
							}	
						}
					}
					add_base_manpower = 1
					add_base_production = 1
					add_base_tax = 1
					set_province_flag = exwes_religious_minority
					if = {
						limit = {
							ROOT = {
								religion = corinite
							}
						}
						change_religion = regent_court
					}
					else = {
						change_religion = corinite
					}
				}
				random_owned_province = {
					limit = {
						superregion = western_cannor_superregion
						NOT = {
							AND = {
								has_province_flag = exwes_religious_minority
								is_capital_of = ROOT
							}	
						}
					}
					add_base_manpower = 1
					add_base_production = 1
					add_base_tax = 1
					set_province_flag = exwes_religious_minority
					if = {
						limit = {
							ROOT = {
								religion = corinite
							}
						}
						change_religion = regent_court
					}
					else = {
						change_religion = corinite
					}
				}
				every_owned_province = {
					limit = {
						has_province_flag = exwes_religious_minority
					}
					clr_province_flag = exwes_religious_minority
				}
				else = { #for if you don't have 3 state religion provinces that aren't the capital for some reason
					random_owned_province = {
						limit = {
							superregion = western_cannor_superregion
							NOT = {
								AND = {
									has_province_flag = exwes_religious_minority
									is_capital_of = ROOT
								}
							}
						}
						add_base_manpower = 1
						add_base_production = 1
						add_base_tax = 1
						set_province_flag = exwes_religious_minority
					}
					random_owned_province = {
						limit = {
							superregion = western_cannor_superregion
							NOT = {
								AND = {
									has_province_flag = exwes_religious_minority
									is_capital_of = ROOT
								}
							}
						}
						add_base_manpower = 1
						add_base_production = 1
						add_base_tax = 1
						set_province_flag = exwes_religious_minority
					}
					random_owned_province = {
						limit = {
							superregion = western_cannor_superregion
							NOT = {
								AND = {
									has_province_flag = exwes_religious_minority
									is_capital_of = ROOT
								}
							}
						}
						add_base_manpower = 1
						add_base_production = 1
						add_base_tax = 1
						set_province_flag = exwes_religious_minority
					}
					every_owned_province = {
						limit = {
							has_province_flag = exwes_religious_minority
						}
						clr_province_flag = exwes_religious_minority
					}
				}
			}
		}
	}
	##Mission End
	##Mission Start
	exwes_join_silcalas_holdings = {
		icon = mission_mountain_castle
		required_missions = {
			exwes_conquer_the_brow
		}
		position = 4
		provinces_to_highlight = {
			OR = {
				area = derwing_area
				area = vertesk_area
			}
			NOT = {
				AND = {
					owner = {
						dynasty = Silcalas
					}
					NOT = {
						owned_by = A25
					}
				}
			}
		}
		trigger = {
			derwing_area = {
				type = all
				NOT = {
					owned_by = A25 #Damescrown
				}
				owner = {
					dynasty = Silcalas
				}
			}
			vertesk_area = {
				type = all
				NOT = {
					owned_by = A25
				}
				owner = {
					dynasty = Silcalas
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = exwes_united_front
				duration = 10950
			}
			damescrown_area = {
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { owned_by = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			255 = { #crownways
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { owned_by = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			908 = { #ainways
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { owned_by = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			262 = { #aranmas
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { owned_by = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
		}
	}
	##Mission End
	##Mission Start
	exwes_reclaim_aelcandar = {
		icon = mission_magnificent_castle
		required_missions = {
			exwes_claiming_the_small_country
			exwes_join_silcalas_holdings
		}
		position = 5
		provinces_to_highlight = {
			province_id = 162 #aelcandar
			NOT = {
				AND = {
					owned_by = ROOT
					is_core = ROOT
					province_has_current_tech_fort_trigger = yes
					num_of_buildings_in_province = 6
					has_manufactory_trigger = yes
					development = 25
				}
			}
		}
		trigger = {
			162 = {
				owned_by = ROOT
				is_core = ROOT
				province_has_current_tech_fort_trigger = yes
				num_of_buildings_in_province = 6
				has_manufactory_trigger = yes
				development = 25
			}
		}
		effect = {
			162 = {
				add_permanent_province_modifier = {
					name = exwes_patriotic_builders
					duration = 10950
				}
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
			}
			add_legitimacy = 10
			add_prestige = 10
		}
	}
	##Mission End
	##Mission Start
	exwes_partition_the_crown = {
		icon = reform_the_monte
		required_missions = {
			exwes_reclaim_aelcandar
		}
		position = 6
		provinces_to_highlight = {
			OR = {
				area = damescrown_area
				area = heartland_borders_area
			}
			NOT = {
				OR = {
					province_id = 254 #Calascandar
					AND = {
						owner = {
							dynasty = Silcalas
						}
						NOT = {
							owned_by = A25
						}
					}
				}
			}
		}
		trigger = {
			damescrown_area = {
				type = all
				NOT = {
					owned_by = A25 #Damescrown
				}
				OR = {
					owner = {
						dynasty = Silcalas
					}
					country_or_non_sovereign_subject_holds = ROOT
				}
			} 
			908 = { #Ainway, Hearthland borders area without Calascandur
				NOT = {
					owned_by = A25 #Damescrown
				}
				owner = {
					dynasty = Silcalas
				}
			}
			255 = { #crownsway
				NOT = {
					owned_by = A25 #Damescrown
				}
				owner = {
					dynasty = Silcalas
				}
			}
			262 = { #Aranmas
				NOT = {
					owned_by = A25 #Damescrown
				}
				owner = {
					dynasty = Silcalas
				}
			}
		}
		effect = {
			custom_tooltip = exwes_partition_the_crown_tt
			every_owned_province = {
				limit = {
					OR = {
						area = damescrown_area
						area = heartland_borders_area
					}
					NOT = {
						province_id = 254
					}
				}
				add_devastation = 10		
				ROOT = {
					reverse_add_opinion = {
						who = A46
						modifier = exwes_looted_damescrown
					}
				}
			}
			if = {
				limit = {
					calc_true_if = {
						all_owned_province = {
							OR = {
								area = damescrown_area
								area = heartland_borders_area
							}
							NOT = {
								province_id = 254
							}
							owned_by = ROOT
						}
						amount = 8
					}
				}
				ROOT = {
					add_treasury = 400
				}
			}
			else_if = {
				limit = {
					calc_true_if = {
						all_owned_province = {
							OR = {
								area = damescrown_area
								area = heartland_borders_area
							}
							NOT = {
								province_id = 254
							}
							owned_by = ROOT
						}
						amount = 7
					}
				}
				ROOT = {
					add_treasury = 350
				}
			}
			else_if = {
				limit = {
					calc_true_if = {
						all_owned_province = {
							OR = {
								area = damescrown_area
								area = heartland_borders_area
							}
							NOT = {
								province_id = 254
							}
							owned_by = ROOT
						}
						amount = 6
					}
				}
				ROOT = {
					add_treasury = 300
				}
			}
			else_if = {
				limit = {
					calc_true_if = {
						all_owned_province = {
							OR = {
								area = damescrown_area
								area = heartland_borders_area
							}
							NOT = {
								province_id = 254
							}
							owned_by = ROOT
						}
						amount = 5
					}
				}
				ROOT = {
					add_treasury = 250
				}
			}
			else_if = {
				limit = {
					calc_true_if = {
						all_owned_province = {
							OR = {
								area = damescrown_area
								area = heartland_borders_area
							}
							NOT = {
								province_id = 254
							}
							owned_by = ROOT
						}
						amount = 4
					}
				}
				ROOT = {
					add_treasury = 200
				}
			}
			else_if = {
				limit = {
					calc_true_if = {
						all_owned_province = {
							OR = {
								area = damescrown_area
								area = heartland_borders_area
							}
							NOT = {
								province_id = 254
							}
							owned_by = ROOT
						}
						amount = 3
					}
				}
				ROOT = {
					add_treasury = 150
				}
			}
			else_if = {
				limit = {
					calc_true_if = {
						all_owned_province = {
							OR = {
								area = damescrown_area
								area = heartland_borders_area
							}
							NOT = {
								province_id = 254
							}
							owned_by = ROOT
						}
						amount = 2
					}
				}
				ROOT = {
					add_treasury = 100
				}
			}
			else_if = {
				limit = {
					calc_true_if = {
						all_owned_province = {
							OR = {
								area = damescrown_area
								area = heartland_borders_area
							}
							NOT = {
								province_id = 254
							}
							owned_by = ROOT
						}
						amount = 1
					}
				}
				ROOT = {
					add_treasury = 50
				}
			}
		}
	}
	##Mission End
	##Mission Start
	exwes_eclipse_arbaran = {
		icon = reform_bergordnung
		required_missions = {
			exwes_partition_the_crown
		}
		position = 8
		provinces_to_highlight = {
			OR = {
				AND = {
					is_capital_of = A46 #Arbaran
					NOT = {
						ROOT = {
							total_development = A46
							prestige = A46
							army_size = A46
							if = {
								limit = {
									alliance_with = A46
								}
								owes_favors = {
									who = A46
									value = 50
								}
							}
						}
					}
				}
				AND = {
					province_id = 349 #Arbaran
					higher_development_than = 153 #Exwes
				}
			}
		}
		trigger = {
			153 = {
				higher_development_than = 349
			}
			if = {
				limit = {
					exists = A46
				}
				total_development = A46
				AND = {
					prestige = A46
					prestige = 90
				}
				AND = {
					army_size = A46
					army_size = 120
				}
				if = {
					limit = {
						alliance_with = A46
						A46 = {
							ai = yes
							owns = 254
						}
					}
					A46 = {
						owes_favors = {
							who = PREV
							value = 50
						}
					}
					
				}
			}
			else = {
				army_size = 120
				prestige = 90
			}
		}
		effect = {
			316 = { #escandar
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { owned_by = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			set_country_flag = reclaim_escandar
			set_country_flag = exwes_escandar
			custom_tooltip = arbaran_reclaim_escandar_tt
			custom_tooltip = exwes_eclipse_arbaran_tt
			if = { #Give Escandar to Exwes if allies
				limit = {
					alliance_with = A46
					A46 = {
						ai = yes
						owns = 254
					}
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				A46 = {
					add_favors = {
						who = PREV
						amount = -50
					}
				}
				254 = {
					cede_province = ROOT
					add_core = ROOT
				}
			}
			custom_tooltip = exwes_eclipse_arbaran_tt1
			if = { #Union event chain
				limit = {
					exists = A46
					NOT = {
						OR = {
							is_rival = ROOT
							is_enemy = ROOT
							A46 = {
								is_subject = yes
							}
						}
					}
					A46 = {
						dynasty = Silcalas
						religion_group = cannorian
					}
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				country_event = { #Pursue unification of the Silcalas realm
						id = flavour_exwes.13
					}
			}
			custom_tooltip = exwes_eclipse_arbaran_tt2
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = exwes_eclipse_arbaran_tt3
			if = { #CB directly
				limit = {
					exists = A46
					OR = {
						is_rival = ROOT
						is_enemy = ROOT
						A46 = {
							NOT = {
									dynasty = Silcalas
								}
						}
						A46 = {
							is_subject = yes
							NOT = {
								is_subject_of = PREV
							}
						}
					}
					A46 = {
						religion_group = cannorian
					}
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				add_casus_belli = {
					type = cb_restore_personal_union
					target = A46
					months = 360
				}
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = exwes_eclipse_arbaran_tt4
			if = { #Claims
				limit = {
					OR = {
						AND = {
							exists = A46
							NOT = {
								A46 = {
									is_subject_of = PREV
								}
							}
							A46 = {
								NOT = {
									religion_group = cannorian
								}
							}
						}
						NOT = {
							exists = A46
						}
					}
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				arbaran_area = {
					if = {
						limit = {
							NOT = { is_core = ROOT }
							NOT = { owned_by = ROOT }
						}
						add_permanent_claim = ROOT
					}
				}
				golden_plains_area = {
					if = {
						limit = {
							NOT = { is_core = ROOT }
							NOT = { owned_by = ROOT }
						}
						add_permanent_claim = ROOT
					}
				}
				cestir_area = {
					if = {
						limit = {
							NOT = { is_core = ROOT }
							NOT = { owned_by = ROOT }
						}
						add_permanent_claim = ROOT
					}
				}
				teagansfield_area = {
					if = {
						limit = {
							NOT = { is_core = ROOT }
							NOT = { owned_by = ROOT }
						}
						add_permanent_claim = ROOT
					}
				}
				254 = { #calascandar
					if = {
						limit = {
							NOT = { is_core = ROOT }
							NOT = { owned_by = ROOT }
						}
						add_permanent_claim = ROOT
					}
				}
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = exwes_eclipse_arbaran_tt5
			if = { #Reward due to already having union
				limit = {
					A46 = {
						is_subject_of = PREV
					}
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				add_country_modifier = {
					name = exwes_united_front
					duration = 3650
				}
			}
			hidden_effect = {
				if = { #give Escandar
					limit = {
						alliance_with = A46
						A46 = {
							ai = yes
							owns = 254
						}
					}
					A46 = {
						add_favors = {
							who = PREV
							amount = -50
						}
					}
					254 = {
						cede_province = ROOT
						add_core = ROOT
					}
				}
				if = { #already got union
					limit ={
						A46 = {
							is_subject_of = PREV
						}
					}
					add_country_modifier = {
						name = exwes_united_front
						duration = 3650
					}
				}
				else_if = { #union event chain
					limit = {
						exists = A46
						NOT = {
							OR = {
								is_rival = ROOT
								is_enemy = ROOT
								A46 = {
									is_subject = yes
								}
							}
						}
						A46 = {
							dynasty = Silcalas
							religion_group = cannorian
						}
					}
					country_event = { #Pursue unification of the Silcalas realm
						id = flavour_exwes.13
					}
				}
				else_if = { #union cb
					limit = {
						exists = A46
						OR = {
							is_rival = ROOT
							is_enemy = ROOT
							A46 = {
								NOT = {
									dynasty = Silcalas
								}
							}
							A46 = {
								is_subject = yes
								NOT = {
									is_subject_of = PREV
								}
							}
						}
						A46 = {
							religion_group = cannorian
						}
					}
					add_casus_belli = {
						type = cb_restore_personal_union
						target = A46
						months = 360
					}
				}
				else = { #claims
					arbaran_area = {
						if = {
							limit = {
								NOT = { is_core = ROOT }
								NOT = { owned_by = ROOT }
							}
							add_permanent_claim = ROOT
						}
					}
					golden_plains_area = {
						if = {
							limit = {
								NOT = { is_core = ROOT }
								NOT = { owned_by = ROOT }
							}
							add_permanent_claim = ROOT
						}
					}
					cestir_area = {
						if = {
							limit = {
								NOT = { is_core = ROOT }
								NOT = { owned_by = ROOT }
							}
							add_permanent_claim = ROOT
						}
					}
					teagansfield_area = {
						if = {
							limit = {
								NOT = { is_core = ROOT }
								NOT = { owned_by = ROOT }
							}
							add_permanent_claim = ROOT
						}
					}
					254 = { #calascandar
						if = {
							limit = {
								NOT = { is_core = ROOT }
								NOT = { owned_by = ROOT }
							}
							add_permanent_claim = ROOT
						}
					}
				}
			}
		}
	}
	##Mission End
	##
	
}
##BranchEnd 4
