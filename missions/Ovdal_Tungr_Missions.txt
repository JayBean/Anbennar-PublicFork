# Haven't started highlighting yet. Needs to be done everywhere.
bahar_a = { # Needs revisiting, Petty King protection neighbor stuff
	slot = 1
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = F23 } 

	F23_petty_king_protection = {
		icon = mission_approach_throne
		position = 2
		required_missions = { F23_the_mountain_smothers } 
		provinces_to_highlight = {  } 

		trigger = {  
			OR = {
				AND = {
					treasury = 150
					alliance_with = U16 # Ourdia
					#U16 = { # TODO OT, figure out how to do this.
					#	all_neighbor_country = {
					#		limit = {
					#			NOT = { tag = ROOT }
					#		}
					#		NOT = {
					#			army_size = ROOT
					#		}
					#	}
					#}
				}
				U16 = {
					vassal_of = ROOT
				}
				510 = { # Bal Ouord
					NOT = {
						owned_by = U16
					}
					F23_owned_by_friendly_nation = { trust_threshold = 60 }
				}
			}
		} 

		effect = {  
			if = {
				limit = {
					treasury = 150
					alliance_with = U16
					#U16 = {
					#	all_neighbor_country = {
					#		limit = {
					#			NOT = { tag = ROOT }
					#		}
					#		NOT = {
					#			army_size = ROOT
					#		}
					#	}
					#}
				}
				U16 = {
					country_event = { id = flavour_ovdal_tungr.100 } # An offer from Ovdal Tûngr
					add_treasury = -150
				}
			}
			510 = { # Bal Ouord.
				add_dwarven_minority_size_effect = yes
			}
		} 
	}
}
bahar_b = { # Done
	slot = 2
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = F23 } 

	F23_refugee_resettling = {
		icon = mission_cope_with_refugees
		position = 2
		required_missions = { F23_the_mountain_smothers } 
		provinces_to_highlight = {  } 

		trigger = {  
			adm_power = 100
			527 = {
				has_fort_building_trigger = yes
				infantry_in_province = 10
			}
		} 

		effect = {  
			add_adm_power = -100
			change_culture = ROOT
			change_religion = ROOT
			hidden_effect = { 
				remove_province_modifier = goblin_majority_oppressed
				remove_province_modifier = goblin_majority_coexisting
				remove_province_modifier = goblin_majority_integrated
			}
			add_human_minority_size_effect = yes
			525 = { 
				add_base_tax = -3
				add_base_production = -2
				add_base_manpower = -1
			}
			527 = {
				add_base_tax = 3
				add_base_production = 2
				add_base_manpower = 1
			}
		} 
	}

	F23_securing_our_heartlands = {
		icon = mission_magnificent_castle
		position = 3
		required_missions = {
			F23_petty_king_protection
			F23_refugee_resettling
		}
		provinces_to_highlight = {  } 

		trigger = {  
			510 = {
				has_fort_building_trigger = yes
				F23_owned_by_friendly_nation = { trust_threshold = 60 }
			}
			3223 = {
				has_fort_building_trigger = yes
				F23_owned_by_friendly_nation = { trust_threshold = 60 }
			}
			527 = {
				has_building = ramparts
			}
			if = {
				limit = { has_dlc = "Leviathan" ai = no } 
				526 = { num_of_times_expanded_infrastructure = 1 }
				525 = { num_of_times_expanded_infrastructure = 1 }
				527 = { num_of_times_expanded_infrastructure = 1 }
			}
		} 

		effect = {  
			525 = { add_province_modifier = { name = F23_heartland_safety duration = -1} }
			527 = { add_province_modifier = { name = F23_heartland_safety duration = -1} }
		} 
	}

	F23_the_copper_standard = {
		icon = mission_iron_and_copper
		position = 5
		required_missions = {
			F23_securing_our_heartlands
			F23_a_better_bahar
		}
		provinces_to_highlight = {  } 

		trigger = {  
			treasury = 250
			527 = { base_production = 10 }
			538 = { base_production =  6 }
		} 

		effect = {  
			add_treasury = -250
			527 = {
				remove_province_modifier = F23_heartland_safety
				add_province_modifier = { name = F23_bahari_mint duration = -1}
				add_human_minority_size_effect = yes
			}
			538 = { add_dwarven_minority_size_effect = yes }
			ROOT = { add_country_modifier = { name = F23_the_bahari_standard duration = -1 } }
			538 = {
				owner = {
					if = {
						limit = { is_subject = yes NOT = { is_subject_of = ROOT } }
						overlord = { add_country_modifier = { name = F23_the_bahari_standard duration = -1 } }
					}
					else = {
						add_country_modifier = { name = F23_the_bahari_standard duration = -1 }
					}
				}
			}
		} 
	}
}
bahar_c = { # Done
	slot = 3
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = F23 } 

	F23_the_mountain_smothers = {
		icon = mission_mountain_castle
		position = 1
		provinces_to_highlight = {  } 

		trigger = {  
			tungr_mountains_area = {
				type = all
				owned_by = ROOT
			}
			NOT = { exists = U14 }
		} 

		effect = {  
			add_country_modifier = { name = F23_the_mountain_smother_buff duration = 3650 }
		} 
	}

	F23_butting_heads = {
		icon = mission_beheading
		position = 3
		required_missions = {
			F23_the_mountain_smothers
			F23_republican_showdown
		}
		provinces_to_highlight = {  } 

		trigger = {  
			536 = {
				F23_owned_by_friendly_nation = { trust_threshold = 60 }
			}
			OR = {
				NOT = {
					exists = U15
				}
				U19 = {
					is_subject_of = ROOT
					all_core_province = { owned_by = U19 }
				}
			}
		} 

		effect = {  
			if = {
				limit = {
					NOT = { 536 = { owned_by = ROOT } }
				}
				536 = {
					owner = { country_event = { id = flavour_ovdal_tungr.110 } } # The Matter of Aqatbar
				}
			}
			if = {
				limit = {
					U19 = {
						is_subject_of = ROOT
					}
				}
				aqatbahar_area = {
					type = all
					add_permanent_claim = U19
				}
				fajabahar_area = {
					type = all
					add_permanent_claim = U19
				}
				azka_evran_area = {
					type = all
					add_permanent_claim = U19
				}
				bahar_szel_uak_area = {
					type = all
					add_permanent_claim = U19
				}
				birsartenslib_area = {
					type = all
					add_permanent_claim = U19
				}
			}
			else = {
				aqatbahar_area = {
					type = all
					add_claim = ROOT
				}
				fajabahar_area = {
					type = all
					add_claim = ROOT
				}
				azka_evran_area = {
					type = all
					add_claim = ROOT
				}
				bahar_szel_uak_area = {
					type = all
					add_claim = ROOT
				}
				birsartenslib_area = {
					type = all
					add_claim = ROOT
				}
			}
		} 
	}

	F23_a_better_bahar = {
		icon = mission_sunset
		position = 4
		required_missions = { F23_butting_heads } 
		provinces_to_highlight = {  } 

		trigger = {  
			bahar_region = {
				type = all
				F23_owned_by_friendly_nation = { trust_threshold = 75 }
			}
		} 

		effect = { 
			custom_tooltip = F23_a_better_bahar_tt
			if = {
				limit = {
					U17 = {
						vassal_of = ROOT
					}
					any_subject_country = {
						NOT = {
							tag = U17
						}
						capital_scope = {
							OR = {
								region = bahar_region
								region = ourdia_region
							}
						}
					}
				}
				country_event = { id = flavour_ovdal_tungr.1 } # Restructuring Bahar?
			}
			bahar_region = {
				add_province_modifier = { name = F23_bahari_calm duration = 9125 }
			}
		} 
	}
}
bahar_d = { # Done
	slot = 4
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = F23 } 

	F23_baharkand_outreach = {
		icon = mission_monarch_diplomacy
		position = 2
		required_missions = { F23_the_mountain_smothers } 
		provinces_to_highlight = {  } 

		trigger = {  
			NOT = {
				F34 = {
					army_size = ROOT
				}
			}
			U19 = {
				custom_trigger_tooltip = {
					tooltip = max_gift_tt
					has_opinion_modifier = {
						who = ROOT
						modifier = sent_gift
						value = 25
					}
				}
				has_opinion = {
					who = ROOT
					value = 100
				}
			}
		} 

		effect = {  
			U19 = { country_event = { id = flavour_ovdal_tungr.130 } } # A Question of Allegiance
			add_historical_rival = F34
		} 
	}

	F23_looking_beyond_bahar = {
		icon = mission_naval_dominance
		position = 4
		required_missions = {
			F23_butting_heads
			F23_republican_reaffirmation
		}
		provinces_to_highlight = {  } 

		trigger = {  
			employed_advisor = {
				type = naval_reformer
			}
			treasury = 400
		} 

		effect = {  
			add_treasury = -400
			516 = { F23_shipyard_construction = yes }
			521 = { F23_shipyard_construction = yes }
			526 = { F23_shipyard_construction = yes }
			531 = { F23_shipyard_construction = yes }
			536 = { F23_shipyard_construction = yes }

			if = {
				limit = {
					check_variable = {
						which = F23_mission_vassals
						value = 3
					}
				}
				add_country_modifier = { name = F23_galley_ca_buff duration = 18250 }
			}
			else_if = {
				limit = {
					check_variable = {
						which = F23_mission_vassals
						value = 2
					}
				}
				add_country_modifier = { name = F23_galley_ca_buff duration = 14600 }

			}
			else_if = {
				limit = {
					check_variable = {
						which = F23_mission_vassals
						value = 1
					}
				}
				add_country_modifier = { name = F23_galley_ca_buff duration = 10950 }
			}
			else = {
				add_country_modifier = { name = F23_galley_ca_buff duration = 7300 }
			}
			custom_tooltip = F23_looking_beyond_bahar_tt
		}
	}
}
bahar_e = { # Done for now, needs revisiting wrt Crathanor MT
	slot = 5
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = F23 } 

	F23_grudges_declared = {
		icon = mission_diplomacy_missive
		position = 1
		provinces_to_highlight = {  } 

		trigger = {  
			OR = {
				OR = {
					U18 = { has_opinion_modifier = { who = ROOT modifier = insulted } }
					U18 = { has_opinion_modifier = { who = ROOT modifier = scornfully_insulted } }
				}
				war_with = U18
				NOT = { exists = U18 }
			}
			if = {
				limit = { ai = no }
				num_of_generals = 1
			}
			if = {
				limit = { ai = no }
				employed_advisor = {
					category = mil
				}
			}
		} 

		effect = {  
			521 = {
				add_permanent_claim = ROOT
			}
			if = {
				limit = { alliance_with = U17 }
				add_trust = { who = U17 value = 25 mutual = yes } 
			}
		} 
	}

	F23_republican_showdown = {
		icon = mission_mounted_battle
		position = 2
		required_missions = { F23_grudges_declared } 
		provinces_to_highlight = {  } 

		trigger = {  
			NOT = {
				exists = U18
			}
			reuyel_area = {
				type = all
				F23_owned_by_friendly_nation = { trust_threshold = 60 }
			}
		} 

		effect = {  
			if = {
				limit = { 
					521 = {	owned_by = ROOT }
				}
				521 = {
					if = { 
						limit = { province_has_center_of_trade_of_level = 2 }
						add_treasury = 200
					}
					else = {
						add_center_of_trade_level = 1
					}
					add_dwarven_minority_size_effect = yes				
				}
			}
			else = {
				521 = {
					owner = { country_event = { id = flavour_ovdal_tungr.120 } } # The Matter of Re-Uyel
				}
			}
		} 
	}

	F23_republican_reaffirmation = {
		icon = mission_diplomatic_relation
		position = 3
		required_missions = { F23_republican_showdown } 
		provinces_to_highlight = {  } 

		trigger = {  
			U17 = {
				OR = {
					trust = { who = ROOT value = 75 }
					AND = {
						alliance_with = ROOT
						ai = no
					}
					is_subject_of = ROOT
					overlord_of = ROOT
				}
			}
		} 

		effect = {  
			U17 = {
				country_event = { id = flavour_ovdal_tungr.140 } # Dwarves and Humans, united
			}
		} 
	}

	F23_our_ilatani_allies = {
		icon = mission_magic_tower
		position = 4
		required_missions = { F23_republican_reaffirmation } 
		provinces_to_highlight = {  } 

		trigger = {  
			# TODO OT, should be updated when Crathanor MT is implemented. 
			always = yes
		} 

		effect = {  
			365 = {
				add_dwarven_minority_size_effect = yes
				add_dwarven_minority_size_effect = yes
			}
			408 = {
				add_dwarven_minority_size_effect = yes
			}
			U17 = {
				add_country_modifier = { name = growing_economy duration = 9125 }
			}
			# TODO OT, slight modification to Crathanor MT if AI
		} 
	}

	F23_securing_our_shipping = {
		icon = challenge_spanish_power
		position = 5
		required_missions = { F23_looking_beyond_bahar } 
		provinces_to_highlight = {  } 

		trigger = {  
			OR = {
				NOT = {
					exists = F32
				}
				F32 = {
					is_subject_of = U17
				}
				F32 = {
					is_subject_of = ROOT
				}
				war_score_against = {
					who = F32
					value = 80
				}
			}
			451 = {
				F23_owned_by_friendly_nation = { trust_threshold = 60 }
				owner = { NOT = { has_reform = pirate_republic_reform } }
			}
		} 

		effect = {  
			if = {
				limit = { exists = F32 }
				F32 = { remove_government_reform = pirate_republic_reform }
				if = {
					limit = { U17 = { is_subject_of = ROOT } }
					U17 = { vassalize = F32 }
				}
			}
			add_country_modifier = { name = F23_pirates_defeated duration = 9125 }
		} 
	}
}
uthojdihr_a = { # Divenhal Straits has some issues with an all_known_country (might just be display issue?)
	slot = 1
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = F23 } 

	F23_uthojdihr_influence = {
		icon = mission_hanseatic_city
		position = 4
		required_missions = { F23_butting_heads } 
		provinces_to_highlight = {  } 

		trigger = {  
			if = {
				limit = { owns = 521 }
				if = {
					limit = { has_dlc = "Leviathan" ROOT = { ai = no } } 					
					521 = { num_of_times_expanded_infrastructure = 1 }
				}
				province_trade_power = 40 # Is this too difficult?
			}
			if = {
				limit = { owns = 536 }
				if = {
					limit = { has_dlc = "Leviathan" ROOT = { ai = no } } 
					536 = { num_of_times_expanded_infrastructure = 1 }
				}
				province_trade_power = 40
			}
			526 = {
				if = {
					limit = { has_dlc = "Leviathan" ROOT = { ai = no } } 
					num_of_times_expanded_infrastructure = 1
				}
				province_trade_power = 40
			}
			if = {
				limit = {
					owns = 521
					owns = 536
					has_dlc = "Emperor"
				}
				has_estate_privilege = estate_burghers_exclusive_trade_rights
			}
			if = {
				limit = { has_dlc = "Domination" }
				has_estate_privilege = estate_burghers_development_of_cities 
			}
			OR = {
				dip_power = 200
				custom_trigger_tooltip = {
					tooltip = F23_uthojdihr_influence_trigger_tt
					plutocracy_ideas = 3
					naval_ideas = 3
					trade_ideas = 3
					maritime_ideas = 3
				}
			}
		} 

		effect = {  
			custom_tooltip = F23_uthojdihr_influence_tt_1
			custom_tooltip = F23_uthojdihr_influence_tt_2
			hidden_effect = {
				set_country_flag = enabled_trading_policy_maximize_profit_upgraded
			}
			if = { 
				limit = {
					NOT = {
						OR = {
							plutocracy_ideas = 3
							naval_ideas = 3
							trade_ideas = 3
							maritime_ideas = 3
						}
					}
				}
				add_dip_power = -200
			}
			country_event = { id = flavour_ovdal_tungr.2 } #Tugged two ways.
			hidden_effect = {
				every_owned_province = {
					limit = { province_trade_power = 40 }
					if = { limit = { num_of_times_expanded_infrastructure = 5 } add_province_modifier = { name = F23_improved_trading_post_5 duration = -1 } }
					else_if = { limit = { num_of_times_expanded_infrastructure = 4 } add_province_modifier = { name = F23_improved_trading_post_4 duration = -1 } }
					else_if = { limit = { num_of_times_expanded_infrastructure = 3 } add_province_modifier = { name = F23_improved_trading_post_3 duration = -1 } }
					else_if = { limit = { num_of_times_expanded_infrastructure = 2 } add_province_modifier = { name = F23_improved_trading_post_2 duration = -1 } }
					else_if = { limit = { num_of_times_expanded_infrastructure = 1 } add_province_modifier = { name = F23_improved_trading_post_1 duration = -1 } }
				}
			}
		} 
	}

	F23_westward_expansion = {
		icon = mission_conquer_arakan
		position = 5
		required_missions = { F23_uthojdihr_influence } 
		provinces_to_highlight = {  } 

		trigger = {  
			isle_of_tef_area = { type = all owned_by = ROOT }
			1296 = { # Eborthil trade node
				OR = { is_strongest_trade_power = ROOT is_strongest_trade_power = U17 }
			}
		} 

		effect = {  
			# TODO OT, Crathanor missions.
			376 = { add_permanent_claim = ROOT }
			288 = { add_permanent_claim = ROOT }
			404 = { add_permanent_claim = ROOT }
			custom_tooltip = F23_westward_expansion_tt
			hidden_effect = {
				if = {
					limit = { has_country_modifier = F23_naval_morale_buff }
					add_country_modifier = { name = F23_trade_efficiency_reward duration = 9125 }
				}
			}
		} 
	}

	F23_divenhal_straits = {
		icon = mission_control_the_channel
		position = 6
		required_missions = { F23_westward_expansion } 
		provinces_to_highlight = {  } 

		trigger = {  
			369 = {
				owned_by = ROOT
				has_coast_defense_building_trigger = yes
				heavy_ships_in_province = 5
				if = {
					limit = { has_dlc = "Leviathan" ROOT = { ai = no } } 
					num_of_times_expanded_infrastructure = 1
				}
			}
			404 = {
				owned_by = ROOT
				has_coast_defense_building_trigger = yes
				heavy_ships_in_province = 5
				if = {
					limit = { has_dlc = "Leviathan" ROOT = { ai = no } } 
					num_of_times_expanded_infrastructure = 1
				}
			}
			NOT = { # TODO OT, tooltip is wrong or this is.
				any_known_country = {
					capital_scope = { superregion = north_salahad_superregion }
					num_of_heavy_ship = ROOT
					navy_size = ROOT
				}
			}
		} 

		effect = {
			369 = {
				add_permanent_province_modifier = { name = F23_port_jurith_toll duration = -1 }
				kill_units = { who = ROOT type = heavy_ship amount = 5 }
			}
			404 = {
				add_permanent_province_modifier = { name = F23_mushesh_toll duration = -1 }
				kill_units = { who = ROOT type = heavy_ship amount = 5 }
			}
			coast_of_tears_area = { add_claim = ROOT }
			mothers_delta_area = { add_claim = ROOT }
			382 = { add_permanent_claim = ROOT }
			400 = { add_permanent_claim = ROOT }
			402 = { add_permanent_claim = ROOT }
			406 = { add_permanent_claim = ROOT }
		}	
	}

	F23_extending_our_reach = {
		icon = invest_in_the_rich_trades
		position = 7
		required_missions = { F23_divenhal_straits } 
		provinces_to_highlight = {  } 

		trigger = { 
			treasury = 1000
			1259 = { # Divenhal Gate
				any_trade_node_member_province = { 
					has_terrain = coastline
					F23_owned_by_friendly_nation = yes
					has_shipyard_building_trigger = yes
					num_free_building_slots = 1
				}
			}
			1303 = { # Flooded Coast
				any_trade_node_member_province = { 
					has_terrain = coastline
					F23_owned_by_friendly_nation = yes
					has_shipyard_building_trigger = yes
					num_free_building_slots = 1
				}
			}
			1309 = { # Brasan
				any_trade_node_member_province = { 
					has_terrain = coastline
					F23_owned_by_friendly_nation = yes
					has_shipyard_building_trigger = yes
					num_free_building_slots = 1
				}
			}
			1312 = { # Bahar
				any_trade_node_member_province = { 
					has_terrain = coastline
					F23_owned_by_friendly_nation = yes
					has_shipyard_building_trigger = yes
					num_free_building_slots = 1
				}
			}
		} 

		effect = {  
			1259 = { F23_extending_our_reach_effect = yes } # Divenhal Gate
			1303 = { F23_extending_our_reach_effect = yes } # Flooded Coast
			1309 = { F23_extending_our_reach_effect = yes } # Brasan
			1312 = { F23_extending_our_reach_effect = yes } # Bahar
		} 
	}

	F23_divenhal_dominion = {
		icon = mission_dominate_home_trade_node
		position = 8
		required_missions = {
			F23_extending_our_reach
			F23_securing_the_sorrow
		}
		provinces_to_highlight = {  } 

		trigger = {  
			1259 = { OR = { is_strongest_trade_power = ROOT is_strongest_trade_power = U17 } } # Divenhal Gates
			1296 = { OR = { is_strongest_trade_power = ROOT is_strongest_trade_power = U17 } } # Eborthil
			1303 = { OR = { is_strongest_trade_power = ROOT is_strongest_trade_power = U17 } } # Flooded Coast
			1305 = { OR = { is_strongest_trade_power = ROOT is_strongest_trade_power = U17 } } # Mothers Sorrow
			1309 = { OR = { is_strongest_trade_power = ROOT is_strongest_trade_power = U17 } } # Brasan			
			1312 = { OR = { is_strongest_trade_power = ROOT is_strongest_trade_power = U17 } } # Bahar
			OR = {
				full_idea_group = naval_ideas
				full_idea_group = maritime_ideas
			}
		} 

		effect = {  
			add_country_modifier = { name = "thalassocracy" duration = -1 }
			unlock_government_reform = { government_reform = thalassocracy_reform }
			change_government_reform_progress = 50			
			add_government_reform = ovdal_tungr_uthojdihr_rule_reform
		} 
	}
}
uthojdihr_b = { # Resting, yet Productive is not implemented yet. Waiting for Crathanor MT.
	slot = 2
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = F23 } 

	F23_eborthili_infrastructure = {
		icon = mission_city_prosperity
		position = 6
		required_missions = {
			F23_westward_expansion
			F23_the_copper_standard
		}
		provinces_to_highlight = {  } 

		trigger = {  
			treasury = 500
			35 = { # Toref Citadel
				base_production = 8
				if = {
					limit = { has_dlc = "Leviathan" } 
					num_of_times_expanded_infrastructure = 1
				}
			}
			36 = { # New Tefkora
				owned_by = ROOT
				if = {
					limit = { has_dlc = "Leviathan" } 
					num_of_times_expanded_infrastructure = 1
				}
				has_shipyard_building_trigger = yes
				has_dock_building_trigger = yes
				num_free_building_slots	= 1
			}
		} 

		effect = {  
			isle_of_tef_area = { add_dwarven_minority_size_effect = yes }
			35 = { add_permanent_province_modifier = { name = F23_divenhal_exchange duration = -1 } } # Toref Citadel
			36 = { # New Tefkora
				add_permanent_province_modifier = { name = F23_local_naval_base duration = -1 }
				add_building_construction = { building = impressment_offices speed = 0.5 cost = 1.0 }
			}
			remove_country_modifier = F23_the_bahari_standard
			add_country_modifier = { name = F23_the_divenhal_standard duration = -1 }
			custom_tooltip = F23_eborthili_infrastructure_tt
			random_known_country = {
				limit = { has_country_modifier = F23_the_bahari_standard }
				remove_country_modifier = F23_the_bahari_standard
				add_country_modifier = { name = F23_the_divenhal_standard duration = -1 }
			}
		} 
	}

	F23_our_granary = {
		icon = mission_pol_breadbasket_europe
		position = 7
		required_missions = { F23_divenhal_straits } 
		provinces_to_highlight = {  } 

		trigger = {  
			if = {
				limit = { has_dlc = "Dharma" } 
				463 = { province_has_center_of_trade_of_level = 3 } # Koroshesh
			}
			coast_of_tears_area = { type = all F23_owned_by_friendly_nation = { trust_threshold = 90 } }
			mothers_delta_area = { type = all F23_owned_by_friendly_nation = { trust_threshold = 90 } }
			mothers_delta_area = {
				type = all
				base_production = 10
				OR = {
					has_building = farm_estate
					NOT = { trade_goods = grain }
				}
			}
		} 

		effect = {  
			every_owned_province = {
				limit = {
					has_province_flag = F23_improved_trading_post_flag
				}
				add_province_modifier = { name = F23_improved_trading_post_granary duration = -1}
			}
			# TODO OT, Crathanor mission integration.
		} 
	}
}
overseas_a = { # Done. Probably. Sweetport culture event needs testing.
	slot = 1
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = F23 } 

	F23_southern_expansion = {
		icon = mission_exploration
		position = 10
		required_missions = { F23_divenhal_dominion } 
		provinces_to_highlight = {  } 

		trigger = {  
			OR = {
				exploration_ideas = 3
				expansion_ideas = 3
				AND = { adm = 150 dip = 150 }
			}
		} 

		effect = {  
			if = {
				limit = { NOT = { OR = { exploration_ideas = 3 expansion_ideas = 3 } } }
				add_adm_power = -150
				add_dip_power = -150
			}
			add_country_modifier = { name = F23_southern_expansion_buff duration = 18250 }
			add_country_modifier = { name = F23_sarhali_interests duration = -1 }
		} 
	}

	F23_seizing_the_sweetport = {
		icon = mission_secure_hajj_ports
		position = 11
		required_missions = { F23_southern_expansion } 
		provinces_to_highlight = {  } 

		trigger = {  
			6632 = { # Teramzadai
				owned_by = ROOT
				has_dock_building_trigger = yes
				if = {
					limit = { has_dlc = "Dharma" } 
					province_has_center_of_trade_of_level = 3
				}
				if = {
					limit = { has_dlc = "Leviathan" } 
					num_of_times_expanded_infrastructure = 2
				}
				OR = {
					culture_group = vyzemby
					culture_group = lizardfolk					
				}
			}
		} 

		effect = {  
			6632 = { # Teramzadai
				province_event = { id = flavour_ovdal_tungr.3 } # TODO OT, needs to be tested.
				add_province_modifier = { name = F23_clove_port duration = -1 }
			}
			custom_tooltip = F23_seizing_the_sweetport_tt_1
			add_country_modifier = { name = F23_clove_colonies duration = 18250 }
			hidden_effect = {
				every_owned_province = {
					limit = {
						trade_goods = cloves
						has_dock_building_trigger = yes
					}
					add_province_modifier = { name = F23_clove_port duration = -1 }
				}				
			}
			custom_tooltip = F23_seizing_the_sweetport_tt_2
			F23_seizing_the_sweetport_custom_effect = { culture = amezatany }
			F23_seizing_the_sweetport_custom_effect = { culture = mboala }
			F23_seizing_the_sweetport_custom_effect = { culture = mazava }
			F23_seizing_the_sweetport_custom_effect = { culture = fomarati }
			F23_seizing_the_sweetport_custom_effect = { culture = itayzemby_lizardfolk }
		} 
	}

	F23_the_cloves_monopoly = {
		icon = mission_rb_colonise_spice_islands
		position = 13
		required_missions = {
			F23_seizing_the_sweetport
			F23_the_path_to_halass
		}
		provinces_to_highlight = {  
			province_id = 6632
		} 

		trigger = {  
			6632 = { # Teramzadai
				has_great_project = {
					type = lizzardfolk_port
					tier = 3
				}
				province_has_center_of_trade_of_level = 3
				light_ships_in_province	= 25
			}
			6617 = { province_has_center_of_trade_of_level = 3 light_ships_in_province	= 25 } # Ibidintely
			6130 = { province_has_center_of_trade_of_level = 3 light_ships_in_province	= 25 } # Ofonasara
			6132 = { province_has_center_of_trade_of_level = 3 light_ships_in_province	= 25 } # Terampihaza
			far_uelos_isles_area = { type = all country_or_subject_holds = ROOT }
			sil_berkhens_land_area = { type = all country_or_subject_holds = ROOT }
			pikakely_area = { type = all country_or_subject_holds = ROOT }
			velanynosy_area = { type = all country_or_subject_holds = ROOT }
			trade_goods_produced_amount = { trade_goods = cloves amount = 50 }
		} 

		effect = {  
			country_event = { id = flavour_ovdal_tungr.4 } # The Cloves Monopoly
		} 
	}
}
overseas_b = { # Code here is done. Some events, and could really do with some custom tooltips.
	slot = 2
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = F23 } 

	F23_safe_sarhali_seas = {
		icon = mission_raid_christian_trade
		position = 11
		required_missions = { F23_southern_expansion } 
		provinces_to_highlight = {  } 

		trigger = {  
			# Biya Mubidya
			1449 = { is_strongest_trade_power = ROOT }
			1449 = { F23_trade_node_requirements = { expand_infra_req = 1 heavy_ship_num = 10 } }
			# Khazynas Gulf
			1458 = { is_strongest_trade_power = ROOT }
			1458 = { F23_trade_node_requirements = { expand_infra_req = 1 heavy_ship_num = 10 } }
			# Sea of Lel
			3084 = { is_strongest_trade_power = ROOT }
			3084 = { F23_trade_node_requirements = { expand_infra_req = 1 heavy_ship_num = 10 } }
			# Clovesight
			3082 = { is_strongest_trade_power = ROOT }
			3082 = { F23_trade_node_requirements = { expand_infra_req = 1 heavy_ship_num = 10 } }
			# Dao Nako
			1465 = { is_strongest_trade_power = ROOT }
			1465 = { F23_trade_node_requirements = { expand_infra_req = 1 heavy_ship_num = 10 } }
		} 

		effect = {  
			add_country_modifier = { name = F23_safe_sarhali_seas_mod duration = -1 }
			custom_tooltip = F23_safe_sarhali_seas_tt
			hidden_effect = {
				set_country_flag = F23_distance_negation_sarhal
			}
		} 
	}
	
	F23_the_path_to_halass = {
		icon = mam_highway_empire
		position = 12
		required_missions = { F23_safe_sarhali_seas } 
		provinces_to_highlight = {  } 

		trigger = {  
			owns = 6000
			OR = {
				6000 = {
					has_great_project = {
						type = great_merfolk_canal
						tier = 1
					}
				}
				AND = {
					treasury = 20000
					custom_trigger_tooltip = {
						tooltip = F23_the_path_to_halass_trigger_tt
						OR = { 
							if = { 
								limit = { full_idea_group = infrastructure_ideas }
								OR = {
									adm_tech = 20
									AND = { adm_tech = 19 innovativeness = 20 }
									AND = { adm_tech = 18 innovativeness = 40 }
									AND = { adm_tech = 17 innovativeness = 60 }
									AND = { adm_tech = 16 innovativeness = 80 }
									AND = { adm_tech = 15 innovativeness = 100 }
								}
							}
							else = {
								OR = {
									adm_tech = 22
									AND = { adm_tech = 21 innovativeness = 20 }
									AND = { adm_tech = 20 innovativeness = 40 }
									AND = { adm_tech = 19 innovativeness = 60 }
									AND = { adm_tech = 18 innovativeness = 80 }
									AND = { adm_tech = 17 innovativeness = 100 }
								}
							}
						}
					}
				}
			}
		}

		effect = {  
			if = {
				limit = {
					6000 = {
						has_great_project = {
							type = great_merfolk_canal
						}
					}
				}
				add_prestige = 100
				add_splendor = 400
			}
			else = {
				add_great_project = {
					type = great_merfolk_canal
				}
				add_treasury = -20000
			}
		} 
	}
	F23_the_copper_seaway = {
		icon = mission_south_indian_trade
		position = 14
		required_missions = { F23_the_path_to_halass } 
		provinces_to_highlight = {  } 

		trigger = { 
			# TODO OT, really needs custom tooltip.
			# Biya Mubidya 
			1449 = { is_strongest_trade_power = ROOT }
			1449 = { F23_trade_node_requirements = { expand_infra_req = 2 heavy_ship_num = 20 } }
			# Khazynas Gulf
			1458 = { is_strongest_trade_power = ROOT }
			1458 = { F23_trade_node_requirements = { expand_infra_req = 2 heavy_ship_num = 20 } }
			# Sea of Lel
			3084 = { is_strongest_trade_power = ROOT }
			3084 = { F23_trade_node_requirements = { expand_infra_req = 2 heavy_ship_num = 20 } }
			# Clovesight
			3082 = { is_strongest_trade_power = ROOT }
			3082 = { F23_trade_node_requirements = { expand_infra_req = 2 heavy_ship_num = 20 } }
			# Dao Nako
			1465 = { is_strongest_trade_power = ROOT }
			1465 = { F23_trade_node_requirements = { expand_infra_req = 2 heavy_ship_num = 20 } }
			# Gulf of Rahen
			1361 = { is_strongest_trade_power = ROOT }
			1361 = { F23_trade_node_requirements = { expand_infra_req = 2 heavy_ship_num = 20 } }
			# Coffee Coast
			1343 = { is_strongest_trade_power = ROOT }
			1343 = { F23_trade_node_requirements = { expand_infra_req = 2 heavy_ship_num = 20 } }
			# Dakinshi Ahunanja
			1339 = { is_strongest_trade_power = ROOT }
			1339 = { F23_trade_node_requirements = { expand_infra_req = 2 heavy_ship_num = 20 } }
			# Cay Cam Sinh
			1364 = { is_strongest_trade_power = ROOT }
			1364 = { F23_trade_node_requirements = { expand_infra_req = 2 heavy_ship_num = 20 } }
			# Arawkelin
			1366 = { is_strongest_trade_power = ROOT }
			1366 = { F23_trade_node_requirements = { expand_infra_req = 2 heavy_ship_num = 20 } }
			6000 = {
				has_great_project = { type = great_merfolk_canal tier = 3 }
			}
			if = {
				limit = {
					has_dlc = "Emperor"
				}
				OR = {
					is_hegemon_of_type = economic_hegemon
					is_hegemon_of_type = naval_hegemon
				}
			}
			if = {
				limit = {
					has_dlc = "Emperor"
				}
				OR = {
					U17 = {
						OR = {
							is_hegemon_of_type = economic_hegemon
							is_hegemon_of_type = naval_hegemon
						}
					}
					AND = {
						monthly_income = 1000
						NOT = { any_other_great_power = { monthly_income = root } }
						navy_size = 500
						NOT = { any_other_great_power = { num_of_heavy_ship = root } }
					}
				}
			}
			else = {
				monthly_income = 1000
				NOT = { any_other_great_power = { monthly_income = root } }
				navy_size = 500
				NOT = { any_other_great_power = { num_of_heavy_ship = root } }
			}
		} 

		effect = {  
			custom_tooltip = F23_the_copper_seaway_tt
			hidden_effect = {
				set_country_flag = F23_distance_negation_haless
			}
			if = {
				limit = {
					has_dlc = "Emperor"
				}
				if = {
					limit = {
						is_hegemon_of_type = economic_hegemon
					}
					add_country_modifier = { name = F23_secondary_hegemony_naval_1 duration = -1 }
				}
				else_if = {
					limit = {
						is_hegemon_of_type = economic_hegemon
					}
					add_country_modifier = { name = F23_secondary_hegemony_naval_1 duration = -1 }
				}
			}
			else = {
				country_event = { id = flavour_ovdal_tungr.5 } # Secondary hegemony for people without Emperor.					
			}
		} 
	}
}
bulwar_c = { # Code done, could probably use some custom tooltips.
	slot = 3
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = F23 } 

	F23_heading_for_the_hills = {
		icon = mission_conquer_50_development
		position = 6
		required_missions = { F23_a_better_bahar } 
		provinces_to_highlight = {  } 

		trigger = {
			OR = {
				AND = {
					654 = { F23_owned_by_friendly_nation = { trust_threshold = 60 } } # Ur-Monkande
					665 = { F23_owned_by_friendly_nation = { trust_threshold = 60 } } # Gelkalis				
				}
				AND = {
					NOT = { exists = F26 }
					665 = { # Gelkalis
						owner = {
							has_spy_network_from = { who = ROOT value = 30 }
						}
					}
				}
			}  
		} 

		effect = {  
			if = {
				limit = {
					AND = {
						654 = { F23_owned_by_friendly_nation = { trust_threshold = 60 } } # Ur-Monkande
						665 = { F23_owned_by_friendly_nation = { trust_threshold = 60 } } # Gelkalis				
					}
				}
				665 = { # Gelkalis
					add_trade_modifier = {
						who = ROOT
						duration = -1
						power = 50
						key = OVDAL_TUNGR_TRADERS
					}
				}
			}
			else = {
				665 = { # Gelkalis
					owner = {
						declare_war_with_cb = {
							who = ROOT
							casus_belli = cb_conquest
						}
					}
				}
				665 = { # Gelkalis
					cede_province = F26
				}
				vassalize = F26
			}
		} 
	}
}
bulwar_d = { # Copper Offer missions could probably do with custom tooltips. Cash Crops needs to be properly tested.
	slot = 4
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = F23 } 

	F23_brasanni_connections = {
		icon = promote_the_carnevale
		position = 5
		required_missions = { F23_a_better_bahar } 
		provinces_to_highlight = {  } 

		trigger = {  
			560 = { F23_bulwar_province_triggers = yes } # Anzabad
			561 = { F23_bulwar_province_triggers = yes } # Medurubar
			565 = { F23_bulwar_province_triggers = yes } # Brasan
			596 = { F23_bulwar_province_triggers = yes } # Zanzap
		} 

		effect = {  
			custom_tooltip = F23_copper_offer_tooltip
			hidden_effect = {
				560 = { province_event = { id = flavour_ovdal_tungr.20 } } # Anzabad. Copper offer. TODO OT making the event.
				561 = { province_event = { id = flavour_ovdal_tungr.20 } } # Medurubar. Copper offer.
				565 = { province_event = { id = flavour_ovdal_tungr.20 } } # Brasan. Copper offer.
				596 = { province_event = { id = flavour_ovdal_tungr.20 } } # Zanzap. Copper offer.
			}
			# TODO OT, Crathanor coop element.
		} 
	}

	F23_to_lake_neza = {
		icon = mission_reconquer_vologda
		position = 6
		required_missions = { F23_brasanni_connections } 
		provinces_to_highlight = {  } 

		trigger = {  
			1309 = { is_strongest_trade_power = ROOT } # Bay of Brasan, Brasan trade node
			591 = { F23_bulwar_province_triggers = yes } # Kumarkand
			613 = { F23_bulwar_province_triggers = yes } # Azkabar
			616 = { F23_bulwar_province_triggers = yes } # Arasbas
			622 = { F23_bulwar_province_triggers = yes } # Setadazar
		} 

		effect = {  
			custom_tooltip = F23_copper_offer_tooltip
			hidden_effect = {
				591 = { province_event = { id = flavour_ovdal_tungr.20 } } # Kumarkand. Copper offer. TODO OT making the event.
				613 = { province_event = { id = flavour_ovdal_tungr.20 } } # Azkabar. Copper offer.
				616 = { province_event = { id = flavour_ovdal_tungr.20 } } # Arasbas. Copper offer.
				622 = { province_event = { id = flavour_ovdal_tungr.20 } } # Setadazar. Copper offer.
			}
		} 
	}

	F23_reestablishing_our_influence = {
		icon = mission_discussion_arch
		position = 7
		required_missions = {
			F23_heading_for_the_hills
			F23_to_lake_neza
			F23_up_the_suran
		}
		provinces_to_highlight = {  } 

		trigger = {  
			1309 = { is_strongest_trade_power = ROOT } # Bay of Brasan, Brasan trade node
			601 = { is_strongest_trade_power = ROOT } # Bulwar, Bulwar trade node
			671 = { is_strongest_trade_power = ROOT } # Arkasul, Seionqan trade node
			640 = { is_strongest_trade_power = ROOT } # Hasr, Sareyand trade node
			custom_trigger_tooltip = {
				tooltip = F23_reestablishing_our_influence_trigger_tt
				NOT = {
					calc_true_if = {
						all_known_country = { # TODO OT, test properly.
							NOT = { is_rival = ROOT }
							NOT = { subsidised_percent_amount = { value = 0.2 } }
							NOT = { has_opinion_modifier = { who = ROOT modifier = getting_subsidies value = 15 } }
							NOT = { has_opinion = { who = ROOT value = 100 } }
							is_subject = no
							capital_scope = { superregion = bulwar_superregion }
							NOT = { has_country_modifier = monstrous_nation } 
						}
						amount = 1
					}
				}
			}
		} 

		effect = {  
			custom_tooltip = F23_reestablishing_our_influence_tt
			set_country_flag = F23_distance_negation_bulwar
			set_country_flag = F23_easier_bulwari_protectorates
		}
	}

	F23_cash_crops = {
		icon = dominant_economy
		position = 8
		required_missions = {
			F23_reestablishing_our_influence
			F23_our_granary
		}
		provinces_to_highlight = {  } 

		trigger = {  
			adm_tech = 14
			calc_true_if = {
				bulwar_superregion = {
					F23_owned_by_friendly_nation = { trust_threshold = 90 }
					OR = { region = bulwar_proper_region region = far_bulwar_region }
					trade_goods = grain
					OR = { has_terrain = farmlands has_terrain = grasslands }
					has_manufactory_trigger = yes
					base_production = 10
				}
				amount = 5
			}
		} 

		effect = {  
			bulwar_proper_region = {
				limit = {
					trade_goods = grain
					OR = { has_terrain = farmlands has_terrain = grasslands }
					base_production = 10
					has_manufactory_trigger = yes
				}
				if = {
					limit = { has_building = farm_estate }
					change_trade_goods = cotton
					add_building = plantations
				}
				else = { change_trade_goods = cotton }
			}
			far_bulwar_region = {
				limit = {
					trade_goods = grain
					OR = { has_terrain = farmlands has_terrain = grasslands }
					base_production = 10
					has_manufactory_trigger = yes
				}
				if = {
					limit = { has_building = farm_estate }
					change_trade_goods = coffee
					add_building = plantations
				}
				else = { change_trade_goods = coffee }
			}
		} 
	}
}
bulwar_e = { # Ditto re Copper Offer. Otherwise done? 
	slot = 5
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = F23 } 

	F23_up_the_suran = {
		icon = mission_sunset_alternative
		position = 6
		required_missions = { F23_brasanni_connections } 
		provinces_to_highlight = {  } 

		trigger = {  
			1309 = { is_strongest_trade_power = ROOT } # Bay of Brasan, Brasan trade node
			601 = { F23_bulwar_province_triggers = yes } # Bulwar
			626 = { F23_bulwar_province_triggers = yes } # Sareyand
			631 = { F23_bulwar_province_triggers = yes } # Eduz-Vacyn
			640 = { F23_bulwar_province_triggers = yes } # Hasr
			643 = { F23_bulwar_province_triggers = yes } # Azka-Sur
		} 

		effect = {  
			custom_tooltip = F23_copper_offer_tooltip
			hidden_effect = {
				601 = { province_event = { id = flavour_ovdal_tungr.20 } } # Bulwar
				626 = { province_event = { id = flavour_ovdal_tungr.20 } } # Sareyand
				631 = { province_event = { id = flavour_ovdal_tungr.20 } } # Eduz-Vacyn
				640 = { province_event = { id = flavour_ovdal_tungr.20 } } # Hasr
				643 = { province_event = { id = flavour_ovdal_tungr.20 } } # Azka-Sur
			}
		} 
	}

	F23_a_debt_repaid = {
		icon = mission_burning_castle
		position = 7
		required_missions = { F23_up_the_suran } 
		provinces_to_highlight = {  } 

		trigger = {  
			if = {
				limit = { 
					H78 = { exists = yes }
				}
				controls = 4124
				war_score_against = { who = H78 value = 80 }
			}
			else = {
				controls = 4124
			}
		} 

		effect = {  
			country_event = { id = flavour_ovdal_tungr.6 } # A Grudge Righted
		} 
	}

	F23_suran_stewardship = {
		icon = mission_sun_temple
		position = 8
		required_missions = { F23_reestablishing_our_influence } 
		provinces_to_highlight = {  } 

		trigger = {  
			suran_river = {
				type = all
				OR = {
					country_or_non_sovereign_subject_holds = ROOT
					country_or_non_sovereign_subject_holds = U17
				}
				development = 15
			}
			601 = { has_tax_building_trigger = yes development = 30 } # Bulwar
			631 = { has_tax_building_trigger = yes development = 30 } # Eduz-Vacyn
			643 = { has_tax_building_trigger = yes development = 30 } # Azka-Sur
		} 

		effect = {  
			if = {
				limit = { 601 = { NOT = { has_building = cathedral } } }
				601 = { remove_building = temple add_building = cathedral }
				ROOT = { add_adm_power = -50 }
			}
			if = {
				limit = { 631 = { NOT = { has_building = cathedral } } }
				631 = { remove_building = temple add_building = cathedral }
				ROOT = { add_adm_power = -50 }
			}
			if = {
				limit = { 643 = { NOT = { has_building = cathedral } } }
				643 = { remove_building = temple add_building = cathedral }
				ROOT = { add_adm_power = -50 }
			}
			add_country_modifier = { name = F23_suran_stewardship_mod duration = -1 }

			custom_tooltip = F23_suran_stewardship_tt
			hidden_effect = {
				every_known_country = {
					limit = { capital_scope = { superregion = bulwar_superregion } }
					if = { 
						limit = { religion_group = bulwari }
						add_opinion = { who = ROOT modifier = accepted_faith }
						reverse_add_opinion = { who = ROOT modifier = accepted_faith }
					}
				}
			}
		}  
	}

	F23_a_better_bulwar = {
		icon = mission_new_dawn
		position = 14
		required_missions = { F23_suran_stewardship } 
		provinces_to_highlight = {  } 

		trigger = {  
			bulwar_superregion = {
				type = all
				owner = {
					NOT = { culture_group = gnollish }
					NOT = { has_country_modifier = monstrous_nation }
				}
			}
			all_known_country = {
				capital_scope = { superregion = bulwar_superregion }
				OR = {
					TAG = ROOT
					is_subject_of = ROOT
					TAG = U17
					is_subject_of = U17
					AND = {
						has_opinion = { who = ROOT value = 150 }
						custom_trigger_tooltip = {
							tooltip = F23_subsidies_maxed
							has_opinion_modifier = { who = ROOT modifier = getting_subsidies value = 15 }
						}
						subsidised_percent_amount = { value = 0.5 }
					}
				}
			}
		} 

		effect = {  
			remove_country_modifier = F23_suran_stewardship_mod
			add_country_modifier = { name = F23_bulwar_stewardship_mod duration = -1 }
			bulwar_superregion = { add_province_modifier = { name = F23_copper_aegis duration = -1 } }
		} 
	}
}
strongbellow_c = { # Done, other than highlighting.
	slot = 3
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = F23 } 

	F23_a_silverforge_visitor = {
		icon = mission_dwarf
		position = 7
		provinces_to_highlight = {  } 

		trigger = {  
			custom_trigger_tooltip = {
				tooltip = F23_a_silverforge_visitor_trigger_tt
				OR = {
					is_year = 1500
					AND = { is_year = 1495 innovativeness = 5 }
					AND = { is_year = 1490 innovativeness = 10 }
					AND = { is_year = 1485 innovativeness = 15 }
					AND = { is_year = 1480 innovativeness = 20 }
					AND = { is_year = 1475 innovativeness = 25 }
					AND = { is_year = 1470 innovativeness = 30 }
					AND = { is_year = 1465 innovativeness = 35 }
					AND = { is_year = 1460 innovativeness = 40 }
					AND = { is_year = 1455 innovativeness = 45 }
					AND = { is_year = 1450 innovativeness = 55 }
				}
			}
		}

		effect = {
			country_event = { id = flavour_ovdal_tungr.7 } # Arrival of Grun Strongbellow
		}
	}

	F23_strongbellow_pumps = {
		icon = mission_anvil
		position = 9
		required_missions = { F23_a_silverforge_visitor } 
		provinces_to_highlight = {  } 

		trigger = {  
			treasury = 250
			526 = { 
				NOT = { has_siege = yes } 
				infantry_in_province = 5
			} # Ovdal Tûngr
			OR = {
				mil_power = 100
				if = { limit = { has_dlc = "Cradle of Civilization" } fortification_expert = 3 }
				else = { fortification_expert = 2 }
			}
			OR = {
				dip_power = 100
				A73 = { has_opinion = { who = ROOT value = 150 } }
			}
			OR = {
				adm_power = 100
				any_known_country = { is_a_hold = yes capital_scope = { continent = serpentspine } has_opinion = { who = ROOT value = 150 } }
			}

		} 

		effect = {  
			add_treasury = -250
			if = {
				limit = { has_dlc = "Cradle of Civilization" }
				if = { limit = { fortification_expert = 3 } }
				else = { add_mil_power = -100 }
			}
			else = {
				if = { limit = { fortification_expert = 2 } }
				else = { add_mil_power = -100 }
			}

			if = { limit = { A73 = { has_opinion = { who = ROOT value = 150 } } } }
			else = { add_dip_power = -100 }
			if = { limit = { any_known_country = { is_a_hold = yes capital_scope = { continent = serpentspine } has_opinion = { who = ROOT value = 150 } } } }
			else = { add_adm_power = -100 }
			526 = { 
				kill_units = { who = ROOT type = infantry amount = 5 }
				remove_province_modifier = F23_flooded_depths
				hidden_effect = { clr_province_flag = cannot_dig }
				add_permanent_province_modifier = { name = F23_strongbellow_pumps_mod duration = -1 }
			}
		} 
	}

	F23_steamers = {
		icon = support_the_bulk_trades
		position = 10
		required_missions = { F23_strongbellow_pumps } 
		provinces_to_highlight = {  } 

		trigger = {  
			custom_trigger_tooltip = {
				tooltip = F23_steamers_trigger_tt
				OR = {
					is_year = 1600
					AND = { is_year = 1590 innovativeness =  10 }
					AND = { is_year = 1580 innovativeness =  20 }
					AND = { is_year = 1570 innovativeness =  30 }
					AND = { is_year = 1560 innovativeness =  40 }
					AND = { is_year = 1550 innovativeness =  50 }
					AND = { is_year = 1540 innovativeness =  60 }
					AND = { is_year = 1530 innovativeness =  70 }
					AND = { is_year = 1520 innovativeness =  80 }
					AND = { is_year = 1510 innovativeness =  90 }
					AND = { is_year = 1500 innovativeness = 100 }
				}
			}
			525 = { base_production = 10 }
			treasury = 1000

		} 

		effect = {
			add_treasury = -1000
			add_country_modifier = { name = F23_steamers_mod duration = -1 }
			custom_tooltip = F23_steamers_tt
			hidden_effect = { set_variable = { which = F23_upsteam_trade_coal_req value = 10 } }
			525 = {
				change_trade_goods = coal
				remove_province_modifier = F23_heartland_safety
				add_province_modifier = { name = F23_heartbeat_of_steam duration = -1 }
			}
		} 
	}

	F23_the_jungle_rivers = {
		icon = mission_se_along_the_river
		position = 12
		required_missions = {
			F23_safe_sarhali_seas
			F23_steamers
		}
		provinces_to_highlight = {  } 

		trigger = {  
			if = { limit = { has_dlc = "Emperor" } has_estate_privilege = estate_burghers_private_trade_fleets }
			if = { limit = { has_dlc = "Domination" } has_estate_privilege = estate_burghers_economical_boost }
			4435  = { is_strongest_trade_power = ROOT } # Rayavhashapal, Dhenbasana trade node
			4460 = { is_strongest_trade_power = ROOT } # Sarnihanpur, Nadimraj trade node
			4485 = { is_strongest_trade_power = ROOT } # Sharaajaghal, Middle Rahen trade node
			4500 = { is_strongest_trade_power = ROOT } # Sarisung, Kharunyana trade node
			4559 = { is_strongest_trade_power = ROOT } # Xiadao, Xiadao trade node
			4630 = { is_strongest_trade_power = ROOT } # Sarilavhan, Shamakhad trade node
			4779 = { is_strongest_trade_power = ROOT } # Haiban, Haiban trade node
			4859 = { is_strongest_trade_power = ROOT } # Yanzhong, Yanzhong trade node
			4952 = { is_strongest_trade_power = ROOT } # Chatzin, Bianfang trade node
		} 

		effect = {  
			add_treasury = 1000
			# TODO OT, code the boost. 
		} 
	}

	F23_halass_inrivers = {
		icon = mission_advance_to_the_dnieper
		position = 13
		required_missions = {
			F23_the_path_to_halass
			F23_the_jungle_rivers
		}
		provinces_to_highlight = {  } 

		trigger = {  
			if = { limit = { has_dlc = "Emperor" } has_estate_privilege = estate_burghers_private_trade_fleets }
			if = { limit = { has_dlc = "Domination" } has_estate_privilege = estate_burghers_economical_boost }
			481  = { is_strongest_trade_power = ROOT } # Rasukes, Golkora trade node
			5460 = { is_strongest_trade_power = ROOT } # Pyazada, Haraagtseda trade node
			5608 = { is_strongest_trade_power = ROOT } # Yikikakeli, Yikikakeli trade node
			5728 = { is_strongest_trade_power = ROOT } # Fojora, Fojora trade node
			5872 = { is_strongest_trade_power = ROOT } # Foloyaman, Gunwa trade node
			5921 = { is_strongest_trade_power = ROOT } # Zerat, Zaret trade node
			5996 = { is_strongest_trade_power = ROOT } # Zulbur, Shalazar trade node
			6029 = { is_strongest_trade_power = ROOT } # Plaa Maat, Khet Highlands trade node
		} 

		effect = {  
			add_treasury = 1000
			# TODO OT, code the boost. 
		} 
	}

	F23_everything_at_our_disposal = {
		icon = mission_rb_monopolize_the_channel
		position = 14
		required_missions = { F23_the_sea_hold } 
		provinces_to_highlight = {  } 

		trigger = {  
			num_of_trading_bonuses = 10
			1296 = { is_strongest_trade_power = ROOT highest_value_trade_node = yes } # Eborthil		
		} 

		effect = {  
			# TODO OT, Sea Hold stuff
		} 
	}
}
strongbellow_d = { # Probably mostly done codewise? Needs to figure out A Home on the Seas.
	slot = 4
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = F23 } 

	F23_probing_the_depths = { # TODO OT, figure out what's going on here.
		icon = mission_look_west
		position = 10
		required_missions = { F23_strongbellow_pumps } 
		provinces_to_highlight = {  } 

		trigger = {  
			num_of_marines = 5
			F23_ideas = 6
		} 

		effect = {  } 
	}

	F23_ironclads = {
		icon = mission_gnomish_ship
		position = 11
		required_missions = { F23_steamers } 
		provinces_to_highlight = {  } 

		trigger = {  
			custom_trigger_tooltip = {
				tooltip = F23_ironclads_trigger_tt
				OR = {
					is_year = 1625
					AND = {
						navy_tradition = 0
						AND = { is_year = 1625 innovativeness =   0 }
						AND = { is_year = 1615 innovativeness =  20 }
						AND = { is_year = 1605 innovativeness =  40 }
						AND = { is_year = 1595 innovativeness =  60 }
						AND = { is_year = 1585 innovativeness =  80 }
						AND = { is_year = 1575 innovativeness = 100 }
					}
					AND = {
						navy_tradition = 20
						AND = { is_year = 1620 innovativeness =   0 }
						AND = { is_year = 1610 innovativeness =  20 }
						AND = { is_year = 1600 innovativeness =  40 }
						AND = { is_year = 1590 innovativeness =  60 }
						AND = { is_year = 1580 innovativeness =  80 }
						AND = { is_year = 1570 innovativeness = 100 }
					}
					AND = {
						navy_tradition = 40
						AND = { is_year = 1615 innovativeness =   0 }
						AND = { is_year = 1605 innovativeness =  20 }
						AND = { is_year = 1595 innovativeness =  40 }
						AND = { is_year = 1586 innovativeness =  60 }
						AND = { is_year = 1575 innovativeness =  80 }
						AND = { is_year = 1565 innovativeness = 100 }
					}
					AND = {
						navy_tradition = 60
						AND = { is_year = 1610 innovativeness =   0 }
						AND = { is_year = 1600 innovativeness =  20 }
						AND = { is_year = 1590 innovativeness =  40 }
						AND = { is_year = 1580 innovativeness =  60 }
						AND = { is_year = 1570 innovativeness =  80 }
						AND = { is_year = 1560 innovativeness = 100 }
					}
					AND = {
						navy_tradition = 80
						AND = { is_year = 1605 innovativeness =   0 }
						AND = { is_year = 1595 innovativeness =  20 }
						AND = { is_year = 1585 innovativeness =  40 }
						AND = { is_year = 1575 innovativeness =  60 }
						AND = { is_year = 1565 innovativeness =  80 }
						AND = { is_year = 1555 innovativeness = 100 }
					}
					AND = {
						navy_tradition = 100
						AND = { is_year = 1600 innovativeness =   0 }
						AND = { is_year = 1590 innovativeness =  20 }
						AND = { is_year = 1580 innovativeness =  40 }
						AND = { is_year = 1570 innovativeness =  60 }
						AND = { is_year = 1560 innovativeness =  80 }
						AND = { is_year = 1550 innovativeness = 100 }
					}
				}
			}
			525 = { base_production = 15 }
			treasury = 2500
			OR = {
				full_idea_group = maritime_ideas
				full_idea_group = naval_ideas
				AND = {
					naval_reformer = 3
					dip_power = 200
					mil_power = 200
				}
			}
		} 

		effect = {  
			add_treasury = -2500
			if = { limit = { OR = { full_idea_group = maritime_ideas full_idea_group = naval_ideas } } }
			else = { add_dip_power = -200 add_mil_power = 200 }
			# Man-of-war stuff
			526 = { add_permanent_province_modifier = { name = F23_the_port_hold duration = -1 } }
			if = {
				limit = { has_dlc = "Domination" }
				add_country_modifier = { name = F23_ironclads_enabled duration = -1 }
				add_country_modifier = { name = F23_ironclads_mod_1 duration = -1 }
			}
			else = {
				add_country_modifier = { name = F23_ironclads_mod_non_dom duration = -1 }
			}
		} 
	}

	F23_a_home_on_the_seas = {
		icon = mission_portuguese_malacca
		position = 12
		required_missions = { F23_ironclads } 
		provinces_to_highlight = {  } 

		trigger = {  
			treasury = 5000
		} 

		effect = {  
			add_treasury = -5000
		} 
	}

	F23_the_sea_hold = {
		icon = mission_gnomish_ship
		position = 13
		required_missions = { F23_a_home_on_the_seas } 
		provinces_to_highlight = {  } 

		trigger = {  
			custom_trigger_tooltip = {
				tooltip = F23_sea_hold_studies_complete
				has_country_flag = F23_sea_hold_studies_done 
			}
			trade_goods_produced_amount	 = { trade_goods = coal amount = 25 }
			# TODO OT Archaeology project?
			526 = { has_improved_hold_infrastructure = yes }
		} 

		effect = {
			custom_tooltip = F23_the_sea_hold_tt_1
			country_event = { id = flavour_ovdal_tungr.30 } # Sea Hold menu
			custom_tooltip = F23_the_sea_hold_tt_2
			hidden_effect = { 526 = { downgrade_improved_infrastructure = yes } }
		} 
	}

	F23_artificers_touch = {
		icon = mission_artificier_experience
		position = 14
		required_missions = { F23_the_sea_hold } 
		provinces_to_highlight = {  } 

		trigger = {  
			if = { limit = { has_estate = estate_artificers } artifice_has_points_for_basic = yes }
			else = { custom_trigger_tooltip = { tooltip = F23_10_artificer_capacity always = no } }
			estate_loyalty = {
				estate = estate_artificers
				loyalty = 60
			}
			525 = { has_building = drydock }
		} 

		effect = {  
			if = { limit = { has_estate = estate_artificers } artifice_granted_basic = yes }
			else = { custom_tooltip = F23_10_artificer_capacity_spent }
			change_estate_land_share = { estate = estate_artificers share = 10 }
			remove_country_modifier = F23_ironclads_mod_1
			add_country_modifier = { name = F23_ironclads_mod_2 duration = -1 }

			525 = { add_province_modifier = { name = F23_coal_port duration = -1 } }
			custom_tooltip = F23_artificers_touch_tt_1
			if = { limit = { has_dlc = "Rule Britannia" } custom_tooltip = earlier_coal_available_tt }
			set_country_flag = earlier_coal_available
			# TODO OT, Sea Hold stuff
		} 
	}
}
capstone = { # Haven't started yet, saving for when everything is almost done.
	slot = 3
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = F23 } 

	F23_center_of_the_world = {
		icon = secure_the_republic
		position = 15
		required_missions = {
			F23_the_copper_seaway
			F23_everything_at_our_disposal
			F23_artificers_touch
			F23_a_better_bulwar
		}
		provinces_to_highlight = {  } 

		trigger = {  } 

		effect = {  } 
	}
}
