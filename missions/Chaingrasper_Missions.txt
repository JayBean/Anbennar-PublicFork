### Chaingrasper content made by Dadevo ###


H74_intro_1 = {
	slot = 1
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = H74 } 

	chaingrasper_leaving_the_old_behind = {
		icon = rein_in_the_nobles
		position = 2
		required_missions = { chaingrasper_cowing_the_clans } 
		provinces_to_highlight = {  } 

		trigger = {
			NOT = { has_country_modifier = chaingrasper_upsetting_balance } 
			has_ruler_modifier = magic_realm_enchantment_modify_memories_forget_atrocities
			legitimacy = 90
		}

		effect = {
			add_legitimacy = -30
			add_country_modifier = {
				name = chaingrasper_a_fresh_wind
				duration = 9125
			}
		}
	}

	chaingrasper_sweeping_changes = {
		icon = reform_the_nomocanon
		position = 3
		required_missions = { chaingrasper_leaving_the_old_behind } 
		provinces_to_highlight = {  } 

		trigger = {
			employed_advisor = { category = ADM } 
			employed_advisor = { category = DIP } 
			employed_advisor = { category = MIL } 
			crown_land_share = 60
		}

		effect = {
			add_country_modifier = {
				name = chaingrasper_pushing_for_reforms
				duration = 7300
			}
		}
	}
}
H74_intro_2 = {
	slot = 2
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = H74 } 

	chaingrasper_cowing_the_clans = {
		icon = mission_dethrone_the_rurikovichs
		position = 1
		provinces_to_highlight = {  } 

		trigger = {
			OR = {
				has_ruler_modifier = witch_king_modifier
				custom_trigger_tooltip = {
					tooltip = chaingrasper_cowing_the_clans_trigger_tt
					has_estate_loyalty_modifier = {
						estate = estate_monstrous_tribes
						modifier = EST_VAL_REALM_MAGIC_SWAYING_THE_ESTATES_ENCHANTMENT_2
					}
				}
			}
		}

		effect = {
			change_estate_land_share = {
				estate = estate_monstrous_tribes
				share = -10
			}
			add_country_modifier = {
				name = chaingrasper_upsetting_balance
				duration = 1825
			}
		}
	}

	chaingrasper_settling_ovdal-az-an = {
		icon = mission_ghost_town
		position = 2
		required_missions = { chaingrasper_cowing_the_clans } 
		provinces_to_highlight = {  } 

		trigger = {
			if = {
				limit = {
					has_dlc = "Mandate of Heaven"
				}
				4284 = { has_state_edict = edict_encourage_development } #Ovdal-az-An
			}
			treasury = 150
		}

		effect = {
			add_treasury = -150
			4284 = { #Ovdal-az-An
				add_province_modifier = {
					name = chaingrasper_settling_hold
					duration = 9125
				}
			}
			hidden_effect = {
				country_event = {
					id = flavor_chaingrasper.2
					days = 1825
					random = 100
				}
			}
		}
	}

	chaingrasper_a_thriving_hold = {
		icon = mission_rb_trinity_college_dublin
		position = 3
		required_missions = { chaingrasper_settling_ovdal-az-an } 
		provinces_to_highlight = {
			province_id = 4284 #Ovdal-az-An
			OR = {
				NOT = { development = 40 } 
				NOT = { has_tax_building_trigger = yes } 
				if = {
					limit = { has_dlc = Leviathan } 
					NOT = { num_of_times_expanded_infrastructure = 1 } 
				}
			}
		}

		trigger = {
			4284 = { #Ovdal-az-An
				development = 40
				has_tax_building_trigger = yes
				if = {
					limit = { has_dlc = Leviathan } 
					num_of_times_expanded_infrastructure = 1
				}
				else = { ROOT = { treasury = 250 }  } 
			}
		}

		effect = {
			if = {
				limit = {
					has_dlc = "Mandate of Heaven"
				}
				4284 = { add_prosperity = 50 } #Ovdal-az-An
			}
			else = { add_prestige = 25 } 
			if = {
				limit = { NOT = { has_dlc = Leviathan }  } 
				add_treasury = -250
			}
			4284 = { #Ovdal-az-An
				add_province_modifier = {
					name = chaingrasper_thriving_hold
					duration = 9125
				}
			}
		}
	}

	chaingrasper_freed_from_shackles = {
		icon = mission_empowerment
		position = 4
		required_missions = {
			chaingrasper_sweeping_changes
			chaingrasper_a_thriving_hold
			chaingrasper_learning_from_the_raheni
		}
		provinces_to_highlight = {  } 

		trigger = { 
			custom_trigger_tooltip = {
				tooltip = chaingrasper_freed_from_shackles_trigger_tt
				has_ruler_flag = is_a_lich
			}
		}
		
		effect = {
			country_event = {
				id = flavor_chaingrasper.102
			}
			hidden_effect = { set_country_flag = chaingrasper_lichdom_achieved } 
			swap_non_generic_missions = yes
		}
	}
}
H74_intro_3 = {
	slot = 3
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = H74 } 

	chaingrasper_pursuing_immortality = {
		icon = mission_necromancy
		position = 1
		provinces_to_highlight = {  } 

		trigger = { 
			custom_trigger_tooltip = {
				tooltip = chaingrasper_pursuing_immortality_trigger_tt
				has_ruler_flag = ruler_studying_necromancy 
			}
		}

		effect = {
			define_advisor = {
				type = court_mage
				skill = 1
				culture = ROOT
				religion = ROOT
				discount = yes
			}
			add_country_modifier = {
				name = chaingrasper_pursuing_immortal
				duration = -1
				desc = chaingrasper_until_finished_studying_tt
			}
			custom_tooltip = chaingrasper_pursuing_immortality_effect_tt
			hidden_effect = { update_magic_study_experience_modifier = { value = 50 } } 
		}
	}

	chaingrasper_learning_from_the_raheni = {
		icon = medici_bank_ledgers
		position = 3
		required_missions = {
			chaingrasper_pursuing_immortality
			chaingrasper_raiding_the_surface
		}
		provinces_to_highlight = {  } 

		trigger = {
			OR = {
				spymaster = 1
				diplomat = 1
			}
			any_known_country = {
				OR = {
					technology_group = tech_raheni
					technology_group = tech_west_harimari
				}
				has_spy_network_from = {
					who = ROOT
					value = 50
				}
			}
		}

		effect = {
			hidden_effect = {
				every_known_country = {
					if = {
						limit = {
							OR = {
								technology_group = tech_raheni
								technology_group = tech_west_harimari
							}
							has_spy_network_from = {
								who = ROOT
								value = 50
							}
						}
						add_spy_network_from = {
							who = ROOT
							value = -50
						}
					}
				}
			}
			add_country_modifier = {
				name = "chaingrasper_raheni_knowledge"
				duration = 9125
			}
		}
	}

	chaingrasper_trapping_the_kariats = {
		icon = mission_impaled_soldies
		position = 4
		required_missions = { chaingrasper_learning_from_the_raheni } 
		provinces_to_highlight = {
			province_id = 4273 #Kariat Cave
			OR = {
				NOT = { AND = { owned_by = ROOT is_core = ROOT } }
				NOT = { province_has_current_tech_fort_trigger = yes } 
			}
		}

		trigger = {
			owns_core_province = 4273 #Kariat Cave
			4273 = { province_has_current_tech_fort_trigger = yes } #Kariat Cave
			custom_trigger_tooltip = {
				tooltip = is_abjuration_1_tt
				has_ruler_flag = abjuration_1
			}
		}

		effect = {
			4273 = { #Kariat Cave
				add_permanent_province_modifier = {
					name = "chaingrasper_trapped_caves"
					duration = -1
				}
			}
		}
	}
}
H74_intro_4 = {
	slot = 4
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = H74 } 

	chaingrasper_looking_beyond = {
		icon = mission_mnd_dai_prevent_division
		position = 1
		provinces_to_highlight = {  } 

		trigger = {
			treasury = 32
			dip_power = 100
		}

		effect = {
			add_treasury = -32
			add_dip_power = -100
			create_conquistador = { tradition = 20 } 
			add_country_modifier = {
				name = "chaingrasper_beyond_borders"
				duration = 18250
			}
		}
	}

	chaingrasper_raiding_the_surface = {
		icon = mission_pol_breadbasket_europe
		position = 2
		required_missions = { chaingrasper_looking_beyond } 
		provinces_to_highlight = {
			province_id = 4265 #Grozumdihr
			province_id = 4273 #Kariat Cave
			province_id = 4266 #Hul-az-Krakazol
		} 

		trigger = {
			custom_trigger_tooltip = {
				tooltip = chaingrasper_raiding_the_surface_trigger_tt
				OR = {
					4265 = { #Grozumdihr
						infantry_in_province = 10 
						infantry_in_province = ROOT
					} 
					4273 = { #Kariat Cave
						infantry_in_province = 10 
						infantry_in_province = ROOT
					} 
					4266 = { #Hul-az-Krakazol
						infantry_in_province = 10 
						infantry_in_province = ROOT
					} 
				}
			}
		}

		effect = {
			hidden_effect = {
				if = {
					limit = { 
						4265 = { #Grozumdihr
							infantry_in_province = 10 
							infantry_in_province = ROOT
						}  
					} 
					4446 = { #Dakhilamvi
						add_base_tax = -1
						add_devastation = 20
						if = {
							limit = {
								has_dlc = "Mandate of Heaven"
							}
							add_prosperity = -100
						}
						owner = { country_event = { id = flavor_chaingrasper.200 } }
					}
				}
				else_if = {
					limit = { 
						4273 = { #Kariat Cave
							infantry_in_province = 10 
							infantry_in_province = ROOT
						}
					} 
					4451 = { #Ghattub
						add_base_tax = -1
						add_devastation = 20
						if = {
							limit = {
								has_dlc = "Mandate of Heaven"
							}
							add_prosperity = -100
						}
						owner = { country_event = { id = flavor_chaingrasper.200 } }
					}
				}
				else_if = {
					limit = { 
						4266 = { #Hul-az-Krakazol
							infantry_in_province = 10 
							infantry_in_province = ROOT
						}
					} 
					4462 = { #Kepakkazol
						add_base_tax = -1
						add_devastation = 20
						if = {
							limit = {
								has_dlc = "Mandate of Heaven"
							}
							add_prosperity = -100
						}
						owner = { country_event = { id = flavor_chaingrasper.200 } }
					}
				}
				hidden_effect = {
					country_event = {
						id = flavor_chaingrasper.8
						days = 100
						random = 10
					}
				}
			}
			custom_tooltip = chaingrasper_chaingrasper_raiding_the_surface_effect_tt
			add_country_modifier = {
				name = "chaingrasper_surface_raids"
				duration = 3650
			}
		}
	}
	
	chaingrasper_undergrowth_goblins = {
		icon = mission_missive
		position = 3
		required_missions = { chaingrasper_raiding_the_surface } 
		provinces_to_highlight = {  } 

		trigger = {
			custom_trigger_tooltip = {
				tooltip = chaingrasper_undergrowth_goblins_trigger_tt
				OR = {
					knows_country = H88
					knows_country = H92
					knows_country = H93
					AND = {
						ambermine_alley_area = { has_discovered = ROOT } 
						anduz_area = { has_discovered = ROOT } 
						earthseed_area = { has_discovered = ROOT } 
					}
				}
			}
			has_ruler_modifier = magic_realm_enchantment_modify_memories_encourage_subservience
		}

		effect = {
			add_country_modifier = {
				name = "chaingrasper_foreign_goblin_influx"
				duration = 9125
			}
		}
	}

	chaingrasper_more_food_production = {
		icon = mission_green_village
		position = 4
		required_missions = { chaingrasper_undergrowth_goblins } 
		provinces_to_highlight = {
			owned_by = H74
			OR = {
				trade_goods = fungi
				trade_goods = serpentbloom
				trade_goods = livestock
			}
			OR = {
				NOT = { base_production = 3 }
			}
		}

		trigger = {
			num_of_owned_provinces_with = {
				value = 3
				OR = {
					trade_goods = fungi
					trade_goods = serpentbloom
					trade_goods = livestock
				}
				base_production = 3
			}
		}

		effect = {
			add_country_modifier = {
				name = "chaingrasper_influx_of_food"
				duration = 9125
			}
			
			4247 = { #Ovdal Kanzad
				add_permanent_claim = H74 #Chaingrasper
			} 

		}
	}
}

H74_intro_5 = {
	slot = 5
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = H74 } 
	
	chaingrasper_jade_goblin_trade = {
		icon = mission_feast
		position = 3
		required_missions = { chaingrasper_raiding_the_surface } 
		provinces_to_highlight = { }

		trigger = {
			OR = {
				AND = {
					custom_trigger_tooltip = {
						tooltip = chaingrasper_jade_goblin_trade_trigger_tt
						knows_country = R66
					}
					R66 = { 
						has_100_opinion_improved_relation = { target = ROOT }
					}
				}
				NOT = { exists = R66 }
			}
		}

		effect = {
			add_country_modifier = {
				name = "chaingrasper_trading_with_jade_goblins"
				duration = 7300
			}
		}
	}
}

H74_postlich_1 = {
	slot = 1
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { 
		tag = H74 
		has_country_flag = chaingrasper_lichdom_achieved
	} 

	chaingrasper_expanding_control = {
		icon = mission_science
		position = 5
		required_missions = { chaingrasper_freed_from_shackles } 
		provinces_to_highlight = { 
			province_id = 4284 #Ovdal-az-An
			NOT = { has_courthouse_building_trigger = yes }
		} 

		trigger = { 
			4284 = { has_courthouse_building_trigger = yes } #Ovdal-az-An
			custom_trigger_tooltip = {
				tooltip = is_enchantment_3_tt
				has_ruler_flag = enchantment_3
			}
		}
		
		effect = { 
			add_country_modifier = {
				name = chaingrasper_magical_control_1
				duration = -1  
			}
		} 
	}
}


H74_postlich_2 = {
	slot = 2
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { 
		tag = H74 
		has_country_flag = chaingrasper_lichdom_achieved
	} 

	chaingrasper_taking_on_apprentices = {
		icon = mission_delighted_mage
		position = 5
		required_missions = { chaingrasper_freed_from_shackles } 
		provinces_to_highlight = { 
			province_id = 4284 #Ovdal-az-An
			NOT = { has_building = mage_tower }
		} 

		trigger = { 
			4284 = { has_building = mage_tower } #Ovdal-az-An
		} 

		effect = { 
			custom_tooltip = chaingrasper_taking_on_apprentices_effect_tt
			hidden_effect = { update_magic_study_experience_modifier = { value = 10 }  } 
		}
	}

	chaingrasper_finishing_reforms = {
		icon = mission_vedic_education
		position = 6
		required_missions = { 
			chaingrasper_expanding_control 
			chaingrasper_taking_on_apprentices
		} 
		provinces_to_highlight = {  } 

		trigger = {
			reform_level = 5 
		} 

		effect = { 
			change_government = theocracy
			add_government_reform = chaingrasper_early_dakocracy_reform 
			override_country_name = DAKAZ_CARZVIYA
			hidden_effect = {
				change_government_reform_progress = -640 #Amount needed to get tier 5 tribal
				country_event = { #Flavor for future artifice rebellion
					id = flavor_chaingrasper.4
					days = 10
				}
				country_event = { #Hidden, sets up mage/artificer organisations
					id = flavor_chaingrasper.400
					days = 1
				}
			}
		} 
	}

	chaingrasper_granite_council = {
		icon = mission_noble_council
		position = 8
		required_missions = {
			chaingrasper_finishing_reforms
			chaingrasper_enchanted_weaponry
		}
		provinces_to_highlight = { 
			OR = {
				AND = {
					province_id = 4284 #Ovdal-az-An
					NOT = { has_building = state_house }
				}
				AND = {
					owned_by = H74
					OR = {
						has_terrain = dwarven_hold_surface
						has_terrain = dwarven_hold
					}
					NOT = { has_courthouse_building_trigger = yes }
				}
			}
		} 

		trigger = { 
			H74_ideas = 5
			4284 = { has_building = state_house } #Ovdal-az-An
			custom_trigger_tooltip = {
				tooltip = chaingrasper_granite_council_trigger_tt
				all_owned_province = {
					if = {
						limit = {
							OR = {
								has_terrain = dwarven_hold_surface
								has_terrain = dwarven_hold
							}
						}
						has_courthouse_building_trigger = yes
					}
				}
			}
			adm_power = 250
		} 

		effect = { 
			add_adm_power = -250
			add_country_modifier = {
				name = chaingrasper_council_assisted_administration
				duration = -1
			}
		} 
	}

	chaingrasper_under_watchful_eyes = {
		icon = mission_star_ascendency
		position = 9
		required_missions = { chaingrasper_granite_council } 
		provinces_to_highlight = {  } 

		trigger = { 
			custom_trigger_tooltip = {
				tooltip = is_divination_3_tt
				has_ruler_flag = divination_3
			}
			custom_trigger_tooltip = {
				tooltip = chaingrasper_under_watchful_eyes_trigger_tt
				has_country_flag = chaingrasper_dealt_with_artificers
			}
			adm_power = 100
		} 

		effect = { 
			add_adm_power = -100
			remove_government_reform = chaingrasper_early_dakocracy_reform
			add_government_reform = chaingrasper_dakocracy_reform 
			remove_country_modifier = chaingrasper_magical_control_1
			add_country_modifier = {
				name = chaingrasper_magical_control_2
				duration = -1
			}			
		} 
	}

	chaingrasper_preparing_to_march_west = {
		icon = mission_mounted_battle
		position = 10
		required_missions = { chaingrasper_under_watchful_eyes } 
		provinces_to_highlight = {
			province_id = 4218 #Gor Ozumbrog
			OR = {
				NOT = { AND = { owned_by = ROOT is_core = ROOT } }
				NOT = { province_has_current_tech_fort_trigger = yes }
				NOT = { has_building = ramparts }
				NOT = { hold_condition = { Repaired = yes } }
			}
		} 

		trigger = { 
			owns_core_province = 4218 #Gor Ozumbrog
			4218 = { #Gor Ozumbrog
				hold_condition = { Repaired = yes }
				has_building = ramparts
				province_has_current_tech_fort_trigger = yes
			}
		} 

		effect = { 
			2914 = { add_permanent_claim = H74 } #Verkal Gulan
			4124 = { add_permanent_claim = H74 } #Seghdihr
			4078 = { add_permanent_claim = H74 } #Hehodovar
		} 
	}
}

H74_postlich_3 = {
	slot = 3
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { 
		tag = H74 
		has_country_flag = chaingrasper_lichdom_achieved
	} 

	chaingrasper_not_just_a_hold = {
		icon = mission_city_prosperity
		position = 5
		required_missions = {
			chaingrasper_freed_from_shackles
			chaingrasper_more_food_production
		}
		provinces_to_highlight = { 
			area = ovdal_az_an_area
			has_terrain = dwarven_road
			OR = {
				NOT = { development = 10 }
				NOT = { has_tax_building_trigger = yes }
			}
		} 

		trigger = {
			custom_trigger_tooltip = {
				tooltip = chaingrasper_not_just_a_hold_trigger_tt
				all_owned_province = {
					if = {
						limit = { 
							area = ovdal_az_an_area
							has_terrain = dwarven_road 
						}
						development = 10
						has_tax_building_trigger = yes
					}
				}
			}
		} 

		effect = { 
			ovdal_az_an_area = {
				if = {
					limit = { has_terrain = dwarven_road }
					add_province_modifier = {
						name = chaingrasper_railway_towns
						duration = -1
					}
				}
			}
		} 
	}

	chaingrasper_divining_for_mithril = {
		icon = mission_kon_conquer_lub
		position = 6
		required_missions = { chaingrasper_not_just_a_hold } 
		provinces_to_highlight = { 
			province_id = 4268 #Granite Blockade
			OR = {
				NOT = { has_building = mage_tower }
				NOT = { base_production = 6 }
			}
		} 

		trigger = { 
			custom_trigger_tooltip = {
				tooltip = is_divination_2_tt
				has_ruler_flag = divination_2
			}
			4268 = { #Granite Blockade
				has_building = mage_tower
				base_production = 6
			}
		} 

		effect = {
			4268 = { #Granite Blockade
				if = {
					limit = { NOT = { trade_goods = mithril } }
					add_base_production = -3
					change_trade_goods = mithril
				}
				add_province_modifier = {
					name = chaingrasper_magical_mithril
					duration = -1
				}
			}
		} 
	}

	chaingrasper_enchanted_weaponry = {
		icon = mission_crystal_cave
		position = 7
		required_missions = { chaingrasper_divining_for_mithril } 
		provinces_to_highlight = {
			province_id = 4284 #Ovdal-az-An
			NOT = { has_building = mage_tower }
			if = {
				limit = { has_dlc = "Leviathan" } 
				NOT = { has_multiple_manufactory_trigger = { VAL = 2 } }
			}
			else = {
				NOT = { has_dwarven_hold_2 = yes }
			}
		} 

		trigger = {
			4284 = { #Ovdal-az-An
				if = {
					limit = { has_dlc = "Leviathan" } 
					custom_trigger_tooltip = {
						tooltip = chaingrasper_enchanted_weaponry_trigger_tt
						has_building = mage_tower
						has_multiple_manufactory_trigger = { VAL = 2 }
					}
				}
				else = {
					has_building = mage_tower
					has_dwarven_hold_2 = yes
				}
			}
		} 

		effect = { 
			4284 = { #Ovdal-az-An
				add_province_modifier = {
					name = chaingrasper_magical_weaponry
					duration = -1
				}
			}
		} 
	}

	chaingrasper_goblin_dominance = {
		icon = mission_unite_home_region
		position = 10
		required_missions = {
			chaingrasper_under_watchful_eyes
			chaingrasper_taking_gronstunad
		}
		provinces_to_highlight = { 
			region = jade_mines_region
			owner = { NOT =  { primary_culture = undergrowth_goblin } }
		} 

		trigger = {
			jade_mines_region = {
				type = all
				owner = { primary_culture = undergrowth_goblin }#No nations that are not cave goblins own any provinces in this scope (Jade Mines)
			}
		} 

		effect = {
			hidden_effect =
				{ set_country_flag = chaingrasper_endgame_achieved }
			add_country_modifier = {
				name = chaingrasper_goblin_serpentspine
				duration = -1
			}
			swap_non_generic_missions = yes
		} 
	}
}

H74_postlich_4 = {
	slot = 4
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { 
		tag = H74 
		has_country_flag = chaingrasper_lichdom_achieved
	} 

	chaingrasper_securing_the_undergrowth = {
		icon = mission_burning_castle
		position = 5
		required_missions = { chaingrasper_more_food_production } 
		provinces_to_highlight = {
			OR = {
				province_id = 4247 #Ovdal Kanzad
				province_id = 4265 #Grozumdihr
			}
			NOT = { owned_by = H74 }
		} 

		trigger = { 
			owns_core_province = 4247 #Ovdal Kanzad
			owns_core_province = 4265 #Grozumdihr
			dip_power = 250
		} 

		effect = { 
			add_dip_power = -250
			add_country_modifier = {
				name = chaingrasper_settling_the_undergrowth
				duration = 18250
			}
		} 
	}

	chaingrasper_intensifying_the_raids = {
		icon = mission_destroyed_city
		position = 7
		required_missions = { chaingrasper_securing_the_undergrowth } 
		provinces_to_highlight = { 
			OR = {
				AND = {
					province_id = 4265 #Grozumdihr
					OR = {
						NOT = { AND = { owned_by = ROOT is_core = ROOT } }
						NOT = { has_manpower_building_trigger = yes }
						NOT = { has_forcelimit_building_trigger = yes }
					}
				}
				AND = {
					province_id = 4266 #Hul-az-Krakazol
					OR = {
						NOT = { AND = { owned_by = ROOT is_core = ROOT } }
						NOT = { has_manpower_building_trigger = yes }
						NOT = { has_forcelimit_building_trigger = yes }
					}
				}
			}
		} 

		trigger = { 
			OR = {
				AND = {
					owns_core_province = 4265 #Grozumdihr
					4265 = { #Grozumdihr
						infantry_in_province = 40
						infantry_in_province = ROOT
						has_manpower_building_trigger = yes
						has_forcelimit_building_trigger = yes
					}
				}
				AND = {
					owns_core_province = 4266 #Hul-az-Krakazol
					4266 = { #Hul-az-Krakazol
						infantry_in_province = 40
						infantry_in_province = ROOT
						has_manpower_building_trigger = yes
						has_forcelimit_building_trigger = yes
					}
				}
			}
		} 

		effect = {
			custom_tooltip = chaingrasper_intensifying_the_raids_effect_tt
			hidden_effect = {
				if = { #Remove 40 troops from Grozumdihr or Hul-az-Krakazol
					limit = { 
						4265 = { #Grozumdihr
							infantry_in_province = H74 #Chaingrasper
						} 
					}
					4265 = { #Grozumdihr
						kill_units = {
							who = H74
							type = infantry
							amount = 40
						}
					}
				}
				else_if = {
					limit = { 
						4266 = { #Hul-az-Krakazol
							infantry_in_province = H74 #Chaingrasper
						} 
					}
					4266 = { #Hul-az-Krakazol
						kill_units = {
							who = H74
							type = infantry
							amount = 40					}
					}
				}
			}
			add_country_modifier = {
				name = chaingrasper_raiding_rahen
				duration = 18250
			}
			4397 = { add_permanent_claim = H74 } #Sharaja
		}
	}

	chaingrasper_into_the_jade_mines = {
		icon = mission_mechanical_mining
		position = 8
		required_missions = {
			chaingrasper_enchanted_weaponry
			chaingrasper_intensifying_the_raids
		}
		provinces_to_highlight = { 
			province_id = 4350 #Tuwad-Dhumankon
		}

		trigger = { 
			OR = {
				4350 = { #Tuwad-Dhumankon
					owner = { war_with = H74 } #Chaingrasper
				}
				owns = 4350 #Tuwad-Dhumankon
			}
		} 

		effect = { 
			add_country_modifier = {
				name = chaingrasper_struggle_for_jade_mines
				duration = 3650
			}
			dwarovrod_66_68_area = { add_permanent_claim = H74 }
			tuwad_area = { add_permanent_claim = H74 }
			dwarovrod_71_74_area = { add_permanent_claim = H74 }
			4311 = { add_permanent_claim = H74 } #Gronstunad
		} 
	}

	chaingrasper_taking_gronstunad = {
		icon = mission_burning_parthenon
		position = 9
		required_missions = { chaingrasper_into_the_jade_mines } 
		provinces_to_highlight = { 
			province_id = 4311 #Gronstunad
		} 

		trigger = { 
			owns = 4311 #Gronstunad
		} 

		effect = { 
			jade_mines_region = { add_permanent_claim = H74 }
			country_event = {
				id = flavor_chaingrasper.6
			}
		} 
	}

	chaingrasper_the_eastern_capital = {
		icon = mission_rb_trinity_college_dublin
		position = 10
		required_missions = { chaingrasper_taking_gronstunad } 
		provinces_to_highlight = { 
			province_id = 4311 #Gronstunad
			OR = {
				NOT = { hold_condition = { Repaired = yes } }
				NOT = { development = 60 }
				NOT = { has_building = state_house }
				NOT = { province_has_center_of_trade_of_level = 3 }
			}
		} 

		trigger = { 
			owns_core_province = 4311 #Gronstunad
			4311 = { #Gronstunad
				hold_condition = { Repaired = yes }
				development = 60
				has_building = state_house
				province_has_center_of_trade_of_level = 3
			}
		} 

		effect = { 
			country_event = {
				id = flavor_chaingrasper.7
			}
			4311 = { #Gronstunad
				add_province_modifier = {
					name = chaingrasper_eastern_capital
					duration = -1
				}
			}
		} 
	}
}

H74_postlich_5 = {
	slot = 5
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { 
		tag = H74 
		has_country_flag = chaingrasper_lichdom_achieved
	} 

	chaingrasper_a_frontline_hold = {
		icon = mission_conquer_cuttack
		position = 5
		required_missions = { chaingrasper_jade_goblin_trade } 
		provinces_to_highlight = { 
			province_id = 4266 #Hul-az-Krakazol
			OR = {
				NOT = { AND = { owned_by = ROOT is_core = ROOT } }
				NOT = { hold_condition = { Repaired = yes } }
				NOT = { province_has_current_tech_fort_trigger = yes }
				NOT = { has_building = ramparts }
			}			
		} 

		trigger = { 
			owns_core_province = 4266 #Hul-az-Krakazol
			4266 = { #Hul-az-Krakazol
				hold_condition = { Repaired = yes }
				has_building = ramparts
				province_has_current_tech_fort_trigger = yes
			}
		} 

		effect = { 
			4266 = { #Hul-az-Krakazol
				add_province_modifier = {
					name = chaingrasper_frontline_hold
					duration = -1
				}
			}
		} 
	}

	chaingrasper_large_scale_experiments = {
		icon = mission_dark_ritual
		position = 6
		required_missions = { chaingrasper_securing_the_undergrowth } 
		provinces_to_highlight = { 
			province_id = 4247 #Ovdal Kanzad
			OR = {
				NOT = { hold_condition = { Repaired = yes } }
				NOT = { development = 60 }
			}
		} 

		trigger = { 
			4247 = { #Ovdal Kanzad
				hold_condition = { Repaired = yes }
				development = 60
			}
		}

		effect = { 
			large_decrease_of_dwarven_tolerance_effect = yes
			4247 = { #Ovdal Kanzad
				add_province_modifier = {
					name = chaingrasper_experimental_laboratory
					duration = -1
				}
			}
			custom_tooltip = chaingrasper_large_scale_experiments_effect_tt
			hidden_effect = { update_magic_study_experience_modifier = { value = 20 }  } 
		} 
	}

	chaingrasper_otherworldly_auxiliaries = {
		icon = mission_arise_ashes
		position = 7
		required_missions = { chaingrasper_large_scale_experiments } 
		provinces_to_highlight = { } 

		trigger = { 
			custom_trigger_tooltip = {
				tooltip = is_conjuration_2_tt
				has_ruler_flag = conjuration_2
			}
		} 

		effect = { 
			add_country_modifier = {
				name = chaingrasper_auxiliaries
				duration = -1
			}
		} 
	}

	chaingrasper_the_art_of_glassmaking = {
		icon = bohemian_crystal
		position = 8
		required_missions = { chaingrasper_intensifying_the_raids } 
		provinces_to_highlight = {
			OR = {
				province_id = 4397 #Sharaja
				AND = {
					province_id = 4265 #Grozumdihr
					NOT = { hold_condition = { Repaired = yes } }
				}
			}
		} 

		trigger = { 
			OR = {
				owns = 4397 #Sharaja
				4397 = { #Sharaja
					controlled_by = H74 #Chaingrasper
					is_looted = yes
					custom_trigger_tooltip = {
						tooltip = chaingrasper_raiding_warscore_tt
						owner = {
							war_with = ROOT
							NOT = {
								war_score_against	= {
									who = ROOT
									value = -50
								}
							}
						}
					}
				}
			}
			owns_core_province = 4265 #Grozumdihr
			4265 = { hold_condition = { Repaired = yes } }
		} 

		effect = { 
			4265 = { #Grozumdihr
				add_base_production = 2
				change_trade_goods = glass
				add_province_modifier = {
					name = chaingrasper_raheni_glassmaking
					duration = -1
				}
			}
			4411 = { #Dhenijansar
				add_permanent_claim = H74 #Chaingrasper
			}
			hidden_effect = {
				4397 = { #Sharaja
					remove_claim = H74 #Chaingrasper
					owner = {
						country_event = {
							id = flavor_chaingrasper.201 #Sacking of Sharaja
						}
					}
				}
			}
		} 
	}

	chaingrasper_secrets_of_the_lotus_court = {
		icon = law_of_the_pious
		position = 9
		required_missions = { chaingrasper_the_art_of_glassmaking } 
		provinces_to_highlight = { 
			province_id = 4411
		} 

		trigger = { 
			OR = {
				owns = 4411 #Dhenijansar
				4411 = { #Dhenijansar
					controlled_by = H74 #Chaingrasper
					is_looted = yes
					custom_trigger_tooltip = {
						tooltip = chaingrasper_raiding_warscore_tt
						owner = {
							war_with = ROOT
							NOT = {
								war_score_against	= {
									who = ROOT
									value = -50
								}
							}
						}
					}
				}
			}
		} 

		effect = { 
			add_country_modifier = {
				name = chaingrasper_bureaucratic_insight
				duration = 9125
			}
			hidden_effect = {
				4411 = {
					owner = {
						country_event = {
							id = flavor_chaingrasper.202 #Sacking of Dhenijansar
						}
					}
				}
			}
		} 
	}

	chaingrasper_terror_of_rahen = {
		icon = mission_burning_castle
		position = 10
		required_missions = { chaingrasper_secrets_of_the_lotus_court } 
		provinces_to_highlight = {  } 

		trigger = { 
			OR = {
				has_won_war_against = {
					who = R62 #The Command
					max_years_since = 25
				}
				NOT = { exists = R62 } #The Command
			}
			if = {
				limit = {
					has_dlc = "Leviathan"
				}
				num_of_times_used_pillage_capital = 25
			}
			else = {
				num_of_war_reparations = 10
			}
		} 

		effect = { 
			add_country_modifier = {
				name = chaingrasper_terrorizing_rahen
				duration = -1
			}
		} 
	}
}

H74_angry_artificers = {
	slot = 1
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { 
		tag = H74 
		has_country_flag = chaingrasper_angry_artificers_achieved
	} 

	chaingrasper_tracking_down_dissidents = {
		icon = mission_fire_judgement
		position = 7
		required_missions = { chaingrasper_finishing_reforms } 
		provinces_to_highlight = { 
			has_province_modifier = chaingrasper_artificer_resistance
			NOT = { has_courthouse_building_trigger = yes }
		} 

		trigger = { 
			estate_loyalty = {
				estate = estate_mages
				loyalty = 60
			}
			custom_trigger_tooltip = {
				tooltip = chaingrasper_tracking_down_dissidents_trigger_tt
				all_owned_province = {
					if = {
						limit = { has_province_modifier = chaingrasper_artificer_resistance }
						has_courthouse_building_trigger = yes
					}
				}
			}
		} 

		effect = { 
			hidden_effect = {
				set_country_flag = chaingrasper_can_get_constabularies
				remove_estate_privilege = estate_mages_organization_state
				every_owned_province = {
					limit = { has_province_modifier = chaingrasper_artificer_resistance }
					spawn_rebels = {
						type = particularist_rebels
						size = 2
					}
				}
			}
			set_estate_privilege = estate_mages_organization_constabularies
			remove_country_modifier = chaingrasper_disgruntled_artificers
			
			custom_tooltip = chaingrasper_tracking_down_dissidents_effect_tt
		}
	}

	chaingrasper_subduing_the_artificers = {
		icon = mission_captured
		position = 8
		required_missions = { chaingrasper_tracking_down_dissidents } 
		provinces_to_highlight = {  } 

		trigger = { 
			NOT = { num_of_rebel_armies = 1 }
			estate_loyalty = {
				estate = estate_artificers
				loyalty = 30
			}
		} 

		effect = {
			custom_tooltip = chaingrasper_get_constabularies_tt
			custom_tooltip = chaingrasper_artificers_curtailed_tt

			hidden_effect = {
				add_country_modifier = {
					name = chaingrasper_artificers_curtailed
					duration = -1
				}
				set_country_flag = chaingrasper_dealt_with_artificers
				every_owned_province = {
					remove_province_modifier = chaingrasper_artificer_resistance
				}
				remove_estate_privilege = estate_artificers_organization_independent_unions
				set_estate_privilege = estate_artificers_organization_state

			}
			custom_tooltip = chaingrasper_defeated_artificers_tt
		}
	}
}

H74_postlich_1_extra = { #I love paradox MT slot logic
	slot = 1
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { 
		tag = H74 
		has_country_flag = chaingrasper_lichdom_achieved
	} 

	chaingrasper_homunculi_assistants = {
		icon = crush_heretic_strongholds
		position = 10
		required_missions = { chaingrasper_under_watchful_eyes } 
		provinces_to_highlight = {  } 

		trigger = {
			custom_trigger_tooltip = {
				tooltip = chaingrasper_homunculi_assistants_trigger_tt
				OR = {
					has_country_modifier = artist_homunculus
					has_country_modifier = inquisitor_homunculus
					has_country_modifier = master_of_mint_homunculus
					has_country_modifier = natural_scientist_homunculus
					has_country_modifier = philosopher_homunculus
					has_country_modifier = theologian_homunculus
					has_country_modifier = treasurer_homunculus
					has_country_modifier = colonial_governor_homunculus
					has_country_modifier = diplomat_homunculus
					has_country_modifier = naval_reformer_homunculus
					has_country_modifier = navigator_homunculus
					has_country_modifier = spymaster_homunculus
					has_country_modifier = statesman_homunculus
					has_country_modifier = trader_homunculus
					has_country_modifier = army_organiser_homunculus
					has_country_modifier = army_reformer_homunculus
					has_country_modifier = commandant_homunculus
					has_country_modifier = grand_captain_homunculus
					has_country_modifier = master_recruiter_homunculus
					has_country_modifier = military_engineer_homunculus
					has_country_modifier = quartermaster_homunculus
				}
			}
		} 

		effect = { 
			add_country_modifier = {
				name = chaingrasper_magical_assistants
				duration = 9125
			}
		} 
	}
}

H74_endgame_1 = {
	slot = 1
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		tag = H74 
		has_country_flag = chaingrasper_endgame_achieved
	} 

	chaingrasper_a_centralized_treasury = {
		icon = mission_african_gold
		position = 11
		required_missions = { chaingrasper_preparing_to_march_west } 
		provinces_to_highlight = { 
			province_id = 2914 #Verkal Gulan
			OR = {
				NOT = { hold_condition = { Repaired = yes } }
				NOT = { base_production = 25 }
				NOT = { has_courthouse_building_trigger = yes }
				NOT = { has_building = state_house }
			}
		} 

		trigger = { 
			owns_core_province = 2914 #Verkal Gulan
			2914 = { #Verkal Gulan
				hold_condition = { Repaired = yes }
				base_production = 25
				has_courthouse_building_trigger = yes
				has_building = state_house
			}
		} 

		effect = { 
			2914 = { #Verkal Gulan
				add_province_modifier = {
					name = chaingrasper_gold_standard
					duration = -1
				}
			}
		} 
	}
}

H74_endgame_2 = {
	slot = 2
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		tag = H74 
		has_country_flag = chaingrasper_endgame_achieved
	} 

	chaingrasper_surrogate_damestear = {
		icon = mission_sw_torquoise_mining
		position = 11
		required_missions = { chaingrasper_preparing_to_march_west } 
		provinces_to_highlight = { 
			province_id = 4078 #Hehodovar
			OR = {
				NOT = { hold_condition = { Repaired = yes } }
				NOT = { has_building = mage_tower }
				AND = {
					NOT = { trade_goods = coal }
					NOT = { has_dwarven_hold_4 = yes }
				}
			}
		} 

		trigger = { 
			owns_core_province = 4078 #Hehodovar
			4078 = { #Hehodovar
				hold_condition = { Repaired = yes }
				has_building = mage_tower
				OR = {
					trade_goods = coal
					has_dwarven_hold_4 = yes
				}
			}
			custom_trigger_tooltip = {
				tooltip = is_transmutation_3_tt
				has_ruler_flag = transmutation_3
			}
		} 

		effect = {
			4078 = { #Hehodovar
				if = {
					limit = { NOT = { trade_goods = coal } }
					change_trade_goods = coal
				}
				add_province_modifier = {
					name = chaingrasper_hehodovar_damestear
					duration = -1
				}
			}
		} 
	}

	chaingrasper_damestear_grenades = {
		icon = mission_runeforged_cannons
		position = 12
		required_missions = { chaingrasper_surrogate_damestear } 
		provinces_to_highlight = { 
			province_id = 4078 #Hehodovar
			OR = {
				NOT = { base_production = 30 }
				NOT = { has_building = furnace }
			}
		} 

		trigger = { 
			4078 = { #Hehodovar
				base_production = 30
				has_building = furnace
			}
		} 

		effect = { 
			add_country_modifier = {
				name = chaingrasper_surrogate_grenades
				duration = -1
			}
		} 
	}
}

H74_endgame_3 = {
	slot = 3
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		tag = H74 
		has_country_flag = chaingrasper_endgame_achieved
	} 

	chaingrasper_the_threat_of_korashi = {
		icon = mission_artificier_experience
		position = 11
		required_missions = { chaingrasper_goblin_dominance } 
		provinces_to_highlight = { 
			province_id = 4811 #Jianxusi
		} 

		trigger = { 
			NOT = { exists = Y01 }
			OR = {
				owns = 4811 #Jianxusi
				4811 = { #Jianxusi
					controlled_by = H74 #Chaingrasper
					is_looted = yes
					custom_trigger_tooltip = {
						tooltip = chaingrasper_raiding_warscore_tt
						owner = {
							war_with = ROOT
							NOT = {
								war_score_against	= {
									who = ROOT
									value = -50
								}
							}
						}
					}
				}
			}
		} 

		effect = { 
			add_country_modifier = {
				name = chaingrasper_safe_from_assassins
				duration = -1
			}
		} 
	}

	chaingrasper_ruler_without_peer = {
		icon = mission_dark_ritual
		position = 12
		required_missions = {
			chaingrasper_surrogate_damestear
			chaingrasper_the_threat_of_korashi
		}
		provinces_to_highlight = { } 

		trigger = { 
			adm = 6
			dip = 6
			mil = 6
			custom_trigger_tooltip = {
				tooltip = legendary_mage_tooltip
				has_ruler_flag = abjuration_3
				has_ruler_flag = conjuration_3
				has_ruler_flag = divination_3
				has_ruler_flag = enchantment_3
				has_ruler_flag = evocation_3
				has_ruler_flag = illusion_3
				has_ruler_flag = necromancy_3
				has_ruler_flag = transmutation_3
			}
		} 

		effect = { 
			add_country_modifier = {
				name = chaingrasper_unrivalled_magical_power
				duration = -1
			}
		} 
	}

	chaingrasper_indisputable_sovereign = {
		icon = mission_thinking_king
		position = 13
		required_missions = {
			chaingrasper_ruler_without_peer
			chaingrasper_keeping_everyone_fed
		}
		provinces_to_highlight = { 
			superregion = east_serpentspine_superregion
			OR = {
				NOT = { owned_by = H74 } #Chaingrasper
				AND = {
					NOT = { culture_group = goblin }
					NOT = { has_owner_accepted_culture = yes }
				}
			}
		} 

		trigger = { 
			if = {
				limit = { 
					OR = {
						has_dlc = "Rights of Man"
						has_dlc = "Emperor"
					}
				}
				custom_trigger_tooltip = {
					tooltip = chaingrasper_indisputable_sovereign_trigger_tt
					NOT = { great_power_rank = 4 }
				}
			}
			else = {
				total_development = 2000
			}
			east_serpentspine_superregion = {
				type = all
				owned_by = H74 #Chaingrasper
				OR = {
					culture_group = goblin
					has_owner_accepted_culture = yes
				}
			}
		} 

		effect = { 
			add_country_modifier = {
				name = chaingrasper_magical_control_3
				duration = -1
			}
			remove_country_modifier = chaingrasper_magical_control_2
		} 
	}
}

H74_endgame_4 = {
	slot = 4
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		tag = H74 
		has_country_flag = chaingrasper_endgame_achieved
	} 

	chaingrasper_integrating_the_jade_goblins = {
		icon = mission_discussion_arch
		position = 11
		required_missions = {
			chaingrasper_goblin_dominance
			chaingrasper_the_eastern_capital
		}
		provinces_to_highlight = { 
			region = jade_mines_region
			OR = {
				has_terrain = dwarven_hold_surface
				has_terrain = dwarven_hold
			}
			OR = {
				NOT = { AND = { owned_by = ROOT is_core = ROOT } }
				NOT = { hold_condition = { Repaired = yes } }
			}
		} 

		trigger = {
			custom_trigger_tooltip = {
				tooltip = chaingrasper_integrating_the_jade_goblins_trigger_tt
				jade_mines_region = {
					type = all
					if = {
						limit = {
							OR = {
								has_terrain = dwarven_hold_surface
								has_terrain = dwarven_hold
							}
						}
						owned_by = H74 #Chaingrasper
						is_core = H74 #Chaingrasper
						hold_condition = { Repaired = yes }
					}
				}				
			}
			has_ruler_modifier = magic_realm_enchantment_modify_memories_encourage_subservience
		} 

		effect = { 
			add_country_modifier = {
				name = chaingrasper_integrating_jade_mines
				duration = 9125
			}
		} 
	}

	chaingrasper_keeping_everyone_fed = {
		icon = mission_a_million_rice_fields
		position = 12
		required_missions = { chaingrasper_integrating_the_jade_goblins } 
		provinces_to_highlight = { 
			province_id = 4326
			OR = {
				NOT = { base_production = 16 }
				NOT = { has_manufactory_trigger = yes }
			}
		} 

		trigger = { 
			4326 = { #Powder Crevasse
				base_production = 16
				has_manufactory_trigger = yes
			}
			custom_trigger_tooltip = {
				tooltip = chaingrasper_keeping_everyone_fed_trigger_tt
				any_owned_province = {
					OR = {
						has_province_modifier = magic_realm_transmutation_plant_growth_1
						has_province_modifier = magic_realm_transmutation_plant_growth_2
						has_province_modifier = magic_realm_transmutation_plant_growth_3
						has_province_modifier = magic_realm_transmutation_plant_growth_4
					}
				}
			}
		} 

		effect = {
			4326 = { #Powder Crevasse
				if = {
					limit = { NOT = { trade_goods = salt } }
					change_trade_goods = salt
				}
			}
			custom_tooltip = chaingrasper_keeping_everyone_fed_effect_tt
			hidden_effect = {
				the_flank_area = {
					limit = {
						NOT = {
							trade_goods = serpentbloom
							trade_goods = fungi
							trade_goods = livestock
						}
					}
					change_trade_goods = serpentbloom
				}
				jazka_area = {
					limit = {
						NOT = { 
							trade_goods = serpentbloom
							trade_goods = fungi
							trade_goods = livestock
						}
					}
					change_trade_goods = serpentbloom
				}
			}
			add_country_modifier = {
				name = chaingrasper_plentiful_food
				duration = -1
			}
		} 
	}
}

H74_endgame_5 = {
	slot = 5
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		tag = H74 
		has_country_flag = chaingrasper_endgame_achieved
	} 

	chaingrasper_war_mage_battalions = {
		icon = mission_mage_general
		position = 11
		required_missions = { chaingrasper_the_eastern_capital } 
		provinces_to_highlight = { 
			province_id = 4313
			OR = {
				NOT = { AND = { owned_by = ROOT is_core = ROOT } }
				NOT = { hold_condition = { Repaired = yes } }
				NOT = { development = 50 }
				NOT = { has_building = mage_tower }
			}
		} 

		trigger = { 
			owns_core_province = 4313 #Vurdriz-Andriz
			4313 = { #Vurdriz-Andriz
				hold_condition = { Repaired = yes }
				development = 50
				has_building = mage_tower
			}
			has_estate_privilege = estate_mages_battlemage_academies
			custom_trigger_tooltip = {
				tooltip = is_evocation_3_tt
				has_ruler_flag = evocation_3
			}
		} 

		effect = {
			create_war_wizard_effect = yes
			add_country_modifier = {
				name = chaingrasper_magical_support_battalions
				duration = -1
			}
		} 
	}

	chaingrasper_warding_the_entrances = {
		icon = mission_sinister_castle
		position = 12
		required_missions = { chaingrasper_integrating_the_jade_goblins } 
		provinces_to_highlight = { #These are all the East Serpentspine entrances
			OR = {
				AND = {
					province_id = 4272 #Dirthole Rock
					NOT = { has_building = mage_tower }
				}
				AND = {
					province_id = 4265 #Grozumdihr
					NOT = { has_building = mage_tower }
				}
				AND = {
					province_id = 4273 #Kariat Cave
					NOT = { has_building = mage_tower }
				}
				AND = {
					province_id = 4266 #Hul-az-Krakazol
					NOT = { has_building = mage_tower }
				}
				AND = {
					province_id = 4352 #Tamvihar Breach
					NOT = { has_building = mage_tower }
				}
				AND = {
					province_id = 4360 #Gronrod 1
					NOT = { has_building = mage_tower }
				}
				AND = {
					province_id = 4345 #The Flank
					NOT = { has_building = mage_tower }
				}
				AND = {
					province_id = 4342 #Malamau's Charge
					NOT = { has_building = mage_tower }
				}
				AND = {
					province_id = 4323 #Verkal Dromak
					NOT = { has_building = mage_tower }
				}
			}
		} 

		trigger = { #These are all the East Serpentspine entrances
			custom_trigger_tooltip = {
				tooltip = chaingrasper_warding_the_entrances_trigger_tt
				owns_core_province = 4272 #Dirthole Rock
				4272 = { #Dirthole Rock
					has_building = mage_tower
				}
				owns_core_province = 4265 #Grozumdihr
				4265 = { #Grozumdihr
					has_building = mage_tower
				}
				owns_core_province = 4273 #Kariat Cave
				4273 = { #Kariat Cave
					has_building = mage_tower
				}
				owns_core_province = 4266 #Hul-az-Krakazol
				4266 = { #Hul-az-Krakazol
					has_building = mage_tower
				}
				owns_core_province = 4352 #Tamvihar Breach
				4352 = { #Tamvihar Breach
					has_building = mage_tower
				}
				owns_core_province = 4360 #Gronrod 1
				4360 = { #Gronrod 1
					has_building = mage_tower
				}
				owns_core_province = 4345 #The Flank
				4345 = { #The Flank
					has_building = mage_tower
				}
				owns_core_province = 4342 #Malamau's Charge
				4342 = { #Malamau's Charge
					has_building = mage_tower
				}
				owns_core_province = 4323 #Verkal Dromak
				4323 = { #Verkal Dromak
					has_building = mage_tower
				}
			}
			custom_trigger_tooltip = {
				tooltip = is_abjuration_3_tt
				has_ruler_flag = abjuration_3
			}
		} 

		effect = { 
			custom_tooltip = chaingrasper_warding_the_entrances_effect_tt
			hidden_effect = { #These are all the East Serpentspine entrances
				4272 = { #Dirthole Rock
					add_province_modifier = {
						name = chaingrasper_sustained_wards
						duration = -1
					}
				}
				4265 = { #Grozumdihr
					add_province_modifier = {
						name = chaingrasper_sustained_wards
						duration = -1
					}
				}

				4273 = { #Kariat Cave
					add_province_modifier = {
						name = chaingrasper_sustained_wards
						duration = -1
					}
				}
				4266 = { #Hul-az-Krakazol
					add_province_modifier = {
						name = chaingrasper_sustained_wards
						duration = -1
					}
				}
				4352 = { #Tamvihar Breach
					add_province_modifier = {
						name = chaingrasper_sustained_wards
						duration = -1
					}
				}
				4360 = { #Gronrod 1
					add_province_modifier = {
						name = chaingrasper_sustained_wards
						duration = -1
					}
				}
				4345 = { #The Flank
					add_province_modifier = {
						name = chaingrasper_sustained_wards
						duration = -1
					}
				}
				4342 = { #Malamau's Charge
					add_province_modifier = {
						name = chaingrasper_sustained_wards
						duration = -1
					}
				}
				4323 = { #Verkal Dromak
					add_province_modifier = {
						name = chaingrasper_sustained_wards
						duration = -1
					}
				}
			}
		} 
	}
}
