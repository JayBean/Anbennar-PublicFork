namespace = flavour_maskedbutcher

#Expedition
country_event = {
	id = flavour_maskedbutcher.1
	title = flavour_maskedbutcher.1.t
	desc = flavour_maskedbutcher.1.d
	picture = CAVE_eventPicture
	
	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.1.a
		set_country_flag = mb_expedition_done_flag
		add_manpower = -0.003
		add_treasury = 50
		add_adm_power = 50
		add_dip_power = 50
		add_mil_power = 50
	}
}

#Into The Pit
country_event = {
	id = flavour_maskedbutcher.2
	title = flavour_maskedbutcher.2.t
	desc = flavour_maskedbutcher.2.d
	picture = DARK_EXPEDITION_eventPicture
	
	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.2.a
		add_country_modifier = {
			name = mb_otar_on_the_move
			duration = -1
		}
		if = {
			limit = {
				NOT = {
					capital = 4238
				}
			}
			4238 = {
				mb_set_ptm = { ptm_name = mb_ap_dauntless_six move_timer = 730 }
			}
		}
		else = {
			2942 = {
				mb_set_ptm = { ptm_name = mb_ap_dauntless_six move_timer = 730 }
			}
		}
	}
}

#Vampire Stuff Unlock
country_event = {
	id = flavour_maskedbutcher.3
	title = flavour_maskedbutcher.3.t
	desc = flavour_maskedbutcher.3.d
	picture = BIG_STAR_IN_SKY_eventPicture
	
	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.3.a
		set_country_flag = mb_keepers_razor_flg
		set_country_flag = has_vampires_estate
		set_country_flag = remove_vampire_masquerade
		set_country_flag = remove_vampire_expell_landowners
		set_country_flag = remove_vampire_ownership
		custom_tooltip = mb_vampireunlock_tt
		hidden_effect = {
			country_event = {
				id = flavour_maskedbutcher.80
				days = 5
			}
		}
		east_overmarch_area = { discover_country = ROOT }
	}
}

country_event = {
	id = flavour_maskedbutcher.80
	title = flavour_maskedbutcher.80.t
	desc = flavour_maskedbutcher.80.d
	picture = FAT_LOOT_eventPicture
	hidden = yes
	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.80.a
		set_estate_privilege = estate_vampires_organisation_listless_drinkers
	}
}

#A Legion Thinned
country_event = {
	id = flavour_maskedbutcher.4
	title = flavour_maskedbutcher.4.t
	desc = flavour_maskedbutcher.4.d
	picture = DARK_EXPEDITION_eventPicture
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					has_province_modifier = mb_ap_dauntless_six
				}
				save_global_event_target_as = dauntless_province_target
				remove_province_triggered_modifier = mb_ap_dauntless_six
				remove_province_modifier = mb_ap_tracker
			}
			set_country_flag = dauntless_six_dead
		}
	}

	option = {
		name = flavour_maskedbutcher.4.a
		2944 = {
			add_province_modifier = {
				name = mb_advanced_fortifications
				duration = -1
			}
		}
		event_target:dauntless_province_target = {
			add_province_modifier = {
				name = mb_arianne_last_stand
				duration = -1
			}
			random_neighbor_province = {
				limit = { owned_by = ROOT }
				mb_set_ptm = { ptm_name = mb_ap_damned_four move_timer = 730 }
			}
		}
	}
}

#Final Hours of Arianne sil Verne
country_event = {
	id = flavour_maskedbutcher.5
	title = flavour_maskedbutcher.5.t
	desc = flavour_maskedbutcher.5.d
	picture = DARK_EXPEDITION_eventPicture
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			event_target:dauntless_province_target = {
				kill_units = {
					who = ROOT
					amount = 7
				}
			}
		}
	}

	after = {
		clear_global_event_target = dauntless_province_target
	}

	option = {
		name = flavour_maskedbutcher.5.a
		event_target:dauntless_province_target = {
			remove_province_modifier = mb_arianne_last_stand
		}
		custom_tooltip = human_mask_1_unlock_tt
		set_country_flag = human_mask_1
		remove_estate_privilege = estate_vampires_organisation_listless_drinkers
		set_estate_privilege = estate_vampires_organisation_purpose_of_the_blade
		set_estate_privilege = estate_vampires_mask_human
	}
}

#False Dragon's Fang
country_event = {
	id = flavour_maskedbutcher.6
	title = flavour_maskedbutcher.6.t
	desc = flavour_maskedbutcher.6.d
	picture = THE_HEROINE_eventPicture
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					has_province_modifier = mb_ap_damned_four
				}
				save_event_target_as = damned_province_target
				remove_province_triggered_modifier = mb_ap_damned_four
				remove_province_modifier = mb_ap_tracker
			}
			set_country_flag = damned_four_dead
		}
	}

	option = {
		name = flavour_maskedbutcher.6.a
		event_target:damned_province_target = {
			mb_set_ptm = { ptm_name = mb_ap_roypeckers_fury move_timer = 182 }
			if = {
				limit = { province_id = 2955 2954 = { owned_by = ROOT } }
				2954 = { save_event_target_as = desperate_spawn }
			}
			else_if = {
				limit = { province_id = 2943 2942 = { owned_by = ROOT } }
				2942 = { save_event_target_as = desperate_spawn }
			}
			else_if = {
				limit = { OR = { province_id = 2956 province_id = 2987 } 2957 = { owned_by = ROOT } }
				2957 = { save_event_target_as = desperate_spawn }
			}
			else = {
				random_neighbor_province = {
					limit = { has_terrain = cavern owned_by = ROOT }
					save_event_target_as = desperate_spawn
				}
			}
		}
		event_target:desperate_spawn = {
			add_province_triggered_modifier = mb_ap_desperate_two
			hidden_effect = {
				add_province_modifier = {
					name = mb_ap_tracker_two
					hidden = yes
					duration = 182
				}
			}
		}
		remove_country_modifier = mb_otar_on_the_move
		define_ruler = {
			name = "Anarchy!"
			dynasty = " "
			adm = 0
			dip = 0
			mil = 0
			regency = yes
		}
	}
}

#No Luck Left
country_event = {
	id = flavour_maskedbutcher.7
	title = flavour_maskedbutcher.7.t
	desc = flavour_maskedbutcher.7.d
	picture = CAVE_eventPicture
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					has_province_modifier = mb_ap_desperate_two
				}
				save_event_target_as = desperate_province_target
				remove_province_triggered_modifier = mb_ap_desperate_two
				remove_province_modifier = mb_ap_tracker_two
			}
			set_country_flag = desperate_two_dead
		}
	}

	option = {
		name = flavour_maskedbutcher.7.a
		custom_tooltip = blood_frenzy_unlock_tt
		custom_tooltip = prepare_mask_unlock_tt
		set_country_flag = mb_prepare_mask_flg
		4033 = {
			change_trade_goods = damestear
			set_province_flag = permanent_damestear 
		}
		event_target:desperate_province_target = {
			random_neighbor_province = {
				limit = { has_terrain = cavern owned_by = ROOT }
				add_province_triggered_modifier = mb_ap_flight_kalas
				hidden_effect = {
					add_province_modifier = {
						name = mb_ap_tracker_two
						hidden = yes
						duration = 90
					}
				}
			}
		}
	}
}

#Royan The Last
country_event = {
	id = flavour_maskedbutcher.8
	title = flavour_maskedbutcher.8.t
	desc = flavour_maskedbutcher.8.d
	picture = DARK_EXPEDITION_eventPicture
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					has_province_modifier = mb_ap_roypeckers_fury
				}
				save_event_target_as = roypecker_province_target
				remove_province_triggered_modifier = mb_ap_roypeckers_fury
				remove_province_modifier = mb_ap_tracker
			}
			set_country_flag = roypecker_dead
		}
	}

	option = {
		name = flavour_maskedbutcher.8.a
		event_target:roypecker_province_target = {
			mb_set_ptm = { ptm_name = mb_ap_butcherbane move_timer = 90 }
		}
		add_government_reform = otaric_succession_reform
	}
}

#All The Light Touches
province_event = {
	id = flavour_maskedbutcher.9
	title = flavour_maskedbutcher.9.t
	desc = flavour_maskedbutcher.9.d
	picture = BIG_STAR_IN_SKY_eventPicture
	
	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.9.a
		remove_province_triggered_modifier = mb_ap_butcherbane
		owner = { 
			set_country_flag = butcherbane_dead
			set_country_flag = mb_drowninthedeep_flg 
			swap_non_generic_missions = yes
		}
	}
}

#Those That Watch
country_event = {
	id = flavour_maskedbutcher.10
	title = flavour_maskedbutcher.10.t
	desc = flavour_maskedbutcher.10.d
	picture = ELVEN_EYE_eventPicture
	
	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.10.a
		east_deepwoods_region = { discover_country = ROOT }
		west_deepwoods_region = { discover_country = ROOT }
		custom_tooltip = ichortap_unlock_tt
		set_country_flag = mb_ichortap_flg
	}
}

#Nighthawks
country_event = {
	id = flavour_maskedbutcher.11
	title = flavour_maskedbutcher.11.t
	desc = flavour_maskedbutcher.11.d
	picture = HARPY_TOWN_eventPicture
	
	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.11.a
		660 = { 
			destroy_great_project = { type = queens_throne }
			add_province_modifier = {
				name = mb_crimson_heights
				duration = -1
			}
			set_province_flag = crimson_height_flag
		}
		custom_tooltip = harpy_reserve_unlock_tt
		hidden_effect = {
			every_owned_province = {
				limit = { OR = { area = misharallen_area area = nansalen_area } }
				change_culture = firanyan_harpy
				add_province_modifier = {
					name = mb_reserve
					duration = -1
				}
				set_province_flag = harpy_reserve_flag
			}
		}
		every_owned_province = {
			limit = {
				OR = {
					area = siffiraeri_area
					area = kharfiraeri_area
					area = firanyalen_area
				}
			}
			change_culture = ROOT
			change_religion = ROOT
		}
		add_government_reform = rights_razorblessed_reform
		custom_tooltip = summon_blood_moon_unlock_tt
		set_country_flag = mb_blood_moon_flg
	}
}

#Pact Of The Razor
country_event = {
	id = flavour_maskedbutcher.12
	title = flavour_maskedbutcher.12.t
	desc = flavour_maskedbutcher.12.d
	picture = FEYFOREST_eventPicture
	
	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.12.a
		custom_tooltip = mb_yle_mine_unlock
		set_country_flag = mb_yle_mine_flg
		custom_tooltip = elven_reserve_unlock_tt
		hidden_effect = {
			every_owned_province = {
				limit = { province_group = deepwoods_arrow_grove }
				change_culture = wood_elf
				add_province_modifier = {
					name = mb_reserve
					duration = -1
				}
				set_province_flag = elven_reserve_flag
			}
		}
		custom_tooltip = goblin_reserve_unlock_tt
		hidden_effect = {
			every_owned_province = {
				limit = { province_group = deepwoods_river_grove }
				change_culture = forest_goblin
				add_province_modifier = {
					name = mb_reserve
					duration = -1
				}
				set_province_flag = goblin_reserve_flag
			}
		}
	}

	option = {
		name = flavour_maskedbutcher.12.b
		kill_ruler = yes
		custom_tooltip = mb_yle_mine_unlock
		set_country_flag = mb_yle_mine_flg
		custom_tooltip = ichortap_buff_tt
		set_country_flag = mb_buffed_ichortap_flg
		set_estate_privilege = estate_mages_great_fey_mask
	}
}

#Bulwari Response
country_event = {
	id = flavour_maskedbutcher.14
	title = flavour_maskedbutcher.14.t
	desc = flavour_maskedbutcher.14.d
	picture = SURAKES_SUN_GARDEN_eventPicture
	
	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.14.a
		hidden_effect = { save_global_event_target_as = masked_butcher_target }
		601 = { province_event = { id = flavour_maskedbutcher.15 } }
	}
}

#One Last Wish
province_event = {
	id = flavour_maskedbutcher.15
	title = flavour_maskedbutcher.15.t
	desc = flavour_maskedbutcher.15.d
	picture = SURAKES_SUN_GARDEN_eventPicture
	
	major = yes
	major_trigger = {
		OR = {
			capital_scope = {
				superregion = bulwar_superregion
			}
			capital_scope = {
				superregion = west_serpentspine_superregion
			}
		}
	}
	is_triggered_only = yes

	after = {
		hidden_effect = { clear_global_event_target = masked_butcher_target }
	}

	option = {
		name = flavour_maskedbutcher.15.a
		custom_tooltip = mb_magic_price_tt
		hidden_effect = {
			add_base_tax = -5
			add_base_production = -5
			add_base_manpower = -5
			add_devastation = 100
			add_province_modifier = {
				name = mb_the_price
				duration = 36500
			}
		}
		custom_tooltip = mb_wish_magic_tt
		hidden_effect = {
			event_target:masked_butcher_target = {
				every_owned_province = {
					limit = { superregion = bulwar_superregion }
					add_province_modifier = {
						name = mb_last_wish
						duration = 7300
					}
				}
			}
		}
	}

	option = {
		name = flavour_maskedbutcher.15.b
		trigger = { owner = { ai = no NOT = { tag = H81 was_tag = H81 } } }
	}
}

#Surakel The Shattered
country_event = {
	id = flavour_maskedbutcher.16
	title = flavour_maskedbutcher.16.t
	desc = flavour_maskedbutcher.16.d
	picture = SUN_CULT_PRIEST_eventPicture
	
	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.16.a
		601 = {
			remove_province_modifier = mb_the_price
			add_province_modifier = {
				name = mb_new_ownership
				duration = 9125
			}
		}
		custom_tooltip = mb_surakel_tt
		hidden_effect = {
			every_owned_province = {
				limit = { religion_group = bulwari }
				add_province_modifier = {
					name = mb_submission
					duration = 18250
				}
			}
		}
		hidden_effect = {
			every_country = {
				limit = { religion_group = bulwari }
				country_event = { id = flavour_maskedbutcher.17 }
			}
		}
		hidden_effect = {
			every_province = {
				limit = { superregion = bulwar_superregion NOT = { owned_by = ROOT } }
				add_claim = ROOT
			}
		}
		hidden_effect = { set_global_flag = mb_is_malevolent_dark_flg }
	}
}

#Malevolent Dark
country_event = {
	id = flavour_maskedbutcher.17
	title = flavour_maskedbutcher.17.t
	desc = flavour_maskedbutcher.17.d
	picture = SUN_CULT_PRIEST_eventPicture
	
	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.17.a
		set_country_flag = sc_malevolent_dark_mb_flg
		add_country_modifier = {
			name = mb_malevolent_dark
			duration = -1
		}
	}
}

#The House of Ruler
country_event = {
	id = flavour_maskedbutcher.18
	title = flavour_maskedbutcher.18.t
	desc = flavour_maskedbutcher.18.d
	picture = EKLUZAGNU_eventPicture
	
	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.18.a
		add_country_modifier = {
			name = mb_razorlight
			duration = -1
		}
		custom_tooltip = roaming_hero_spawn_tt
		hidden_effect = {
			random_owned_province = {
				limit = { superregion = bulwar_superregion NOT = { culture_is_orcish = yes has_province_modifier = mb_reserve province_id = 6761 province_id = 533 province_id = 452 } }
				mb_set_ptm = { ptm_name = mb_ap_roaming_heroes move_timer = 730 }
				set_province_flag = heroes_here_flg
			}
			random_owned_province = {
				limit = { superregion = bulwar_superregion NOT = { culture_is_orcish = yes has_province_modifier = mb_reserve has_province_modifier = mb_ap_tracker province_id = 6761 province_id = 533 province_id = 452 } }
				mb_set_ptm = { ptm_name = mb_ap_roaming_heroes move_timer = 730 }
				set_province_flag = heroes_here_flg
			}
			random_owned_province = {
				limit = { superregion = bulwar_superregion NOT = { culture_is_orcish = yes has_province_modifier = mb_reserve has_province_modifier = mb_ap_tracker province_id = 6761 province_id = 533 province_id = 452 } }
				mb_set_ptm = { ptm_name = mb_ap_roaming_heroes move_timer = 730 }
				set_province_flag = heroes_here_flg
			}
			random_owned_province = {
				limit = { superregion = bulwar_superregion NOT = { culture_is_orcish = yes has_province_modifier = mb_reserve has_province_modifier = mb_ap_tracker province_id = 6761 province_id = 533 province_id = 452 } }
				mb_set_ptm = { ptm_name = mb_ap_roaming_heroes move_timer = 730 }
				set_province_flag = heroes_here_flg
			}
			random_owned_province = {
				limit = { superregion = bulwar_superregion NOT = { culture_is_orcish = yes has_province_modifier = mb_reserve has_province_modifier = mb_ap_tracker province_id = 6761 province_id = 533 province_id = 452 } }
				mb_set_ptm = { ptm_name = mb_ap_roaming_heroes move_timer = 730 }
				set_province_flag = heroes_here_flg
			}
		}
		every_owned_province = {
			limit = { 
				has_port = yes 
				OR = { 
					superregion = bulwar_superregion 
					superregion = escann_superregion 
					superregion = western_cannor_superregion 
					superregion = north_salahad_superregion 
				} 
			}
			add_province_modifier = {
				name = mb_rising_tide
				duration = -1
			}
		}
	}
}

#Eat The Mountains
country_event = {
	id = flavour_maskedbutcher.19
	title = flavour_maskedbutcher.19.t
	desc = flavour_maskedbutcher.19.d
	picture = MULTI_RACIAL_MERC_eventPicture
	
	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.19.a
		4073 = {
			mb_set_ptm = { ptm_name = mb_ap_world_eaters move_timer = 730 }
		}
	}
}

#The Hero's Return
country_event = {
	id = flavour_maskedbutcher.20
	title = flavour_maskedbutcher.20.t
	desc = flavour_maskedbutcher.20.d
	picture = VILLAGE_BURNING_eventPicture
	
	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.20.a
		random_owned_province = {
			limit = { has_province_modifier = mb_ap_roaming_heroes NOT = { has_province_modifier = mb_ap_world_eaters } }
			remove_province_triggered_modifier = mb_ap_roaming_heroes
		}
		if = {
			limit = {
				NOT = {
					capital = 4238
				}
			}
			4238 = {
				add_province_triggered_modifier = mb_ap_butcherbane2
				hidden_effect = {
					add_province_modifier = {
						name = mb_ap_tracker_two
						hidden = yes
						duration = 365
					}
				}
			}
		}
		else = {
			2942 = {
				add_province_triggered_modifier = mb_ap_butcherbane2
				hidden_effect = {
					add_province_modifier = {
						name = mb_ap_tracker_two
						hidden = yes
						duration = 365
					}
				}
			}
		}
		add_country_modifier = {
			name = mb_hero_return
			duration = -1
		}
	}
}

#All Die, Eventually
country_event = {
	id = flavour_maskedbutcher.21
	title = flavour_maskedbutcher.21.t
	desc = flavour_maskedbutcher.21.d
	picture = COMET_SIGHTED_eventPicture
	
	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.21.a
		set_country_flag = butcherbane2_dead
		every_owned_province = {
			limit = { has_province_modifier = mb_fomented_flames }
			remove_province_modifier = mb_fomented_flames
			remove_province_modifier = mb_dampened_dreams
			spawn_rebels = {
				type = final_hopefuls_rebels
				size = 1
			}
		}
		every_owned_province = {
			limit = { has_province_modifier = mb_ap_roaming_heroes }
			remove_province_triggered_modifier = mb_ap_roaming_heroes
			spawn_rebels = {
				type = final_hopefuls_rebels
				size = 3
			}
		}
		random_owned_province = {
			limit = { has_province_modifier = mb_ap_butcherbane2 }
			remove_province_triggered_modifier = mb_ap_butcherbane2
			spawn_rebels = {
				type = final_hopefuls_rebels
				size = 3
			}
		}
		custom_tooltip = gnomish_mask_1_unlock_tt
		set_country_flag = gnomish_mask_1
		add_church_power = 100
		add_adm_power = 50
		add_dip_power = 50
		add_mil_power = 50
		custom_tooltip = gnome_reserve_tt
		hidden_effect = {
			every_owned_province = {
				limit = { OR = { area = ovdal_lodhum_area area = thievesbane_area } }
				change_culture = imperial_gnome
				add_province_modifier = {
					name = mb_reserve
					duration = -1
				}
				set_province_flag = gnomish_reserve_flag
			}
		}
	}
}

#As One
country_event = {
	id = flavour_maskedbutcher.22
	title = flavour_maskedbutcher.22.t
	desc = flavour_maskedbutcher.22.d
	picture = BIG_STAR_IN_SKY_eventPicture
	
	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.22.a
		set_estate_privilege = estate_mages_all_mask
	}
}

#Adventurer Party stuff
province_event = {
	id = flavour_maskedbutcher.41
	title = flavour_maskedbutcher.41.t
	desc = flavour_maskedbutcher.41.d
	picture = DARK_EXPEDITION_eventPicture
	
	is_triggered_only = yes
	trigger = {
		owner = {
			NOT = { has_country_flag = dauntless_six_dead }
			OR = {
				tag = H81
				was_tag = H81
			}
		}
	}

	after = {
		hidden_effect = {
			mb_remove_ptm = { ptm_name = mb_ap_dauntless_six }
		}
	}

	option = {
		name = flavour_maskedbutcher.41.a
		random_neighbor_province = {
			limit = {
				owner = {
					OR = {
						tag = H81
						was_tag = H81
					}
				}
				NOT = { 
					has_terrain = cavern
					province_id = 2944
					province_id = 534
					province_id = 511
				}
			}
			mb_set_ptm = { ptm_name = mb_ap_dauntless_six move_timer = 730 }
		}
	}
}

province_event = {
	id = flavour_maskedbutcher.42
	title = flavour_maskedbutcher.42.t
	desc = flavour_maskedbutcher.42.d
	picture = DARK_EXPEDITION_eventPicture
	
	is_triggered_only = yes
	trigger = {
		owner = {
			NOT = { has_country_flag = damned_four_dead }
			OR = {
				tag = H81
				was_tag = H81
			}
		}
	}

	after = {
		hidden_effect = {
			mb_remove_ptm = { ptm_name = mb_ap_damned_four }
		}
	}

	option = {
		name = flavour_maskedbutcher.42.a
		random_neighbor_province = {
			limit = {
				owner = {
					OR = {
						tag = H81
						was_tag = H81
					}
				}
				NOT = { 
					has_terrain = cavern
					province_id = 2944
					province_id = 534
					province_id = 511
				}
			}
			if = {
				limit = {
					has_province_modifier = mb_arianne_last_stand
				}
				random_neighbor_province = {
					limit = {
						NOT = {
							has_province_modifier = mb_ap_damned_four
						}
					}
					mb_set_ptm = { ptm_name = mb_ap_damned_four move_timer = 730 }
				}
			}
			else = {
				mb_set_ptm = { ptm_name = mb_ap_damned_four move_timer = 730 }
			}
		}
	}
}

province_event = {
	id = flavour_maskedbutcher.43
	title = flavour_maskedbutcher.43.t
	desc = flavour_maskedbutcher.43.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	trigger = {
		owner = {
			NOT = { has_country_flag = desperate_two_dead }
			OR = {
				tag = H81
				was_tag = H81
			}
		}
	}

	after = {
		hidden_effect = {
			mb_remove_ptm = { ptm_name = mb_ap_desperate_two }
		}
	}

	option = {
		name = flavour_maskedbutcher.43.a
		random_neighbor_province = {
			limit = {
				owner = {
					OR = {
						tag = H81
						was_tag = H81
					}
				}
				has_terrain = cavern
			}
			add_province_triggered_modifier = mb_ap_desperate_two
			add_province_modifier = {
				name = mb_ap_tracker_two
				hidden = yes
				duration = 182
			}
			owner = { set_country_flag = mb_ap_desperate_two_moved }
		}
	}
}

province_event = {
	id = flavour_maskedbutcher.44
	title = flavour_maskedbutcher.44.t
	desc = flavour_maskedbutcher.44.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	trigger = {
		owner = {
			NOT = { has_country_flag = roypecker_dead }
			OR = {
				tag = H81
				was_tag = H81
			}
		}
	}

	after = {
		hidden_effect = {
			mb_remove_ptm = { ptm_name = mb_ap_roypeckers_fury }
		}
	}

	option = {
		name = flavour_maskedbutcher.44.a
		random_neighbor_province = {
			limit = {
				owner = {
					OR = {
						tag = H81
						was_tag = H81
					}
				}
				NOT = { 
					has_terrain = cavern
					province_id = 2944
					province_id = 534
					province_id = 511
				}
			}
			mb_set_ptm = { ptm_name = mb_ap_roypeckers_fury move_timer = 182 }
		}
	}
}

province_event = {
	id = flavour_maskedbutcher.45
	title = flavour_maskedbutcher.45.t
	desc = flavour_maskedbutcher.45.d
	picture = CAVE_eventPicture
	
	is_triggered_only = yes
	
	after = {
		hidden_effect = {
            remove_province_triggered_modifier = mb_ap_flight_kalas
		}
	}

	option = {
		name = flavour_maskedbutcher.44.a
		custom_tooltip = halfling_mask_1_unlock_tt
		owner = { set_country_flag = halfling_mask_1 }
	}
}

province_event = {
	id = flavour_maskedbutcher.46
	title = flavour_maskedbutcher.46.t
	desc = flavour_maskedbutcher.46.d
	picture = ARTWORK_eventPicture
	hidden = yes
	is_triggered_only = yes
	trigger = {
		NOT = { owner = { has_country_flag = butcherbane_dead } }
	}

	after = {
		hidden_effect = {
			mb_remove_ptm = { ptm_name = mb_ap_butcherbane }
		}
	}

	option = {
		name = flavour_maskedbutcher.41.a
		if = {
			limit = { 2942 = { is_capital = yes } }
			trigger_switch = {
				on_trigger = province_id
				2943 = {
					2955 = {
						mb_set_ptm = { ptm_name = mb_ap_butcherbane move_timer = 90 }						
					}
				}
				2955 = {
					2954 = {
						mb_set_ptm = { ptm_name = mb_ap_butcherbane move_timer = 90 }						
					}
				}
				4093 = {
					2954 = {
						mb_set_ptm = { ptm_name = mb_ap_butcherbane move_timer = 90 }						
					}
				}
				2954 = {
					2956 = {
						mb_set_ptm = { ptm_name = mb_ap_butcherbane move_timer = 90 }						
					}
				}
				2956 = {
					2957 = {
						mb_set_ptm = { ptm_name = mb_ap_butcherbane move_timer = 90 }						
					}
				}
				2957 = {
					2987 = {
						mb_set_ptm = { ptm_name = mb_ap_butcherbane move_timer = 90 }
					}						
				}
				2987 = {
					4238 = {
						mb_set_ptm = { ptm_name = mb_ap_butcherbane move_timer = 90 }						
					}
				}
				4238 = {
					province_event = {
						id = flavour_maskedbutcher.9
					}
					set_country_flag = butcherbane_dead
				}
			}
		}
		else = {
			trigger_switch = {
				on_trigger = province_id
				4238 = {
					2987 = {
						mb_set_ptm = { ptm_name = mb_ap_butcherbane move_timer = 90 }						
					}
				}
				2987 = {
					2957 = {
						mb_set_ptm = { ptm_name = mb_ap_butcherbane move_timer = 90 }						
					}
				}
				2957 = {
					2956 = {
						mb_set_ptm = { ptm_name = mb_ap_butcherbane move_timer = 90 }						
					}
				}
				2956 = {
					2954 = {
						mb_set_ptm = { ptm_name = mb_ap_butcherbane move_timer = 90 }						
					}
				}
				4093 = {
					2954 = {
						mb_set_ptm = { ptm_name = mb_ap_butcherbane move_timer = 90 }						
					}
				}
				2954 = {
					2955 = {
						mb_set_ptm = { ptm_name = mb_ap_butcherbane move_timer = 90 }						
					}
				}
				2955 = {
					2943 = {
						mb_set_ptm = { ptm_name = mb_ap_butcherbane move_timer = 90 }						
					}
				}
				2943 = {
					2942 = {
						mb_set_ptm = { ptm_name = mb_ap_butcherbane move_timer = 90 }
					}
				}
				2942 = {
					province_event = {
						id = flavour_maskedbutcher.9
					}
					set_country_flag = butcherbane_dead
				}
			}
		}
	}
}

province_event = {
	id = flavour_maskedbutcher.47
	title = flavour_maskedbutcher.47.t
	desc = flavour_maskedbutcher.47.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	trigger = {
		owner = {
			NOT = { has_country_flag = butcherbane2_dead }
			OR = {
				tag = H81
				was_tag = H81
			}
		}
	}

	after = {
		hidden_effect = {
			mb_remove_ptm = { ptm_name = mb_ap_roaming_heroes }
			clr_province_flag = heroes_here_flg
		}
	}

	option = {
		name = flavour_maskedbutcher.47.a
		random_neighbor_province = {
			limit = {
				owner = {
					OR = {
						tag = H81
						was_tag = H81
					}
				}
				NOT = { has_province_flag = heroes_here_flg }
				superregion = bulwar_superregion
			}
			mb_set_ptm = { ptm_name = mb_ap_roaming_heroes move_timer = 730 }
			set_province_flag = heroes_here_flg
		}
	}
}

province_event = {
	id = flavour_maskedbutcher.48
	title = flavour_maskedbutcher.48.t
	desc = flavour_maskedbutcher.48.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	trigger = {
		owner = {
			NOT = { has_country_flag = world_eaters_dead }
			OR = {
				tag = H81
				was_tag = H81
			}
		}
	}

	after = {
		hidden_effect = {
			mb_remove_ptm = { ptm_name = mb_ap_world_eaters }
		}
	}

	option = {
		name = flavour_maskedbutcher.48.a
		random_neighbor_province = {
			limit = {
				owner = {
					OR = {
						tag = H81
						was_tag = H81
					}
				}
				region = west_dwarovar_region
				NOT = { has_province_flag = world_eater_entry_path }
			}
			mb_set_ptm = { ptm_name = mb_ap_world_eaters move_timer = 365 }
		}
	}
}

province_event = {
	id = flavour_maskedbutcher.49
	title = flavour_maskedbutcher.49.t
	desc = flavour_maskedbutcher.49.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	trigger = {
		owner = {
			NOT = { has_country_flag = butcherbane2_dead }
			OR = {
				tag = H81
				was_tag = H81
			}
		}
	}

	after = {
		hidden_effect = {
			mb_remove_ptm = { ptm_name = mb_ap_butcherbane2 }
		}
	}

	option = {
		name = flavour_maskedbutcher.49.a
		random_neighbor_province = {
			limit = {
				owner = {
					OR = {
						tag = H81
						was_tag = H81
					}
				}
				region = serpentreach_region
			}
			add_province_triggered_modifier = mb_ap_butcherbane2
			add_province_modifier = {
				name = mb_ap_tracker_two
				hidden = yes
				duration = 365
			}
			owner = { set_country_flag = mb_ap_butcherbane2_moved }
		}
	}
}

#DEBUG
#country_event = {
#	id = flavour_maskedbutcher.69
#	title = flavour_maskedbutcher.69.t
#	desc = flavour_maskedbutcher.69.d
#	picture = ARTWORK_eventPicture
#	
#	is_triggered_only = yes
#
#	option = {
#		name = flavour_maskedbutcher.69.a
#		set_country_flag = mb_keepers_razor_flg
#		set_country_flag = mb_arok_ankash_flg
#		set_country_flag = has_vampires_estate
#		set_country_flag = remove_vampire_masquerade
#		set_country_flag = remove_vampire_expell_landowners
#		set_country_flag = remove_vampire_ownership
#		set_estate_privilege = estate_vampires_organisation_listless_drinkers
#		set_country_flag = mb_dark_below_flg
#		set_country_flag = mb_falsedragon_flg
#		set_country_flag = mb_drowninthedeep_flg
#		set_country_flag = mb_drowndrowndrown_flg
#		swap_non_generic_missions = yes
#		set_country_flag = mb_ichortap_flg
#		set_country_flag = hill_ogre_de_flg
#		set_country_flag = swamp_ogre_de_flg
#		set_country_flag = cave_troll_de_flg
#		set_country_flag = mb_new_reserves_flg
#	}
#
#	option = {
#		name = flavour_maskedbutcher.69.b
#		set_estate_privilege = estate_vampires_organisation_purpose_of_the_blade
#	}
#
#	option = {
#		name = flavour_maskedbutcher.69.c
#		set_country_flag = mb_prepare_mask_flg
#		set_country_flag = mb_blood_moon_flg
#	}
#
#	option = {
#		name = flavour_maskedbutcher.69.e
#		set_country_flag = harimari_mask_1
#	}
#
#	option = {
#		name = flavour_maskedbutcher.69.f
#		set_country_flag = harpy_mask_1
#		set_country_flag = harpy_mask_2
#	}
#
#	option = {
#		name = flavour_maskedbutcher.69.g
#		set_country_flag = hobgoblin_mask_1
#		set_country_flag = hobgoblin_mask_2
#		set_country_flag = hobgoblin_mask_3
#		set_country_flag = human_mask_1
#		set_country_flag = human_mask_2
#		set_country_flag = human_mask_3
#	}
#
#	option = {
#		name = flavour_maskedbutcher.69.h
#		add_government_reform = otaric_succession_reform
#		add_government_reform = rights_razorblessed_reform
#	}
#}

#New Ruler Event
country_event = {
	id = flavour_maskedbutcher.100
	title = flavour_maskedbutcher.100.t
	desc = flavour_maskedbutcher.100.d
	picture = BAD_WITH_MONARCH_eventPicture
	
	is_triggered_only = yes

	trigger = {
		has_reform = abyssal_otardom_reform
		NOT = { has_country_flag = otardom_ongoing_election }
	}

	immediate = { 
		hidden_effect = { 
			set_country_flag = otardom_ongoing_election
		}
	}

	after = { 
		hidden_effect = { 
			clr_country_flag = otardom_ongoing_election
		} 
	}

	option = {
		name = flavour_maskedbutcher.100.a
		define_ruler = {
			min_age = 18
			max_age = 35
			change_mil = 2
			random_gender = yes
		}
		if = {
			limit = { has_reform = otaric_succession_reform }
			change_adm = 1
			change_dip = 1
			change_mil = 1
		}
	}
}

#Moonlight Upgrade
country_event = {
	id = flavour_maskedbutcher.101
	title = flavour_maskedbutcher.101.t
	desc = flavour_maskedbutcher.101.d
	picture = ARTWORK_eventPicture
	is_triggered_only = yes
	hidden = yes

	option = {
		name = flavour_maskedbutcher.101.a
		4033 = {
			remove_province_modifier = mb_moonlight0
			remove_province_modifier = mb_moonlight1
			remove_province_modifier = mb_moonlight2
			remove_province_modifier = mb_moonlight3
			remove_province_modifier = mb_moonlight4
			remove_province_modifier = mb_moonlight5
			remove_province_modifier = mb_moonlight6
			remove_province_modifier = mb_moonlight7
			remove_province_modifier = mb_moonlight8
			remove_province_modifier = mb_moonlight9
			remove_province_modifier = mb_moonlight10
			remove_province_modifier = mb_moonlight11
			remove_province_modifier = mb_moonlight12
			remove_province_modifier = mb_moonlight13
			remove_province_modifier = mb_moonlight14
			remove_province_modifier = mb_moonlight15
		}
		if = {
			limit = { capital_scope = { has_province_modifier = blorc_trophy15 } }
			4033 = {
				add_province_modifier = {
					name = mb_moonlight15
					duration = -1
				}
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = blorc_trophy14 } }
			4033 = {
				add_province_modifier = {
					name = mb_moonlight14
					duration = -1
				}
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = blorc_trophy13 } }
			4033 = {
				add_province_modifier = {
					name = mb_moonlight13
					duration = -1
				}
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = blorc_trophy12 } }
			4033 = {
				add_province_modifier = {
					name = mb_moonlight12
					duration = -1
				}
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = blorc_trophy11 } }
			4033 = {
				add_province_modifier = {
					name = mb_moonlight11
					duration = -1
				}
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = blorc_trophy10 } }
			4033 = {
				add_province_modifier = {
					name = mb_moonlight10
					duration = -1
				}
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = blorc_trophy9 } }
			4033 = {
				add_province_modifier = {
					name = mb_moonlight9
					duration = -1
				}
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = blorc_trophy8 } }
			4033 = {
				add_province_modifier = {
					name = mb_moonlight8
					duration = -1
				}
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = blorc_trophy7 } }
			4033 = {
				add_province_modifier = {
					name = mb_moonlight7
					duration = -1
				}
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = blorc_trophy6 } }
			4033 = {
				add_province_modifier = {
					name = mb_moonlight6
					duration = -1
				}
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = blorc_trophy5 } }
			4033 = {
				add_province_modifier = {
					name = mb_moonlight5
					duration = -1
				}
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = blorc_trophy4 } }
			4033 = {
				add_province_modifier = {
					name = mb_moonlight4
					duration = -1
				}
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = blorc_trophy3 } }
			4033 = {
				add_province_modifier = {
					name = mb_moonlight3
					duration = -1
				}
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = blorc_trophy2 } }
			4033 = {
				add_province_modifier = {
					name = mb_moonlight2
					duration = -1
				}
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = blorc_trophy1 } }
			4033 = {
				add_province_modifier = {
					name = mb_moonlight1
					duration = -1
				}
			}
		}
		else = {
			4033 = {
				add_province_modifier = {
					name = mb_moonlight0
					duration = -1
				}
			}
		}
	}
}

country_event = {
	id = flavour_maskedbutcher.102
	title = flavour_maskedbutcher.102.t
	desc = flavour_maskedbutcher.102.d
	picture = ARTWORK_eventPicture
	hidden = yes
	is_triggered_only = yes
	trigger = {
		has_country_flag = elven_mask_3_granted
	}

	option = {
		name = flavour_maskedbutcher.102.a
		update_magic_study_experience_modifier = { 
			value = 40
		}
		set_country_flag = elven_mask_revoke_track
	}
}

country_event = {
	id = flavour_maskedbutcher.103
	title = flavour_maskedbutcher.103.t
	desc = flavour_maskedbutcher.103.d
	picture = ARTWORK_eventPicture
	hidden = yes
	is_triggered_only = yes
	trigger = {
		has_country_flag = elven_mask_revoke_track
	}

	option = {
		name = flavour_maskedbutcher.103.a
		update_magic_study_experience_modifier = { 
			value = -40
		}
		clr_country_flag = elven_mask_revoke_track
	}
}

country_event = { #Fired when you click the prepare mask religious action
	id = flavour_maskedbutcher.104
	title = flavour_maskedbutcher.104.title
	desc = flavour_maskedbutcher.104.desc
	picture = CAVE_eventPicture

	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.104.a
		trigger_switch = { #determines which mask needs to be upgraded
			on_trigger = has_country_modifier
			racial_focus_centaur = {
				if = {
					limit = { NOT = { has_country_flag = centaur_mask_1 } }
					country_event = { id = flavour_maskedbutcher.105 }
					apply_mask_opinion = { mask_race = centaur }
				}
				else_if = {
					limit = { has_country_flag = centaur_mask_1 NOT = { has_country_flag = centaur_mask_2 } }
					country_event = { id = flavour_maskedbutcher.106 }
				}
				else = {
					country_event = { id = flavour_maskedbutcher.107 }
				}
			}
			racial_focus_dwarven = { 
				if = {
					limit = { NOT = { has_country_flag = dwarven_mask_1 } }
					country_event = { id = flavour_maskedbutcher.105 }
					apply_mask_opinion = { mask_race = dwarven }
				}
				else_if = {
					limit = { has_country_flag = dwarven_mask_1 NOT = { has_country_flag = dwarven_mask_2 } }
					country_event = { id = flavour_maskedbutcher.106 }
				}
				else = {
					country_event = { id = flavour_maskedbutcher.107 }
				}
			}
			racial_focus_elven = { 
				if = {
					limit = { NOT = { has_country_flag = elven_mask_1 } }
					country_event = { id = flavour_maskedbutcher.105 }
					apply_mask_opinion = { mask_race = elven }
				}
				else_if = {
					limit = { has_country_flag = elven_mask_1 NOT = { has_country_flag = elven_mask_2 } }
					country_event = { id = flavour_maskedbutcher.106 }
				}
				else = {
					country_event = { id = flavour_maskedbutcher.107 }
				}
			}
			racial_focus_gnollish = { 
				if = {
					limit = { NOT = { has_country_flag = gnollish_mask_1 } }
					country_event = { id = flavour_maskedbutcher.105 }
					apply_mask_opinion = { mask_race = gnollish }
				}
				else_if = {
					limit = { has_country_flag = gnollish_mask_1 NOT = { has_country_flag = gnollish_mask_2 } }
					country_event = { id = flavour_maskedbutcher.106 }
				}
				else = {
					country_event = { id = flavour_maskedbutcher.107 }
				}
			}
			racial_focus_gnomish = {
				if = {
					limit = { NOT = { has_country_flag = gnomish_mask_1 } }
					country_event = { id = flavour_maskedbutcher.105 }
					apply_mask_opinion = { mask_race = gnomish }
				}
				else_if = {
					limit = { has_country_flag = gnomish_mask_1 NOT = { has_country_flag = gnomish_mask_2 } }
					country_event = { id = flavour_maskedbutcher.106 }
				}
				else = {
					country_event = { id = flavour_maskedbutcher.107 }
				}
			}
			racial_focus_goblin = {
				if = {
					limit = { NOT = { has_country_flag = goblin_mask_1 } }
					country_event = { id = flavour_maskedbutcher.105 }
					apply_mask_opinion = { mask_race = goblin }
				}
				else_if = {
					limit = { has_country_flag = goblin_mask_1 NOT = { has_country_flag = goblin_mask_2 } }
					country_event = { id = flavour_maskedbutcher.106 }
				}
				else = {
					country_event = { id = flavour_maskedbutcher.107 }
				}
			}
			racial_focus_halfling = {
				if = {
					limit = { NOT = { has_country_flag = halfling_mask_1 } }
					country_event = { id = flavour_maskedbutcher.105 }
					apply_mask_opinion = { mask_race = halfling }
				}
				else_if = {
					limit = { has_country_flag = halfling_mask_1 NOT = { has_country_flag = halfling_mask_2 } }
					country_event = { id = flavour_maskedbutcher.106 }
				}
				else = {
					country_event = { id = flavour_maskedbutcher.107 }
				}
			}
			racial_focus_harimari = {
				if = {
					limit = { NOT = { has_country_flag = harimari_mask_1 } }
					country_event = { id = flavour_maskedbutcher.105 }
					apply_mask_opinion = { mask_race = harimari }
				}
				else_if = {
					limit = { has_country_flag = harimari_mask_1 NOT = { has_country_flag = harimari_mask_2 } }
					country_event = { id = flavour_maskedbutcher.106 }
				}
				else = {
					country_event = { id = flavour_maskedbutcher.107 }
				}
			}
			racial_focus_harpy = {
				if = {
					limit = { NOT = { has_country_flag = harpy_mask_1 } }
					country_event = { id = flavour_maskedbutcher.105 }
					apply_mask_opinion = { mask_race = harpy }
				}
				else_if = {
					limit = { has_country_flag = harpy_mask_1 NOT = { has_country_flag = harpy_mask_2 } }
					country_event = { id = flavour_maskedbutcher.106 }
				}
				else = {
					country_event = { id = flavour_maskedbutcher.107 }
				}
			}
			racial_focus_hobgoblin = {
				if = {
					limit = { NOT = { has_country_flag = goblin_mask_1 } }
					country_event = { id = flavour_maskedbutcher.105 }
					apply_mask_opinion = { mask_race = goblin }
				}
				else_if = {
					limit = { has_country_flag = goblin_mask_1 NOT = { has_country_flag = goblin_mask_2 } }
					country_event = { id = flavour_maskedbutcher.106 }
				}
				else = {
					country_event = { id = flavour_maskedbutcher.107 }
				}
			}
			racial_focus_human = {
				if = {
					limit = { NOT = { has_country_flag = human_mask_1 } }
					country_event = { id = flavour_maskedbutcher.105 }
					apply_mask_opinion = { mask_race = human }
				}
				else_if = {
					limit = { has_country_flag = human_mask_1 NOT = { has_country_flag = human_mask_2 } }
					country_event = { id = flavour_maskedbutcher.106 }
				}
				else = {
					country_event = { id = flavour_maskedbutcher.107 }
				}
			}
			racial_focus_kobold = {
				if = {
					limit = { NOT = { has_country_flag = kobold_mask_1 } }
					country_event = { id = flavour_maskedbutcher.105 }
					apply_mask_opinion = { mask_race = kobold }
				}
				else_if = {
					limit = { has_country_flag = kobold_mask_1 NOT = { has_country_flag = kobold_mask_2 } }
					country_event = { id = flavour_maskedbutcher.106 }
				}
				else = {
					country_event = { id = flavour_maskedbutcher.107 }
				}
			}
			racial_focus_lizardfolk = {
				if = {
					limit = { NOT = { has_country_flag = lizardfolk_mask_1 } }
					country_event = { id = flavour_maskedbutcher.105 }
					apply_mask_opinion = { mask_race = lizardfolk }
				}
				else_if = {
					limit = { has_country_flag = lizardfolk_mask_1 NOT = { has_country_flag = lizardfolk_mask_2 } }
					country_event = { id = flavour_maskedbutcher.106 }
				}
				else = {
					country_event = { id = flavour_maskedbutcher.107 }
				}
			}
			racial_focus_ogre = {
				if = {
					limit = { NOT = { has_country_flag = ogre_mask_1 } }
					country_event = { id = flavour_maskedbutcher.105 }
					apply_mask_opinion = { mask_race = ogre }
				}
				else_if = {
					limit = { has_country_flag = ogre_mask_1 NOT = { has_country_flag = ogre_mask_2 } }
					country_event = { id = flavour_maskedbutcher.106 }
				}
				else = {
					country_event = { id = flavour_maskedbutcher.107 }
				}
			}
			racial_focus_ruinborn = {
				if = {
					limit = { NOT = { has_country_flag = ruinborn_mask_1 } }
					country_event = { id = flavour_maskedbutcher.105 }
					apply_mask_opinion = { mask_race = ruinborn }
				}
				else_if = {
					limit = { has_country_flag = ruinborn_mask_1 NOT = { has_country_flag = ruinborn_mask_2 } }
					country_event = { id = flavour_maskedbutcher.106 }
				}
				else = {
					country_event = { id = flavour_maskedbutcher.107 }
				}
			}
			racial_focus_troll = {
				if = {
					limit = { NOT = { has_country_flag = troll_mask_1 } }
					country_event = { id = flavour_maskedbutcher.105 }
					apply_mask_opinion = { mask_race = troll }
				}
				else_if = {
					limit = { has_country_flag = troll_mask_1 NOT = { has_country_flag = troll_mask_2 } }
					country_event = { id = flavour_maskedbutcher.106 }
				}
				else = {
					country_event = { id = flavour_maskedbutcher.107 }
				}
			}
		}
	}

	option = {
		name = flavour_maskedbutcher.104.b
		add_church_power = 100
	}
}

country_event = { #crafts mask at level one, fired by .104
	id = flavour_maskedbutcher.105
	title = flavour_maskedbutcher.105.t
	desc = flavour_maskedbutcher.105.d
	picture = THE_COVENANT_eventPicture
	
	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.105.a
		trigger_switch = {
			on_trigger = has_country_modifier
			racial_focus_centaur = { grant_level_1_mask = { mask_race = centaur } }
			racial_focus_dwarven = { grant_level_1_mask = { mask_race = dwarven } }
			racial_focus_elven = { grant_level_1_mask = { mask_race = elven } }
			racial_focus_gnollish = { grant_level_1_mask = { mask_race = gnollish } }
			racial_focus_gnomish = { grant_level_1_mask = { mask_race = gnomish } }
			racial_focus_goblin = { grant_level_1_mask = { mask_race = goblin } }
			racial_focus_halfling = { grant_level_1_mask = { mask_race = halfling } }
			racial_focus_harimari = { grant_level_1_mask = { mask_race = harimari } }
			racial_focus_harpy = { grant_level_1_mask = { mask_race = harpy } }
			racial_focus_hobgoblin = { grant_level_1_mask = { mask_race = hobgoblin } }
			racial_focus_human = { grant_level_1_mask = { mask_race = human } }
			racial_focus_kobold = { grant_level_1_mask = { mask_race = kobold } }
			racial_focus_lizardfolk = { grant_level_1_mask = { mask_race = lizardfolk } }
			racial_focus_ogre = { grant_level_1_mask = { mask_race = ogre } }
			racial_focus_ruinborn = { grant_level_1_mask = { mask_race = ruinborn } }
			racial_focus_troll = { grant_level_1_mask = { mask_race = troll } }
		}
	}
}

country_event = { #upgrades mask to level two, fired by .104
	id = flavour_maskedbutcher.106
	title = flavour_maskedbutcher.106.t
	desc = flavour_maskedbutcher.106.d
	picture = LOOMING_DEATH_eventPicture
	
	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.106.a
		trigger_switch = {
			on_trigger = has_country_modifier
			racial_focus_centaur = { grant_level_2_mask = { mask_race = centaur } }
			racial_focus_dwarven = { grant_level_2_mask = { mask_race = dwarven } }
			racial_focus_elven = { grant_level_2_mask = { mask_race = elven } }
			racial_focus_gnollish = { grant_level_2_mask = { mask_race = gnollish } }
			racial_focus_gnomish = { grant_level_2_mask = { mask_race = gnomish } }
			racial_focus_goblin = { grant_level_2_mask = { mask_race = goblin } }
			racial_focus_halfling = { grant_level_2_mask = { mask_race = halfling } }
			racial_focus_harimari = { grant_level_2_mask = { mask_race = harimari } }
			racial_focus_harpy = { grant_level_2_mask = { mask_race = harpy } }
			racial_focus_hobgoblin = { grant_level_2_mask = { mask_race = hobgoblin } }
			racial_focus_human = { grant_level_2_mask = { mask_race = human } }
			racial_focus_kobold = { grant_level_2_mask = { mask_race = kobold } }
			racial_focus_lizardfolk = { grant_level_2_mask = { mask_race = lizardfolk } }
			racial_focus_ogre = { grant_level_2_mask = { mask_race = ogre } }
			racial_focus_ruinborn = { grant_level_2_mask = { mask_race = ruinborn } }
			racial_focus_troll = { grant_level_2_mask = { mask_race = troll } }
		}
	}
}

country_event = { #upgrades mask to level three, fired by .104
	id = flavour_maskedbutcher.107
	title = flavour_maskedbutcher.107.t
	desc = flavour_maskedbutcher.107.d
	picture = BIG_STAR_IN_SKY_eventPicture
	
	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.107.a
		trigger_switch = {
			on_trigger = has_country_modifier
			racial_focus_centaur = { grant_level_3_mask = { mask_race = centaur } }
			racial_focus_dwarven = { grant_level_3_mask = { mask_race = dwarven } }
			racial_focus_elven = { grant_level_3_mask = { mask_race = elven } }
			racial_focus_gnollish = { grant_level_3_mask = { mask_race = gnollish } }
			racial_focus_gnomish = { grant_level_3_mask = { mask_race = gnomish } }
			racial_focus_goblin = { grant_level_3_mask = { mask_race = goblin } }
			racial_focus_halfling = { grant_level_3_mask = { mask_race = halfling } }
			racial_focus_harimari = { grant_level_3_mask = { mask_race = harimari } }
			racial_focus_harpy = { grant_level_3_mask = { mask_race = harpy } }
			racial_focus_hobgoblin = { grant_level_3_mask = { mask_race = hobgoblin } }
			racial_focus_human = { grant_level_3_mask = { mask_race = human } }
			racial_focus_kobold = { grant_level_3_mask = { mask_race = kobold } }
			racial_focus_lizardfolk = { grant_level_3_mask = { mask_race = lizardfolk } }
			racial_focus_ogre = { grant_level_3_mask = { mask_race = ogre } }
			racial_focus_ruinborn = { grant_level_3_mask = { mask_race = ruinborn } }
			racial_focus_troll = { grant_level_3_mask = { mask_race = troll } }
		}
	}
}

country_event = { #blood moon event
	id = flavour_maskedbutcher.109
	title = flavour_maskedbutcher.109.t
	desc = flavour_maskedbutcher.109.d
	picture = BIG_STAR_IN_SKY_eventPicture
	
	is_triggered_only = yes

	after = {
		hidden_effect = {
			every_neighbor_country = {
				clr_country_flag = blood_moon_checked_flg
				every_neighbor_country = {
					clr_country_flag = blood_moon_checked_flg
				}
			}
			clr_country_flag = chosen_majorities_flg
			clr_country_flag = chosen_minorities_flg
			every_owned_province = {
				limit = { has_province_flag = sacrificing_flag }
				clr_province_flag = sacrificing_flag
			}
		}
	}

	option = {
		name = flavour_maskedbutcher.109.a
		set_country_flag = chosen_majorities_flg
		trigger = {
			OR = {
				AND = { has_country_modifier = racial_focus_centaur blood_moon_majority_trigger = { mask_race = centaur } }
				AND = { has_country_modifier = racial_focus_dwarven blood_moon_majority_trigger = { mask_race = dwarven } }
				AND = { has_country_modifier = racial_focus_elven blood_moon_majority_trigger = { mask_race = elven } }
				AND = { has_country_modifier = racial_focus_gnollish blood_moon_majority_trigger = { mask_race = gnollish } }
				AND = { has_country_modifier = racial_focus_gnomish blood_moon_majority_trigger = { mask_race = gnomish } }
				AND = { has_country_modifier = racial_focus_goblin blood_moon_majority_trigger = { mask_race = goblin } }
				AND = { has_country_modifier = racial_focus_halfling blood_moon_majority_trigger = { mask_race = halfling } }
				AND = { has_country_modifier = racial_focus_harimari blood_moon_majority_trigger = { mask_race = harimari } }
				AND = { has_country_modifier = racial_focus_harpy blood_moon_majority_trigger = { mask_race = harpy } }
				AND = { has_country_modifier = racial_focus_hobgoblin blood_moon_majority_trigger = { mask_race = hobgoblin } }
				AND = { has_country_modifier = racial_focus_human blood_moon_majority_trigger = { mask_race = human } }
				AND = { has_country_modifier = racial_focus_kobold blood_moon_majority_trigger = { mask_race = kobold } }
				AND = { has_country_modifier = racial_focus_lizardfolk blood_moon_majority_trigger = { mask_race = lizardfolk } }
				AND = { has_country_modifier = racial_focus_ogre blood_moon_majority_trigger = { mask_race = ogre } }
				AND = { has_country_modifier = racial_focus_ruinborn blood_moon_majority_trigger = { mask_race = ruinborn } }
				AND = { has_country_modifier = racial_focus_troll blood_moon_majority_trigger = { mask_race = troll } }
			}
		}
		trigger_switch = { #sacrifices your chosen racial majority
			on_trigger = has_country_modifier
			racial_focus_centaur = { blood_moon_sacrifice_majority = { mask_race = centaur } }
			racial_focus_dwarven = { blood_moon_sacrifice_majority = { mask_race = dwarven } }
			racial_focus_elven = { blood_moon_sacrifice_majority = { mask_race = elven } }
			racial_focus_gnollish = { blood_moon_sacrifice_majority = { mask_race = gnollish } }
			racial_focus_gnomish = { blood_moon_sacrifice_majority = { mask_race = gnomish } }
			racial_focus_goblin = { blood_moon_sacrifice_majority = { mask_race = goblin } }
			racial_focus_halfling = { blood_moon_sacrifice_majority = { mask_race = halfling } }
			racial_focus_harimari = { blood_moon_sacrifice_majority = { mask_race = harimari } }
			racial_focus_harpy = { blood_moon_sacrifice_majority = { mask_race = harpy } }
			racial_focus_hobgoblin = { blood_moon_sacrifice_majority = { mask_race = hobgoblin } }
			racial_focus_human = { blood_moon_sacrifice_majority = { mask_race = human } }
			racial_focus_kobold = { blood_moon_sacrifice_majority = { mask_race = kobold } }
			racial_focus_lizardfolk = { blood_moon_sacrifice_majority = { mask_race = lizardfolk } }
			racial_focus_ogre = { blood_moon_sacrifice_majority = { mask_race = ogre } }
			racial_focus_ruinborn = { blood_moon_sacrifice_majority = { mask_race = ruinborn } }
			racial_focus_troll = { blood_moon_sacrifice_majority = { mask_race = troll } }
		}
		if = {
			limit = { has_country_flag = better_nightfall_flg }
			custom_tooltip = better_nightfall_tt
		}
		else = {
			custom_tooltip = nightfall_tt
		}
		hidden_effect = {
			every_neighbor_country = {
				limit = { capital_scope = { NOT = { continent = serpentspine } } }
				random_list = {
                    9 = { }
                    1 = {
                        modifier = {
                            factor = 9
                            has_country_flag = better_nightfall_flag
                        }
                        country_event = {
                            id = flavour_maskedbutcher.110
                        }
                    }
				}
				set_country_flag = blood_moon_checked_flg
				every_neighbor_country = {
					limit = { 
						NOT = { has_country_flag = blood_moon_checked_flg }
						capital_scope = { NOT = { continent = serpentspine } }
					}
					random_list = {
                        9 = { }
                        1 = {
                            modifier = {
                                factor = 9
                                has_country_flag = better_nightfall_flag
                            }
                            country_event = {
                                id = flavour_maskedbutcher.110
                            }
                        }
                    }
					set_country_flag = blood_moon_checked_flg
				}
			}
		}
		add_stability_or_adm_power = yes
	}

	option = { #same as above but for racial minorities instead
		name = flavour_maskedbutcher.109.b
		trigger = {
			OR = {
				AND = { has_country_modifier = racial_focus_centaur blood_moon_minority_trigger = { mask_race = centaur } }
				AND = { has_country_modifier = racial_focus_dwarven blood_moon_minority_trigger = { mask_race = dwarven } }
				AND = { has_country_modifier = racial_focus_elven blood_moon_minority_trigger = { mask_race = elven } }
				AND = { has_country_modifier = racial_focus_gnollish blood_moon_minority_trigger = { mask_race = gnollish } }
				AND = { has_country_modifier = racial_focus_gnomish blood_moon_minority_trigger = { mask_race = gnomish } }
				AND = { has_country_modifier = racial_focus_goblin blood_moon_minority_trigger = { mask_race = goblin } }
				AND = { has_country_modifier = racial_focus_halfling blood_moon_minority_trigger = { mask_race = halfling } }
				AND = { has_country_modifier = racial_focus_harimari blood_moon_minority_trigger = { mask_race = harimari } }
				AND = { has_country_modifier = racial_focus_harpy blood_moon_minority_trigger = { mask_race = harpy } }
				AND = { has_country_modifier = racial_focus_hobgoblin blood_moon_minority_trigger = { mask_race = hobgoblin } }
				AND = { has_country_modifier = racial_focus_human blood_moon_minority_trigger = { mask_race = human } }
				AND = { has_country_modifier = racial_focus_kobold blood_moon_minority_trigger = { mask_race = kobold } }
				AND = { has_country_modifier = racial_focus_lizardfolk blood_moon_minority_trigger = { mask_race = lizardfolk } }
				AND = { has_country_modifier = racial_focus_ogre blood_moon_minority_trigger = { mask_race = ogre } }
				AND = { has_country_modifier = racial_focus_ruinborn blood_moon_minority_trigger = { mask_race = ruinborn } }
				AND = { has_country_modifier = racial_focus_troll blood_moon_minority_trigger = { mask_race = troll } }
			}
		}
		set_country_flag = chosen_minorities_flg
		trigger_switch = {
			on_trigger = has_country_modifier
			racial_focus_centaur = { blood_moon_sacrifice_minority = { mask_race = centaur } }
			racial_focus_dwarven = { blood_moon_sacrifice_minority = { mask_race = dwarven } }
			racial_focus_elven = { blood_moon_sacrifice_minority = { mask_race = elven } }
			racial_focus_gnollish = { blood_moon_sacrifice_minority = { mask_race = gnollish } }
			racial_focus_gnomish = { blood_moon_sacrifice_minority = { mask_race = gnomish } }
			racial_focus_goblin = { blood_moon_sacrifice_minority = { mask_race = goblin } }
			racial_focus_halfling = { blood_moon_sacrifice_minority = { mask_race = halfling } }
			racial_focus_harimari = { blood_moon_sacrifice_minority = { mask_race = harimari } }
			racial_focus_harpy = { blood_moon_sacrifice_minority = { mask_race = harpy } }
			racial_focus_hobgoblin = { blood_moon_sacrifice_minority = { mask_race = hobgoblin } }
			racial_focus_human = { blood_moon_sacrifice_minority = { mask_race = human } }
			racial_focus_kobold = { blood_moon_sacrifice_minority = { mask_race = kobold } }
			racial_focus_lizardfolk = { blood_moon_sacrifice_minority = { mask_race = lizardfolk } }
			racial_focus_ogre = { blood_moon_sacrifice_minority = { mask_race = ogre } }
			racial_focus_ruinborn = { blood_moon_sacrifice_minority = { mask_race = ruinborn } }
			racial_focus_troll = { blood_moon_sacrifice_minority = { mask_race = troll } }
		}
		if = {
			limit = { has_country_flag = better_nightfall_flg }
			custom_tooltip = better_nightfall_tt
		}
		else = {
			custom_tooltip = nightfall_tt
		}
		hidden_effect = {
			every_neighbor_country = {
				limit = { capital_scope = { NOT = { continent = serpentspine } } }
				random_list = {
                    9 = { }
                    1 = {
                        modifier = {
                            factor = 9
                            has_country_flag = better_nightfall_flag
                        }
                        country_event = {
                            id = flavour_maskedbutcher.110
                        }
                    }
				}
				set_country_flag = blood_moon_checked_flg
				every_neighbor_country = {
					limit = { 
						NOT = { has_country_flag = blood_moon_checked_flg }
						capital_scope = { NOT = { continent = serpentspine } }
					}
					random_list = {
                        9 = { }
                        1 = {
                            modifier = {
                                factor = 9
                                has_country_flag = better_nightfall_flag
                            }
                            country_event = {
                                id = flavour_maskedbutcher.110
                            }
                        }
                    }
					set_country_flag = blood_moon_checked_flg
				}
			}
		}
		add_stability_or_adm_power = yes
	}
}

country_event = { #fired for unlucky victims of the blood moon, seems to work fine
	id = flavour_maskedbutcher.110
	title = flavour_maskedbutcher.110.t
	desc = flavour_maskedbutcher.110.d
	picture = COMET_SIGHTED_eventPicture
	
	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.110.a
		add_stability = -1
	}
}

country_event = { #fired after selecting the claim oblations peace option. adds your new minorities
	id = flavour_maskedbutcher.111
	title = flavour_maskedbutcher.111.t
	desc = flavour_maskedbutcher.111.d
	picture = ARTWORK_eventPicture
	hidden = yes
	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.111.a
		if = {
			limit = { event_target:oblations_loser = { culture_is_centaur = yes } }
			add_oblations = { mask_race = centaur }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_dwarven = yes } }
			add_oblations = { mask_race = dwarven }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_elven = yes } }
			add_oblations = { mask_race = elven }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_gnollish = yes } }
			add_oblations = { mask_race = gnollish }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_gnomish = yes } }
			add_oblations = { mask_race = gnomish }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_goblin = yes } }
			add_oblations = { mask_race = goblin }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_halfling = yes } }
			add_oblations = { mask_race = halfling }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_harimari = yes } }
			add_oblations = { mask_race = harimari }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_harpy = yes } }
			add_oblations = { mask_race = harpy }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_hobgoblin = yes } }
			add_oblations = { mask_race = hobgoblin }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_human = yes } }
			add_oblations = { mask_race = human }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_kobold = yes } }
			add_oblations = { mask_race = kobold }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_lizardfolk = yes } }
			add_oblations = { mask_race = lizardfolk }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_ogre = yes } }
			add_oblations = { mask_race = ogre }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_ruinborn = yes } }
			add_oblations = { mask_race = ruinborn }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_troll = yes } }
			add_oblations = { mask_race = troll }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_half_elven = yes } }
			add_oblations = { mask_race = half_elven }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_half_orcish = yes } }
			add_oblations = { mask_race = half_orcish }
		}
		else_if = {
			limit = { event_target:oblations_loser = { culture_is_mechanim = yes } }
			add_oblations = { mask_race = mechanim }
		}
		else = {
			add_oblations = { mask_race = orcish }
		}
	}
}

country_event = {
	id = flavour_maskedbutcher.113
	title = flavour_maskedbutcher.113.t
	desc = flavour_maskedbutcher.113.d
	picture = ARTWORK_eventPicture
	hidden = yes
	is_triggered_only = yes

	option = {
		name = flavour_maskedbutcher.113.a
		every_owned_province = {
			limit = { has_province_modifier = mb_reserve has_owner_culture = yes }
			trigger_switch = {
				on_trigger = has_province_flag
				centaur_reserve_flag = { change_culture = inaer_centaur }
				dwarven_reserve_flag = { change_culture = copper_dwarf }
				elven_reserve_flag = { change_culture = wood_elf }
				gnollish_reserve_flag = { change_culture = flamemarked_gnoll }
				gnomish_reserve_flag = { change_culture = imperial_gnome }
				goblin_reserve_flag = { change_culture = forest_goblin }
				halfling_reserve_flag = { change_culture = redfoot_halfling }
				harimari_reserve_flag = { change_culture = silent_harimari }
				harpy_reserve_flag = { change_culture = firanyan_harpy }
				hobgoblin_reserve_flag = { change_culture = wolf_command }
				kobold_reserve_flag = { change_culture = darkscale_kobold }
				lizardfolk_reserve_flag = { change_culture = cyazizeta_lizardfolk }
				hill_ogre_reserve_flag = { change_culture = fathide_ogre }
				swamp_ogre_reserve_flag = { change_culture = mossmouth_ogre }
				ruinborn_reserve_flag = { change_culture = mayte }
				troll_reserve_flag = { change_culture = forest_troll }
				cute_troll_reserve_flag = { change_culture = cave_troll }
			}
		}
	}
}

country_event = {
	id = flavour_maskedbutcher.114
	title = flavour_maskedbutcher.114.t
	desc = flavour_maskedbutcher.114.d
	picture = ARTWORK_eventPicture
	hidden = yes
	is_triggered_only = yes
	trigger = {
		OR = {
			tag = H81
			was_tag = H81
		}
		any_owned_province = {
			has_province_modifier = mb_reserve
			has_owner_culture = yes
		}
	}

	option = {
		name = flavour_maskedbutcher.114.a
		trigger = { NOT = { has_country_flag = mb_unlucky_once_flg } }
		random_list = {
			80 = { set_country_flag = mb_unlucky_once_flg }
			20 = { country_event = { id = flavour_maskedbutcher.113 } }
		}
	}

	option = {
		name = flavour_maskedbutcher.114.b
		trigger = { has_country_flag = mb_unlucky_once_flg NOT = { has_country_flag = mb_unlucky_twice_flg } }
		random_list = {
			60 = { set_country_flag = mb_unlucky_twice_flg }
			40 = { 
				country_event = { id = flavour_maskedbutcher.113 } 
				clr_country_flag = mb_unlucky_once_flg 
			}
		}
	}

	option = {
		name = flavour_maskedbutcher.114.c
		trigger = { has_country_flag = mb_unlucky_twice_flg NOT = { has_country_flag = mb_unlucky_thrice_flg } }
		random_list = {
			40 = { set_country_flag = mb_unlucky_thrice_flg }
			60 = { 
				country_event = { id = flavour_maskedbutcher.113 } 
				clr_country_flag = mb_unlucky_once_flg 
				clr_country_flag = mb_unlucky_twice_flg 
			}
		}
	}

	option = {
		name = flavour_maskedbutcher.114.e
		trigger = { has_country_flag = mb_unlucky_thrice_flg NOT = { has_country_flag = mb_absolutely_devastating_flg } }
		random_list = {
			20 = { set_country_flag = mb_absolutely_devastating_flg }
			80 = { 
				country_event = { id = flavour_maskedbutcher.113 } 
				clr_country_flag = mb_unlucky_once_flg 
				clr_country_flag = mb_unlucky_twice_flg 
				clr_country_flag = mb_unlucky_thrice_flg 
			}
		}
	}

	option = {
		name = flavour_maskedbutcher.114.f
		trigger = { has_country_flag = mb_absolutely_devastating_flg }
		country_event = { id = flavour_maskedbutcher.113 }
		clr_country_flag = mb_unlucky_once_flg 
		clr_country_flag = mb_unlucky_twice_flg 
		clr_country_flag = mb_unlucky_thrice_flg
		clr_country_flag = mb_absolutely_devastating_flg
	}
}