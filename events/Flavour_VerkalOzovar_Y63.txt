namespace = verkalozovar_events

#Elephant Grove
country_event = {
	id = verkalozovar_events.1
	title = verkalozovar_events.1.title
	desc = verkalozovar_events.1.desc
	picture = ELEPHANTS_AND_PEASANTS_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = verkalozovar_events.1.a
		ai_chance = { factor = 1 }

		custom_tooltip = Y63_elephant_grove_tt
		set_country_flag = Y63_elephant_grove_flag
	}

	option = {
		name = verkalozovar_events.1.b
		ai_chance = { factor = 0 }
	}
}

#Elephant Grove Rebellion
country_event = {
	id = verkalozovar_events.2
	title = verkalozovar_events.2.title
	desc = verkalozovar_events.2.desc
	picture = WAR_ELEPHANT_eventPicture
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			if = {
				limit = { 
					4761 = {
						OR = {
							country_or_non_sovereign_subject_holds = Y66
							AND = {
								exists = Y97
								country_or_non_sovereign_subject_holds = event_target:baihon_winner_event_target
							}
						}
					}
				}
				4761 = { cede_province = Y70 }
			}
			if = {
				limit = { 
					4967 = { 
						OR = {
							country_or_non_sovereign_subject_holds = Y66
							AND = {
								exists = Y97
								country_or_non_sovereign_subject_holds = event_target:baihon_winner_event_target
							}
						}
					}
				}
				4967 = { cede_province = Y70 }
			}
			Y70 = {
				capital_scope = {
					infantry = PREV
					infantry = PREV
					infantry = PREV
					infantry = PREV
					cavalry = PREV
					cavalry = PREV
				}
			}
			Y63 = {
				create_subject = {
					subject_type = patronate
					subject = Y70
				}
				country_event = {
					id = verkalozovar_events.3
				}
			}
		}
	}
	
	option = {
		name = verkalozovar_events.2.a
		ai_chance = { factor = 1 }
	}

	after = {
		hidden_effect = {
			Y70 = {
				country_event = { id = anbennar_setup.3 }
			}
		}
	}
}

#Elephant Grove Rebellion, VO version
country_event = {
	id = verkalozovar_events.3
	title = verkalozovar_events.3.title
	desc = verkalozovar_events.3.desc
	picture = ELEPHANT_KING_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = verkalozovar_events.3.a
		ai_chance = { factor = 1 }

		custom_tooltip = Y63_phonan_tt
	}
}

#Keeping our Promises
country_event = {
	id = verkalozovar_events.4
	title = verkalozovar_events.4.title
	desc = verkalozovar_events.4.desc
	picture = DIPLOMACY_eventPicture
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			# Installs Mo Hoang
			every_owned_province = {
				limit = {
					OR = {
						culture = khom
						OR = {
							is_core = Y66
							is_core = Y97
						}
					}
				}
				cede_province = Y67
			}
			every_subject_country = {
				limit = {
					NOT = { tag = Y70 }
				}
				every_owned_province = {
					limit = {
						OR = {
							is_core = Y66
							is_core = Y67
							is_core = Y97
						}
						OR = {
							culture = khom
							culture = phonan
						}
					}
					cede_province = Y67
				}
			}
			create_subject = {
			    subject_type = patronate
			    subject = Y67
			}
		}
	}
	
	option = {
		name = verkalozovar_events.4.a
		ai_chance = { factor = 1 }

		custom_tooltip = Y63_promises_kept_tt
		#releases phonan
		if = {
			limit = { has_country_flag = Y63_elephant_grove_flag }
			custom_tooltip = Y63_promises_kept_2_tt
			hidden_effect = {
				every_owned_province = {
					limit = {
						is_core = Y70
						OR = {
							area = ananhu_area
							area = phonan_area
						}
					}
					cede_province = Y70
				}
				every_subject_country = {
					limit = {
						any_owned_province = { culture = phonan }
					}
					every_owned_province = {
						limit = {
							culture = phonan
							OR = {
								area = ananhu_area
								area = phonan_area
							}
						}
						cede_province = Y70
					}
				}
			}
			create_subject = {
			    subject_type = patronate
			    subject = Y70
			}
		}
	}
}

country_event = { # Treaty of Kai
	id = verkalozovar_events.5
	title = verkalozovar_events.5.title
	desc = verkalozovar_events.5.desc
	picture = DIPLOMACY_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			add_country_modifier = {
				name = Y63_treaty_happened
				duration = 1825
				hidden = yes
			}
		}
	}
	
	option = {
		name = verkalozovar_events.5.a
		Y67 = { country_event = { id = verkalozovar_events.6 } }
	}
}

country_event = { # The Duandi Treaty
	id = verkalozovar_events.6
	title = verkalozovar_events.6.title
	desc = verkalozovar_events.6.desc
	picture = DIPLOMACY_eventPicture
	
	is_triggered_only = yes
	
	option = { # we accept
		name = verkalozovar_events.6.a
		medium_increase_of_dwarven_tolerance_effect = yes
		FROM = { country_event = { id = verkalozovar_events.7 } }
	}
}

country_event = { # The Duandi Treaty
	id = verkalozovar_events.7
	title = verkalozovar_events.7.title
	desc = verkalozovar_events.7.desc
	picture = CITY_VIEW_eventPicture
	
	is_triggered_only = yes
	
	option = { # they accepted yay
		name = verkalozovar_events.7.a
		add_trust = {
			who = FROM
			value = 10
			mutual = yes
		}
		medium_increase_of_human_tolerance_effect = yes
	}
}

country_event = { # Duandi Open Renegotiation
	id = verkalozovar_events.8
	title = verkalozovar_events.8.title
	desc = verkalozovar_events.8.desc
	picture = DIPLOMACY_eventPicture
	
	is_triggered_only = yes
	
	option = { # accept
		name = verkalozovar_events.8.a
		FROM = {
			country_event = { id = verkalozovar_events.9 }
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				FROM = {
					capital_scope = {
						has_dwarven_hold_3 = yes
					}
				}
			}
			modifier = {
				factor = 2
				has_opinion = {
					who = ROOT
					value = 190
				}
			}
		}
	}
	
	option = { # refuse
		name = verkalozovar_events.8.b
		FROM = {
			country_event = { id = verkalozovar_events.10 }
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				FROM = {
					capital_scope = {
						NOT = { has_dwarven_hold_3 = yes }
					}
				}
			}
			modifier = {
				factor = 2
				NOT = {
					has_opinion = {
						who = ROOT
						value = 190
					}
				}
			}
			modifier = {
				factor = 2
				total_development = Y63
			}
		}
	}
}

country_event = { # Dihn Accepts!
	id = verkalozovar_events.9
	title = verkalozovar_events.9.title
	desc = verkalozovar_events.9.desc
	picture = DIPLOMACY_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = verkalozovar_events.9.a
		create_subject = {
			subject = FROM
			subject_type = autonomous_vassal
		}
	}
}

country_event = { # Dihn Refuses!
	id = verkalozovar_events.10
	title = verkalozovar_events.10.title
	desc = verkalozovar_events.10.desc
	picture = DIPLOMACY_eventPicture
	
	is_triggered_only = yes
	
	option = { # show em who's the boss
		name = verkalozovar_events.10.a
		custom_tooltip = Y63_dihn_war_tt
		declare_war_with_cb = {
			who = event_target:baihon_winner_event_target
			casus_belli = cb_vassalize_mission
		}
		set_country_flag = Y63_contest_of_strength
	}
	
	option = { # nah
		name = verkalozovar_events.10.b
		add_stability = -1
		add_prestige = -10
	}
}

country_event = { # Contest of strength
	id = verkalozovar_events.120
	title = verkalozovar_events.120.title
	desc = verkalozovar_events.120.desc
	picture = MULTI_RACIAL_MERC_eventPicture
	
	trigger = {
		tag = Y63
		has_country_flag = Y63_contest_of_strength
		if = {
			limit = { has_saved_global_event_target = baihon_winner_event_target }
			war_score_against = {
				who = event_target:baihon_winner_event_target
				value = 75
			}
		}
		else = { always = no }
	}
	
	option = { # we win lol
		name = verkalozovar_events.120.a
		white_peace = event_target:baihon_winner_event_target
		event_target:baihon_winner_event_target = {
			every_war_enemy_country = {
				white_peace = PREV
			}
		}
		create_subject = {
		    subject_type = autonomous_vassal
		    subject = event_target:baihon_winner_event_target
		}
		event_target:baihon_winner_event_target = {
			add_opinion = {
				who = ROOT
				modifier = they_force_vassalized_us
			}
		}
		add_prestige = 20
	}
}

country_event = { # The Place of Runesmithing
	id = verkalozovar_events.11
	title = verkalozovar_events.11.title
	desc = verkalozovar_events.11.desc
	picture = SPELL_LIST_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = verkalozovar_events.11.a
		set_estate_privilege = estate_mages_organization_runesmiths
		define_advisor = {
			type = court_mage
			skill = 2
			culture = nephrite_dwarf
			discount = yes
			cost_multiplier = 0.5
		}
	}
}

country_event = { # A Brief Conversation
	id = verkalozovar_events.12
	title = verkalozovar_events.12.title
	desc = verkalozovar_events.12.desc
	picture = PRIEST_PHANTOM_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
		set_ruler_flag = Y63_conversed_with_oz_amekh
	}
	
	option = { # learn from him
		name = verkalozovar_events.12.a
		force_add_ruler_personality = { personality = mage_personality }
		set_country_flag = Y63_oz_amekh_teachings
	}
	
	option = { # he should stay
		name = verkalozovar_events.12.b
		custom_tooltip = Y63_guidance_tooltip
		hidden_effect = {
			every_subject_country = {
				add_country_modifier = {
					name = Y63_oz_amekh_guide
					duration = -1
				}
			}
		}
		set_country_flag = Y63_oz_amekh_ending
	}
}

country_event = { # Ancestral Grip
	id = verkalozovar_events.13
	title = verkalozovar_events.13.title
	desc = verkalozovar_events.13.desc
	picture = MAGE_ANIMATED_eventPicture
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = verkalozovar_events.13.a
		add_country_modifier = {
			name = Y63_oz_amekh_seized_power
			duration = -1
		}
		clr_country_flag = Y63_oz_amekh_teachings
		set_country_flag = Y63_oz_amekh_ending
	}
}

country_event = { # Palace of the Mountain Wizard
	id = verkalozovar_events.14
	title = verkalozovar_events.14.title
	desc = verkalozovar_events.14.desc
	picture = EKLUZAGNU_eventPicture
	
	is_triggered_only = yes
	
	option = { # king
		name = verkalozovar_events.14.a
		custom_tooltip = Y63_building_nephrite_palace_tt
		custom_tooltip = Y63_nephrite_palace_king_tt
		set_country_flag = Y63_occupancy_king
	}
	
	option = { # oz-amekh
		name = verkalozovar_events.14.b
		custom_tooltip = Y63_building_nephrite_palace_tt
		custom_tooltip = Y63_nephrite_palace_oz_amekh_tt
		set_country_flag = Y63_occupancy_oz_amekh
		set_country_flag = Y63_oz_amekh_ending
	}
}

country_event = { # The Grand Projection
	id = verkalozovar_events.15
	title = verkalozovar_events.15.title
	desc = verkalozovar_events.15.desc
	picture = PRIEST_PHANTOM_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = verkalozovar_events.15.a
		custom_tooltip = Y63_unlocked_grand_runes_tt
		set_country_flag = Y63_unlocked_grand_runes
	}
}

country_event = { # Brothers Revolt Succeded
	id = verkalozovar_events.16
	title = verkalozovar_events.16.title
	desc = verkalozovar_events.16.desc
	picture = MULTI_RACIAL_MERC_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = verkalozovar_events.16.a
		create_subject = {
			subject = FROM
			subject_type = vassal
		}
	}
}

country_event = { # Brothers Revolt Failed - hidden
	id = verkalozovar_events.17
	title = verkalozovar_events.17.title
	desc = verkalozovar_events.17.desc
	picture = DIPLOMACY_eventPicture
	
	fire_only_once = yes
	
	hidden = yes
	
	trigger = {
		has_country_flag = Y63_brothers_revolt_flag
		NOT = { num_of_rebel_armies = 1 }
		NOT = { num_of_rebel_controlled_provinces = 1 }
		NOT = {
			is_in_war = {
				attacker_leader = Y63
				defender_leader = ROOT
				casus_belli = cb_support_rebels
			}
		}
	}
	
	option = {
		name = verkalozovar_events.17.a
		clr_country_flag = Y63_brothers_revolt_flag
		Y63 = { country_event = { id = verkalozovar_events.18 } }
	}
}

country_event = { # Brothers Revolt Failed - Notification
	id = verkalozovar_events.18
	title = verkalozovar_events.18.title
	desc = verkalozovar_events.18.desc
	picture = DIPLOMACY_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = verkalozovar_events.18.a
		add_casus_belli = {
			target = FROM
			type = cb_vassalize_mission
		}
	}
}

#Jadequest
country_event = { # Brothers Cast Adrift
	id = verkalozovar_events.20
	title = verkalozovar_events.20.title
	desc = verkalozovar_events.20.desc
	picture = COURT_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = verkalozovar_events.20.a
		custom_tooltip = Y63_jadequest_available_tt
		set_country_flag = Y63_jadequest
	}
}

country_event = { # Gardens of a Bygone Era
	id = verkalozovar_events.21
	title = verkalozovar_events.21.title
	desc = verkalozovar_events.21.desc
	picture = EXPLORERS_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		tag = Y63
		has_country_flag = Y63_jadequest
		4576 = {
			owner = { is_subject_of = ROOT }
		}
	}
	
	immediate = {
		hidden_effect = { change_variable = { jadeCounter = 1 } }
	}
	
	option = {
		name = verkalozovar_events.21.a
		add_prestige = 10
	}
}

country_event = { # Watch Thindri 'The Beard' in Teplinbasiet
	id = verkalozovar_events.22
	title = verkalozovar_events.22.title
	desc = verkalozovar_events.22.desc
	picture = THEATRE_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		tag = Y63
		has_country_flag = Y63_jadequest
		4941 = {
			owner = { is_subject_of = ROOT }
		}
	}
	
	immediate = {
		hidden_effect = { change_variable = { jadeCounter = 1 } }
	}
	
	option = {
		name = verkalozovar_events.22.a
		define_general = {
			name = "Thindri 'The Beard'"
			fire = 1
			shock = 4
			manuever = 3
			siege = 2
		}
	}
}

country_event = { # Masons of the Sands
	id = verkalozovar_events.23
	title = verkalozovar_events.23.title
	desc = verkalozovar_events.23.desc
	picture = CITY_VIEW_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		tag = Y63
		has_country_flag = Y63_jadequest
		4740 = {
			owner = { is_subject_of = ROOT }
		}
	}
	
	immediate = {
		hidden_effect = { change_variable = { jadeCounter = 1 } }
	}
	
	option = {
		name = verkalozovar_events.23.a
		add_country_modifier = {
			name = Y63_masons_of_the_sands
			duration = 10950
		}
	}
}

country_event = { # A Wandering Soul, Looking to Rest his Talents
	id = verkalozovar_events.24
	title = verkalozovar_events.24.title
	desc = verkalozovar_events.24.desc
	picture = SCOTTISH_MERCENARIES_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		tag = Y63
		has_country_flag = Y63_jadequest
		4565 = {
			owner = { is_subject_of = ROOT }
		}
	}
	
	immediate = {
		hidden_effect = { change_variable = { jadeCounter = 1 } }
	}
	
	option = {
		name = verkalozovar_events.24.a
		5424 = {
			add_base_tax = 1
			add_base_production = 1
		}
	}
}

country_event = { # Masters of Plank and Nail
	id = verkalozovar_events.25
	title = verkalozovar_events.25.title
	desc = verkalozovar_events.25.desc
	picture = PAINTER_ARTIST_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		tag = Y63
		has_country_flag = Y63_jadequest
		4774 = {
			owner = { is_subject_of = ROOT }
		}
	}
	
	immediate = {
		hidden_effect = { change_variable = { jadeCounter = 1 } }
	}
	
	option = {
		name = verkalozovar_events.25.a
		random_subject_country = {
			limit = { owns = 4774 }
			4774 = {
				add_unit_construction = {
					type = light_ship
					amount = 4
					speed = 0.5
					cost = 0.5
				}
			}
		}
	}
}

country_event = { # Monsoon Season
	id = verkalozovar_events.26
	title = verkalozovar_events.26.title
	desc = verkalozovar_events.26.desc
	picture = indiangfx_CITY_VIEW_eventPicture

	fire_only_once = yes
	
	trigger = {
		tag = Y63
		has_country_flag = Y63_jadequest
		4600 = {
			owner = { is_subject_of = ROOT }
		}
	}
	
	immediate = {
		hidden_effect = { change_variable = { jadeCounter = 1 } }
	}
	
	option = {
		name = verkalozovar_events.26.a
		define_advisor = {
			type = natural_scientist
			skill = 2
			discount = yes
			cost_multiplier = 0.5
		}
	}
}

country_event = { # Countryside Brethren
	id = verkalozovar_events.27
	title = verkalozovar_events.27.title
	desc = verkalozovar_events.27.desc
	picture = ELEPHANTS_AND_PEASANTS_eventPicture
	goto = target_province_1
	
	mean_time_to_happen = { days = 1 }
	is_triggered_only = yes
	
	trigger = {
		tag = Y63
		has_country_flag = Y63_jadequest
		has_country_flag = Y63_jadequest_adventurers
		any_subject_country = { any_owned_province = { culture = hinphat } }
	}
	
	immediate = {
		hidden_effect = {
			change_variable = { jadeCounter = 1 }
			random_subject_country = {
				limit = { any_owned_province = { culture = hinphat } }
				random_owned_province = {
					limit = { culture = hinphat }
					save_event_target_as = target_province_1
				}
			}
		}
	}
	
	option = {
		name = verkalozovar_events.27.a
		event_target:target_province_1 = {
			add_dwarven_minority_size_effect = yes
			add_base_production = 1
		}
	}
}

country_event = { # Helping the War Effort
	id = verkalozovar_events.28
	title = verkalozovar_events.28.title
	desc = verkalozovar_events.28.desc
	picture = MULTI_RACIAL_MERC_eventPicture
	
	mean_time_to_happen = { days = 1 }
	is_triggered_only = yes
	
	trigger = {
		tag = Y63
		has_country_flag = Y63_jadequest
		has_country_flag = Y63_jadequest_adventurers
		has_country_flag = Y63_jadequest_adventurers_1
		is_at_war = yes
		any_subject_country = { any_owned_province = { trade_goods = copper } }
	}
	
	immediate = {
		hidden_effect = {
			change_variable = { jadeCounter = 1 }
			random_subject_country = {
				limit = {
					any_owned_province = {
						trade_goods = copper
						NOT = { has_province_flag = jadequest_province }
					}
				}
				random_owned_province = {
					limit = { trade_goods = copper NOT = { has_province_flag = jadequest_province } }
					save_event_target_as = target_province_1
					set_province_flag = jadequest_province
				}
			}
			random_subject_country = {
				limit = {
					any_owned_province = {
						trade_goods = copper
						NOT = { has_province_flag = jadequest_province }
					}
				}
				random_owned_province = {
					limit = { trade_goods = copper NOT = { has_province_flag = jadequest_province } }
					save_event_target_as = target_province_2
					set_province_flag = jadequest_province
				}
			}
			random_subject_country = {
				limit = {
					any_owned_province = {
						trade_goods = copper
						NOT = { has_province_flag = jadequest_province }
					}
				}
				random_owned_province = {
					limit = { trade_goods = copper NOT = { has_province_flag = jadequest_province } }
					save_event_target_as = target_province_3
					set_province_flag = jadequest_province
				}
			}
		}
	}
	
	option = {
		name = verkalozovar_events.28.a
		event_target:target_province_1 = {
			add_dwarven_minority_size_effect = yes
			add_base_production = 1
			add_province_modifier = {
				name = Y63_dwarven_smiths
				duration = 3650
			}
			clr_province_flag = jadequest_province
		}
		if = {
			limit = { has_saved_event_target = target_province_2 }
			event_target:target_province_2 = {
				add_dwarven_minority_size_effect = yes
				add_base_production = 1
				add_province_modifier = {
					name = Y63_dwarven_smiths
					duration = 3650
				}
				clr_province_flag = jadequest_province
			}
		}
		if = {
			limit = { has_saved_event_target = target_province_3 }
			event_target:target_province_3 = {
				add_dwarven_minority_size_effect = yes
				add_base_production = 1
				add_province_modifier = {
					name = Y63_dwarven_smiths
					duration = 3650
				}
				clr_province_flag = jadequest_province
			}
		}
	}
}

country_event = { # Construction Assistance
	id = verkalozovar_events.29
	title = verkalozovar_events.29.title
	desc = verkalozovar_events.29.desc
	picture = DARK_EXPEDITION_eventPicture
	
	mean_time_to_happen = { days = 1 }
	is_triggered_only = yes
	
	trigger = {
		tag = Y63
		has_country_flag = Y63_jadequest
		has_country_flag = Y63_jadequest_adventurers
		has_country_flag = Y63_jadequest_adventurers_2
		any_subject_country = { any_owned_province = { has_construction = building } }
	}
	
	immediate = {
		hidden_effect = {
			change_variable = { jadeCounter = 1 }
			random_subject_country = {
				limit = {
					any_owned_province = { has_construction = building }
				}
				random_owned_province = {
					limit = { has_construction = building }
					save_event_target_as = target_province
				}
			}
		}
	}
	
	option = {
		name = verkalozovar_events.29.a
		event_target:target_province = {
			add_dwarven_minority_size_effect = yes
			add_base_production = 1
			add_province_modifier = {
				name = Y63_dwarven_construction
				duration = 3650
			}
		}
	}
}

country_event = { # Beast Slayers
	id = verkalozovar_events.30
	title = verkalozovar_events.30.title
	desc = verkalozovar_events.30.desc
	picture = MULTI_RACIAL_MERC_eventPicture
	
	mean_time_to_happen = { days = 1 }
	is_triggered_only = yes
	
	trigger = {
		tag = Y63
		has_country_flag = Y63_jadequest
		has_country_flag = Y63_jadequest_adventurers
		has_country_flag = Y63_jadequest_adventurers_3
		any_subject_country = {
			any_owned_province = {
				OR = {
					has_province_modifier = aw_haunted_house_1
					has_province_modifier = aw_haunted_house_2
					has_province_modifier = aw_haunted_house_3
					has_province_modifier = aw_eldritch_cultists_1
					has_province_modifier = aw_eldritch_cultists_2
					has_province_modifier = aw_eldritch_cultists_3
					has_province_modifier = aw_hags_1
					has_province_modifier = aw_hags_2
					has_province_modifier = aw_hags_3
				}
			}
		}
	}
	
	immediate = {
		hidden_effect = {
			change_variable = { jadeCounter = 1 }
			random_subject_country = {
				limit = {
					any_owned_province = {
						OR = {
							has_province_modifier = aw_haunted_house_1
							has_province_modifier = aw_haunted_house_2
							has_province_modifier = aw_haunted_house_3
							has_province_modifier = aw_eldritch_cultists_1
							has_province_modifier = aw_eldritch_cultists_2
							has_province_modifier = aw_eldritch_cultists_3
							has_province_modifier = aw_hags_1
							has_province_modifier = aw_hags_2
							has_province_modifier = aw_hags_3
						}
					}
				}
				random_owned_province = {
					limit = {
						OR = {
							has_province_modifier = aw_haunted_house_1
							has_province_modifier = aw_haunted_house_2
							has_province_modifier = aw_haunted_house_3
							has_province_modifier = aw_eldritch_cultists_1
							has_province_modifier = aw_eldritch_cultists_2
							has_province_modifier = aw_eldritch_cultists_3
							has_province_modifier = aw_hags_1
							has_province_modifier = aw_hags_2
							has_province_modifier = aw_hags_3
						}
					}
					save_event_target_as = target_province
				}
			}
		}
	}
	
	option = {
		name = verkalozovar_events.30.a
		event_target:target_province = {
			add_dwarven_minority_size_effect = yes
			add_base_manpower = 1
			remove_province_modifier = aw_haunted_house_1
			remove_province_modifier = aw_haunted_house_2
			remove_province_modifier = aw_haunted_house_3
			remove_province_modifier = aw_eldritch_cultists_1
			remove_province_modifier = aw_eldritch_cultists_2
			remove_province_modifier = aw_eldritch_cultists_3
			remove_province_modifier = aw_hags_1
			remove_province_modifier = aw_hags_2
			remove_province_modifier = aw_hags_3
		}
	}
}

country_event = { # Embassy Immigration
	id = verkalozovar_events.31
	title = verkalozovar_events.31.title
	desc = verkalozovar_events.31.desc
	picture = DIPLOMACY_eventPicture
	
	mean_time_to_happen = { days = 1 }
	is_triggered_only = yes
	
	trigger = {
		tag = Y63
		has_country_flag = Y63_jadequest
		has_country_flag = Y63_jadequest_diplomatic
		any_subject_country = { is_subject_of_type = patronate }
	}
	
	immediate = {
		hidden_effect = {
			change_variable = { jadeCounter = 1 }
			random_subject_country = {
				limit = { is_subject_of_type = patronate NOT = { has_country_flag = jadequest_country } }
				capital_scope = {
					save_event_target_as = target_province_1
				}
				set_country_flag = jadequest_country
			}
			random_subject_country = {
				limit = { is_subject_of_type = patronate NOT = { has_country_flag = jadequest_country } }
				capital_scope = {
					save_event_target_as = target_province_2
				}
				set_country_flag = jadequest_country
			}
			random_subject_country = {
				limit = { is_subject_of_type = patronate NOT = { has_country_flag = jadequest_country } }
				capital_scope = {
					save_event_target_as = target_province_3
				}
				set_country_flag = jadequest_country
			}
		}
	}
	
	option = {
		name = verkalozovar_events.31.a
		event_target:target_province_1 = {
			add_dwarven_minority_size_effect = yes
			add_base_production = 1
		}
		if = {
			limit = { has_saved_event_target = target_province_2 }
			event_target:target_province_2 = {
				add_dwarven_minority_size_effect = yes
				add_base_production = 1
			}
		}
		if = {
			limit = { has_saved_event_target = target_province_3 }
			event_target:target_province_3 = {
				add_dwarven_minority_size_effect = yes
				add_base_production = 1
			}
		}
		hidden_effect = {
			every_subject_country = {
				clr_country_flag = jadequest_country
			}
		}
	}
}

country_event = { # Great Foundries
	id = verkalozovar_events.32
	title = verkalozovar_events.32.title
	desc = verkalozovar_events.32.desc
	picture = DIPLOMACY_eventPicture
	
	mean_time_to_happen = { days = 1 }
	is_triggered_only = yes
	
	trigger = {
		tag = Y63
		has_country_flag = Y63_jadequest
		has_country_flag = Y63_jadequest_diplomatic
		has_country_flag = Y63_jadequest_diplomatic_1
		any_subject_country = { any_owned_province = { trade_goods = iron } }
	}
	
	immediate = {
		hidden_effect = {
			change_variable = { jadeCounter = 1 }
			random_subject_country = {
				limit = {
					any_owned_province = {
						trade_goods = iron
						NOT = { has_province_flag = jadequest_province }
					}
				}
				random_owned_province = {
					limit = {
						trade_goods = iron
						NOT = { has_province_flag = jadequest_province }
					}
					save_event_target_as = target_province_1
					set_province_flag = jadequest_province
				}
			}
			random_subject_country = {
				limit = {
					any_owned_province = {
						trade_goods = iron
						NOT = { has_province_flag = jadequest_province }
					}
				}
				random_owned_province = {
					limit = {
						trade_goods = iron
						NOT = { has_province_flag = jadequest_province }
					}
					save_event_target_as = target_province_2
					set_province_flag = jadequest_province
				}
			}
			random_subject_country = {
				limit = {
					any_owned_province = {
						trade_goods = iron
						NOT = { has_province_flag = jadequest_province }
					}
				}
				random_owned_province = {
					limit = {
						trade_goods = iron
						NOT = { has_province_flag = jadequest_province }
					}
					save_event_target_as = target_province_3
					set_province_flag = jadequest_province
				}
			}
		}
	}
	
	option = {
		name = verkalozovar_events.32.a
		event_target:target_province_1 = {
			add_dwarven_minority_size_effect = yes
			add_base_production = 1
			add_province_modifier = {
				name = Y63_dwarven_foundries
				duration = 3650
			}
			clr_province_flag = jadequest_province
		}
		if = {
			limit = { has_saved_event_target = target_province_2 }
			event_target:target_province_2 = {
				add_dwarven_minority_size_effect = yes
				add_base_production = 1
				add_province_modifier = {
					name = Y63_dwarven_foundries
					duration = 3650
				}
				clr_province_flag = jadequest_province
			}
		}
		if = {
			limit = { has_saved_event_target = target_province_3 }
			event_target:target_province_3 = {
				add_dwarven_minority_size_effect = yes
				add_base_production = 1
				add_province_modifier = {
					name = Y63_dwarven_foundries
					duration = 3650
				}
				clr_province_flag = jadequest_province
			}
		}
	}
}

country_event = { # A Helping Hand in Administration
	id = verkalozovar_events.33
	title = verkalozovar_events.33.title
	desc = verkalozovar_events.33.desc
	picture = DIPLOMACY_eventPicture
	
	mean_time_to_happen = { days = 1 }
	is_triggered_only = yes
	
	trigger = {
		tag = Y63
		has_country_flag = Y63_jadequest
		has_country_flag = Y63_jadequest_diplomatic
		has_country_flag = Y63_jadequest_diplomatic_2
		any_subject_country = { any_owned_province = { has_courthouse_building_trigger = yes } }
	}
	
	immediate = {
		hidden_effect = {
			change_variable = { jadeCounter = 1 }
			random_subject_country = {
				limit = { any_owned_province = { has_courthouse_building_trigger = yes } }
				random_owned_province = {
					limit = { has_courthouse_building_trigger = yes }
					save_event_target_as = target_province
				}
			}
		}
	}
	
	option = {
		name = verkalozovar_events.33.a
		event_target:target_province = {
			add_dwarven_minority_size_effect = yes
			add_base_production = 1
			add_province_modifier = {
				name = Y63_dwarven_administrators
				duration = 3650
			}
		}
	}
}

country_event = { # Big Returns
	id = verkalozovar_events.34
	title = verkalozovar_events.34.title
	desc = verkalozovar_events.34.desc
	picture = DIPLOMACY_eventPicture
	
	mean_time_to_happen = { days = 1 }
	is_triggered_only = yes
	
	trigger = {
		tag = Y63
		has_country_flag = Y63_jadequest
		has_country_flag = Y63_jadequest_diplomatic
		has_country_flag = Y63_jadequest_diplomatic_3
		4420 = {
			any_trade_node_member_province = {
				owner = { is_subject_of = ROOT }
				province_has_center_of_trade_of_level = 2
			}
		}
	}
	
	immediate = {
		hidden_effect = {
			change_variable = { jadeCounter = 1 }
			4420 = {
				random_trade_node_member_province = {
					limit = {
						owner = { is_subject_of = ROOT }
						province_has_center_of_trade_of_level = 2
					}
					save_event_target_as = target_province
				}
			}
		}
	}
	
	option = {
		name = verkalozovar_events.34.a
		event_target:target_province = {
			add_dwarven_minority_size_effect = yes
			add_base_production = 1
		}
		add_years_of_income = 0.2
	}
}

country_event = { # AI hinphat unification
	id = verkalozovar_events.35
	title = verkalozovar_events.35.title
	desc = verkalozovar_events.35.desc
	picture = DIPLOMACY_eventPicture
	
	mean_time_to_happen = { days = 180 }
	fire_only_once = yes
	
	trigger = {
		tag = Y63
		ai = yes
		is_year = 1470
		NOT = {
			any_subject_country = {
				liberty_desire = 50
			}
		}
		Y88 = { is_subject_of = Y63 }
		Y56 = { is_subject_of = Y63 }
		Y87 = { is_subject_of = Y63 }
	}
	
	immediate = {
		hidden_effect = {
			Y88 = {
				inherit = Y87
				inherit = Y56
			}
			create_subject = {
				subject_type = patronate
				subject = Y88
			}
			random_subject_country = {
				limit = {
					primary_culture = hinphat
					is_subject_of_type = patronate
				}
				override_country_name = Y63_HINPHAT_NAME
				hidden_effect = {
					south_haless_superregion = {
						limit = { culture = hinphat }
						add_permanent_claim = PREV
					}
				}
				capital_scope = {
					add_base_tax = 2
					add_base_production = 2
					add_base_manpower = 3
				}
				add_country_modifier = {
					name = udrkron_subject_ai
					duration = -1
				}
			}
		}
	}
	
	option = {
		name = verkalozovar_events.35.a
	}
}

# Runes System Events

country_event = { # Runes Menu
	id = verkalozovar_events.100
	title = verkalozovar_events.100.title
	desc = verkalozovar_events.100.desc
	picture = SPELL_LIST_eventPicture
	
	is_triggered_only = yes
	
	option = { # go back
		name = verkalozovar_events.100.a
		highlight = yes
		clr_country_flag = V63_runes_menu_open
	}
	
	option = { # minor runes
		trigger = { has_country_flag = Y63_unlocked_minor_runes }
		name =  verkalozovar_events.100.b
		country_event = { id = verkalozovar_events.101 }
	}
	
	option = { # grand runes
		trigger = { has_country_flag = Y63_unlocked_grand_runes }
		name =  verkalozovar_events.100.c
		country_event = { id = verkalozovar_events.102 }
	}
}

country_event = { # Minor Runes
	id = verkalozovar_events.101
	title = verkalozovar_events.101.title
	desc = verkalozovar_events.101.desc
	picture = SPELL_LIST_eventPicture
	
	is_triggered_only = yes
	
	option = { # go back
		name = verkalozovar_events.101.a
		highlight = yes
		set_country_flag = Y63_rune_menu_no_after
		hidden_effect = { country_event = { id = verkalozovar_events.100 } }
	}
	
	option = { # Argzana
		name = verkalozovar_events.101.b
		if = {
			limit = { Y63_minor_rune_active = yes }
			custom_tooltip = Y63_minor_rune_active_menu_tt
			tooltip = {
				custom_tooltip = Y63_minor_rune_liberty_desire_tt
				add_mil_power = -50
				5424 = { add_base_tax = -1 }
				add_country_modifier = {
					name = Y63_minor_rune_argzana
					duration = 1825
				}
			}
		}
		else = {
			custom_tooltip = Y63_minor_rune_liberty_desire_tt
			add_mil_power = -50
			5424 = { add_base_tax = -1 }
			add_country_modifier = {
				name = Y63_minor_rune_argzana
				duration = 1825
			}
			hidden_effect = {
				every_subject_country =	{
					add_liberty_desire = 10
				}
			}
		}
	}
	
	option = { # Jolkin-Kanzad
		name = verkalozovar_events.101.c
		if = {
			limit = { Y63_minor_rune_active = yes }
			custom_tooltip = Y63_minor_rune_active_menu_tt
			tooltip = {
				custom_tooltip = Y63_minor_rune_liberty_desire_tt
				add_mil_power = -50
				5424 = { add_base_tax = -1 }
				add_country_modifier = {
					name = Y63_minor_rune_jolkin_kanzad
					duration = 1825
				}
			}
		}
		else = {
			custom_tooltip = Y63_minor_rune_liberty_desire_tt
			add_mil_power = -50
			5424 = { add_base_production = -1 }
			add_country_modifier = {
				name = Y63_minor_rune_jolkin_kanzad
				duration = 1825
			}
			hidden_effect = {
				every_subject_country =	{
					add_liberty_desire = 10
				}
			}
		}
	}
	
	option = { # Runic Ward
		name = verkalozovar_events.101.d
		if = {
			limit = { Y63_minor_rune_active = yes }
			custom_tooltip = Y63_minor_rune_active_menu_tt
			tooltip = {
				custom_tooltip = Y63_minor_rune_liberty_desire_tt
				add_mil_power = -50
				5424 = { add_base_manpower = -1 }
				if = { limit = { estate_influence = { estate = estate_mages influence = 66 } }
					custom_tooltip = Y63_minor_rune_runic_ward_3_tt
				}
				else_if = { limit = { estate_influence = { estate = estate_mages influence = 33 } }
					custom_tooltip = Y63_minor_rune_runic_ward_2_tt
				}
				else = {
					custom_tooltip = Y63_minor_rune_runic_ward_1_tt
				}
				custom_tooltip = Y63_cast_runic_ward_tt
			}
		}
		else = {
			custom_tooltip = Y63_minor_rune_liberty_desire_tt
			add_mil_power = -50
			5424 = { add_base_manpower = -1 }
			hidden_effect = {
				add_country_modifier = {
					name = Y63_minor_rune_runic_ward
					duration = 1825
					hidden = yes
				}
				every_subject_country =	{
					add_liberty_desire = 10
				}
			}
			if = { limit = { estate_influence = { estate = estate_mages influence = 66 } }
				custom_tooltip = Y63_minor_rune_runic_ward_3_tt
				hidden_effect = {
					every_owned_province = {
						limit = {
							has_no_ward_province_modifiers = yes
							is_city = yes
							OR = {
								AND = { has_building = ramparts fort_level = 2 }
								is_capital = yes
							}
						}
						add_province_modifier = {
							name = Y63_minor_rune_runic_ward_3
							duration = 1825
						}
					}
					every_subject_country = {
						every_owned_province = {
							limit = {
								has_no_ward_province_modifiers = yes
								is_city = yes
								OR = {
									AND = { has_building = ramparts fort_level = 2 }
									is_capital = yes
								}
							}
							add_province_modifier = {
								name = Y63_minor_rune_runic_ward_3
								duration = 1825
							}
						}
					}
				}
			}
			else_if = { limit = { estate_influence = { estate = estate_mages influence = 33 } }
				custom_tooltip = Y63_minor_rune_runic_ward_2_tt
				hidden_effect = {
					every_owned_province = {
						limit = {
							has_no_ward_province_modifiers = yes
							is_city = yes
							OR = {
								AND = { has_building = ramparts fort_level = 2 }
								is_capital = yes
							}
						}
						add_province_modifier = {
							name = Y63_minor_rune_runic_ward_2
							duration = 1825
						}
					}
					every_subject_country = {
						every_owned_province = {
							limit = {
								has_no_ward_province_modifiers = yes
								is_city = yes
								OR = {
									AND = { has_building = ramparts fort_level = 2 }
									is_capital = yes
								}
							}
							add_province_modifier = {
								name = Y63_minor_rune_runic_ward_2
								duration = 1825
							}
						}
					}
				}
			}
			else = {
				custom_tooltip = Y63_minor_rune_runic_ward_1_tt
				hidden_effect = {
					every_owned_province = {
						limit = {
							has_no_ward_province_modifiers = yes
							is_city = yes
							OR = {
								AND = { has_building = ramparts fort_level = 2 }
								is_capital = yes
							}
						}
						add_province_modifier = {
							name = Y63_minor_rune_runic_ward_1
							duration = 1825
						}
					}
					every_subject_country = {
						every_owned_province = {
							limit = {
								has_no_ward_province_modifiers = yes
								is_city = yes
								OR = {
									AND = { has_building = ramparts fort_level = 2 }
									is_capital = yes
								}
							}
							add_province_modifier = {
								name = Y63_minor_rune_runic_ward_1
								duration = 1825
							}
						}
					}
				}
			}
			custom_tooltip = Y63_cast_runic_ward_tt
		}
	}
	
	option = { # Gulan-Amekh
		name = verkalozovar_events.101.e
		if = {
			limit = { Y63_minor_rune_active = yes }
			custom_tooltip = Y63_minor_rune_active_menu_tt
			tooltip = {
				custom_tooltip = Y63_minor_rune_liberty_desire_tt
				add_adm_power = -50
				custom_tooltip = Y63_minor_rune_gulan_amekh_cost_tt
				add_country_modifier = {
					name = Y63_minor_rune_gulan_amekh
					duration = 1825
				}
				custom_tooltip = Y63_minor_rune_gulan_amekh_tt
			}
		}
		else = {
			custom_tooltip = Y63_minor_rune_liberty_desire_tt
			add_adm_power = -50
			custom_tooltip = Y63_minor_rune_gulan_amekh_cost_tt
			add_country_modifier = {
				name = Y63_minor_rune_gulan_amekh
				duration = 1825
			}
			custom_tooltip = Y63_minor_rune_gulan_amekh_effect_tt
			hidden_effect = {
				every_subject_country = {
					add_liberty_desire = 10
					random_owned_province = {
						limit = { base_tax = 2 }
						add_base_tax = -1
					}
					add_country_modifier = {
						name = Y63_minor_rune_gulan_amekh_subject
						duration = 1825
					}
				}
			}
		}
	}
	
	option = { # Dorumhum
		name = verkalozovar_events.101.f
		if = {
			limit = { Y63_minor_rune_active = yes }
			custom_tooltip = Y63_minor_rune_active_menu_tt
			tooltip = {
				custom_tooltip = Y63_minor_rune_liberty_desire_tt
				add_adm_power = -50
				custom_tooltip = Y63_minor_rune_dorumhum_cost_tt
				custom_tooltip = Y63_minor_rune_dorumhum_effect_tt
			}
		}
		else = {
			custom_tooltip = Y63_minor_rune_liberty_desire_tt
			add_adm_power = -50
			custom_tooltip = Y63_minor_rune_dorumhum_cost_tt
			custom_tooltip = Y63_minor_rune_dorumhum_effect_tt
			hidden_effect = {
				every_subject_country = {
					add_liberty_desire = 10
					random_owned_province = {
						limit = { base_production = 2 }
						add_base_production = -1
					}
					add_country_modifier = {
						name = Y63_minor_rune_dorumhum_subject
						duration = 1825
					}
				}
				add_country_modifier = {
					name = Y63_minor_rune_dorumhum
					duration = 1825
					hidden = yes
				}
			}
		}
	}
	
	option = { # Kozenorl
		name = verkalozovar_events.101.g
		if = {
			limit = { Y63_minor_rune_active = yes }
			custom_tooltip = Y63_minor_rune_active_menu_tt
			tooltip = {
				custom_tooltip = Y63_minor_rune_liberty_desire_tt
				add_dip_power = -50
				custom_tooltip = Y63_minor_rune_kozenorl_cost_tt
				add_country_modifier = {
					name = Y63_minor_rune_kozenorl
					duration = 1825
				}
			}
		}
		else = {
			add_dip_power = -50
			custom_tooltip = Y63_minor_rune_kozenorl_cost_tt
			add_country_modifier = {
				name = Y63_minor_rune_kozenorl
				duration = 1825
			}
			hidden_effect = {
				every_subject_country = {
					ROOT = {
						add_trust = {
							who = PREV
							value = -5
						}
					}
				}
			}
		}
	}
	
	option = { # Jolkinbroth
		name = verkalozovar_events.101.h
		if = {
			limit = { Y63_minor_rune_active = yes }
			custom_tooltip = Y63_minor_rune_active_menu_tt
			tooltip = {
				custom_tooltip = Y63_minor_rune_liberty_desire_tt
				add_dip_power = -50
				custom_tooltip = Y63_minor_rune_jolkinbroth_effect_tt
			}
		}
		else = {
			custom_tooltip = Y63_minor_rune_liberty_desire_tt
			add_dip_power = -50
			custom_tooltip = Y63_minor_rune_jolkinbroth_effect_tt
			hidden_effect = {
				every_subject_country = {
					add_liberty_desire = 10
					every_owned_province = {
						limit = { has_terrain = farmlands }
						add_province_modifier = {
							name = Y63_minor_rune_jolkinbroth_province
							duration = 1825
						}
					}
				}
				add_country_modifier = {
					name = Y63_minor_rune_jolkinbroth
					duration = 1825
					hidden = yes
				}
			}
		}
	}
	
	after = {
		if = {
			limit = { has_country_flag = Y63_rune_menu_no_after }
			clr_country_flag = Y63_rune_menu_no_after
		}
		else = {
			set_country_flag = Y63_rune_menu_101
			country_event = { id = verkalozovar_events.1000 }
		}
	}
}

country_event = { # Grand Runes
	id = verkalozovar_events.102
	title = verkalozovar_events.102.title
	desc = verkalozovar_events.102.desc
	picture = SPELL_LIST_eventPicture
	
	is_triggered_only = yes
	
	option = { # go back
		name = verkalozovar_events.102.a
		highlight = yes
		set_country_flag = Y63_rune_menu_no_after
		hidden_effect = { country_event = { id = verkalozovar_events.100 } }
	}
	
	option = { # Amekh
		name = verkalozovar_events.102.b
		if = {
			limit = { has_country_flag = Y63_engraved_amekh }
			custom_tooltip = Y63_already_engraved_rune_tt
			tooltip = {
				add_adm_power = -200
				5424 = {
					add_province_modifier = {
						name = Y63_engraving_rune
						duration = 1095
					}
				}
			}
		}
		else = {
			if = {
				limit = { has_country_flag = Y63_is_engraving_rune }
				custom_tooltip = Y63_is_aready_engraving_tt
				tooltip = {
					add_adm_power = -200
					5424 = {
						add_province_modifier = {
							name = Y63_engraving_rune
							duration = 1095
						}
					}
				}
			}
			else_if = {
				limit = { NOT = { adm_power = 200 } }
				custom_tooltip = Y63_need_adm_power_to_engrave_tt
				tooltip = {
					add_adm_power = -200
					5424 = {
						add_province_modifier = {
							name = Y63_engraving_rune
							duration = 1095
						}
					}
				}
			}
			else = {
				add_adm_power = -200
				5424 = {
					add_province_modifier = {
						name = Y63_engraving_rune
						duration = 1095
					}
				}
				set_country_flag = Y63_is_engraving_rune
				if = {
					limit = {
						OR = {
							has_country_flag = Y63_engraved_guntir
							has_country_flag = Y63_engraved_jolkin
						}
					}
					custom_tooltip = Y63_grand_rune_override_tt
				}
				custom_tooltip = Y63_engraving_take_time_tt
				hidden_effect = { country_event = { id = verkalozovar_events.110 days = 1096 } }
			}
		}
	}
	
	option = { # Guntir
		name = verkalozovar_events.102.c
		if = {
			limit = { has_country_flag = Y63_engraved_guntir }
			custom_tooltip = Y63_already_engraved_rune_tt
			tooltip = {
				add_adm_power = -200
				5424 = {
					add_province_modifier = {
						name = Y63_engraving_rune
						duration = 1095
					}
				}
			}
		}
		else = {
			if = {
				limit = { has_country_flag = Y63_is_engraving_rune }
				custom_tooltip = Y63_is_aready_engraving_tt
				tooltip = {
					add_adm_power = -200
					5424 = {
						add_province_modifier = {
							name = Y63_engraving_rune
							duration = 1095
						}
					}
				}
			}
			else_if = {
				limit = { NOT = { adm_power = 200 } }
				custom_tooltip = Y63_need_adm_power_to_engrave_tt
				tooltip = {
					add_adm_power = -200
					5424 = {
						add_province_modifier = {
							name = Y63_engraving_rune
							duration = 1095
						}
					}
				}
			}
			else = {
				add_adm_power = -200
				5424 = {
					add_province_modifier = {
						name = Y63_engraving_rune
						duration = 1095
					}
				}
				set_country_flag = Y63_is_engraving_rune
				if = {
					limit = {
						OR = {
							has_country_flag = Y63_engraved_amekh
							has_country_flag = Y63_engraved_jolkin
						}
					}
					custom_tooltip = Y63_grand_rune_override_tt
				}
				custom_tooltip = Y63_engraving_take_time_tt
				hidden_effect = { country_event = { id = verkalozovar_events.111 days = 1096 } }
			}
		}
	}
	
	option = { # Jolkin
		name = verkalozovar_events.102.d
		trigger = { has_country_flag = Y63_unlocked_jorkin_rune }
		if = {
			limit = { has_country_flag = Y63_engraved_jolkin }
			custom_tooltip = Y63_already_engraved_rune_tt
			tooltip = {
				add_adm_power = -200
				5424 = {
					add_province_modifier = {
						name = Y63_engraving_rune
						duration = 1095
					}
				}
			}
		}
		else = {
			if = {
				limit = { has_country_flag = Y63_is_engraving_rune }
				custom_tooltip = Y63_is_aready_engraving_tt
				tooltip = {
					add_adm_power = -200
					5424 = {
						add_province_modifier = {
							name = Y63_engraving_rune
							duration = 1095
						}
					}
				}
			}
			else_if = {
				limit = { NOT = { adm_power = 200 } }
				custom_tooltip = Y63_need_adm_power_to_engrave_tt
				tooltip = {
					add_adm_power = -200
					5424 = {
						add_province_modifier = {
							name = Y63_engraving_rune
							duration = 1095
						}
					}
				}
			}
			else = {
				add_adm_power = -200
				5424 = {
					add_province_modifier = {
						name = Y63_engraving_rune
						duration = 1095
					}
				}
				set_country_flag = Y63_is_engraving_rune
				if = {
					limit = {
						OR = {
							has_country_flag = Y63_engraved_guntir
							has_country_flag = Y63_engraved_amekh
						}
					}
					custom_tooltip = Y63_grand_rune_override_tt
				}
				custom_tooltip = Y63_engraving_take_time_tt
				hidden_effect = { country_event = { id = verkalozovar_events.112 days = 1096 } }
			}
		}
	}
	
	option = { # Krakdhum
		name = verkalozovar_events.102.e
		if = {
			limit = { has_country_flag = Y63_engraved_krakdhum }
			custom_tooltip = Y63_already_engraved_rune_tt
			tooltip = {
				add_adm_power = -200
				5424 = {
					add_province_modifier = {
						name = Y63_engraving_rune
						duration = 1095
					}
				}
			}
		}
		else = {
			if = {
				limit = { has_country_flag = Y63_is_engraving_rune }
				custom_tooltip = Y63_is_aready_engraving_tt
				tooltip = {
					add_adm_power = -200
					5424 = {
						add_province_modifier = {
							name = Y63_engraving_rune
							duration = 1095
						}
					}
				}
			}
			else_if = {
				limit = { NOT = { adm_power = 200 } }
				custom_tooltip = Y63_need_adm_power_to_engrave_tt
				tooltip = {
					add_adm_power = -200
					5424 = {
						add_province_modifier = {
							name = Y63_engraving_rune
							duration = 1095
						}
					}
				}
			}
			else = {
				add_adm_power = -200
				5424 = {
					add_province_modifier = {
						name = Y63_engraving_rune
						duration = 1095
					}
				}
				set_country_flag = Y63_is_engraving_rune
				if = {
					limit = {
						OR = {
							has_country_flag = Y63_engraved_haln
							has_country_flag = Y63_engraved_kron
						}
					}
					custom_tooltip = Y63_grand_rune_override_tt
				}
				custom_tooltip = Y63_engraving_take_time_tt
				hidden_effect = { country_event = { id = verkalozovar_events.113 days = 1096 } }
			}
		}
	}
	
	option = { # Haln
		name = verkalozovar_events.102.f
		if = {
			limit = { has_country_flag = Y63_engraved_haln }
			custom_tooltip = Y63_already_engraved_rune_tt
			tooltip = {
				add_adm_power = -200
				5424 = {
					add_province_modifier = {
						name = Y63_engraving_rune
						duration = 1095
					}
				}
			}
		}
		else = {
			if = {
				limit = { has_country_flag = Y63_is_engraving_rune }
				custom_tooltip = Y63_is_aready_engraving_tt
				tooltip = {
					add_adm_power = -200
					5424 = {
						add_province_modifier = {
							name = Y63_engraving_rune
							duration = 1095
						}
					}
				}
			}
			else_if = {
				limit = { NOT = { adm_power = 200 } }
				custom_tooltip = Y63_need_adm_power_to_engrave_tt
				tooltip = {
					add_adm_power = -200
					5424 = {
						add_province_modifier = {
							name = Y63_engraving_rune
							duration = 1095
						}
					}
				}
			}
			else = {
				add_adm_power = -200
				5424 = {
					add_province_modifier = {
						name = Y63_engraving_rune
						duration = 1095
					}
				}
				set_country_flag = Y63_is_engraving_rune
				if = {
					limit = {
						OR = {
							has_country_flag = Y63_engraved_krakdhum
							has_country_flag = Y63_engraved_kron
						}
					}
					custom_tooltip = Y63_grand_rune_override_tt
				}
				custom_tooltip = Y63_engraving_take_time_tt
				hidden_effect = { country_event = { id = verkalozovar_events.114 days = 1096 } }
			}
		}
	}
	
	option = { # Kron
		name = verkalozovar_events.102.g
		trigger = { has_country_flag = Y63_unlocked_kron_rune }
		if = {
			limit = { has_country_flag = Y63_engraved_kron }
			custom_tooltip = Y63_already_engraved_rune_tt
			tooltip = {
				add_adm_power = -200
				5424 = {
					add_province_modifier = {
						name = Y63_engraving_rune
						duration = 1095
					}
				}
			}
		}
		else = {
			if = {
				limit = { has_country_flag = Y63_is_engraving_rune }
				custom_tooltip = Y63_is_aready_engraving_tt
				tooltip = {
					add_adm_power = -200
					5424 = {
						add_province_modifier = {
							name = Y63_engraving_rune
							duration = 1095
						}
					}
				}
			}
			else_if = {
				limit = { NOT = { adm_power = 200 } }
				custom_tooltip = Y63_need_adm_power_to_engrave_tt
				tooltip = {
					add_adm_power = -200
					5424 = {
						add_province_modifier = {
							name = Y63_engraving_rune
							duration = 1095
						}
					}
				}
			}
			else = {
				add_adm_power = -200
				5424 = {
					add_province_modifier = {
						name = Y63_engraving_rune
						duration = 1095
					}
				}
				set_country_flag = Y63_is_engraving_rune
				if = {
					limit = {
						OR = {
							has_country_flag = Y63_engraved_haln
							has_country_flag = Y63_engraved_krakdhum
						}
					}
					custom_tooltip = Y63_grand_rune_override_tt
				}
				custom_tooltip = Y63_engraving_take_time_tt
				hidden_effect = { country_event = { id = verkalozovar_events.115 days = 1096 } }
			}
		}
	}
	
	option = { # Dauth
		name = verkalozovar_events.102.h
		trigger = { has_country_flag = Y63_unlocked_dauth_rune }
		if = {
			limit = { has_country_flag = Y63_engraved_dauth }
			custom_tooltip = Y63_already_engraved_rune_tt
			tooltip = {
				add_adm_power = -200
				5424 = {
					add_province_modifier = {
						name = Y63_engraving_rune
						duration = 1095
					}
				}
			}
		}
		else = {
			if = {
				limit = { has_country_flag = Y63_is_engraving_rune }
				custom_tooltip = Y63_is_aready_engraving_tt
				tooltip = {
					add_adm_power = -200
					5424 = {
						add_province_modifier = {
							name = Y63_engraving_rune
							duration = 1095
						}
					}
				}
			}
			else_if = {
				limit = { NOT = { adm_power = 200 } }
				custom_tooltip = Y63_need_adm_power_to_engrave_tt
				tooltip = {
					add_adm_power = -200
					5424 = {
						add_province_modifier = {
							name = Y63_engraving_rune
							duration = 1095
						}
					}
				}
			}
			else = {
				add_adm_power = -200
				5424 = {
					add_province_modifier = {
						name = Y63_engraving_rune
						duration = 1095
					}
				}
				set_country_flag = Y63_is_engraving_rune
				if = {
					limit = {
						OR = {
							has_country_flag = Y63_engraved_kanzad
							has_country_flag = Y63_engraved_bal
						}
					}
					custom_tooltip = Y63_grand_rune_override_tt
				}
				custom_tooltip = Y63_engraving_take_time_tt
				hidden_effect = { country_event = { id = verkalozovar_events.116 days = 1096 } }
			}
		}
	}
	
	option = { # Kanzad
		name = verkalozovar_events.102.i
		if = {
			limit = { has_country_flag = Y63_engraved_kanzad }
			custom_tooltip = Y63_already_engraved_rune_tt
			tooltip = {
				add_adm_power = -200
				5424 = {
					add_province_modifier = {
						name = Y63_engraving_rune
						duration = 1095
					}
				}
			}
		}
		else = {
			if = {
				limit = { has_country_flag = Y63_is_engraving_rune }
				custom_tooltip = Y63_is_aready_engraving_tt
				tooltip = {
					add_adm_power = -200
					5424 = {
						add_province_modifier = {
							name = Y63_engraving_rune
							duration = 1095
						}
					}
				}
			}
			else_if = {
				limit = { NOT = { adm_power = 200 } }
				custom_tooltip = Y63_need_adm_power_to_engrave_tt
				tooltip = {
					add_adm_power = -200
					5424 = {
						add_province_modifier = {
							name = Y63_engraving_rune
							duration = 1095
						}
					}
				}
			}
			else = {
				add_adm_power = -200
				5424 = {
					add_province_modifier = {
						name = Y63_engraving_rune
						duration = 1095
					}
				}
				set_country_flag = Y63_is_engraving_rune
				if = {
					limit = {
						OR = {
							has_country_flag = Y63_engraved_dauth
							has_country_flag = Y63_engraved_bal
						}
					}
					custom_tooltip = Y63_grand_rune_override_tt
				}
				custom_tooltip = Y63_engraving_take_time_tt
				hidden_effect = { country_event = { id = verkalozovar_events.117 days = 1096 } }
			}
		}
	}
	
	option = { # Bal
		name = verkalozovar_events.102.j
		if = {
			limit = { has_country_flag = Y63_engraved_bal }
			custom_tooltip = Y63_already_engraved_rune_tt
			tooltip = {
				add_adm_power = -200
				5424 = {
					add_province_modifier = {
						name = Y63_engraving_rune
						duration = 1095
					}
				}
			}
		}
		else = {
			if = {
				limit = { has_country_flag = Y63_is_engraving_rune }
				custom_tooltip = Y63_is_aready_engraving_tt
				tooltip = {
					add_adm_power = -200
					5424 = {
						add_province_modifier = {
							name = Y63_engraving_rune
							duration = 1095
						}
					}
				}
			}
			else_if = {
				limit = { NOT = { adm_power = 200 } }
				custom_tooltip = Y63_need_adm_power_to_engrave_tt
				tooltip = {
					add_adm_power = -200
					5424 = {
						add_province_modifier = {
							name = Y63_engraving_rune
							duration = 1095
						}
					}
				}
			}
			else = {
				add_adm_power = -200
				5424 = {
					add_province_modifier = {
						name = Y63_engraving_rune
						duration = 1095
					}
				}
				set_country_flag = Y63_is_engraving_rune
				if = {
					limit = {
						OR = {
							has_country_flag = Y63_engraved_kanzad
							has_country_flag = Y63_engraved_dauth
						}
					}
					custom_tooltip = Y63_grand_rune_override_tt
				}
				custom_tooltip = Y63_engraving_take_time_tt
				hidden_effect = { country_event = { id = verkalozovar_events.118 days = 1096 } }
			}
		}
	}
	
	after = {
		if = {
			limit = { has_country_flag = Y63_rune_menu_no_after }
			clr_country_flag = Y63_rune_menu_no_after
		}
		else = {
			set_country_flag = Y63_rune_menu_102
			country_event = { id = verkalozovar_events.1000 }
		}
	}
}

country_event = { # Engraved Amekh
	id = verkalozovar_events.110
	title = verkalozovar_events.110.title
	desc = verkalozovar_events.110.desc
	picture = SPELL_LIST_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
		clr_country_flag = Y63_is_engraving_rune
		set_country_flag = Y63_engraved_amekh
		hidden_effect = { set_estate_privilege = estate_mages_grand_rune_amekh }
	}
	
	option = {
		name = verkalozovar_events.110.a
		custom_tooltip = Y63_unlocked_grand_rune_privilege_tt
	}
}

country_event = { # Engraved Guntir
	id = verkalozovar_events.111
	title = verkalozovar_events.111.title
	desc = verkalozovar_events.111.desc
	picture = SPELL_LIST_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
		clr_country_flag = Y63_is_engraving_rune
		set_country_flag = Y63_engraved_guntir
		hidden_effect = { set_estate_privilege = estate_mages_grand_rune_guntir }
	}
	
	option = {
		name = verkalozovar_events.111.a
		custom_tooltip = Y63_unlocked_grand_rune_privilege_tt
	}
}

country_event = { # Engraved Jolkin
	id = verkalozovar_events.112
	title = verkalozovar_events.112.title
	desc = verkalozovar_events.112.desc
	picture = SPELL_LIST_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
		clr_country_flag = Y63_is_engraving_rune
		set_country_flag = Y63_engraved_jolkin
		hidden_effect = { set_estate_privilege = estate_mages_grand_rune_jolkin }
	}
	
	option = {
		name = verkalozovar_events.112.a
		custom_tooltip = Y63_unlocked_grand_rune_privilege_tt
	}
}

country_event = { # Engraved Krakdhum
	id = verkalozovar_events.113
	title = verkalozovar_events.113.title
	desc = verkalozovar_events.113.desc
	picture = SPELL_LIST_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
		clr_country_flag = Y63_is_engraving_rune
		set_country_flag = Y63_engraved_krakdhum
		hidden_effect = { set_estate_privilege = estate_mages_grand_rune_krakdhum }
	}
	
	option = {
		name = verkalozovar_events.113.a
		custom_tooltip = Y63_unlocked_grand_rune_privilege_tt
	}
}

country_event = { # Engraved Haln
	id = verkalozovar_events.114
	title = verkalozovar_events.114.title
	desc = verkalozovar_events.114.desc
	picture = SPELL_LIST_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
		clr_country_flag = Y63_is_engraving_rune
		set_country_flag = Y63_engraved_haln
		hidden_effect = { set_estate_privilege = estate_mages_grand_rune_haln }
	}
	
	option = {
		name = verkalozovar_events.114.a
		custom_tooltip = Y63_unlocked_grand_rune_privilege_tt
	}
}

country_event = { # Engraved Kron
	id = verkalozovar_events.115
	title = verkalozovar_events.115.title
	desc = verkalozovar_events.115.desc
	picture = SPELL_LIST_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
		clr_country_flag = Y63_is_engraving_rune
		set_country_flag = Y63_engraved_kron
		hidden_effect = { set_estate_privilege = estate_mages_grand_rune_kron }
	}
	
	option = {
		name = verkalozovar_events.115.a
		custom_tooltip = Y63_unlocked_grand_rune_privilege_tt
	}
}

country_event = { # Engraved Dauth
	id = verkalozovar_events.116
	title = verkalozovar_events.116.title
	desc = verkalozovar_events.116.desc
	picture = SPELL_LIST_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
		clr_country_flag = Y63_is_engraving_rune
		set_country_flag = Y63_engraved_dauth
		hidden_effect = { set_estate_privilege = estate_mages_grand_rune_dauth }
	}
	
	option = {
		name = verkalozovar_events.116.a
		custom_tooltip = Y63_unlocked_grand_rune_privilege_tt
	}
}

country_event = { # Engraved Kanzad
	id = verkalozovar_events.117
	title = verkalozovar_events.117.title
	desc = verkalozovar_events.117.desc
	picture = SPELL_LIST_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
		clr_country_flag = Y63_is_engraving_rune
		set_country_flag = Y63_engraved_kanzad
		hidden_effect = { set_estate_privilege = estate_mages_grand_rune_kanzad }
	}
	
	option = {
		name = verkalozovar_events.117.a
		custom_tooltip = Y63_unlocked_grand_rune_privilege_tt
	}
}

country_event = { # Engraved Bal
	id = verkalozovar_events.118
	title = verkalozovar_events.118.title
	desc = verkalozovar_events.118.desc
	picture = SPELL_LIST_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
		clr_country_flag = Y63_is_engraving_rune
		set_country_flag = Y63_engraved_bal
		hidden_effect = { set_estate_privilege = estate_mages_grand_rune_bal }
	}
	
	option = {
		name = verkalozovar_events.118.a
		custom_tooltip = Y63_unlocked_grand_rune_privilege_tt
	}
}


country_event = { # Refresh Runes Menu
	id = verkalozovar_events.1000
	title = verkalozovar_events.1000.title
	desc = verkalozovar_events.1000.desc
	picture = DIPLOMACY_eventPicture
	
	is_triggered_only = yes
	
	hidden = yes
	
	option = {
		name = verkalozovar_events.1000.a
		if = {
			limit = { has_country_flag = Y63_rune_menu_101 }
			clr_country_flag = Y63_rune_menu_101
			country_event = { id = verkalozovar_events.101 }
		}
		else_if = {
			limit = { has_country_flag = Y63_rune_menu_102 }
			clr_country_flag = Y63_rune_menu_102
			country_event = { id = verkalozovar_events.102 }
		}
		else = {
			country_event = { id = verkalozovar_events.100 }
		}
	}
}

country_event = {
	id = verkalozovar_events.1001
	title = verkalozovar_events.1001.title
	desc = verkalozovar_events.1001.desc
	picture = DIPLOMACY_eventPicture
	
	is_triggered_only = yes

	trigger = {
		has_reform = verkal_ozovar_magocracy
		NOT = { has_country_flag = in_ozovar_heir_selection }
	}

	immediate = {
		hidden_effect = {
			set_country_flag = in_ozovar_heir_selection
		}
	}
	
	option = {
		name = verkalozovar_events.1001.a
		define_heir = {
			dynasty = "Krakovar"
			culture = nephrite_dwarf
			age = 99 
		}
		set_heir_mage_effect = yes
		clr_country_flag = in_ozovar_heir_selection
	}
}

# Convert new patraontes to vassals if not VO
# Fired from on_dependency_gained to prevent crashes
country_event = {
	id = verkalozovar_events.9999
	title = verkalozovar_events.1001.title
	desc = verkalozovar_events.1001.desc
	picture = DIPLOMACY_eventPicture
	
	is_triggered_only = yes
	hidden = yes

	trigger = {
		always = yes
	}
	
	option = {
		name = verkalozovar_events.1001.a
		ai_chance = { factor = 1 }
		
		overlord = { create_subject = { subject_type = vassal subject = ROOT } }
	}
}
