
namespace = diggy

##Event successfull digging
province_event = {
	id = diggy.1
	title = diggy.1.t
	desc = diggy.1.d
	picture = FORT_eventPicture
	goto = root
	
	is_triggered_only = yes
	
	trigger = {
		always = yes
	}
	
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					province_id = 4020
					owner = {
						tag = I03
						has_country_flag = vazhatun_enable_knowledge_from_digging
					}
				}
				vazhatun_calculate_digging_knowledge = yes
			}
		}
	}
	
	after = {
		hidden_effect = { #Random loc flag
			clr_province_flag = strike_1
			clr_province_flag = strike_2
			clr_province_flag = strike_3
			clr_province_flag = strike_4
			clr_province_flag = strike_5
			clr_province_flag = strike_6
			clr_province_flag = strike_7
			clr_province_flag = strike_8
			clr_province_flag = strike_9
			clr_province_flag = strike_10
			clr_province_flag = strike_11
			clr_province_flag = strike_12
			clr_province_flag = strike_13
			clr_province_flag = strike_14
			clr_province_flag = strike_15
			clr_province_flag = strike_16
			clr_province_flag = strike_17
			clr_province_flag = strike_18
			clr_province_flag = strike_19
			clr_province_flag = strike_20
			
			clr_province_flag = swear_1
			clr_province_flag = swear_2
			clr_province_flag = swear_3
			clr_province_flag = swear_4
			clr_province_flag = swear_5
			clr_province_flag = swear_6
			clr_province_flag = swear_7
			clr_province_flag = swear_8
			clr_province_flag = swear_9
			clr_province_flag = swear_10
			clr_province_flag = swear_11
			clr_province_flag = swear_12
			clr_province_flag = swear_13
			clr_province_flag = swear_14
			clr_province_flag = swear_15
			clr_province_flag = swear_16
			clr_province_flag = swear_17
			clr_province_flag = swear_18
			clr_province_flag = swear_19
			clr_province_flag = swear_20
		}
		if = {
			limit = {
				is_capital = yes
				has_province_modifier = dig_10
			}
			if = {
				limit = {
					OR = {
						province_id = 4119 #amldihr
						province_id = 4311 #gronstunad
					} 
				}
				hidden_effect = { owner = { country_event = { id = diggy.514 days = 1 } } }
			}
			else = { hidden_effect = { owner = { country_event = { id = diggy.513 days = 1 } } } }
		} 
		else_if = {
			limit = {
				is_capital = yes
				has_province_modifier = dig_11
			}
			hidden_effect = { owner = { country_event = { id = diggy.515 days = 1 } } }
		} 
	}
	
	option = {
        name = diggy.1.a
        ai_chance = { factor = 100 }
		goto = root
		if = {
			limit = { is_capital = yes }
			owner = { add_prestige = 10 }
		}
		else = { owner = { add_prestige = 5 } }
		if = {
			limit = {
				province_id = 4020
				owner = {
					tag = I03
					has_country_flag = vazhatun_enable_knowledge_from_digging
				}
			}
			owner = { vazhatun_realize_digging_knowledge = yes }
		}
		dwarven_pantheon_unlock_deity_digging = yes
	}
}



### Hold Restoration
province_event = {
	id = diggy.12
	title = diggy.12.t
	desc = diggy.12.d
	picture = BUDDHISM_MONASTERY_eventPicture
	goto = root
	
	is_triggered_only = yes
	
	trigger = {
		always = yes
	}
	
	option = {
        name = diggy.12.a
        ai_chance = { factor = 100 }
		goto = ROOT
		if = {
			limit = { is_capital = yes }
			owner = { add_prestige = 5 }
		}
		else = {
			owner = { add_prestige = 2.5 }
		}
		custom_tooltip = hold_restored_tooltip
	}
}

#Capturing a Hold
province_event = {
	id = diggy.13
	title = diggy.13.t
	desc = diggy.13.d
	picture = FEMALE_GENERAL_eventPicture
	goto = root
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			has_terrain = dwarven_hold
			has_terrain = dwarven_hold_surface
		}
		NOT = { has_province_modifier = ruined_hold }
		NOT = { has_province_modifier = infested_hold }
		NOT = { has_province_modifier = fallen_great_excavation }
		NOT = { ROOT = { owned_by = FROM } }
	}
	
	immediate = {
		remove_province_modifier = hold_being_restored
	}
	
	option = {
        name = diggy.13.a
        ai_chance = { factor = 100 }
		goto = ROOT
		add_devastation = 20
		if = {
			limit = { has_province_modifier = partially_ruined_hold }
			remove_province_modifier = dig_1
			remove_province_modifier = dig_2
			remove_province_modifier = dig_3
			remove_province_modifier = dig_4
			remove_province_modifier = dig_5
			remove_province_modifier = dig_6
			remove_province_modifier = dig_7
			remove_province_modifier = dig_8
			remove_province_modifier = dig_9
			remove_province_modifier = dig_10
			remove_province_modifier = dig_11
			remove_province_modifier = partially_ruined_hold
			add_permanent_province_modifier = {
				name = ruined_hold
				duration = -1
			}
			add_base_production = -3
			add_base_manpower = -3
			add_base_tax = -3
		}
		else_if = {
			limit = { has_province_modifier = damaged_hold }
			remove_province_modifier = damaged_hold
			add_permanent_province_modifier = {
				name = partially_ruined_hold
				duration = -1
			}
			add_base_production = -2
			add_base_manpower = -2
			add_base_tax = -2
		}
		else = {
			add_permanent_province_modifier = {
				name = damaged_hold
				duration = -1
			}
			add_base_production = -1
			add_base_manpower = -1
			add_base_tax = -1
		}
	}
}

###Flavours Events

##Lead to Goblin Tide disaster, found treasure
country_event = {
	id = diggy.15
	title = diggy.15.t
	desc = diggy.15.d
	picture = COPTIC_MONASTERY_eventPicture
	
	mean_time_to_happen = {
		years = 70
		
		modifier = {
			factor = 0.9
			
			capital_scope = { has_province_modifier = dig_5 }
		}
		
		modifier = {
			factor = 0.8
			
			capital_scope = { has_province_modifier = dig_6 }
		}
		
		modifier = {
			factor = 0.7
			
			capital_scope = { has_province_modifier = dig_7 }
		}
		
		modifier = {
			factor = 0.6
			
			capital_scope = { has_province_modifier = dig_8 }
		}
		
		modifier = {
			factor = 0.5
			
			capital_scope = { has_province_modifier = dig_9 }
		}
		
		modifier = {
			factor = 0.4
			
			capital_scope = { has_province_modifier = dig_10 }
		}
	}
	
	trigger = {
		has_country_flag = is_digging
		capital_scope = {
			continent = serpentspine
		}
		NOT = { has_country_flag = fallen_treasure }
		capital_scope = {
			OR = {
				has_terrain = dwarven_hold
				has_terrain = dwarven_hold_surface
			}
		}
		is_subject = no
	}
	
	#Sell it
	option = {
        name = diggy.15.a
        ai_chance = { factor = 50 }
		add_years_of_income = 1
		hidden_effect = {
			random = { chance = 30 set_country_flag = fallen_treasure }
		}
	}
	#Create museum
	option = {
        name = diggy.15.b
        ai_chance = { factor = 30 }
		add_prestige = 30
		hidden_effect = {
			random = { chance = 30 set_country_flag = fallen_treasure }
		}
	}
	#dig deeper in this region
	option = {
        name = diggy.15.c
        ai_chance = { factor = 15 }
		add_years_of_income = 0.5
		add_prestige = 15
		hidden_effect = { set_country_flag = fallen_treasure }
	}
	#Do nothing
	option = {
        name = diggy.15.e
        ai_chance = { factor = 5 }
		increase_legitimacy_small_effect = yes
		add_prestige = -10
	}
}

#Discover old Hold
country_event = {
	id = diggy.16
	title = diggy.16.t
	desc = diggy.16.d
	picture = URBANISATION_INCIDENT_eventPicture
	
	mean_time_to_happen = {
		years = 30
		modifier = {
			factor = 1.5
			
			ai = yes
		}
	}
	
	trigger = {
		has_country_flag = fallen_treasure
		capital_scope = {
			OR = {
				has_terrain = dwarven_hold
				has_terrain = dwarven_hold_surface
			}
		}
		NOT = { capital_scope = { has_province_modifier = old_hold } }
		NOT = { has_country_flag = goblin_tide_happened }
		is_subject = no
	}
	
	#Such a great discovery, we need to explore it
	option = {
        name = diggy.16.a
        ai_chance = { factor = 90 }
		add_prestige = 50
		increase_legitimacy_medium_effect = yes
		capital_scope = {
			add_permanent_province_modifier = {
				name = old_hold
				duration = -1
			}
			set_province_flag = old_hold_@ROOT
		}
	}
	#Seal it, i don't want to hear about it ever again.
	option = {
		name = diggy.16.b
        ai_chance = { factor = 10 }
		highlight = yes
		trigger = { ruler_age = 150 }
		add_prestige = -10
		random = {
			chance = 75
			reduce_stability_or_adm_power = yes
		}
		hidden_effect = { clr_country_flag = fallen_treasure }
	}
}


###Hold Specialization
#Hold Specialization
province_event = {
	id = diggy.27
	title = diggy.27.t
	desc = diggy.27.d
	picture = ARTWORK_eventPicture
	goto = root
	
	mean_time_to_happen = {
		years = 10
	}
	
	trigger = {
		province_group = hold_province
		has_dwarven_hold_4 = yes
		NOT = { 
			has_province_flag = specialized_hold 
			has_province_modifier = incomplete_hold
			has_province_modifier = incomplete_hold_0
		}
		NOT = { trade_goods = unknown }
		is_city = yes
	}
	
	after = {
		hidden_effect = { set_province_flag = specialized_hold }
	}
	
	#Foundry
	option = {
        name = diggy.27.a
        ai_chance = { factor = 100 }
		trigger = {
			OR = {
				trade_goods = iron
				trade_goods = damestear
				trade_goods = mithril
				trade_goods = copper
				trade_goods = coal
			}
		}
		goto = ROOT
		add_permanent_province_modifier = {
			name = hold_foundry
			duration = -1
		}
	}
	#city hub
	option = {
        name = diggy.27.b
        ai_chance = { factor = 100 }
		trigger = {
			OR = {
				trade_goods = dyes
				trade_goods = silk
				trade_goods = chinaware
				trade_goods = ivory
				trade_goods = glass
				trade_goods = cloth
				trade_goods = mithril
				trade_goods = gold
				trade_goods = paper
				trade_goods = wine
				trade_goods = precursor_relics
				trade_goods = gems
				trade_goods = incense
				trade_goods = salt
				base_tax = 30
			}
		}
		goto = ROOT
		add_permanent_province_modifier = {
			name = hold_city
			duration = -1
		}
	}
	#Artisan District
	option = {
        name = diggy.27.c
        ai_chance = { factor = 100 }
		trigger = {
			OR = {
				trade_goods = silk
				trade_goods = chinaware
				trade_goods = fur
				trade_goods = wool
				trade_goods = gems
				trade_goods = glass
				trade_goods = wine
				trade_goods = gold
				trade_goods = mithril
				trade_goods = precursor_relics
				trade_goods = incense
				trade_goods = tropical_wood
			}
		}
		goto = ROOT
		add_permanent_province_modifier = {
			name = hold_artisan
			duration = -1
		}
	}
	#Vertical Farm
	option = {
        name = diggy.27.e
        ai_chance = { factor = 100 }
		trigger = {
			OR = {
				trade_goods = spices
				trade_goods = grain
				trade_goods = fish
				trade_goods = fungi
				trade_goods = serpentbloom
				trade_goods = livestock
				trade_goods = salt
				trade_goods = slaves
				trade_goods = tea
				trade_goods = coffee
				trade_goods = cotton
				trade_goods = sugar
				trade_goods = tobacco
				trade_goods = cocoa
				trade_goods = cloves
			}
		}
		goto = ROOT
		add_permanent_province_modifier = {
			name = hold_farm
			duration = -1
		}
	}
	#Military
	option = {
        name = diggy.27.f
        ai_chance = { factor = 100 }
		trigger = {
			OR = {
				trade_goods = dyes
				trade_goods = iron
				trade_goods = copper
				trade_goods = paper
				trade_goods = mithril
				trade_goods = naval_supplies
			}
		}
		goto = ROOT
		add_permanent_province_modifier = {
			name = hold_military
			duration = -1
		}
	}
}

#A Hold develop
province_event = {
	id = diggy.31
	title = diggy.31.t
	desc = diggy.31.d
	picture = ARTWORK_eventPicture
	goto = root
	
	mean_time_to_happen = {
		years = 40
		
		modifier = {
			factor = 0.9
			superregion = west_serpentspine_superregion
		}
		modifier = {
			factor = 0.9
			has_integrated_dwarven_pop_trigger = yes
		}
		modifier = {
			factor = 1.5
			owner = { NOT = { has_country_modifier = dwarven_administration } }
		}
		
		modifier = {
			factor = 0.8
			owner = { owns = 676 }
			676 = { has_province_modifier = the_jorkad_dam }
		}

		modifier = {
			factor = 0.9
			owner = { tag = I24 } #Aul-Dwarov
		}
		
		modifier = {
			factor = 0.85
			owner = { has_country_modifier = dadv_childrens_of_the_dwarovar }
		}

		modifier = {
			factor = 0.99
			owner = { has_ruler_modifier = krakazol_drinking_digging_1 }
		}
		modifier = {
			factor = 0.98
			owner = { has_ruler_modifier = krakazol_drinking_digging_2 }
		}
		modifier = {
			factor = 0.96
			owner = { has_ruler_modifier = krakazol_drinking_digging_3 }
		}
		modifier = {
			factor = 0.94
			owner = { has_ruler_modifier = krakazol_drinking_digging_4 }
		}
		modifier = {
			factor = 0.92
			owner = { has_ruler_modifier = krakazol_drinking_digging_5 }
		}
		modifier = {
			factor = 0.9
			owner = { OR = { has_ruler_modifier = krakazol_drinking_digging_6 has_ruler_modifier = krakazol_drinking_digging_7 has_country_modifier = krakazol_drinking_digging_perm } }
		}
		modifier = {
			factor = 0.9
			owner = { has_country_modifier = orlghelovar_laser_cutter }
		}
		modifier = {
			factor = 0.9
			owner = { has_estate_privilege = artifice_invention_snotfinger_stimulant }
		}
		modifier = {
			factor = 0.9
			owner = { has_estate_privilege = artifice_invention_allclan_catastrophizer }
		}
		modifier = {
			factor = 0.85
			owner = { has_country_modifier = I98_experienced_demolitionists }
		}
		
		modifier = {
			factor = 100
			OR = {
				has_integrated_kobold_pop_trigger = yes
				has_integrated_goblin_pop_trigger = yes
			}
			owner = { NOT = { adm_tech = 7 } }
		}
	}
	
	trigger = {
		province_group = hold_province
		has_subterranean_race = yes
		is_capital = no
		OR = {
			AND = { development = 40 has_province_modifier = dig_1 }
			AND = { development = 50  has_province_modifier = dig_2 }
			AND = { development = 60  has_province_modifier = dig_3 }
			AND = { development = 70  has_province_modifier = dig_4 }
			AND = { development = 80  has_province_modifier = dig_5 }
			AND = { development = 90  has_province_modifier = dig_6 }
			AND = { development = 100  has_province_modifier = dig_7 }
			AND = { development = 110  has_province_modifier = dig_8 }
			AND = { development = 120  has_province_modifier = dig_9 }
		}
		owner = { NOT = { has_country_flag = hold_operation } }
		is_state_core = owner
		hold_condition = { Repaired = yes }
		NOT = {
			has_province_modifier = incomplete_hold
			has_province_modifier = incomplete_hold_0
		}
	}
	
	#Developing Hold
	option = {
        name = diggy.31.a
        ai_chance = { factor = 100 }
		goto = ROOT
		owner = { add_prestige = 10 }
		if = {
			limit = { has_province_modifier = dig_1 }
			add_permanent_province_modifier = {
				name = dig_2
				duration = -1
			}
			hidden_effect = { remove_province_modifier = dig_1 }
			dwarven_pantheon_unlock_deity_digging = yes
		}
		else_if = {
			limit = { has_province_modifier = dig_2 }
			add_permanent_province_modifier = {
				name = dig_3
				duration = -1
			}
			hidden_effect = { remove_province_modifier = dig_2 }
			dwarven_pantheon_unlock_deity_digging = yes
		}
		else_if = {
			limit = { has_province_modifier = dig_3 }
			add_permanent_province_modifier = {
				name = dig_4
				duration = -1
			}
			hidden_effect = { remove_province_modifier = dig_3 }
			dwarven_pantheon_unlock_deity_digging = yes
		}
		else_if = {
			limit = { has_province_modifier = dig_4 }
			add_permanent_province_modifier = {
				name = dig_5
				duration = -1
			}
			hidden_effect = { remove_province_modifier = dig_4 }
		}
		else_if = {
			limit = { has_province_modifier = dig_5 }
			add_permanent_province_modifier = {
				name = dig_6
				duration = -1
			}
			hidden_effect = { remove_province_modifier = dig_5 }
		}
		else_if = {
			limit = { has_province_modifier = dig_6 }
			add_permanent_province_modifier = {
				name = dig_7
				duration = -1
			}
			hidden_effect = { remove_province_modifier = dig_6 }
		}
		else_if = {
			limit = { has_province_modifier = dig_7 }
			add_permanent_province_modifier = {
				name = dig_8
				duration = -1
			}
			hidden_effect = { remove_province_modifier = dig_7 }
		}
		else_if = {
			limit = { has_province_modifier = dig_8 }
			add_permanent_province_modifier = {
				name = dig_9
				duration = -1
			}
			hidden_effect = { remove_province_modifier = dig_8 }
		}
		else_if = {
			limit = { has_province_modifier = dig_9 }
			add_permanent_province_modifier = {
				name = dig_10
				duration = -1
			}
			hidden_effect = { remove_province_modifier = dig_9 }
		}
	}
}

####Natives attack
province_event = {
	id = diggy.32
	title = diggy.32.t
	desc = diggy.32.d
	picture = ARTWORK_eventPicture
	goto = root
	
	mean_time_to_happen = {
		years = 3
		modifier = {
			factor = 10
			
			owner = { ai = yes }
		}
		modifier = {
			factor = 1.5
			owner = { has_country_modifier = remnant_army }
		}
	}
	
	trigger = {
		continent = serpentspine
		is_colony = yes
		NOT = { has_construction = siberian }
		native_size = 10
		NOT = { area = hjyrtsikki_area }
		NOT = { area = fyllstyn_area }
	}
	
	immediate = {
		hidden_effect = {
			create_native = 1
			change_native_size = -5
			random_list = {
				50 = { change_native_hostileness = -1 }
				40 = { change_native_hostileness = -2 }
				10 = { change_native_hostileness = -3 }
			}
			random_list = {
				50 = { change_native_ferocity = -1 }
				40 = { change_native_ferocity = -2 }
				10 = { change_native_ferocity = -3 }
			}
		}
	}
	
	option = {
        name = diggy.32.a
        ai_chance = { factor = 100 }
		goto = ROOT
		custom_tooltip = diggy_native_tooltip
	}
}

####Cavern attack
province_event = {
	id = diggy.33
	title = diggy.33.t
	desc = diggy.33.d
	picture = ARTWORK_eventPicture
	goto = root
	
	mean_time_to_happen = {
		years = 20
		
		modifier = {
			factor = 0.5
			infantry_in_province = 1
		}
		modifier = {
			factor = 1.5
			owner = { has_country_modifier = remnant_army }
		}
	}
	
	trigger = {
		has_terrain = dwarven_road
		OR = {
			is_colony = yes
			is_city = yes
		}
		any_neighbor_province = {
			native_size = 30
			has_terrain = cavern
			NOT = { is_city = yes }
			NOT = { is_colony = yes }
		}
		NOT = { has_province_modifier = devasted_province }
		owner = { total_development = 100 }
		
	}
	
	option = {
        name = diggy.33.a
        ai_chance = { factor = 100 }
		goto = ROOT
		custom_tooltip = cavern_attack_tooltip
		spawn_dwarovar_goblin_rebels = { size = 2 }
	}
}

###Infested Hold Event
##Infestd Assault
country_event = {
	id = diggy.34
	title = diggy.34.t
	desc = diggy.34.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 2
	}
	
	trigger = {
		any_owned_province = {
			has_province_modifier = infested_hold
			continent = serpentspine
			NOT = { has_province_modifier = recent_infested_attack }
			has_any_orcish_pop_trigger = yes
		}
		NOT = { has_spawned_rebels = cave_orc_rebel }
		num_of_cities = 2
	}
	
	#Orc rise up
	option = {
        name = diggy.34.a
        ai_chance = { factor = 100 }
		random_owned_province  = {
			limit = {
				has_province_modifier = infested_hold
				continent = serpentspine
				NOT = { has_province_modifier = recent_infested_attack }
				has_any_orcish_pop_trigger = yes
			}
			spawn_dwarovar_orc_rebels = { size = 1 win = yes }
			if = {
				limit = { development = 25 }
				spawn_dwarovar_orc_rebels = { size = 1 win = yes }
			}
			hidden_effect = {
				add_permanent_province_modifier = {
					name = recent_infested_attack
					duration = 2920
				}
			}
		}
	}
}
##Special Cave Event
country_event = {
	id = diggy.35
	title = diggy.35.t
	desc = diggy.35.d
	picture = CAVE_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		always = yes
	}
	
	immediate = {
		hidden_effect = {
			save_event_target_as = province
			random_list = {
				5 = { set_country_flag = cave_1 }
				5 = { set_country_flag = cave_2 }
				5 = { set_country_flag = cave_3 }
				# 5 = { set_country_flag = cave_4 }
				5 = { set_country_flag = cave_5 }
				5 = { set_country_flag = cave_6 }
				# 5 = { set_country_flag = cave_7 }
				5 = { set_country_flag = cave_8 }
				5 = { set_country_flag = cave_9 }
				5 = { set_country_flag = cave_10 }
				5 = { set_country_flag = cave_11 }
				# 5 = { set_country_flag = cave_12 }
				5 = { set_country_flag = cave_13 }
				5 = { set_country_flag = cave_14 }
				5 = { set_country_flag = cave_15 }
				5 = { set_country_flag = cave_16 }
				# 5 = { set_country_flag = cave_17 }
				5 = { set_country_flag = cave_18 }
				5 = { set_country_flag = cave_19 }
				5 = { set_country_flag = cave_20 }
			}
		}
	}
	
	option = {
        name = diggy.35.a #Gold Cache
        ai_chance = { factor = 100 }
		trigger = { has_country_flag = cave_1 }
		clr_cavern_exploration = yes
		add_treasury = 150
		random_owned_province = {
			limit = { has_province_modifier = exploring_cave is_city = yes }
			remove_province_modifier = special_cave
			remove_province_modifier = exploring_cave
		}
	}
	
	option = {
        name = diggy.35.b #Old weapon cache
        ai_chance = { factor = 100 }
		trigger = { has_country_flag = cave_2 }
		clr_cavern_exploration = yes
		add_mil_power = 100
		FROM = {
			remove_province_modifier = special_cave
			remove_province_modifier = exploring_cave
		}
	}
	
	option = {
        name = diggy.35.c #Huge Mithril Cave
        ai_chance = { factor = 100 }
		trigger = { has_country_flag = cave_3 }
		clr_cavern_exploration = yes
		FROM = {
			remove_province_modifier = special_cave
			remove_province_modifier = exploring_cave
			change_trade_goods = mithril
			add_base_tax = 2
			add_permanent_province_modifier = { name = dwarovar_huge_mithril_cave duration = -1 }
		}
	}
	
	option = {
        name = diggy.35.e #Orc Ambush
        ai_chance = { factor = 100 }
		trigger = { has_country_flag = cave_4 }
		clr_cavern_exploration = yes
		FROM = {
			remove_province_modifier = special_cave
			remove_province_modifier = exploring_cave
			spawn_dwarovar_orc_rebels = { size = 1 }
		}
	}
	
	option = {
        name = diggy.35.f #Old Dwarven Caravan
        ai_chance = { factor = 100 }
		trigger = { has_country_flag = cave_5 }
		clr_cavern_exploration = yes
		FROM = {
			remove_province_modifier = special_cave
			remove_province_modifier = exploring_cave
		}
		add_years_of_income = 0.5
	}
	
	option = {
        name = diggy.35.g #Tomb of Gramgir SteelBeard / Old tomb
        ai_chance = { factor = 100 }
		trigger = { has_country_flag = cave_6 }
		clr_cavern_exploration = yes
		FROM = {
			remove_province_modifier = special_cave
			remove_province_modifier = exploring_cave
			if = {
				limit = { NOT = { has_global_flag = gramgir_tomb } }
				custom_tooltip = gramgir_tooltip
				add_permanent_province_modifier = {
					name = gramgir_steelbeard
					duration = -1
				}
				hidden_effect = { set_global_flag = gramgir_tomb }
			}
		}
		add_prestige = 10
		add_dip_power = 25
	}
	
	option = {
        name = diggy.35.h #Cave goblin ambush
        ai_chance = { factor = 100 }
		trigger = { has_country_flag = cave_7 }
		clr_cavern_exploration = yes
		FROM = {
			remove_province_modifier = special_cave
			remove_province_modifier = exploring_cave
			spawn_dwarovar_goblin_rebels = { size = 2 }
		}
	}
	
	option = {
        name = diggy.35.i #Old Dwarven book Caravan
        ai_chance = { factor = 100 }
		trigger = { has_country_flag = cave_8 }
		clr_cavern_exploration = yes
		FROM = {
			remove_province_modifier = special_cave
			remove_province_modifier = exploring_cave
		}
		add_country_modifier = {
			name = old_dwarven_book_caravan
			duration = 7200
		}
	}
	
	option = {
        name = diggy.35.j #Great Dookan temple
        ai_chance = { factor = 100 }
		trigger = { has_country_flag = cave_9 }
		clr_cavern_exploration = yes
		FROM = {
			remove_province_modifier = special_cave
			remove_province_modifier = exploring_cave
			add_permanent_province_modifier = {
				name = great_dookan_temple
				duration = -1
			}
		}
		add_prestige = 5
	}
	
	option = {
        name = diggy.35.k #Big Fungi Cave
        ai_chance = { factor = 100 }
		trigger = { has_country_flag = cave_10 }
		clr_cavern_exploration = yes
		FROM = {
			remove_province_modifier = special_cave
			remove_province_modifier = exploring_cave
			change_trade_goods = fungi
			add_base_production = 5
			add_base_tax = 2
			add_base_manpower = 1
			add_permanent_province_modifier = {
				name = big_fungi
				duration = -1
			}
		}
	}
	
	option = {
        name = diggy.35.l #Huge Battle Site
        ai_chance = { factor = 100 }
		trigger = { has_country_flag = cave_11 }
		clr_cavern_exploration = yes
		FROM = {
			remove_province_modifier = special_cave
			remove_province_modifier = exploring_cave
		}
		add_prestige = 25
		add_mil_power = 50
	}
	
	option = {
        name = diggy.35.m #All for nothing
        ai_chance = { factor = 100 }
		trigger = { has_country_flag = cave_12 }
		clr_cavern_exploration = yes
		FROM = {
			remove_province_modifier = special_cave
			remove_province_modifier = exploring_cave
		}
		add_prestige = -5
		add_treasury = -75
	}
	
	option = {
        name = diggy.35.n #A deep hole
        ai_chance = { factor = 100 }
		trigger = { has_country_flag = cave_13 }
		clr_cavern_exploration = yes
		FROM = {
			remove_province_modifier = special_cave
			remove_province_modifier = exploring_cave
		}
		add_prestige = 5
	}
	
	option = {
        name = diggy.35.o #How to dig book
        ai_chance = { factor = 100 }
		trigger = { has_country_flag = cave_14 }
		clr_cavern_exploration = yes
		FROM = {
			remove_province_modifier = special_cave
			remove_province_modifier = exploring_cave
		}
		if = {
			limit = { NOT = { has_country_modifier = how_to_dig } }
			add_country_modifier = {
				name = how_to_dig
				duration = 43800
			}
			custom_tooltip = how_to_dig_tooltip
		}
		add_prestige = 5
	}
	
	option = {
        name = diggy.35.p #Killing an Orc book
        ai_chance = { factor = 100 }
		trigger = { has_country_flag = cave_15 }
		clr_cavern_exploration = yes
		FROM = {
			remove_province_modifier = special_cave
			remove_province_modifier = exploring_cave
		}
		add_country_modifier = {
			name = kiling_an_orc
			duration = 43800
		}
		add_prestige = 5
	}
	
	option = {
        name = diggy.35.q #Monstruous cache of gold
        ai_chance = { factor = 100 }
		trigger = { has_country_flag = cave_16 }
		clr_cavern_exploration = yes
		FROM = {
			remove_province_modifier = special_cave
			remove_province_modifier = exploring_cave
		}
		add_years_of_income = 1
	}
	
	option = {
        name = diggy.35.r #Sink hole destroy exploring party
        ai_chance = { factor = 100 }
		trigger = { has_country_flag = cave_17 }
		clr_cavern_exploration = yes
		FROM = {
			remove_province_modifier = special_cave
			remove_province_modifier = exploring_cave
		}
		reduce_stability_or_adm_power = yes
	}
	
	option = {
        name = diggy.35.s #Old orcish artefact
        ai_chance = { factor = 100 }
		trigger = { has_country_flag = cave_18 }
		clr_cavern_exploration = yes
		FROM = {
			remove_province_modifier = special_cave
			remove_province_modifier = exploring_cave
		}
		add_stability_or_adm_power = yes
	}
	
	option = {
        name = diggy.35.ta #Gnipahellir / Beautiful cavern
        ai_chance = { factor = 100 }
		trigger = { has_country_flag = cave_19 }
		clr_cavern_exploration = yes
		FROM = {
			remove_province_modifier = special_cave
			remove_province_modifier = exploring_cave
			if = {
				limit = { NOT = { has_global_flag = gnipahellir } }
				custom_tooltip = gnipahellir_cavern_tooltip
				add_permanent_province_modifier = {
					name = gnipahellir_cavern
					duration = -1
				}
				add_base_tax = 5
				add_base_manpower = 5
				hidden_effect = { set_global_flag = gnipahellir }
			}
		}
		add_stability_or_adm_power = yes
	}
	
	option = {
        name = diggy.35.u #Hehodovar Codex / Old Dwarven artefact
        ai_chance = { factor = 100 }
		trigger = { has_country_flag = cave_20 }
		clr_cavern_exploration = yes
		FROM = {
			remove_province_modifier = special_cave
			remove_province_modifier = exploring_cave
		}
		if = {
			limit = { NOT = { has_global_flag = hehodovar_codex } }
			custom_tooltip = hehodovar_codex_tooltip
			add_country_modifier = {
				name = hehodovar_codex
				duration = -1
			}
			hidden_effect = { set_global_flag = hehodovar_codex }
		}
		add_prestige = 20
		random = {
			chance = 50
			add_stability_or_adm_power = yes
		}
	}
}

##Restoring a Rail
province_event = {
	id = diggy.36
	title = diggy.36.t
	desc = diggy.36.d
	picture = DWARVEN_RAIL_eventPicture
	goto = root
	
	is_triggered_only = yes
	
	trigger = {
		always = yes
	}
	
	option = {
        name = diggy.36.a
        ai_chance = { factor = 100 }
		goto = ROOT
		owner = { add_prestige = 1 }
	}
}

##Discovery of an incredible cave
province_event = {
	id = diggy.37
	title = diggy.37.t
	desc = diggy.37.d
	picture = ARTWORK_eventPicture
	goto = root
	
	fire_only_once = yes
	mean_time_to_happen = {
		years = 15
	}
	
	trigger = {
		has_province_modifier = beautiful_cave
		continent = serpentspine
		NOT = { has_global_flag = serpent_rot }
		is_year = 1650
	}
	
	immediate = {
		hidden_effect = { set_global_flag = serpent_rot }
	}
	
	option = {
        name = diggy.37.a
        ai_chance = { factor = 100 }
		goto = ROOT
		add_permanent_province_modifier = {
			name = mycos_caurak
			duration = -1
		}
		hidden_effect = {
			owner = { country_event = { id = diggy.38 days = 100 random = 50 } }
		}
	}
}

##Propose exploration of the lake
country_event = {
	id = diggy.38
	title = diggy.38.t
	desc = diggy.38.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 10
	}
	
	trigger = {
		capital_scope = { continent = serpentspine }
		any_owned_province = {
			has_province_modifier = mycos_caurak
		}
		NOT = { has_country_flag = mycos_flag }
	}
	
	immediate = {
		hidden_effect = { set_country_flag = mycos_flag }
	}
	
	### Yes
	option = {
        name = diggy.38.a
        ai_chance = { factor = 100 }
		add_years_of_income = -0.1
		add_adm_power = -20
		add_dip_power = -20
		hidden_effect = { 
			country_event = { id = diggy.39 days = 500 random = 100 }
			set_country_flag = sent_expedition
		}
	}
	
	### No, we want to let this pristine cave be pristine
	option = {
        name = diggy.38.b
        ai_chance = { factor = 100 }
		hidden_effect = { country_event = { id = diggy.39 days = 1000 random = 100 } }
	}
}
##Discover the beast + cave collapse
country_event = {
	id = diggy.39
	title = diggy.39.t
	desc = {
		trigger = { has_country_flag = sent_expedition }
		desc = diggy.39.d.1
	}
	desc = {
		trigger = { NOT = { has_country_flag = sent_expedition } }
		desc = diggy.39.d.2
	}
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		any_owned_province = {
			has_province_modifier = mycos_caurak
		}
	}
	
	### Contain the collapse
	option = {
        name = diggy.39.a
        ai_chance = { factor = 100 }
		add_years_of_income = -0.05
		add_adm_power = -10
		add_dip_power = -10
		add_mil_power = -10
		random_owned_province = {
			limit = { has_province_modifier = mycos_caurak }
			remove_province_modifier = mycos_caurak
			hidden_effect = { set_province_flag = caurak_collapse }
		}
		hidden_effect = { set_country_flag = serpent_rot_start clr_country_flag = sent_expedition }
	}
}

##Upgrading a Rail
province_event = {
	id = diggy.42
	title = diggy.42.t
	desc = diggy.42.d
	picture = DWARVEN_RAIL_eventPicture
	goto = root
	
	is_triggered_only = yes
	
	trigger = {
		always = yes
	}
	
	option = {
        name = diggy.42.a
        ai_chance = { factor = 100 }
		goto = ROOT
		owner = { add_prestige = 2 }
	}
}

##Irrigation system
country_event = {
	id = diggy.43
	title = diggy.43.t
	desc = diggy.43.d
	picture = FARMING_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		always = yes
	}
	
	
	#North
	option = {
        name = diggy.43.a
        ai_chance = { factor = 100 }
		trigger = { NOT = { has_global_flag = irrigation_north } }
		hidden_effect = { set_global_flag = irrigation_north }
		hidden_effect = { country_event = { id = diggy.44 days = 1825 random = 365 } }
		if = {
			limit = { 
				ai = no
				has_country_flag = mountainshark_irrigation_discount
			}
			add_treasury = -750
			add_adm_power = -100
			hidden_effect = { clr_country_flag = mountainshark_irrigation_discount }
		}
		else_if = {
			limit = { 
				ai = no
				has_country_flag = orldhum_discount
			}
			custom_tooltip = orldhum_tooltip_discount_labor
			add_treasury = -750
			add_adm_power = -100
			hidden_effect = { clr_country_flag = orldhum_discount }
		}
		else_if = {
			limit = { ai = no }
			add_treasury = -1500
			add_adm_power = -200
		}
		else = {
			add_treasury = -500
		}
	}
	#South
	option = {
        name = diggy.43.b
        ai_chance = { factor = 100 }
		trigger = { NOT = { has_global_flag = irrigation_south } }
		hidden_effect = { set_global_flag = irrigation_south }
		hidden_effect = { country_event = { id = diggy.44 days = 1825 random = 365 } }
		if = {
			limit = { 
				ai = no
				has_country_flag = mountainshark_irrigation_discount
			}
			add_treasury = -750
			add_adm_power = -100
			hidden_effect = { clr_country_flag = mountainshark_irrigation_discount }
		}
		else_if = {
			limit = { 
				ai = no
				has_country_flag = orldhum_discount
			}
			custom_tooltip = orldhum_tooltip_discount_labor
			add_treasury = -750
			add_adm_power = -100
			hidden_effect = { clr_country_flag = orldhum_discount }
		}
		else_if = {
			limit = { ai = no }
			add_treasury = -1500
			add_adm_power = -200
		}
		else = {
			add_treasury = -500
		}
	}
	#East
	option = {
        name = diggy.43.c
        ai_chance = { factor = 100 }
		trigger = { NOT = { has_global_flag = irrigation_east } }
		hidden_effect = { set_global_flag = irrigation_east }
		hidden_effect = { country_event = { id = diggy.44 days = 1825 random = 365 } }
		if = {
			limit = { 
				ai = no
				has_country_flag = mountainshark_irrigation_discount
			}
			add_treasury = -750
			add_adm_power = -100
			hidden_effect = { clr_country_flag = mountainshark_irrigation_discount }
		}
		else_if = {
			limit = { 
				ai = no
				has_country_flag = orldhum_discount
			}
			custom_tooltip = orldhum_tooltip_discount_labor
			add_treasury = -750
			add_adm_power = -100
			hidden_effect = { clr_country_flag = orldhum_discount }
		}
		else_if = {
			limit = { ai = no }
			add_treasury = -1500
			add_adm_power = -200
		}

		else = {
			add_treasury = -500
		}
	}
	#West
	option = {
        name = diggy.43.e
        ai_chance = { factor = 100 }
		trigger = { NOT = { has_global_flag = irrigation_west } }
		hidden_effect = { set_global_flag = irrigation_west }
		hidden_effect = { country_event = { id = diggy.44 days = 1825 random = 365 } }
		if = {
			limit = { 
				ai = no
				has_country_flag = mountainshark_irrigation_discount
			}
			add_treasury = -750
			add_adm_power = -100
			hidden_effect = { clr_country_flag = mountainshark_irrigation_discount }
		}
		else_if = {
			limit = { 
				ai = no
				has_country_flag = orldhum_discount
			}
			custom_tooltip = orldhum_tooltip_discount_labor
			add_treasury = -750
			add_adm_power = -100
			hidden_effect = { clr_country_flag = orldhum_discount }
		}
		else_if = {
			limit = { ai = no }
			add_treasury = -1500
			add_adm_power = -200
		}
		else = {
			add_treasury = -500
		}
	}
	#GoBack
	option = {
        name = diggy.43.f
        ai_chance = { factor = 0 }
		hidden_effect = { clr_country_flag = repairing_irrigation }
	}
}

country_event = {
	id = diggy.44
	title = diggy.44.t
	desc = diggy.44.d
	picture = FARMING_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		always = yes
	}
	
	immediate = {
		hidden_effect = { clr_country_flag = repairing_irrigation }
	}
	
	option = {
        name = diggy.44.a
        ai_chance = { factor = 100 }
		if = {
			limit = { 
				has_global_flag = irrigation_north
				NOT = { has_global_flag = irrigation_north_done }
			}
			castle_hill_area = {
				if = {
					limit = { NOT = { province_id = 4120 } }
					add_base_manpower = 1
					add_base_tax = 1
					add_base_production = 1
					remove_province_triggered_modifier = flooded_province
					add_province_triggered_modifier = efficient_irrigation
					change_trade_goods = grain
				}
			}
			hidden_effect = { set_global_flag = irrigation_north_done }
		}
		else_if = {
			limit = { 
				has_global_flag = irrigation_south
				NOT = { has_global_flag = irrigation_south_done }
			}
			royal_terrace_area = {
				if = {
					limit = { NOT = { province_id = 4121 } }
					add_base_manpower = 1
					add_base_tax = 1
					add_base_production = 1
					remove_province_triggered_modifier = flooded_province
					add_province_triggered_modifier = efficient_irrigation
					change_trade_goods = grain
				}
			}
			hidden_effect = { set_global_flag = irrigation_south_done }
		}
		else_if = {
			limit = { 
				has_global_flag = irrigation_west
				NOT = { has_global_flag = irrigation_west_done }
			}
			assembly_terrace_area = {
				add_base_manpower = 1
				add_base_tax = 1
				add_base_production = 1
				remove_province_triggered_modifier = flooded_province
				add_province_triggered_modifier = efficient_irrigation
				change_trade_goods = grain
			}
			hidden_effect = { set_global_flag = irrigation_west_done }
		}
		else_if = {
			limit = { 
				has_global_flag = irrigation_east
				NOT = { has_global_flag = irrigation_east_done }
			}
			common_terrace_area = {
				add_base_manpower = 1
				add_base_tax = 1
				add_base_production = 1
				remove_province_triggered_modifier = flooded_province
				add_province_triggered_modifier = efficient_irrigation
				change_trade_goods = grain
			}
			hidden_effect = { set_global_flag = irrigation_east_done }
		}
	}
}

#Irrigation done, gain cool modifier
country_event = {
	id = diggy.45
	title = diggy.45.t
	desc = diggy.45.d
	picture = FARMING_eventPicture
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		months = 1
	}
	
	trigger = {
		4119 = {
			owned_by = ROOT
		}
		irrigation_dwarovar = {
			type = all
			country_or_vassal_holds = ROOT
			has_province_modifier = efficient_irrigation
		}
	}
	
	option = {
        name = diggy.45.a
        ai_chance = { factor = 100 }
		hidden_effect = {
			set_global_flag = serpent_vale_irrigation
			clr_global_flag = irrigation_east
			clr_global_flag = irrigation_north
			clr_global_flag = irrigation_west
			clr_global_flag = irrigation_south
			clr_global_flag = irrigation_east_done
			clr_global_flag = irrigation_north_done
			clr_global_flag = irrigation_west_done
			clr_global_flag = irrigation_south_done
		}
		4119 = {
			add_permanent_province_modifier = {
				name = dwarovar_granary
				duration = -1
			}
		}
	}
}

#Convert non-ancestor worship dwarves
country_event = {
	id = diggy.46
	title = diggy.46.t
	desc = diggy.46.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_country_modifier = dwarven_administration
		NOT = { religion_group = dwarven }
		is_subject = no
		NOT = { has_country_flag = diggy_proposed_conversion }
		NOT = { capital = 2863 } #Khugdihr
	}
	
	immediate = { hidden_effect = { set_country_flag = diggy_proposed_conversion } }
	
	option = {
        name = diggy.46.a
        ai_chance = { factor = 5 }
		add_prestige = -5
		increase_legitimacy_small_effect = yes
	}
	
	option = {
        name = diggy.46.b
        ai_chance = { 
			factor = 95
			modifier = {
				factor = 0
				OR = {
					tag = Z36
					tag = B18
				}
			}
		}
		add_prestige = 5
		every_owned_province = { change_religion = ancestor_worship }
		change_religion = ancestor_worship
		hidden_effect = {
			add_prestige = 100
		}
	}
}

#Dynamically restoring a hold
country_event = {
	id = diggy.47
	title = diggy.47.t
	desc = diggy.47.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		always = yes
	}
	
	immediate = {
		hidden_effect = {
			define_hold_to_repair = yes
		}
	}
	
	after = {
		hidden_effect = {
			every_owned_province = {
				limit = { has_province_flag = repair_@ROOT }
				clr_province_flag = repair_@ROOT
				clr_province_flag = option_repair_1_@ROOT
				clr_province_flag = option_repair_2_@ROOT
				clr_province_flag = option_repair_3_@ROOT
				clr_province_flag = option_repair_4_@ROOT
				clr_province_flag = option_repair_5_@ROOT
				clr_province_flag = option_repair_6_@ROOT
			}
			clr_country_flag = open_repair_hold_menu
		}
	}
	
	option = {
        name = diggy.47.a
        ai_chance = { factor = 5 }
		trigger = { any_owned_province = { has_province_flag = option_repair_1_@ROOT } }
		goto = repair1
		event_target:repair1 = {
			repair_hold = yes
		}
	}
	
	option = {
        name = diggy.47.b
        ai_chance = { factor = 5 }
		trigger = { any_owned_province = { has_province_flag = option_repair_2_@ROOT } }
		goto = repair2
		event_target:repair2 = {
			repair_hold = yes
		}
	}
	
	option = {
        name = diggy.47.c
        ai_chance = { factor = 5 }
		trigger = { any_owned_province = { has_province_flag = option_repair_3_@ROOT } }
		goto = repair3
		event_target:repair3 = {
			repair_hold = yes
		}
	}
	
	option = {
        name = diggy.47.e
        ai_chance = { factor = 5 }
		trigger = { any_owned_province = { has_province_flag = option_repair_4_@ROOT } }
		goto = repair4
		event_target:repair4 = {
			repair_hold = yes
		}
	}
	
	option = {
        name = diggy.47.f
        ai_chance = { factor = 5 }
		trigger = { any_owned_province = { has_province_flag = option_repair_5_@ROOT } }
		goto = repair5
		event_target:repair5 = {
			repair_hold = yes
		}
	}
	
	option = {
        name = diggy.47.g
        ai_chance = { factor = 5 }
		trigger = { any_owned_province = { has_province_flag = option_repair_6_@ROOT } }
		goto = repair6
		event_target:repair6 = {
			repair_hold = yes
		}
	}
	#Go Back
	option = {
        name = diggy.47.h
        ai_chance = { factor = 0 }
	}
}

#Dynamically clear a hold
country_event = {
	id = diggy.48
	title = diggy.48.t
	desc = diggy.48.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		always = yes
	}
	
	immediate = {
		hidden_effect = {
			define_hold_to_clear = yes
		}
	}
	
	after = {
		clr_country_flag = open_infested_hold_menu
	}
	
	option = {
        name = diggy.48.a
        ai_chance = { factor = 5 }
		trigger = { any_owned_province = { has_province_flag = option_infested_1_@ROOT is_city = yes } }
		goto = infested1
		random_owned_province = {
			limit = { has_province_flag = option_infested_1_@ROOT is_city = yes }
			infested_hold_clearing = yes
		}
	}
	
	option = {
        name = diggy.48.b
        ai_chance = { factor = 5 }
		trigger = { any_owned_province = { has_province_flag = option_infested_2_@ROOT is_city = yes } }
		goto = infested2
		random_owned_province = {
			limit = { has_province_flag = option_infested_2_@ROOT is_city = yes }
			infested_hold_clearing = yes
		}
	}
	
	option = {
        name = diggy.48.c
        ai_chance = { factor = 5 }
		trigger = { any_owned_province = { has_province_flag = option_infested_3_@ROOT is_city = yes } }
		goto = infested3
		random_owned_province = {
			limit = { has_province_flag = option_infested_3_@ROOT is_city = yes }
			infested_hold_clearing = yes
		}
	}
	
	option = {
        name = diggy.48.e
        ai_chance = { factor = 5 }
		trigger = { any_owned_province = { has_province_flag = option_infested_4_@ROOT is_city = yes } }
		goto = infested4
		random_owned_province = {
			limit = { has_province_flag = option_infested_4_@ROOT is_city = yes }
			infested_hold_clearing = yes
		}
	}
	
	#Go Back
	option = {
        name = diggy.48.f
        ai_chance = { factor = 0 }
		hidden_effect = {
			every_owned_province = {
				limit = { has_province_flag = infested_@ROOT }
				clr_province_flag = infested_@ROOT
				clr_province_flag = option_infested_1_@ROOT
				clr_province_flag = option_infested_2_@ROOT
				clr_province_flag = option_infested_3_@ROOT
				clr_province_flag = option_infested_4_@ROOT
			}
			clr_country_flag = open_infested_hold_menu
		}
	}
}


#Hold digging menu
country_event = {
	id = diggy.49
	title = diggy.49.t
	desc = diggy.49.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		always = yes
	}
	
	immediate = {
		hidden_effect = { define_hold_that_can_dig = yes }
	}
	
	#Hold
	option = {
        name = diggy.49.1
        ai_chance = { factor = 0 }
		trigger = { any_owned_province = { has_province_flag = option_hold_1_@ROOT } }
		goto = hold1
		random_owned_province = {
			limit = { has_province_flag = option_hold_1_@ROOT }
			start_digging_deeper_non_capital = yes
		}
		hidden_effect = { clr_digging_menu = yes }
	}
	option = {
        name = diggy.49.2
        ai_chance = { factor = 0 }
		trigger = { any_owned_province = { has_province_flag = option_hold_2_@ROOT } }
		goto = hold2
		random_owned_province = {
			limit = { has_province_flag = option_hold_2_@ROOT }
			start_digging_deeper_non_capital = yes
		}
		hidden_effect = { clr_digging_menu = yes }
	}
	option = {
        name = diggy.49.3
        ai_chance = { factor = 0 }
		trigger = { any_owned_province = { has_province_flag = option_hold_3_@ROOT } }
		goto = hold3
		random_owned_province = {
			limit = { has_province_flag = option_hold_3_@ROOT }
			start_digging_deeper_non_capital = yes
		}
		hidden_effect = { clr_digging_menu = yes }
	}
	option = {
        name = diggy.49.4
        ai_chance = { factor = 0 }
		trigger = { any_owned_province = { has_province_flag = option_hold_4_@ROOT } }
		goto = hold4
		random_owned_province = {
			limit = { has_province_flag = option_hold_4_@ROOT }
			start_digging_deeper_non_capital = yes
		}
		hidden_effect = { clr_digging_menu = yes }
	}
	option = {
        name = diggy.49.5
        ai_chance = { factor = 0 }
		trigger = { any_owned_province = { has_province_flag = option_hold_5_@ROOT } }
		goto = hold5
		random_owned_province = {
			limit = { has_province_flag = option_hold_5_@ROOT }
			start_digging_deeper_non_capital = yes
		}
		hidden_effect = { clr_digging_menu = yes }
	}
	option = {
        name = diggy.49.6
        ai_chance = { factor = 0 }
		trigger = { any_owned_province = { has_province_flag = option_hold_6_@ROOT } }
		goto = hold6
		random_owned_province = {
			limit = { has_province_flag = option_hold_6_@ROOT }
			start_digging_deeper_non_capital = yes
		}
		hidden_effect = { clr_digging_menu = yes }
	}
	option = {
        name = diggy.49.7
        ai_chance = { factor = 0 }
		trigger = { any_owned_province = { has_province_flag = option_hold_7_@ROOT } }
		goto = hold7
		random_owned_province = {
			limit = { has_province_flag = option_hold_7_@ROOT }
			start_digging_deeper_non_capital = yes
		}
		hidden_effect = { clr_digging_menu = yes }
	}
	option = {
        name = diggy.49.8
        ai_chance = { factor = 0 }
		trigger = { any_owned_province = { has_province_flag = option_hold_8_@ROOT } }
		goto = hold8
		random_owned_province = {
			limit = { has_province_flag = option_hold_8_@ROOT }
			start_digging_deeper_non_capital = yes
		}
		hidden_effect = { clr_digging_menu = yes }
	}
	option = {
        name = diggy.49.9
        ai_chance = { factor = 0 }
		trigger = { any_owned_province = { has_province_flag = option_hold_9_@ROOT } }
		goto = hold9
		random_owned_province = {
			limit = { has_province_flag = option_hold_9_@ROOT }
			start_digging_deeper_non_capital = yes
		}
		hidden_effect = { clr_digging_menu = yes }
	}
	option = {
        name = diggy.49.10
        ai_chance = { factor = 0 }
		trigger = { any_owned_province = { has_province_flag = option_hold_10_@ROOT } }
		goto = hold10
		random_owned_province = {
			limit = { has_province_flag = option_hold_10_@ROOT }
			start_digging_deeper_non_capital = yes
		}
		hidden_effect = { clr_digging_menu = yes }
	}
	option = {
        name = diggy.49.11
        ai_chance = { factor = 0 }
		trigger = { any_owned_province = { has_province_flag = option_hold_11_@ROOT } }
		goto = hold11
		random_owned_province = {
			limit = { has_province_flag = option_hold_11_@ROOT }
			start_digging_deeper_non_capital = yes
		}
		hidden_effect = { clr_digging_menu = yes }
	}
	option = {
		name = diggy.49.12
		ai_chance = { factor = 0 }
		trigger = { any_owned_province = { has_province_flag = option_hold_12_@ROOT } }
		goto = hold12
		random_owned_province = {
			limit = { has_province_flag = option_hold_12_@ROOT }
			start_digging_deeper_non_capital = yes
		}
		hidden_effect = { clr_digging_menu = yes }
	}
	option = {
		name = diggy.49.13
		ai_chance = { factor = 0 }
		trigger = { any_owned_province = { has_province_flag = option_hold_13_@ROOT } }
		goto = hold13
		random_owned_province = {
			limit = { has_province_flag = option_hold_13_@ROOT }
			start_digging_deeper_non_capital = yes
		}
		hidden_effect = { clr_digging_menu = yes }
	}
	option = {
		name = diggy.49.14
		ai_chance = { factor = 0 }
		trigger = { any_owned_province = { has_province_flag = option_hold_14_@ROOT } }
		goto = hold14
		random_owned_province = {
			limit = { has_province_flag = option_hold_14_@ROOT }
			start_digging_deeper_non_capital = yes
		}
		hidden_effect = { clr_digging_menu = yes }
	}
	option = {
		name = diggy.49.15
		ai_chance = { factor = 0 }
		trigger = { any_owned_province = { has_province_flag = option_hold_15_@ROOT } }
		goto = hold15
		random_owned_province = {
			limit = { has_province_flag = option_hold_15_@ROOT }
			start_digging_deeper_non_capital = yes
		}
		hidden_effect = { clr_digging_menu = yes }
	}
	option = {
		name = diggy.49.16
		ai_chance = { factor = 0 }
		trigger = { any_owned_province = { has_province_flag = option_hold_16_@ROOT } }
		goto = hold16
		random_owned_province = {
			limit = { has_province_flag = option_hold_16_@ROOT }
			start_digging_deeper_non_capital = yes
		}
		hidden_effect = { clr_digging_menu = yes }
	}
	option = {
		name = diggy.49.17
		ai_chance = { factor = 0 }
		trigger = { any_owned_province = { has_province_flag = option_hold_17_@ROOT } }
		goto = hold17
		random_owned_province = {
			limit = { has_province_flag = option_hold_17_@ROOT }
			start_digging_deeper_non_capital = yes
		}
		hidden_effect = { clr_digging_menu = yes }
	}
	option = {
		name = diggy.49.18
		ai_chance = { factor = 0 }
		trigger = { any_owned_province = { has_province_flag = option_hold_18_@ROOT } }
		goto = hold18
		random_owned_province = {
			limit = { has_province_flag = option_hold_18_@ROOT }
			start_digging_deeper_non_capital = yes
		}
		hidden_effect = { clr_digging_menu = yes }
	}
	option = {
		name = diggy.49.19
		ai_chance = { factor = 0 }
		trigger = { any_owned_province = { has_province_flag = option_hold_19_@ROOT } }
		goto = hold19
		random_owned_province = {
			limit = { has_province_flag = option_hold_19_@ROOT }
			start_digging_deeper_non_capital = yes
		}
		hidden_effect = { clr_digging_menu = yes }
	}
	option = {
		name = diggy.49.20
		ai_chance = { factor = 0 }
		trigger = { any_owned_province = { has_province_flag = option_hold_20_@ROOT } }
		goto = hold20
		random_owned_province = {
			limit = { has_province_flag = option_hold_20_@ROOT }
			start_digging_deeper_non_capital = yes
		}
		hidden_effect = { clr_digging_menu = yes }
	}
	option = {
		name = diggy.49.21
		ai_chance = { factor = 0 }
		trigger = { any_owned_province = { has_province_flag = option_hold_21_@ROOT } }
		goto = hold21
		random_owned_province = {
			limit = { has_province_flag = option_hold_21_@ROOT }
			start_digging_deeper_non_capital = yes
		}
		hidden_effect = { clr_digging_menu = yes }
	}
	option = {
		name = diggy.49.22
		ai_chance = { factor = 0 }
		trigger = { any_owned_province = { has_province_flag = option_hold_22_@ROOT } }
		goto = hold22
		random_owned_province = {
			limit = { has_province_flag = option_hold_22_@ROOT }
			start_digging_deeper_non_capital = yes
		}
		hidden_effect = { clr_digging_menu = yes }
	}
	option = {
		name = diggy.49.23
		ai_chance = { factor = 0 }
		trigger = { any_owned_province = { has_province_flag = option_hold_23_@ROOT } }
		goto = hold23
		random_owned_province = {
			limit = { has_province_flag = option_hold_23_@ROOT }
			start_digging_deeper_non_capital = yes
		}
		hidden_effect = { clr_digging_menu = yes }
	}
	option = {
		name = diggy.49.24
		ai_chance = { factor = 0 }
		trigger = { any_owned_province = { has_province_flag = option_hold_24_@ROOT } }
		goto = hold24
		random_owned_province = {
			limit = { has_province_flag = option_hold_24_@ROOT }
			start_digging_deeper_non_capital = yes
		}
		hidden_effect = { clr_digging_menu = yes }
	}
	option = {
		name = diggy.49.25
		ai_chance = { factor = 0 }
		trigger = { any_owned_province = { has_province_flag = option_hold_25_@ROOT } }
		goto = hold25
		random_owned_province = {
			limit = { has_province_flag = option_hold_25_@ROOT }
			start_digging_deeper_non_capital = yes
		}
		hidden_effect = { clr_digging_menu = yes }
	}
	option = {
		name = diggy.49.26
		ai_chance = { factor = 0 }
		trigger = { any_owned_province = { has_province_flag = option_hold_26_@ROOT } }
		goto = hold26
		random_owned_province = {
			limit = { has_province_flag = option_hold_26_@ROOT }
			start_digging_deeper_non_capital = yes
		}
		hidden_effect = { clr_digging_menu = yes }
	}
	option = {
		name = diggy.49.27
		ai_chance = { factor = 0 }
		trigger = { any_owned_province = { has_province_flag = option_hold_27_@ROOT } }
		goto = hold27
		random_owned_province = {
			limit = { has_province_flag = option_hold_27_@ROOT }
			start_digging_deeper_non_capital = yes
		}
		hidden_effect = { clr_digging_menu = yes }
	}
	option = {
		name = diggy.49.28
		ai_chance = { factor = 0 }
		trigger = { any_owned_province = { has_province_flag = option_hold_28_@ROOT } }
		goto = hold28
		random_owned_province = {
			limit = { has_province_flag = option_hold_28_@ROOT }
			start_digging_deeper_non_capital = yes
		}
		hidden_effect = { clr_digging_menu = yes }
	}
	option = {
		name = diggy.49.29
		ai_chance = { factor = 0 }
		trigger = { any_owned_province = { has_province_flag = option_hold_29_@ROOT } }
		goto = hold29
		random_owned_province = {
			limit = { has_province_flag = option_hold_29_@ROOT }
			start_digging_deeper_non_capital = yes
		}
		hidden_effect = { clr_digging_menu = yes }
	}
	#Go Back
	option = {
        name = diggy.49.30
        ai_chance = { factor = 0 }
		hidden_effect = { clr_digging_menu = yes }
	}
}
# Ovdal-Az-An survivors
country_event = {
    id = diggy.50
    title = diggy.50.t
    desc = diggy.50.d
    picture = COUNTRY_COLLAPSE_eventPicture
    
    fire_only_once = yes
    
    mean_time_to_happen = {
        years = 1
	}
    trigger = {
        owns = 4284
        culture_group = dwarven
        NOT = { is_year = 1550 }
	}
    #Let them join our army
    option = {
        name = diggy.50.a
        add_prestige = 25
        add_splendor = 250
        define_general = {
            name = "Goblinsbane"
            trait = ruthless_personality
            shock = 10
            fire = 6
            manuever = 8
            siege = 6
		}
        add_country_modifier = {
			name = legacy_of_goblinsbane
			duration = 9125
        }
    }
    
    #They should advise us instead
    option = {
        name = diggy.50.b
        add_prestige = 25
        add_splendor = 250
        define_advisor = {
			type = commandant
			name = "Goblinsbane"
			skill = 3
			culture = granite_dwarf
			religion = dwarven_pantheon
			discount = yes
		}
            
        add_country_modifier = {
			name = legacy_of_goblinsbane
			duration = 9125
        }
    }
}

# Deepening the capital
country_event = {
    id = diggy.51
    title = diggy.51.t
    desc = diggy.51.d
    picture = ARTWORK_eventPicture
    
    is_triggered_only = yes
	
    trigger = {
		always = yes
	}
	
	immediate = {
		hidden_effect = { capital_scope = { setup_digging_deeper_capital = yes } }
	}
	
    #Let's dig
    option = {
        name = diggy.51.a
		if = {
			limit = {
				capital_scope = {
					NOT = { has_construction = any }
				}
			}
			capital_scope = { start_digging_deeper = yes }
			hidden_effect = { set_country_flag = is_digging }
		}
		else = {
			custom_tooltip = diggy_no_building_event
		}


		ai_chance = {
			factor = 90 
			modifier = {
				factor = 0
				is_subject = no
				OR = {
					AND = {
						capital_scope = { has_province_modifier = dig_1 }
						NOT = { treasury = 100 }
					}
					AND = {
						capital_scope = { has_province_modifier = dig_2 }
						NOT = { treasury = 250 }
					}
					AND = {
						capital_scope = { has_province_modifier = dig_3 }
						NOT = { treasury = 400 }
					}
					AND = {
						capital_scope = { has_province_modifier = dig_4 }
						NOT = { treasury = 700 }
					}
					AND = {
						capital_scope = { has_province_modifier = dig_5 }
						NOT = { treasury = 1000 }
					}
					AND = {
						capital_scope = { has_province_modifier = dig_6 }
						NOT = { treasury = 1300 }
					}
					AND = {
						capital_scope = { has_province_modifier = dig_7 }
						NOT = { treasury = 1600 }
					}
					AND = {
						capital_scope = { has_province_modifier = dig_8 }
						NOT = { treasury = 2000 }
					}
					AND = {
						capital_scope = { has_province_modifier = dig_9 }
						NOT = { treasury = 2300 }
					}
					AND = {
						capital_scope = { has_province_modifier = dig_10 }
						NOT = { treasury = 2500 }
					}
				}
			}
		}
    }
    
    #Go back
    option = {
		ai_chance = { factor = 10 }
        name = diggy.51.b
    }
}

###############
##    AMLHARAZ
###############
# Forming the Amlharaz
country_event = {
    id = diggy.52
    title = diggy.52.t
    desc = diggy.52.d
    picture = ARTWORK_eventPicture
    
    is_triggered_only = yes
	
    trigger = {
		always = yes
	}
	
	immediate = {
		hidden_effect = {
			save_event_target_as = country
			if = {
				limit = { 4119 = { is_capital = no } }
				4119 = { add_core = I01 cede_province = I01 I01 = { change_religion = event_target:country add_government_reform = amlharaz_reform } ROOT = { create_subject = { subject_type = amlharaz_hold subject = I01 } } change_culture = kronium_dwarf change_religion = event_target:country }
				4149 = { add_core = I01 cede_province = I01 }
				4122 = { add_core = I01 cede_province = I01 }
				4128 = { add_core = I01 cede_province = I01 }
			}
			if = {
				limit = { 4208 = { is_capital = no } }
				4208 = { add_core = I02 cede_province = I02 I02 = { change_religion = event_target:country add_government_reform = amlharaz_reform } ROOT = { create_subject = { subject_type = amlharaz_hold subject = I02 } } change_culture = quartz_dwarf change_religion = event_target:country }
			}
			if = {
				limit = { 4020 = { is_capital = no } }
				4020 = { add_core = I03 cede_province = I03 I03 = { change_religion = event_target:country add_government_reform = amlharaz_reform } ROOT = { create_subject = { subject_type = amlharaz_hold subject = I03 } } change_culture = sapphire_dwarf change_religion = event_target:country }
			}
			if = {
				limit = { 4147 = { is_capital = no } }
				4147 = { add_core = I04 cede_province = I04 I04 = { change_religion = event_target:country add_government_reform = amlharaz_reform } ROOT = { create_subject = { subject_type = amlharaz_hold subject = I04 } } change_culture = ramsteel_dwarf change_religion = event_target:country }
			}
			if = {
				limit = { 4236 = { is_capital = no } }
				4236 = { add_core = I05 cede_province = I05 I05 = { change_religion = event_target:country add_government_reform = amlharaz_reform } ROOT = { create_subject = { subject_type = amlharaz_hold subject = I05 } } change_culture = mithril_dwarf change_religion = event_target:country }
			}
			if = {
				limit = { 2931 = { is_capital = no } }
				2931 = { add_core = I06 cede_province = I06 I06 = { change_religion = event_target:country add_government_reform = amlharaz_reform } ROOT = { create_subject = { subject_type = amlharaz_hold subject = I06 } } change_culture = dagrite_dwarf change_religion = event_target:country }
			}
			if = {
				limit = { 2863 = { is_capital = no } }
				2863 = { add_core = I07 cede_province = I07 I07 = { change_religion = event_target:country add_government_reform = amlharaz_reform  } ROOT = { create_subject = { subject_type = amlharaz_hold subject = I07 } } change_culture = agate_dwarf change_religion = event_target:country }
			}
			if = {
				limit = { 2868 = { is_capital = no } }
				2868 = { add_core = I08 cede_province = I08 I08 = { change_religion = event_target:country add_government_reform = amlharaz_reform  } ROOT = { create_subject = { subject_type = amlharaz_hold subject = I08 } } change_culture = platinum_dwarf change_religion = event_target:country }
			}
			if = {
				limit = { 4056 = { is_capital = no } }
				4056 = { add_core = I09 cede_province = I09 I09 = { change_religion = event_target:country add_government_reform = amlharaz_reform } ROOT = { create_subject = { subject_type = amlharaz_hold subject = I09 } } change_culture = opal_dwarf change_religion = event_target:country }
			}
			if = {
				limit = { 2963 = { is_capital = no } }
				2963 = { add_core = I10 cede_province = I10 I10 = { change_religion = event_target:country add_government_reform = amlharaz_reform } ROOT = { create_subject = { subject_type = amlharaz_hold subject = I10 } } change_culture = lead_dwarf change_religion = event_target:country }
			}
			if = {
				limit = { 2942 = { is_capital = no } }
				2942 = { add_core = I11 cede_province = I11 I11 = { change_religion = event_target:country add_government_reform = amlharaz_reform } ROOT = { create_subject = { subject_type = amlharaz_hold subject = I11 } } change_culture = marble_dwarf change_religion = event_target:country }
			}
			if = {
				limit = { 4238 = { is_capital = no } }
				4238 = { add_core = I12 cede_province = I12 I12 = { change_religion = event_target:country add_government_reform = amlharaz_reform } ROOT = { create_subject = { subject_type = amlharaz_hold subject = I12 } } change_culture = cobalt_dwarf change_religion = event_target:country }
			}
			if = {
				limit = { 4100 = { is_capital = no } }
				4100 = { add_core = I13 cede_province = I13 I13 = { change_religion = event_target:country add_government_reform = amlharaz_reform } ROOT = { create_subject = { subject_type = amlharaz_hold subject = I13 } } change_culture = flint_dwarf change_religion = event_target:country }
			}
			if = {
				limit = { 4217 = { is_capital = no } }
				4217 = { add_core = I14 cede_province = I14 I14 = { change_religion = event_target:country add_government_reform = amlharaz_reform } ROOT = { create_subject = { subject_type = amlharaz_hold subject = I14 } } change_culture = titanium_dwarf change_religion = event_target:country }
			}
			if = {
				limit = { 4078 = { is_capital = no } }
				4078 = { add_core = I15 cede_province = I15 I15 = { change_religion = event_target:country add_government_reform = amlharaz_reform } ROOT = { create_subject = { subject_type = amlharaz_hold subject = I15 } } change_culture = pyrite_dwarf change_religion = event_target:country }
			}
			if = {
				limit = { 4039 = { is_capital = no } }
				4039 = { add_core = I16 cede_province = I16 I16 = { change_religion = event_target:country add_government_reform = amlharaz_reform } ROOT = { create_subject = { subject_type = amlharaz_hold subject = I16 } } change_culture = basalt_dwarf change_religion = event_target:country }
			}
			if = {
				limit = { 4218 = { is_capital = no } }
				4218 = { add_core = I17 cede_province = I17 I17 = { change_religion = event_target:country add_government_reform = amlharaz_reform } ROOT = { create_subject = { subject_type = amlharaz_hold subject = I17 } } change_culture = topaz_dwarf change_religion = event_target:country }
			}
			if = {
				limit = { 4265 = { is_capital = no } }
				4265 = { add_core = I18 cede_province = I18 I18 = { change_religion = event_target:country add_government_reform = amlharaz_reform } ROOT = { create_subject = { subject_type = amlharaz_hold subject = I18 } } change_culture = peridot_dwarf change_religion = event_target:country }
			}
			if = {
				limit = { 4284 = { is_capital = no } }
				4284 = { add_core = I19 cede_province = I19 I19 = { change_religion = event_target:country add_government_reform = amlharaz_reform } ROOT = { create_subject = { subject_type = amlharaz_hold subject = I19 } } change_culture = granite_dwarf change_religion = event_target:country }
			}
			if = {
				limit = { 4266 = { is_capital = no } }
				4266 = { add_core = I20 cede_province = I20 I20 = { change_religion = event_target:country add_government_reform = amlharaz_reform } ROOT = { create_subject = { subject_type = amlharaz_hold subject = I20 } } change_culture = amethyst_dwarf change_religion = event_target:country }
			}
			if = {
				limit = { 4350 = { is_capital = no } }
				4350 = { add_core = I21 cede_province = I21 I21 = { change_religion = event_target:country add_government_reform = amlharaz_reform } ROOT = { create_subject = { subject_type = amlharaz_hold subject = I21 } } change_culture = emerald_dwarf change_religion = event_target:country }
			}
			if = {
				limit = { 4311 = { is_capital = no } }
				4311 = { add_core = I22 cede_province = I22 I22 = { change_religion = event_target:country add_government_reform = amlharaz_reform } ROOT = { create_subject = { subject_type = amlharaz_hold subject = I22 } } change_culture = jade_dwarf change_religion = event_target:country }
				4312 = { add_core = I22 cede_province = I22 change_religion = event_target:country change_culture = jade_dwarf }
				4313 = { add_core = I22 cede_province = I22 change_religion = event_target:country change_culture = jade_dwarf }
			}
			if = {
				limit = { 4323 = { is_capital = no } }
				4323 = { add_core = I25 cede_province = I25 I25 = { change_religion = event_target:country add_government_reform = amlharaz_reform } ROOT = { create_subject = { subject_type = amlharaz_hold subject = I25 } } change_culture = malachite_dwarf change_religion = event_target:country }
			}
			if = {
				limit = { 4093 = { is_capital = no } }
				4093 = { add_core = H76 cede_province = H76 H76 = { change_religion = event_target:country add_government_reform = amlharaz_reform } ROOT = { create_subject = { subject_type = amlharaz_hold subject = H76 } } change_culture = diamond_dwarf change_religion = event_target:country }
			}
			if = {
				limit = { 2973 = { is_capital = no } }
				2973 = { add_core = H77 cede_province = H77 H77 = { change_religion = event_target:country add_government_reform = amlharaz_reform } ROOT = { create_subject = { subject_type = amlharaz_hold subject = H77 } } change_culture = garnet_dwarf change_religion = event_target:country }
			}
			if = {
				limit = { 4124 = { is_capital = no } }
				4124 = { add_core = H78 cede_province = H78 H78 = { change_religion = event_target:country add_government_reform = amlharaz_reform } ROOT = { create_subject = { subject_type = amlharaz_hold subject = H78 } } change_culture = citrine_dwarf change_religion = event_target:country }
			}
			if = {
				limit = { 2914 = { is_capital = no } }
				2914 = { add_core = F47 cede_province = F47 F47 = { change_religion = event_target:country add_government_reform = amlharaz_reform } ROOT = { create_subject = { subject_type = amlharaz_hold subject = F47 } } change_culture = gold_dwarf change_religion = event_target:country }
			}
			if = {
				limit = { 4247 = { is_capital = no } }
				4247 = { add_core = H79 cede_province = H79 H79 = { change_religion = event_target:country add_government_reform = amlharaz_reform } ROOT = { create_subject = { subject_type = amlharaz_hold subject = H79 } } change_culture = amber_dwarf change_religion = event_target:country }
			}
		}
	}
	
    #Let's form it!
    option = {
        name = diggy.52.a
		ai_chance = { factor = 1 }
		add_government_reform = amlharaz_reform
		every_country = {
			limit = { is_subject_of_type = amlharaz_hold is_subject_of = event_target:country }
			add_country_modifier = {
				name = amlharaz_autonomy
				duration = 3650
			}
			hidden_effect = {
				save_event_target_as = subject
				event_target:country = {
					every_owned_province = { remove_core = event_target:subject }
				}
				every_owned_province = { remove_core = event_target:country }
				add_yearly_manpower = 5
				add_stability_or_adm_power = yes
				add_legitimacy = 100
				add_republican_tradition = 100
				if = {
					limit = { NOT = { prestige = 0 } }
					add_prestige = 100
				}
				else = { add_prestige = 40 }
				add_country_modifier = {
					name = amlharaz_liberty_desire_10
					duration = -1
				}
			}
		}
		hidden_effect = { set_country_flag = amlharaz_political }
		country_event = { id = diggy.53 days = 30 }
    }
}

country_event = {
    id = diggy.53
    title = diggy.53.t
    desc = diggy.53.d
    picture = ARTWORK_eventPicture
    
    is_triggered_only = yes
	hidden = yes
	
    trigger = {
		always = yes
	}
	
    #Let's dig
    option = {
        name = diggy.53.a
		ai_chance = { factor = 1 }
		if = {
			limit = { has_country_flag = amlharaz_economic }
			clr_country_flag = amlharaz_economic 
			set_country_flag = amlharaz_military
			country_event = { id = diggy.55 }
		}
		else_if = {
			limit = { has_country_flag = amlharaz_military }
			clr_country_flag = amlharaz_military 
			set_country_flag = amlharaz_political
			country_event = { id = diggy.56 }
		}
		else_if = {
			limit = { has_country_flag = amlharaz_political }
			clr_country_flag = amlharaz_political 
			set_country_flag = amlharaz_economic
			country_event = { id = diggy.54 }
		}
    }
}

#Economic
country_event = {
    id = diggy.54
    title = diggy.54.t
    desc = diggy.54.d
    picture = ARTWORK_eventPicture
    
    is_triggered_only = yes
	
    trigger = {
		always = yes
	}
	
    #Build time + Dev Cost
    option = {
        name = diggy.54.a
		ai_chance = { factor = 1 }
		trigger = { NOT = { has_country_modifier = amlharaz_economic_1 } }
		hidden_effect = { set_country_flag = amlharaz_economic_1 }
		every_country = {
			limit = { is_subject_of_type = amlharaz_hold is_subject_of = ROOT }
			country_event = { id = diggy.57 days = 30 random = 150 }
		}
		hidden_effect = { country_event = { id = diggy.60 days = 200 } }
    }
	
	#Good Produced
    option = {
        name = diggy.54.b
		ai_chance = { factor = 1 }
		trigger = { NOT = { has_country_modifier = amlharaz_economic_2 } }
		hidden_effect = { set_country_flag = amlharaz_economic_2 }
		every_country = {
			limit = { is_subject_of_type = amlharaz_hold is_subject_of = ROOT }
			country_event = { id = diggy.57 days = 30 random = 150 }
		}
		hidden_effect = { country_event = { id = diggy.60 days = 200 } }
    }
	
	#Free Trade
    option = {
        name = diggy.54.c
		ai_chance = { factor = 1 }
		trigger = { NOT = { has_country_modifier = amlharaz_economic_3 } }
		hidden_effect = { set_country_flag = amlharaz_economic_3 }
		every_country = {
			limit = { is_subject_of_type = amlharaz_hold is_subject_of = ROOT }
			country_event = { id = diggy.57 days = 30 random = 150 }
		}
		hidden_effect = { country_event = { id = diggy.60 days = 200 } }
    }
	
	#Mercantilism
    option = {
        name = diggy.54.e
		ai_chance = { factor = 1 }
		trigger = { NOT = { has_country_modifier = amlharaz_economic_4 } }
		hidden_effect = { set_country_flag = amlharaz_economic_4 }
		every_country = {
			limit = { is_subject_of_type = amlharaz_hold is_subject_of = ROOT }
			country_event = { id = diggy.57 days = 30 random = 150 }
		}
		hidden_effect = { country_event = { id = diggy.60 days = 200 } }
    }
}

#Military
country_event = {
    id = diggy.55
    title = diggy.55.t
    desc = diggy.55.d
    picture = ARTWORK_eventPicture
    
    is_triggered_only = yes
	
    trigger = {
		always = yes
	}
	
    #Greater Army
    option = {
        name = diggy.55.a
		ai_chance = { factor = 1 }
		trigger = { NOT = { has_country_modifier = amlharaz_military_1 } }
		hidden_effect = { set_country_flag = amlharaz_military_1 }
		every_country = {
			limit = { is_subject_of_type = amlharaz_hold is_subject_of = ROOT }
			country_event = { id = diggy.58 days = 30 random = 150 }
		}
		hidden_effect = { country_event = { id = diggy.60 days = 200 } }
    }
	
	#Infantry CA
    option = {
        name = diggy.55.b
		ai_chance = { factor = 1 }
		trigger = { NOT = { has_country_modifier = amlharaz_military_2 } }
		hidden_effect = { set_country_flag = amlharaz_military_2 }
		every_country = {
			limit = { is_subject_of_type = amlharaz_hold is_subject_of = ROOT }
			country_event = { id = diggy.58 days = 30 random = 150 }
		}
		hidden_effect = { country_event = { id = diggy.60 days = 200 } }
    }
	
	#Canon backrow
    option = {
        name = diggy.55.c
		ai_chance = { factor = 1 }
		trigger = { NOT = { has_country_modifier = amlharaz_military_3 } }
		hidden_effect = { set_country_flag = amlharaz_military_3 }
		every_country = {
			limit = { is_subject_of_type = amlharaz_hold is_subject_of = ROOT }
			country_event = { id = diggy.58 days = 30 random = 150 }
		}
		hidden_effect = { country_event = { id = diggy.60 days = 200 } }
    }
	
	#Professionalism
    option = {
        name = diggy.55.e
		ai_chance = { factor = 1 }
		trigger = { NOT = { has_country_modifier = amlharaz_military_4 } }
		hidden_effect = { set_country_flag = amlharaz_military_4 }
		every_country = {
			limit = { is_subject_of_type = amlharaz_hold is_subject_of = ROOT }
			country_event = { id = diggy.58 days = 30 random = 150 }
		}
		hidden_effect = { country_event = { id = diggy.60 days = 200 } }
    }
}

#Political
country_event = {
    id = diggy.56
    title = diggy.56.t
    desc = diggy.56.d
    picture = ARTWORK_eventPicture
    
    is_triggered_only = yes
	
    trigger = {
		always = yes
	}
	
    #Recover War Exhaustion
    option = {
        name = diggy.56.a
		ai_chance = { factor = 1 }
		trigger = { NOT = { has_country_modifier = amlharaz_political_1 } }
		hidden_effect = { set_country_flag = amlharaz_political_1 }
		every_country = {
			limit = { is_subject_of_type = amlharaz_hold is_subject_of = ROOT }
			country_event = { id = diggy.59 days = 30 random = 150 }
		}
		hidden_effect = { country_event = { id = diggy.60 days = 200 } }
    }
	
	#Better Administration
    option = {
        name = diggy.56.b
		ai_chance = { factor = 1 }
		trigger = { NOT = { has_country_modifier = amlharaz_political_2 } }
		hidden_effect = { set_country_flag = amlharaz_political_2 }
		every_country = {
			limit = { is_subject_of_type = amlharaz_hold is_subject_of = ROOT }
			country_event = { id = diggy.59 days = 30 random = 150 }
		}
		hidden_effect = { country_event = { id = diggy.60 days = 200 } }
    }
	
	#Advisor
    option = {
        name = diggy.56.c
		ai_chance = { factor = 1 }
		trigger = { NOT = { has_country_modifier = amlharaz_political_3 } }
		hidden_effect = { set_country_flag = amlharaz_political_3 }
		every_country = {
			limit = { is_subject_of_type = amlharaz_hold is_subject_of = ROOT }
			country_event = { id = diggy.59 days = 30 random = 150 }
		}
		hidden_effect = { country_event = { id = diggy.60 days = 200 } }
    }
	
	#Vassal tax reduction
    option = {
        name = diggy.56.e
		ai_chance = { factor = 1 }
		trigger = { NOT = { has_country_modifier = amlharaz_political_4 } }
		hidden_effect = { set_country_flag = amlharaz_political_4 }
		every_country = {
			limit = { is_subject_of_type = amlharaz_hold is_subject_of = ROOT }
			country_event = { id = diggy.59 days = 30 random = 150 }
		}
		hidden_effect = { country_event = { id = diggy.60 days = 200 } }
    }
}

# Economic vote
country_event = {
    id = diggy.57
    title = diggy.57.t
	desc = {
		trigger = { I24 = { has_country_flag = amlharaz_economic_1 } }
		desc = diggy.57.da
	}
	desc = {
		trigger = { I24 = { has_country_flag = amlharaz_economic_2 } }
		desc = diggy.57.db
	}
	desc = {
		trigger = { I24 = { has_country_flag = amlharaz_economic_3 } }
		desc = diggy.57.dc
	}
	desc = {
		trigger = { I24 = { has_country_flag = amlharaz_economic_4 } }
		desc = diggy.57.dd
	}
    picture = ARTWORK_eventPicture
    
    is_triggered_only = yes
	
    trigger = {
		always = yes
	}
	
    #For
    option = {
        name = diggy.57.a
		ai_chance = { 
			factor = 50
			
			modifier = {
				factor = 1.5
				num_of_loans = 5
			}
			
			modifier = {
				factor = 2
				is_bankrupt = yes
			}
			modifier = {
				factor = 2
				personality = ai_capitalist
			}
			
			modifier = {
				factor = 1.5
				ruler_has_personality = midas_touched_personality
			}
			modifier = {
				factor = 1.5
				ruler_has_personality = architectural_visionary_personality
			}
			modifier = {
				factor = 1.5
				ruler_has_personality = entrepreneur_personality
			}
		}
		hidden_effect = {
			set_country_flag = for_amlharaz
			REB = { change_variable = { for_amlharaz = 1 } }
		}
    }
    
    #Against
    option = {
        name = diggy.57.b
		ai_chance = { 
			factor = 50
			
			modifier = {
				factor = 1.5
				num_of_loans = 5
			}
			
			modifier = {
				factor = 2
				is_bankrupt = yes
			}
			modifier = {
				factor = 2
				personality = ai_militarist
			}
			
			modifier = {
				factor = 1.5
				ruler_has_personality = embezzler_personality
			}
			modifier = {
				factor = 1.5
				ruler_has_personality = drunkard_personality
			}
			modifier = {
				factor = 1.5
				ruler_has_personality = malevolent_personality
			}
			modifier = {
				factor = 1.5
				liberty_desire = 65
			}
			modifier = {
				factor = 2
				liberty_desire = 85
			}
		}
		hidden_effect = {
			set_country_flag = against_amlharaz
			REB = { change_variable = { against_amlharaz = 1 } }
		}
    }
}

# Military vote
country_event = {
    id = diggy.58
    title = diggy.58.t
	desc = {
		trigger = { I24 = { has_country_flag = amlharaz_military_1 } }
		desc = diggy.58.da
	}
	desc = {
		trigger = { I24 = { has_country_flag = amlharaz_military_2 } }
		desc = diggy.58.db
	}
	desc = {
		trigger = { I24 = { has_country_flag = amlharaz_military_3 } }
		desc = diggy.58.dc
	}
	desc = {
		trigger = { I24 = { has_country_flag = amlharaz_military_4 } }
		desc = diggy.58.dd
	}
    picture = ARTWORK_eventPicture
    
    is_triggered_only = yes
	
    trigger = {
		always = yes
	}
	
    #For
    option = {
        name = diggy.58.a
		ai_chance = { 
			factor = 50
			
			modifier = {
				factor = 1.5
				manpower_percentage = 0.8
			}
			
			modifier = {
				factor = 2
				is_at_war = yes
			}
			modifier = {
				factor = 2
				has_subsidize_armies = yes
			}
			modifier = {
				factor = 2
				personality = ai_militarist
			}
			
			modifier = {
				factor = 1.5
				ruler_has_personality = conqueror_personality
			}
			modifier = {
				factor = 1.5
				ruler_has_personality = martial_educator_personality
			}
			modifier = {
				factor = 1.5
				ruler_has_personality = malevolent_personality
			}
		}
		hidden_effect = {
			set_country_flag = for_amlharaz
			REB = { change_variable = { for_amlharaz = 1 } }
		}
    }
    
    #Against
    option = {
        name = diggy.58.b
		ai_chance = { 
			factor = 50
			
			modifier = {
				factor = 1.5
				is_at_war = no
			}
			
			modifier = {
				factor = 2
				num_of_loans = 10
			}
			modifier = {
				factor = 2
				personality = ai_capitalist
			}
			
			modifier = {
				factor = 1.5
				ruler_has_personality = kind_hearted_personality
			}
			modifier = {
				factor = 1.5
				ruler_has_personality = scholar_personality
			}
			modifier = {
				factor = 1.5
				ruler_has_personality = righteous_personality
			}
			modifier = {
				factor = 1.5
				liberty_desire = 65
			}
			modifier = {
				factor = 2
				liberty_desire = 85
			}
		}
		hidden_effect = {
			set_country_flag = against_amlharaz
			REB = { change_variable = { against_amlharaz = 1 } }
		}
    }
}

# Political vote
country_event = {
    id = diggy.59
    title = diggy.59.t
	desc = {
		trigger = { I24 = { has_country_flag = amlharaz_political_1 } }
		desc = diggy.59.da
	}
	desc = {
		trigger = { I24 = { has_country_flag = amlharaz_political_2 } }
		desc = diggy.59.db
	}
	desc = {
		trigger = { I24 = { has_country_flag = amlharaz_political_3 } }
		desc = diggy.59.dc
	}
	desc = {
		trigger = { I24 = { has_country_flag = amlharaz_political_4 } }
		desc = diggy.59.dd
	}
    picture = ARTWORK_eventPicture
    
    is_triggered_only = yes
	
    trigger = {
		always = yes
	}
	
    #For
    option = {
        name = diggy.59.a
		ai_chance = { 
			factor = 50
			
			modifier = {
				factor = 1.5
				is_at_war = no
			}
			
			modifier = {
				factor = 2
				has_support_loyalists = yes
			}
			modifier = {
				factor = 2
				personality = ai_diplomat
			}
			
			modifier = {
				factor = 1.5
				ruler_has_personality = scholar_personality
			}
			modifier = {
				factor = 1.5
				ruler_has_personality = charismatic_negotiator_personality
			}
			modifier = {
				factor = 1.5
				ruler_has_personality = silver_tongue_personality
			}
		}
		hidden_effect = {
			set_country_flag = for_amlharaz
			REB = { change_variable = { for_amlharaz = 1 } }
		}
    }
    
    #Against
    option = {
        name = diggy.59.b
		ai_chance = { 
			factor = 50
			
			modifier = {
				factor = 1.5
				corruption = 5
			}
			
			modifier = {
				factor = 2
				dip = I24
			}
			modifier = {
				factor = 2
				personality = ai_balanced
			}
			
			modifier = {
				factor = 1.5
				ruler_has_personality = fierce_negotiator_personality
			}
			modifier = {
				factor = 1.5
				ruler_has_personality = cruel_personality
			}
			modifier = {
				factor = 1.5
				ruler_has_personality = malevolent_personality
			}
			modifier = {
				factor = 1.5
				liberty_desire = 65
			}
			modifier = {
				factor = 2
				liberty_desire = 85
			}
		}
		hidden_effect = {
			set_country_flag = against_amlharaz
			REB = { change_variable = { against_amlharaz = 1 } }
		}
    }
}

# Result of the vote
country_event = {
    id = diggy.60
    title = diggy.60.t
    desc = diggy.60.d
    picture = ARTWORK_eventPicture
    
    is_triggered_only = yes
	
    trigger = {
		always = yes
	}
	
	immediate = {
		hidden_effect = {
			clr_country_flag = enacted_amlharaz
			clr_country_flag = denied_amlharaz
		}
	}
	
	after = {
		hidden_effect = {
			every_subject_country = {
				limit = { is_subject_of_type = amlharaz_hold }
				clr_country_flag = for_amlharaz
				clr_country_flag = against_amlharaz
			}
			REB = {
				set_variable = { for_amlharaz = 0 }
				set_variable = { against_amlharaz = 0 }
			}
			clr_country_flag = amlharaz_economic_1
			clr_country_flag = amlharaz_economic_2
			clr_country_flag = amlharaz_economic_3
			clr_country_flag = amlharaz_economic_4
			clr_country_flag = amlharaz_military_1
			clr_country_flag = amlharaz_military_2
			clr_country_flag = amlharaz_military_3
			clr_country_flag = amlharaz_military_4
			clr_country_flag = amlharaz_political_1
			clr_country_flag = amlharaz_political_2
			clr_country_flag = amlharaz_political_3
			clr_country_flag = amlharaz_political_4
		}
	}
	
    #Enact it
    option = {
        name = diggy.60.a
		ai_chance = { factor = 50 }
		trigger_switch = {
			on_trigger = has_country_flag
			
			amlharaz_economic_1 = { add_country_modifier = { name = amlharaz_economic_1 duration = 7300 } every_country = { limit = { is_subject_of = ROOT is_subject_of_type = amlharaz_hold } add_country_modifier = { name = amlharaz_economic_1 duration = 7300 } } }
			amlharaz_economic_2 = { add_country_modifier = { name = amlharaz_economic_2 duration = 7300 } every_country = { limit = { is_subject_of = ROOT is_subject_of_type = amlharaz_hold } add_country_modifier = { name = amlharaz_economic_2 duration = 7300 } } }
			amlharaz_economic_3 = { add_country_modifier = { name = amlharaz_economic_3 duration = 7300 } every_country = { limit = { is_subject_of = ROOT is_subject_of_type = amlharaz_hold } add_country_modifier = { name = amlharaz_economic_3 duration = 7300 } } }
			amlharaz_economic_4 = { add_country_modifier = { name = amlharaz_economic_4 duration = 7300 } add_mercantilism = 5 every_country = { limit = { is_subject_of = ROOT is_subject_of_type = amlharaz_hold } add_country_modifier = { name = amlharaz_economic_4 duration = 7300 } add_mercantilism = 5 } }
			amlharaz_military_1 = { add_country_modifier = { name = amlharaz_military_1 duration = 7300 } every_country = { limit = { is_subject_of = ROOT is_subject_of_type = amlharaz_hold } add_country_modifier = { name = amlharaz_military_1 duration = 7300 } } }
			amlharaz_military_2 = { add_country_modifier = { name = amlharaz_military_2 duration = 7300 } every_country = { limit = { is_subject_of = ROOT is_subject_of_type = amlharaz_hold } add_country_modifier = { name = amlharaz_military_2 duration = 7300 } } }
			amlharaz_military_3 = { add_country_modifier = { name = amlharaz_military_3 duration = 7300 } every_country = { limit = { is_subject_of = ROOT is_subject_of_type = amlharaz_hold } add_country_modifier = { name = amlharaz_military_3 duration = 7300 } } }
			amlharaz_military_4 = { add_country_modifier = { name = amlharaz_military_4 duration = 7300 } every_country = { limit = { is_subject_of = ROOT is_subject_of_type = amlharaz_hold } add_country_modifier = { name = amlharaz_military_4 duration = 7300 } } }
			amlharaz_political_1 = { add_country_modifier = { name = amlharaz_political_1 duration = 7300 } every_country = { limit = { is_subject_of = ROOT is_subject_of_type = amlharaz_hold } add_country_modifier = { name = amlharaz_political_1 duration = 7300 } } }
			amlharaz_political_2 = { add_country_modifier = { name = amlharaz_political_2 duration = 7300 } every_country = { limit = { is_subject_of = ROOT is_subject_of_type = amlharaz_hold } add_country_modifier = { name = amlharaz_political_2 duration = 7300 } } }
			amlharaz_political_3 = { add_country_modifier = { name = amlharaz_political_3 duration = 7300 } every_country = { limit = { is_subject_of = ROOT is_subject_of_type = amlharaz_hold } add_country_modifier = { name = amlharaz_political_3 duration = 7300 } } }
			amlharaz_political_4 = { add_country_modifier = { name = amlharaz_political_4 duration = 7300 } every_country = { limit = { is_subject_of = ROOT is_subject_of_type = amlharaz_hold } add_country_modifier = { name = amlharaz_political_4 duration = 7300 } } }
		}
		hidden_effect = { set_country_flag = enacted_amlharaz }
		hidden_effect = { amlharaz_hold_vote = yes }
		country_event = { id = diggy.53 days = 1825 }
    }
    
    #Don't enact it
    option = {
		ai_chance = { factor = 50 }
        name = diggy.60.b
		hidden_effect = { set_country_flag = denied_amlharaz }
		hidden_effect = { amlharaz_hold_vote = yes }
		country_event = { id = diggy.53 days = 1825 }
    }
}


#####################################################################
##### AI helps & Debug Event
#####################################################################
#Dev help for main AI hold
country_event = {
	id = diggy.100
	title = diggy.100.t
	desc = diggy.100.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 8 #dev cost change would make it happen faster otherwise
		
		modifier = {
			factor = 0.75
			capital_scope = { continent = serpentspine }
		}
		
		modifier = {
			factor = 2
			is_subject = yes
		}

		modifier = {
			factor = 0.96
			
			#dev cost reduction
			capital_scope = { 
				has_local_modifier_value = {
					which = local_development_cost
					value = -0.5
				}
			}
		}

		modifier = {
			factor = 0.96
			
			#dev cost reduction
			capital_scope = { 
				has_local_modifier_value = {
					which = local_development_cost
					value = -1
				}
			}
		}

		modifier = {
			factor = 0.96
			
			#dev cost reduction
			capital_scope = { 
				has_local_modifier_value = {
					which = local_development_cost
					value = -3.5
				}
			}
		}

		modifier = {
			factor = 0.96
			
			#dev cost reduction
			capital_scope = { 
				has_local_modifier_value = {
					which = local_development_cost
					value = -5
				}
			}
		}

		modifier = {
			factor = 0.96
			
			#dev cost reduction
			capital_scope = { 
				has_local_modifier_value = {
					which = local_development_cost
					value = -7
				}
			}
		}

		modifier = {
			factor = 0.96
			
			#dev cost reduction
			has_global_modifier_value = {
				which = development_cost
				value = -0.1
			}
		}

		modifier = {
			factor = 0.96
			
			#dev cost reduction
			has_global_modifier_value = {
				which = development_cost
				value = -0.2
			}
		}

		modifier = {
			factor = 0.96
			
			#dev cost reduction
			has_global_modifier_value = {
				which = development_cost
				value = -0.3
			}
		}

		modifier = {
			factor = 0.96
			
			#dev cost reduction
			has_global_modifier_value = {
				which = development_cost
				value = -0.4
			}
		}

		modifier = {
			factor = 0.96
			
			#dev cost reduction
			has_global_modifier_value = {
				which = development_cost
				value = -0.5
			}
		}
	}
	
	hidden = yes
	
	trigger = {
		OR = {
			OR = {
				has_country_modifier = dwarven_administration
				capital_scope = { has_integrated_dwarven_pop_trigger = yes }
			}
			AND = {
				capital_scope = { has_integrated_dwarven_pop_trigger = yes }
				adm_tech = 7
			}
			AND = {
				capital_scope = { has_subterranean_race = yes }
				adm_tech = 7 #bugfix. Passive hold dev gain starts at adm 7 for noncap holds
			}
		}
		OR = {
			capital_scope = { NOT = { development = 40 } has_province_modifier = dig_1 }
			capital_scope = { NOT = { development = 50 } has_province_modifier = dig_2 }
			capital_scope = { NOT = { development = 60 } has_province_modifier = dig_3 }
			capital_scope = { NOT = { development = 70 } has_province_modifier = dig_4 }
			capital_scope = { NOT = { development = 80 } has_province_modifier = dig_5 }
			capital_scope = { NOT = { development = 90 } has_province_modifier = dig_6 }
			capital_scope = { NOT = { development = 100 } has_province_modifier = dig_7 }
			capital_scope = { NOT = { development = 110 } has_province_modifier = dig_8 }
			capital_scope = { NOT = { development = 120 } has_province_modifier = dig_9 }
			capital_scope = { NOT = { development = 130 } has_province_modifier = dig_10 province_id = 4119 }
			capital_scope = { NOT = { development = 130 } has_province_modifier = dig_10 province_id = 4311 }
		}
		NOT = { capital_scope =  { has_province_modifier = infested_hold } }
		NOT = { capital_scope = { has_province_modifier = ruined_hold } }
		ai = yes
	}
	
	#Profit
	option = {
        name = diggy.100.a
        ai_chance = { factor = 100 }
		capital_scope = {
			add_base_manpower = 1
			add_base_tax = 1
			add_base_production = 1
			add_next_institution_embracement_scaled = 15
		}
	}
}
#Passive dev gain for other hold Don't go higher than 100 dev
province_event = {
	id = diggy.101
	title = diggy.100.t
	desc = diggy.100.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 10
		
		modifier = {
			factor = 0.95
			has_integrated_dwarven_pop_trigger = yes
		}
		
		modifier = {
			factor = 0.8
			owner = { has_age_ability = ab_dwarven_reclamation }
		}
		
		modifier = {
			factor = 0.9
			owner = { in_golden_age = yes }
		}
		
		modifier = {
			factor = 0.95
			owner = { has_country_flag = formed_diggy_formable }
		}
		
		modifier = {
			factor = 0.95
			owner = { tag = I24 } #Aul-Dwarov 
		}
		
		modifier = {
			factor = 0.9
			owner = { owns = 676 }
			676 = { has_province_modifier = the_jorkad_dam }
		}
		modifier = {
			factor = 0.9
			owner = { has_country_modifier = dadv_childrens_of_the_dwarovar }
		}

		modifier = {
			factor = 0.9
			owner = { ai = yes }
		}

		modifier = {
			factor = 0.95
			owner = { 
				has_global_modifier_value = {
					which = build_time
					value = -0.1
				}
			}
		}

		modifier = {
			factor = 0.95
			owner = { 
				has_global_modifier_value = {
					which = build_time
					value = -0.2
				}
			}
		}

		modifier = {
			factor = 0.95
			owner = { 
				has_global_modifier_value = {
					which = build_time
					value = -0.3
				}
			}
		}

		modifier = {
			factor = 0.95
			owner = { 
				has_global_modifier_value = {
					which = build_time
					value = -0.4
				}
			}
		}

		modifier = {
			factor = 0.95
			owner = { 
				has_global_modifier_value = {
					which = build_time
					value = -0.5
				}
			}
		}
	}
	
	hidden = yes
	
	trigger = {
		province_group = hold_province
		has_subterranean_race = yes
		OR = {
			AND = { NOT = { development = 40 } has_province_modifier = dig_1 }
			AND = { NOT = { development = 50 } has_province_modifier = dig_2 }
			AND = { NOT = { development = 60 } has_province_modifier = dig_3 }
			AND = { NOT = { development = 70 } has_province_modifier = dig_4 }
			AND = { NOT = { development = 80 } has_province_modifier = dig_5 }
			AND = { NOT = { development = 90 } has_province_modifier = dig_6 }
			AND = { NOT = { development = 100 } has_province_modifier = dig_7 }
		}
		is_capital = no
	}
	
	#Profit
	option = {
        name = diggy.100.a
        ai_chance = { factor = 100 }
		random = {
			chance = 50
			add_base_tax = 1
		}
		random = {
			chance = 50
			add_base_manpower = 1
		}
		random = {
			chance = 50
			add_base_production = 1
		}
	}
}

##Make hold capital
country_event = {
	id = diggy.107
	title = diggy.107.t
	desc = diggy.107.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 1
	}
	
	hidden = yes
	
	trigger = {
		OR = {
			has_country_modifier = dwarven_administration
			dwarovar_goblin_culture_primary = yes
			dwarovar_orc_culture_primary = yes
			tag = Z55 #darkscale
			tag = Z56 #kux
		}
		capital_scope = { NOT = { province_group = hold_province } }
		hold_province = {
			owned_by = ROOT
			is_city = yes
			is_core = ROOT #don't move the cap to a noncore province
		}
		ai = yes
	}
	
	option = {
        name = diggy.107.a
        ai_chance = { factor = 100 }
		hold_province = {
			limit = {
				owned_by = ROOT
				is_city = yes
				is_core = ROOT #don't move the cap to a noncore province
			}
			move_capital_effect = yes
		}
		set_country_flag = capital_to_hold
	}
}

##Starting Bonus
country_event = {
	id = diggy.108
	title = diggy.108.t
	desc = diggy.108.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	
	trigger = {
		OR = {
			has_reform = dwarovar_adventurer_reform
			has_reform = dwarovar_warband
			has_reform = dwarovar_squatter
			tag = Z55 #darkscale
			tag = J32 #miremaw
		}
		NOT = { has_country_flag = dwarovar_claimer_setup }
		NOT = {
			tag = R65 #Blackstep
			tag = R66 #Stolen Gem
			tag = R81 #Jade march
		}
	}
	
	option = {
        name = diggy.108.a
        ai_chance = { factor = 100 }
		add_country_modifier = {
			name = dwarovar_claimer
			duration = 18250
		}
		set_country_flag = dwarovar_claimer_setup
	}
}


##Migration tweak
country_event = {
	id = diggy.109
	title = diggy.109.t
	desc = diggy.109.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		months = 1
	}
	
	hidden = yes
	
	trigger = {
		has_country_modifier = dont_colonize_but_migrate
		capital_scope = { continent = serpentspine }
		OR = {
			num_of_cities = 2
			capital_scope = { province_group = hold_province }
		}
		OR = {
			has_reform = dwarovar_adventurer_reform
			has_reform = dwarovar_warband
			has_reform = roaming_horde
			tag = Z55 #darkscale
			tag = Z56 #kux
		}
	}
	
	option = {
        name = diggy.109.a
		ai_chance = { factor = 100 }
		add_treasury = 250
		remove_country_modifier = dont_colonize_but_migrate
		add_country_modifier = { name = diggy_ai_uprising_buff duration = -1 }
		if = {
			limit = { any_owned_province = { province_group = hold_province } }
			add_country_modifier = { name = dwarovar_hold_bankruptcy_fix duration = 1825 }
		}
	}
}

##SETUP EVENT
country_event = {
	id = diggy.110
	title = diggy.110.t
	desc = diggy.110.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	fire_only_once = yes
	
	hidden = yes
	trigger = {
		always = yes
	}
	
	option = {
        name = diggy.111.a
        ai_chance = { factor = 100 }
		
		#amldihr
		4119 = {
			if = {
				limit = { owned_by = H72 }
				add_permanent_province_modifier = { name = blorc_trophy1 duration = -1 }
				set_province_flag = blorc_plunder_capital_H72
				H72 = { set_country_flag = blorc_plunder_capital_set }
			}
		}

		hold_province = {
			add_province_triggered_modifier = no_subterannean_race
			if = {
				limit = { is_city = yes }
				owner = { set_country_flag = owns_hold_province }
				if = {
					limit = { owner = { dwarovar_orc_culture_primary = yes } }
					add_province_modifier = { name = blorc_hold_malus duration = -1 hidden = yes }
				}
			}
		}
	}
}

###Marrhold setup
country_event = {
	id = diggy.113
	title = diggy.100.t
	desc = diggy.100.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		months = 1
	}
	
	hidden = yes
	
	trigger = {
		2931 = {
			has_trade_modifier = {
				who = ROOT
				key = MARRHOLD_CLOSED
			}
		}
		any_owned_province = { superregion = west_serpentspine_superregion }
	}
	
	option = {
        name = diggy.100.a
        ai_chance = { factor = 100 }
		2931 = {
			remove_trade_modifier = {
				who = ROOT
				key = MARRHOLD_CLOSED
			}
		}
	}
}

#remove flag when is no longer valable
country_event = {
	id = diggy.114
	title = diggy.1.t
	desc = diggy.1.d
	picture = CITY_DEVELOPMENT_eventPicture
	
	mean_time_to_happen = {
		days = 1
	}
	hidden = yes
	
	trigger = {
		has_country_flag = is_digging
		capital_scope = { NOT = { has_construction = digging_deeper } }
	}
	
	option = {
        name = diggy.1.a
        ai_chance = { factor = 100 }
		clr_hold_digging_modifiers = yes
	}
}


# ##Migration tweak
# country_event = {
# 	id = diggy.116
# 	title = diggy.116.t
# 	desc = diggy.116.d
# 	picture = ARTWORK_eventPicture
	
# 	mean_time_to_happen = {
# 		months = 2
# 	}
	
# 	hidden = yes
	
# 	trigger = { # If AI conquers a province from another, allow colonization since migration is no longer possible
# 		capital_scope = {
# 			continent = serpentspine
# 		}
# 		OR = {
# 			num_of_cities = 2
# 			capital_scope = { province_group = hold_province }
# 		}
# 		has_country_modifier = dont_colonize_but_migrate
# 	}
	
# 	option = {
#        name = diggy.116.a
#        ai_chance = { factor = 100 }
# 	   remove_country_modifier = dont_colonize_but_migrate
# 	}
# }


#construction check
province_event = {
	id = diggy.118
	title = diggy.118.t
	desc = diggy.118.d
	picture = FORT_eventPicture
	
	hidden = yes
	
	trigger = {
		is_capital = yes
		has_construction = digging_deeper
		NOT = { construction_progress = 0.99 }
		if = { limit = { construction_progress = 0.50 }
			if = { limit = { construction_progress = 0.75 }
				if = { limit = { construction_progress = 0.87 }
					if = { limit = { construction_progress = 0.93 }
						if = { limit = { construction_progress = 0.96 }
							if = { limit = { construction_progress = 0.98 }
								check_variable = { cons_prog = 0.02 }
							}
							else = {
								check_variable = { cons_prog = 0.04 }
							}
						}
						else = {
							if = { limit = { construction_progress = 0.95 }
								check_variable = { cons_prog = 0.05 }
							}
							else = {
								check_variable = { cons_prog = 0.07 }
							}
						}
					}
					else = {
						if = { limit = { construction_progress = 0.90 }
							if = { limit = { construction_progress = 0.92 }
								check_variable = { cons_prog = 0.08 }
							}
							else = {
								check_variable = { cons_prog = 0.10 }
							}
						}
						else = {
							if = { limit = { construction_progress = 0.89 }
								check_variable = { cons_prog = 0.11 }
							}
							else = {
								check_variable = { cons_prog = 0.13 }
							}
						}
					}
				}
				else = {
					if = { limit = { construction_progress = 0.81 }
						if = { limit = { construction_progress = 0.84 }
							if = { limit = { construction_progress = 0.85 }
								check_variable = { cons_prog = 0.15 }
							}
							else = {
								check_variable = { cons_prog = 0.16 }
							}
						}
						else = {
							if = { limit = { construction_progress = 0.82 }
								check_variable = { cons_prog = 0.18 }
							}
							else = {
								check_variable = { cons_prog = 0.19 }
							}
						}
					}
					else = {
						if = { limit = { construction_progress = 0.78 }
							if = { limit = { construction_progress = 0.79 }
								check_variable = { cons_prog = 0.21 }
							}
							else = {
								check_variable = { cons_prog = 0.22 }
							}
						}
						else = {
							if = { limit = { construction_progress = 0.76 }
								check_variable = { cons_prog = 0.24 }
							}
							else = {
								check_variable = { cons_prog = 0.25 }
							}
						}
					}
				}
			}
			else = {
				if = { limit = { construction_progress = 0.62 }
					if = { limit = { construction_progress = 0.68 }
						if = { limit = { construction_progress = 0.71 }
							if = { limit = { construction_progress = 0.73 }
								check_variable = { cons_prog = 0.27 }
							}
							else = {
								check_variable = { cons_prog = 0.29 }
							}
						}
						else = {
							if = { limit = { construction_progress = 0.70 }
								check_variable = { cons_prog = 0.30 }
							}
							else = {
								check_variable = { cons_prog = 0.32 }
							}
						}
					}
					else = {
						if = { limit = { construction_progress = 0.65 }
							if = { limit = { construction_progress = 0.67 }
								check_variable = { cons_prog = 0.33 }
							}
							else = {
								check_variable = { cons_prog = 0.35 }
							}
						}
						else = {
							if = { limit = { construction_progress = 0.64 }
								check_variable = { cons_prog = 0.36 }
							}
							else = {
								check_variable = { cons_prog = 0.38 }
							}
						}
					}
				}
				else = {
					if = { limit = { construction_progress = 0.56 }
						if = { limit = { construction_progress = 0.59 }
							if = { limit = { construction_progress = 0.60 }
								check_variable = { cons_prog = 0.40 }
							}
							else = {
								check_variable = { cons_prog = 0.41 }
							}
						}
						else = {
							if = { limit = { construction_progress = 0.57 }
								check_variable = { cons_prog = 0.43 }
							}
							else = {
								check_variable = { cons_prog = 0.44 }
							}
						}
					}
					else = {
						if = { limit = { construction_progress = 0.53 }
							if = { limit = { construction_progress = 0.54 }
								check_variable = { cons_prog = 0.46 }
							}
							else = {
								check_variable = { cons_prog = 0.47 }
							}
						}
						else = {
							if = { limit = { construction_progress = 0.51 }
								check_variable = { cons_prog = 0.49 }
							}
							else = {
								check_variable = { cons_prog = 0.50 }
							}
						}
					}
				}
			}
		}
		else = {
			if = { limit = { construction_progress = 0.25 }
				if = { limit = { construction_progress = 0.37 }
					if = { limit = { construction_progress = 0.43 }
						if = { limit = { construction_progress = 0.46 }
							if = { limit = { construction_progress = 0.48 }
								check_variable = { cons_prog = 0.52 }
							}
							else = {
								check_variable = { cons_prog = 0.54 }
							}
						}
						else = {
							if = { limit = { construction_progress = 0.45 }
								check_variable = { cons_prog = 0.55 }
							}
							else = {
								check_variable = { cons_prog = 0.57 }
							}
						}
					}
					else = {
						if = { limit = { construction_progress = 0.40 }
							if = { limit = { construction_progress = 0.42 }
								check_variable = { cons_prog = 0.58 }
							}
							else = {
								check_variable = { cons_prog = 0.60 }
							}
						}
						else = {
							if = { limit = { construction_progress = 0.39 }
								check_variable = { cons_prog = 0.61 }
							}
							else = {
								check_variable = { cons_prog = 0.63 }
							}
						}
					}
				}
				else = {
					if = { limit = { construction_progress = 0.31 }
						if = { limit = { construction_progress = 0.34 }
							if = { limit = { construction_progress = 0.35 }
								check_variable = { cons_prog = 0.65 }
							}
							else = {
								check_variable = { cons_prog = 0.66 }
							}
						}
						else = {
							if = { limit = { construction_progress = 0.32 }
								check_variable = { cons_prog = 0.68 }
							}
							else = {
								check_variable = { cons_prog = 0.69 }
							}
						}
					}
					else = {
						if = { limit = { construction_progress = 0.28 }
							if = { limit = { construction_progress = 0.29 }
								check_variable = { cons_prog = 0.71 }
							}
							else = {
								check_variable = { cons_prog = 0.72 }
							}
						}
						else = {
							if = { limit = { construction_progress = 0.26 }
								check_variable = { cons_prog = 0.74 }
							}
							else = {
								check_variable = { cons_prog = 0.75 }
							}
						}
					}
				}
			}
			else = {
				if = { limit = { construction_progress = 0.12 }
					if = { limit = { construction_progress = 0.18 }
						if = { limit = { construction_progress = 0.21 }
							if = { limit = { construction_progress = 0.23 }
								check_variable = { cons_prog = 0.77 }
							}
							else = {
								check_variable = { cons_prog = 0.79 }
							}
						}
						else = {
							if = { limit = { construction_progress = 0.20 }
								check_variable = { cons_prog = 0.80 }
							}
							else = {
								check_variable = { cons_prog = 0.82 }
							}
						}
					}
					else = {
						if = { limit = { construction_progress = 0.15 }
							if = { limit = { construction_progress = 0.17 }
								check_variable = { cons_prog = 0.83 }
							}
							else = {
								check_variable = { cons_prog = 0.85 }
							}
						}
						else = {
							if = { limit = { construction_progress = 0.14 }
								check_variable = { cons_prog = 0.86 }
							}
							else = {
								check_variable = { cons_prog = 0.88 }
							}
						}
					}
				}
				else = {
					if = { limit = { construction_progress = 0.06 }
						if = { limit = { construction_progress = 0.09 }
							if = { limit = { construction_progress = 0.10 }
								check_variable = { cons_prog = 0.90 }
							}
							else = {
								check_variable = { cons_prog = 0.91 }
							}
						}
						else = {
							if = { limit = { construction_progress = 0.07 }
								check_variable = { cons_prog = 0.93 }
							}
							else = {
								check_variable = { cons_prog = 0.94 }
							}
						}
					}
					else = {
						if = { limit = { construction_progress = 0.03 }
							if = { limit = { construction_progress = 0.04 }
								check_variable = { cons_prog = 0.96 }
							}
							else = {
								check_variable = { cons_prog = 0.97 }
							}
						}
						else = {
							if = { limit = { construction_progress = 0.01 }
								check_variable = { cons_prog = 0.99 }
							}
							else = {
								check_variable = { cons_prog = 1.00 }
							}
						}
					}
				}
			}
		}
	}
	
	option = {
        name = diggy.118.a
		
		cancel_construction = yes
		dig_rebate = yes
		add_building = digging_deeper
	}
}

#Culture Shift Events
province_event = {
	id = diggy.119
	title = diggy.119.t
	desc = {
		trigger = { province_id = 4119 }
		desc = diggy.119.daa
	}
	desc = {
		trigger = { province_id = 4208 }
		desc = diggy.119.dab
	}
	desc = {
		trigger = { province_id = 4020 }
		desc = diggy.119.dac
	}
	desc = {
		trigger = { province_id = 4147 }
		desc = diggy.119.dad
	}
	desc = {
		trigger = { province_id = 4236 }
		desc = diggy.119.dae
	}
	desc = {
		trigger = { province_id = 2931 }
		desc = diggy.119.daf
	}
	desc = {
		trigger = { province_id = 2863 }
		desc = diggy.119.dag
	}
	desc = {
		trigger = { province_id = 2868 }
		desc = diggy.119.dah
	}
	desc = {
		trigger = { province_id = 4056 }
		desc = diggy.119.dai
	}
	desc = {
		trigger = { province_id = 2963 }
		desc = diggy.119.daj
	}
	desc = {
		trigger = { province_id = 2942 }
		desc = diggy.119.dak
	}
	desc = {
		trigger = { province_id = 4238 }
		desc = diggy.119.dal
	}
	desc = {
		trigger = { province_id = 4100 }
		desc = diggy.119.dam
	}
	desc = {
		trigger = { province_id = 4217 }
		desc = diggy.119.dan
	}
	desc = {
		trigger = { province_id = 4078 }
		desc = diggy.119.dao
	}
	desc = {
		trigger = { province_id = 4039 }
		desc = diggy.119.dap
	}
	desc = {
		trigger = { province_id = 4218 }
		desc = diggy.119.daq
	}
	desc = {
		trigger = { province_id = 4265 }
		desc = diggy.119.dar
	}
	desc = {
		trigger = { province_id = 4284 }
		desc = diggy.119.das
	}
	desc = {
		trigger = { province_id = 4266 }
		desc = diggy.119.dat
	}
	desc = {
		trigger = { province_id = 4350 }
		desc = diggy.119.dau
	}
	desc = {
		trigger = { province_id = 4311 }
		desc = diggy.119.dav
	}
	desc = {
		trigger = { province_id = 4323 }
		desc = diggy.119.daw
	}
	desc = {
		trigger = { province_id = 4093 }
		desc = diggy.119.dax
	}
	desc = {
		trigger = { province_id = 2973 }
		desc = diggy.119.day
	}
	desc = {
		trigger = { province_id = 2914 }
		desc = diggy.119.daz
	}
	desc = {
		trigger = { province_id = 4247 }
		desc = diggy.119.dba
	}
	desc = {
		trigger = { province_id = 4124 }
		desc = diggy.119.dbb
	}
	picture = FORT_eventPicture
	
	mean_time_to_happen = {
		years = 30
		modifier = {
			factor = 1.5
			has_seat_in_parliament = yes #nobles/elite experience constant arguing for their hold's interests	#thpse represented in parliament are less likely to shift. those not represented will be more secessionist
		}
		
		modifier = {
			factor = 0.9
			has_dwarven_hold_6 = yes     #deeper/richer holds are more likely to develop new customs
		}
		modifier = {
			factor = 0.9
			has_dwarven_hold_7 = yes
		}
		modifier = {
			factor = 0.9
			has_dwarven_hold_8 = yes
		}
		modifier = {
			factor = 0.9
			has_dwarven_hold_9 = yes
		}
		modifier = {
			factor = 0.8
			has_dwarven_hold_10 = yes  #can't be passively dug, the grandest of the 'common' holds
		}
		modifier = {
			factor = 0.7
			has_dwarven_hold_11 = yes  #is one of a possible two greatest holds on the planet
		}
		
		modifier = {
			factor = 1.5
			any_neighbor_province = {
				OR = {
					has_province_modifier = restored_rail #more contact with outside
					has_province_modifier = advanced_rail
				}
			}
		}
		
		modifier = {                                #advanced rail in both this and previous modifier
			factor = 2                              #to prevent only upgrading some rail being better than repairing all
			any_neighbor_province = {
				has_province_modifier = advanced_rail #more contact with outside
			}
		}
		
		modifier = {                                 #advanced specialised infrastructure
			factor = 0.35                            #means it was a capital at one point, and more unique than the holds with tier 1 specialties
			OR = {
				has_province_modifier = hold_foundry_2
				has_province_modifier = hold_city_2
				has_province_modifier = hold_artisan_2
				has_province_modifier = hold_farm_2
				has_province_modifier = hold_military_2
			}
		}
		
		modifier = {                                 #unique wonder
			factor = 0.25                            #means it was a capital at one point, and has one of the five globally-unique wonders
			OR = {                                   #an easy point of pride and cultural specialisation
				has_province_modifier = magma_forge
				has_province_modifier = artificier_hall
				has_province_modifier = engineer_manufactory
				has_province_modifier = high_gardens
				has_province_modifier = military_academy
			}
		}
		
		modifier = {                                 #territories are much less involved with central government, more likely to split
			factor = 1.5
			is_state_core = owner
		}
		
		modifier = {                                 #stable country is more stable
			factor = 2
			owner = { stability = 3 }
		}
		
		modifier = {
			factor = 1.5
			owner = { stability = 1 }
		}
		
		modifier = {
			factor = 0.75
			owner = { NOT = { stability = 0 } }
		}
		
		modifier = {
			factor = 0.5
			owner = { NOT = { stability = -2 } }
		}
	}
	
	trigger = {								   #some checks could be exported somewhere else idk, I like them here because diggy.31 *and* the upgrade_hold scripted effect can fire it.
		OR = {
			has_terrain = dwarven_hold
			has_terrain = dwarven_hold_surface
		}
		culture_group = dwarven                #No free race swap
		OR = {                                 #Only when dug deep
			has_dwarven_hold_5 = yes
			AND = {								#AI digs slowly - possibly unnecessary
				owner = {
					ai = yes
				}
				has_dwarven_hold_3 = yes
			}
		}
		continent = serpentspine
		NOT = {
			province_id = 4122  #Amldihr child holds
			province_id = 4128  #Amldihr child holds
			province_id = 4149  #Amldihr child holds
			province_id = 4313  #Gronstunad child hold
			has_province_flag = dwarf_culture_emerging #let's not spam this
			province_has_historical_culture = yes      #or try to convert the existing correct culture
		}
		is_capital = no                                #am dum - capital should be too bound to existing administration/the court/ways of life for this event to happen
		NOT = { culture = obsidian_dwarf }     #Obsidian invasion is too angry to swap 
		NOT = { owner = { has_disaster = hoardcurse } }	#hoardcurse deals with this, just in case these want to fire (it should not!)
	}
	
	immediate = {
		set_province_flag = dwarf_culture_emerging
	}
	
	option = {
        name = diggy.119.a
		ai_chance = { factor = 100 }
		area = { 
			limit = { culture_group = dwarven } 
			set_province_historical_culture = yes
			add_local_autonomy = 10
		}
		add_province_modifier = { #harder to culture convert, autonomy grant
			name = diggy_autonomy_concessions
			duration = 7300
		}
	}
	
	#middle option was deprecated for not making much sense
	
	option = {
        name = diggy.119.c
		custom_tooltip = diggy_dangerous_path_tt
		ai_chance = { factor = 0 }
		area = { limit = { culture_group = dwarven } add_unrest = 5 set_province_historical_culture = yes }
		add_province_modifier = {
			name = diggy_suppressed_populace   #Much worse
			duration = 7300
		}
		add_province_modifier = {              #so you don't plan around using it close to expiry and then the next event hits
			name = diggy_cultural_integration_initiative
			duration = 1825
		}
		hidden_effect = { province_event = { id = diggy.120 days = 1825 random = 730 } }
	}
}

province_event = {
	id = diggy.120 							  #event forces an uprising on you because you were mean
	title = diggy.120.t                       
	desc = diggy.120.d                        
	picture = ANGRY_MOB_eventPicture

	
	is_triggered_only = yes
	
	trigger = {
		has_province_modifier = diggy_suppressed_populace
		culture_group = dwarven                #No free race swap, dwarves can't rise in nationalist revolt if you killed them
		continent = serpentspine         
	}
	
	immediate = {
		area = { limit = { culture_group = dwarven } add_devastation = 10 }
	}
	
	option = {
        name = diggy.120.a
		ai_chance = { factor = 100 }
		spawn_rebels = {
			type = nationalist_rebels
			size = 3
		}
		area = { 
			limit = { culture_group = dwarven }
			add_nationalism = 15
			spawn_rebels = {
				type = nationalist_rebels
				size = 1
			}
		}
	}
}

#remove on expanding outside
country_event = {
	id = diggy.121
	title = diggy.121.t
	desc = diggy.121.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_country_modifier = dwarovar_claimer
	}

	immediate = {
		remove_country_modifier = dwarovar_claimer
	}
	
	# welcome to the dwarovar. Send your tears to the discord.
	option = {
        name = diggy.121.a
        ai_chance = { factor = 10 }
	}
}

#remove on vassalized
country_event = {
	id = diggy.122
	title = diggy.122.t
	desc = diggy.122.d
	picture = FORT_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_country_modifier = dwarovar_claimer
	}

	immediate = {
		remove_country_modifier = dwarovar_claimer
	}
	
	# welcome to the dwarovar. Send your tears to the discord.
	option = {
        name = diggy.122.a
        ai_chance = { factor = 10 }
	}
}



#####################################################################
##### Dwarovkron
#####################################################################

# Reforged the Dwarovkron
country_event = {
    id = diggy.200
    title = diggy.200.t
    desc = diggy.200.d
    picture = ARTWORK_eventPicture
    major = yes
    is_triggered_only = yes
	
    trigger = {
		always = yes
	}
	
	immediate = {
		hidden_effect = {
			remove_country_modifier = dwarovkron_crown
			remove_country_modifier = dwarovkron_amethyst
			remove_country_modifier = dwarovkron_diamond
			remove_country_modifier = dwarovkron_citrine
			remove_country_modifier = dwarovkron_ruby
			remove_country_modifier = dwarovkron_jade
			remove_country_modifier = dwarovkron_sapphire
			remove_country_modifier = dwarovkron_agate
			set_global_flag = reforged_dwarovkron
		}
	}
	
    option = {
        name = diggy.200.a
		ai_chance = { factor = 50 }
		add_stability_or_adm_power = yes
		add_prestige_excess_to_splendour_effect = { VAL = 30 }
		add_country_modifier = { name = dwarovkron_full duration = -1 }
    }
}

# Give Dwarovkron fragments to overlord
country_event = {
    id = diggy.201
    title = diggy.201.t
    desc = diggy.201.d
    picture = ARTWORK_eventPicture
    major = yes
	major_trigger = {
		overlord_of = ROOT
	}
    mean_time_to_happen = {
		months = 3
	}
	
    trigger = {
		is_subject = yes
		has_dwarovkron_fragment = yes
		
		NOT = {
			is_subject_of_type = tributary_state
			is_subject_of_type = tributary_state_anb
			tag = R81 #jademarch
		}
	}
	
    #Give them
    option = {
        name = diggy.201.a
		ai_chance = { factor = 50 }
		if = {
			limit = { has_country_modifier = dwarovkron_crown }
			remove_country_modifier = dwarovkron_crown
			overlord = {
				hidden_effect = { add_country_modifier = { name = dwarovkron_crown duration = -1 } }
				country_event = { id = diggy.210 }
			}
		}
		if = {
			limit = { has_country_modifier = dwarovkron_amethyst }
			remove_country_modifier = dwarovkron_amethyst
			overlord = {
				hidden_effect = { add_country_modifier = { name = dwarovkron_amethyst duration = -1 } }
				country_event = { id = diggy.211 }
			}
		}
		if = {
			limit = { has_country_modifier = dwarovkron_diamond }
			remove_country_modifier = dwarovkron_diamond
			overlord = {
				hidden_effect = { add_country_modifier = { name = dwarovkron_diamond duration = -1 } }
				country_event = { id = diggy.212 }
			}
		}
		if = {
			limit = { has_country_modifier = dwarovkron_citrine }
			remove_country_modifier = dwarovkron_citrine
			overlord = {
				hidden_effect = { add_country_modifier = { name = dwarovkron_citrine duration = -1 } }
				country_event = { id = diggy.213 }
			}
		}
		if = {
			limit = { has_country_modifier = dwarovkron_ruby }
			remove_country_modifier = dwarovkron_ruby
			overlord = {
				hidden_effect = { add_country_modifier = { name = dwarovkron_ruby duration = -1 } }
				country_event = { id = diggy.214 }
			}
		}
		if = {
			limit = { has_country_modifier = dwarovkron_jade }
			remove_country_modifier = dwarovkron_jade
			overlord = {
				hidden_effect = { add_country_modifier = { name = dwarovkron_jade duration = -1 } }
				country_event = { id = diggy.215 }
			}
		}
		if = {
			limit = { has_country_modifier = dwarovkron_sapphire }
			remove_country_modifier = dwarovkron_sapphire
			overlord = {
				hidden_effect = { add_country_modifier = { name = dwarovkron_sapphire duration = -1 } }
				country_event = { id = diggy.216 }
			}
		}
		if = {
			limit = { has_country_modifier = dwarovkron_agate }
			remove_country_modifier = dwarovkron_agate
			overlord = {
				hidden_effect = { add_country_modifier = { name = dwarovkron_agate duration = -1 } }
				country_event = { id = diggy.217 }
			}
		}
		if = {
			limit = { has_country_modifier = dwarovkron_full }
			remove_country_modifier = dwarovkron_full
			overlord = {
				hidden_effect = { add_country_modifier = { name = dwarovkron_full duration = -1 } }
				country_event = { id = diggy.218 }
			}
		}
    }
}

# Claim the Agate gem from Asra Bank
country_event = {
    id = diggy.202
    title = diggy.202.t
    desc = diggy.202.d
    picture = ARTWORK_eventPicture
    major = yes
    is_triggered_only = yes
	
    trigger = { always = yes }
	
	
    #Enact it
    option = {
        name = diggy.202.a
		ai_chance = { factor = 50 }
		add_stability_or_adm_power = yes
		add_country_modifier = { name = dwarovkron_agate duration = -1 }
    }
}

### Dwarovkron flavour events
# Crown
country_event = {
	id = diggy.210
	title = diggy.210.t
	desc = {
		trigger = { has_country_flag = flag_dwarovkron_stolen_parts }
		desc = diggy.210.d_s
	}
	desc = {
		trigger = { FROM = { is_subject_of = ROOT } }
		desc = diggy.210.d_g
	}
	desc = {
		trigger = { 
			NOT = { has_country_flag = flag_dwarovkron_stolen_parts }
			NOT = { FROM = { is_subject_of = ROOT } } 
		}
		desc = diggy.210.d_f
	}
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	trigger = { has_country_modifier = dwarovkron_crown }

	option = {
		trigger = { has_country_flag = flag_dwarovkron_stolen_parts }
		name = diggy.210.a_s
		add_prestige_excess_to_splendour_effect = { VAL = 10 }
		tooltip = {
			add_country_modifier = { name = dwarovkron_crown duration = -1 } 
		}
		clr_country_flag = flag_dwarovkron_stolen_parts
	}
	option = {
		trigger = { FROM = { is_subject_of = ROOT } }
		name = diggy.210.a_g
		add_prestige_excess_to_splendour_effect = { VAL = 10 }
		tooltip = {
			add_country_modifier = { name = dwarovkron_crown duration = -1 } 
		}
	}
	option = {
		trigger = { 
			NOT = { has_country_flag = flag_dwarovkron_stolen_parts }
			NOT = { FROM = { is_subject_of = ROOT } } 
		}
		name = diggy.210.a_f
		add_prestige_excess_to_splendour_effect = { VAL = 10 }
		tooltip = { add_country_modifier = { name = dwarovkron_crown duration = -1 } }
	}
}

# Amethyst
country_event = {
	id = diggy.211
	title = diggy.211.t
	desc = {
		trigger = { has_country_flag = flag_dwarovkron_stolen_parts }
		desc = diggy.211.d_s
	}
	desc = {
		trigger = { FROM = { is_subject_of = ROOT } }
		desc = diggy.211.d_g
	}
	desc = {
		trigger = { 
			NOT = { has_country_flag = flag_dwarovkron_stolen_parts }
			NOT = { FROM = { is_subject_of = ROOT } } 
		}
		desc = diggy.211.d_f
	}
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	trigger = { has_country_modifier = dwarovkron_amethyst }
	
	option = {
		trigger = { has_country_flag = flag_dwarovkron_stolen_parts }
		name = diggy.211.a_s
		add_prestige_excess_to_splendour_effect = { VAL = 10 }
		tooltip = {
			add_country_modifier = { name = dwarovkron_amethyst duration = -1 } 
		}
		clr_country_flag = flag_dwarovkron_stolen_parts
	}
	option = {
		trigger = { FROM = { is_subject_of = ROOT } }
		name = diggy.211.a_g
		add_prestige_excess_to_splendour_effect = { VAL = 10 }
		tooltip = {
			add_country_modifier = { name = dwarovkron_amethyst duration = -1 } 
		}
	}
	option = {
		trigger = { 
			NOT = { has_country_flag = flag_dwarovkron_stolen_parts }
			NOT = { FROM = { is_subject_of = ROOT } } 
		}
		name = diggy.211.a_f
		add_prestige_excess_to_splendour_effect = { VAL = 10 }
		tooltip = {
			add_country_modifier = { name = dwarovkron_amethyst duration = -1 } 
		}
	}
}

# Diamond
country_event = {
	id = diggy.212
	title = diggy.212.t
	desc = {
		trigger = { has_country_flag = flag_dwarovkron_stolen_parts }
		desc = diggy.212.d_s
	}
	desc = {
		trigger = { FROM = { is_subject_of = ROOT } }
		desc = diggy.212.d_g
	}
	desc = {
		trigger = { 
			NOT = { has_country_flag = flag_dwarovkron_stolen_parts }
			NOT = { FROM = { is_subject_of = ROOT } } 
		}
		desc = diggy.212.d_f
	}
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_country_modifier = dwarovkron_diamond
	}
	option = {
		trigger = { has_country_flag = flag_dwarovkron_stolen_parts }
		name = diggy.212.a_s
		add_prestige_excess_to_splendour_effect = { VAL = 10 }
		tooltip = {
			add_country_modifier = { name = dwarovkron_diamond duration = -1 } 
		}
		clr_country_flag = flag_dwarovkron_stolen_parts
	}
	option = {
		trigger = { FROM = { is_subject_of = ROOT } }
		name = diggy.212.a_g
		add_prestige_excess_to_splendour_effect = { VAL = 10 }
		tooltip = {
			add_country_modifier = { name = dwarovkron_diamond duration = -1 } 
		}
	}
	option = {
		trigger = { 
			NOT = { has_country_flag = flag_dwarovkron_stolen_parts }
			NOT = { FROM = { is_subject_of = ROOT } } 
		}
		name = diggy.212.a_f
		add_prestige_excess_to_splendour_effect = { VAL = 10 }
		tooltip = {
			add_country_modifier = { name = dwarovkron_diamond duration = -1 } 
		}
	}
}

# Citrine
country_event = {
	id = diggy.213
	title = diggy.213.t
	desc = {
		trigger = { has_country_flag = flag_dwarovkron_stolen_parts }
		desc = diggy.213.d_s
	}
	desc = {
		trigger = { FROM = { is_subject_of = ROOT } }
		desc = diggy.213.d_g
	}
	desc = {
		trigger = { 
			NOT = { has_country_flag = flag_dwarovkron_stolen_parts }
			NOT = { FROM = { is_subject_of = ROOT } } 
		}
		desc = diggy.213.d_f
	}
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_country_modifier = dwarovkron_citrine
	}
	option = {
		trigger = { has_country_flag = flag_dwarovkron_stolen_parts }
		name = diggy.213.a_s
		add_prestige_excess_to_splendour_effect = { VAL = 10 }
		tooltip = {
			add_country_modifier = { name = dwarovkron_citrine duration = -1 } 
		}
		clr_country_flag = flag_dwarovkron_stolen_parts
	}
	option = {
		trigger = { FROM = { is_subject_of = ROOT } }
		name = diggy.213.a_g
		add_prestige_excess_to_splendour_effect = { VAL = 10 }
		tooltip = {
			add_country_modifier = { name = dwarovkron_citrine duration = -1 } 
		}
	}
	option = {
		trigger = { 
			NOT = { has_country_flag = flag_dwarovkron_stolen_parts }
			NOT = { FROM = { is_subject_of = ROOT } } 
		}
		name = diggy.213.a_f
		add_prestige_excess_to_splendour_effect = { VAL = 10 }
		tooltip = {
			add_country_modifier = { name = dwarovkron_citrine duration = -1 } 
		}
	}
}

# Ruby
country_event = {
	id = diggy.214
	title = diggy.214.t
	desc = {
		trigger = { has_country_flag = flag_dwarovkron_stolen_parts }
		desc = diggy.214.d_s
	}
	desc = {
		trigger = { FROM = { is_subject_of = ROOT } }
		desc = diggy.214.d_g
	}
	desc = {
		trigger = { 
			NOT = { has_country_flag = flag_dwarovkron_stolen_parts }
			NOT = { FROM = { is_subject_of = ROOT } } 
		}
		desc = diggy.214.d_f
	}
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_country_modifier = dwarovkron_ruby
	}
	option = {
		trigger = { has_country_flag = flag_dwarovkron_stolen_parts }
		name = diggy.214.a_s
		add_prestige_excess_to_splendour_effect = { VAL = 10 }
		tooltip = {
			add_country_modifier = { name = dwarovkron_ruby duration = -1 } 
		}
		clr_country_flag = flag_dwarovkron_stolen_parts
	}
	option = {
		trigger = { FROM = { is_subject_of = ROOT } }
		name = diggy.214.a_g
		add_prestige_excess_to_splendour_effect = { VAL = 10 }
		tooltip = {
			add_country_modifier = { name = dwarovkron_ruby duration = -1 } 
		}
	}
	option = {
		trigger = { 
			NOT = { has_country_flag = flag_dwarovkron_stolen_parts }
			NOT = { FROM = { is_subject_of = ROOT } } 
		}
		name = diggy.214.a_f
		add_prestige_excess_to_splendour_effect = { VAL = 10 }
		tooltip = {
			add_country_modifier = { name = dwarovkron_ruby duration = -1 } 
		}
	}
}

# Jade
country_event = {
	id = diggy.215
	title = diggy.215.t
	desc = {
		trigger = { has_country_flag = flag_dwarovkron_stolen_parts }
		desc = diggy.215.d_s
	}
	desc = {
		trigger = { FROM = { is_subject_of = ROOT } }
		desc = diggy.215.d_g
	}
	desc = {
		trigger = { 
			NOT = { has_country_flag = flag_dwarovkron_stolen_parts }
			NOT = { FROM = { is_subject_of = ROOT } } 
		}
		desc = diggy.215.d_f
	}
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_country_modifier = dwarovkron_jade
	}
	option = {
		trigger = { has_country_flag = flag_dwarovkron_stolen_parts }
		name = diggy.215.a_s
		add_prestige_excess_to_splendour_effect = { VAL = 10 }
		tooltip = {
			add_country_modifier = { name = dwarovkron_jade duration = -1 } 
		}
		clr_country_flag = flag_dwarovkron_stolen_parts
	}
	option = {
		trigger = { FROM = { is_subject_of = ROOT } }
		name = diggy.215.a_g
		add_prestige_excess_to_splendour_effect = { VAL = 10 }
		tooltip = {
			add_country_modifier = { name = dwarovkron_jade duration = -1 } 
		}
	}
	option = {
		trigger = { 
			NOT = { has_country_flag = flag_dwarovkron_stolen_parts }
			NOT = { FROM = { is_subject_of = ROOT } } 
		}
		name = diggy.215.a_f
		add_prestige_excess_to_splendour_effect = { VAL = 10 }
		tooltip = {
			add_country_modifier = { name = dwarovkron_jade duration = -1 } 
		}
	}
}

# Sapphire
country_event = {
	id = diggy.216
	title = diggy.216.t
	desc = {
		trigger = { has_country_flag = flag_dwarovkron_stolen_parts }
		desc = diggy.216.d_s
	}
	desc = {
		trigger = { FROM = { is_subject_of = ROOT } }
		desc = diggy.216.d_g
	}
	desc = {
		trigger = { 
			NOT = { has_country_flag = flag_dwarovkron_stolen_parts }
			NOT = { FROM = { is_subject_of = ROOT } } 
		}
		desc = diggy.216.d_f
	}
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_country_modifier = dwarovkron_sapphire
	}
	option = {
		trigger = { has_country_flag = flag_dwarovkron_stolen_parts }
		name = diggy.216.a_s
		add_prestige_excess_to_splendour_effect = { VAL = 10 }
		tooltip = {
			add_country_modifier = { name = dwarovkron_sapphire duration = -1 } 
		}
		clr_country_flag = flag_dwarovkron_stolen_parts
	}
	option = {
		trigger = { FROM = { is_subject_of = ROOT } }
		name = diggy.216.a_g
		add_prestige_excess_to_splendour_effect = { VAL = 10 }
		tooltip = {
			add_country_modifier = { name = dwarovkron_sapphire duration = -1 } 
		}
	}
	option = {
		trigger = { 
			NOT = { has_country_flag = flag_dwarovkron_stolen_parts }
			NOT = { FROM = { is_subject_of = ROOT } } 
		}
		name = diggy.216.a_f
		add_prestige_excess_to_splendour_effect = { VAL = 10 }
		tooltip = {
			add_country_modifier = { name = dwarovkron_sapphire duration = -1 } 
		}
	}
}

# Agate
country_event = {
	id = diggy.217
	title = diggy.217.t
	desc = diggy.217.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_country_modifier = dwarovkron_agate
	}
	option = {
		name = diggy.217.a
		add_prestige_excess_to_splendour_effect = { VAL = 10 }
		tooltip = {
			add_country_modifier = { name = dwarovkron_agate duration = -1 } 
		}
		clr_country_flag = flag_dwarovkron_stolen_parts
	}
}

# Full crown
country_event = {
	id = diggy.218
	title = diggy.218.t
	desc = diggy.218.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_country_modifier = dwarovkron_agate
	}
	option = {
		name = diggy.218.a
		add_prestige_excess_to_splendour_effect = { VAL = 25 }
		tooltip = {
			add_country_modifier = { name = dwarovkron_full duration = -1 } 
		}
		clr_country_flag = flag_dwarovkron_stolen_parts
	}
}

#####################################################################
##### Marrhold Tunnel .400-499
#####################################################################

###Marrhold tunnel setup
country_event = {
	id = diggy.400
	title = diggy.100.t
	desc = diggy.100.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = { months = 1 }
	
	hidden = yes
	
	trigger = {
		2931 = {
			trade_share = {
				country = ROOT
				share = 1
			}
		}
		NOT = {
			2931 = {
				has_trade_modifier = {
					who = ROOT
					key = MARRHOLD_CLOSED
				}
			}
		}
		NOT = { any_owned_province = { superregion = west_serpentspine_superregion } }
		NOT = { has_global_flag = marrhold_tunnel_opened }
	}
	
	option = {
        name = diggy.100.a
        ai_chance = { factor = 100 }
		2931 = {
			add_trade_modifier = {
				who = ROOT
				duration = -1
				power = -1000
				key = MARRHOLD_CLOSED
			}
		}
	}
}

##Marrhold-Dwarovar open
country_event = {
	id = diggy.401
	title = diggy.401.t
	desc = diggy.401.d
	picture = ARTWORK_eventPicture
	
	major = yes
	is_triggered_only = yes
	trigger = { owns = 4097 }
	
	option = {
        name = diggy.401.a
        ai_chance = { factor = 100 }
		4097 = {
			add_permanent_province_modifier = {
				name = marrhold_door
				duration = -1
			}
			center_of_trade = 1
		}
		hidden_effect = { set_global_flag = marrhold_tunnel_opened }
		every_country = {
			limit = {
				2931 = {
					has_trade_modifier = {
						who = PREV
						key = MARRHOLD_CLOSED
					}
				}
			}
			2931 = {
				remove_trade_modifier = {
					who = PREV
					key = MARRHOLD_CLOSED
				}
			}
		}
	}
}

##Dwarovar-Marrhold open
country_event = {
	id = diggy.402
	title = diggy.402.t
	desc = diggy.402.d
	picture = ARTWORK_eventPicture
	
	major = yes
	is_triggered_only = yes
	trigger = { owns = 4065 }
	
	option = {
        name = diggy.402.a
        ai_chance = { factor = 100 }
		4065 = {
			add_permanent_province_modifier = {
				name = marrhold_door
				duration = -1
			}
			center_of_trade = 1
		}
		custom_tooltip = diggy.402.tooltip
		every_country = {
			limit = {
				2931 = {
					has_trade_modifier = {
						who = PREV
						key = MARRHOLD_CLOSED
					}
				}
			}
			2931 = {
				remove_trade_modifier = {
					who = PREV
					key = MARRHOLD_CLOSED
				}
			}
		}
		hidden_effect = { 
			set_global_flag = marrhold_tunnel_opened
			country_event = { id = diggy.403 days = 3650 } #10 years
		}
	}
}

##Marrhold trade lvl 2 upgrade
country_event = {
	id = diggy.403
	title = diggy.403.t
	desc = diggy.403.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	fire_only_once = yes
	trigger = { has_global_flag = marrhold_tunnel_1 }
	
	option = {
        name = diggy.403.a
        ai_chance = { factor = 100 }
		custom_tooltip = diggy.403.tooltip
		clr_global_flag = marrhold_tunnel_1
		set_global_flag = marrhold_tunnel_2
		add_prestige_excess_to_splendour_effect = { VAL = 10 }
		hidden_effect = { country_event = { id = diggy.404 days = 7300 } } #20 years
	}
}

##Marrhold trade lvl 3 upgrade
country_event = {
	id = diggy.404
	title = diggy.404.t
	desc = diggy.404.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	fire_only_once = yes
	trigger = { has_global_flag = marrhold_tunnel_2 }
	
	option = {
        name = diggy.404.a
        ai_chance = { factor = 100 }
		custom_tooltip = diggy.404.tooltip
		clr_global_flag = marrhold_tunnel_2
		set_global_flag = marrhold_tunnel_3
		add_prestige_excess_to_splendour_effect = { VAL = 15 }
		hidden_effect = { country_event = { id = diggy.405 days = 10950 } } #30 years
	}
}

##Marrhold trade lvl 4 upgrade
country_event = {
	id = diggy.405
	title = diggy.405.t
	desc = diggy.405.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	fire_only_once = yes
	trigger = { has_global_flag = marrhold_tunnel_3 }
	
	option = {
        name = diggy.405.a
        ai_chance = { factor = 100 }
		custom_tooltip = diggy.405.tooltip
		clr_global_flag = marrhold_tunnel_3
		set_global_flag = marrhold_tunnel_4
		add_prestige_excess_to_splendour_effect = { VAL = 20 }
	}
}


##Amldihr reverse trade value thingy
country_event = {
	id = diggy.406
	title = diggy.406.t
	desc = diggy.406.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	trigger = { 
		has_global_flag = marrhold_tunnel_opened
		4065 = { owned_by = ROOT has_great_project = { type = dwarovar_marrhold_tunnel } }
		owns = 4119
	}
	
	immediate = {
		4119 = {
			set_variable = { node_value = 0 }
			set_variable = { node_traders = 0 }
			remove_province_modifier = tunnel_reverse_trade_1
			remove_province_modifier = tunnel_reverse_trade_2
			remove_province_modifier = tunnel_reverse_trade_3
			remove_province_modifier = tunnel_reverse_trade_4
			remove_province_modifier = tunnel_reverse_trade_5
			remove_province_modifier = tunnel_reverse_trade_6
			remove_province_modifier = tunnel_reverse_trade_7
			remove_province_modifier = tunnel_reverse_trade_8
			remove_province_modifier = tunnel_reverse_trade_9
			remove_province_modifier = tunnel_reverse_trade_10
		}

		every_known_country = {
			limit = {
				2931 = { has_merchant = PREV }
				NOT = {
					is_subject_of = ROOT
					capital_scope = { continent = serpentspine }
				}
			}
			4119 = { change_variable = { node_traders = 2.5 } }
		}

		4119 = {
			export_to_variable = { variable_name = node_value value = trigger_value:trade_node_value }

			trigger_switch = {
				on_trigger = has_global_flag

				marrhold_tunnel_1 = { multiply_variable = { node_value = 0.2 } }
				marrhold_tunnel_2 = { multiply_variable = { node_value = 0.3 } }
				marrhold_tunnel_3 = { multiply_variable = { node_value = 0.4 } }
				marrhold_tunnel_4 = { multiply_variable = { node_value = 0.5 } }
			}

			change_variable = { which = node_value which = node_traders }
		}
	}

	option = {
        name = diggy.406.a
        ai_chance = { factor = 100 }
		if = {
			limit = { 880 = { has_merchant = ROOT } }
			country_event = { id = diggy.407 }
		}
		else = {
			4119 = {
				if = {
					limit = { check_variable = { node_value = 200 } }
					add_permanent_province_modifier = { name = tunnel_reverse_trade_10 duration = -1 }
				}
				else_if = {
					limit = { check_variable = { node_value = 180 } }
					add_permanent_province_modifier = { name = tunnel_reverse_trade_9 duration = -1 }
				}
				else_if = {
					limit = { check_variable = { node_value = 160 } }
					add_permanent_province_modifier = { name = tunnel_reverse_trade_8 duration = -1 }
				}
				else_if = {
					limit = { check_variable = { node_value = 140 } }
					add_permanent_province_modifier = { name = tunnel_reverse_trade_7 duration = -1 }
				}
				else_if = {
					limit = { check_variable = { node_value = 120 } }
					add_permanent_province_modifier = { name = tunnel_reverse_trade_6 duration = -1 }
				}
				else_if = {
					limit = { check_variable = { node_value = 100 } }
					add_permanent_province_modifier = { name = tunnel_reverse_trade_5 duration = -1 }
				}
				else_if = {
					limit = { check_variable = { node_value = 80 } }
					add_permanent_province_modifier = { name = tunnel_reverse_trade_4 duration = -1 }
				}
				else_if = {
					limit = { check_variable = { node_value = 60 } }
					add_permanent_province_modifier = { name = tunnel_reverse_trade_3 duration = -1 }
				}
				else_if = {
					limit = { check_variable = { node_value = 40 } }
					add_permanent_province_modifier = { name = tunnel_reverse_trade_2 duration = -1 }
				}
				else = { add_permanent_province_modifier = { name = tunnel_reverse_trade_1 duration = -1 } }
			}
		}
	}
}

##don't collect in marrhold bro
country_event = {
	id = diggy.407
	title = diggy.407.t
	desc = diggy.407.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	trigger = { 880 = { has_merchant = ROOT } }
	
	option = {
        name = diggy.407.a
        ai_chance = { factor = 100 }
		custom_tooltip = diggy.407.tooltip
		hidden_effect = { country_event = { id = diggy.406 days = 60 } }
	}
}

#flavor event manager
country_event = {
	id = diggy.410
	title = diggy.410.t
	desc = diggy.410.d
	picture = CAVE_eventPicture

	hidden = yes

	trigger = {
		has_global_flag = marrhold_tunnel_opened
		owns = 4065
		4065 = { has_great_project = { type = dwarovar_marrhold_tunnel } }
	}

	mean_time_to_happen = {
		years = 20
		modifier = {
			factor = 0.75
			full_idea_group = trade_ideas
		}
	}

	option = {
		name = diggy.410.a
		
		random_list = {
			#fallback
			1 = {}

			#trade brings prosperity
			100 = { country_event = { id = diggy.411 } }

			#er-natvir benefits
			100 = {
				trigger = {
					owns = 2931
					2931 = { NOT = { has_province_modifier = tunnel_natvir_trade_5 } }
					NOT = { has_country_modifier = monstrous_nation }
				}
				country_event = { id = diggy.412 }
			}
		
			#human minorities set up shops
			100 = {
				trigger = {
					NOT = {
						has_country_modifier = monstrous_nation
						culture_group = orcish
					}
					any_known_country = {
						capital_scope = {
							OR = {
								region = south_castanor_region
								region = inner_castanor_region
								region = west_castanor_region
							}
						}
						culture_is_human = yes
					}
				}
				country_event = { id = diggy.413 }
			}

			#Ravelianism
			300 = {
				trigger = {
					is_religion_enabled = ravelian
					NOT = {
						has_global_flag = dwarovar_ravelianism_event 
						has_country_modifier = monstrous_nation
					}
				}
				set_global_flag = dwarovar_ravelianism_event
				country_event = { id = diggy.414 }
			}

			#Escann wants orc slaves
			100 = {
				trigger = { 
					NOT = { has_global_flag = orcish_slave_trade_banned_in_cannor culture_group = orcish }
					any_known_country = {
						capital_scope = { superregion = escann_superregion }
						NOT = { culture_group = orcish culture_group = goblin }
					}
				}
				country_event = { id = diggy.415 }
			}
		}
		ai_chance = { factor = 5 }
	}
}

#trade brings prosperity
country_event = {
	id = diggy.411
	title = diggy.411.t
	desc = diggy.411.d
	picture = CAVE_eventPicture

	trigger = { has_global_flag = marrhold_tunnel_opened }
	
	is_triggered_only = yes

	immediate = { hidden_effect = { 2931 = { random_trade_node_member_province = { limit = { owned_by = ROOT NOT = { province_id = 2931 } } save_event_target_as = event_province } } } }
	goto = event_province

	option = {
		name = diggy.411.a
		4119 = { add_trade_node_income = 0.1 }
		event_target:event_province = { 
			add_base_tax = 1
			add_base_production = 1
			add_base_manpower = 1
			add_prosperity = 25
		}
		ai_chance = { factor = 5 }
	}
}

#Er-Natvir benefits
country_event = {
	id = diggy.412
	title = diggy.412.t
	desc = diggy.412.d
	picture = CAVE_eventPicture

	trigger = { has_global_flag = marrhold_tunnel_opened }

	is_triggered_only = yes

	option = {
		name = diggy.412.a
		2931 = { 
			add_base_tax = 2
			if = {
				limit = { 
					NOT = { 
						has_province_modifier = tunnel_natvir_trade_1 
						has_province_modifier = tunnel_natvir_trade_2
						has_province_modifier = tunnel_natvir_trade_3
						has_province_modifier = tunnel_natvir_trade_4
						has_province_modifier = tunnel_natvir_trade_5
					}
				}
				add_permanent_province_modifier = { name = tunnel_natvir_trade_1 duration = -1 }
			}
			else = {
				trigger_switch = {
					on_trigger = has_province_modifier

					tunnel_natvir_trade_1 = { hidden_effect = { remove_province_modifier = tunnel_natvir_trade_1 } add_permanent_province_modifier = { name = tunnel_natvir_trade_2 duration = -1 } }
					tunnel_natvir_trade_2 = { hidden_effect = { remove_province_modifier = tunnel_natvir_trade_2 } add_permanent_province_modifier = { name = tunnel_natvir_trade_3 duration = -1 } }
					tunnel_natvir_trade_3 = { hidden_effect = { remove_province_modifier = tunnel_natvir_trade_3 } add_permanent_province_modifier = { name = tunnel_natvir_trade_4 duration = -1 } }
					tunnel_natvir_trade_4 = { hidden_effect = { remove_province_modifier = tunnel_natvir_trade_4 } add_permanent_province_modifier = { name = tunnel_natvir_trade_5 duration = -1 } }
				}
			}
		}
		ai_chance = { factor = 5 }
	}
}

#human minorities set up shops
country_event = {
	id = diggy.413
	title = diggy.413.t
	desc = diggy.413.d
	picture = CAVE_eventPicture

	trigger = { has_global_flag = marrhold_tunnel_opened }

	is_triggered_only = yes

	immediate = { hidden_effect = { 2931 = { random_trade_node_member_province = { limit = { owned_by = ROOT has_terrain = dwarven_road } save_event_target_as = event_province } } } }
	goto = event_province
	
	#welcome
	option = {
		name = diggy.413.a
		small_increase_of_human_tolerance_effect = yes
		event_target:event_province = {
			if = {
				limit = { has_large_human_minority_trigger = yes }
				add_base_production = 2
			}
			else = { add_base_tax = 1 add_human_minority_size_effect = yes }
		}
		ai_chance = { factor = 50 }
	}

	#lol no
	option = {
		name = diggy.413.b
		small_decrease_of_human_tolerance_effect = yes
		4119 = { add_trade_node_income = 0.25 }
		ai_chance = { factor = 5 }
	}
}

#Rise of Ravelianism
country_event = {
	id = diggy.414
	title = diggy.414.t
	desc = diggy.414.d
	picture = CAVE_eventPicture

	trigger = { has_global_flag = marrhold_tunnel_opened }

	is_triggered_only = yes

	#lol its a cube
	option = {
		name = diggy.414.a
		add_stability_or_adm_power = yes
		mission_reward_artifice_points_3 = yes
		custom_tooltip = diggy.414.tooltip
		hidden_effect = {
			every_known_country = {
				limit = { religion = ravelian }
				add_opinion = { who = ROOT modifier = insulted }
			}
		}
		ai_chance = { factor = 30 }
	}

	#we hate the precursors too!
	option = {
		name = diggy.414.b
		trigger = { culture_group = dwarven }
		highlight = yes
		add_prestige_excess_to_splendour_effect = { VAL = 15 }
		mission_reward_artifice_points_3 = yes
		add_country_modifier = { name = tunnel_precursor_hate duration = 9125 }
		ai_chance = { factor = 50 }
	}

	#let's be friends! not really i just want capacity
	option = {
		name = diggy.414.c
		mission_reward_artifice_points_5 = yes
		reduce_stability_or_adm_power = yes
		if = {
			limit = { has_estate = estate_church }
			add_estate_loyalty = { estate = estate_church loyalty = -10 }
		}
		ai_chance = { factor = 25 }
	}
}

#Escann wants orc slaves
country_event = {
	id = diggy.415
	title = diggy.415.t
	desc = diggy.415.d
	picture = CAVE_eventPicture

	trigger = { has_global_flag = marrhold_tunnel_opened }

	is_triggered_only = yes

	immediate = { 
		hidden_effect = { 
			random_owned_province = { limit = { OR = { culture_group = orcish has_orcish_minority_trigger = yes } } save_event_target_as = event_province }
			random_known_country = { limit = { capital_scope = { superregion = escann_superregion } NOT = { culture_group = orcish culture_group = goblin } } save_event_target_as = event_country } 
		} 
	}
	goto = event_province
	
	#take them
	option = {
		name = diggy.415.a
		trigger = { has_saved_event_target = event_province }
		large_decrease_of_orcish_tolerance_effect = yes
		event_target:event_province = {
			if = {
				limit = { culture_group = orcish }
				change_culture = ROOT
				change_religion = ROOT 
			}
			else = { remove_orcish_minority_size_effect = yes }
		}
		event_target:event_country = {
			random_owned_province = {
				limit = { superregion = escann_superregion NOT = { culture_group = orcish } }
				add_orcish_minority_size_effect = yes
			}
		}
		4119 = { add_trade_node_income = 0.2 }
		ai_chance = { factor = 5 }
	}

	#no slaves
	option = {
		name = diggy.415.b
		add_prestige_excess_to_splendour_effect = { VAL = 5 }
		if = {
			limit = { has_estate = estate_church }
			add_estate_loyalty = { estate = estate_church loyalty = 10 }
		}
		ai_chance = { factor = 5 }
	}
}

#####################################################################
##### Flavor Events .500+
#####################################################################
####digging specific events 500-550
#Gaz an explosion
country_event = {
	id = diggy.500
	title = diggy.500.t
	desc = diggy.500.d
	picture = VILLAGE_BURNING_eventPicture
	
	mean_time_to_happen = {
		months = 150
		
		modifier = {
			factor = 0.5
			NOT = { has_country_modifier = dwarven_administration }
		}
	}
	
	trigger = {
		has_country_modifier = dig_explosive
		has_country_flag = is_digging
		capital_scope = {
			OR = {
				has_terrain = dwarven_hold
				has_terrain = dwarven_hold_surface
			}
		}
	}
	
	option = {
        name = diggy.500.a
        ai_chance = { factor = 100 }
		custom_tooltip = gaz_explosion_tooltip
		capital_scope = {
			add_base_manpower = -1
			add_base_production = -1
			add_base_tax = -1
			random = {
				chance = 50
				
				add_base_manpower = -1
				add_base_production = -1
				add_base_tax = -1
			}
			
			random = {
				chance = 5
				
				add_base_manpower = -1
				add_base_production = -1
				add_base_tax = -1
			}
		}
		remove_country_modifier = dig_explosive
		hidden_effect = { capital_scope = { change_variable = { cons_prog = -0.1 } } }
		tooltip = { capital_scope = { change_variable = { cons_prog = -0.2 } } }
	}
}
#Cave Collapse
country_event = {
	id = diggy.501
	title = diggy.501.t
	desc = diggy.501.d
	picture = BANKRUPTCY_eventPicture
	
	mean_time_to_happen = {
		years = 20
		
		modifier = {
			factor = 0.70
			NOT = { has_country_modifier = dwarven_administration }
		}
	}
	
	trigger = {
		has_country_flag = is_digging
		capital_scope = {
			OR = {
				has_terrain = dwarven_hold
				has_terrain = dwarven_hold_surface
			}
			NOT = { has_province_flag = krak_immunity }
		}
	}
	
	option = {
        name = diggy.501.a
        ai_chance = { factor = 90 }
		add_prestige = -5
		capital_scope = {
			random = {
				chance = 50
				add_base_manpower = -1
			}
			random = {
				chance = 50
				add_base_tax = -1
			}
			random = {
				chance = 50
				add_base_production = -1
			}
		}
		hidden_effect = { capital_scope = { change_variable = { cons_prog = -0.05 } } }
		tooltip = { capital_scope = { change_variable = { cons_prog = -0.1 } } }
	}
}

##Easily diggable rock
country_event = {
	id = diggy.502
	title = diggy.502.t
	desc = diggy.502.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 20
	}
	
	trigger = {
		has_country_flag = is_digging
		NOT = { capital_scope = { has_province_modifier = easy_rock } }
		NOT = { capital_scope = { has_province_modifier = hard_rock } }
		capital_scope = {
			OR = {
				has_terrain = dwarven_hold
				has_terrain = dwarven_hold_surface
			}
		}
	}
	
	option = {
        name = diggy.502.a
        ai_chance = { factor = 100 }
		capital_scope = {
			add_province_modifier = {
				name = easy_rock
				duration = 1800
			}
		}
		hidden_effect = { capital_scope = { change_variable = { cons_prog = 0.025 } } }
		tooltip = { capital_scope = { change_variable = { cons_prog = 0.05 } } }
	}
}
##Hard rock to dig
country_event = {
	id = diggy.503
	title = diggy.503.t
	desc = diggy.503.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 30
		
		modifier = {
			factor = 0.5
			NOT = { has_country_modifier = dwarven_administration }
		}
	}
	
	trigger = {
		has_country_flag = is_digging
		NOT = { capital_scope = { has_province_modifier = easy_rock } }
		NOT = { capital_scope = { has_province_modifier = hard_rock } }
		capital_scope = {
			OR = {
				has_terrain = dwarven_hold
				has_terrain = dwarven_hold_surface
			}
		}
	}
	
	option = {
        name = diggy.503.a
        ai_chance = { factor = 100 }
		capital_scope = {
			add_province_modifier = {
				name = hard_rock
				duration = 1800
			}
		}
		hidden_effect = { capital_scope = { change_variable = { cons_prog = -0.025 } } }
		tooltip = { capital_scope = { change_variable = { cons_prog = -0.05 } } }
	}
}

##Discover Damestear
country_event = {
	id = diggy.504
	title = diggy.504.t
	desc = diggy.504.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 300
		modifier = {
			factor = 0.95
			capital_scope = { has_province_modifier = dig_7 }
		}
		modifier = {
			factor = 0.9
			capital_scope = { has_province_modifier = dig_8 }
		}
		modifier = {
			factor = 0.85
			capital_scope = { has_province_modifier = dig_9 }
		}
		modifier = {
			factor = 0.8
			OR = {
				capital_scope = { has_province_modifier = dig_10 }
				capital_scope = { has_province_modifier = dig_11 }
			}
		}
	}
	
	trigger = {
		has_country_flag = is_digging
		capital_scope = {
			OR = {
				has_terrain = dwarven_hold
				has_terrain = dwarven_hold_surface
			}
			NOT = { trade_goods = damestear }
			NOT = { trade_goods = coal }
			NOT = { has_province_flag = krak_immunity }
			NOT = { has_province_modifier = krakazol_amethyst_ale }
		}
	}
	
	#Exploit it
	option = {
        name = diggy.504.a
        ai_chance = { factor = 50 }
		add_prestige = 15
		capital_scope = {
			#hidden_effect = { set_province_flag = permanent_damestear } #no perma damestear in the dwarovar
			save_trade_goods = yes
			change_trade_goods = damestear
			random = {
				chance = 50
				add_permanent_province_modifier = {
					name = huge_damestear
					duration = 12775
				}
			}
		}
	}
	#Leave it
	option = {
        name = diggy.504.b
        ai_chance = { factor = 50 }
		add_prestige = -15
		random = {
			chance = 75
			reduce_stability_or_adm_power = yes
		}
	}
}
##Damestear Explosion
country_event = {
	id = diggy.505
	title = diggy.505.t
	desc = diggy.505.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 150
		modifier = {
			factor = 0.75
			capital_scope = {
				trade_goods = damestear
				has_province_modifier = huge_damestear
			}
		}
		
		modifier = {
			factor = 0.75
			NOT = { has_country_modifier = dwarven_administration }
		}
	}
	
	trigger = {
		has_country_flag = dig_explosive
		capital_scope = { 
			development = 80
			trade_goods = damestear 
			OR = {
				has_terrain = dwarven_hold
				has_terrain = dwarven_hold_surface
			}
		}
	}
	
	#Such horror...
	option = {
        name = diggy.505.a
        ai_chance = { factor = 100 }
		hidden_effect = { clr_country_flag = dig_explosive }
		add_prestige = -10
		reduce_legitimacy_medium_effect = yes
		add_stability = -2
		capital_scope = {
			add_base_manpower = -3
			add_base_tax = -3
			add_base_production = -3
			set_from_saved_trade_goods = yes
			if = {
				limit = { has_province_modifier = dig_6 }
				remove_province_modifier = dig_6
				add_permanent_province_modifier = {
					name = dig_5
					duration = -1
				}
			}
			else_if = {
				limit = { has_province_modifier = dig_7 }
				remove_province_modifier = dig_7
				add_permanent_province_modifier = {
					name = dig_6
					duration = -1
				}
			}
			else_if = {
				limit = { has_province_modifier = dig_8 }
				remove_province_modifier = dig_8
				add_permanent_province_modifier = {
					name = dig_7
					duration = -1
				}
			}
			else_if = {
				limit = { has_province_modifier = dig_9 }
				remove_province_modifier = dig_9
				add_permanent_province_modifier = {
					name = dig_8
					duration = -1
				}
			}
			else_if = {
				limit = { has_province_modifier = dig_10 }
				remove_province_modifier = dig_10
				add_permanent_province_modifier = {
					name = dig_9
					duration = -1
				}
			}
			else_if = {
				limit = { has_province_modifier = dig_11 }
				remove_province_modifier = dig_11
				add_permanent_province_modifier = {
					name = dig_10
					duration = -1
				}
			}
		}
		hidden_effect = { capital_scope = { change_variable = { cons_prog = -0.25 } } }
		tooltip = { capital_scope = { change_variable = { cons_prog = -0.5 } } }
	}
}



##Cave Goblin cavern found
country_event = {
	id = diggy.506
	title = diggy.506.t
	desc = diggy.506.d
	picture = ARTWORK_eventPicture
	goto = province
	
	mean_time_to_happen = {
		years = 25
		modifier = {
			factor = 0.9
			capital_scope = { superregion = west_serpentspine_superregion }
		}
		
		modifier = {
			factor = 1.5
			has_country_modifier = remnant_army
		}
	}
	
	immediate = {
		hidden_effect = {
			capital_scope = { save_event_target_as = province }
		}
	}
	
	trigger = {
		has_country_flag = is_digging
		NOT = { culture_group = goblin }
		capital_scope = {  
			OR = {
				has_terrain = dwarven_hold
				has_terrain = dwarven_hold_surface
			}
		}
	}
	
	#Prepare yourself
	option = {
        name = diggy.506.a
        ai_chance = { factor = 100 }
		capital_scope = {
			spawn_dwarovar_goblin_rebels = { size = 1.5 }
		}
	}
}
##Cave Orc cavern found
country_event = {
	id = diggy.507
	title = diggy.507.t
	desc = diggy.507.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 30
		
		modifier = {
			factor = 1.5
			has_country_modifier = remnant_army
		}
	}
	
	trigger = {
		has_country_flag = is_digging
		capital_scope = {  
			province_group = hold_province
			continent = serpentspine
		}
	}
	
	#Prepare yourself
	option = {
        name = diggy.507.a
        ai_chance = { factor = 100 }
		capital_scope = {
			spawn_dwarovar_orc_rebels = { size = 1 }
		}
	}
}

#Beautiful cavern
country_event = {
	id = diggy.508
	title = diggy.508.t
	desc = diggy.508.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 50
		modifier = {
			factor = 0.9
			capital_scope = { superregion = west_serpentspine_superregion }
		}
	}
	
	trigger = {
		has_country_flag = is_digging
		NOT = { capital_scope = { has_province_modifier = beautiful_cave } }
		capital_scope = {
			OR = {
				has_terrain = dwarven_hold
				has_terrain = dwarven_hold_surface
			}
		}
	}
	
	#Sell everything
	option = {
        name = diggy.508.a
        ai_chance = { factor = 10 }
		add_prestige = -5
		reduce_legitimacy_small_effect = yes
		add_years_of_income = 2
	}
	
	#Make it a touristic
	option = {
        name = diggy.508.b
        ai_chance = { factor = 90 }
		add_prestige = 5
		capital_scope = {
			add_permanent_province_modifier = {
				name = beautiful_cave
				duration = -1
			}
		}
	}
}
#Cavern benefit
country_event = {
	id = diggy.509
	title = diggy.509.t
	desc = diggy.509.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 10
		modifier = {
			factor = 0.9
			capital_scope = { superregion = west_serpentspine_superregion }
		}
	}
	
	trigger = {
		capital_scope = { has_province_modifier = beautiful_cave }
	}
	
	#Profit
	option = {
        name = diggy.509.a
        ai_chance = { factor = 1 }
		add_prestige = 5
		increase_legitimacy_small_effect = yes
		add_years_of_income = 0.2
	}
	
	#Leader has a genius spark, partially creating fear in the nation
	option = {
        name = diggy.509.b
        ai_chance = { factor = 100 }
		highlight = yes
		trigger = {
			OR = {
				NOT = { adm = 1 }
				NOT = { dip = 1 }
				NOT = { mil = 1 }
			}
			has_regency = no
		}
		custom_tooltip = spark_tooltip
		reduce_legitimacy_huge_effect = yes
		add_stability = -3
		change_adm = 6
		change_mil = 6
		change_dip = 6
	}
}

#unstable foundations
country_event = {
	id = diggy.510
	title = diggy.510.t
	desc = diggy.510.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 50
		
		modifier = {
			factor = 0.5
			NOT = { has_country_modifier = dwarven_administration }
		}
	}
	
	trigger = {
		has_country_flag = is_digging
		capital_scope = { has_province_modifier = beautiful_cave }
		capital_scope = {
			OR = {
				has_terrain = dwarven_hold
				has_terrain = dwarven_hold_surface
			}
			NOT = { has_province_flag = krak_immunity }
		}
	}
	
	#Profit
	option = {
        name = diggy.510.a
        ai_chance = { factor = 100 }
		capital_scope = {
			random = {
				chance = 50
				add_base_manpower = -1
			}
			random = {
				chance = 50
				add_base_tax = -1
			}
			random = {
				chance = 50
				add_base_production = -1
			}
			random = {
				chance = 20
				remove_province_modifier = beautiful_cave
			}
			add_devastation = 15
		}
		random_list = {
			10 = { add_stability = -2 }
			30 = { }
			60 = { reduce_stability_or_adm_power = yes }
		}
		hidden_effect = { capital_scope = { change_variable = { cons_prog = -0.075 } } }
		tooltip = { capital_scope = { change_variable = { cons_prog = -0.15 } } }
	}
}

#Serpentsmite
country_event = {
	id = diggy.511
	title = diggy.511.t
	desc = diggy.511.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 150
	}
	
	trigger = {
		has_country_flag = is_digging
		capital_scope = {
			province_group = hold_province
			NOT = { has_province_flag = serpentsmited }
			NOT = { has_province_modifier = krakazol_amethyst_ale }
			NOT = { has_province_flag = orlghelovar_glass_hold }
			
			continent = serpentspine
		}
	}
	
	immediate = {
		hidden_effect = {
			capital_scope = {
				add_base_manpower = -3
				add_base_tax = -3
				add_base_production = -3
				if = {
					limit = {
						NOT = {
							province_id = 2914 #verkal gulan
							province_id = 4236 #mithradhum
							province_id = 4093 #arg-ordstun
						}
					}
					change_trade_goods = unknown
				}
				if = {
					limit = { has_province_modifier = dig_6 }
					remove_province_modifier = dig_6
					add_permanent_province_modifier = {
						name = dig_5
						duration = -1
					}
				}
				else_if = {
					limit = { has_province_modifier = dig_7 }
					remove_province_modifier = dig_7
					add_permanent_province_modifier = {
						name = dig_6
						duration = -1
					}
				}
				else_if = {
					limit = { has_province_modifier = dig_8 }
					remove_province_modifier = dig_8
					add_permanent_province_modifier = {
						name = dig_7
						duration = -1
					}
				}
				else_if = {
					limit = { has_province_modifier = dig_9 }
					remove_province_modifier = dig_9
					add_permanent_province_modifier = {
						name = dig_8
						duration = -1
					}
				}
				else_if = {
					limit = { has_province_modifier = dig_10 }
					remove_province_modifier = dig_10
					add_permanent_province_modifier = {
						name = dig_9
						duration = -1
					}
				}
				else_if = {
					limit = { has_province_modifier = dig_11 }
					remove_province_modifier = dig_11
					add_permanent_province_modifier = {
						name = dig_10
						duration = -1
					}
				}
				set_province_flag = serpentsmited
			}
		}
	}
	
	#Untaped Ore
	option = {
        name = diggy.511.a
        ai_chance = { factor = 90 }
		reduce_stability_or_adm_power = yes
		capital_scope = {
			if = {
				limit = { 
					NOT = {
						province_id = 2914 #verkal gulan
						province_id = 4236 #mithradhum
						province_id = 4093 #arg-ordstun
					}
				}
				random_list = {
					20 = { change_trade_goods = mithril }
					35 = { change_trade_goods = iron }
					45 = { change_trade_goods = copper }
				}
			}
			add_permanent_province_modifier = {
				name = pristine_deposit
				duration = 29200
			}
			if = {
				limit = {
					NOT = {
						province_id = 2914 #verkal gulan
						province_id = 4236 #mithradhum
						province_id = 4093 #arg-ordstun
					}
					has_advanced_hold_infrastructure = yes
				}
				clr_hold_advanced_infrastructure = yes
			}
			hidden_effect = { change_variable = { cons_prog = -0.125 } }
			tooltip = { change_variable = { cons_prog = -0.25 } }
		}
	}
	
	option = {
        name = diggy.511.b
        ai_chance = { factor = 10 }
		add_stability_or_adm_power = yes
		add_stability_or_adm_power = yes
		capital_scope = {
			hidden_effect = { change_variable = { cons_prog = -0.125 } }
			tooltip = { change_variable = { cons_prog = -0.25 } }
			if = {
				limit = { 
					NOT = {
						province_id = 2914 #verkal gulan
						province_id = 4236 #mithradhum
						province_id = 4093 #arg-ordstun
					}
				}
				change_trade_goods = unknown
			}
		}
	}
}

#magma veins
country_event = {
	id = diggy.512
	title = diggy.512.t
	desc = diggy.512.d
	picture = TRADE_GOODS_METALS_AND_MINING_EQUIPENT_eventPicture
	
	mean_time_to_happen = {
		years = 50
		
		modifier = {
			factor = 0.5
			capital_scope = { province_id = 4039 } #gor burad
		}
	}
	
	trigger = {
		has_country_flag = is_digging
		capital_scope = {
			OR = {
				has_terrain = dwarven_hold
				has_terrain = dwarven_hold_surface
			}
		}
	}
	
	#try to tap them
	option = {
		name = diggy.512.a
		ai_chance = { factor = 100 }
		capital_scope = {
			random = {
				chance = 25
				add_base_manpower = -1
			}
			random = {
				chance = 25
				add_base_tax = -1
			}
			random = {
				chance = 25
				add_base_production = -1
			}
		}
		hidden_effect = { capital_scope = { change_variable = { cons_prog = 0.05 } } }
		tooltip = { capital_scope = { change_variable = { cons_prog = 0.1 } } }
	}

	#dig around
	option = {
		name = diggy.512.b
		ai_chance = { factor = 50 }
		hidden_effect = { capital_scope = { change_variable = { cons_prog = -0.025 } } }
		tooltip = { capital_scope = { change_variable = { cons_prog = -0.05 } } }
	}
}

# Reaching level 10 on level 10 hold
country_event = {
	id = diggy.513
	title = diggy.513.t
	picture = DARK_EXPEDITION_eventPicture
	major = yes
	major_trigger = { capital_scope = { province_group = hold_province } }
	is_triggered_only = yes
	
	desc = { # first dwarf
		trigger = {
			ROOT = { culture_group = dwarven }
			NOT = { has_global_flag = global_flag_hold_level_10_hit }
		}
		desc = diggy.513.d1
	}
	desc = { # not first dwarf
		trigger = {
			ROOT = { culture_group = dwarven }
			has_global_flag = global_flag_hold_level_10_hit
		}
		desc = diggy.513.d2
	}
	desc = { # other race
		trigger = {
			NOT = { ROOT = { culture_group = dwarven } }
		}
		desc = diggy.513.d3
	}
	
	option = { #we are the first!
		name = diggy.513.a
		trigger = {
			ROOT = { culture_group = dwarven }
			NOT = { has_global_flag = global_flag_hold_level_10_hit }
		}
		add_stability_or_adm_power = yes
		add_prestige_excess_to_splendour_effect = { VAL = 50 }
		set_global_flag = global_flag_hold_level_10_hit
	}
	option = { #we are not the first.
		name = diggy.513.b
		trigger = {
			ROOT = { culture_group = dwarven }
			has_global_flag = global_flag_hold_level_10_hit
		}
		add_stability_or_adm_power = yes
		add_prestige_excess_to_splendour_effect = { VAL = 10 }
	}
	option = { #we are goblins or kobolds or something
		name = diggy.513.c
		trigger = {
			NOT = { ROOT = { culture_group = dwarven } }
		}
		add_stability_or_adm_power = yes
		add_prestige_excess_to_splendour_effect = { VAL = 10 }
		set_global_flag = global_flag_hold_level_10_hit
	}
}

# Reaching level 10 on level 11 hold
country_event = {
	id = diggy.514
	title = diggy.514.t
	picture = DARK_EXPEDITION_eventPicture
	is_triggered_only = yes
	
	desc = { # dwarf
		trigger = {
			ROOT = { culture_group = dwarven }
		}
		desc = diggy.514.d1
	}
	desc = { # other race
		trigger = {
			NOT = { ROOT = { culture_group = dwarven } }
		}
		desc = diggy.514.d2
	}
	
	option = { #we need to go deeper as dwarves
		name = diggy.514.a
		trigger = {
			ROOT = { culture_group = dwarven }
		}
		add_prestige_excess_to_splendour_effect = { VAL = 20 }
		set_global_flag = global_flag_hold_level_10_hit
	}
	option = { #we need to go deeper anyway
		name = diggy.514.b
		trigger = {
			NOT = { ROOT = { culture_group = dwarven } }
		}
		add_prestige_excess_to_splendour_effect = { VAL = 20 }
		set_global_flag = global_flag_hold_level_10_hit
	}
}

# Reaching level 11
country_event = {
	id = diggy.515
	title = diggy.515.t
	picture = DARK_EXPEDITION_eventPicture
	major = yes
	major_trigger = { capital_scope = { province_group = hold_province } }
	is_triggered_only = yes
	
	desc = { # first dwarf
		trigger = {
			ROOT = { culture_group = dwarven }
			NOT = { has_global_flag = global_flag_hold_level_11_hit }
		}
		desc = diggy.515.d1
	}
	desc = { # not first dwarf
		trigger = {
			ROOT = { culture_group = dwarven }
			has_global_flag = global_flag_hold_level_11_hit
		}
		desc = diggy.515.d2
	}
	desc = { # other race
		trigger = {
			NOT = { ROOT = { culture_group = dwarven } }
		}
		desc = diggy.515.d3
	}
	
	option = { #we are the first!
		name = diggy.515.a
		trigger = {
			ROOT = { culture_group = dwarven }
			NOT = { has_global_flag = global_flag_hold_level_11_hit }
		}
		add_stability_or_adm_power = yes
		add_prestige_excess_to_splendour_effect = { VAL = 50 }
		set_global_flag = global_flag_hold_level_11_hit
	}
	option = { #we are not the first.
		name = diggy.515.b
		trigger = {
			ROOT = { culture_group = dwarven }
			has_global_flag = global_flag_hold_level_11_hit
		}
		add_stability_or_adm_power = yes
		add_prestige_excess_to_splendour_effect = { VAL = 10 }
	}
	option = { #we are goblins or kobolds or something
		name = diggy.515.c
		trigger = {
			NOT = { ROOT = { culture_group = dwarven } }
		}
		add_stability_or_adm_power = yes
		add_prestige_excess_to_splendour_effect = { VAL = 10 }
		set_global_flag = global_flag_hold_level_11_hit
	}
}

##use production to dig
country_event = {
	id = diggy.516
	title = diggy.516.t
	desc = diggy.516.d
	picture = CITY_DEVELOPMENT_eventPicture
	
	mean_time_to_happen = {
		years = 10
	}
	
	trigger = {
		has_country_flag = is_digging
		NOT = { has_country_flag = dig_prod }
	}
	
	immediate = {
		set_country_flag = dig_prod
	}
	
	option = {
        name = diggy.516.a
        ai_chance = { factor = 100 }
		add_adm_power = -50
		add_country_modifier = {
			name = dig_prod
			duration = -1
			desc = until_dig_complete
		}
		hidden_effect = { capital_scope = { change_variable = { cons_prog = 0.025 } } }
		tooltip = { capital_scope = { change_variable = { cons_prog = 0.05 } } }
	}
	
	option = {
		name = diggy.516.b
		ai_chance = { factor = 100 }
	}
}

##beautiful hold
country_event = {
	id = diggy.517
	title = diggy.517.t
	desc = diggy.517.d
	picture = GOLDEN_CITY_eventPicture
	
	mean_time_to_happen = {
		years = 8
	}
	
	trigger = {
		has_country_flag = is_digging
		NOT = { has_country_flag = dig_culture }
		capital_scope = {
			OR = {
				has_terrain = dwarven_hold
				has_terrain = dwarven_hold_surface
			}
		}
	}
	
	immediate = {
		set_country_flag = dig_culture
	}
	
	option = {
        name = diggy.517.a
        ai_chance = { factor = 90 }
		add_adm_power = -80
		add_dip_power = -35
		add_mil_power = -25
		add_prestige = 20
		random = {
			chance = 30
			add_stability_or_adm_power = yes
		}
		hidden_effect = { capital_scope = { change_variable = { cons_prog = -0.025 } } }
		tooltip = { capital_scope = { change_variable = { cons_prog = -0.05 } } }
	}
	
	option = {
		name = diggy.517.b
		ai_chance = { factor = 10 }
		add_prestige = -15
		random = {
			chance = 15
			reduce_stability_or_adm_power = yes
		}
		random = {
			chance = 5
			add_country_modifier = {
				name = dig_not_culture
				duration = 1460
			}
		}
	}
}

##Use the army
country_event = {
	id = diggy.518
	title = diggy.518.t
	desc = diggy.518.d
	picture = CONQUEST__eventPicture
	
	mean_time_to_happen = {
		years = 10
	}
	
	trigger = {
		has_country_flag = is_digging
		NOT = { has_country_flag = dig_manpower }
		capital_scope = {
			OR = {
				has_terrain = dwarven_hold
				has_terrain = dwarven_hold_surface
			}
		}
	}
	
	immediate = {
		set_country_flag = dig_manpower
	}
	
	option = {
        name = diggy.518.a
        ai_chance = { factor = 100 }
		add_mil_power = -50
		add_country_modifier = {
			name = dig_manpower
			duration = -1
			desc = until_dig_complete
		}
		hidden_effect = { capital_scope = { change_variable = { cons_prog = 0.025 } } }
		tooltip = { capital_scope = { change_variable = { cons_prog = 0.05 } } }
	}
	
	option = {
		name = diggy.518.b
		ai_chance = { factor = 100 }
	}
}

### Dig through rock
#Apatite 5Mohs
country_event = {
	id = diggy.519
	title = diggy.519.t
	desc = diggy.519.d
	picture = FORT_eventPicture
	
	mean_time_to_happen = {
		years = 5
	}
	
	trigger = {
		has_country_flag = is_digging
		NOT = { has_country_flag = dig_apatite }
		capital_scope = {
			OR = {
				has_province_modifier = dig_3
				has_province_modifier = dig_4
				has_province_modifier = dig_5
				has_province_modifier = dig_6
				has_province_modifier = dig_7
				has_province_modifier = dig_8
				has_province_modifier = dig_9
			}
		}
	}
	
	immediate = {
		set_country_flag = dig_apatite
	}
	#Dig through
	option = {
        name = diggy.519.a
        ai_chance = { factor = 100 }
		custom_tooltip = dig_through_tooltip
		add_adm_power = -50
		if = {
			limit = { 
				has_global_flag = dd_grumhardhum
				any_owned_province = { has_great_project = { type = dd_grumhardhum tier = 3 } } 
			}
			add_treasury = -175
		}
		else_if = {
			limit = { ai = no }
			add_treasury = -350
		}
		hidden_effect = {
			set_country_flag = dig_through
			clr_country_flag = not_dig_through
		}
		hidden_effect = { capital_scope = { change_variable = { cons_prog = 0.075 } } }
		tooltip = { capital_scope = { change_variable = { cons_prog = 0.15 } } }
	}
	#Make detour
	option = {
		name = diggy.519.b
		ai_chance = { factor = 0 }
		custom_tooltip = not_dig_through_tooltip
		add_stability_or_adm_power = yes
		hidden_effect = {
			set_country_flag = not_dig_through
			clr_country_flag = dig_through
		}
		hidden_effect = { capital_scope = { change_variable = { cons_prog = -0.075 } } }
		tooltip = { capital_scope = { change_variable = { cons_prog = -0.15 } } }
	}
}

#orthoclase 6Mohs
country_event = {
	id = diggy.520
	title = diggy.520.t
	desc = diggy.520.d
	picture = FORT_eventPicture
	
	mean_time_to_happen = {
		years = 5
	}
	
	trigger = {
		has_country_flag = is_digging
		has_country_flag = dig_apatite
		NOT = { has_country_flag = dig_ortho }
		capital_scope = {
			OR = {
				has_province_modifier = dig_4
				has_province_modifier = dig_5
				has_province_modifier = dig_6
				has_province_modifier = dig_7
				has_province_modifier = dig_8
				has_province_modifier = dig_9
			}
		}
	}
	
	immediate = {
		set_country_flag = dig_ortho
	}
	#Dig through
	option = {
        name = diggy.520.a
        ai_chance = { factor = 100 }
		custom_tooltip = dig_through_tooltip
		add_adm_power = -50
		if = {
			limit = { 
				has_global_flag = dd_grumhardhum
				any_owned_province = { has_great_project = { type = dd_grumhardhum tier = 3 } } 
			}
			add_treasury = -375
		}
		else_if = {
			limit = { ai = no }
			add_treasury = -750
		}
		hidden_effect = {
			set_country_flag = dig_through
			clr_country_flag = not_dig_through
		}
		hidden_effect = { capital_scope = { change_variable = { cons_prog = 0.075 } } }
		tooltip = { capital_scope = { change_variable = { cons_prog = 0.15 } } }
	}
	#Make detour
	option = {
		name = diggy.520.b
		ai_chance = { factor = 0 }
		custom_tooltip = not_dig_through_tooltip
		add_stability_or_adm_power = yes
		hidden_effect = {
			set_country_flag = not_dig_through
			clr_country_flag = dig_through
		}
		hidden_effect = { capital_scope = { change_variable = { cons_prog = -0.075 } } }
		tooltip = { capital_scope = { change_variable = { cons_prog = -0.15 } } }
	}
}

#(iron) Pyrite 6-7Mohs
country_event = {
	id = diggy.521
	title = diggy.521.t
	desc = diggy.521.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 5
	}
	
	trigger = {
		has_country_flag = is_digging
		has_country_flag = dig_ortho
		NOT = { has_country_flag = dig_pyrite }
		capital_scope = {
			OR = {
				has_province_modifier = dig_6
				has_province_modifier = dig_7
				has_province_modifier = dig_8
				has_province_modifier = dig_9
			}
		}
	}
	
	immediate = {
		set_country_flag = dig_pyrite
	}
	#Dig through
	option = {
        name = diggy.521.a
        ai_chance = { factor = 100 }
		custom_tooltip = dig_through_tooltip
		add_adm_power = -50
		if = {
			limit = { 
				has_global_flag = dd_grumhardhum
				any_owned_province = { has_great_project = { type = dd_grumhardhum tier = 3 } } 
			}
			add_treasury = -1125
		}
		else_if = {
			limit = { ai = no }
			add_treasury = -2250
		}
		hidden_effect = {
			set_country_flag = dig_through
			clr_country_flag = not_dig_through
		}
		hidden_effect = { capital_scope = { change_variable = { cons_prog = 0.075 } } }
		tooltip = { capital_scope = { change_variable = { cons_prog = 0.15 } } }
	}
	#Make detour
	option = {
		name = diggy.521.b
		ai_chance = { factor = 0 }
		custom_tooltip = not_dig_through_tooltip
		add_stability_or_adm_power = yes
		hidden_effect = {
			set_country_flag = not_dig_through
			clr_country_flag = dig_through
		}
		hidden_effect = { capital_scope = { change_variable = { cons_prog = -0.075 } } }
		tooltip = { capital_scope = { change_variable = { cons_prog = -0.15 } } }
	}
}

#Spinel 7.5-8Mohs
country_event = {
	id = diggy.522
	title = diggy.522.t
	desc = diggy.522.d
	picture = FORT_eventPicture
	
	mean_time_to_happen = {
		years = 5
	}
	
	trigger = {
		has_country_flag = is_digging
		has_country_flag = dig_pyrite
		NOT = { has_country_flag = dig_spinel }
		capital_scope = {
			OR = {
				has_province_modifier = dig_7
				has_province_modifier = dig_8
				has_province_modifier = dig_9
			}
		}
	}
	
	immediate = {
		set_country_flag = dig_spinel
	}
	#Dig through
	option = {
        name = diggy.522.a
        ai_chance = { factor = 100 }
		custom_tooltip = dig_through_tooltip
		add_adm_power = -50
		if = {
			limit = { 
				has_global_flag = dd_grumhardhum
				any_owned_province = { has_great_project = { type = dd_grumhardhum tier = 3 } } 
			}
			add_treasury = -1875
		}
		else_if = {
			limit = { ai = no }
			add_treasury = -3750
		}
		hidden_effect = {
			set_country_flag = dig_through
			clr_country_flag = not_dig_through
		}
		hidden_effect = { capital_scope = { change_variable = { cons_prog = 0.075 } } }
		tooltip = { capital_scope = { change_variable = { cons_prog = 0.15 } } }
	}
	#Make detour
	option = {
		name = diggy.522.b
		ai_chance = { factor = 0 }
		custom_tooltip = not_dig_through_tooltip
		add_stability_or_adm_power = yes
		hidden_effect = {
			set_country_flag = not_dig_through
			clr_country_flag = dig_through
		}
		hidden_effect = { capital_scope = { change_variable = { cons_prog = -0.075 } } }
		tooltip = { capital_scope = { change_variable = { cons_prog = -0.15 } } }
	}
}

#Corundum 9Mohs
country_event = {
	id = diggy.523
	title = diggy.523.t
	desc = diggy.523.d
	picture = FORT_eventPicture
	
	mean_time_to_happen = {
		years = 5
	}
	
	trigger = {
		has_country_flag = is_digging
		has_country_flag = dig_spinel
		NOT = { has_country_flag = dig_corundum }
		capital_scope = {
			OR = {
				has_province_modifier = dig_8
				has_province_modifier = dig_9
			}
		}
	}
	
	immediate = {
		set_country_flag = dig_corundum
	}
	#Dig through
	option = {
        name = diggy.523.a
        ai_chance = { factor = 100 }
		custom_tooltip = dig_through_tooltip
		add_adm_power = -50
		if = {
			limit = { 
				has_global_flag = dd_grumhardhum
				any_owned_province = { has_great_project = { type = dd_grumhardhum tier = 3 } } 
			}
			add_treasury = -2625
		}
		else_if = {
			limit = { ai = no }
			add_treasury = -5250
		}
		hidden_effect = {
			set_country_flag = dig_through
			clr_country_flag = not_dig_through
		}
		hidden_effect = { capital_scope = { change_variable = { cons_prog = 0.075 } } }
		tooltip = { capital_scope = { change_variable = { cons_prog = 0.15 } } }
	}
	#Make detour
	option = {
		name = diggy.523.b
		ai_chance = { factor = 0 }
		custom_tooltip = not_dig_through_tooltip
		add_stability_or_adm_power = yes
		hidden_effect = {
			set_country_flag = not_dig_through
			clr_country_flag = dig_through
		}
		hidden_effect = { capital_scope = { change_variable = { cons_prog = -0.075 } } }
		tooltip = { capital_scope = { change_variable = { cons_prog = -0.15 } } }
	}
}

#Carbonado 10Mohs
country_event = {
	id = diggy.524
	title = diggy.524.t
	desc = diggy.524.d
	picture = FORT_eventPicture
	
	mean_time_to_happen = {
		years = 5
	}
	
	trigger = {
		has_country_flag = is_digging
		has_country_flag = dig_corundum
		NOT = { has_country_flag = dig_carbonado }
		capital_scope = {
			OR = {
				has_province_modifier = dig_9
				has_province_modifier = dig_10
			}
		}
	}
	
	immediate = {
		set_country_flag = dig_carbonado
	}
	#Dig through
	option = {
        name = diggy.524.a
        ai_chance = { factor = 100 }
		custom_tooltip = dig_through_tooltip
		add_adm_power = -50
		if = {
			limit = { 
				has_global_flag = dd_grumhardhum
				any_owned_province = { has_great_project = { type = dd_grumhardhum tier = 3 } } 
			}
			add_treasury = -2750
		}
		else_if = {
			limit = { ai = no }
			add_treasury = -5500
		}
		hidden_effect = {
			set_country_flag = dig_through
			clr_country_flag = not_dig_through
		}
		hidden_effect = { capital_scope = { change_variable = { cons_prog = 0.075 } } }
		tooltip = { capital_scope = { change_variable = { cons_prog = 0.15 } } }
	}
	#Make detour
	option = {
		name = diggy.524.b
		ai_chance = { factor = 0 }
		custom_tooltip = not_dig_through_tooltip
		add_stability_or_adm_power = yes
		hidden_effect = {
			set_country_flag = not_dig_through
			clr_country_flag = dig_through
		}
		hidden_effect = { capital_scope = { change_variable = { cons_prog = -0.075 } } }
		tooltip = { capital_scope = { change_variable = { cons_prog = -0.15 } } }
	}
}

#Using explosive
country_event = {
	id = diggy.525
	title = diggy.525.t
	desc = diggy.525.d
	picture = SIERRA_DE_LA_PLATA
	
	mean_time_to_happen = {
		years = 10
	}
	
	trigger = {
		has_country_flag = is_digging
		is_year = 1500
		NOT = { has_country_flag = dig_explosive }
		capital_scope = {
			OR = {
				has_terrain = dwarven_hold
				has_terrain = dwarven_hold_surface
			}
		}
	}
	
	immediate = {
		set_country_flag = dig_explosive
	}
	option = {
        name = diggy.525.a
        ai_chance = { factor = 100 }
		add_adm_power = -35
		add_dip_power = -15
		add_country_modifier = {
			name = dig_explosive
			duration = -1
			desc = until_dig_complete
		}
		hidden_effect = { capital_scope = { change_variable = { cons_prog = 0.05 } } }
		tooltip = { capital_scope = { change_variable = { cons_prog = 0.1 } } }
	}
	
	option = {
		name = diggy.525.b
		ai_chance = { factor = 100 }
	}
}

#Precious metals
country_event = {
	id = diggy.526
	title = diggy.526.t
	desc = diggy.526.d
	picture = TRADE_GOODS_METALS_AND_MINING_EQUIPENT_eventPicture
	
	mean_time_to_happen = {
		years = 25
	}
	
	trigger = {
		has_country_flag = is_digging
	}

	#distribute the goods
	option = {
        name = diggy.526.a
        ai_chance = { factor = 100 }
		increase_legitimacy_small_effect = yes
		add_adm_power = 25
		add_prestige_excess_to_splendour_effect = { VAL = 10 } 
	} 

	#nab the goods
	option = {
		name = diggy.526.b
		ai_chance = { factor = 100 }
		add_years_of_income = 0.5
	}
}

#Cave Slimes disrupt dig
country_event = {
	id = diggy.527
	title = diggy.527.t
	desc = diggy.527.d
	picture = CAVE_eventPicture
	
	mean_time_to_happen = {
		years = 20
	}
	
	trigger = {
		has_country_flag = is_digging
		NOT = { has_country_flag = dig_slimes }
	}
	
	immediate = {
		set_country_flag = dig_slimes
	}

	#send in the men
	option = {
        name = diggy.527.a
        ai_chance = { factor = 100 }
		add_yearly_manpower = -0.25
		capital_scope = {
			add_province_modifier = {
				name = dig_slimes
				duration = 1825 #5 years
			}
		}
	} 

	#we cant spare the men
	option = {
		name = diggy.527.b
		ai_chance = { factor = 100 }
		hidden_effect = { capital_scope = { change_variable = { cons_prog = -0.025 } } }
		tooltip = { capital_scope = { change_variable = { cons_prog = -0.05 } } }
	}
}

#Administrative gridlock
country_event = {
	id = diggy.528
	title = diggy.528.t
	desc = diggy.528.d
	picture = OVEREXTENSION_eventPicture
	
	mean_time_to_happen = {
		years = 25
	}
	
	trigger = {
		has_country_flag = is_digging
	}	

	#send help
	option = {
        name = diggy.528.a
        ai_chance = { factor = 100 }
		change_government_reform_progress = -15
	} 

	#fire them
	option = {
		name = diggy.528.b
		ai_chance = { factor = 100 }
		reduce_stability_or_adm_power = yes
	}
}

#Prominent miner
country_event = {
	id = diggy.529
	title = diggy.529.t
	desc = diggy.529.d
	picture = ADVISOR_eventPicture
	
	mean_time_to_happen = {
		years = 20
	}
	
	trigger = {
		has_country_flag = is_digging
		NOT = { has_country_flag = dig_miner }
	}	

	immediate = {
		set_country_flag = dig_miner
	}

	#keep them mining
	option = {
        name = diggy.529.a
        ai_chance = { factor = 100 }
		capital_scope = {
			add_province_modifier = {
				name = dig_miner
				duration = 1825 #5 years
			}
		}
		add_prestige = -10
		hidden_effect = { capital_scope = { change_variable = { cons_prog = 0.05 } } }
		tooltip = { capital_scope = { change_variable = { cons_prog = 0.1 } } }
	} 

	#promote them
	option = {
		name = diggy.529.b
		ai_chance = { factor = 100 }
		define_advisor = {
			type = natural_scientist
			skill = 2
			cost_multiplier = 0.5
		} 
		add_prestige_excess_to_splendour_effect = { VAL = 30 }
	}
}

#Traders come with proposal
country_event = {
	id = diggy.530
	title = diggy.530.t
	desc = diggy.530.d
	picture = MERCHANTS_TALKING_eventPicture
	
	mean_time_to_happen = {
		years = 10
	}
	
	trigger = {
		has_country_flag = is_digging
		NOT = { has_country_flag = dig_trader }
	}	

	immediate = {
		set_country_flag = dig_trader
	}

	#sure
	option = {
        name = diggy.530.a
        ai_chance = { factor = 100 }
		add_country_modifier = {
			name = dig_trader
			duration = -1
			desc = until_dig_complete
		}
		add_dip_power = -50
		hidden_effect = { capital_scope = { change_variable = { cons_prog = 0.025 } } }
		tooltip = { capital_scope = { change_variable = { cons_prog = 0.05 } } }
	}

	#no
	option = {
		name = diggy.530.b
		ai_chance = { factor = 100 }
	}
}

#Purple Worm Tunnel
country_event = {
	id = diggy.531
	title = diggy.531.t
	desc = diggy.531.d
	picture = DARK_FOREST_eventPicture
	
	mean_time_to_happen = {
		years = 100
	}
	
	trigger = {
		has_country_flag = is_digging
		NOT = { capital_scope = { has_province_modifier = dig_worm_tunnel } }
	}

	#Set out guards
	option = {
        name = diggy.531.a
        ai_chance = { factor = 100 }
		
		hidden_effect = {
			random_list = {
				65 = {}	#nothing happens
				25 = {	#Purple Worm Attack
					capital_scope = {
						province_event = {
							id = diggy.532
							days = 365
							random = 730
						}
					}
				}
				10 = {	#Massive Purple Worm Attack
					capital_scope = {
						province_event = {
							id = diggy.533
							days = 365
							random = 730
						}
					}
				}
			}
			capital_scope = {
				add_province_modifier = {
					name = dig_worm_tunnel
					duration = 1095
					hidden = yes
				}
			}
		}
	}

	#Dig around it
	option = {
		name = diggy.531.b
		ai_chance = { factor = 100 }

		hidden_effect = { capital_scope = { change_variable = { cons_prog = -0.05 } } }
		tooltip = { capital_scope = { change_variable = { cons_prog = -0.1 } } }
	}
}

#Purple Worm Attack
#Not a random digging event, fires from diggy.531
province_event = {
	id = diggy.532
	title = diggy.532.t
	desc = diggy.532.d
	picture = DARK_FOREST_eventPicture
	
	is_triggered_only = yes

	#Set out guards
	option = {
        name = diggy.532.a
		
		owner = {
			add_prestige = 5
			add_manpower = -0.5
		}

		hidden_effect = { remove_province_modifier = dig_worm_tunnel }
	}
}

#Massive Purple Worm Attack
#Not a random digging event, fires from diggy.531
province_event = {
	id = diggy.533
	title = diggy.533.t
	desc = diggy.533.d
	picture = DARK_FOREST_eventPicture
	
	is_triggered_only = yes

	#Set out guards
	option = {
        name = diggy.533.a
		
		add_devastation = 15
		owner = { add_manpower = -1 }

		if = {
			limit = {
				owner = { has_country_flag = is_digging }
				is_capital = yes
			}
			add_base_tax = -1
			add_base_production = -1
			add_base_manpower = -1

			hidden_effect = { change_variable = { cons_prog = -0.1 } }		#In case you're copypasting this effect for your own dig event, note that this is a province event. If you're doing a country event you need to add a capital_scope = {}
			tooltip = { change_variable = { cons_prog = -0.2 } }			#In case you're copypasting this effect for your own dig event, note that this is a province event. If you're doing a country event you need to add a capital_scope = {}
		}
		else = {
			add_base_tax = -2
			add_base_production = -2
			add_base_manpower = -2
		}

		hidden_effect = { remove_province_modifier = dig_worm_tunnel }
	}
}

####Other events
#Orc Warband
country_event = {
	id = diggy.550
	title = diggy.550.t
	desc = diggy.550.d
	picture = CAVE_eventPicture
	
	mean_time_to_happen = {
		years = 35
		modifier = {
			factor = 1.5
			has_country_modifier = remnant_army
		}
	}
	
	trigger = {
		NOT = { is_year = 1600 }
		capital_scope = { continent = serpentspine }
		total_development = 100
		any_owned_province = {
			OR = {
				superregion = west_serpentspine_superregion
				superregion = east_serpentspine_superregion
			}
			OR = {
				has_terrain = dwarven_road
				has_terrain = cavern
			}
		}
	}
	
	#Profit
	option = {
        name = diggy.550.a
        ai_chance = { factor = 100 }
		custom_tooltip = orc_warband_tooltip
		hidden_effect = { country_event = { id = diggy.551 days = 150 random = 100 } }
	}
}
#warband arrives
country_event = {
	id = diggy.551
	title = diggy.551.t
	desc = diggy.551.d
	picture = CAVE_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		any_owned_province = {
			has_empty_adjacent_province = yes
			OR = {
				superregion = west_serpentspine_superregion
				superregion = east_serpentspine_superregion
			}
			OR = {
				has_terrain = dwarven_road
				has_terrain = cavern
			}
			any_neighbor_province = { has_terrain = cavern }
		}
	}
	
	option = {
        name = diggy.551.a
        ai_chance = { factor = 100 }
		hidden_effect = {
			random_owned_province = {
				limit = {
					has_empty_adjacent_province = yes
					OR = {
						superregion = west_serpentspine_superregion
						superregion = east_serpentspine_superregion
					}
					OR = {
						has_terrain = dwarven_road
						has_terrain = cavern
					}
					any_neighbor_province = { has_terrain = cavern }
				}
				spawn_dwarovar_orc_rebels = { size = 3 }
			}
		}
	}
}


#cave goblin technocracy army reforms
# country_event = { 
# 	id = diggy.552
# 	title = diggy.552.t
# 	desc = diggy.552.d
# 	picture = LAND_MILITARY_eventPicture

# 	is_triggered_only = yes

# 	trigger = {
# 		primary_culture = cave_goblin
# 		#no undergrowth goblins
# 		has_institution = manufactories
# 		has_reform = technocracy_republic_reform
# 		is_at_war = no
# 	}

# 	mean_time_to_happen = {
# 		days = 1
# 	}
	
# 	option = {
# 		name = diggy.552.a
# 		add_country_modifier = {
# 			name = cave_goblin_technocracy_mil_0
# 			duration = 3650
# 		}
# 		ai_chance = { factor = 10 }
# 	}
# 	option = {
# 		name = diggy.552.b
# 		add_country_modifier = {
# 			name = cave_goblin_technocracy_mil_1
# 			duration = 3650
# 		}
# 		ai_chance = { factor = 10 }
# 	}
# 	option = {
# 		name = diggy.552.c
# 		add_country_modifier = {
# 			name = cave_goblin_technocracy_mil_2
# 			duration = 3650
# 		}
# 		ai_chance = { factor = 10 }
# 	}
# 	option = {
# 		name = diggy.552.e
# 		trigger = {
# 			has_institution = manufactories
# 		}
# 		add_country_modifier = {
# 			name = cave_goblin_technocracy_mil_3
# 			duration = 3650
# 		}
# 		ai_chance = { factor = 70 }
# 	}
# 	option = {
# 		name = diggy.552.f
# 		trigger = {
# 			has_institution = manufactories
# 		}
# 		add_country_modifier = {
# 			name = cave_goblin_technocracy_mil_4
# 			duration = 3650
# 		}
# 		ai_chance = { factor = 0 }
# 	}
# }

#venombrew surplus
country_event = {
	id = diggy.553
	title = diggy.553.t
	desc = diggy.553.d
	picture = GOBLINS_AND_SPIDER_eventPicture

	is_triggered_only = yes

	trigger = {
		dwarovar_goblin_culture_primary = yes
		#no undergrowth here
		OR = {
			owns = 4071
			tag = H90
		}
	}

	mean_time_to_happen = {
		days = 1
	}
	
	
	option = {
		name = diggy.553.a
		add_years_of_income = 0.5
		ai_chance = { factor = 25 }
	}
	option = {
		name = diggy.553.b
		add_country_modifier = {
			name = cave_goblin_venombrew_artists
			duration = 3650
		}
		ai_chance = { factor = 25 }
	}
	option = {
		name = diggy.553.c
		trigger = {
			has_estate = estate_artificers
		}
		add_country_modifier = {
			name = cave_goblin_venombrew_inventors
			duration = 3650
		}
		ai_chance = { factor = 25 }
	}
	option = {
		name = diggy.553.e
		trigger = {
			has_institution = manufactories
		}
		add_country_modifier = {
			name = cave_goblin_venombrew_weapons
			duration = 3650
		}
		ai_chance = { factor = 25 }
	}
}

#railway breaks down
country_event = {
	id = diggy.554
	title = diggy.554.t
	desc = diggy.554.d
	picture = DWARVEN_RAIL_eventPicture

	is_triggered_only = yes

	trigger = {
		capital_scope = { continent = serpentspine }
		any_owned_province = {
			has_terrain = dwarven_road
			NOT = { has_province_modifier = dwarovar_rail } #its repaired/upgraded
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	goto = event_province
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					has_terrain = dwarven_road
					NOT = { has_province_modifier = dwarovar_rail }
				}
				save_event_target_as = event_province
			}
		}
	}

	#repair it now
	option = {
		name = diggy.554.a
		add_years_of_income = -0.15
		ai_chance = { 
			factor = 75
			modifier = {
				factor = 0
				NOT = { years_of_income = 0.2 }
			}
		}
	}

	#can't spare resources
	option = {
		name = diggy.554.b
		event_target:event_province = { add_province_modifier = { name = dwarovar_bad_maintenance duration = 3650 } }
		ai_chance = { factor = 25 }
	}
}

#wandering ettins
country_event = {
	id = diggy.555
	title = diggy.555.t
	desc = diggy.555.d
	picture = VILLAGE_RAIDED_eventPicture

	is_triggered_only = yes

	trigger = {
		capital_scope = { continent = serpentspine }
		any_owned_province = {
			OR = {
				region = northern_pass_region
				region = west_dwarovar_region
			}
		}
	}

	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 0.5
			NOT = { num_of_cities = 2 }
		}
	}

	goto = event_province
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					OR = {
						region = northern_pass_region
						region = west_dwarovar_region
					}
				}
				save_event_target_as = event_province
			}
		}
	}

	#kill them
	option = {
		name = diggy.555.a
		add_yearly_manpower = -0.2
		add_mil_power = -25
		event_target:event_province = { add_devastation = 25 }
		ai_chance = { 
			factor = 75
			modifier = {
				factor = 0
				NOT = { manpower_percentage = 0.2 }
			}
		}
	}

	#can't spare resources
	option = {
		name = diggy.555.b
		event_target:event_province = { 
			add_devastation = 25
			add_unrest = 3
			add_province_modifier = {
				name = devasted_province
				duration = 3650
			}
		}
		ai_chance = { factor = 25 }
	}
}

#restored machine
country_event = {
	id = diggy.556
	title = diggy.556.t
	desc = diggy.556.d
	picture = INVENTION_eventPicture

	is_triggered_only = yes

	trigger = {
		capital_scope = { continent = serpentspine }
		NOT = { 
			culture_group = orcish 
			culture_group = ogre
		}
	}

	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 0.5
			NOT = { num_of_cities = 2 }
		}
	}

	#sell it
	option = {
		name = diggy.556.a
		if = {
			limit = { total_development = 1000 }
			add_years_of_income = 0.2
		}
		else_if = {
			limit = { total_development = 750 }
			add_years_of_income = 0.3
		}
		else_if = {
			limit = { total_development = 500 }
			add_years_of_income = 0.4
		}
		else_if = {
			limit = { total_development = 250 }
			add_years_of_income = 0.5
		}
		else = { add_years_of_income = 0.7 }
		ai_chance = { 
			factor = 50
			modifier = {
				factor = 2
				num_of_loans = 1
			}
		}
	}

	#study it
	option = {
		name = diggy.556.b
		if = {
			limit = { has_dlc = "Rule Britannia" }
			change_innovativeness = 2
		}
		else = {
			add_adm_power = 25
			add_dip_power = 25
			add_mil_power = 25
		}
		ai_chance = { factor = 50 }
	}
}

#halannas breath
country_event = {
	id = diggy.557
	title = diggy.557.t
	desc = diggy.557.d
	picture = FEYFOREST_eventPicture

	is_triggered_only = yes

	trigger = {
		capital_scope = { continent = serpentspine }
		any_owned_province = {
			OR = {
				trade_goods = serpentbloom
				trade_goods = fungi
			}
		}
	}

	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 0.5
			NOT = { num_of_cities = 2 }
		}
	}

	goto = event_province
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					OR = {
						trade_goods = serpentbloom
						trade_goods = fungi
					}
				}
				save_event_target_as = event_province
			}
		}
	}

	#woah
	option = {
		name = diggy.557.a
		event_target:event_province = {
			add_base_production = 1
			add_province_modifier = { name = dwarovar_halannas_breath duration = 3650 }
		}

		ai_chance = { factor = 5 }
	}
}

#spider raid
country_event = {
	id = diggy.558
	title = diggy.558.t
	desc = {
		trigger = { NOT = { culture_group = goblin } }
		desc = diggy.558.d
	}
	desc = {
		trigger = { culture_group = goblin } 
		desc = diggy.558.d2
	}
	picture = GOBLINS_AND_SPIDER_eventPicture

	is_triggered_only = yes

	trigger = {
		capital_scope = { continent = serpentspine }
		any_owned_province = {
			OR = {
				area = eastnest_area
				area = westnest_area
				area = travelers_refuge_area
			}
		}
	}

	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 0.5
			NOT = { num_of_cities = 2 }
		}
	}

	goto = event_province
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					OR = {
						area = eastnest_area
						area = westnest_area
						area = travelers_refuge_area
					}
				}
				save_event_target_as = event_province
			}
		}
	}

	#oh no
	option = {
		name = diggy.558.a
		trigger = { NOT = { culture_group = goblin} }
		event_target:event_province = {
			add_unrest = 3
			add_devastation = 25
		}
		ai_chance = { factor = 5 }
	}

	#tame them
	option = {
		name = diggy.558.b
		trigger = { culture_group = goblin }
		event_target:event_province = {
			random_list = {
				50 = { add_base_manpower = 1 }
				30 = { add_base_manpower = 2 }
				20 = { add_base_manpower = -1 add_devastation = 30 }
			}
		}
		ai_chance = { factor = 25 }
	}

	#spiderwretch only
	option = {
		name = diggy.558.c
		trigger = { tag = H90 } #spiderwretch
		highlight = yes
		add_prestige = 10
		event_target:event_province = { add_base_manpower = 2 }
		ai_chance = { factor = 50 }
	}
}

#native orcs submit
country_event = {
	id = diggy.559
	title = diggy.559.t
	desc = diggy.559.d
	picture = CONQUEST_eventPicture

	is_triggered_only = yes

	trigger = {
		capital_scope = { continent = serpentspine }
		culture_group = orcish
		any_owned_province = {
			is_city = no
			colonysize = 400
			native_size = 2
		}
	}

	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 5
			NOT = { num_of_cities = 4 }
		}
		modifier = {
			factor = 3
			NOT = { num_of_cities = 10 }
		}
	}

	goto = event_province
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					is_city = no
					colonysize = 400
					native_size = 2
				}
				save_event_target_as = event_province
			}
		}
	}

	#nice
	option = {
		name = diggy.559.a
		event_target:event_province = {
			change_native_size = -2
			add_colonysize = 400
		}
		ai_chance = { factor = 5 }
	}
}

#natives kill eachother
country_event = {
	id = diggy.560
	title = diggy.560.t
	desc = diggy.560.d
	picture = SOLDIER_INFIGHTING_eventPicture

	is_triggered_only = yes

	trigger = {
		capital_scope = { continent = serpentspine }
		any_owned_province = {
			is_city = no
			colonysize = 400
			native_size = 2
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	goto = event_province
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					is_city = no
					colonysize = 400
					native_size = 2
				}
				save_event_target_as = event_province
			}
		}
	}

	#nice
	option = {
		name = diggy.560.a
		add_treasury = 30
		event_target:event_province = { change_native_size = -2 }
		ai_chance = { factor = 5 }
	}
}

#small loot chamber
country_event = {
	id = diggy.561
	title = diggy.561.t
	desc = diggy.561.d
	picture = ARTWORK_eventPicture

	is_triggered_only = yes

	trigger = {
		capital_scope = { continent = serpentspine }
		any_owned_province = { has_terrain = cavern }
	}

	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 0.5
			NOT = { num_of_cities = 2 }
		}
	}

	goto = event_province
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = { has_terrain = cavern }
				save_event_target_as = event_province
			}
		}
	}

	#nice
	option = {
		name = diggy.561.a
		random_list = {
			25 = { add_treasury = 100 }
			25 = { add_adm_power = 30 }
			25 = { add_dip_power = 30 }
			25 = { add_mil_power = 30 }
		}
		ai_chance = { factor = 5 }
	}
}

#ancient war golem
country_event = {
	id = diggy.562
	title = diggy.562.t
	desc = diggy.562.d
	picture = 10_Jain_Estate_eventPicture

	is_triggered_only = yes

	trigger = {
		capital_scope = { continent = serpentspine }
		NOT = { has_country_modifier = dwarovar_ancient_restored_golem }
	}

	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 0.5
			NOT = { num_of_cities = 2 }
		}
	}

	#restore it
	option = {
		name = diggy.562.a
		add_years_of_income = -0.2
		add_country_modifier = { name = dwarovar_ancient_restored_golem duration = 3650 }
		ai_chance = { 
			factor = 10 
			modifier = {
				factor = 0
				num_of_loans = 1
			}
		}
	}

	#scrap it
	option = {
		name = diggy.562.b
		add_years_of_income = 0.2
		add_adm_power = 25
		add_mil_power = 50
		ai_chance = { 
			factor = 10 
			modifier = {
				factor = 5
				num_of_loans = 1
			}
		}
	}

	#display it
	option = {
		name = diggy.562.c
		add_prestige_excess_to_splendour_effect = { VAL = 15 }
		if = {
			limit = { has_dlc = "Rule Britannia" }
			change_innovativeness = 2
		}
		ai_chance = { factor = 10 }
	}
}

#ancestor statue
country_event = {
	id = diggy.563
	title = diggy.563.t
	desc = diggy.563.d
	picture = 10_Jain_Estate_eventPicture

	is_triggered_only = yes

	trigger = {
		capital_scope = { continent = serpentspine }
		any_owned_province = { is_city = no }
	}

	mean_time_to_happen = {
		days = 1
	}

	goto = event_province
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = { is_city = no }
				save_event_target_as = event_province
			}
		}
	}

	#desecrate it
	option = {
		name = diggy.563.a
		trigger = { NOT = { culture_group = dwarven } }
		add_prestige_or_monarch_power = { amount = 10 }
		ai_chance = { factor = 5 }
	}

	#venerate it
	option = {
		name = diggy.563.b
		trigger = { religion = ancestor_worship }
		add_country_modifier = { name = dwarovar_venerated_statue duration = 3650 }
		ai_chance = { factor = 25 }
	}

	#might be worth something
	option = {
		name = diggy.563.c
		add_years_of_income = 0.2
		if = {
			limit = { culture_group = dwarven }
			add_prestige = -5
		}
		ai_chance = { factor = 5 }
	}
}

#armory
country_event = {
	id = diggy.564
	title = diggy.564.t
	desc = diggy.564.d
	picture = SWORD_OF_OSMAN_eventPicture

	is_triggered_only = yes

	trigger = {
		capital_scope = { continent = serpentspine }
		num_of_owned_provinces_with = {
			value = 4
			has_terrain = cavern
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	#loot the gear
	option = {
		name = diggy.564.a
		trigger = { NOT = { culture_group = orcish } }
		add_mil_power = 30
		if = {
			limit = { has_reform = dwarovar_adventurer_reform }
			add_government_power = {
				mechanic_type = anb_adventurer_unity 
				power_type = adventurer_unity
				value = 5
			}
			add_faction_influence = { faction = adv_fortune_seekers influence = 3 }
		}
		else_if = {
			limit = { has_estate = estate_adventurers }
			add_estate_loyalty = { estate = estate_adventurers loyalty = 5 }
		}
		ai_chance = { factor = 5 }
	}

	#waaghh
	option = {
		name = diggy.564.b
		highlight = yes
		trigger = { culture_group = orcish }
		add_mil_power = 50
		add_stability_or_adm_power = yes
		add_army_tradition = 4
		ai_chance = { factor = 25 }
	}
}

#expedition monsters
country_event = {
	id = diggy.565
	title = diggy.565.t
	desc = diggy.565.d
	picture = WOUNDED_SOLDIERS_eventPicture

	is_triggered_only = yes

	trigger = {
		capital_scope = { continent = serpentspine }
		any_owned_province = { 
			has_province_modifier = expedition_target
			NOT = { has_province_flag = sent_expedition_@owner }
			NOT = { has_province_modifier = dwarovar_unwanted_guests }
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	goto = event_province
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = { 
					has_province_modifier = expedition_target
					NOT = { has_province_flag = sent_expedition_@owner }
					NOT = { has_province_modifier = dwarovar_unwanted_guests }
				}
				save_event_target_as = event_province
			}
		}
	}

	#oh no
	option = {
		name = diggy.565.a
		event_target:event_province = { add_permanent_province_modifier = { name = dwarovar_unwanted_guests duration = -1 desc = until_expedition_done } }
		ai_chance = { factor = 5 }
	}
}

#cave bats
country_event = {
	id = diggy.566
	title = diggy.566.t
	desc = diggy.566.d
	picture = CAVE_eventPicture

	is_triggered_only = yes

	trigger = {
		capital_scope = { continent = serpentspine }
		any_owned_province = { 
			has_terrain = cavern 
			NOT = { has_province_modifier = dwarovar_cave_bats }
		}
		NOT = { has_country_modifier = dwarovar_bat_guano_explosives }
	}

	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 0.5
			NOT = { num_of_cities = 2 }
		}
	}

	goto = event_province
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = { 
					has_terrain = cavern 
					NOT = { has_province_modifier = dwarovar_cave_bats }
				}
				save_event_target_as = event_province
			}
		}
	}

	#spray something for the bats
	option = {
		name = diggy.566.a
		add_years_of_income = -0.25
		event_target:event_province = { 
			random_list = {
				50 = { 
					modifier = { 
						factor = 1.1
						owner = { innovativeness = 20 }
					}
					modifier = { 
						factor = 1.1
						owner = { innovativeness = 40 }
					}
					modifier = { 
						factor = 1.1
						owner = { innovativeness = 60 }
					}
					modifier = { 
						factor = 1.1
						owner = { innovativeness = 80 }
					}
					modifier = { 
						factor = 1.1
						owner = { innovativeness = 100 }
					}
					modifier = { 
						factor = 1.5
						owner = { has_estate = estate_artificers }
					}
				}
				50 = { 
					add_devastation = 30
					add_permanent_province_modifier = { name = dwarovar_cave_bats duration = 5475 } 
				}
			}
		}
		ai_chance = { factor = 5 }
	}

	#help the sick
	option = {
		name = diggy.566.b
		add_adm_power = -25
		event_target:event_province = {
			add_devastation = 30
			add_permanent_province_modifier = { name = dwarovar_cave_bats duration = 3650 }
		}
		ai_chance = { factor = 5 }
	}

	#bat guano explosives
	option = {
		name = diggy.566.c
		trigger = { culture_group = goblin has_estate = estate_artificers }
		highlight = yes
		add_years_of_income = -0.4
		add_mil_power = -25
		event_target:event_province = { add_permanent_province_modifier = { name = dwarovar_cave_bats duration = 5475 } }
		add_country_modifier = { name = dwarovar_bat_guano_explosives duration = 5475 }
		ai_chance = { factor = 50 }
	}
}

#bugbears attack colony
country_event = {
	id = diggy.567
	title = diggy.567.t
	desc = diggy.567.d
	picture = BATTLE_eventPicture

	is_triggered_only = yes

	trigger = {
		capital_scope = { continent = serpentspine }
		any_owned_province = { 
			has_terrain = cavern
			is_city = no
			native_size = 2
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	goto = event_province
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = { 
					has_terrain = cavern
					is_city = no
					native_size = 2
				}
				save_event_target_as = event_province
			}
		}
	}

	#kill em
	option = {
		name = diggy.567.a
		add_mil_power = -10
		if = {
			limit = { total_development = 600 }
			add_yearly_manpower = -0.1
		}
		else_if = {
			limit = { total_development = 400 }
			add_yearly_manpower = -0.15
		}
		else_if = {
			limit = { total_development = 200 }
			add_yearly_manpower = -0.2
		}
		else = { add_yearly_manpower = -0.25 }
		ai_chance = { factor = 5 }
	}

	#convince them to attack the natives
	option = {
		name = diggy.567.b
		add_dip_power = -25
		event_target:event_province = {
			random_list = {
				60 = {
					modifier = { 
						factor = 1.5
						owner = { has_country_modifier = monstrous_nation }
					}
					add_devastation = 10
					change_native_size = -2
				}
				40 = { 
					add_devastation = 20
					add_colonysize = -200
				}
			}
			
		}
		ai_chance = { factor = 5 }
	}
}

#wrecked train
country_event = {
	id = diggy.568
	title = diggy.568.t
	desc = diggy.568.d
	picture = KINGS_CHOICE_eventPicture

	is_triggered_only = yes

	trigger = {
		capital_scope = { continent = serpentspine }
		any_owned_province = { 
			has_terrain = dwarven_road
			is_city = no
			colonysize = 600
			NOT = { has_province_modifier = dwarovar_blocked_road }
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	goto = event_province
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = { 
					has_terrain = dwarven_road
					is_city = no
					colonysize = 600
					NOT = { has_province_modifier = dwarovar_blocked_road }
				}
				save_event_target_as = event_province
			}
		}
	}

	#clear it out
	option = {
		name = diggy.568.a
		event_target:event_province = {
			add_colonysize = -100
		}
		add_years_of_income = 0.15
		ai_chance = { factor = 5 }
	}

	#na just focus on the colony
	option = {
		name = diggy.568.b
		add_dip_power = -25
		event_target:event_province = { add_permanent_province_modifier = { name = dwarovar_blocked_road duration = 5475 } }
		ai_chance = { factor = 5 }
	}
}

#shoddy mine
country_event = {
	id = diggy.569
	title = diggy.569.t
	desc = diggy.569.d
	picture = TRADE_GOODS_METALS_AND_MINING_EQUIPENT_eventPicture

	is_triggered_only = yes

	trigger = {
		capital_scope = { continent = serpentspine }
		NOT = { culture_group = dwarven }
		any_owned_province = { 
			province_with_mineable_goods = yes
			NOT = { province_group = hold_province }
			is_city = yes
		}
	}

	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 0.5
			NOT = { num_of_cities = 2 }
		}
	}

	goto = event_province
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = { 
					province_with_mineable_goods = yes
					NOT = { province_group = hold_province }
					is_city = yes
				}
				save_event_target_as = event_province
			}
		}
	}

	#repair it
	option = {
		name = diggy.569.a
		add_years_of_income = -0.15
		ai_chance = { factor = 5 }
	}

	#repair AND expand
	option = {
		name = diggy.569.b
		add_years_of_income = -0.3
		add_adm_power = -15
		event_target:event_province = { 
			random = { chance = 50 add_base_production = 1 }
			random = { chance = 25 add_base_production = 1 }
		}
		ai_chance = { factor = 5 }
	}

	#fuck who cares
	option = {
		name = diggy.569.c
		event_target:event_province = { 
			add_local_autonomy = 25
			random = {
				chance = 50
				if = {
					limit = { base_production = 2 }
					add_base_production = -1
				}
				else = { add_devastation = 50 }
			}
		}
		ai_chance = { factor = 5 }
	}
}

#old battlefield
country_event = {
	id = diggy.570
	title = diggy.570.t
	desc = diggy.570.d
	picture = EP_MANIHOLE_HELMET_eventPicture

	is_triggered_only = yes

	trigger = {
		capital_scope = { continent = serpentspine }
		any_owned_province = { 
			is_city = no
			colonysize = 500
			NOT = { has_province_flag = old_battlefield }
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	goto = event_province
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = { 
					is_city = no
					colonysize = 500
					NOT = { has_province_flag = old_battlefield }
				}
				set_province_flag = old_battlefield
				save_event_target_as = event_province
			}
		}
	}

	#loot the bodies
	option = {
		name = diggy.570.a
		add_years_of_income = 0.3
		ai_chance = { factor = 5 }
	}

	#take that dwarves!
	option = {
		name = diggy.570.b
		trigger = {
			OR = {
				culture_group = orcish
				culture_group = goblin
			}
		}
		highlight = yes
		if = {
			limit = { has_estate = estate_monstrous_tribes }
			add_estate_loyalty = { estate = estate_monstrous_tribes loyalty = 5 }
		}
		else_if = { 
			limit = { has_estate = estate_nobles }
			add_estate_loyalty = { estate = estate_nobles loyalty = 5 } 
		}
		add_prestige_excess_to_splendour_effect = { VAL = 10 }
		add_power_projection = { type = mission_rewards_power_projection amount = 5 }
		add_mil_power = 10
		ai_chance = { factor = 5 }
	}

	#take that orcs!
	option = {
		name = diggy.570.c
		trigger = { culture_group = dwarven }
		highlight = yes
		if = { 
			limit = { has_estate = estate_nobles }
			add_estate_loyalty = { estate = estate_nobles loyalty = 5 } 
		}
		add_stability_or_adm_power = yes
		ai_chance = { factor = 5 }
	}
}

#ancient unpronouncable text
country_event = {
	id = diggy.571
	title = diggy.571.t
	desc = diggy.571.d
	picture = BIG_BOOK_eventPicture

	is_triggered_only = yes

	trigger = {
		capital_scope = { continent = serpentspine }
		culture_group = dwarven
		NOT = { has_country_flag = dwarovar_ancient_text_found }
	}

	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 0.5
			NOT = { num_of_cities = 2 }
		}
	}

	immediate = {
		hidden_effect = {
			set_country_flag = dwarovar_ancient_text_found
			random_list = {
				20 = { set_country_flag = dwarovar_text_1 }
				20 = { set_country_flag = dwarovar_text_2 }
				20 = { set_country_flag = dwarovar_text_3 }
				20 = { set_country_flag = dwarovar_text_4 }
			}
			random_list = {
				20 = { trigger = { NOT = { has_country_flag = dwarovar_text_1 } } set_country_flag = dwarovar_text_1 }
				20 = { trigger = { NOT = { has_country_flag = dwarovar_text_2 } }set_country_flag = dwarovar_text_2 }
				20 = { trigger = { NOT = { has_country_flag = dwarovar_text_3 } }set_country_flag = dwarovar_text_3 }
				20 = { trigger = { NOT = { has_country_flag = dwarovar_text_4 } }set_country_flag = dwarovar_text_4 }
			}
		}
	}

	#Aurikus
	option = {
		name = diggy.571.a
		trigger = { has_country_flag = dwarovar_text_1 }
		ai_chance = { factor = 5 }
	}

	#Auirukis
	option = {
		name = diggy.571.b
		trigger = { has_country_flag = dwarovar_text_2 }
		ai_chance = { factor = 5 }
	}

	#Auirikus
	option = {
		name = diggy.571.c
		hidden_effect = { set_country_flag = dwarovar_text_correct }
		ai_chance = { factor = 5 }
	}

	#Aiurikus
	option = {
		name = diggy.571.e
		trigger = { has_country_flag = dwarovar_text_3 }
		ai_chance = { factor = 5 }
	}

	#Auirukus
	option = {
		name = diggy.571.f
		trigger = { has_country_flag = dwarovar_text_4 }
		ai_chance = { factor = 5 }
	}

	after = {
		clr_country_flag = dwarovar_text_1
		clr_country_flag = dwarovar_text_2
		clr_country_flag = dwarovar_text_3
		clr_country_flag = dwarovar_text_4
		country_event = { id = diggy.572 days = 3 }
	}
}

#ancient unpronouncable text pt2
country_event = {
	id = diggy.572
	title = diggy.572.t
	desc = {
		trigger = { has_country_flag = dwarovar_text_correct }
		desc = diggy.572.d
	}
	desc = {
		trigger = { NOT = { has_country_flag = dwarovar_text_correct } }
		desc = diggy.572.d2
	}
	picture = BIG_BOOK_eventPicture

	is_triggered_only = yes

	trigger = {
		capital_scope = { continent = serpentspine }
		culture_group = dwarven
	}

	#correct
	option = {
		name = diggy.572.a
		trigger = { has_country_flag = dwarovar_text_correct }
		add_prestige = 10
		add_stability_or_adm_power = yes
		clr_country_flag = dwarovar_text_correct
		ai_chance = { factor = 5 }
	}

	#i will remember this
	option = {
		name = diggy.572.b
		trigger = { NOT = { has_country_flag = dwarovar_text_correct } }
		add_prestige = -10
		reduce_stability_or_adm_power = yes
		ai_chance = { factor = 5 }
	}
}

#family heirloom
country_event = {
	id = diggy.573
	title = diggy.573.t
	desc = diggy.573.d
	picture = SWORD_OF_OSMAN_eventPicture

	is_triggered_only = yes

	trigger = {
		capital_scope = { continent = serpentspine }
		any_owned_province = { 
			culture_group = dwarven
			is_city = yes
		}
	}

	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 0.5
			NOT = { num_of_cities = 2 }
		}
	}

	goto = event_province
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = { 
					culture_group = dwarven
					is_city = yes
				}
				save_event_target_as = event_province
			}
		}
	}

	#sure take it
	option = {
		name = diggy.573.a
		if = {
			limit = { culture_group = dwarven }
			if = {
				limit = { has_estate = estate_nobles }
				add_estate_loyalty = { estate = estate_nobles loyalty = 5 }
			}
			define_advisor = {
				type = master_of_mint
				skill = 2
				location = event_target:event_province
				discount = yes
			}
		}
		else = {
			medium_increase_of_dwarven_tolerance_effect = yes
			define_advisor = {
				type = master_of_mint
				skill = 2
				location = event_target:event_province
				discount = yes
			}
		}
		ai_chance = { factor = 10 }
	}

	#my precious
	option = {
		name = diggy.573.b
		if = {
			limit = { culture_group = dwarven }
			add_prestige = -10
			add_stability_or_adm_power = yes
			event_target:event_province = { add_unrest = 5 }
		}
		else = {
			medium_decrease_of_dwarven_tolerance_effect = yes
			else = { add_adm_power = 35 }
			add_stability_or_adm_power = yes
			event_target:event_province = { add_unrest = 5 }
		}
		ai_chance = { factor = 5 }
	}
}

#treasure map
country_event = {
	id = diggy.574
	title = diggy.574.t
	desc = diggy.574.d
	picture = COASTLINE_MAP_eventPicture

	is_triggered_only = yes

	trigger = {
		capital_scope = { continent = serpentspine }
		any_owned_province = { 
			is_city = yes
			NOT = { province_group = hold_province }
			can_spawn_expedition = yes
		}
	}

	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 0.5
			NOT = { num_of_cities = 2 }
		}
	}

	goto = event_province
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = { 
					can_spawn_expedition = yes
					is_city = yes
					NOT = { province_group = hold_province }
				}
				save_event_target_as = event_province
			}
		}
	}

	#gimme
	option = {
		name = diggy.574.a
		add_years_of_income = -1
		event_target:event_province = {
			random_list = {
				30 = {
					modifier = {
						factor = 1.2
						ROOT = { num_of_cities = 20 }
					}
					modifier = {
						factor = 1.2
						ROOT = { num_of_cities = 40 }
					}
					modifier = {
						factor = 1.2
						ROOT = { num_of_cities = 60 }
					}
					spawn_expedition = yes
					hidden_effect = { generate_expedition = { base_floor = 1 base_danger = 2 } }
				}
				70 = {}
			}
		}
		ai_chance = { factor = 5 }
	}

	#you crazy
	option = {
		name = diggy.574.b
		add_prestige = -5
		ai_chance = { factor = 5 }
	}
}

#diggy diggy hole
country_event = {
	id = diggy.575
	title = diggy.575.t
	desc = diggy.575.d
	picture = MERCHANTS_TALKING_eventPicture

	is_triggered_only = yes

	trigger = {
		capital_scope = { continent = serpentspine }
		culture_group = dwarven
		any_owned_province = {
			culture_group = dwarven
			is_city = yes
			NOT = { province_group = hold_province }
		}
	}

	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 0.5
			NOT = { num_of_cities = 2 }
		}
	}

	goto = event_province
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = { 
					culture_group = dwarven
					is_city = yes
					NOT = { province_group = hold_province }
				}
				save_event_target_as = event_province
			}
		}
	}

	#digging a hole
	option = {
		name = diggy.575.a
		event_target:event_province = {
			add_base_tax = 1
			add_base_production = 1
			add_base_manpower = 1
		}
		ai_chance = { factor = 5 }
	}
}

#lantern oil
country_event = {
	id = diggy.576
	title = diggy.576.t
	desc = diggy.576.d
	picture = CAVE_eventPicture

	is_triggered_only = yes

	trigger = {
		capital_scope = { continent = serpentspine }
		NOT = { 
			has_country_modifier = monstrous_nation 
			has_country_flag = dwarovar_cavern_oil
		}
		any_owned_province = {
			has_terrain = cavern
			province_with_mineable_goods = yes
		}
	}

	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 0.5
			NOT = { num_of_cities = 2 }
		}
	}

	goto = event_province
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = { 
					has_terrain = cavern
					province_with_mineable_goods = yes
				}
				save_event_target_as = event_province
			}
		}
	}

	#buy oil
	option = {
		name = diggy.576.a
		add_years_of_income = -0.2
		ai_chance = { factor = 5 }
	}

	#fuck it we can see
	option = {
		name = diggy.576.b
		trigger = {
			OR = {
				culture_group = goblin
				culture_group = kobold
			}
		}
		highlight = yes
		add_prestige_excess_to_splendour_effect = { VAL = 10 }
		ai_chance = { factor = 50 }
	}

	#yeah, science bitches
	option = {
		name = diggy.576.c
		trigger = {
			OR = {
				innovativeness = 50
				num_artifice_inventions_discovered = { VAL = 3 }
			}
			hidden_trigger = { NOT = { has_country_flag = dwarovar_cavern_oil } }
		}
		highlight = yes
		add_years_of_income = -0.8
		custom_tooltip = diggy.576.tooltip
		set_country_flag = dwarovar_cavern_oil
		ai_chance = { factor = 100 }
	}
}

#Serpents Bounty
country_event = {
	id = diggy.577
	title = diggy.577.t
	desc = diggy.577.d
	picture = FARMING_eventPicture

	is_triggered_only = yes

	trigger = {
		has_global_flag = serpent_vale_irrigation #fully repaired
		capital_scope = { continent = serpentspine }
		serpents_vale_region = {
			type = all
			owned_by = ROOT
		}
	}

	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 0.5
			development_in_provinces = {
				value = 200
				region = serpents_vale_region
			}
		}
	}

	#gimme dev
	option = {
		name = diggy.577.a
		random_owned_province = {
			limit = { region = serpents_vale_region trade_goods = grain }
			add_base_production = 1
			add_base_manpower = 1
			if = {
				limit = { 
					ROOT = { culture_group = dwarven high_tolerance_goblin_race_trigger = yes } #you disgust me
					NOT = { culture_group = goblin }
				}
				add_goblin_minority_size_effect = yes
			}
			else_if = {
				limit = { 
					ROOT = { culture_group = goblin high_tolerance_dwarven_race_trigger = yes } #you disgust me a bit less
					NOT = { culture_group = dwarven }
				}
				add_dwarven_minority_size_effect = yes
			}
		}
		random_owned_province = {
			limit = { region = serpents_vale_region trade_goods = grain }
			add_base_production = 1
			add_base_manpower = 1
			if = {
				limit = { 
					ROOT = { culture_group = dwarven high_tolerance_goblin_race_trigger = yes } #you disgust me
					NOT = { culture_group = goblin }
				}
				add_goblin_minority_size_effect = yes
			}
			else_if = {
				limit = { 
					ROOT = { culture_group = goblin high_tolerance_dwarven_race_trigger = yes } #you disgust me a bit less
					NOT = { culture_group = dwarven }
				}
				add_dwarven_minority_size_effect = yes
			}
		}
		random_owned_province = {
			limit = { region = serpents_vale_region trade_goods = grain }
			add_base_production = 1
			add_base_manpower = 1
			if = {
				limit = { 
					ROOT = { culture_group = dwarven high_tolerance_goblin_race_trigger = yes } #you disgust me
					NOT = { culture_group = goblin }
				}
				add_goblin_minority_size_effect = yes
			}
			else_if = {
				limit = { 
					ROOT = { culture_group = goblin high_tolerance_dwarven_race_trigger = yes } #you disgust me a bit less
					NOT = { culture_group = dwarven }
				}
				add_dwarven_minority_size_effect = yes
			}
		}
		ai_chance = { factor = 5 }
	}
}

#Serpents Curse
country_event = {
	id = diggy.578
	title = diggy.578.t
	desc = diggy.578.d
	picture = 20_Monsoon_eventPicture

	is_triggered_only = yes

	trigger = {
		has_global_flag = serpent_vale_irrigation #fully repaired
		capital_scope = { continent = serpentspine }
		serpents_vale_region = {
			type = all
			owned_by = ROOT
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	#repair it nowwwwwww
	option = {
		name = diggy.578.a
		add_years_of_income = -2
		ai_chance = { factor = 5 }
	}

	#na dude
	option = {
		name = diggy.578.b
		serpents_vale_region = {
			limit = { trade_goods = grain }
			add_base_production = -1
			add_devastation = 20
		}
		ai_chance = { factor = 5 }
	}
}

#mushroom people mess with farmers
country_event = {
	id = diggy.579
	title = diggy.579.t
	desc = diggy.579.d
	picture = ANGRY_MOB_eventPicture

	is_triggered_only = yes
	trigger = {
		capital_scope = { continent = serpentspine }
		NOT = { has_country_flag = angry_mushrooms }
		any_owned_province = {
			continent = serpentspine
			has_terrain = cavern
			trade_goods = fungi
			is_city = yes
			NOT = { base_production = 5 }
		}
	}

	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 0.5
			NOT = { num_of_cities = 2 }
		}
	}

	goto = event_province
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					AND = {
						continent = serpentspine
						has_terrain = cavern
						trade_goods = fungi
						is_city = yes
						NOT = { base_production = 5 }
					}
				}
				save_event_target_as = event_province
			}
			set_country_flag = angry_mushrooms
		}
	}

	#kill
	option = {
		name = diggy.579.a
		add_yearly_manpower = -0.15
		add_mil_power = -25
		ai_chance = { 
			factor = 75
			modifier = {
				factor = 0
				NOT = { manpower_percentage = 0.15 }
			}
		}
	}

	#idc
	option = {
		name = diggy.579.b
		event_target:event_province = {
			add_province_modifier = {
				name = dwarovar_angry_mushrooms
				duration = 3650
			}
			province_event = { id = diggy.580 days = 365 random = 365 }
		}
		ai_chance = { factor = 25 }
	}
}

#mushroom people become smarter
province_event = {
	id = diggy.580
	title = diggy.580.t
	desc = diggy.580.d
	picture = NATIVES_eventPicture
	goto = ROOT

	is_triggered_only = yes

	#kill
	option = {
		name = diggy.580.a
		owner = {
			add_yearly_manpower = -0.5
			add_mil_power = -50
		}
		remove_province_modifier = dwarovar_angry_mushrooms
		ai_chance = { 
			factor = 75
			modifier = {
				factor = 0
				owner = { NOT = { manpower_percentage = 0.5 } }
			}
		}
	}

	#frens?
	option = {
		name = diggy.580.b
		owner = {
			add_dip_power = -50
		}
		province_event = {
			id = diggy.581 days = 365 random = 365 }
		ai_chance = { factor = 25 }
	}
}

#mushroom frens
province_event = {
	id = diggy.581
	title = diggy.581.t
	desc = diggy.581.d
	picture = DIPLOMACY_SIGNING_eventPicture
	goto = ROOT

	is_triggered_only = yes

	#yay
	option = {
		name = diggy.581.a
		add_permanent_province_modifier = { name = dwarovar_mushroom_settlement duration = -1 }
		remove_province_modifier = dwarovar_angry_mushrooms
		hidden_effect = {
			province_event = { id = diggy.582 days = 3650 }
		}
		ai_chance = { 
			factor = 5
		}
	}
}

#mushroom settlement grows
province_event = {
	id = diggy.582
	title = diggy.582.t
	desc = diggy.582.d
	picture = COLONIZATION_eventPicture
	goto = ROOT

	is_triggered_only = yes

	trigger = { has_province_modifier = dwarovar_mushroom_settlement }

	#cool
	option = {
		name = diggy.582.a
		add_base_production = 3
		add_base_manpower = 1
		add_base_tax = 1
		ai_chance = { 
			factor = 5
		}
	}
}

#minotaur raid
country_event = {
	id = diggy.583
	title = diggy.583.t
	desc = diggy.583.d
	picture = VILLAGE_RAIDED_eventPicture
	goto = event_province

	is_triggered_only = yes

	trigger = {
		capital_scope = { continent = serpentspine }
		any_owned_province = {
			continent = serpentspine
			OR = {
				has_building = weapons
				AND = {
					has_weapons_trade_goods = yes
					OR = {
						has_manpower_building_trigger = yes
						has_forcelimit_building_trigger = yes
					}
					NOT = {
						province_group = hold_province
					}
				}
			}
		}
		NOT = {
			has_country_modifier = dwarovar_minotaur_guard
		}
	}

	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 0.5
			NOT = { num_of_cities = 2 }
		}
	}

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					continent = serpentspine
					OR = {
						has_building = weapons
						AND = {
							has_weapons_trade_goods = yes
							OR = {
								has_manpower_building_trigger = yes
								has_forcelimit_building_trigger = yes
							}
							NOT = {
								province_group = hold_province
							}
						}
					}
				}
				save_event_target_as = event_province
			}
		}
	}

	#do something
	option = {
		name = diggy.583.a
		add_yearly_manpower = -0.25
		add_mil_power = -25
		ai_chance = { 
			factor = 75
			modifier = {
				factor = 0
				NOT = { manpower_percentage = 0.2 }
			}
		}
	}

	#do nothing
	option = {
		name = diggy.583.b
		event_target:event_province = { 
			add_devastation = 10
			add_province_modifier = {
				name = dwarovar_minotaur_raid
				duration = 1825
			}
		}
		ai_chance = { factor = 25 }
	}

	#negotiate
	option = {
		name = diggy.583.c
		trigger = {
			OR = {
				primary_culture = darkscale_kobold
				ruler_has_personality = entrepreneur_personality
				ruler_has_personality = greedy_personality
			}
		}
		custom_tooltip = diggy.583.cd
		add_dip_power = -10
		hidden_effect = {
			random_list = {
				50 = {country_event  = { id = diggy.584 }}
				50 = {country_event  = { id = diggy.585 }}
			}
		}
		ai_chance = { factor = 75 }
	}
}

#Good Minotaur Event
province_event = {
	id = diggy.584
	title = diggy.584.t
	desc = diggy.584.d
	picture = MERCHANTS_TALKING_eventPicture
	goto = event_province

	is_triggered_only = yes

	#Nice
	option = {
		name = diggy.584.a
		owner = {
			add_country_modifier = {
				name = dwarovar_minotaur_guard
				duration = 3650
			}
		}
	}
}

#Bad Minotaur Event
province_event = {
	id = diggy.585
	title = diggy.585.t
	desc = diggy.585.d
	picture = VILLAGE_RAIDED_eventPicture
	goto = event_province

	is_triggered_only = yes

	#No nice
	option = {
		name = diggy.585.a
		owner = {
			add_yearly_manpower = -0.4
			add_mil_power = -50
		}
		event_target:event_province = { 
			add_devastation = 10
		}
	}
}

#mushroom mining ritual
country_event = {
	id = diggy.586
	title = diggy.586.t
	desc = diggy.586.d
	picture = TRADE_GOODS_METALS_AND_MINING_EQUIPENT_eventPicture
	goto = event_province

	is_triggered_only = yes

	mean_time_to_happen = {
		days = 1
	}

	trigger = {
		capital_scope = { continent = serpentspine }
		NOT = { has_country_flag = dwarovar_fungus_ritual_flag }
		any_owned_province = {
			continent = serpentspine
			OR = {
				trade_goods = gold
				trade_goods = iron
				trade_goods = copper
				trade_goods = mithril
			}
			culture_group = dwarven
			NOT = {
				province_group = hold_province
				has_province_modifier = dwarovar_mushroom_proclamations
				region = serpents_vale_region
				region = northern_pass_region
			}
		}
		
	}
	
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					continent = serpentspine
					OR = {
						trade_goods = gold
						trade_goods = iron
						trade_goods = copper
						trade_goods = mithril
					}
					culture_group = dwarven
					NOT = {
						province_group = hold_province
						has_province_modifier = dwarovar_mushroom_proclamations
						region = serpents_vale_region
						region = northern_pass_region
					}
				}
				save_event_target_as = event_province
			}
			set_country_flag = dwarovar_fungus_ritual_flag
		}
	}

	#mushroom!
	option = {
		name = diggy.586.a
		event_target:event_province = {
			add_local_autonomy = 30
			add_base_production = 1
			add_province_modifier = {
				name = dwarovar_mushroom_proclamations
				duration = -1
			}
		}
		ai_chance = {
			factor = 50
		}
	}

	#get back to work
	option = {
		name = diggy.586.b
		add_years_of_income = 0.1
		event_target:event_province = {
			add_province_modifier = {
				name = dwarovar_direct_oversight
				duration = 3650
			}
		}
		ai_chance = {
			factor = 50
		}
	}
}

#fungrum impersonator
country_event = {
	id = diggy.587
	title = diggy.587.t
	desc = diggy.587.d
	picture = FUNGRUM_eventPicture

	is_triggered_only = yes

	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		capital_scope = { 
			continent = serpentspine 
			NOT = {
				region = serpents_vale_region
				region = northern_pass_region
			}
		} 
		NOT = { has_country_flag = dwarovar_fungus_impersonator_flag }
	}
	
	immediate = {
		hidden_effect = { set_country_flag = dwarovar_fungus_impersonator_flag }
	}

	#embrace fungrum, get advisor
	option = {
		name = diggy.587.a
		define_advisor = {
			type = philosopher
			skill = 2
			name = "Bungus the Fungus"
			discount = yes
			culture = ROOT
			religion = ROOT
		}
		add_legitimacy = -10
		add_devotion = -10
		add_republican_tradition = -3
		ai_chance = {
			factor = 50
		}
	}

	#burn all the fungus
	option = {
		name = diggy.587.b
		add_legitimacy = 10
		add_devotion = 10
		add_republican_tradition = 3
		add_country_modifier = {
			name = dwarovar_burning_fungus
			duration = 3650
		}
		ai_chance = {
			factor = 50
		}
	}
}

#fungrum mithril mine
country_event = {
	id = diggy.588
	title = diggy.588.t
	desc = diggy.588.d
	picture = FUNGRUM_eventPicture
	goto = event_province

	is_triggered_only = yes

	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		capital_scope = { continent = serpentspine }
		NOT = { has_country_flag = dwarovar_fungus_mithril_flag }
		any_owned_province = {
			continent = serpentspine
			base_production = 5
			NOT = {
				trade_goods = gold
				trade_goods = mithril
				province_group = hold_province
				has_province_modifier = dwarovar_trickle_of_mithril
				region = serpents_vale_region
				region = northern_pass_region
			}
		}
	}
	
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					continent = serpentspine
					base_production = 5
					NOT = {
						trade_goods = gold
						trade_goods = mithril
						province_group = hold_province
						has_province_modifier = dwarovar_trickle_of_mithril
						region = serpents_vale_region
						region = northern_pass_region
					}
				}
				save_event_target_as = event_province
			}
			set_country_flag = dwarovar_fungus_mithril_flag
		}
	}

	#food for mithril mine!
	option = {
		name = diggy.588.a
		add_years_of_income = -1
		event_target:event_province = {
			add_base_production = -4
			change_trade_goods = mithril
		}
		ai_chance = {
			factor = 50
		}
	}

	#i don't trust mushrooms!
	option = {
		name = diggy.588.b
		event_target:event_province = {
			add_province_modifier = {
				name = dwarovar_trickle_of_mithril
				duration = 7300
			}
		}
		ai_chance = {
			factor = 50
		}
	}
}

#roth? herd
country_event = {
	id = diggy.589
	title = diggy.589.t
	desc = diggy.589.d
	picture = FARMING_eventPicture
	goto = event_province

	is_triggered_only = yes

	trigger = {
		capital_scope = { continent = serpentspine }
		any_owned_province = {
			has_terrain = cavern
			continent = serpentspine	
			trade_goods = serpentbloom
			base_production = 4
			OR = {
				development = 8
				has_building = farm_estate
			}
		}
	}

	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 0.5
			NOT = { num_of_cities = 2 }
		}
	}

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					has_terrain = cavern
					continent = serpentspine	
					trade_goods = serpentbloom
					base_production = 4
					OR = {
						development = 8
						has_building = farm_estate
					}
				}
				save_event_target_as = event_province
			}
		}
	}

	#hunt
	option = {
		name = diggy.589.a
		add_prestige = 10
		add_years_of_income = 0.25
		event_target:event_province = { 
			add_province_modifier = {
				name = dwarovar_rothe_meat
				duration = 1825
			}
		}
		ai_chance = { factor = 75 }
	}

	#tame
	option = {
		name = diggy.589.b
		trigger = { 
			NOT = { culture_group = dwarven } 
		}
		event_target:event_province = { 
			add_devastation = 20
			change_trade_goods = livestock
			add_province_modifier = {
				name = dwarovar_rothe_herds
				duration = -1
			}
		}
		ai_chance = { factor = 25 }
	}

	#dwarven only
	option = {
		name = diggy.589.c
		trigger = { culture_group = dwarven }
		event_target:event_province = { 
			add_devastation = 20
			change_trade_goods = livestock
			add_province_modifier = {
				name = dwarovar_rothe_herds
				duration = -1
			}
		}
		ai_chance = { factor = 25 }
	}
}

#echoes
country_event = {
	id = diggy.590
	title = diggy.590.t
	desc = diggy.590.d
	picture = ANGRY_MOB_eventPicture

	is_triggered_only = yes
	trigger = {
		capital_scope = { continent = serpentspine }
		OR = {
			religion = ancestor_worship
			religion = dwarven_pantheon
		}
		NOT = { has_country_flag = echoes_past }
		any_owned_province = {
			continent = serpentspine
			province_group = hold_province
			NOT = {
				has_province_modifier = ruined_hold
				has_province_modifier = damaged_hold
				has_province_modifier = infested_hold
			}
		}
	}

	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 0.5
			NOT = { num_of_cities = 2 }
		}
	}

	goto = event_province
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					continent = serpentspine
					province_group = hold_province
					NOT = {
						has_province_modifier = ruined_hold
						has_province_modifier = damaged_hold
						has_province_modifier = infested_hold
					}
				}
				save_event_target_as = event_province
			}
			set_country_flag = echoes_past
		}
	}

	#mages
	option = {
		name = diggy.590.a
		add_dip_power = -50
		add_estate_loyalty = {
			estate = estate_mages
			loyalty = 5
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
		event_target:event_province = {
			add_province_modifier = {
				name = dwarovar_echoes_appeased
				duration = 1825
			}
		}
		ai_chance = { factor = 40 }
	}

	#church
	option = {
		name = diggy.590.b
		add_adm_power = -50
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		add_estate_loyalty = {
			estate = estate_mages
			loyalty = -5
		}
		event_target:event_province = {
			add_province_modifier = {
				name = dwarovar_echoes_appeased
				duration = 1825
			}
		}
		ai_chance = { factor = 40 }
	}

	#do nothing
	option = {
		name = diggy.590.c
		event_target:event_province = {
			add_province_modifier = {
				name = dwarovar_echoes
				duration = 1826
			}
		}
		hidden_effect = {
			country_event = {
				id = diggy.591 
				days = 1825
			}
		}
		ai_chance = { factor = 20 }
	}
}

#echoes fading
country_event = {
	id = diggy.591
	title = diggy.591.t
	desc = diggy.591.d
	picture = CITY_DEVELOPMENT_eventPicture

	is_triggered_only = yes

	goto = event_province
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					continent = serpentspine
					has_province_modifier = dwarovar_echoes
				}
				save_event_target_as = event_province
			}
		}
		event_target:event_province = {
			remove_province_modifier = dwarovar_echoes
		}
	}
	#warriors
	option = {
		name = diggy.591.a
		add_country_modifier = {
			name = dwarovar_lessons_warriors
			duration = 3650
		}
		ai_chance = { 
			factor = 33
		}
	}

	#blacksmiths
	option = {
		name = diggy.591.b
		add_country_modifier = {
			name = dwarovar_lessons_blacksmiths
			duration = 3650
		}
		ai_chance = { 
			factor = 33
		}
	}

	#builders
	option = {
		name = diggy.591.c
		add_country_modifier = {
			name = dwarovar_lessons_builders
			duration = 3650
		}
		ai_chance = { 
			factor = 33
		}
	}
}

#norkers attack colony
country_event = {
	id = diggy.592
	title = diggy.592.t
	desc = diggy.592.d
	picture = VILLAGE_RAIDED_eventPicture 
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 0.5
			NOT = { num_of_cities = 2 }
		}
	}

	trigger = {
		capital_scope = { continent = serpentspine }
		any_owned_province = {
			is_colony = yes
			continent = serpentspine
		}
	}

	goto = event_province
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					is_colony = yes
					continent = serpentspine
				}
				save_event_target_as = event_province
			}
		}
	}

	#loot the ruins 
	option = {
		name = diggy.592.a 
		if = {
			limit = { has_estate = estate_adventurers }
			add_estate_loyalty = { estate = estate_adventurers loyalty = 5 }
		}
		add_years_of_income = 0.5
		event_target:event_province = { add_devastation = 30 }
		ai_chance = { factor = 60 }
	}

	#repair the ruins
	option = {
		name = diggy.592.b 
		highlight = yes
		trigger = { 
			culture_group = dwarven 
		}
		if = {
			limit = { has_estate = estate_church }
			add_estate_loyalty = { estate = estate_church loyalty = 5 }
		}
		event_target:event_province = { 
			add_base_tax = 1
			add_devastation = 5
		}
		ai_chance = { factor = 40 }
	}

	#send our guys to the ruins
	option = {
		name = diggy.592.c 
		highlight = yes
		trigger = { 
			OR = {
			culture_group = goblin 
			culture_group = kobold 
			}
		}
		event_target:event_province = { 
			add_base_tax = 1
			add_devastation = 15
		}
		ai_chance = { factor = 40 }
	}

	#kill more norkers
	option = {
		name = diggy.592.e 
		highlight = yes
		trigger = { 
			dwarovar_orc_culture_primary = yes
		}
		event_target:event_province = { 
			add_base_manpower = 1
			add_devastation = 20
			change_native_size = -5 
		}
		ai_chance = { factor = 40 }
	}
	
}

#veladklufar investation
country_event = {
id = diggy.593
	title = diggy.593.t
	desc = diggy.593.d
	picture = TRADE_GOODS_METALS_AND_MINING_EQUIPENT_eventPicture 
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	goto = event_province
	
	trigger = {
		capital_scope = { continent = serpentspine }
		any_owned_province = {
			continent = serpentspine
			has_terrain = cavern
			NOT = {
				trade_goods = gold
				trade_goods = mithril
				has_province_modifier = dwarovar_veladklufar_assistance
			}
		}
	}
	
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					continent = serpentspine
					has_terrain = cavern
					NOT = {
						trade_goods = gold
						trade_goods = mithril
						has_province_modifier = dwarovar_veladklufar_assistance
					}
				}
				save_event_target_as = event_province
			}
		}
	}

	#ignore it
	option = {
		name = diggy.593.a 
		event_target:event_province = { 
			random_list = {
				1 = {
					add_base_tax = -1
				}
				1 = {
					add_base_production = -1
				}
			}
			add_devastation = 25 
			}
		ai_chance = { factor = 40 }
	}

	#send guards to kill ze bugs
	option = {
		name = diggy.593.b 
		add_mil_power = -25 
		add_yearly_manpower = -0.1 
		event_target:event_province = { 
			add_devastation = 10 
			}
		ai_chance = { 
			factor = 60
			modifier = {
				factor = 0
				NOT = { manpower_percentage = 0.2 }
			}
		}
	}

	#tame them and send them to ze mines 
	option = {
		name = diggy.593.c
		highlight = yes
		trigger = {
			OR = {
				ruler_has_personality = scholar_personality
				innovativeness = 30 
			}
		}
		add_adm_power = -50
		event_target:event_province = { 
			add_devastation = 10 
			add_permanent_province_modifier = {
				name = dwarovar_veladklufar_assistance
				duration = -1
			}
			}
		ai_chance = { 
			factor = 25
		}
	}

}

#large crab population found 
country_event = {
id = diggy.594
	title = diggy.594.t
	desc = diggy.594.d
	picture = TRADE_GOODS_FURS_FISH_AND_SALT_eventPicture
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	goto = event_province
	
	trigger = {
		capital_scope = { continent = serpentspine }
		any_owned_province = {
			continent = serpentspine
			has_terrain = cavern
			NOT = {
				has_province_modifier = dwarovar_crab_farms
			}
		}
	}
	
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					continent = serpentspine
					has_terrain = cavern
					NOT = {
						has_province_modifier = dwarovar_crab_farms
					}
				}
				save_event_target_as = event_province
			}
		}
	}

	#mmmmm crab meat
	option = {
		name = diggy.594.a
		add_prestige = 10 
		event_target:event_province = { 
			add_base_production = 1 
			if = { 
				limit = { 
					is_prosperous = no
					is_state = yes
				}	
				add_prosperity = 100
			}
			}
		ai_chance = { 
			factor = 20
		}
	}

	#need more crabs NOW 
	option = {
		name = diggy.594.b
		add_years_of_income = -1 
		event_target:event_province = { 
			change_trade_goods = fish 
			add_permanent_province_modifier = {
				name = dwarovar_crab_farms
				duration = -1
			}
			}
		ai_chance = { 
			factor = 80
		}
	}
}

#lumimoth migration begins
country_event = {
id = diggy.595
	title = diggy.595.t
	desc = diggy.595.d
	picture = COMET_SIGHTED_eventPicture
	is_triggered_only = yes
	trigger = { capital_scope = { continent = serpentspine } }
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = diggy.595.a
		ai_chance = { factor = 1 }
		add_stability_or_adm_power = yes
	}
	option = {
		name = diggy.595.b
		ai_chance = { factor = 1 }
		add_years_of_income = 0.25
		change_government_reform_progress = 15
	}
	
}

#bnunin horde!
country_event = {
id = diggy.596
	title = diggy.596.t
	desc = diggy.596.d
	picture = BORDER_TENSION_eventPicture
	is_triggered_only = yes
	trigger = {
		capital_scope = { continent = serpentspine }
		any_owned_province = {
			continent = serpentspine
			OR = {
				trade_goods = fungi
				trade_goods = serpentbloom 
			}
		}
	}
	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					continent = serpentspine
					OR = {
						trade_goods = fungi
						trade_goods = serpentbloom 
					}
				}
				save_event_target_as = event_province
			}
		}
	}
	goto = event_province
	
	option = {
		name = diggy.596.a
		ai_chance = { factor = 1 }
		add_adm_power = -25
		add_country_modifier = {
			name = banned_bnu
			duration = 5475
		}
	}
	
	option = {
		name = diggy.596.b
		ai_chance = { factor = 1 }
		event_target:event_province = {
			add_devastation = 25
			add_province_modifier = {
				name = beloved_bnu
				duration = 5475
			}
		}
	}
	
	option = {
		name = diggy.596.c
		ai_chance = { factor = 1 }
		add_years_of_income = -0.2
		add_dip_power = 50
		add_country_modifier = {
			name = cuddliest_bnu
			duration = 5475
		}
	}
}

#750+ racial tension events
country_event = {
	id = diggy.750
	title = diggy.750.t
	desc = diggy.750.d
	picture = CAVE_eventPicture

	hidden = yes

	trigger = {
		capital_scope = { continent = serpentspine }
		OR = {
			culture_group = dwarven
			culture_group = goblin
			culture_group = orcish
		}
		any_owned_province = {
			is_city = yes
			continent = serpentspine
			OR = {
				has_dwarven_minority_trigger = yes
				has_goblin_minority_trigger = yes
				has_orcish_minority_trigger = yes
			}
		}
	}

	mean_time_to_happen = {
		years = 30
		modifier = {
			factor = 1.5
			OR = {
				full_idea_group = humanist_ideas
				ruler_has_personality = tolerant_personality
				ruler_has_personality = free_thinker_personality
			}
		}
	}

	option = {
		name = diggy.750.a
		random_list = {
			#fallback
			1 = {}

			#minorities fight
			50 = {
				random_owned_province = {
					limit = {
						continent = serpentspine
						is_city = yes
						OR = {
							has_dwarven_minority_trigger = yes
							has_goblin_minority_trigger = yes
							has_orcish_minority_trigger = yes
						}
					}
					save_event_target_as = event_province
				}
				country_event = { id = diggy.751 }
			}

			#minorities restricted businesses
			50 = {
				trigger = {
					any_owned_province = {
						is_city = yes
						OR = {
							AND = {
								has_dwarven_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_dwarven_purge has_country_modifier = racial_pop_dwarven_expulsion } }
							}
							AND = {
								has_goblin_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_goblin_purge has_country_modifier = racial_pop_goblin_expulsion } }
							}
							AND = {
								has_orcish_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_orcish_purge has_country_modifier = racial_pop_orcish_expulsion } }
							}
						}
					}
				}
				random_owned_province = {
					limit = {
						continent = serpentspine
						is_city = yes
						OR = {
							AND = {
								has_dwarven_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_dwarven_purge has_country_modifier = racial_pop_dwarven_expulsion } }
							}
							AND = {
								has_goblin_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_goblin_purge has_country_modifier = racial_pop_goblin_expulsion } }
							}
							AND = {
								has_orcish_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_orcish_purge has_country_modifier = racial_pop_orcish_expulsion } }
							}
						}
					}
					save_event_target_as = event_province
				}
				country_event = { id = diggy.752 }
			}

			#dwarves don't want minorities in their homes
			50 = {
				trigger = { 
					culture_group = dwarven
					any_owned_province = {
						is_city = yes
						continent = serpentspine
						OR = {
							AND = {
								has_goblin_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_goblin_purge } }
							}
							AND = {
								has_orcish_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_orcish_purge } }
							}
						}
					}
				}
				random_owned_province = {
					limit = {
						culture_group = dwarven
						is_city = yes
						continent = serpentspine
						OR = {
							AND = {
								has_goblin_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_goblin_purge } }
							}
							AND = {
								has_orcish_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_orcish_purge } }
							}
						}
					}
					save_event_target_as = event_province
				}
				country_event = { id = diggy.753 }
			}

			#cartels not providing safety for minorities
			50 = {
				trigger = { 
					NOT = { culture_group = orcish }
					has_estate = estate_burghers
					any_owned_province = {
						is_city = yes
						continent = serpentspine
						OR = {
							culture_group = dwarven
							culture_group = goblin	
						}
						OR = {
							AND = {
								has_dwarven_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_dwarven_purge has_country_modifier = racial_pop_dwarven_expulsion culture_group = dwarven } }
							}
							AND = {
								has_goblin_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_goblin_purge has_country_modifier = racial_pop_goblin_expulsion culture_group = goblin } }
							}
							AND = {
								has_orcish_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_orcish_purge has_country_modifier = racial_pop_orcish_expulsion } }
							}
						}
					}
				}
				random_owned_province = {
					limit = {
						is_city = yes
						continent = serpentspine
						OR = {
							culture_group = dwarven
							culture_group = goblin	
						}
						OR = {
							AND = {
								has_dwarven_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_dwarven_purge has_country_modifier = racial_pop_dwarven_expulsion culture_group = dwarven } }
							}
							AND = {
								has_goblin_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_goblin_purge has_country_modifier = racial_pop_goblin_expulsion culture_group = goblin } }
							}
							AND = {
								has_orcish_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_orcish_purge has_country_modifier = racial_pop_orcish_expulsion } }
							}
						}
					}
					save_event_target_as = event_province
				}
				country_event = { id = diggy.754 }
			}

			#ancestral claims
			50 = {
				trigger = { 
					any_owned_province = {
						continent = serpentspine
						OR = {
							culture_group = dwarven
							culture_group = goblin
							culture_group = orcish
						}
						OR = {
							AND = {
								has_dwarven_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_dwarven_purge has_country_modifier = racial_pop_dwarven_expulsion } }
							}
							AND = {
								has_goblin_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_goblin_purge has_country_modifier = racial_pop_goblin_expulsion } }
							}
							AND = {
								has_orcish_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_orcish_purge has_country_modifier = racial_pop_orcish_expulsion } }
							}
						}
					}
				}
				random_owned_province = {
					limit = {
						continent = serpentspine
						OR = {
							culture_group = dwarven
							culture_group = goblin
							culture_group = orcish
						}
						OR = {
							AND = {
								has_dwarven_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_dwarven_purge has_country_modifier = racial_pop_dwarven_expulsion } }
							}
							AND = {
								has_goblin_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_goblin_purge has_country_modifier = racial_pop_goblin_expulsion } }
							}
							AND = {
								has_orcish_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_orcish_purge has_country_modifier = racial_pop_orcish_expulsion } }
							}
						}
					}
					save_event_target_as = event_province
				}
				country_event = { id = diggy.755 }
			}

			#xenophobic districts
			50 = {
				trigger = { 
					any_owned_province = {
						continent = serpentspine
						OR = {
							culture_group = dwarven
							culture_group = goblin
							culture_group = orcish
						}
						OR = {
							AND = {
								has_dwarven_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_dwarven_purge has_country_modifier = racial_pop_dwarven_expulsion } }
							}
							AND = {
								has_goblin_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_goblin_purge has_country_modifier = racial_pop_goblin_expulsion } }
							}
							AND = {
								has_orcish_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_orcish_purge has_country_modifier = racial_pop_orcish_expulsion } }
							}
						}
					}
				}
				random_owned_province = {
					limit = {
						continent = serpentspine
						OR = {
							culture_group = dwarven
							culture_group = goblin
							culture_group = orcish
						}
						OR = {
							AND = {
								has_dwarven_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_dwarven_purge has_country_modifier = racial_pop_dwarven_expulsion } }
							}
							AND = {
								has_goblin_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_goblin_purge has_country_modifier = racial_pop_goblin_expulsion } }
							}
							AND = {
								has_orcish_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_orcish_purge has_country_modifier = racial_pop_orcish_expulsion } }
							}
						}
					}
					save_event_target_as = event_province
				}
				country_event = { id = diggy.756 }
			}
		
			#mining accident
			50 = {
				trigger = { 
					any_owned_province = {
						continent = serpentspine
						OR = {
							culture_group = dwarven
							culture_group = goblin
							culture_group = orcish
						}
						OR = {
							AND = {
								has_dwarven_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_dwarven_purge has_country_modifier = racial_pop_dwarven_expulsion } }
							}
							AND = {
								has_goblin_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_goblin_purge has_country_modifier = racial_pop_goblin_expulsion } }
							}
							AND = {
								has_orcish_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_orcish_purge has_country_modifier = racial_pop_orcish_expulsion } }
							}
						}
						province_with_mineable_goods = yes
					}
				}
				random_owned_province = {
					limit = {
						continent = serpentspine
						OR = {
							culture_group = dwarven
							culture_group = goblin
							culture_group = orcish
						}
						OR = {
							AND = {
								has_dwarven_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_dwarven_purge has_country_modifier = racial_pop_dwarven_expulsion } }
							}
							AND = {
								has_goblin_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_goblin_purge has_country_modifier = racial_pop_goblin_expulsion } }
							}
							AND = {
								has_orcish_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_orcish_purge has_country_modifier = racial_pop_orcish_expulsion } }
							}
						}
						province_with_mineable_goods = yes
					}
					save_event_target_as = event_province
				}
				country_event = { id = diggy.757 }
			}

			#grumpy elites
			50 = {
				trigger = { 
					culture_group = dwarven
					any_owned_province = {
						culture_group = dwarven
						continent = serpentspine
						is_city = yes
						OR = {
							AND = {
								has_goblin_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_goblin_purge has_country_modifier = racial_pop_goblin_expulsion } }
							}
							AND = {
								has_orcish_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_orcish_purge has_country_modifier = racial_pop_orcish_expulsion } }
							}
						}
					}
				}
				random_owned_province = {
					limit = {
						culture_group = dwarven
						continent = serpentspine
						is_city = yes
						OR = {
							AND = {
								has_goblin_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_goblin_purge has_country_modifier = racial_pop_goblin_expulsion } }
							}
							AND = {
								has_orcish_minority_trigger = yes
								ROOT = { NOT = { has_country_modifier = racial_pop_orcish_purge has_country_modifier = racial_pop_orcish_expulsion } }
							}
						}
					}
					save_event_target_as = event_province
				}
				country_event = { id = diggy.758 }
			}
		}
		ai_chance = { factor = 5 }
	}
}

#minorities fight
country_event = {
	id = diggy.751
	title = diggy.751.t
	desc = diggy.751.d
	picture = NUSANTARA_WAR_eventPicture

	is_triggered_only = yes
	trigger = { always = yes }
	goto = event_province

	#ohno
	option = {
		name = diggy.751.a
		event_target:event_province = {
			add_devastation = 15
			if = {
				limit = { has_dwarven_minority_trigger = yes }
				remove_dwarven_minority_size_effect = yes
			}
			if = {
				limit = { has_goblin_minority_trigger = yes }
				remove_goblin_minority_size_effect = yes
			}
			if = {
				limit = { has_orcish_minority_trigger = yes }
				remove_orcish_minority_size_effect = yes
			}
		}
		ai_chance = { factor = 5 }
	}
}

#minorities restricted to certain businesses
country_event = {
	id = diggy.752
	title = diggy.752.t
	desc = diggy.752.d
	picture = ECONOMY_eventPicture

	is_triggered_only = yes
	trigger = { always = yes }
	goto = event_province

	#this is fine
	option = {
		name = diggy.752.a
		event_target:event_province = { 
			add_province_modifier = { name = dwarovar_restricted_output duration = 5475 } 
			if = {
				limit = { has_dwarven_minority_trigger = yes }
				ROOT = { medium_decrease_of_dwarven_tolerance_effect = yes }
			}
			if = {
				limit = { has_goblin_minority_trigger = yes }
				ROOT = { medium_decrease_of_goblin_tolerance_effect = yes }
			}
			if = {
				limit = { has_orcish_minority_trigger = yes }
				ROOT = { medium_decrease_of_orcish_tolerance_effect = yes }
			}
		}
		ai_chance = { factor = 5 }
	}

	#force change
	option = {
		name = diggy.752.b
		add_legitimacy = -10
		add_republican_tradition = -4
		add_devotion = -10
		if = {
			limit = { has_estate = estate_burghers }
			add_estate_loyalty = { estate = estate_burghers loyalty = -15 }
		}
		else = { 
			reduce_stability_or_adm_power = yes 
		}
		ai_chance = { factor = 0 }
	}
}

#dwarves don't want minorities in their homes
country_event = {
	id = diggy.753
	title = diggy.753.t
	desc = diggy.753.d
	picture = ANGRY_MOB_eventPicture

	is_triggered_only = yes
	trigger = { always = yes }
	goto = event_province

	#well ok
	option = {
		name = diggy.753.a
		event_target:event_province = {
			add_unrest = -3
			if = {
				limit = { has_goblin_minority_trigger = yes }
				ROOT = { small_decrease_of_goblin_tolerance_effect = yes }
				remove_goblin_minority_size_effect = yes
			}
			if = {
				limit = { has_orcish_minority_trigger = yes }
				ROOT = { small_decrease_of_orcish_tolerance_effect = yes }
				remove_orcish_minority_size_effect = yes
			}
			random_list = {
				25 = { add_base_tax = 1 }
				25 = { add_base_production = 1 }
				50 = {}
			}
		}
		ai_chance = { factor = 50 }
	}

	#listen here you idiots
	option = {
		name = diggy.753.b
		add_legitimacy = -10
		add_republican_tradition = -4
		add_devotion = -10
		event_target:event_province = {
			add_unrest = 5
			add_local_autonomy = 25
		}
		ai_chance = { factor = 0 }
	}
}

#cartels not providing safety for minorities
country_event = {
	id = diggy.754
	title = diggy.754.t
	desc = diggy.754.d
	picture = KINGS_CHOICE_eventPicture

	is_triggered_only = yes
	trigger = { always = yes }
	goto = event_province

	#well ok
	option = {
		name = diggy.754.a
		event_target:event_province = {
			if = {
				limit = { has_dwarven_minority_trigger = yes }
				ROOT = { largest_decrease_of_dwarven_tolerance_effect = yes }
			}
			if = {
				limit = { has_goblin_minority_trigger = yes }
				ROOT = { largest_decrease_of_goblin_tolerance_effect = yes }
			}
			if = {
				limit = { has_orcish_minority_trigger = yes }
				ROOT = { largest_decrease_of_orcish_tolerance_effect = yes }
			}
		}
		ai_chance = { factor = 50 }
	}

	#pay yourself
	option = {
		name = diggy.754.b
		add_years_of_income = -1
		ai_chance = { factor = 0 }
	}
}

#ancestral claims
country_event = {
	id = diggy.755
	title = diggy.755.t
	desc = diggy.755.d
	picture = MERCHANTS_ARGUING_eventPicture

	is_triggered_only = yes
	trigger = { always = yes }
	goto = event_province

	#you deal with this crap
	option = {
		name = diggy.755.a
		event_target:event_province = {
			add_unrest = 4
			random_list = {
				25 = {
					if = {
						limit = { base_tax = 1 }
						add_base_tax = -1
					}
					else = { add_adm_power = -40 }
				}
				25 = {
					if = {
						limit = { base_production = 1 }
						add_base_production = -1
					}
					else = { add_dip_power = -40 }
				}
				25 = {
					if = {
						limit = { base_manpower = 1 }
						add_base_manpower = -1
					}
					else = { add_mil_power = -40 }
				}
			}
		}
		ai_chance = { factor = 50 }
	}

	#fine stop arguing
	option = {
		name = diggy.755.b
		add_prestige = -5
		change_government_reform_progress = -30
		ai_chance = { factor = 0 }
	}
}

#xenophobic districts
country_event = {
	id = diggy.756
	title = diggy.756.t
	desc = diggy.756.d
	picture = OVEREXTENSION_eventPicture

	is_triggered_only = yes
	trigger = { always = yes }
	goto = event_province

	#so what?
	option = {
		name = diggy.756.a
		event_target:event_province = {
			add_unrest = 2
			add_local_autonomy = 25
			add_province_modifier = { name = dwarovar_minority_districts duration = 3650 }
		}
		ai_chance = { factor = 50 }
	}

	#can't we all get along?
	option = {
		name = diggy.756.b
		add_legitimacy = -10
		add_republican_tradition = -4
		add_devotion = -10
		event_target:event_province = { add_unrest = 6 }
		ai_chance = { factor = 0 }
	}
}

#mining accident
country_event = {
	id = diggy.757
	title = diggy.757.t
	desc = diggy.757.d
	picture = TRADE_GOODS_METALS_AND_MINING_EQUIPENT_eventPicture

	is_triggered_only = yes
	trigger = { always = yes }
	goto = event_province

	#blame the minority yeah
	option = {
		name = diggy.757.a
		event_target:event_province = {
			add_unrest = 2
			if = {
				limit = { has_dwarven_minority_trigger = yes }
				ROOT = { medium_decrease_of_dwarven_tolerance_effect = yes }
			}
			if = {
				limit = { has_goblin_minority_trigger = yes }
				ROOT = { medium_decrease_of_goblin_tolerance_effect = yes }
			}
			if = {
				limit = { has_orcish_minority_trigger = yes }
				ROOT = { medium_decrease_of_orcish_tolerance_effect = yes }
			}
		}
		ai_chance = { factor = 50 }
	}

	#pay for damages
	option = {
		name = diggy.757.b
		add_years_of_income = -0.5
		add_adm_power = -10
		add_dip_power = -15
		ai_chance = { factor = 0 }
	}
}

#grumpy elites
country_event = {
	id = diggy.758
	title = diggy.758.t
	desc = diggy.758.d
	picture = DHIMMI_ESTATE_UPSET_eventPicture

	is_triggered_only = yes
	trigger = { always = yes }
	goto = event_province

	#yeah ok
	option = {
		name = diggy.758.a
		if = {
			limit = { has_estate = estate_nobles }
			add_estate_loyalty = { estate = estate_nobles loyalty = 10 }
		}
		else_if = {
			limit = { has_estate = estate_burghers }
			add_estate_loyalty = { estate = estate_burghers loyalty = 10 }
		}
		else = { add_prestige = 10 }
		event_target:event_province = {
			add_unrest = 5
			if = {
				limit = { has_goblin_minority_trigger = yes }
				ROOT = { medium_decrease_of_goblin_tolerance_effect = yes }
			}
			if = {
				limit = { has_orcish_minority_trigger = yes }
				ROOT = { medium_decrease_of_orcish_tolerance_effect = yes }
			}
		}
		ai_chance = { factor = 50 }
	}

	#times have changed old man
	option = {
		name = diggy.758.b
		if = {
			limit = { has_estate = estate_nobles }
			add_estate_loyalty = { estate = estate_nobles loyalty = -10 }
			if = {
				limit = { estate_influence = { estate = estate_nobles influence = 50 } }
				reduce_stability_or_adm_power = yes
			}
		}
		else_if = {
			limit = { has_estate = estate_burghers }
			add_estate_loyalty = { estate = estate_burghers loyalty = -10 }
			if = {
				limit = { estate_influence = { estate = estate_burghers influence = 50 } }
				reduce_stability_or_adm_power = yes
			}
		}
		else = { 
			add_prestige = -10 
			reduce_stability_or_adm_power = yes
		}

		ai_chance = { factor = 0 }
	}
}
