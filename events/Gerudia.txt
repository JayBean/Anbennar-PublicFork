
namespace = gerudia

country_event = { #Consult with Skalds
	id = "gerudia.3"
	title = "gerudia.3.t"
	desc = "gerudia.3.d"
	picture = RELIGIOUS_CONVERSION_eventPicture
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = { #vassal
		name = "gerudia.3.a"
		ai_chance = { 
			factor = 75
		}
		
		Z09 = { country_event = { id = "gerudia.4" days = 15} }
	}
	option = { #push claims
		name = "gerudia.3.b"
		ai_chance = { 
			factor = 25
		}
		
		elkaesals_slumber_area = {
			add_claim = Z08
		}
		976 = {
			add_claim = Z08
		}
		Z09 = { country_event = { id = "gerudia.7" days = 15} }
	}
	option = { #nothing
		name = "gerudia.3.c"
		
		add_dip_power = 10
	}
}

country_event = { #Consult with Skalds - Skaldskola offered vassalization
	id = "gerudia.4"
	title = "gerudia.4.t"
	desc = "gerudia.4.d"
	picture = CONQUEST_eventPicture
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = { #yes
		name = "gerudia.4.a"
		ai_chance = { 
			factor = 75
			modifier = {
				factor = 2
				has_opinion = {
					who = Z08
					value = 200
				}
			}
			modifier = {
				factor = 0.5
				army_strength = {
					who = Z08
					value = 1.0
				}
			}
			modifier = {
				factor = 0.01
				army_strength = {
					who = Z08
					value = 1.5
				}
			}
		}
		
		Z08 = { country_event = { id = "gerudia.5" } }
	}
	option = { #no
		name = "gerudia.4.b"
		ai_chance = { 
			factor = 25
			modifier = {
				factor = 5
				army_strength = {
					who = Z08
					value = 1.0
				}
			}
			modifier = {
				factor = 100
				army_strength = {
					who = Z08
					value = 1.5
				}
			}
		}
		
		Z08 = { country_event = { id = "gerudia.6" } }
	}
}

country_event = { #Consult with Skalds - Skaldskola vassal yes
	id = "gerudia.5"
	title = "gerudia.5.t"
	desc = "gerudia.5.d"
	picture = GOOD_WITH_MONARCH_eventPicture
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = "gerudia.5.a"
		
		vassalize = Z09
	}
}

country_event = { #Consult with Skalds - Skaldskola vassal no
	id = "gerudia.6"
	title = "gerudia.6.t"
	desc = "gerudia.6.d"
	picture = BAD_WITH_MONARCH_eventPicture
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = "gerudia.6.a"
		
		add_opinion = {
			who = Z09
			modifier = gerudia_skald
		}
		reverse_add_opinion = {
			who = Z09
			modifier = gerudia_skald
		}
		add_trust = {
			who = Z09
			value = -10
			mutual = yes
		}
	}
}

country_event = { #Consult with Skalds - Skaldskola push claims
	id = "gerudia.7"
	title = "gerudia.7.t"
	desc = "gerudia.7.d"
	picture = ACCUSATION_eventPicture
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = "gerudia.7.a"
		add_opinion = {
			who = Z09
			modifier = gerudia_skald
		}
		reverse_add_opinion = {
			who = Z09
			modifier = gerudia_skald
		}
		add_trust = {
			who = Z09
			value = -10
			mutual = yes
		}
	}
}

country_event = { #Celmaldor
	id = "gerudia.8"
	title = "gerudia.8.t"
	desc = "gerudia.8.d"
	picture = CITY_VIEW_eventPicture
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = { #Celmaldor Vassal
		name = "gerudia.8.a"
		if = {
			limit = {
				NOT = { exists = Z22 }
				Z21 = {
					is_subject_of = ROOT
				}
			}
			inherit = Z21
			serpentshead_area = {
				add_core = Z22
			}
			create_vassal_with_religion_and_culture = { tag = Z22 religion = regent_court culture = moon_elf }
			Z22 = {
				add_liberty_desire = -25
			}
			696 = {
				add_trade_modifier = {
					who = ROOT
					duration = -1
					power = 25
					key = STRONG_MERCHANTS
				}
			}
		}
		else_if = {
			limit = {
				NOT = { exists = Z22 }
				NOT = { exists = Z21 }
			}
			serpentshead_area = {
				add_core = Z22
			}
			create_vassal_with_religion_and_culture = { tag = Z22 religion = regent_court culture = moon_elf }
			Z22 = {
				add_liberty_desire = -25
			}
			696 = {
				add_trade_modifier = {
					who = ROOT
					duration = -1
					power = 25
					key = STRONG_MERCHANTS
				}
			}
		}
		else_if = {
			limit = {
				Z22 = {
					is_subject_of = Z08
				}
			}
			Z22 = {
				add_liberty_desire = -25
			}
			696 = {
				add_trade_modifier = {
					who = ROOT
					duration = -1
					power = 25
					key = STRONG_MERCHANTS
				}
			}
		}
	}
	option = { #Direct Control
		name = "gerudia.8.b"
		
		696 = { 
			add_permanent_province_modifier = {
				name = bjarnrik_celmaldor_direct
				duration = -1 
			}
		}
	}
}

country_event = { #talderannic
	id = "gerudia.9"
	title = "gerudia.9.t"
	desc = "gerudia.9.d"
	picture = TRADE_GOODS_FURS_FISH_AND_SALT_eventPicture
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = "gerudia.9.a"
		
		lencenor_region = {
			limit = {
				culture = derannic
				owned_by = ROOT
			}
			change_culture = talderannic
		}
		remove_accepted_culture = derannic
		add_accepted_culture = talderannic
	}
	option = {
		name = "gerudia.9.b"
		
		add_dip_power = 25
	}
}
country_event = { #Perlatter
	id = "gerudia.10"
	title = "gerudia.10.t"
	desc = "gerudia.10.d"
	picture = TRADE_GOODS_FURS_FISH_AND_SALT_eventPicture
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = "gerudia.10.a"
		
		west_dameshead_region = {
			limit = {
				culture = pearlsedger
				owned_by = ROOT
			}
			change_culture = perlatter
		}
		remove_accepted_culture = pearlsedger
		add_accepted_culture = perlatter
	}
	option = {
		name = "gerudia.10.b"
		
		add_dip_power = 25
	}
}
country_event = { #Skalds and Artificers
	id = "gerudia.11"
	title = "gerudia.11.t"
	desc = "gerudia.11.d"
	picture = DEBATE_REPUBLICAN_eventPicture
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = "gerudia.11.a"
		add_stability_or_adm_power = yes
		add_country_modifier = { name = "bjarnrik_skalds" duration = -1 }
	}
	option = {
		name = "gerudia.11.b"
		change_innovativeness = 5
		add_country_modifier = { name = "bjarnrik_artificers" duration = -1 }
	}
}

country_event = { #Bjarnrik Revolt events - Crown of Bera Start
	id = "gerudia.12"
	title = "gerudia.12.t"
	desc = "gerudia.12.d"
	picture = VIKING_KING_eventPicture
	
	fire_only_once = yes
	trigger = {
		tag = Z08
		NOT = { is_year = 1500 }
	}
	mean_time_to_happen = {
		months = 2
	}
	
	immediate = {
		hidden_effect = {
			set_variable = { revrhavn_loyalty = 2 }
			set_variable = { sidaett_loyalty = 4 }
			set_variable = { blodfjell_loyalty = 3 }
			set_variable = { frostbrygja_loyalty = 4 }
			set_variable = { varheim_loyalty = 2 }
		}
	}
	
	option = {
		name = "gerudia.12.a"
		country_event = { id = gerudia.13 days = 60 }
		custom_tooltip = loyalty_tooltip
	}
}

country_event = { #Bjarnrik Revolt Events - Thralls
	id = "gerudia.13"
	title = "gerudia.13.t"
	desc = "gerudia.13.d"
	picture = FLAGSHIP_CAPTURED_eventPicture
	
	fire_only_once = yes
	is_triggered_only = yes
	
	immediate = {
		random_owned_province = {
			save_event_target_as = gerudia_thrall_random
		}
	}
	
	option = { #End Thralldom
		name = "gerudia.13.a"
		ai_chance = {
			factor = 90
			modifier = {
				factor = 100
				OR = {
					Z10 = { ai = no }
					Z83 = { ai = no }
				}
			}
		}
		hidden_effect = {
			subtract_variable = { revrhavn_loyalty = 2 }
			subtract_variable = { blodfjell_loyalty = 2 }
		}
		custom_tooltip = loyalty_tooltip
		custom_tooltip = revrhavn_decrease_loyalty_heavy_tooltip
		custom_tooltip = blodfjell_decrease_loyalty_heavy_tooltip
		country_event = { id = gerudia.14 days = 30 }
		add_country_modifier = { name = "gerudia_wandering_thralls" duration = 3650 }
		event_target:gerudia_thrall_random = {
			add_base_tax = 2
		}
	}
	option = { #End Thralldom with compensation
		name = "gerudia.13.b"
		ai_chance = {
			factor = 5
			modifier = {
				factor = 10
				OR = {
					Z10 = { ai = no }
					Z83 = { ai = no }
				}
			}
		}
		hidden_effect = {
			subtract_variable = { revrhavn_loyalty = 1 }
			subtract_variable = { blodfjell_loyalty = 1 }
		}
		custom_tooltip = loyalty_tooltip
		custom_tooltip = revrhavn_decrease_loyalty_tooltip
		custom_tooltip = blodfjell_decrease_loyalty_tooltip
		country_event = { id = gerudia.14 days = 30 }
		add_years_of_income = -0.25
		hidden_effect = {
			Z10 = {
				add_years_of_income = 1
			}
		}
		event_target:gerudia_thrall_random = {
			add_base_tax = 2
		}
	}
	option = { #Keep Thralldom
		name = "gerudia.13.c"
		ai_chance = {
			factor = 5
			modifier = {
				factor = 100
				OR = {
					Z11 = { ai = no }
					Z84 = { ai = no }
				}
			}
		}
		hidden_effect = {
			subtract_variable = { sidaett_loyalty = 1 }
			subtract_variable = { varheim_loyalty = 1 }
		}
		custom_tooltip = loyalty_tooltip
		custom_tooltip = sidaett_decrease_loyalty_tooltip
		custom_tooltip = varheim_decrease_loyalty_tooltip
		country_event = { id = gerudia.14 days = 30 }
		add_country_modifier = { name = "gerudia_thrallmaster" duration = 3650 }
	}
}

country_event = { #Bjarnrik Revolt Events - Troll Raids
	id = "gerudia.14"
	title = "gerudia.14.t"
	desc = "gerudia.14.d"
	picture = FROZEN_VILLAGE_eventPicture
	
	fire_only_once = yes
	is_triggered_only = yes
	
	option = { #Blodfjell
		name = "gerudia.14.a"
		ai_chance = {
			factor = 4
			modifier = {
				factor = 100
				Z11 = { ai = no }
			}
		}
		hidden_effect = {
			change_variable = { blodfjell_loyalty = 1 }
			subtract_variable = { sidaett_loyalty = 1 }
		}
		custom_tooltip = loyalty_tooltip
		custom_tooltip = blodfjell_increase_loyalty_tooltip
		custom_tooltip = sidaett_decrease_loyalty_tooltip
		add_years_of_income = -0.25
		969 = {
			add_permanent_province_modifier = { name = gerudia_aid_from_bjarnrik duration = 5475 }
		}
		country_event = { id = gerudia.15 days = 30 }
	}
	option = { #Sidaett
		name = "gerudia.14.b"
		ai_chance = {
			factor = 5
			modifier = {
				factor = 100
				Z83 = { ai = no }
			}
		}
		hidden_effect = {
			change_variable = { sidaett_loyalty = 1 }
			subtract_variable = { blodfjell_loyalty = 1 }
		}
		custom_tooltip = loyalty_tooltip
		custom_tooltip = sidaett_increase_loyalty_tooltip
		custom_tooltip = blodfjell_decrease_loyalty_tooltip
		add_years_of_income = -0.25
		970 = {
			add_permanent_province_modifier = { name = gerudia_aid_from_bjarnrik duration = 5475 }
		}
		country_event = { id = gerudia.15 days = 30 }
	}
	option = { #Neither
		name = "gerudia.14.c"
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			subtract_variable = { sidaett_loyalty = 1 }
			subtract_variable = { blodfjell_loyalty = 1 }
			subtract_variable = { revrhavn_loyalty = 1 }
			subtract_variable = { varheim_loyalty = 1 }
			subtract_variable = { frostbrygja_loyalty = 1 }
		}
		custom_tooltip = loyalty_tooltip
		custom_tooltip = revrhavn_decrease_loyalty_tooltip
		custom_tooltip = sidaett_decrease_loyalty_tooltip
		custom_tooltip = blodfjell_decrease_loyalty_tooltip
		custom_tooltip = frostbrygja_decrease_loyalty_tooltip
		custom_tooltip = varheim_decrease_loyalty_tooltip
		add_country_modifier = { name = "gerudia_compromised_trollwards" duration = 5475 }
		every_subject_country = {
			add_country_modifier = { name = "gerudia_compromised_trollwards" duration = 5475 }
		}
		country_event = { id = gerudia.15 days = 30 }
	}
}

country_event = { #Bjarnrik Revolt Events - Consort
	id = "gerudia.15"
	title = "gerudia.15.t"
	desc = "gerudia.15.d"
	picture = QUEEN_AND_MALE_HEIR_eventPicture
	
	fire_only_once = yes
	is_triggered_only = yes
	
	option = { #Deny
		name = "gerudia.15.a"
		ai_chance = {
			factor = 5
			modifier = {
				factor = 10
				OR = {
					Z10 = { ai = no }
					Z83 = { ai = no }
					Z84 = { ai = no }
					Z85 = { ai = no }
				}
			}
		}
		hidden_effect = {
			change_variable = { sidaett_loyalty = 1 }
			subtract_variable = { blodfjell_loyalty = 1 }
			subtract_variable = { revrhavn_loyalty = 1 }
			subtract_variable = { varheim_loyalty = 1 }
			subtract_variable = { frostbrygja_loyalty = 1 }
		}
		custom_tooltip = loyalty_tooltip
		custom_tooltip = sidaett_increase_loyalty_tooltip
		custom_tooltip = revrhavn_decrease_loyalty_tooltip
		custom_tooltip = blodfjell_decrease_loyalty_tooltip
		custom_tooltip = frostbrygja_decrease_loyalty_tooltip
		custom_tooltip = varheim_decrease_loyalty_tooltip
		add_legitimacy = -10
		country_event = { id = gerudia.16 days = 30 }
	}
	option = { #Divorce
		name = "gerudia.15.b"
		ai_chance = {
			factor = 5
			modifier = {
				factor = 50
				Z11 = { ai = no }
			}
		}
		hidden_effect = {
			subtract_variable = { sidaett_loyalty = 1 }
			change_variable = { blodfjell_loyalty = 1 }
			change_variable = { revrhavn_loyalty = 1 }
			change_variable = { varheim_loyalty = 1 }
			change_variable = { frostbrygja_loyalty = 1 }
		}
		custom_tooltip = loyalty_tooltip
		custom_tooltip = sidaett_decrease_loyalty_tooltip
		custom_tooltip = revrhavn_increase_loyalty_tooltip
		custom_tooltip = blodfjell_increase_loyalty_tooltip
		custom_tooltip = frostbrygja_increase_loyalty_tooltip
		custom_tooltip = varheim_increase_loyalty_tooltip
		remove_consort_effect = yes
		country_event = { id = gerudia.16 days = 30 }
	}
	option = { #Divorce and Replace Heir
		name = "gerudia.15.c"
		ai_chance = {
			factor = 5
			modifier = {
				factor = 100
				Z11 = { ai = no }
			}
		}
		hidden_effect = {
			subtract_variable = { sidaett_loyalty = 2 }
		}
		custom_tooltip = loyalty_tooltip
		custom_tooltip = sidaett_decrease_loyalty_heavy_tooltip
		remove_heir = { allow_new_heir = no }
		define_heir = { dynasty = "Bjarnsson" age = 14 claim = 60 }
		set_heir_mage_effect = yes
		remove_consort_effect = yes
		define_consort = { dynasty = "Frondvagr" adm = 3 dip = 5 mil = 3 }
		country_event = { id = gerudia.16 days = 30 }
	}
	
}

country_event = { #Bjarnrik Revolt Events - Varheim/Revrhavn Encroachment
	id = "gerudia.16"
	title = "gerudia.16.t"
	desc = "gerudia.16.d"
	picture = WOUNDED_SOLDIERS_eventPicture
	
	fire_only_once = yes
	is_triggered_only = yes
	
	option = { #Condemn
		name = "gerudia.16.a"
		ai_chance = {
			factor = 6
			modifier = {
				factor = 100
				OR = {
					Z10 = { ai = no }
					Z11 = { ai = no }
				}
			}
		}
		hidden_effect = {
			subtract_variable = { revrhavn_loyalty = 2 }
			change_variable = { varheim_loyalty = 1 }
		}
		custom_tooltip = loyalty_tooltip
		custom_tooltip = varheim_increase_loyalty_tooltip
		custom_tooltip = revrhavn_decrease_loyalty_heavy_tooltip
		Z10 = {
			add_country_modifier = { name = "gerudia_captains_in_port" duration = 5475 }
		}
		country_event = { id = gerudia.17 days = 30 }
	}
	option = { #Condemn and give Varheim privileges
		name = "gerudia.16.b"
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			subtract_variable = { revrhavn_loyalty = 2 }
			change_variable = { varheim_loyalty = 2 }
		}
		custom_tooltip = loyalty_tooltip
		custom_tooltip = varheim_increase_loyalty_heavy_tooltip
		custom_tooltip = revrhavn_decrease_loyalty_heavy_tooltip
		Z10 = {
			add_country_modifier = { name = "gerudia_captains_in_port" duration = 5475 }
		}
		custom_tooltip = gerudia_release_varheim
		hidden_effect = {
			create_vassal = Z84
		}
		Z84 = {
			add_country_modifier = { name = "gerudia_rallied_hosts" duration = 5475 }
		}
		country_event = { id = gerudia.17 days = 30 }
	}
	option = { #Allow Revrhavn
		name = "gerudia.16.c"
		ai_chance = {
			factor = 3
			modifier = {
				factor = 100
				Z84 = { ai = no }
			}
		}
		hidden_effect = {
			change_variable = { revrhavn_loyalty = 1 }
			subtract_variable = { varheim_loyalty = 2 }
		}
		custom_tooltip = loyalty_tooltip
		custom_tooltip = varheim_decrease_loyalty_heavy_tooltip
		custom_tooltip = revrhavn_increase_loyalty_tooltip
		country_event = { id = gerudia.17 days = 30 }
	}
}

country_event = { #Bjarnrik Revolt Events - Raiding
	id = "gerudia.17"
	title = "gerudia.17.t"
	desc = "gerudia.17.d"
	picture = VIKINGS_eventPicture
	
	fire_only_once = yes
	is_triggered_only = yes
	
	option = { #End Raiding
		name = "gerudia.17.a"
		ai_chance = {
			factor = 10
			modifier = {
				factor = 100
				OR = {
					Z10 = { ai = no }
					Z83 = { ai = no }
					Z85 = { ai = no }
				}
			}
		}
		hidden_effect = {
			subtract_variable = { revrhavn_loyalty = 2 }
			subtract_variable = { blodfjell_loyalty = 1 }
			subtract_variable = { frostbrygja_loyalty = 1 }
			country_event = { id = gerudia.19 days = 1 }
			set_variable = { which = gerudia_lowest_value value = 10 }
		}
		custom_tooltip = loyalty_tooltip
		custom_tooltip = revrhavn_decrease_loyalty_heavy_tooltip
		custom_tooltip = blodfjell_decrease_loyalty_tooltip
		custom_tooltip = frostbrygja_decrease_loyalty_tooltip
		add_ruler_modifier = { name = gerudia_emancipator duration = -1 }
		add_country_modifier = { name = "gerudia_disheartened_reavers" duration = 5475 }
	}
	option = { #Allow Raiding
		name = "gerudia.17.b"
		ai_chance = {
			factor = 1
			modifier = {
				factor = 1000
				OR = {
					Z11 = { ai = no }
					Z84 = { ai = no }
				}
			}
		}
		hidden_effect = {
			subtract_variable = { sidaett_loyalty = 2 }
			subtract_variable = { varheim_loyalty = 1 }
			country_event = { id = gerudia.19 days = 1 }
			set_variable = { which = gerudia_lowest_value value = 10 }
		}
		custom_tooltip = loyalty_tooltip
		custom_tooltip = sidaett_decrease_loyalty_heavy_tooltip
		custom_tooltip = varheim_decrease_loyalty_tooltip
		add_country_modifier = { name = "northern_barbarian" duration = 9125 }
	}
	
}

country_event = { #Bjarnrik Revolt Events - AI
	id = "gerudia.19"
	title = "gerudia.19.t"
	desc = "gerudia.19.d"
	picture = FORESTS_eventPicture
	
	hidden = yes
	fire_only_once = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { 
				AND = {
					check_variable = { which = revrhavn_loyalty value = -6 }
					NOT = { check_variable = { which = revrhavn_loyalty value = 2 } }
				}
			}
			Z10 = {
				set_country_flag = gerudia_rebellious
			}
		}
		if = {
			limit = { 
				AND = {
					check_variable = { which = sidaett_loyalty value = -6 }
					NOT = { check_variable = { which = sidaett_loyalty value = 2 } }
				}
			}
			Z11 = {
				set_country_flag = gerudia_rebellious
			}
		}
		if = {
			limit = { 
				AND = {
					check_variable = { which = blodfjell_loyalty value = -6 }
					NOT = { check_variable = { which = blodfjell_loyalty value = 2 } }
				}
			}
			Z83 = {
				set_country_flag = gerudia_rebellious
			}
		}
		if = {
			limit = { 
				AND = {
					check_variable = { which = varheim_loyalty value = -6 }
					NOT = { check_variable = { which = varheim_loyalty value = 2 } }
				}
			}
			Z84 = {
				set_country_flag = gerudia_rebellious
			}
		}
		if = {
			limit = { 
				AND = {
					check_variable = { which = frostbrygja_loyalty value = -6 }
					NOT = { check_variable = { which = frostbrygja_loyalty value = 2 } }
				}
			}
			Z85 = {
				set_country_flag = gerudia_rebellious
			}
		}
		if = {
			limit = {
				Z10 = { has_country_flag = gerudia_rebellious }
				ROOT = { check_variable = { which = gerudia_lowest_value which = revrhavn_loyalty } }
			}
			ROOT = {
				set_variable = { which = gerudia_lowest_value which = revrhavn_loyalty }
				set_variable = { which = gerudia_lowest_valueplusone which = gerudia_lowest_value }
				change_variable = { which = gerudia_lowest_valueplusone value = 1 }
			}
		}
		else_if = {
			limit = {
				Z11 = { has_country_flag = gerudia_rebellious }
				ROOT = { check_variable = { which = gerudia_lowest_value which = sidaett_loyalty } }
			}
			ROOT = {
				set_variable = { which = gerudia_lowest_value which = sidaett_loyalty }
				set_variable = { which = gerudia_lowest_valueplusone which = gerudia_lowest_value }
				change_variable = { which = gerudia_lowest_valueplusone value = 1 }
			}
		}
		else_if = {
			limit = {
				Z83 = { has_country_flag = gerudia_rebellious }
				ROOT = { check_variable = { which = gerudia_lowest_value which = blodfjell_loyalty } }
			}
			ROOT = {
				set_variable = { which = gerudia_lowest_value which = blodfjell_loyalty }
				set_variable = { which = gerudia_lowest_valueplusone which = gerudia_lowest_value }
				change_variable = { which = gerudia_lowest_valueplusone value = 1 }
			}
		}
		else_if = {
			limit = {
				Z84 = { has_country_flag = gerudia_rebellious }
				ROOT = { check_variable = { which = gerudia_lowest_value which = varheim_loyalty } }
			}
			ROOT = {
				set_variable = { which = gerudia_lowest_value which = varheim_loyalty }
				set_variable = { which = gerudia_lowest_valueplusone which = gerudia_lowest_value }
				change_variable = { which = gerudia_lowest_valueplusone value = 1 }
			}
		}
		else_if = {
			limit = {
				Z85 = { has_country_flag = gerudia_rebellious }
				ROOT = { check_variable = { which = gerudia_lowest_value which = frostbrygja_loyalty } }
			}
			ROOT = {
				set_variable = { which = gerudia_lowest_value which = frostbrygja_loyalty }
				set_variable = { which = gerudia_lowest_valueplusone which = gerudia_lowest_value }
				change_variable = { which = gerudia_lowest_valueplusone value = 1 }
			}
		}
	}
	
	option = {
		if = {
			limit = {
				any_subject_country = { ai = no }
				NOT = { has_country_flag = refused_rebellion }
			}
			Z08 = {
				random_subject_country = {
					limit = { ai = no }
					country_event = { id = gerudia.20 days = 15 }
				}
			}
		}
		else_if = {
			limit = {
				Z10 = { has_country_flag = gerudia_rebellious }
				ROOT = { 
					check_variable = { which = gerudia_lowest_value which = revrhavn_loyalty } 
					NOT = {
						check_variable = { which = gerudia_lowest_value which = gerudia_lowest_valueplusone }
					}
				}
			}
			Z10 = {
				country_event = { id = gerudia.20 days = 15 }
			}
		}
		else_if = {
			limit = {
				Z11 = { has_country_flag = gerudia_rebellious }
				ROOT = { 
					check_variable = { which = gerudia_lowest_value which = sidaett_loyalty } 
					NOT = {
						check_variable = { which = gerudia_lowest_value which = gerudia_lowest_valueplusone }
					}
				}
			}
			Z11 = {
				country_event = { id = gerudia.20 days = 15 }
			}
		}
		else_if = {
			limit = {
				Z83 = { has_country_flag = gerudia_rebellious }
				ROOT = { 
					check_variable = { which = gerudia_lowest_value which = blodfjell_loyalty } 
					NOT = {
						check_variable = { which = gerudia_lowest_value which = gerudia_lowest_valueplusone }
					}
				}
			}
			create_vassal = Z83
			Z83 = {
				country_event = { id = gerudia.20 days = 15 }
			}
		}
		else_if = {
			limit = {
				Z84 = { has_country_flag = gerudia_rebellious }
				ROOT = { 
					check_variable = { which = gerudia_lowest_value which = varheim_loyalty } 
					NOT = {
						check_variable = { which = gerudia_lowest_value which = gerudia_lowest_valueplusone }
					}
				}
			}
			create_vassal = Z84
			Z84 = {
				country_event = { id = gerudia.20 days = 15 }
			}
		}
		else_if = {
			limit = {
				Z85 = { has_country_flag = gerudia_rebellious }
				ROOT = { 
					check_variable = { which = gerudia_lowest_value which = frostbrygja_loyalty } 
					NOT = {
						check_variable = { which = gerudia_lowest_value which = gerudia_lowest_valueplusone }
					}
				}
			}
			create_vassal = Z85
			Z85 = {
				country_event = { id = gerudia.20 days = 15 }
			}
		}
	}
}

country_event = { #Bjarnrik Revolt Events - Schemes
	id = "gerudia.20"
	title = "gerudia.20.t"
	desc = "gerudia.20.d"
	picture = DIPLOMACY_eventPicture
	
	fire_only_once = yes
	is_triggered_only = yes
	
	immediate = {
		save_global_event_target_as = gerudia_ringleader
		set_country_flag = gerudia_ringleader_flag
	}
	
	option = { #start rebellion
		name = "gerudia.20.a"
		add_country_modifier = { name = "gerudia_revolt_buff" duration = 5475 }
		if = {
			limit = { Z10 = { has_country_flag = gerudia_rebellious } }
			custom_tooltip = revrhavn_rebellious_tooltip
		}
		if = {
			limit = { Z11 = { has_country_flag = gerudia_rebellious } }
			custom_tooltip = sidaett_rebellious_tooltip
		}
		if = {
			limit = { Z83 = { has_country_flag = gerudia_rebellious } }
			custom_tooltip = blodfjell_rebellious_tooltip
		}
		if = {
			limit = { Z84 = { has_country_flag = gerudia_rebellious } }
			custom_tooltip = varheim_rebellious_tooltip
		}
		if = {
			limit = { Z85 = { has_country_flag = gerudia_rebellious } }
			custom_tooltip = frostbrygja_rebellious_tooltip
		}
		Z08 = {
			country_event = { id = gerudia.21 days = 30 }
		}
	}
	option = { #refuse
		name = "gerudia.20.b"
		trigger = { ai = no }
		set_country_flag = refused_rebellion
		country_event = { id = gerudia.19 }
	}
}

country_event = { #Bjarnrik Warning
	id = "gerudia.21"
	title = "gerudia.21.t"
	desc = "gerudia.21.d"
	picture = LAND_MILITARY_eventPicture
	
	fire_only_once = yes
	is_triggered_only = yes
	
	option = { #Continue as Bjarnrik
		name = "gerudia.21.a"
		custom_tooltip = gerudia_release_rebellious
		hidden_effect = {
			if = {
				limit = { 
					Z83 = { 
						has_country_flag = gerudia_rebellious
						is_subject = no
					}
				}
				create_vassal = Z83
				Z83 = { 
					set_country_flag = gerudia_rebellious
				}
				
			}
			if = {
				limit = { 
					Z84 = { 
						has_country_flag = gerudia_rebellious
						is_subject = no
					}
				}
				create_vassal = Z84
				Z84 = { 
					set_country_flag = gerudia_rebellious				
				}
			}
			if = {
				limit = { 
					Z85 = { 
						has_country_flag = gerudia_rebellious
						is_subject = no
					}
				}
				create_vassal = Z85
				Z85 = { 
					set_country_flag = gerudia_rebellious
				}
			}
		}
		hidden_effect = {
			every_subject_country = {
				limit = { NOT = { has_country_flag = gerudia_rebellious } }
				add_liberty_desire = -25
			}
		}
		FROM = {
			country_event = { id = gerudia.22 days = 180 }
		}
	}
	
	option = { #Continue as Revrhavn
		name = "gerudia.21.b"
		custom_tooltip = gerudia_release_rebellious
		
		trigger = {
			Z10 = {
				has_country_flag = gerudia_rebellious
				ai = yes
			}
			ai = no
		}
		
		hidden_effect = {
			if = {
				limit = { 
					Z83 = { 
						has_country_flag = gerudia_rebellious
						is_subject = no
					}
				}
				create_vassal = Z83
				Z83 = { 
					set_country_flag = gerudia_rebellious
				}
				
			}
			if = {
				limit = { 
					Z84 = { 
						has_country_flag = gerudia_rebellious
						is_subject = no
					}
				}
				create_vassal = Z84
				Z84 = { 
					set_country_flag = gerudia_rebellious				
				}
			}
			if = {
				limit = { 
					Z85 = { 
						has_country_flag = gerudia_rebellious
						is_subject = no
					}
				}
				create_vassal = Z85
				Z85 = { 
					set_country_flag = gerudia_rebellious
				}
			}
		}
		hidden_effect = {
			every_subject_country = {
				limit = { NOT = { has_country_flag = gerudia_rebellious } }
				add_liberty_desire = -25
			}
		}
		FROM = {
			country_event = { id = gerudia.22 days = 180 }
		}
		switch_tag = Z10
	}
	option = { #Continue as Sidaett
		name = "gerudia.21.c"
		custom_tooltip = gerudia_release_rebellious
		
		trigger = {
			Z11 = {
				has_country_flag = gerudia_rebellious
				ai = yes
			}
			ai = no
		}
		
		hidden_effect = {
			if = {
				limit = { 
					Z83 = { 
						has_country_flag = gerudia_rebellious
						is_subject = no
					}
				}
				create_vassal = Z83
				Z83 = { 
					set_country_flag = gerudia_rebellious
				}
				
			}
			if = {
				limit = { 
					Z84 = { 
						has_country_flag = gerudia_rebellious
						is_subject = no
					}
				}
				create_vassal = Z84
				Z84 = { 
					set_country_flag = gerudia_rebellious				
				}
			}
			if = {
				limit = { 
					Z85 = { 
						has_country_flag = gerudia_rebellious
						is_subject = no
					}
				}
				create_vassal = Z85
				Z85 = { 
					set_country_flag = gerudia_rebellious
				}
			}
		}
		hidden_effect = {
			every_subject_country = {
				limit = { NOT = { has_country_flag = gerudia_rebellious } }
				add_liberty_desire = -25
			}
		}
		FROM = {
			country_event = { id = gerudia.22 days = 180 }
		}
		switch_tag = Z11
	}
	option = { #Continue as Blodfjell
		name = "gerudia.21.dd"
		custom_tooltip = gerudia_release_rebellious
		
		trigger = {
			Z83 = {
				has_country_flag = gerudia_rebellious
				ai = yes
			}
			ai = no
		}
		
		hidden_effect = {
			if = {
				limit = { 
					Z83 = { 
						has_country_flag = gerudia_rebellious
						is_subject = no
					}
				}
				create_vassal = Z83
				Z83 = { 
					set_country_flag = gerudia_rebellious
				}
				
			}
			if = {
				limit = { 
					Z84 = { 
						has_country_flag = gerudia_rebellious
						is_subject = no
					}
				}
				create_vassal = Z84
				Z84 = { 
					set_country_flag = gerudia_rebellious				
				}
			}
			if = {
				limit = { 
					Z85 = { 
						has_country_flag = gerudia_rebellious
						is_subject = no
					}
				}
				create_vassal = Z85
				Z85 = { 
					set_country_flag = gerudia_rebellious
				}
			}
		}
		hidden_effect = {
			every_subject_country = {
				limit = { NOT = { has_country_flag = gerudia_rebellious } }
				add_liberty_desire = -25
			}
		}
		FROM = {
			country_event = { id = gerudia.22 days = 180 }
		}
		switch_tag = Z83
	}
	option = { #Continue as Varheim
		name = "gerudia.21.e"
		custom_tooltip = gerudia_release_rebellious
		
		trigger = {
			Z84 = {
				has_country_flag = gerudia_rebellious
				ai = yes
			}
			ai = no
		}
		
		hidden_effect = {
			if = {
				limit = { 
					Z83 = { 
						has_country_flag = gerudia_rebellious
						is_subject = no
					}
				}
				create_vassal = Z83
				Z83 = { 
					set_country_flag = gerudia_rebellious
				}
				
			}
			if = {
				limit = { 
					Z84 = { 
						has_country_flag = gerudia_rebellious
						is_subject = no
					}
				}
				create_vassal = Z84
				Z84 = { 
					set_country_flag = gerudia_rebellious				
				}
			}
			if = {
				limit = { 
					Z85 = { 
						has_country_flag = gerudia_rebellious
						is_subject = no
					}
				}
				create_vassal = Z85
				Z85 = { 
					set_country_flag = gerudia_rebellious
				}
			}
		}
		hidden_effect = {
			every_subject_country = {
				limit = { NOT = { has_country_flag = gerudia_rebellious } }
				add_liberty_desire = -25
			}
		}
		FROM = {
			country_event = { id = gerudia.22 days = 180 }
		}
		switch_tag = Z84
	}
	option = { #Continue as Frostbrygja
		name = "gerudia.21.f"
		custom_tooltip = gerudia_release_rebellious
		
		trigger = {
			Z85 = {
				has_country_flag = gerudia_rebellious
				ai = yes
			}
			ai = no
		}
		
		hidden_effect = {
			if = {
				limit = { 
					Z83 = { 
						has_country_flag = gerudia_rebellious
						is_subject = no
					}
				}
				create_vassal = Z83
				Z83 = { 
					set_country_flag = gerudia_rebellious
				}
				
			}
			if = {
				limit = { 
					Z84 = { 
						has_country_flag = gerudia_rebellious
						is_subject = no
					}
				}
				create_vassal = Z84
				Z84 = { 
					set_country_flag = gerudia_rebellious				
				}
			}
			if = {
				limit = { 
					Z85 = { 
						has_country_flag = gerudia_rebellious
						is_subject = no
					}
				}
				create_vassal = Z85
				Z85 = { 
					set_country_flag = gerudia_rebellious
				}
			}
		}
		hidden_effect = {
			every_subject_country = {
				limit = { NOT = { has_country_flag = gerudia_rebellious } }
				add_liberty_desire = -25
			}
		}
		FROM = {
			country_event = { id = gerudia.22 days = 180 }
		}
		switch_tag = Z85
	}
}

country_event = { #Rebellion Start
	id = "gerudia.22"
	title = "gerudia.22.t"
	desc = "gerudia.22.d"
	picture = NOBLE_ESTATE_DEMANDS_eventPicture
	
	fire_only_once = yes
	is_triggered_only = yes
	
	immediate = {
		Z08 = {
			every_subject_country = {
				limit = { has_country_flag = gerudia_rebellious }
				grant_independence = yes
			}
		}
	}
	
	option = {
		name = "gerudia.22.a"
		if = {
			limit = { 
				Z10 = { has_country_flag = gerudia_rebellious }
				Z10 = { ai = yes }
				NOT = { Z10 = { has_country_flag = gerudia_ringleader_flag } }
			}
			event_target:gerudia_ringleader = {
				vassalize = Z10
			}
			Z10 = {
				add_country_modifier = { name = "gerudia_revolt_buff" duration = 5475 }
				capital_scope = {
					spawn_units_for = {
						amount = 5
						type = infantry
						who = PREV
					}
				}
			}
		}
		else_if = {
			limit = {
				Z10 = { has_country_flag = gerudia_rebellious }
				Z10 = { ai = no }
				NOT = { tag = Z10 }
				NOT = { Z10 = { has_country_flag = gerudia_ringleader_flag } }
			}
			Z10 = {
				country_event = { id = gerudia.23 days = 1 }
			}
		}
		if = {
			limit = { 
				Z11 = { has_country_flag = gerudia_rebellious }
				Z11 = { ai = yes }
				NOT = { Z11 = { has_country_flag = gerudia_ringleader_flag } }
			}
			event_target:gerudia_ringleader = {
				vassalize = Z11
			}
			Z11 = {
				add_country_modifier = { name = "gerudia_revolt_buff" duration = 5475 }
				capital_scope = {
					spawn_units_for = {
						amount = 5
						type = infantry
						who = PREV
					}
				}
			}
		}
		else_if = {
			limit = { 
				Z11 = { has_country_flag = gerudia_rebellious }
				Z11 = { ai = no }
				NOT = { tag = Z11 }
				NOT = { Z11 = { has_country_flag = gerudia_ringleader_flag } }
			}
			Z11 = {
				country_event = { id = gerudia.23 days = 1 }
			}
		}
		if = {
			limit = { 
				Z83 = { has_country_flag = gerudia_rebellious }
				Z83 = { ai = yes }
				NOT = { Z83 = { has_country_flag = gerudia_ringleader_flag } }
			}
			event_target:gerudia_ringleader = {
				vassalize = Z83
			}
			Z83 = {
				add_country_modifier = { name = "gerudia_revolt_buff" duration = 5475 }
				capital_scope = {
					spawn_units_for = {
						amount = 5
						type = infantry
						who = PREV
					}
				}
			}
		}
		else_if = {
			limit = { 
				Z83 = { has_country_flag = gerudia_rebellious }
				Z83 = { ai = no }
				NOT = { tag = Z83 }
				NOT = { Z83 = { has_country_flag = gerudia_ringleader_flag } }
			}
			Z83 = {
				country_event = { id = gerudia.23 days = 1 }
			}
		}
		if = {
			limit = { 
				Z84 = { has_country_flag = gerudia_rebellious }
				Z84 = { ai = yes }
				NOT = { Z84 = { has_country_flag = gerudia_ringleader_flag } }
			}
			event_target:gerudia_ringleader = {
				vassalize = Z84
			}
			Z84 = {
				add_country_modifier = { name = "gerudia_revolt_buff" duration = 5475 }
				capital_scope = {
					spawn_units_for = {
						amount = 5
						type = infantry
						who = PREV
					}
				}
			}
		}
		else_if = {
			limit = { 
				Z84 = { has_country_flag = gerudia_rebellious }
				Z84 = { ai = no }
				NOT = { tag = Z84 }
				NOT = { Z84 = { has_country_flag = gerudia_ringleader_flag } }
			}
			Z84 = {
				country_event = { id = gerudia.23 days = 1 }
			}
		}
		if = {
			limit = { 
				Z85 = { has_country_flag = gerudia_rebellious }
				Z85 = { ai = yes }
				NOT = { Z85 = { has_country_flag = gerudia_ringleader_flag } }
			}
			event_target:gerudia_ringleader = {
				vassalize = Z85
			}
			Z85 = {
				add_country_modifier = { name = "gerudia_revolt_buff" duration = 5475 }
				capital_scope = {
					spawn_units_for = {
						amount = 5
						type = infantry
						who = PREV
					}
				}
			}
		}
		else_if = {
			limit = { 
				Z85 = { has_country_flag = gerudia_rebellious }
				Z85 = { ai = no }
				NOT = { tag = Z85 }
				NOT = { Z85 = { has_country_flag = gerudia_ringleader_flag } }
			}
			Z85 = {
				country_event = { id = gerudia.23 days = 1 }
			}
		}
		declare_war_with_cb = {
			who = Z08
			casus_belli = cb_independence_war
		}
		Z08 = {
			country_event = { id = gerudia.24 }
		}
		capital_scope = {
			spawn_units_for = {
				amount = 5
				type = infantry
				who = ROOT
			}
		}
		set_global_flag = bjarnrik_revolt_flag
	}
	option = { #Player Refuse
		name = "gerudia.22.b"
		trigger = { ai = no }
		add_stability = -2
	}
}

country_event = {
	id = "gerudia.23"
	title = "gerudia.23.t"
	desc = "gerudia.23.d"
	picture = NOBLE_ESTATE_DEMANDS_eventPicture
	
	fire_only_once = yes
	is_triggered_only = yes
	
	option = {
		name = "gerudia.23.a"
		declare_war_with_cb = {
			who = Z08
			casus_belli = cb_independence_war
		}
		add_country_modifier = { name = "gerudia_revolt_buff" duration = 5475 }
		capital_scope = {
			spawn_units_for = {
				amount = 5
				type = infantry
				who = PREV
			}
		}
	}
	option = { #Player Refuse
		name = "gerudia.23.b"
		trigger = { ai = no }
		add_stability = -2
	}
}

country_event = { #Bjarnrik War Start Event
	id = "gerudia.24"
	title = "gerudia.24.t"
	desc = "gerudia.24.d"
	picture = NOBLE_ESTATE_DEMANDS_eventPicture
	
	fire_only_once = yes
	is_triggered_only = yes
	
	option = {
		name = "gerudia.24.a"
		add_country_modifier = { name = "gerudia_bjarnrik_defensiveness" duration = 3650 }
	}
}

country_event = { #Revolt Victorious
	id = "gerudia.25"
	title = "gerudia.25.t"
	desc = "gerudia.25.d"
	picture = SIEGE_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		has_country_flag = gerudia_ringleader_flag
		has_global_flag = bjarnrik_revolt_flag
		NOT = {
			Z08 = {
				controls = 956
			}
		}
	}
	
	option = {
		name = "gerudia.25.a"
		hidden_effect = {
			white_peace = Z08
			every_war_enemy_country = {
				limit = { 
					alliance_with = Z08
				}
				white_peace = ROOT
				clr_country_flag = gerudia_rebellious
			}
			release_all_subjects = yes
			Z08 = {
				country_event = { id = gerudia.27 }
			}
			clr_global_flag = bjarnrik_revolt_flag
			clear_global_event_target = gerudia_ringleader
		}
		956 = {
			add_devastation = 50
		}
		add_treasury = 100
		add_prestige = 20
		add_adm_power = 50
		add_dip_power = 50
		add_mil_power = 50
	}
}

country_event = { #Bjarnrik Victorious
	id = "gerudia.26"
	title = "gerudia.26.t"
	desc = "gerudia.26.d"
	picture = IMPALED_SOLDIERS_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		has_global_flag = bjarnrik_revolt_flag
		tag = Z08
		all_war_enemy_countries = {
			OR = {
				capital_scope = { controlled_by = Z08 }
				NOT = { has_country_flag = gerudia_rebellious }
			}
		}
	}
	
	option = {
		name = "gerudia.26.a"
		every_war_enemy_country = {
			limit = { 
				has_country_flag = gerudia_rebellious
				capital_scope = {
					controlled_by = Z08
				}
				ai = yes
			}
			capital_scope = {
				add_devastation = 50
			}
			clr_country_flag = gerudia_rebellious
			ROOT = {
				inherit = PREV
			}
		}
		every_war_enemy_country = {
			limit = { 
				has_country_flag = gerudia_rebellious
				capital_scope = {
					controlled_by = Z08
				}
				ai = no
			}
			capital_scope = {
				add_devastation = 50
			}
			clr_country_flag = gerudia_rebellious
			ROOT = {
				vassalize = ROOT
			}
		}
		add_legitimacy = 25
		add_adm_power = 25
		add_dip_power = 25
		add_mil_power = 25
		if = {
			limit = {
				check_variable = { which = sidaett_loyalty value = 4 }
			}
			add_country_modifier = { name = "gerudia_sidaett_loyal" duration = 5475 }
		}
		if = {
			limit = {
				check_variable = { which = revrhavn_loyalty value = 4 }
			}
			add_country_modifier = { name = "gerudia_revrhavn_loyal" duration = 5475 }
		}
		if = {
			limit = {
				check_variable = { which = blodfjell_loyalty value = 4 }
			}
			add_country_modifier = { name = "gerudia_blodfjell_loyal" duration = 5475 }
		}
		if = {
			limit = {
				check_variable = { which = varheim_loyalty value = 4 }
			}
			add_country_modifier = { name = "gerudia_varheim_loyal" duration = 5475 }
		}
		if = {
			limit = {
				check_variable = { which = frostbrygja_loyalty value = 4 }
			}
			add_country_modifier = { name = "gerudia_frostbrygja_loyal" duration = 5475 }
		}
		clr_global_flag = bjarnrik_revolt_flag
		clear_global_event_target = gerudia_ringleader
	}
}

country_event = {
	id = "gerudia.27"
	title = "gerudia.27.t"
	desc = "gerudia.27.d"
	picture = BAD_WITH_MONARCH_eventPicture
	
	fire_only_once = yes
	is_triggered_only = yes
	
	option = {
		name = "gerudia.27.a"
		add_country_modifier = { name = "gerudia_bjarnrik_lost" duration = 7300 }
		add_prestige = -25
		add_legitimacy = -25
	}
}
