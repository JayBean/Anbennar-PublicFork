namespace = flavour_ovdal_tungr


country_event = {
	id = flavour_ovdal_tungr.1000
	title = flavour_ovdal_tungr.1000.t
	desc = flavour_ovdal_tungr.1000.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes

	trigger = {
		OR = {
			NOT = { has_dlc = "Domination" }
		}
	}
	
	option = { 
		name = flavour_ovdal_tungr.1000.a
		ai_chance = { factor = 100 }
	}
}

# A Better Bahar.
country_event = {
	id = flavour_ovdal_tungr.100
	title = flavour_ovdal_tungr.100.t
	desc = flavour_ovdal_tungr.100.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.100.a
		if = { limit = { NOT = { accepted_culture = exodus_goblin } }
			custom_tooltip = F23_goblin_minorities_removed
			bahar_region = {
				remove_racial_minority_any_size = { race = goblin }
				add_permanent_province_modifier = { name = F23_bahari_calm duration = 9125 }
			}
		}
		else = {
			bahar_region = { 
				add_permanent_province_modifier = { name = F23_bahari_calm duration = 9125 } 
			}
		}
		if = { limit = { U17 = { is_subject_of = F23 } }
			U17 = {
				complete_mission = crathanor_secure_the_shipyards
				complete_mission = crathanor_setting_sun
			}
		}
		if = { limit = { U17 = { is_subject_of = ROOT } }
			custom_tooltip = crathanor_tungr_coop_easier_iltatani_revival_tt
			hidden_effect = { U17 = { set_country_flag = crathanor_tungr_coop_easier_iltatani_revival_flag } }
		}
	}
}

# The Matter of Aqatbar
country_event = {
	id = flavour_ovdal_tungr.110
	title = flavour_ovdal_tungr.110.t
	desc = flavour_ovdal_tungr.110.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.110.a
		ai_chance = { factor = 100 }
		536 = { 
			cede_province = F23 
			remove_claim = ROOT
			remove_core = ROOT
		}
		add_favors = { who = F23 amount = 20 }
		F23 = { country_event = { id = flavour_ovdal_tungr.111 } } # Province ownership
	}
	option = { 
		name = flavour_ovdal_tungr.110.b
		ai_chance = { factor = 0 }
		536 = {
			add_dwarven_minority_size_effect = yes
			if = { limit = { NOT = { province_has_center_of_trade_of_level = 1 } } add_center_of_trade_level = 1 }
			else = { ROOT = { add_treasury = 100 } }
			add_trade_modifier = {
				who = ROOT
				duration = -1
				power = -25
				key = F23_trade_concessions
			}
			tooltip = {
				add_trade_modifier = {
					who = F23
					duration = -1
					power = 25
					key = F23_trade_concessions
				}
			}				
		}
		F23 = { country_event = { id = flavour_ovdal_tungr.112 } } # Trade rights.
	}
	option = { 
		name = flavour_ovdal_tungr.110.c
		ai_chance = { factor = 0 }
		add_trust = { who = F23 value = -20 }
		tooltip = { 536 = { add_permanent_claim = F23 } }
		F23 = { country_event = { id = flavour_ovdal_tungr.113 } } # Nothing
	}
}
# The Matter of Aqatbar response, ownership
country_event = {
	id = flavour_ovdal_tungr.111
	title = flavour_ovdal_tungr.111.t
	desc = flavour_ovdal_tungr.111.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.111.a
		ai_chance = { factor = 100 }
		536 = { 
			add_dwarven_minority_size_effect = yes
			if = {
				limit = { province_has_center_of_trade_of_level = 3 }
				owner = { add_treasury = 100 }
			} 
			else = {
				add_center_of_trade_level = 1
			}
		}
	}
}
# The Matter of Aqatbar response, trade concessions
country_event = {
	id = flavour_ovdal_tungr.112
	title = flavour_ovdal_tungr.112.t
	desc = flavour_ovdal_tungr.112.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.112.a
		ai_chance = { factor = 100 }
		536 = {
			add_trade_modifier = {
				who = ROOT
				duration = -1
				power = 25
				key = F23_trade_concessions
			}
		}
	}
}
# The Matter of Aqatbar response, refused
country_event = {
	id = flavour_ovdal_tungr.113
	title = flavour_ovdal_tungr.113.t
	desc = flavour_ovdal_tungr.113.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.113.a
		ai_chance = { factor = 100 }
		add_treasury = 100
		536 = { add_permanent_claim = F23 }
	}
}
# The Matter of Re-Uyel
country_event = {
	id = flavour_ovdal_tungr.120
	title = flavour_ovdal_tungr.120.t
	desc = flavour_ovdal_tungr.120.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.120.a
		ai_chance = { factor = 100 }
		521 = { 
			cede_province = F23 
			remove_claim = ROOT
			remove_core = ROOT
		}
		add_favors = { who = F23 amount = 20 }
		F23 = { country_event = { id = flavour_ovdal_tungr.121 } } # Province ownership
	}
	option = { 
		name = flavour_ovdal_tungr.120.b
		ai_chance = { factor = 0 }
		521 = {
			add_dwarven_minority_size_effect = yes
			if = { limit = { NOT = { province_has_center_of_trade_of_level = 1 } } add_center_of_trade_level = 1 }
			else = { ROOT = { add_treasury = 100 } }
			add_trade_modifier = {
				who = ROOT
				duration = -1
				power = -25
				key = F23_trade_concessions
			}
			tooltip = {
				add_trade_modifier = {
					who = F23
					duration = -1
					power = 25
					key = F23_trade_concessions
				}
			}				
		}
		F23 = { country_event = { id = flavour_ovdal_tungr.122 } } # Trade rights.
	}
	option = { 
		name = flavour_ovdal_tungr.120.c
		ai_chance = { factor = 0 }
		add_trust = { who = F23 value = -20 }
		tooltip = { 521 = { add_permanent_claim = F23 } }
		F23 = { country_event = { id = flavour_ovdal_tungr.123 } } # Nothing
	}
}
# The Matter of Re-Uyel response, ownership
country_event = {
	id = flavour_ovdal_tungr.121
	title = flavour_ovdal_tungr.121.t
	desc = flavour_ovdal_tungr.121.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.121.a
		ai_chance = { factor = 100 }
		521 = { 
			add_dwarven_minority_size_effect = yes 
			if = { limit = { province_has_center_of_trade_of_level = 3 }
				owner = { add_treasury = 100 }
			} 
			else = {
				add_center_of_trade_level = 1
			}
		}
	}
}
# The Matter of Re-Uyel response, trade concessions
country_event = {
	id = flavour_ovdal_tungr.122
	title = flavour_ovdal_tungr.122.t
	desc = flavour_ovdal_tungr.122.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.122.a
		ai_chance = { factor = 100 }
		521 = {
			add_trade_modifier = {
				who = ROOT
				duration = -1
				power = 25
				key = F23_trade_concessions
			}
		}
	}
}
# The Matter of Re-Uyel response, refused
country_event = {
	id = flavour_ovdal_tungr.123
	title = flavour_ovdal_tungr.123.t
	desc = flavour_ovdal_tungr.123.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.123.a
		ai_chance = { factor = 100 }
		521 = { add_permanent_claim = F23 }
	}
}
# Dwarves and Humans, United
country_event = {
	id = flavour_ovdal_tungr.140
	title = flavour_ovdal_tungr.140.t
	desc = flavour_ovdal_tungr.140.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.140.a
		ai_chance = { factor = 100 }

		tooltip = { F23 = { create_subject = { subject_type = loyal_crathanor_subject subject = ROOT } } }

		largest_increase_of_dwarven_tolerance_effect = yes
		516 = {
			add_dwarven_minority_size_effect = yes
			add_dwarven_minority_size_effect = yes
		}

		F23 = { country_event = { id = flavour_ovdal_tungr.141 } } # Accepts vassalage

	}
	option = { 
		name = flavour_ovdal_tungr.140.b
		ai_chance = { factor = 0 }

		largest_increase_of_dwarven_tolerance_effect = yes
		516 = {
			add_dwarven_minority_size_effect = yes
			add_dwarven_minority_size_effect = yes
		}

		F23 = { country_event = { id = flavour_ovdal_tungr.142 } } # Republics United
		F23 = { add_country_modifier = { name = F23_copper_ilatani_cooperation duration = -1 } }
		U17 = { add_country_modifier = { name = F23_copper_ilatani_cooperation duration = -1 } }
	}
}
# Dwarves and Humans, United, vassalage
country_event = {
	id = flavour_ovdal_tungr.141
	title = flavour_ovdal_tungr.141.t
	desc = flavour_ovdal_tungr.141.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.141.a
		ai_chance = { factor = 100 }

		create_subject = { subject_type = loyal_crathanor_subject subject = U17 }
		largest_increase_of_human_tolerance_effect = yes
		526 = {
			add_human_minority_size_effect = yes
			add_human_minority_size_effect = yes
		}
		custom_tooltip = F23_crathanor_missions_1
		hidden_effect = {
			U17 = {
				complete_mission = crathanor_no_representation
				complete_mission = crathanor_no_taxation
				if = { limit = { NOT = { mission_completed = crathanor_embrace_the_two_principles } }
					complete_mission = crathanor_embrace_the_two_principles
					country_event = { id = flavor_crathanor.1 }
				}
				complete_mission = crathanor_our_first_friends
				complete_mission = crathanor_not_your_mountains
				complete_mission = crathanor_together_we_rise
				bahar_region = { add_permanent_claim = U17 }
				complete_mission = crathanor_end_noble_republic
				generic_start_expulsion = { race = goblin }
			}
			every_owned_province = { remove_claim = U17 }
		}
		add_country_modifier = { name = F23_human_rowers duration = -1 }
	}
}
# Dwarves and Humans, United, friendship
country_event = {
	id = flavour_ovdal_tungr.142
	title = flavour_ovdal_tungr.142.t
	desc = flavour_ovdal_tungr.142.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.142.a
		ai_chance = { factor = 100 }

		largest_increase_of_human_tolerance_effect = yes
		526 = {
			add_human_minority_size_effect = yes
			add_human_minority_size_effect = yes
		}
		tooltip = {
			F23 = { add_country_modifier = { name = F23_copper_ilatani_cooperation duration = -1 } }
			U17 = { add_country_modifier = { name = F23_copper_ilatani_cooperation duration = -1 } }
		}
	}
}
# Tugged Two Ways
country_event = {
	id = flavour_ovdal_tungr.0
	title = flavour_ovdal_tungr.0.t
	desc = flavour_ovdal_tungr.0.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.0.a
		ai_chance = { factor = 100 }
		add_country_modifier = { name = F23_naval_morale_buff duration = 3650 }
		isle_of_tef_area = {
			add_permanent_claim = ROOT
		}
		custom_tooltip = F23_tugged_two_ways_tt
	}
}
# Safe Sarhali Seas
country_event = {
	id = flavour_ovdal_tungr.1
	title = flavour_ovdal_tungr.1.t
	desc = flavour_ovdal_tungr.1.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		add_country_modifier = { name = F23_safe_sarhali_seas_mod duration = -1 }
		#if = { limit = { mission_completed = F23_steamers }
		#	custom_tooltip = F23_upstream_trade_unlock_tt
		#}
		custom_tooltip = F23_safe_sarhali_seas_tt
		custom_tooltip = F23_safe_sarhali_seas_tt_institution_spread
		custom_tooltip = F23_safe_sarhali_seas_tt_minority_spread
		hidden_effect = {
			set_country_flag = trade_company_bonus_reasons_sarhal_minus_bulwar
			F23_institution_spread_effect = { continent = africa institution = feudalism }
			F23_institution_spread_effect = { continent = africa institution = renaissance }
			F23_institution_spread_effect = { continent = africa institution = new_world_i }
			F23_institution_spread_effect = { continent = africa institution = printing_press }
			F23_institution_spread_effect = { continent = africa institution = global_trade }
			F23_institution_spread_effect = { continent = africa institution = manufactories }
			F23_institution_spread_effect = { continent = africa institution = enlightenment }
			F23_institution_spread_effect = { continent = africa institution = industrialization }

			#5529 = { set_province_flag = F23_upstream_trade_flag }
			#5716 = { set_province_flag = F23_upstream_trade_flag }
			#5763 = { set_province_flag = F23_upstream_trade_flag }
			#5914 = { set_province_flag = F23_upstream_trade_flag }
			#5949 = { set_province_flag = F23_upstream_trade_flag }
			#change_variable = { which = F23_upstream_trade_counter value = 5 }

			every_owned_province = { limit = { province_has_center_of_trade_of_level = 1 OR = { continent = africa area = isle_of_tef_area } NOT = { superregion = east_sarhal_superregion } }
				if = { limit = { province_has_center_of_trade_of_level = 3 }
					add_gnollish_minority_size_effect = yes
					add_lizardfolk_minority_size_effect = yes
					add_halfling_minority_size_effect = yes
					add_elven_minority_size_effect = yes
					add_human_minority_size_effect = yes
				}
				else_if = { limit = { province_has_center_of_trade_of_level = 2 }
					random = { chance = 50 add_gnollish_minority_size_effect = yes }
					random = { chance = 50 add_lizardfolk_minority_size_effect = yes }
					random = { chance = 50 add_halfling_minority_size_effect = yes }
					random = { chance = 50 add_elven_minority_size_effect = yes }
					random = { chance = 50 add_human_minority_size_effect = yes }
				}
				else = {
					random = { chance = 25 add_gnollish_minority_size_effect = yes }
					random = { chance = 25 add_lizardfolk_minority_size_effect = yes }
					random = { chance = 25 add_halfling_minority_size_effect = yes }
					random = { chance = 25 add_elven_minority_size_effect = yes }
					random = { chance = 25 add_human_minority_size_effect = yes }
				}
			}
		}
	}
}
# The Copper Seaway
country_event = {
	id = flavour_ovdal_tungr.2
	title = flavour_ovdal_tungr.2.t
	desc = flavour_ovdal_tungr.2.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		remove_country_modifier = F23_safe_sarhali_seas_mod
		add_country_modifier = { name = F23_the_copper_seaway_mod duration = -1 }

		#if = { limit = { mission_completed = F23_steamers }
		#	custom_tooltip = F23_upstream_trade_unlock_tt
		#}
		custom_tooltip = F23_the_copper_seaway_tt
		custom_tooltip = F23_the_copper_seaway_tt_institution_spread
		custom_tooltip = F23_the_copper_seaway_tt_minority_spread
		hidden_effect = {
			set_country_flag = trade_company_bonus_reasons_haless
			F23_institution_spread_effect = { continent = asia institution = feudalism }
			F23_institution_spread_effect = { continent = asia institution = renaissance }
			F23_institution_spread_effect = { continent = asia institution = new_world_i }
			F23_institution_spread_effect = { continent = asia institution = printing_press }
			F23_institution_spread_effect = { continent = asia institution = global_trade }
			F23_institution_spread_effect = { continent = asia institution = manufactories }
			F23_institution_spread_effect = { continent = asia institution = enlightenment }
			F23_institution_spread_effect = { continent = asia institution = industrialization }

			#4420 = { set_province_flag = F23_upstream_trade_flag }
			#4395 = { set_province_flag = F23_upstream_trade_flag }
			#4557 = { set_province_flag = F23_upstream_trade_flag }
			#4570 = { set_province_flag = F23_upstream_trade_flag }
			#4871 = { set_province_flag = F23_upstream_trade_flag }
			#change_variable = { which = F23_upstream_trade_counter value = 5 }

			every_owned_province = { limit = { province_has_center_of_trade_of_level = 1 OR = { continent = asia superregion = east_sarhal_superregion } }
				if = { limit = { province_has_center_of_trade_of_level = 3 }
					add_gnollish_minority_size_effect = yes
					add_lizardfolk_minority_size_effect = yes
					add_halfling_minority_size_effect = yes
					add_elven_minority_size_effect = yes
					add_human_minority_size_effect = yes
				}
				else_if = { limit = { province_has_center_of_trade_of_level = 2 }
					random = { chance = 50 add_gnollish_minority_size_effect = yes }
					random = { chance = 50 add_lizardfolk_minority_size_effect = yes }
					random = { chance = 50 add_halfling_minority_size_effect = yes }
					random = { chance = 50 add_elven_minority_size_effect = yes }
					random = { chance = 50 add_human_minority_size_effect = yes }
				}
				else = {
					random = { chance = 25 add_gnollish_minority_size_effect = yes }
					random = { chance = 25 add_lizardfolk_minority_size_effect = yes }
					random = { chance = 25 add_lizardfolk_minority_size_effect = yes }
					random = { chance = 25 add_elven_minority_size_effect = yes }
					random = { chance = 25 add_human_minority_size_effect = yes }
				}
			}
			every_owned_province = { limit = { province_has_center_of_trade_of_level = 1 OR = { continent = africa continent = asia area = isle_of_tef_area } }
				if = { limit = { province_has_center_of_trade_of_level = 3 }
					add_harimari_minority_size_effect = yes
				}
				else_if = { limit = { province_has_center_of_trade_of_level = 2 }
					random = { chance = 50 add_harimari_minority_size_effect = yes }
				}
				else = {
					random = { chance = 25 add_harimari_minority_size_effect = yes }
				}
			}

		}
	}
}
# Copper needed for Sheathing
country_event  = {
	id = flavour_ovdal_tungr.3
	title = flavour_ovdal_tungr.3.t
	desc = flavour_ovdal_tungr.3.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.3.a
		ai_chance = { factor = 100 }

		custom_tooltip = flavour_ovdal_tungr.3_tooltip
		hidden_effect = {
			bulwar_superregion = { limit = { trade_goods = copper }
				if = { limit = { trade_goods = copper}
					add_permanent_province_modifier = { name = F23_copper_sheathing_price_increase duration = -1 }
				}
			}
			businor_region = { limit = { trade_goods = copper }
				if = { limit = { trade_goods = copper}
					add_permanent_province_modifier = { name = F23_copper_sheathing_price_increase duration = -1 }
				}
			}
			east_dameshead_region = { limit = { trade_goods = copper }
				if = { limit = { trade_goods = copper}
					add_permanent_province_modifier = { name = F23_copper_sheathing_price_increase duration = -1 }
				}
			}
		}
	}
}
# id 4, available.

# A Discovery
country_event = {
	id = flavour_ovdal_tungr.5
	title = flavour_ovdal_tungr.5.t
	desc = flavour_ovdal_tungr.5.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = { 
		name = flavour_ovdal_tungr.5.b
		ai_chance = { factor = 100 }

		hidden_effect = {
			set_country_flag = F23_MT_unlock_grudge
		}
		4124 = {
			owner = {
				reverse_add_casus_belli = {
					target = ROOT
					type = cb_insult
					months = 240
				}
			}
		}
		swap_non_generic_missions = yes
	}
}
# A Grudge Righted
country_event = {
	id = flavour_ovdal_tungr.6
	title = flavour_ovdal_tungr.6.t
	desc = flavour_ovdal_tungr.6.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.6.a
		ai_chance = { factor = 100 }

		add_power_projection = { type = mission_rewards_power_projection amount = 15 }

		4124 = {
			add_devastation = 50
			province_event = { id = diggy.13 }
			custom_tooltip = F23_grudge_righted_tt
		}
	}
}

# The Arrival of Grun Strongbellow
country_event = {
	id = flavour_ovdal_tungr.7
	title = flavour_ovdal_tungr.7.t
	desc = flavour_ovdal_tungr.7.d
	picture = BATTLE_eventPicture
	
	fire_only_once = yes

	trigger = {
		tag = F23
		OR = {
			is_year = 1500
			AND = {
				is_year = 1495
				innovativeness = 10
			}
			AND = {
				is_year = 1490
				innovativeness = 20
			}
			AND = {
				is_year = 1485
				innovativeness = 30
			}
			AND = {
				is_year = 1480
				innovativeness = 40
			}
			AND = {
				is_year = 1475
				innovativeness = 50
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}
	
	option = { 
		name = flavour_ovdal_tungr.7.a
		ai_chance = { factor = 100 }

		add_historical_friend = A73
		A73 = { add_historical_friend = ROOT }
		add_accepted_culture = silver_dwarf
		add_country_modifier = { name = F23_grun_strongbellow duration = -1 }
		add_country_modifier = { name = free_slot_for_silver_dwarf duration = -1 }

		set_country_flag = F23_mt_unlock_strongbellow_1
		swap_non_generic_missions = yes

		hidden_effect = {
			country_event = {
				id = flavour_ovdal_tungr.8
				days = 7300
			}
		}
	}
}

# The Departure of Grun Strongbellow
country_event = {
	id = flavour_ovdal_tungr.8
	title = flavour_ovdal_tungr.8.t
	desc = flavour_ovdal_tungr.8.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes

	trigger = { 
		NOT = { has_country_flag = grun_stay_extended }
	}
	
	option = { 
		name = flavour_ovdal_tungr.8.a
		ai_chance = { factor = 100 }
		remove_country_modifier = F23_grun_strongbellow 

		hidden_effect = { set_country_flag = F23_MT_unlock_strongbellow_society }
		swap_non_generic_missions = yes
	}
}

# Steam Curios
country_event = {
	id = flavour_ovdal_tungr.9
	title = flavour_ovdal_tungr.9.t
	desc = flavour_ovdal_tungr.9.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = { 526 = { add_province_modifier = { name = F23_steam_curios duration = 7300 } } }
	}
	
	option = { 
		name = flavour_ovdal_tungr.9.a
		ai_chance = { factor = 100 }
		tooltip = {
			526 = { add_province_modifier = { name = F23_steam_curios duration = 7300 } }
		}
	}
}

# The High Seas, capstone event
country_event = {
	id = flavour_ovdal_tungr.15
	title = flavour_ovdal_tungr.15.t
	desc = flavour_ovdal_tungr.15.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.15.a
		ai_chance = { factor = 100 }
		if = { limit = { has_dlc = "Emperor" }
			if = { limit = { is_hegemon_of_type = naval_hegemon }
				add_country_modifier = { name = F23_secondary_hegemony_eco duration = -1 }
			}
			else = {
				add_country_modifier = { name = F23_secondary_hegemony_naval duration = -1 }
			}
		}
		else = {
			add_country_modifier = { name = F23_maritime_hegemony duration = -1 }
		}
		custom_tooltip = F23_capstone_sea_hold_upgrade
		hidden_effect = { change_variable = { which = sea_hold_var_slots value = 1 } }
	}
}


# Sunken City of Barzisah
country_event = {
	id = flavour_ovdal_tungr.20
	title = flavour_ovdal_tungr.20.t
	desc = flavour_ovdal_tungr.20.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes

	option = { # Yametses
		trigger = { NOT = { has_country_flag = F23_explorers_yametses } }
		name = flavour_ovdal_tungr.20.a
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.21 days = 730 }
		add_prestige = 5
	}
	
	option = { # Pasah
		trigger = { NOT = { has_country_flag = F23_explorers_pasah } }
		name = flavour_ovdal_tungr.20.b
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.22 days = 730 }
		add_prestige = 5
	}
	
	option = { # Pir Ail
		trigger = { NOT = { has_country_flag = F23_explorers_pir_ail } }
		name = flavour_ovdal_tungr.20.c
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.23 days = 730 }
		add_prestige = 5
	}
}
# Explorers of the Depths, Yametses
country_event = {
	id = flavour_ovdal_tungr.21
	title = flavour_ovdal_tungr.21.t
	desc = flavour_ovdal_tungr.21.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = { set_country_flag = F23_explorers_yametses }
	}

	option = { # Pasah
		trigger = { NOT = { has_country_flag = F23_explorers_pasah } }
		name = flavour_ovdal_tungr.20.b
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.22 days = 730 }
		add_prestige = 5
	}
	
	option = { # Pir Ail
		trigger = { NOT = { has_country_flag = F23_explorers_pir_ail } }
		name = flavour_ovdal_tungr.20.c
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.23 days = 730 }
		add_prestige = 5
	}
	
	option = { # Deeper depths
		trigger = { has_country_flag = F23_explorers_yametses has_country_flag = F23_explorers_pasah has_country_flag = F23_explorers_pir_ail }
		name = flavour_ovdal_tungr.20.e
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.25 days = 730 }
		add_prestige = 10
	}
}
# Explorers of the Depths, Pasah
country_event = {
	id = flavour_ovdal_tungr.22
	title = flavour_ovdal_tungr.22.t
	desc = flavour_ovdal_tungr.22.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = { set_country_flag = F23_explorers_pasah }
	}

	option = { # Yametses
		trigger = { NOT = { has_country_flag = F23_explorers_yametses } }
		name = flavour_ovdal_tungr.20.a
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.21 days = 730 }
		add_prestige = 5
	}
		
	option = { # Pir Ail
		trigger = { NOT = { has_country_flag = F23_explorers_pir_ail } }
		name = flavour_ovdal_tungr.20.c
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.23 days = 730 }
		add_prestige = 5
	}
	
	option = { # Deeper depths
		trigger = { has_country_flag = F23_explorers_yametses has_country_flag = F23_explorers_pasah has_country_flag = F23_explorers_pir_ail }
		name = flavour_ovdal_tungr.20.e
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.25 days = 730 }
		add_prestige = 10
	}
}
# Explorers of the Depths, Pir Ail
country_event = {
	id = flavour_ovdal_tungr.23
	title = flavour_ovdal_tungr.23.t
	desc = flavour_ovdal_tungr.23.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = { set_country_flag = F23_explorers_pir_ail }
	}

	option = { # Yametses
		trigger = { NOT = { has_country_flag = F23_explorers_yametses } }
		name = flavour_ovdal_tungr.20.a
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.21 days = 730 }
		add_prestige = 5
	}
	
	option = { # Pasah
		trigger = { NOT = { has_country_flag = F23_explorers_pasah } }
		name = flavour_ovdal_tungr.20.b
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.22 days = 730 }
		add_prestige = 5
	}
		
	option = { # Deeper depths
		trigger = { has_country_flag = F23_explorers_yametses has_country_flag = F23_explorers_pasah has_country_flag = F23_explorers_pir_ail }
		name = flavour_ovdal_tungr.20.e
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.25 days = 730 }
		add_prestige = 10
	}
}

# Deeper Depths
country_event = {
	id = flavour_ovdal_tungr.25
	title = flavour_ovdal_tungr.25.t
	desc = flavour_ovdal_tungr.25.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes

	option = { 
		name = flavour_ovdal_tungr.25.a
		ai_chance = { factor = 100 }
		set_country_flag = F23_mt_unlock_strongbellow_2
		swap_non_generic_missions = yes
	}
}


# Depths of the Divenhal
country_event = {
	id = flavour_ovdal_tungr.30
	title = flavour_ovdal_tungr.30.t
	desc = flavour_ovdal_tungr.30.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes

	
	option = { 
		name = flavour_ovdal_tungr.30.a
		ai_chance = { factor = 100 }

		country_event = { id = flavour_ovdal_tungr.31 days = 730 }
	}
}
country_event = {
	id = flavour_ovdal_tungr.31
	title = flavour_ovdal_tungr.31.t
	desc = flavour_ovdal_tungr.31.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes

	
	option = { 
		name = flavour_ovdal_tungr.31.a
		ai_chance = { factor = 100 }

		country_event = { id = flavour_ovdal_tungr.32 days = 730 }
	}
}
country_event = {
	id = flavour_ovdal_tungr.32
	title = flavour_ovdal_tungr.32.t
	desc = flavour_ovdal_tungr.32.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes

	
	option = { 
		name = flavour_ovdal_tungr.32.a
		ai_chance = { factor = 100 }

		country_event = { id = flavour_ovdal_tungr.33 days = 730 }
	}
}
country_event = {
	id = flavour_ovdal_tungr.33
	title = flavour_ovdal_tungr.33.t
	desc = flavour_ovdal_tungr.33.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes

	
	option = { 
		name = flavour_ovdal_tungr.33.a
		ai_chance = { factor = 100 }

		country_event = { id = flavour_ovdal_tungr.34 days = 730 }
	}
}
country_event = {
	id = flavour_ovdal_tungr.34
	title = flavour_ovdal_tungr.34.t
	desc = flavour_ovdal_tungr.34.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes

	
	option = { 
		name = flavour_ovdal_tungr.34.a
		ai_chance = { factor = 100 }

		add_country_modifier = { name = F23_grun_strongbellow duration = -1 }
		country_event = { id = flavour_ovdal_tungr.35 days = 3650 }

		hidden_effect = { set_country_flag = grun_stay_extended }
	}
}

country_event = {
	id = flavour_ovdal_tungr.35
	title = flavour_ovdal_tungr.35.t
	desc = flavour_ovdal_tungr.35.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes

	
	option = { 
		name = flavour_ovdal_tungr.35.a
		ai_chance = { factor = 100 }

		set_country_flag = F23_mt_unlock_strongbellow_3
		swap_non_generic_missions = yes
		remove_country_modifier = F23_grun_strongbellow
		hidden_effect = { clr_country_flag = grun_stay_extended }
	}
}

# The Dredging
country_event = {
	id = flavour_ovdal_tungr.40
	title = flavour_ovdal_tungr.40.t
	desc = flavour_ovdal_tungr.40.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes

	
	option = { 
		name = flavour_ovdal_tungr.40.a
		ai_chance = { factor = 100 }

		if = {
			limit = { has_dlc = "Rule Britannia" }
			custom_tooltip = even_earlier_coal_available_tt
		}
		hidden_effect = { set_country_flag = even_earlier_coal_available  }

		country_event = { id = flavour_ovdal_tungr.41 days = 5 }
	}
}

country_event = {
	id = flavour_ovdal_tungr.41
	title = flavour_ovdal_tungr.41.t
	desc = flavour_ovdal_tungr.41.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes

	
	option = { 
		name = flavour_ovdal_tungr.41.a
		ai_chance = { factor = 100 }

		581 = { add_province_modifier = { name = F23_precursor_dredging_center duration = -1 } }
		country_event = { id = flavour_ovdal_tungr.42 days = 10 }
	}
}

country_event = {
	id = flavour_ovdal_tungr.42
	title = flavour_ovdal_tungr.42.t
	desc = flavour_ovdal_tungr.42.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes

	
	option = { 
		name = flavour_ovdal_tungr.42.a
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.43 days = 10 }
	}
}

country_event = {
	id = flavour_ovdal_tungr.43
	title = flavour_ovdal_tungr.43.t
	desc = flavour_ovdal_tungr.43.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes

	
	option = { 
		name = flavour_ovdal_tungr.43.a
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.44 days = 10 }
	}
}

country_event = {
	id = flavour_ovdal_tungr.44
	title = flavour_ovdal_tungr.44.t
	desc = flavour_ovdal_tungr.44.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes

	
	option = { 
		name = flavour_ovdal_tungr.44.a
		ai_chance = { factor = 100 }
		581 = { change_trade_goods = precursor_relics }
		country_event = { id = flavour_ovdal_tungr.45 days = 30 }
	}
}

country_event = {
	id = flavour_ovdal_tungr.45
	title = flavour_ovdal_tungr.45.t
	desc = flavour_ovdal_tungr.45.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes

	option = { 
		name = flavour_ovdal_tungr.45.a
		ai_chance = { factor = 100 }

		remove_country_modifier = F23_steamers_mod
		add_country_modifier = { name = F23_steamers_mod_2 duration = -1 }

		set_country_flag = F23_mt_unlock_strongbellow_4
		swap_non_generic_missions = yes
	}
}

## Copper Offer handler event
#province_event = {
#	id = flavour_ovdal_tungr.20
#	title = flavour_ovdal_tungr.20.t
#	desc = flavour_ovdal_tungr.20.d
#	picture = BATTLE_eventPicture
#	
#	is_triggered_only = yes
#	
#	option = { 
#		name = flavour_ovdal_tungr.20.a
#		ai_chance = { factor = 100 }
#	}
#}
# Sea Hold main menu
country_event = {
	id = flavour_ovdal_tungr.50
	title = flavour_ovdal_tungr.50.t
	desc = flavour_ovdal_tungr.50.d
	picture = HARBOUR_eventPicture
	
	is_triggered_only = yes

	immediate = { hidden_effect = { set_country_flag = F23_sea_hold_menu_open } }
	after = { hidden_effect = { clr_country_flag = F23_sea_hold_menu_open } }

	# Undocking.
	option = { 
		trigger = {
			has_country_flag = F23_sea_hold_active
			has_country_flag = F23_sea_hold_docked_country
		}

		name = flavour_ovdal_tungr.50.undock
		ai_chance = { factor = 100 }

		F23_sea_hold_undocking = yes
	}

	# Docking.
	option = { 
		trigger = {
			has_country_flag = F23_sea_hold_active
			NOT = { has_country_flag = F23_sea_hold_docked_country }
			num_of_galley = 1
			NOT = { num_of_galley = 2 }
			any_owned_province = {
				galleys_in_province = 1
				has_province_flag = F23_improved_trading_post_flag
			}
		}

		name = flavour_ovdal_tungr.50.dock
		ai_chance = { factor = 100 }

		if = {
			limit = {
				num_of_galley = 1
				NOT = { num_of_galley = 2 }
				any_owned_province = {
					galleys_in_province = 1
					has_province_flag = F23_improved_trading_post_flag
				}
			}
			F23_sea_hold_docking = yes
		}
		else = {
			custom_tooltip = F23_sea_hold_cannot_dock_tt
		}
	}

	# Cannot dock.
	option = { 
		trigger = {
			has_country_flag = F23_sea_hold_active
			NOT = { has_country_flag = F23_sea_hold_docked_country }
			NOT = {
				AND = {
					num_of_galley = 1
					NOT = { num_of_galley = 2 }
					any_owned_province = {
						galleys_in_province	= 1
						has_province_flag = F23_improved_trading_post_flag
					}
				}
			}
		}

		name = flavour_ovdal_tungr.50.no_dock
		ai_chance = { factor = 100 }

		custom_tooltip = F23_sea_hold_cannot_dock_tt
	}

	# Permanently dock.
	option = { 
		trigger = {
			has_country_flag = F23_sea_hold_active
			has_country_flag = F23_sea_hold_docked_country
			has_country_flag = F23_sea_hold_settlement_enabled
		}

		custom_tooltip = F23_sea_hold_permadock_tt

		name = flavour_ovdal_tungr.50.permadock
		ai_chance = { factor = 100 }

		hidden_effect = {
			F23_sea_hold_permadock_effect = yes
		}
	}

	# Permanently dock, unavailable.
	option = { 
		trigger = {
			has_country_flag = F23_sea_hold_active
			has_country_flag = F23_sea_hold_settlement_enabled
		}

		custom_tooltip = F23_sea_hold_cannot_permadock_tt

		name = flavour_ovdal_tungr.50.cannot_permadock
		ai_chance = { factor = 100 }
	}

	# Design
	option = { 
		name = flavour_ovdal_tungr.50.design
		ai_chance = { factor = 100 }

		custom_tooltip = F23_sea_hold_design_tt

		country_event = { id = flavour_ovdal_tungr.51 }		
	}

	# Overhaul, available
	option = { 
		name = flavour_ovdal_tungr.50.overhaul
		ai_chance = { factor = 100 }

		trigger = { 
			has_country_flag = F23_sea_hold_active
			526 = { has_province_flag = F23_sea_hold_docked_prov }
		}

		F23_sea_hold_overhaul = yes

		custom_tooltip = F23_sea_hold_overhaul_tt

		country_event = { id = flavour_ovdal_tungr.51 }		
	}

	# Overhaul, unavailable
	option = { 
		name = flavour_ovdal_tungr.50.cannot_overhaul
		ai_chance = { factor = 100 }

		trigger = { 
			has_country_flag = F23_sea_hold_active
			NOT = { 526 = { has_province_flag = F23_sea_hold_docked_prov } }
		}

		custom_tooltip = F23_sea_hold_cannot_overhaul_tt

		country_event = { id = flavour_ovdal_tungr.51 }		
	}

	# Launch
	option = { 
		trigger = {
			NOT = { has_country_flag = F23_sea_hold_docked_country }
			NOT = { has_country_flag = F23_sea_hold_active }
		}
		name = flavour_ovdal_tungr.50.launch
		ai_chance = { factor = 100 }

		if = {
			limit = {
				NOT = { num_of_galley = 1 }
			}
			custom_tooltip = F23_sea_hold_launch_tt
			hidden_effect = { 
				526 = { set_province_flag = F23_sea_hold_spawn_location } 
				F23_sea_hold_spawn = yes
				set_country_flag = F23_sea_hold_active
			}
			if = {
				limit = { has_country_flag = F23_sea_hold_landing_bay_enabled }
				add_country_modifier = { name = F23_sea_hold_landing_bay_buff duration = -1 }
			}
		}
		else = {
			custom_tooltip = F23_sea_hold_launch_galleys_tt
		}
	}

	# Pity (also, testing)
	option = {
		name = flavour_ovdal_tungr.50.debug
		trigger = {
			has_country_flag = F23_sea_hold_active
			NOT = { has_country_flag = F23_sea_hold_docked_country }
			NOT = { num_of_galley = 1 }
		}

		custom_tooltip = F23_sea_hold_launch_tt
		hidden_effect = { 
			526 = { set_province_flag = F23_sea_hold_spawn_location } 
			F23_sea_hold_spawn = yes
			set_country_flag = F23_sea_hold_active
		}
	}

	# Reapply permadocked modifiers, in case something went wrong.
	# TBH, big chance something went wrong here.
	# TODO OT, test this thoroughly.
	option = { 
		trigger = {
			# TODO OT, hide until the proper mission has been completed.
			any_owned_province = { has_province_flag = F23_sea_hold_permanently_docked }
		}
		name = flavour_ovdal_tungr.50.reapply
		ai_chance = { factor = 100 }
		custom_tooltip = F23_sea_hold_reapply_tt

		F23_sea_hold_permadock_reapply_effect_country = yes
	}

	# Exit.
	option = { 
		name = flavour_ovdal_tungr.50.exit
		ai_chance = { factor = 100 }
	}
}

# Design sub-menu.
country_event = {
	id = flavour_ovdal_tungr.51
	title = flavour_ovdal_tungr.51.t
	desc = {
		trigger = { 
			NOT = { mission_completed = F23_center_of_the_world } 
			NOT = { has_dlc = "Leviathan" }
		}
		desc = flavour_ovdal_tungr.51.d_1_nondlc
	}
	desc = {
		trigger = { 
			mission_completed = F23_center_of_the_world 
			NOT = { has_dlc = "Leviathan" }
		}
		desc = flavour_ovdal_tungr.51.d_2_nondlc
	}
	desc = {
		trigger = { 
			NOT = { mission_completed = F23_center_of_the_world } 
			has_dlc = "Leviathan"
		}
		desc = flavour_ovdal_tungr.51.d_1_dlc
	}
	desc = {
		trigger = { 
			mission_completed = F23_center_of_the_world 
			has_dlc = "Leviathan"
		}
		desc = flavour_ovdal_tungr.51.d_2_dlc
	}
	picture = HARBOUR_eventPicture
	
	is_triggered_only = yes

	immediate = { hidden_effect = { set_country_flag = F23_sea_hold_menu_open } }
	after = { hidden_effect = { clr_country_flag = F23_sea_hold_menu_open } }

	# Done with design
	option = { 
		name = flavour_ovdal_tungr.51.done
		ai_chance = { factor = 100 }

		country_event = { id = flavour_ovdal_tungr.50 }
	}

	# Base Modification
	option = { 
		name = flavour_ovdal_tungr.51.base
		ai_chance = { factor = 100 }

		country_event = { id = flavour_ovdal_tungr.52 }
	}

	# Improved Battlements Modification, enable
	option = { 
		trigger = { F23_sea_hold_design_modification_trigger = { enable = yes modification = improved_battlements } }
		F23_sea_hold_design_modification_effect = { enable = yes modification = improved_battlements }

		name = flavour_ovdal_tungr.51.improved_battlements_enable
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.52 }
	}
	# Improved Battlements Modification, disable
	option = { 
		trigger = { F23_sea_hold_design_modification_trigger = { disable = yes modification = improved_battlements } }
		F23_sea_hold_design_modification_effect = { disable = yes modification = improved_battlements }

		name = flavour_ovdal_tungr.51.improved_battlements_disable
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.52 }
	}
	# Improved Battlements Modification, maxed
	option = { 
		trigger = { F23_sea_hold_design_modification_trigger = { maxed = yes modification = improved_battlements } }
		F23_sea_hold_design_modification_effect = { maxed = yes modification = improved_battlements }

		name = flavour_ovdal_tungr.51.improved_battlements_maxed
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.52 }
	}

	# Mortar Bay Modification, enable
	option = { 
		trigger = { 
			F23_sea_hold_design_modification_trigger = { enable = yes modification = mortar_bay } 
		}
		F23_sea_hold_design_modification_effect = { enable = yes modification = mortar_bay }

		name = flavour_ovdal_tungr.51.mortar_bay_enable
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.52 }
	}
	# Mortar Bay Modification, disable
	option = { 
		trigger = { 
			F23_sea_hold_design_modification_trigger = { disable = yes modification = mortar_bay } 
		}
		F23_sea_hold_design_modification_effect = { disable = yes modification = mortar_bay }

		name = flavour_ovdal_tungr.51.mortar_bay_disable
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.52 }
	}
	# Mortar Bay Modification, maxed
	option = { 
		trigger = { 
			F23_sea_hold_design_modification_trigger = { maxed = yes modification = mortar_bay } 
		}
		F23_sea_hold_design_modification_effect = { maxed = yes modification = mortar_bay }

		name = flavour_ovdal_tungr.51.mortar_bay_maxed
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.52 }
	}

	# Gyrocopter Bay Modification, enable
	option = { 
		trigger = { 
			F23_sea_hold_design_modification_trigger = { enable = yes modification = gyrocopter_bay } 
			# mission_completed = F23_artificers_touch
		}
		F23_sea_hold_design_modification_effect = { enable = yes modification = gyrocopter_bay }

		name = flavour_ovdal_tungr.51.gyrocopter_bay_enable
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.52 }
	}
	# Gyrocopter Bay Modification, disable
	option = { 
		trigger = { 
			F23_sea_hold_design_modification_trigger = { disable = yes modification = gyrocopter_bay } 
			# mission_completed = F23_artificers_touch
		}
		F23_sea_hold_design_modification_effect = { disable = yes modification = gyrocopter_bay }

		name = flavour_ovdal_tungr.51.gyrocopter_bay_disable
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.52 }
	}
	# Gyrocopter Bay Modification, maxed
	option = { 
		trigger = { 
			F23_sea_hold_design_modification_trigger = { maxed = yes modification = gyrocopter_bay } 
			# mission_completed = F23_artificers_touch
		}
		F23_sea_hold_design_modification_effect = { maxed = yes modification = gyrocopter_bay }

		name = flavour_ovdal_tungr.51.gyrocopter_bay_maxed
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.52 }
	}

	# Floating farms made reduntant by Steamp Powered Navy
	## Floating Farms Modification, enable
	#option = { 
	#	trigger = { F23_sea_hold_design_modification_trigger = { enable = yes modification = floating_farms } }
	#	F23_sea_hold_design_modification_effect = { enable = yes modification = floating_farms }
	#
	#	name = flavour_ovdal_tungr.51.floating_farms_enable
	#	ai_chance = { factor = 100 }
	#	country_event = { id = flavour_ovdal_tungr.52 }
	#}
	## Floating Farms Modification, disable
	#option = { 
	#	trigger = { F23_sea_hold_design_modification_trigger = { disable = yes modification = floating_farms } }
	#	F23_sea_hold_design_modification_effect = { disable = yes modification = floating_farms }
	#
	#	name = flavour_ovdal_tungr.51.floating_farms_disable
	#	ai_chance = { factor = 100 }
	#	country_event = { id = flavour_ovdal_tungr.52 }
	#}
	## Floating Farms Modification, maxed
	#option = { 
	#	trigger = { F23_sea_hold_design_modification_trigger = { maxed = yes modification = floating_farms } }
	#	F23_sea_hold_design_modification_effect = { maxed = yes modification = floating_farms }
	#
	#	name = flavour_ovdal_tungr.51.floating_farms_maxed
	#	ai_chance = { factor = 100 }
	#	country_event = { id = flavour_ovdal_tungr.52 }
	#}

	# Landing Bay Modification, enable
	option = { 
		trigger = { F23_sea_hold_design_modification_trigger = { enable = yes modification = landing_bay } }
		F23_sea_hold_design_modification_effect = { enable = yes modification = landing_bay }

		name = flavour_ovdal_tungr.51.landing_bay_enable
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.52 }
	}
	# Landing Bay Modification, disable
	option = { 
		trigger = { F23_sea_hold_design_modification_trigger = { disable = yes modification = landing_bay } }
		F23_sea_hold_design_modification_effect = { disable = yes modification = landing_bay }

		name = flavour_ovdal_tungr.51.landing_bay_disable
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.52 }
	}
	# Landing Bay Modification, maxed
	option = { 
		trigger = { F23_sea_hold_design_modification_trigger = { maxed = yes modification = landing_bay } }
		F23_sea_hold_design_modification_effect = { maxed = yes modification = landing_bay }

		name = flavour_ovdal_tungr.51.landing_bay_maxed
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.52 }
	}

	# Deployable Ramparts Module, enable
	option = { 
		trigger = { F23_sea_hold_design_module_trigger = { enable = yes module = ramparts } }
		F23_sea_hold_design_module_effect = { enable = yes module = ramparts }

		name = flavour_ovdal_tungr.51.ramparts_enable
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.52 }
	}
	# Deployable Ramparts Module, disable
	option = { 
		trigger = { F23_sea_hold_design_module_trigger = { disable = yes module = ramparts } }
		F23_sea_hold_design_module_effect = { disable = yes module = ramparts }

		name = flavour_ovdal_tungr.51.ramparts_disable
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.52 }
	}
	# Deployable Ramparts Module, maxed
	option = { 
		trigger = { F23_sea_hold_design_module_trigger = { maxed = yes module = ramparts } }
		F23_sea_hold_design_module_effect = { maxed = yes module = ramparts }

		name = flavour_ovdal_tungr.51.ramparts_maxed
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.52 }
	}

	# Development District Module, enable
	option = { 
		trigger = { F23_sea_hold_design_module_trigger = { enable = yes module = development } }
		F23_sea_hold_design_module_effect = { enable = yes module = development }

		name = flavour_ovdal_tungr.51.development_enable
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.52 }
	}
	# Development District Module, disable
	option = { 
		trigger = { F23_sea_hold_design_module_trigger = { disable = yes module = development } }
		F23_sea_hold_design_module_effect = { disable = yes module = development }

		name = flavour_ovdal_tungr.51.development_disable
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.52 }
	}
	# Development District Module, maxed
	option = { 
		trigger = { F23_sea_hold_design_module_trigger = { maxed = yes module = development } }
		F23_sea_hold_design_module_effect = { maxed = yes module = development }

		name = flavour_ovdal_tungr.51.development_maxed
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.52 }
	}

	# Uthojdihr District Module, enable
	option = { 
		trigger = { F23_sea_hold_design_module_trigger = { enable = yes module = uthojdihr } }
		F23_sea_hold_design_module_effect = { enable = yes module = uthojdihr }

		name = flavour_ovdal_tungr.51.uthojdihr_enable
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.52 }
	}
	# Uthojdihr District Module, disable
	option = { 
		trigger = { F23_sea_hold_design_module_trigger = { disable = yes module = uthojdihr } }
		F23_sea_hold_design_module_effect = { disable = yes module = uthojdihr }

		name = flavour_ovdal_tungr.51.uthojdihr_disable
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.52 }
	}
	# Uthojdihr District Module, maxed
	option = { 
		trigger = { F23_sea_hold_design_module_trigger = { maxed = yes module = uthojdihr } }
		F23_sea_hold_design_module_effect = { maxed = yes module = uthojdihr }

		name = flavour_ovdal_tungr.51.uthojdihr_maxed
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.52 }
	}

	# Artisan Workshops Module, enable
	option = { 
		trigger = { F23_sea_hold_design_module_trigger = { enable = yes module = artisan } }
		F23_sea_hold_design_module_effect = { enable = yes module = artisan }

		name = flavour_ovdal_tungr.51.artisan_enable
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.52 }
	}
	# Artisan Workshops Module, disable
	option = { 
		trigger = { F23_sea_hold_design_module_trigger = { disable = yes module = artisan } }
		F23_sea_hold_design_module_effect = { disable = yes module = artisan }

		name = flavour_ovdal_tungr.51.artisan_disable
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.52 }
	}
	# Artisan Workshops Module, maxed
	option = { 
		trigger = { F23_sea_hold_design_module_trigger = { maxed = yes module = artisan } }
		F23_sea_hold_design_module_effect = { maxed = yes module = artisan }

		name = flavour_ovdal_tungr.51.artisan_maxed
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.52 }
	}

	# Settlement Module Module, enable
	option = { 
		trigger = { F23_sea_hold_design_module_trigger = { enable = yes module = settlement } }
		F23_sea_hold_design_module_effect = { enable = yes module = settlement }

		name = flavour_ovdal_tungr.51.settlement_enable
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.52 }
	}
	# Settlement Module Module, disable
	option = { 
		trigger = { F23_sea_hold_design_module_trigger = { disable = yes module = settlement } }
		F23_sea_hold_design_module_effect = { disable = yes module = settlement }

		name = flavour_ovdal_tungr.51.settlement_disable
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.52 }
	}
	# Settlement Module Module, maxed
	option = { 
		trigger = { F23_sea_hold_design_module_trigger = { maxed = yes module = settlement } }
		F23_sea_hold_design_module_effect = { maxed = yes module = settlement }

		name = flavour_ovdal_tungr.51.settlement_maxed
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.52 }
	}
}

# Getting around events being unable to fire themselves immediately.
country_event = {
	id = flavour_ovdal_tungr.52
	title = flavour_ovdal_tungr.51.t
	desc = flavour_ovdal_tungr.51.d
	picture = HARBOUR_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	
	option = { 
		name = flavour_ovdal_tungr.52.a
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.51 }
	}
}


# Notification event, if docking doesn't work.
country_event = {
	id = flavour_ovdal_tungr.58
	title = flavour_ovdal_tungr.58.t
	desc = flavour_ovdal_tungr.58.d
	picture = HARBOUR_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.58.a
		ai_chance = { factor = 100 }
	}
}

# Notification event, fires by on_action if the player somehow loses the province the Sea Hold was docked in.
country_event = {
	id = flavour_ovdal_tungr.59
	title = flavour_ovdal_tungr.59.t
	desc = flavour_ovdal_tungr.59.d
	picture = HARBOUR_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.59.a
		ai_chance = { factor = 100 }
	}
}

# Bulwari country bankrupt, ask OT for a bailout?
country_event = {
	id = flavour_ovdal_tungr.60
	title = flavour_ovdal_tungr.60.t
	desc = flavour_ovdal_tungr.60.d
	picture = HARBOUR_eventPicture
	
	is_triggered_only = yes
	
	option = { # Yes
		name = flavour_ovdal_tungr.60.a
		ai_chance = { factor = 100 }
		F23 = { country_event = { id = flavour_ovdal_tungr.61 } }
	}

	option = { # No
		name = flavour_ovdal_tungr.60.b
		ai_chance = { factor = 0 }
	}
}

# Bulwari country bankrupt, ask OT for a bailout?
country_event = {
	id = flavour_ovdal_tungr.61
	title = flavour_ovdal_tungr.61.t
	desc = flavour_ovdal_tungr.61.d
	picture = HARBOUR_eventPicture
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			export_to_variable = {
				which = cash_cost
				value = monthly_income
				who = FROM
			}
			multiply_variable = {
				which = cash_cost
				value = 300 # 25 years of income.
			}
			set_variable = {            
				which = cash_cost_doubled
				which = cash_cost
			}
			multiply_variable = {            
				which = cash_cost_doubled
				value = 2
			}
		}
	}

	option = { # Become trade protectorate.
		name = flavour_ovdal_tungr.61.a
		ai_chance = { factor = 0 }

		currency_effect = { currency = treasury takeFrom = ROOT which = cash_cost }

		custom_tooltip = bankruptcy_bailout

		create_subject = { subject_type = trade_protectorate subject = FROM }
		FROM = {
			remove_country_modifier = bankruptcy
		}
	}

	option = { # Release cores.
		name = flavour_ovdal_tungr.61.b
		ai_chance = { factor = 0 }

		currency_effect = { currency = treasury takeFrom = ROOT which = cash_cost }

		custom_tooltip = bankruptcy_bailout

		every_subject_country = {
			every_core_province = { limit = { owned_by = FROM }
				cede_province = PREV
			}
		}
		FROM = {
			remove_country_modifier = bankruptcy
		}
	}
	option = { # Both!
		name = flavour_ovdal_tungr.61.c
		ai_chance = { factor = 0 }

		currency_effect = { currency = treasury takeFrom = ROOT which = cash_cost_doubled }

		custom_tooltip = bankruptcy_bailout_double

		every_subject_country = {
			every_core_province = { limit = { owned_by = FROM }
				cede_province = PREV
			}
		}
		create_subject = {
			subject_type = trade_protectorate
			subject = FROM
		}
		FROM = {
			remove_country_modifier = bankruptcy
		}
	}

	option = { # Nah.
		name = flavour_ovdal_tungr.61.e
		ai_chance = { factor = 100 }
	}
}

