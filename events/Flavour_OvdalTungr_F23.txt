namespace = flavour_ovdal_tungr


#country_event = {
#	id = flavour_ovdal_tungr.1000
#	title = flavour_ovdal_tungr.1000.t
#	desc = flavour_ovdal_tungr.1000.d
#	picture = BATTLE_eventPicture
#	
#	is_triggered_only = yes
#
#	#hidden = yes # MT is perfectly playable without Domination, and I got tired of people saying "oh, I can't play this, I don't have Domination" on Reddit.
#
#	trigger = {
#		NOT = { has_dlc = "Domination" }
#	}
#	
#	option = { 
#		name = flavour_ovdal_tungr.1000.a
#		ai_chance = { factor = 100 }
#	}
#}

# Yearly hidden manager for Ovdal Tûngr.
country_event = {
	id = flavour_ovdal_tungr.1001
	title = flavour_ovdal_tungr.1001.t
	desc = flavour_ovdal_tungr.1001.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes

	hidden = yes

	trigger = {
		tag = F23
	}

	immediate = {
		if = { limit = { NOT = { has_country_flag = F23_grun_strongbellow_arrived } }
			export_to_variable = {
				variable_name = OT_grun_arrival
				value = trigger_value:is_year
			}
			export_to_variable = { 
				variable_name = OT_current_innovativeness
				value = trigger_value:innovativeness
			}
			multiply_variable = { # Multiplying OT_grun_arrival by 2 instead of dividing current inno by 2, since division is more computationally intensive.
				which = OT_grun_arrival
				value = 2
			}
			change_variable = {
				which = OT_grun_arrival
				which = OT_current_innovativeness
			}
			if = { limit = { check_variable = { which = OT_grun_arrival value = 3000 } }
				country_event = { id = flavour_ovdal_tungr.7 days = 1 random = 180 }
			}
		}
		else = {
			if = { limit = { is_year = 1589 NOT = { has_country_flag = F23_grun_death_delayed } NOT = { has_country_flag = F23_grun_strongbellow_dead } }
				country_event = { id = flavour_ovdal_tungr.10 days = 1 random = 180 }
			}
		}
	}
	
	option = { 
		name = flavour_ovdal_tungr.1001.a
		ai_chance = { factor = 100 }
	}
}

# A Better Bahar.
country_event = {
	id = flavour_ovdal_tungr.100
	title = flavour_ovdal_tungr.100.t
	desc = {
		trigger = { accepted_culture = exodus_goblin }
		desc = flavour_ovdal_tungr.100.d_1
	}
	desc = {
		trigger = { NOT = { accepted_culture = exodus_goblin } }
		desc = flavour_ovdal_tungr.100.d_2
	}
	picture = CITY_VIEW_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.100.a
		add_prestige = 50
		if = { limit = { NOT = { accepted_culture = exodus_goblin } }
			custom_tooltip = F23_goblin_minorities_removed
			hidden_effect = {
				bahar_region = {
					remove_racial_minority_any_size = { race = goblin }
				}
			}
		}
		if = { limit = { U17 = { is_subject_of = ROOT } }
			custom_tooltip = crathanor_tungr_coop_easier_iltatani_revival_tt
			hidden_effect = {
				U17 = {
					set_country_flag = crathanor_tungr_coop_easier_iltatani_revival_flag
					complete_mission = crathanor_setting_sun
					outer_drolas_area = {
						add_permanent_claim = ROOT
					}
					inner_drolas_area = {
						add_permanent_claim = ROOT
					}
					lower_brasan_area = {
						add_permanent_claim = ROOT
					}
					upper_brasan_area = {
						add_permanent_claim = ROOT
					}
					medurubar_area = {
						add_permanent_claim = ROOT
					}	
					anzabad_area = {
						add_permanent_claim = ROOT
					}
					irrliam_area = {
						add_permanent_claim = ROOT
					}
					bulwar_area = {
						add_permanent_claim = ROOT
					}
					zansap_area = {
						add_permanent_claim = ROOT
					}
					anzarzax_area = {
						add_permanent_claim = ROOT
					}
					kumarkand_area = {
						add_permanent_claim = ROOT
					}
					kuz_mountains_area = {
						add_permanent_claim = ROOT
					}
					imuluses_area = {
						add_permanent_claim = ROOT
					}
				}				
			}
			U17 = { hidden_effect = { set_country_flag = crathanor_tungr_coop_easier_iltatani_revival_flag } }
		}
	}
}

# The Matter of Aqatbar
country_event = {
	id = flavour_ovdal_tungr.110
	title = flavour_ovdal_tungr.110.t
	desc = flavour_ovdal_tungr.110.d
	picture = CITY_VIEW_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.110.a
		ai_chance = { factor = 100 }
		536 = { 
			cede_province = F23 
			remove_claim = ROOT
			remove_core = ROOT
		}
		add_favors = { who = F23 amount = 20 }
		F23 = { country_event = { id = flavour_ovdal_tungr.111 } } # Province ownership
	}
	option = { 
		name = flavour_ovdal_tungr.110.b
		ai_chance = { factor = 0 }
		536 = {
			add_dwarven_minority_size_effect = yes
			if = { limit = { NOT = { province_has_center_of_trade_of_level = 1 } } add_center_of_trade_level = 1 }
			else = { ROOT = { add_treasury = 100 } }
			add_trade_modifier = {
				who = ROOT
				duration = -1
				power = -25
				key = F23_trade_concessions
			}
			tooltip = {
				add_trade_modifier = {
					who = F23
					duration = -1
					power = 25
					key = F23_trade_concessions
				}
			}				
		}
		F23 = { country_event = { id = flavour_ovdal_tungr.112 } } # Trade rights.
	}
	option = { 
		name = flavour_ovdal_tungr.110.c
		ai_chance = { factor = 0 }
		add_trust = { who = F23 value = -20 }
		tooltip = { 536 = { add_permanent_claim = F23 } }
		F23 = { country_event = { id = flavour_ovdal_tungr.113 } } # Nothing
	}
}
# The Matter of Aqatbar response, ownership
country_event = {
	id = flavour_ovdal_tungr.111
	title = flavour_ovdal_tungr.111.t
	desc = flavour_ovdal_tungr.111.d
	picture = DIPLOMACY_SIGNING_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.111.a
		ai_chance = { factor = 100 }
		536 = { 
			add_dwarven_minority_size_effect = yes
			if = {
				limit = { province_has_center_of_trade_of_level = 3 }
				owner = { add_treasury = 100 }
			} 
			else = {
				add_center_of_trade_level = 1
			}
		}
	}
}
# The Matter of Aqatbar response, trade concessions
country_event = {
	id = flavour_ovdal_tungr.112
	title = flavour_ovdal_tungr.112.t
	desc = flavour_ovdal_tungr.112.d
	picture = MERCHANTS_TALKING_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.112.a
		ai_chance = { factor = 100 }
		536 = {
			add_trade_modifier = {
				who = ROOT
				duration = -1
				power = 25
				key = F23_trade_concessions
			}
		}
	}
}
# The Matter of Aqatbar response, refused
country_event = {
	id = flavour_ovdal_tungr.113
	title = flavour_ovdal_tungr.113.t
	desc = flavour_ovdal_tungr.113.d
	picture = GENERALS_DISCUSSING_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.113.a
		ai_chance = { factor = 100 }
		add_treasury = 100
		536 = { add_permanent_claim = F23 }
	}
}
# The Matter of Re-Uyel
country_event = {
	id = flavour_ovdal_tungr.120
	title = flavour_ovdal_tungr.120.t
	desc = flavour_ovdal_tungr.120.d
	picture = CITY_VIEW_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.120.a
		ai_chance = { factor = 100 }
		521 = { 
			cede_province = F23 
			remove_claim = ROOT
			remove_core = ROOT
		}
		add_favors = { who = F23 amount = 20 }
		F23 = { country_event = { id = flavour_ovdal_tungr.121 } } # Province ownership
	}
	option = { 
		name = flavour_ovdal_tungr.120.b
		ai_chance = { factor = 0 }
		521 = {
			add_dwarven_minority_size_effect = yes
			if = { limit = { NOT = { province_has_center_of_trade_of_level = 1 } } add_center_of_trade_level = 1 }
			else = { ROOT = { add_treasury = 100 } }
			add_trade_modifier = {
				who = ROOT
				duration = -1
				power = -25
				key = F23_trade_concessions
			}
			tooltip = {
				add_trade_modifier = {
					who = F23
					duration = -1
					power = 25
					key = F23_trade_concessions
				}
			}				
		}
		F23 = { country_event = { id = flavour_ovdal_tungr.122 } } # Trade rights.
	}
	option = { 
		name = flavour_ovdal_tungr.120.c
		ai_chance = { factor = 0 }
		add_trust = { who = F23 value = -20 }
		tooltip = { 521 = { add_permanent_claim = F23 } }
		F23 = { country_event = { id = flavour_ovdal_tungr.123 } } # Nothing
	}
}
# The Matter of Re-Uyel response, ownership
country_event = {
	id = flavour_ovdal_tungr.121
	title = flavour_ovdal_tungr.121.t
	desc = flavour_ovdal_tungr.121.d
	picture = DIPLOMACY_SIGNING_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.121.a
		ai_chance = { factor = 100 }
		521 = { 
			add_dwarven_minority_size_effect = yes 
			if = { limit = { province_has_center_of_trade_of_level = 3 }
				owner = { add_treasury = 100 }
			} 
			else = {
				add_center_of_trade_level = 1
			}
		}
	}
}
# The Matter of Re-Uyel response, trade concessions
country_event = {
	id = flavour_ovdal_tungr.122
	title = flavour_ovdal_tungr.122.t
	desc = flavour_ovdal_tungr.122.d
	picture = MERCHANTS_TALKING_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.122.a
		ai_chance = { factor = 100 }
		521 = {
			add_trade_modifier = {
				who = ROOT
				duration = -1
				power = 25
				key = F23_trade_concessions
			}
		}
	}
}
# The Matter of Re-Uyel response, refused
country_event = {
	id = flavour_ovdal_tungr.123
	title = flavour_ovdal_tungr.123.t
	desc = flavour_ovdal_tungr.123.d
	picture = GENERALS_DISCUSSING_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.123.a
		ai_chance = { factor = 100 }
		521 = { add_permanent_claim = F23 }
	}
}
# Dwarves and Humans, United
country_event = {
	id = flavour_ovdal_tungr.140
	title = flavour_ovdal_tungr.140.t
	desc = flavour_ovdal_tungr.140.d
	picture = BURGHER_ESTATE_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.140.a
		ai_chance = { factor = 100 }

		tooltip = { F23 = { create_subject = { subject_type = loyal_crathanor_subject subject = ROOT } } }

		largest_increase_of_dwarven_tolerance_effect = yes
		516 = {
			add_dwarven_minority_size_effect = yes
			add_dwarven_minority_size_effect = yes
		}

		F23 = { country_event = { id = flavour_ovdal_tungr.141 } } # Accepts vassalage
	}
	option = { 
		name = flavour_ovdal_tungr.140.b
		ai_chance = { factor = 0 }

		largest_increase_of_dwarven_tolerance_effect = yes
		516 = {
			add_dwarven_minority_size_effect = yes
			add_dwarven_minority_size_effect = yes
		}

		F23 = { country_event = { id = flavour_ovdal_tungr.142 } } # Republics United
		F23 = { add_country_modifier = { name = F23_copper_ilatani_cooperation duration = -1 } }
		U17 = { add_country_modifier = { name = F23_copper_ilatani_cooperation duration = -1 } }
	}
}
# Dwarves and Humans, United, vassalage
country_event = {
	id = flavour_ovdal_tungr.141
	title = flavour_ovdal_tungr.141.t
	desc = flavour_ovdal_tungr.141.d
	picture = CONQUEST_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.141.a
		ai_chance = { factor = 100 }

		create_subject = { subject_type = loyal_crathanor_subject subject = U17 }
		largest_increase_of_human_tolerance_effect = yes
		526 = {
			add_human_minority_size_effect = yes
			add_human_minority_size_effect = yes
		}
		custom_tooltip = F23_crathanor_missions_1
		hidden_effect = {
			U17 = {
				complete_mission = crathanor_no_representation
				complete_mission = crathanor_no_taxation
				if = { limit = { NOT = { mission_completed = crathanor_embrace_the_two_principles } }
					complete_mission = crathanor_embrace_the_two_principles
					country_event = { id = flavor_crathanor.1 }
				}
				complete_mission = crathanor_our_first_friends
				complete_mission = crathanor_not_your_mountains
				complete_mission = crathanor_together_we_rise
				bahar_region = { add_permanent_claim = U17 }
				complete_mission = crathanor_end_noble_republic
				generic_start_expulsion = { race = goblin }
			}
			every_owned_province = { remove_claim = U17 }
		}
		add_country_modifier = { name = F23_human_rowers duration = -1 }
	}
}
# Dwarves and Humans, United, friendship
country_event = {
	id = flavour_ovdal_tungr.142
	title = flavour_ovdal_tungr.142.t
	desc = flavour_ovdal_tungr.142.d
	picture = DIPLOMACY_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.142.a
		ai_chance = { factor = 100 }

		largest_increase_of_human_tolerance_effect = yes
		526 = {
			add_human_minority_size_effect = yes
			add_human_minority_size_effect = yes
		}
		tooltip = {
			F23 = { add_country_modifier = { name = F23_copper_ilatani_cooperation duration = -1 } }
			U17 = { add_country_modifier = { name = F23_copper_ilatani_cooperation duration = -1 } }
		}
	}
}
# Tugged Two Ways
country_event = {
	id = flavour_ovdal_tungr.0
	title = flavour_ovdal_tungr.0.t
	desc = flavour_ovdal_tungr.0.d
	picture = BURGHER_ESTATE_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.0.a
		ai_chance = { factor = 100 }
		add_country_modifier = { name = F23_naval_morale_buff duration = 3650 }
		isle_of_tef_area = {
			add_permanent_claim = ROOT
		}
		custom_tooltip = F23_tugged_two_ways_tt
	}
}
# Safe Sarhali Seas
country_event = {
	id = flavour_ovdal_tungr.1
	title = flavour_ovdal_tungr.1.t
	desc = flavour_ovdal_tungr.1.d
	picture = BARBARY_PIRATES_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.1.a
		add_country_modifier = { name = F23_safe_sarhali_seas_mod duration = -1 }
		custom_tooltip = F23_reform_progress_mod_augmentation
		hidden_effect = {
			remove_country_modifier = F23_reform_progress_mod_1
			add_country_modifier = { name = F23_reform_progress_mod_2 duration = -1 }
		}

		#if = { limit = { mission_completed = F23_steamers }
		#	custom_tooltip = F23_upstream_trade_unlock_tt
		#}
		if = { limit = { has_dlc = "Domination" }
			custom_tooltip = F23_safe_sarhali_seas_tt
		}
	}
}
# The Copper Seaway
country_event = {
	id = flavour_ovdal_tungr.2
	title = flavour_ovdal_tungr.2.t
	desc = flavour_ovdal_tungr.2.d
	picture = HARBOUR_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.2.a
		remove_country_modifier = F23_safe_sarhali_seas_mod
		add_country_modifier = { name = F23_the_copper_seaway_mod duration = -1 }

		custom_tooltip = F23_reform_progress_mod_augmentation
		hidden_effect = {
			remove_country_modifier = F23_reform_progress_mod_1
			add_country_modifier = { name = F23_reform_progress_mod_2 duration = -1 }
		}
		#if = { limit = { mission_completed = F23_steamers }
		#	custom_tooltip = F23_upstream_trade_unlock_tt
		#}
		if = { limit = { has_dlc = "Leviathan" }
			custom_tooltip = F23_the_copper_seaway_tt
		}
	}
}
# Copper needed for Sheathing
country_event  = {
	id = flavour_ovdal_tungr.3
	title = flavour_ovdal_tungr.3.t
	desc = flavour_ovdal_tungr.3.d
	picture = INVENTION_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.3.a
		ai_chance = { factor = 100 }

		custom_tooltip = flavour_ovdal_tungr.3_tooltip
		hidden_effect = {
			bulwar_superregion = { limit = { trade_goods = copper }
				if = { limit = { trade_goods = copper}
					add_permanent_province_modifier = { name = F23_copper_sheathing_price_increase duration = -1 }
				}
			}
			businor_region = { limit = { trade_goods = copper }
				if = { limit = { trade_goods = copper}
					add_permanent_province_modifier = { name = F23_copper_sheathing_price_increase duration = -1 }
				}
			}
			east_dameshead_region = { limit = { trade_goods = copper }
				if = { limit = { trade_goods = copper}
					add_permanent_province_modifier = { name = F23_copper_sheathing_price_increase duration = -1 }
				}
			}
		}
	}
}
# id 4, available.

# A Discovery
country_event = {
	id = flavour_ovdal_tungr.5
	title = flavour_ovdal_tungr.5.t
	desc = flavour_ovdal_tungr.5.d
	picture = OVEREXTENSION_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.5.a
		ai_chance = { factor = 100 }

		hidden_effect = {
			set_country_flag = F23_MT_unlock_grudge
		}
		4124 = {
			owner = {
				reverse_add_casus_belli = {
					target = ROOT
					type = cb_insult
					months = 240
				}
			}
			add_permanent_claim = ROOT
		}
		swap_non_generic_missions = yes
	}
}
# A Grudge Righted
country_event = {
	id = flavour_ovdal_tungr.6
	title = flavour_ovdal_tungr.6.t
	desc = flavour_ovdal_tungr.6.d
	picture = COUNTRY_COLLAPSE_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.6.a
		ai_chance = { factor = 100 }

		add_power_projection = { type = mission_rewards_power_projection amount = 15 }

		4124 = {
			add_devastation = 50
			province_event = { id = diggy.13 }
			custom_tooltip = F23_grudge_righted_tt
		}
	}
}

# The Arrival of Grun Strongbellow
country_event = {
	id = flavour_ovdal_tungr.7
	title = flavour_ovdal_tungr.7.t
	desc = flavour_ovdal_tungr.7.d
	picture = INVENTION_eventPicture
	
	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		tag = F23
	}

	immediate = {
		hidden_effect = { set_country_flag = F23_grun_strongbellow_arrived }
	}
	
	option = { 
		name = flavour_ovdal_tungr.7.a
		ai_chance = { factor = 100 }

		add_historical_friend = A73
		A73 = { add_historical_friend = ROOT }
		add_accepted_culture = silver_dwarf
		add_country_modifier = { name = F23_grun_strongbellow duration = -1 }
		add_country_modifier = { name = free_slot_for_silver_dwarf duration = -1 }

		set_country_flag = F23_mt_unlock_strongbellow_1
		swap_non_generic_missions = yes

		hidden_effect = {
			country_event = {
				id = flavour_ovdal_tungr.8
				days = 7300
			}
		}
	}
}

# The Departure of Grun Strongbellow
country_event = {
	id = flavour_ovdal_tungr.8
	title = flavour_ovdal_tungr.8.t
	desc = flavour_ovdal_tungr.8.d
	picture = REFORM_eventPicture
	
	is_triggered_only = yes

	trigger = { 
		NOT = { has_country_flag = F23_grun_stay_extended }
		NOT = { has_country_flag = F23_grun_strongbellow_dead }
	}
	
	option = { 
		name = flavour_ovdal_tungr.8.a
		ai_chance = { factor = 100 }
		remove_country_modifier = F23_grun_strongbellow 

		hidden_effect = { set_country_flag = F23_MT_unlock_strongbellow_society }
		swap_non_generic_missions = yes
	}
}

# Steam Curios
country_event = {
	id = flavour_ovdal_tungr.9
	title = flavour_ovdal_tungr.9.t
	desc = flavour_ovdal_tungr.9.d
	picture = INVENTION_eventPicture
	
	is_triggered_only = yes

	option = { 
		name = flavour_ovdal_tungr.9.a
		ai_chance = { factor = 100 }
		526 = { add_province_modifier = { name = F23_steam_curios duration = 7300 } }
	}
}

# Death of Strongbellow
country_event = {
	id = flavour_ovdal_tungr.10
	title = flavour_ovdal_tungr.10.t
	desc = {
		trigger = { NOT = { religion = dwarven_pantheon } has_country_modifier = F23_grun_strongbellow }
		desc = flavour_ovdal_tungr.10.d_1
	}
	desc = {
		trigger = { NOT = { religion = dwarven_pantheon } NOT = { has_country_modifier = F23_grun_strongbellow } }
		desc = flavour_ovdal_tungr.10.d_2
	}
	desc = {
		trigger = { religion = dwarven_pantheon has_country_modifier = F23_grun_strongbellow }
		desc = flavour_ovdal_tungr.10.d_3
	}
	desc = {
		trigger = { religion = dwarven_pantheon NOT = { has_country_modifier = F23_grun_strongbellow } }
		desc = flavour_ovdal_tungr.10.d_4
	}
	picture = DEATH_OF_HEIR_eventPicture
	
	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		tag = F23
	}

	immediate = {
		hidden_effect = {
			clr_country_flag = F23_grun_strongbellow_arrived
			set_country_flag = F23_grun_strongbellow_dead
		}
	}
	
	option = { 
		ai_chance = { factor = 100 }
		name = flavour_ovdal_tungr.10.a
		if = { limit = { has_country_modifier = F23_grun_strongbellow }
			remove_country_modifier = F23_grun_strongbellow
		}
		add_stability = -1 
		hidden_effect = { set_country_flag = F23_grun_strongbellow_dead }
	}
}

# The High Seas, capstone event
country_event = {
	id = flavour_ovdal_tungr.15
	title = flavour_ovdal_tungr.15.t
	desc = {
		trigger = { U17 = { AI = yes } }
		desc = flavour_ovdal_tungr.15.d_1
	}
	desc = {
		trigger = { U17 = { AI = no } }
		desc = flavour_ovdal_tungr.15.d_2
	}
	picture = ANB_GLOBAL_TRADE_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.15.a
		ai_chance = { factor = 100 }
		if = { limit = { has_dlc = "Emperor" }
			if = { limit = { is_hegemon_of_type = naval_hegemon }
				add_country_modifier = { name = F23_secondary_hegemony_eco duration = -1 }
			}
			else = {
				add_country_modifier = { name = F23_secondary_hegemony_naval duration = -1 }
			}
		}
		else = {
			add_country_modifier = { name = F23_maritime_hegemony duration = -1 }
		}
		custom_tooltip = F23_capstone_sea_hold_upgrade
		hidden_effect = { change_variable = { which = sea_hold_var_slots value = 1 } }
	}
}


# Sunken City of Barzisah
country_event = {
	id = flavour_ovdal_tungr.20
	title = flavour_ovdal_tungr.20.t
	desc = flavour_ovdal_tungr.20.d
	picture = BIG_BOOK_eventPicture
	
	is_triggered_only = yes

	option = { # Yametses
		trigger = { NOT = { has_country_flag = F23_explorers_yametses } }
		name = flavour_ovdal_tungr.20.a
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.21 days = 730 }
		add_prestige = 5
	}
	
	option = { # Pasah
		trigger = { NOT = { has_country_flag = F23_explorers_pasah } }
		name = flavour_ovdal_tungr.20.b
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.22 days = 730 }
		add_prestige = 5
	}
	
	option = { # Pir Ail
		trigger = { NOT = { has_country_flag = F23_explorers_pir_ail } }
		name = flavour_ovdal_tungr.20.c
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.23 days = 730 }
		add_prestige = 5
	}
}
# Explorers of the Depths, Yametses
country_event = {
	id = flavour_ovdal_tungr.21
	title = flavour_ovdal_tungr.21.t
	desc = {
		trigger = { has_country_flag = F23_explorers_pasah has_country_flag = F23_explorers_pir_ail }
		desc = flavour_ovdal_tungr.21.d_1
	}
	desc = {
		trigger = { NOT = { has_country_flag = F23_explorers_pasah has_country_flag = F23_explorers_pir_ail } }
		desc = flavour_ovdal_tungr.21.d_2
	}
	picture = BIG_BOOK_eventPicture
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = { set_country_flag = F23_explorers_yametses }
	}

	option = { # Pasah
		trigger = { NOT = { has_country_flag = F23_explorers_pasah } }
		name = flavour_ovdal_tungr.20.b
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.22 days = 730 }
		add_prestige = 5
	}
	
	option = { # Pir Ail
		trigger = { NOT = { has_country_flag = F23_explorers_pir_ail } }
		name = flavour_ovdal_tungr.20.c
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.23 days = 730 }
		add_prestige = 5
	}
	
	option = { # Deeper depths
		trigger = { has_country_flag = F23_explorers_yametses has_country_flag = F23_explorers_pasah has_country_flag = F23_explorers_pir_ail }
		name = flavour_ovdal_tungr.20.e
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.25 days = 730 }
		add_prestige = 10
	}
}
# Explorers of the Depths, Pasah
country_event = {
	id = flavour_ovdal_tungr.22
	title = flavour_ovdal_tungr.22.t
	desc = {
		trigger = { has_country_flag = F23_explorers_yametses has_country_flag = F23_explorers_pir_ail }
		desc = flavour_ovdal_tungr.22.d_1
	}
	desc = {
		trigger = { NOT = { has_country_flag = F23_explorers_yametses has_country_flag = F23_explorers_pir_ail } }
		desc = flavour_ovdal_tungr.22.d_2
	}
	picture = BIG_BOOK_eventPicture
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = { set_country_flag = F23_explorers_pasah }
	}

	option = { # Yametses
		trigger = { NOT = { has_country_flag = F23_explorers_yametses } }
		name = flavour_ovdal_tungr.20.a
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.21 days = 730 }
		add_prestige = 5
	}
		
	option = { # Pir Ail
		trigger = { NOT = { has_country_flag = F23_explorers_pir_ail } }
		name = flavour_ovdal_tungr.20.c
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.23 days = 730 }
		add_prestige = 5
	}
	
	option = { # Deeper depths
		trigger = { has_country_flag = F23_explorers_yametses has_country_flag = F23_explorers_pasah has_country_flag = F23_explorers_pir_ail }
		name = flavour_ovdal_tungr.20.e
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.25 days = 730 }
		add_prestige = 10
	}
}
# Explorers of the Depths, Pir Ail
country_event = {
	id = flavour_ovdal_tungr.23
	title = flavour_ovdal_tungr.23.t
	desc = {
		trigger = { has_country_flag = F23_explorers_yametses has_country_flag = F23_explorers_pasah }
		desc = flavour_ovdal_tungr.23.d_1
	}
	desc = {
		trigger = { NOT = { has_country_flag = F23_explorers_yametses has_country_flag = F23_explorers_pasah } }
		desc = flavour_ovdal_tungr.23.d_2
	}
	picture = BIG_BOOK_eventPicture
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = { set_country_flag = F23_explorers_pir_ail }
	}

	option = { # Yametses
		trigger = { NOT = { has_country_flag = F23_explorers_yametses } }
		name = flavour_ovdal_tungr.20.a
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.21 days = 730 }
		add_prestige = 5
	}
	
	option = { # Pasah
		trigger = { NOT = { has_country_flag = F23_explorers_pasah } }
		name = flavour_ovdal_tungr.20.b
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.22 days = 730 }
		add_prestige = 5
	}
		
	option = { # Deeper depths
		trigger = { has_country_flag = F23_explorers_yametses has_country_flag = F23_explorers_pasah has_country_flag = F23_explorers_pir_ail }
		name = flavour_ovdal_tungr.20.e
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.25 days = 730 }
		add_prestige = 10
	}
}

# Deeper Depths
country_event = {
	id = flavour_ovdal_tungr.25
	title = flavour_ovdal_tungr.25.t
	desc = flavour_ovdal_tungr.25.d
	picture = BIG_BOOK_eventPicture
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			clr_country_flag = F23_explorers_pasah
			clr_country_flag = F23_explorers_pir_ail
			clr_country_flag = F23_explorers_yametses
		}
	}

	option = { 
		name = flavour_ovdal_tungr.25.a
		ai_chance = { factor = 100 }
		set_country_flag = F23_mt_unlock_strongbellow_2
		swap_non_generic_missions = yes
	}
}


# Depths of the Divenhal
country_event = {
	id = flavour_ovdal_tungr.30 # A Flooded Settlement
	title = flavour_ovdal_tungr.30.t
	desc = flavour_ovdal_tungr.30.d
	picture = DARK_EXPEDITION_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.30.a
		ai_chance = { factor = 100 }

		country_event = { id = flavour_ovdal_tungr.31 days = 730 }
		add_prestige = 5
	}
}
country_event = {
	id = flavour_ovdal_tungr.31 # Sunken sails and Corroded Coins
	title = flavour_ovdal_tungr.31.t
	desc = flavour_ovdal_tungr.31.d
	picture = DARK_EXPEDITION_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.31.a
		ai_chance = { factor = 100 }

		country_event = { id = flavour_ovdal_tungr.32 days = 730 }
		add_prestige = 5
	}
}
country_event = {
	id = flavour_ovdal_tungr.32 # Those who Dive
	title = flavour_ovdal_tungr.32.t
	desc = flavour_ovdal_tungr.32.d
	picture = DARK_EXPEDITION_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.32.a
		ai_chance = { factor = 100 }

		country_event = { id = flavour_ovdal_tungr.33 days = 5 }
	}
}
country_event = {
	id = flavour_ovdal_tungr.33 # A Djinn-touched Discovery
	title = flavour_ovdal_tungr.33.t
	desc = flavour_ovdal_tungr.33.d
	picture = DARK_EXPEDITION_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.33.a
		ai_chance = { factor = 100 }

		country_event = { id = flavour_ovdal_tungr.34 days = 730 }
		add_prestige = 20
	}
}

country_event = {
	id = flavour_ovdal_tungr.34 # A Lost Warship
	title = flavour_ovdal_tungr.34.t
	desc = flavour_ovdal_tungr.34.d
	picture = DARK_EXPEDITION_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.34.a
		ai_chance = { factor = 100 }

		country_event = { id = flavour_ovdal_tungr.34 days = 730 }
		add_prestige = 10
	}
}

country_event = {
	id = flavour_ovdal_tungr.35
	title = flavour_ovdal_tungr.35.t
	desc = {
		trigger = { NOT = { has_country_modifier = F23_grun_strongbellow } NOT = { has_country_flag = F23_grun_strongbellow_dead } }
		desc = flavour_ovdal_tungr.35.d_1
	}
	desc = {
		trigger = { has_country_modifier = F23_grun_strongbellow }
		desc = flavour_ovdal_tungr.35.d_2
	}
	desc = {
		trigger = { has_country_flag = F23_grun_strongbellow_dead }
		desc = flavour_ovdal_tungr.35.d_3
	}
	picture = DARK_EXPEDITION_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.35.a
		ai_chance = { factor = 100 }

		country_event = { id = flavour_ovdal_tungr.36 days = 3650 }
		if = { limit = { NOT = { has_country_flag = F23_grun_strongbellow_dead } }
			if = { limit = { has_country_modifier = F23_grun_strongbellow }
				hidden_effect = { set_country_flag = F23_grun_stay_extended }
			}
			else = {
				add_country_modifier = { name = F23_grun_strongbellow duration = -1 }
			}
		}
	}
}

country_event = {
	id = flavour_ovdal_tungr.36
	title = flavour_ovdal_tungr.36.t
	desc = {
		trigger = { has_country_modifier = F23_grun_strongbellow }
		desc = flavour_ovdal_tungr.36.d_1
	}
	desc = {
		trigger = { NOT = { has_country_modifier = F23_grun_strongbellow } mission_completed = F23_strongbellow_society }
		desc = flavour_ovdal_tungr.36.d_2
	}
	desc = {
		trigger = { NOT = { has_country_modifier = F23_grun_strongbellow } NOT = { mission_completed = F23_strongbellow_society } }
		desc = flavour_ovdal_tungr.36.d_3
	}
	picture = INVENTION_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.36.a
		ai_chance = { factor = 100 }

		set_country_flag = F23_mt_unlock_strongbellow_3
		swap_non_generic_missions = yes
		remove_country_modifier = F23_grun_strongbellow
		hidden_effect = { clr_country_flag = F23_grun_stay_extended }
	}
}

# The Dredging
country_event = {
	id = flavour_ovdal_tungr.40
	title = flavour_ovdal_tungr.40.t
	desc = flavour_ovdal_tungr.40.d
	picture = HARBOUR_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.40.a
		ai_chance = { factor = 100 }

		if = {
			limit = { has_dlc = "Rule Britannia" }
			custom_tooltip = even_earlier_coal_available_tt
		}
		hidden_effect = { set_country_flag = even_earlier_coal_available set_country_flag = F23_grun_death_delayed }

		country_event = { id = flavour_ovdal_tungr.41 days = 5 }
	}
}

country_event = {
	id = flavour_ovdal_tungr.41
	title = flavour_ovdal_tungr.41.t
	desc = {
		trigger = { NOT = { has_country_flag = F23_grun_strongbellow_dead } }
		desc = flavour_ovdal_tungr.41.d_1
	}
	desc = {
		trigger = { has_country_flag = F23_grun_strongbellow_dead }
		desc = flavour_ovdal_tungr.41.d_2
	}
	picture = COLONIZATION_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.41.a
		ai_chance = { factor = 100 }

		581 = { add_province_modifier = { name = F23_precursor_dredging_center duration = -1 } }
		country_event = { id = flavour_ovdal_tungr.42 days = 10 }
	}
}

country_event = {
	id = flavour_ovdal_tungr.42
	title = flavour_ovdal_tungr.42.t
	desc = {
		trigger = { NOT = { has_country_flag = F23_grun_strongbellow_dead } }
		desc = flavour_ovdal_tungr.42.d_1
	}
	desc = {
		trigger = { has_country_flag = F23_grun_strongbellow_dead }
		desc = flavour_ovdal_tungr.42.d_2
	}
	picture = SHIP_SAILING_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.42.a
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.43 days = 10 }

		custom_tooltip = F23_party_location_unlock_uthojbrog_tt
		hidden_effect = { set_country_flag = F23_party_location_unlocked_uthojbrog }
	}
}

country_event = {
	id = flavour_ovdal_tungr.43
	title = flavour_ovdal_tungr.43.t
	desc = {
		trigger = { NOT = { has_country_flag = F23_grun_strongbellow_dead } }
		desc = flavour_ovdal_tungr.43.d_1
	}
	desc = {
		trigger = { has_country_flag = F23_grun_strongbellow_dead }
		desc = flavour_ovdal_tungr.43.d_2
	}
	picture = DARK_EXPEDITION_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.43.a
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.44 days = 10 }
	}
}

country_event = {
	id = flavour_ovdal_tungr.44
	title = flavour_ovdal_tungr.44.t
	desc = flavour_ovdal_tungr.44.d
	picture = CARIBBEAN_PIRATE_FORT_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.44.a
		ai_chance = { factor = 100 }
		581 = { change_trade_goods = precursor_relics }
		country_event = { id = flavour_ovdal_tungr.45 days = 30 }
	}
}

country_event = {
	id = flavour_ovdal_tungr.45
	title = flavour_ovdal_tungr.45.t
	desc = flavour_ovdal_tungr.45.d
	picture = DIPLOMACY_eventPicture
	
	is_triggered_only = yes

	option = { 
		name = flavour_ovdal_tungr.45.a
		ai_chance = { factor = 100 }

		remove_country_modifier = F23_steamers_mod
		add_country_modifier = { name = F23_steamers_mod_2 duration = -1 }

		set_country_flag = F23_mt_unlock_strongbellow_4
		swap_non_generic_missions = yes
		hidden_effect = { clr_country_flag = F23_grun_death_delayed }
	}
}

country_event = {
	id = flavour_ovdal_tungr.47
	title = flavour_ovdal_tungr.47.t
	desc = flavour_ovdal_tungr.47.d
	picture = INVENTION_eventPicture
	
	is_triggered_only = yes
	fire_only_once = yes

	option = { 
		name = flavour_ovdal_tungr.47.a
		country_event = { id = flavour_ovdal_tungr.48 }
	}
}

country_event = {
	id = flavour_ovdal_tungr.48
	title = flavour_ovdal_tungr.48.t
	desc = flavour_ovdal_tungr.48.d
	picture = INVENTION_eventPicture
	
	is_triggered_only = yes

	option = { 
		name = flavour_ovdal_tungr.48.a
		country_event = { id = flavour_ovdal_tungr.49 }
	}
}

country_event = {
	id = flavour_ovdal_tungr.49
	title = flavour_ovdal_tungr.49.t
	desc = flavour_ovdal_tungr.49.d
	picture = INVENTION_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.49.a
		custom_tooltip = F23_party_location_unlock_ovdal_uthoj_tt
	}
}


# Sea Hold main menu
country_event = {
	id = flavour_ovdal_tungr.50
	title = flavour_ovdal_tungr.50.t
	desc = flavour_ovdal_tungr.50.d
	picture = HARBOUR_eventPicture
	
	is_triggered_only = yes

	immediate = { hidden_effect = { set_country_flag = F23_sea_hold_menu_open } }
	after = { hidden_effect = { clr_country_flag = F23_sea_hold_menu_open } }

	# Undocking.
	option = { 
		trigger = {
			has_country_flag = F23_sea_hold_active
			has_country_flag = F23_sea_hold_docked_country
		}

		name = flavour_ovdal_tungr.50.undock
		ai_chance = { factor = 100 }

		F23_sea_hold_undocking = yes
	}

	# Docking.
	option = { 
		trigger = {
			has_country_flag = F23_sea_hold_active
			NOT = { has_country_flag = F23_sea_hold_docked_country }
			num_of_galley = 1
			NOT = { num_of_galley = 2 }
			any_owned_province = {
				galleys_in_province = 1
				has_province_flag = F23_improved_trading_post_flag
			}
		}

		name = flavour_ovdal_tungr.50.dock
		ai_chance = { factor = 100 }

		if = {
			limit = {
				num_of_galley = 1
				NOT = { num_of_galley = 2 }
				any_owned_province = {
					galleys_in_province = 1
					has_province_flag = F23_improved_trading_post_flag
				}
			}
			F23_sea_hold_docking = yes
		}
		else = {
			custom_tooltip = F23_sea_hold_cannot_dock_tt
		}
	}

	# Cannot dock.
	option = { 
		trigger = {
			has_country_flag = F23_sea_hold_active
			NOT = { has_country_flag = F23_sea_hold_docked_country }
			NOT = {
				AND = {
					num_of_galley = 1
					NOT = { num_of_galley = 2 }
					any_owned_province = {
						galleys_in_province	= 1
						has_province_flag = F23_improved_trading_post_flag
					}
				}
			}
		}

		name = flavour_ovdal_tungr.50.no_dock
		ai_chance = { factor = 100 }

		custom_tooltip = F23_sea_hold_cannot_dock_tt
	}

	# Permanently dock.
	option = { 
		trigger = {
			has_country_flag = F23_sea_hold_active
			has_country_flag = F23_sea_hold_docked_country
			has_country_flag = F23_sea_hold_settlement_enabled
		}

		custom_tooltip = F23_sea_hold_permadock_tt

		name = flavour_ovdal_tungr.50.permadock
		ai_chance = { factor = 100 }

		hidden_effect = {
			F23_sea_hold_permadock_effect = yes
		}
	}

	# Permanently dock, unavailable.
	option = { 
		trigger = {
			has_country_flag = F23_sea_hold_active
			NOT = { has_country_flag = F23_sea_hold_docked_country }
			has_country_flag = F23_sea_hold_settlement_enabled
		}

		custom_tooltip = F23_sea_hold_cannot_permadock_tt

		name = flavour_ovdal_tungr.50.cannot_permadock
		ai_chance = { factor = 100 }
	}

	# Design
	option = { 
		name = flavour_ovdal_tungr.50.design
		ai_chance = { factor = 100 }

		custom_tooltip = F23_sea_hold_design_tt

		country_event = { id = flavour_ovdal_tungr.51 }		
	}

	# Overhaul, available
	option = { 
		name = flavour_ovdal_tungr.50.overhaul
		ai_chance = { factor = 100 }

		trigger = { 
			has_country_flag = F23_sea_hold_active
			526 = { has_province_flag = F23_sea_hold_docked_prov }
		}

		F23_sea_hold_overhaul = yes

		custom_tooltip = F23_sea_hold_overhaul_tt

		country_event = { id = flavour_ovdal_tungr.51 }		
	}

	# Overhaul, unavailable
	option = { 
		name = flavour_ovdal_tungr.50.cannot_overhaul
		ai_chance = { factor = 100 }

		trigger = { 
			has_country_flag = F23_sea_hold_active
			NOT = { 526 = { has_province_flag = F23_sea_hold_docked_prov } }
		}

		custom_tooltip = F23_sea_hold_cannot_overhaul_tt

		country_event = { id = flavour_ovdal_tungr.51 }		
	}

	# Launch
	option = { 
		trigger = {
			NOT = { has_country_flag = F23_sea_hold_docked_country }
			NOT = { has_country_flag = F23_sea_hold_active }
		}
		name = flavour_ovdal_tungr.50.launch
		ai_chance = { factor = 100 }

		if = {
			limit = {
				NOT = { num_of_galley = 1 }
			}
			custom_tooltip = F23_sea_hold_launch_tt
			hidden_effect = { 
				526 = { set_province_flag = F23_sea_hold_spawn_location } 
				F23_sea_hold_spawn = yes
				set_country_flag = F23_sea_hold_active
			}
			if = {
				limit = { has_country_flag = F23_sea_hold_landing_bay_enabled }
				add_country_modifier = { name = F23_sea_hold_landing_bay_buff duration = -1 }
			}
		}
		else = {
			custom_tooltip = F23_sea_hold_launch_galleys_tt
		}
		if = { limit = { NOT = { has_country_flag = F23_sea_hold_launched_event } }
			country_event = { id = flavour_ovdal_tungr.47 }
			hidden_effect = { set_country_flag = F23_sea_hold_launched_event }
		}
	}

	# Pity (also, testing)
	option = {
		name = flavour_ovdal_tungr.50.debug
		trigger = {
			has_country_flag = F23_sea_hold_active
			NOT = { has_country_flag = F23_sea_hold_docked_country }
			NOT = { num_of_galley = 1 }
		}

		custom_tooltip = F23_sea_hold_launch_tt
		hidden_effect = { 
			526 = { set_province_flag = F23_sea_hold_spawn_location } 
			F23_sea_hold_spawn = yes
			set_country_flag = F23_sea_hold_active
		}
	}

	# Reapply permadocked modifiers, in case something went wrong.
	# TBH, big chance something went wrong here.
	# TODO OT, test this thoroughly.
	option = { 
		trigger = {
			# TODO OT, hide until the proper mission has been completed.
			any_owned_province = { has_province_flag = F23_sea_hold_permanently_docked }
		}
		name = flavour_ovdal_tungr.50.reapply
		ai_chance = { factor = 100 }
		custom_tooltip = F23_sea_hold_reapply_tt

		F23_sea_hold_permadock_reapply_effect_country = yes
	}

	# Exit.
	option = { 
		name = flavour_ovdal_tungr.50.exit
		ai_chance = { factor = 100 }
	}
}

# Design sub-menu.
country_event = {
	id = flavour_ovdal_tungr.51
	title = flavour_ovdal_tungr.51.t
	desc = {
		trigger = { 
			NOT = { mission_completed = F23_center_of_the_world } 
			NOT = { has_dlc = "Leviathan" }
		}
		desc = flavour_ovdal_tungr.51.d_1_nondlc
	}
	desc = {
		trigger = { 
			mission_completed = F23_center_of_the_world 
			NOT = { has_dlc = "Leviathan" }
		}
		desc = flavour_ovdal_tungr.51.d_2_nondlc
	}
	desc = {
		trigger = { 
			NOT = { mission_completed = F23_center_of_the_world } 
			has_dlc = "Leviathan"
		}
		desc = flavour_ovdal_tungr.51.d_1_dlc
	}
	desc = {
		trigger = { 
			mission_completed = F23_center_of_the_world 
			has_dlc = "Leviathan"
		}
		desc = flavour_ovdal_tungr.51.d_2_dlc
	}
	picture = HARBOUR_eventPicture
	
	is_triggered_only = yes

	immediate = { hidden_effect = { set_country_flag = F23_sea_hold_menu_open } }
	after = { hidden_effect = { clr_country_flag = F23_sea_hold_menu_open } }

	# Done with design
	option = { 
		name = flavour_ovdal_tungr.51.done
		ai_chance = { factor = 100 }

		country_event = { id = flavour_ovdal_tungr.50 }
	}

	# Base Modification
	option = { 
		name = flavour_ovdal_tungr.51.base
		ai_chance = { factor = 100 }

		custom_tooltip = F23_sea_hold_design_sea_hold_desc
		hidden_effect = { country_event = { id = flavour_ovdal_tungr.52 } }
	}

	# Improved Battlements Modification, enable
	option = { 
		trigger = { F23_sea_hold_design_modification_trigger = { enable = yes modification = improved_battlements } }
		F23_sea_hold_design_modification_effect = { enable = yes modification = improved_battlements }

		name = flavour_ovdal_tungr.51.improved_battlements_enable
		ai_chance = { factor = 100 }
		hidden_effect = { country_event = { id = flavour_ovdal_tungr.52 } }
	}
	# Improved Battlements Modification, disable
	option = { 
		trigger = { F23_sea_hold_design_modification_trigger = { disable = yes modification = improved_battlements } }
		F23_sea_hold_design_modification_effect = { disable = yes modification = improved_battlements }

		name = flavour_ovdal_tungr.51.improved_battlements_disable
		ai_chance = { factor = 100 }
		hidden_effect = { country_event = { id = flavour_ovdal_tungr.52 } }
	}
	# Improved Battlements Modification, maxed
	option = { 
		trigger = { F23_sea_hold_design_modification_trigger = { maxed = yes modification = improved_battlements } }
		F23_sea_hold_design_modification_effect = { maxed = yes modification = improved_battlements }

		name = flavour_ovdal_tungr.51.improved_battlements_maxed
		ai_chance = { factor = 100 }
		hidden_effect = { country_event = { id = flavour_ovdal_tungr.52 } }
	}

	# Mortar Bay Modification, enable
	option = { 
		trigger = { 
			F23_sea_hold_design_modification_trigger = { enable = yes modification = mortar_bay } 
		}
		F23_sea_hold_design_modification_effect = { enable = yes modification = mortar_bay }

		name = flavour_ovdal_tungr.51.mortar_bay_enable
		ai_chance = { factor = 100 }
		hidden_effect = { country_event = { id = flavour_ovdal_tungr.52 } }
	}
	# Mortar Bay Modification, disable
	option = { 
		trigger = { 
			F23_sea_hold_design_modification_trigger = { disable = yes modification = mortar_bay } 
		}
		F23_sea_hold_design_modification_effect = { disable = yes modification = mortar_bay }

		name = flavour_ovdal_tungr.51.mortar_bay_disable
		ai_chance = { factor = 100 }
		hidden_effect = { country_event = { id = flavour_ovdal_tungr.52 } }
	}
	# Mortar Bay Modification, maxed
	option = { 
		trigger = { 
			F23_sea_hold_design_modification_trigger = { maxed = yes modification = mortar_bay } 
		}
		F23_sea_hold_design_modification_effect = { maxed = yes modification = mortar_bay }

		name = flavour_ovdal_tungr.51.mortar_bay_maxed
		ai_chance = { factor = 100 }
		hidden_effect = { country_event = { id = flavour_ovdal_tungr.52 } }
	}

	# Gyrocopter Bay Modification, enable
	option = { 
		trigger = { 
			F23_sea_hold_design_modification_trigger = { enable = yes modification = gyrocopter_bay } 
			has_country_flag = unlocked_artifice_invention_gyrocopters
		}
		F23_sea_hold_design_modification_effect = { enable = yes modification = gyrocopter_bay }

		name = flavour_ovdal_tungr.51.gyrocopter_bay_enable
		ai_chance = { factor = 100 }
		hidden_effect = { country_event = { id = flavour_ovdal_tungr.52 } }
	}
	# Gyrocopter Bay Modification, disable
	option = { 
		trigger = { 
			F23_sea_hold_design_modification_trigger = { disable = yes modification = gyrocopter_bay } 
			has_country_flag = unlocked_artifice_invention_gyrocopters
		}
		F23_sea_hold_design_modification_effect = { disable = yes modification = gyrocopter_bay }

		name = flavour_ovdal_tungr.51.gyrocopter_bay_disable
		ai_chance = { factor = 100 }
		hidden_effect = { country_event = { id = flavour_ovdal_tungr.52 } }
	}
	# Gyrocopter Bay Modification, maxed
	option = { 
		trigger = { 
			F23_sea_hold_design_modification_trigger = { maxed = yes modification = gyrocopter_bay } 
			has_country_flag = unlocked_artifice_invention_gyrocopters
		}
		F23_sea_hold_design_modification_effect = { maxed = yes modification = gyrocopter_bay }

		name = flavour_ovdal_tungr.51.gyrocopter_bay_maxed
		ai_chance = { factor = 100 }
		hidden_effect = { country_event = { id = flavour_ovdal_tungr.52 } }
	}

	# Floating farms made reduntant by Steamp Powered Navy
	## Floating Farms Modification, enable
	#option = { 
	#	trigger = { F23_sea_hold_design_modification_trigger = { enable = yes modification = floating_farms } }
	#	F23_sea_hold_design_modification_effect = { enable = yes modification = floating_farms }
	#
	#	name = flavour_ovdal_tungr.51.floating_farms_enable
	#	ai_chance = { factor = 100 }
	#	hidden_effect = { country_event = { id = flavour_ovdal_tungr.52 } }
	#}
	## Floating Farms Modification, disable
	#option = { 
	#	trigger = { F23_sea_hold_design_modification_trigger = { disable = yes modification = floating_farms } }
	#	F23_sea_hold_design_modification_effect = { disable = yes modification = floating_farms }
	#
	#	name = flavour_ovdal_tungr.51.floating_farms_disable
	#	ai_chance = { factor = 100 }
	#	hidden_effect = { country_event = { id = flavour_ovdal_tungr.52 } }
	#}
	## Floating Farms Modification, maxed
	#option = { 
	#	trigger = { F23_sea_hold_design_modification_trigger = { maxed = yes modification = floating_farms } }
	#	F23_sea_hold_design_modification_effect = { maxed = yes modification = floating_farms }
	#
	#	name = flavour_ovdal_tungr.51.floating_farms_maxed
	#	ai_chance = { factor = 100 }
	#	hidden_effect = { country_event = { id = flavour_ovdal_tungr.52 } }
	#}

	# Landing Bay Modification, enable
	option = { 
		trigger = { F23_sea_hold_design_modification_trigger = { enable = yes modification = landing_bay } }
		F23_sea_hold_design_modification_effect = { enable = yes modification = landing_bay }

		name = flavour_ovdal_tungr.51.landing_bay_enable
		ai_chance = { factor = 100 }
		hidden_effect = { country_event = { id = flavour_ovdal_tungr.52 } }
	}
	# Landing Bay Modification, disable
	option = { 
		trigger = { F23_sea_hold_design_modification_trigger = { disable = yes modification = landing_bay } }
		F23_sea_hold_design_modification_effect = { disable = yes modification = landing_bay }

		name = flavour_ovdal_tungr.51.landing_bay_disable
		ai_chance = { factor = 100 }
		hidden_effect = { country_event = { id = flavour_ovdal_tungr.52 } }
	}
	# Landing Bay Modification, maxed
	option = { 
		trigger = { F23_sea_hold_design_modification_trigger = { maxed = yes modification = landing_bay } }
		F23_sea_hold_design_modification_effect = { maxed = yes modification = landing_bay }

		name = flavour_ovdal_tungr.51.landing_bay_maxed
		ai_chance = { factor = 100 }
		hidden_effect = { country_event = { id = flavour_ovdal_tungr.52 } }
	}

	# Deployable Ramparts Module, enable
	option = { 
		trigger = { F23_sea_hold_design_module_trigger = { enable = yes module = ramparts } }
		F23_sea_hold_design_module_effect = { enable = yes module = ramparts }

		name = flavour_ovdal_tungr.51.ramparts_enable
		ai_chance = { factor = 100 }
		hidden_effect = { country_event = { id = flavour_ovdal_tungr.52 } }
	}
	# Deployable Ramparts Module, disable
	option = { 
		trigger = { F23_sea_hold_design_module_trigger = { disable = yes module = ramparts } }
		F23_sea_hold_design_module_effect = { disable = yes module = ramparts }

		name = flavour_ovdal_tungr.51.ramparts_disable
		ai_chance = { factor = 100 }
		hidden_effect = { country_event = { id = flavour_ovdal_tungr.52 } }
	}
	# Deployable Ramparts Module, maxed
	option = { 
		trigger = { F23_sea_hold_design_module_trigger = { maxed = yes module = ramparts } }
		F23_sea_hold_design_module_effect = { maxed = yes module = ramparts }

		name = flavour_ovdal_tungr.51.ramparts_maxed
		ai_chance = { factor = 100 }
		hidden_effect = { country_event = { id = flavour_ovdal_tungr.52 } }
	}

	# Development District Module, enable
	option = { 
		trigger = { F23_sea_hold_design_module_trigger = { enable = yes module = development } }
		F23_sea_hold_design_module_effect = { enable = yes module = development }

		name = flavour_ovdal_tungr.51.development_enable
		ai_chance = { factor = 100 }
		hidden_effect = { country_event = { id = flavour_ovdal_tungr.52 } }
	}
	# Development District Module, disable
	option = { 
		trigger = { F23_sea_hold_design_module_trigger = { disable = yes module = development } }
		F23_sea_hold_design_module_effect = { disable = yes module = development }

		name = flavour_ovdal_tungr.51.development_disable
		ai_chance = { factor = 100 }
		hidden_effect = { country_event = { id = flavour_ovdal_tungr.52 } }
	}
	# Development District Module, maxed
	option = { 
		trigger = { F23_sea_hold_design_module_trigger = { maxed = yes module = development } }
		F23_sea_hold_design_module_effect = { maxed = yes module = development }

		name = flavour_ovdal_tungr.51.development_maxed
		ai_chance = { factor = 100 }
		hidden_effect = { country_event = { id = flavour_ovdal_tungr.52 } }
	}

	# Uthojdihr District Module, enable
	option = { 
		trigger = { F23_sea_hold_design_module_trigger = { enable = yes module = uthojdihr } }
		F23_sea_hold_design_module_effect = { enable = yes module = uthojdihr }

		name = flavour_ovdal_tungr.51.uthojdihr_enable
		ai_chance = { factor = 100 }
		hidden_effect = { country_event = { id = flavour_ovdal_tungr.52 } }
	}
	# Uthojdihr District Module, disable
	option = { 
		trigger = { F23_sea_hold_design_module_trigger = { disable = yes module = uthojdihr } }
		F23_sea_hold_design_module_effect = { disable = yes module = uthojdihr }

		name = flavour_ovdal_tungr.51.uthojdihr_disable
		ai_chance = { factor = 100 }
		hidden_effect = { country_event = { id = flavour_ovdal_tungr.52 } }
	}
	# Uthojdihr District Module, maxed
	option = { 
		trigger = { F23_sea_hold_design_module_trigger = { maxed = yes module = uthojdihr } }
		F23_sea_hold_design_module_effect = { maxed = yes module = uthojdihr }

		name = flavour_ovdal_tungr.51.uthojdihr_maxed
		ai_chance = { factor = 100 }
		hidden_effect = { country_event = { id = flavour_ovdal_tungr.52 } }
	}

	# Artisan Workshops Module, enable
	option = { 
		trigger = { F23_sea_hold_design_module_trigger = { enable = yes module = artisan } }
		F23_sea_hold_design_module_effect = { enable = yes module = artisan }

		name = flavour_ovdal_tungr.51.artisan_enable
		ai_chance = { factor = 100 }
		hidden_effect = { country_event = { id = flavour_ovdal_tungr.52 } }
	}
	# Artisan Workshops Module, disable
	option = { 
		trigger = { F23_sea_hold_design_module_trigger = { disable = yes module = artisan } }
		F23_sea_hold_design_module_effect = { disable = yes module = artisan }

		name = flavour_ovdal_tungr.51.artisan_disable
		ai_chance = { factor = 100 }
		hidden_effect = { country_event = { id = flavour_ovdal_tungr.52 } }
	}
	# Artisan Workshops Module, maxed
	option = { 
		trigger = { F23_sea_hold_design_module_trigger = { maxed = yes module = artisan } }
		F23_sea_hold_design_module_effect = { maxed = yes module = artisan }

		name = flavour_ovdal_tungr.51.artisan_maxed
		ai_chance = { factor = 100 }
		hidden_effect = { country_event = { id = flavour_ovdal_tungr.52 } }
	}

	# Settlement Module Module, enable
	option = { 
		trigger = { mission_completed = F23_center_of_the_world F23_sea_hold_design_module_trigger = { enable = yes module = settlement } }
		F23_sea_hold_design_module_effect = { enable = yes module = settlement }

		name = flavour_ovdal_tungr.51.settlement_enable
		ai_chance = { factor = 100 }
		hidden_effect = { country_event = { id = flavour_ovdal_tungr.52 } }
	}
	# Settlement Module Module, disable
	option = { 
		trigger = { mission_completed = F23_center_of_the_world F23_sea_hold_design_module_trigger = { disable = yes module = settlement } }
		F23_sea_hold_design_module_effect = { disable = yes module = settlement }

		name = flavour_ovdal_tungr.51.settlement_disable
		ai_chance = { factor = 100 }
		hidden_effect = { country_event = { id = flavour_ovdal_tungr.52 } }
	}
	# Settlement Module Module, maxed
	option = { 
		trigger = { mission_completed = F23_center_of_the_world F23_sea_hold_design_module_trigger = { maxed = yes module = settlement } }
		F23_sea_hold_design_module_effect = { maxed = yes module = settlement }

		name = flavour_ovdal_tungr.51.settlement_maxed
		ai_chance = { factor = 100 }
		hidden_effect = { country_event = { id = flavour_ovdal_tungr.52 } }
	}
}

# Getting around events being unable to fire themselves immediately.
country_event = {
	id = flavour_ovdal_tungr.52
	title = flavour_ovdal_tungr.51.t
	desc = flavour_ovdal_tungr.51.d
	picture = HARBOUR_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	
	option = { 
		name = flavour_ovdal_tungr.52.a
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.51 }
	}
}


# Notification event, if docking doesn't work.
country_event = {
	id = flavour_ovdal_tungr.58
	title = flavour_ovdal_tungr.58.t
	desc = flavour_ovdal_tungr.58.d
	picture = HARBOUR_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.58.a
		ai_chance = { factor = 100 }
	}
}

# Notification event, fires by on_action if the player somehow loses the province the Sea Hold was docked in.
country_event = {
	id = flavour_ovdal_tungr.59
	title = flavour_ovdal_tungr.59.t
	desc = flavour_ovdal_tungr.59.d
	picture = HARBOUR_eventPicture
	
	is_triggered_only = yes
	
	option = { 
		name = flavour_ovdal_tungr.59.a
		ai_chance = { factor = 100 }
	}
}

# Bulwari country bankrupt, ask OT for a bailout?
country_event = {
	id = flavour_ovdal_tungr.60
	title = flavour_ovdal_tungr.60.t
	desc = flavour_ovdal_tungr.60.d
	picture = BANKRUPTCY_eventPicture
	
	is_triggered_only = yes

	trigger = {
		has_global_flag = F23_bulwar_bankruptcy 
		capital_scope = { superregion = bulwar_superregion } 
		NOT = { tag = F23 }
		NOT = { tag = U17 }
		OR = {
			is_subject = no
			is_subject_of = F23
		}
	}
	
	option = { # Yes (independent or non-trade protectorate subject)
		trigger = { NOT = { OR = { 
			is_subject_of_type_with_overlord = { who = F23 type = trade_protectorate }
			is_subject_of_type_with_overlord = { who = F23 type = loyal_trade_protectorate }
		} } }
		name = flavour_ovdal_tungr.60.a
		ai_chance = { factor = 100 }
		F23 = { country_event = { id = flavour_ovdal_tungr.61 } }
	}

	option = { # Yes (trade protectorate)
		trigger = { is_subject_of_type_with_overlord = { who = F23 type = trade_protectorate } }
		name = flavour_ovdal_tungr.60.b
		ai_chance = { factor = 100 }
		F23 = { country_event = { id = flavour_ovdal_tungr.62 } }
	}

	option = { # Yes (loyal trade protectorate)
		trigger = { is_subject_of_type_with_overlord = { who = F23 type = loyal_trade_protectorate } }
		name = flavour_ovdal_tungr.60.c
		ai_chance = { factor = 100 }
		F23 = { country_event = { id = flavour_ovdal_tungr.63 } }
	}

	option = { # No
		name = flavour_ovdal_tungr.60.e
		ai_chance = { factor = 0 }
	}
}

# Bulwari country bankrupt, ask OT for a bailout?
country_event = {
	id = flavour_ovdal_tungr.61
	title = flavour_ovdal_tungr.61.t
	desc = flavour_ovdal_tungr.61.d
	picture = CORRUPTION_eventPicture
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			export_to_variable = {
				which = cash_cost
				value = monthly_income
				who = FROM
			}
			multiply_variable = {
				which = cash_cost
				value = 300 # 25 years of income.
			}
		}
	}

	option = { # Become trade protectorate.
		name = flavour_ovdal_tungr.61.a
		ai_chance = { factor = 0 }

		currency_effect = { currency = treasury takeFrom = ROOT which = cash_cost }

		custom_tooltip = bankruptcy_bailout

		create_subject = { subject_type = trade_protectorate subject = FROM }
		FROM = {
			remove_country_modifier = bankruptcy
		}
	}

	option = { # Nah.
		name = flavour_ovdal_tungr.61.e
		ai_chance = { factor = 100 }
	}
}

# Bulwari country bankrupt, ask OT for a bailout? (Is already trade protectorate)
country_event = {
	id = flavour_ovdal_tungr.62
	title = flavour_ovdal_tungr.62.t
	desc = flavour_ovdal_tungr.62.d
	picture = CORRUPTION_eventPicture
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			export_to_variable = {
				which = cash_cost
				value = monthly_income
				who = FROM
			}
			multiply_variable = {
				which = cash_cost
				value = 300 # 25 years of income.
			}
		}
	}

	option = { # Become loyal trade protectorate.
		name = flavour_ovdal_tungr.62.a
		ai_chance = { factor = 0 }

		currency_effect = { currency = treasury takeFrom = ROOT which = cash_cost }

		custom_tooltip = bankruptcy_bailout

		create_subject = { subject_type = loyal_trade_protectorate subject = FROM }
		FROM = {
			remove_country_modifier = bankruptcy
			hidden_effect = { every_ally = { break_alliance = FROM } }
		}
	}

	option = { # Nah.
		name = flavour_ovdal_tungr.62.b
		ai_chance = { factor = 100 }
	}
}

# Bulwari country bankrupt, ask OT for a bailout? (Is already loyal trade protectorate)
country_event = {
	id = flavour_ovdal_tungr.63
	title = flavour_ovdal_tungr.63.t
	desc = flavour_ovdal_tungr.63.d
	picture = CORRUPTION_eventPicture
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			export_to_variable = {
				which = cash_cost
				value = monthly_income
				who = FROM
			}
			multiply_variable = {
				which = cash_cost
				value = 300 # 25 years of income.
			}
		}
	}

	option = { # Already indebted
		name = flavour_ovdal_tungr.63.a
		ai_chance = { factor = 0 }

		currency_effect = { currency = treasury takeFrom = ROOT which = cash_cost }

		custom_tooltip = bankruptcy_bailout

		FROM = {
			remove_country_modifier = bankruptcy
			add_opinion = {
				who = ROOT
				modifier = F23_bailout_opinion_mod
			}
		}
	}

	option = { # Nah.
		name = flavour_ovdal_tungr.63.b
		ai_chance = { factor = 100 }
	}
}

# Encourage excess, reflavored as a lavish party
country_event = {
	id = flavour_ovdal_tungr.70
	title = flavour_ovdal_tungr.70.title #because flavour_ovdal_tungr.70.t is a hash collision
	desc = flavour_ovdal_tungr.70.d
	picture = COURT_eventPicture
	
	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				OR = {
					AND = {
						has_country_flag = F23_party_location_ovdal_tungr
						has_country_flag = F23_party_location_unlocked_uthojbrog
					}
					AND = {
						OR = {
							has_country_flag = F23_party_location_ovdal_tungr
							has_country_flag = F23_party_location_uthojbrog
						}
						has_country_flag = F23_sea_hold_active
					} 
				}
			}
			set_country_flag = F23_party_location_better_available
		}
	}
	
	after = {
		clr_country_flag = F23_party_location_better_available
	}

	option = { # Host party.
		name = flavour_ovdal_tungr.70.a
		ai_chance = { factor = 100 }
		custom_tooltip = F23_party_host_prestige_loss_tt
		trigger_switch = {
			on_trigger = has_country_flag

			F23_party_quality_extravagant 	= { add_treasury = -10000 	}
			F23_party_quality_lavish 		= { add_treasury = -5000 	}
			F23_party_quality_regular 		= { add_treasury = -2500 	}
			F23_party_quality_small 		= { add_treasury = -1000 	}
		}

		custom_tooltip = F23_party_host_tt

		hidden_effect = { 
			add_prestige = 100 add_prestige = -100 


			every_known_country = {
				limit = { 
					capital_scope = { superregion = bulwar_superregion } 
					NOT = { tag = F23 }
					OR = {
						AND = {
							is_subject = no 
							has_opinion = { who = ROOT value = 100 } 
						}
						AND = {
							is_subject_of = ROOT 
							NOT = { liberty_desire = 50 } 
							NOT = { tag = U17 } 
							NOT = { is_subject_of_type = loyal_trade_protectorate } 
						}
					}
				}
				set_variable = { which = party_var_prestige_val value = 0 }
				change_variable = { which = party_var_prestige_val which = PREV }
				export_to_variable = { variable_name = party_var_own_prestige value = trigger_value:prestige } # Get own prestige.
				subtract_variable = { which = party_var_own_prestige which = party_var_prestige_val } # Subtract prestige impact from own prestige.
				if = { limit = { check_variable = { which = party_var_own_prestige value = -100 } } # Is post-impact prestige greater than -100?
					add_prestige = -200 # If so, bring prestige down to its absolute min possible value, then do calcs to set prestige to its new value.
					set_variable = { which = prestige_increase value = -100 } 
					subtract_variable = { which = prestige_increase which = party_var_own_prestige }
					multiply_variable = { which = prestige_increase value = -1 }
					var_effect = { effect = add_prestige var = prestige_increase sign = + }
				}
				else = {
					add_prestige = -200 # Prestige is brought below -100, time to start taking away money!
					set_variable = 	{ which = years_of_income_lost which = party_var_own_prestige }
					change_variable = { which = years_of_income_lost value = 100 }
					multiply_variable = { which = years_of_income_lost value = -1 }
					divide_variable = { which = years_of_income_lost value = 12 }
					var_effect = { effect = add_years_of_income var = years_of_income_lost sign = - }
				}
			}
		}
	}

	option = { # Change treasury spent.
		name = flavour_ovdal_tungr.70.b
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.72 }
		trigger_switch = {
			on_trigger = has_country_flag

			F23_party_quality_extravagant 	= { custom_tooltip = F23_party_quality_extravagant_tt 	}
			F23_party_quality_lavish 		= { custom_tooltip = F23_party_quality_lavish_tt 		}
			F23_party_quality_regular 		= { custom_tooltip = F23_party_quality_regular_tt 		}
			F23_party_quality_small 		= { custom_tooltip = F23_party_quality_small_tt 		}
		}
	}

	option = { # Change host location.
		trigger = { has_country_flag = F23_party_location_unlocked_uthojbrog NOT = { has_country_flag = F23_party_location_better_available } }
		name = flavour_ovdal_tungr.70.c_1
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.73 }
		trigger_switch = {
			on_trigger = has_country_flag

			F23_party_location_ovdal_uthoj 	= { custom_tooltip = F23_party_location_ovdal_uthoj_tt }
			F23_party_location_uthojbrog 	= { custom_tooltip = F23_party_location_uthojbrog_tt }
			F23_party_location_ovdal_tungr 	= { custom_tooltip = F23_party_location_ovdal_tungr_tt }
		}
	}

	option = { # Change host location. (Better available)
		trigger = { has_country_flag = F23_party_location_better_available }
		name = flavour_ovdal_tungr.70.c_2
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.73 }
		trigger_switch = {
			on_trigger = has_country_flag

			F23_party_location_ovdal_uthoj 	= { custom_tooltip = F23_party_location_ovdal_uthoj_tt }
			F23_party_location_uthojbrog 	= { custom_tooltip = F23_party_location_uthojbrog_tt }
			F23_party_location_ovdal_tungr 	= { custom_tooltip = F23_party_location_ovdal_tungr_tt }
		}
	}

	option = { # Extras.
		name = flavour_ovdal_tungr.70.e
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.74 }
	}

	option = { # Exit.
		name = flavour_ovdal_tungr.70.g
		ai_chance = { factor = 100 }
	}
}

# Menu refresh.
country_event = {
	id = flavour_ovdal_tungr.71
	title = flavour_ovdal_tungr.70.t
	desc = flavour_ovdal_tungr.71.d
	picture = CORRUPTION_eventPicture
	
	hidden = yes

	is_triggered_only = yes

	immediate = { 
		hidden_effect = {
			export_to_variable = { which = F23_party_var_prestige_base value = trigger_value:prestige who = ROOT }
			set_variable = { which = party_var_prestige_val which = F23_party_var_prestige_base }
			export_to_variable = { variable_name = F23_party_var_extra_trading_bonus value = trigger_value:num_of_trading_bonuses }
			multiply_variable = { which = F23_party_var_extra_trading_bonus value = 2 }
			change_variable = { which = party_var_prestige_val which = F23_party_var_extra_trading_bonus }
			divide_variable = { which = party_var_prestige_val value = 4 }
			if = { limit = { mission_completed = F23_the_cloves_monopoly }
				change_variable = { which = party_var_prestige_val value = 10 }
			}
			if = { limit = { mission_completed = F23_custodian_of_the_temples }
				set_variable = { which = F23_party_var_extra_custodian_bonus value = -90 }
				601 = { ROOT = { export_to_variable = { variable_name = F23_party_var_extra_custodian_bonus_add value = trigger_value:development } } }
				change_variable = { which = F23_party_var_extra_custodian_bonus which = F23_party_var_extra_custodian_bonus_add }
				631 = { ROOT = { export_to_variable = { variable_name = F23_party_var_extra_custodian_bonus_add value = trigger_value:development } } }
				change_variable = { which = F23_party_var_extra_custodian_bonus which = F23_party_var_extra_custodian_bonus_add }
				643 = { ROOT = { export_to_variable = { variable_name = F23_party_var_extra_custodian_bonus_add value = trigger_value:development } } }
				change_variable = { which = F23_party_var_extra_custodian_bonus which = F23_party_var_extra_custodian_bonus_add }
				divide_variable = { which = F23_party_var_extra_custodian_bonus value = 2 }
				change_variable = { which = party_var_prestige_val which = F23_party_var_extra_custodian_bonus }
			}

			trigger_switch = {
				on_trigger = has_country_flag

				F23_party_quality_extravagant 	= { multiply_variable = { which = party_var_prestige_val value = 2.5 } }
				F23_party_quality_lavish 		= { multiply_variable = { which = party_var_prestige_val value = 2.0 } }
				F23_party_quality_regular 		= { multiply_variable = { which = party_var_prestige_val value = 1.5 } }
			}

			trigger_switch = {
				on_trigger = has_country_flag

				F23_party_location_ovdal_uthoj 	= { multiply_variable = { which = party_var_prestige_val value = 2.0 } }
				F23_party_location_uthojbrog 	= { multiply_variable = { which = party_var_prestige_val value = 1.5 } }
			}

			round_variable = { which = party_var_prestige_val value = 0 }
		}
	}

	after = {
		country_event = { id = flavour_ovdal_tungr.70 }
	}


	option = { # Ovdal Tûngr.
		name = flavour_ovdal_tungr.71.a
		ai_chance = { factor = 100 }
	}
}

# Change gold expenditure.
country_event = {
	id = flavour_ovdal_tungr.72
	title = flavour_ovdal_tungr.72.t
	desc = flavour_ovdal_tungr.72.d
	picture = IMPORTANT_STATUE_eventPicture
	
	is_triggered_only = yes

	option = { # Extravagant.
		name = flavour_ovdal_tungr.72.a
		ai_chance = { factor = 100 }
		hidden_effect = { 
			clr_country_flag = F23_party_quality_lavish
			clr_country_flag = F23_party_quality_regular
			clr_country_flag = F23_party_quality_small
			set_country_flag = F23_party_quality_extravagant 
		}
		custom_tooltip = F23_party_quality_extravagant_tt
		country_event = { id = flavour_ovdal_tungr.71 }
	}

	option = { # Lavish.
		name = flavour_ovdal_tungr.72.b
		ai_chance = { factor = 100 }
		hidden_effect = { 
			clr_country_flag = F23_party_quality_extravagant
			clr_country_flag = F23_party_quality_regular
			clr_country_flag = F23_party_quality_small
			set_country_flag = F23_party_quality_lavish 
		}
		custom_tooltip = F23_party_quality_lavish_tt
		country_event = { id = flavour_ovdal_tungr.71 }
	}

	option = { # Regular.
		name = flavour_ovdal_tungr.72.c
		ai_chance = { factor = 100 }
		hidden_effect = { 
			clr_country_flag = F23_party_quality_extravagant
			clr_country_flag = F23_party_quality_lavish
			clr_country_flag = F23_party_quality_small
			set_country_flag = F23_party_quality_regular 
		}
		custom_tooltip = F23_party_quality_regular_tt
		country_event = { id = flavour_ovdal_tungr.71 }
	}

	option = { # Small.
		name = flavour_ovdal_tungr.72.e
		ai_chance = { factor = 100 }
		hidden_effect = { 
			clr_country_flag = F23_party_quality_extravagant
			clr_country_flag = F23_party_quality_lavish
			clr_country_flag = F23_party_quality_regular
			set_country_flag = F23_party_quality_small 
		}
		custom_tooltip = F23_party_quality_small_tt
		country_event = { id = flavour_ovdal_tungr.71 }
	}
}


# Change host location.
country_event = {
	id = flavour_ovdal_tungr.73
	title = flavour_ovdal_tungr.73.t
	desc = flavour_ovdal_tungr.73.d
	picture = CITY_VIEW_eventPicture
	
	is_triggered_only = yes

	option = { # The Sea Hold.
		trigger = { has_country_flag = F23_sea_hold_active }
		name = flavour_ovdal_tungr.73.c
		ai_chance = { factor = 100 }
		custom_tooltip = F23_party_location_ovdal_uthoj_tt
		hidden_effect = { 
			clr_country_flag = F23_party_location_uthojbrog
			clr_country_flag = F23_party_location_ovdal_tungr
			set_country_flag = F23_party_location_ovdal_uthoj 
		}
		country_event = { id = flavour_ovdal_tungr.71 }
	}

	option = { # Great Dredger.
		trigger = { has_country_flag = F23_party_location_unlocked_uthojbrog }
		name = flavour_ovdal_tungr.73.b
		ai_chance = { factor = 100 }
		custom_tooltip = F23_party_location_uthojbrog_tt
		hidden_effect = { 
			clr_country_flag = F23_party_location_ovdal_uthoj
			clr_country_flag = F23_party_location_ovdal_tungr			
			set_country_flag = F23_party_location_uthojbrog 
		}
		country_event = { id = flavour_ovdal_tungr.71 }
	}

	option = { # Ovdal Tûngr.
		name = flavour_ovdal_tungr.73.a
		ai_chance = { factor = 100 }
		custom_tooltip = F23_party_location_ovdal_tungr_tt
		hidden_effect = { 
			clr_country_flag = F23_party_location_ovdal_uthoj
			clr_country_flag = F23_party_location_uthojbrog
			set_country_flag = F23_party_location_ovdal_tungr 
		}
		country_event = { id = flavour_ovdal_tungr.71 }
	}
}

# Extras, informational only, always active.
country_event = {
	id = flavour_ovdal_tungr.74
	title = flavour_ovdal_tungr.74.t
	desc = flavour_ovdal_tungr.74.d
	picture = THEATRE_eventPicture
	
	is_triggered_only = yes

	option = { # Bonus for trading in.
		name = flavour_ovdal_tungr.74.a
		ai_chance = { factor = 100 }
		custom_tooltip = F23_party_extra_trading_bonus
		country_event = { id = flavour_ovdal_tungr.71 }
	}

	option = { # Temple Custodian Bonus.
		trigger = { mission_completed = F23_custodian_of_the_temples }
		name = flavour_ovdal_tungr.74.b
		ai_chance = { factor = 100 }
		custom_tooltip = F23_party_extra_custodian_bonus
		country_event = { id = flavour_ovdal_tungr.71 }
	}

	option = { # Spice bonus.
		trigger = { mission_completed = F23_the_cloves_monopoly }
		name = flavour_ovdal_tungr.74.c
		ai_chance = { factor = 100 }
		custom_tooltip = F23_party_extra_spice_bonus
		country_event = { id = flavour_ovdal_tungr.71 }
	}

	option = { # Return.
		name = flavour_ovdal_tungr.74.e
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.71 }
	}
}

# Copper Offer
country_event = {
	id = flavour_ovdal_tungr.200
	title = flavour_ovdal_tungr.200.t
	desc = flavour_ovdal_tungr.200.d
	picture = CORRUPTION_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
		F23_copper_offer_effect_set_up_master = yes
	}

	after = {
		F23_copper_offer_effect_clean_up_master = yes
	}

	# Options for Annail.
	option = { goto = 6761	trigger = { has_country_flag = F23_copper_offer_F85_response_positive }	name = F23_copper_offer_F85_positive F23_copper_offer_effect_execute_positive = { prov_num_input =	6761 	prov_tag_input = F85 } }
	option = { goto = 6761	trigger = { has_country_flag = F23_copper_offer_F85_response_negative }	name = F23_copper_offer_F85_negative F23_copper_offer_effect_execute_negative = { prov_num_input =	6761 	prov_tag_input = F85 } }
												
	# Options for Brasan.
	option = { goto = 565	trigger = { has_country_flag = F23_copper_offer_F24_response_positive }	name = F23_copper_offer_F24_positive F23_copper_offer_effect_execute_positive = { prov_num_input =	565 	prov_tag_input = F24 } }
	option = { goto = 565	trigger = { has_country_flag = F23_copper_offer_F24_response_negative }	name = F23_copper_offer_F24_negative F23_copper_offer_effect_execute_negative = { prov_num_input =	565 	prov_tag_input = F24 } }
												
	# Options for Anzabad.
	option = { goto = 560	trigger = { has_country_flag = F23_copper_offer_F40_response_positive }	name = F23_copper_offer_F40_positive F23_copper_offer_effect_execute_positive = { prov_num_input =	560 	prov_tag_input = F40 } }
	option = { goto = 560	trigger = { has_country_flag = F23_copper_offer_F40_response_negative }	name = F23_copper_offer_F40_negative F23_copper_offer_effect_execute_negative = { prov_num_input =	560 	prov_tag_input = F40 } }
												
	# Options for Medurubar.
	option = { goto = 561	trigger = { has_country_flag = F23_copper_offer_F76_response_positive }	name = F23_copper_offer_F76_positive F23_copper_offer_effect_execute_positive = { prov_num_input =	561 	prov_tag_input = F76 } }
	option = { goto = 561	trigger = { has_country_flag = F23_copper_offer_F76_response_negative }	name = F23_copper_offer_F76_negative F23_copper_offer_effect_execute_negative = { prov_num_input =	561 	prov_tag_input = F76 } }
												
	# Options for Zanzap.
	option = { goto = 596	trigger = { has_country_flag = F23_copper_offer_F43_response_positive }	name = F23_copper_offer_F43_positive F23_copper_offer_effect_execute_positive = { prov_num_input =	596 	prov_tag_input = F43 } }
	option = { goto = 596	trigger = { has_country_flag = F23_copper_offer_F43_response_negative }	name = F23_copper_offer_F43_negative F23_copper_offer_effect_execute_negative = { prov_num_input =	596 	prov_tag_input = F43 } }
												
	# Options for Kumarkand.
	option = { goto = 591	trigger = { has_country_flag = F23_copper_offer_F30_response_positive }	name = F23_copper_offer_F30_positive F23_copper_offer_effect_execute_positive = { prov_num_input =	591 	prov_tag_input = F30 } }
	option = { goto = 591	trigger = { has_country_flag = F23_copper_offer_F30_response_negative }	name = F23_copper_offer_F30_negative F23_copper_offer_effect_execute_negative = { prov_num_input =	591 	prov_tag_input = F30 } }
												
	# Options for Bulwar.
	option = { goto = 601	trigger = { has_country_flag = F23_copper_offer_F39_response_positive }	name = F23_copper_offer_F39_positive F23_copper_offer_effect_execute_positive = { prov_num_input =	601 	prov_tag_input = F39 } }
	option = { goto = 601	trigger = { has_country_flag = F23_copper_offer_F39_response_negative }	name = F23_copper_offer_F39_negative F23_copper_offer_effect_execute_negative = { prov_num_input =	601 	prov_tag_input = F39 } }
												
	# Options for Azkabar.
	option = { goto = 613	trigger = { has_country_flag = F23_copper_offer_F35_response_positive }	name = F23_copper_offer_F35_positive F23_copper_offer_effect_execute_positive = { prov_num_input =	613 	prov_tag_input = F35 } }
	option = { goto = 613	trigger = { has_country_flag = F23_copper_offer_F35_response_negative }	name = F23_copper_offer_F35_negative F23_copper_offer_effect_execute_negative = { prov_num_input =	613 	prov_tag_input = F35 } }
												
	# Options for Akalses.
	option = { goto = 616	trigger = { has_country_flag = F23_copper_offer_F33_response_positive }	name = F23_copper_offer_F33_positive F23_copper_offer_effect_execute_positive = { prov_num_input =	616 	prov_tag_input = F33 } }
	option = { goto = 616	trigger = { has_country_flag = F23_copper_offer_F33_response_negative }	name = F23_copper_offer_F33_negative F23_copper_offer_effect_execute_negative = { prov_num_input =	616 	prov_tag_input = F33 } }
												
	# Options for Setadazar.
	option = { goto = 622	trigger = { has_country_flag = F23_copper_offer_F83_response_positive }	name = F23_copper_offer_F83_positive F23_copper_offer_effect_execute_positive = { prov_num_input =	622 	prov_tag_input = F83 } }
	option = { goto = 622	trigger = { has_country_flag = F23_copper_offer_F83_response_negative }	name = F23_copper_offer_F83_negative F23_copper_offer_effect_execute_negative = { prov_num_input =	622 	prov_tag_input = F83 } }
												
	# Options for Sareyand.
	option = { goto = 625	trigger = { has_country_flag = F23_copper_offer_F25_response_positive }	name = F23_copper_offer_F25_positive F23_copper_offer_effect_execute_positive = { prov_num_input =	625 	prov_tag_input = F25 } }
	option = { goto = 625	trigger = { has_country_flag = F23_copper_offer_F25_response_negative }	name = F23_copper_offer_F25_negative F23_copper_offer_effect_execute_negative = { prov_num_input =	625 	prov_tag_input = F25 } }
												
	# Options for Educ-Vacyn.
	option = { goto = 631	trigger = { has_country_flag = F23_copper_offer_F31_response_positive }	name = F23_copper_offer_F31_positive F23_copper_offer_effect_execute_positive = { prov_num_input =	631 	prov_tag_input = F31 } }
	option = { goto = 631	trigger = { has_country_flag = F23_copper_offer_F31_response_negative }	name = F23_copper_offer_F31_negative F23_copper_offer_effect_execute_negative = { prov_num_input =	631 	prov_tag_input = F31 } }
												
	# Options for Hasr.
	option = { goto = 640	trigger = { has_country_flag = F23_copper_offer_F45_response_positive }	name = F23_copper_offer_F45_positive F23_copper_offer_effect_execute_positive = { prov_num_input =	640 	prov_tag_input = F45 } }
	option = { goto = 640	trigger = { has_country_flag = F23_copper_offer_F45_response_negative }	name = F23_copper_offer_F45_negative F23_copper_offer_effect_execute_negative = { prov_num_input =	640 	prov_tag_input = F45 } }
												
	# Options for Azka-Sur.
	option = { goto = 643	trigger = { has_country_flag = F23_copper_offer_U20_response_positive }	name = F23_copper_offer_U20_positive F23_copper_offer_effect_execute_positive = { prov_num_input =	643 	prov_tag_input = U20 } }
	option = { goto = 643	trigger = { has_country_flag = F23_copper_offer_U20_response_negative }	name = F23_copper_offer_U20_negative F23_copper_offer_effect_execute_negative = { prov_num_input =	643 	prov_tag_input = U20 } }

	option = {
		name = F23_copper_offer_refresh
		country_event = { id = flavour_ovdal_tungr.201 }
	}

	option = {
		name = F23_copper_offer_exit
	}
}

country_event = {
	id = flavour_ovdal_tungr.201
	title = flavour_ovdal_tungr.200.t
	desc = flavour_ovdal_tungr.201.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes

	hidden = yes

	option = { 
		name = flavour_ovdal_tungr.201.a
		ai_chance = { factor = 100 }
		country_event = { id = flavour_ovdal_tungr.200 }
	}
}
