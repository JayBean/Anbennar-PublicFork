namespace = bianfang

#Hubao events

country_event = {
	id = bianfang.1		#triggered by the mission
	title = bianfang.1.t
	desc = bianfang.1.d
	picture = TIGER_THRONE_eventPicture
	
	is_triggered_only = yes
	
	option = {	#demand subservience
		name = bianfang.1.a
		ai_chance = {
			factor = 60
		}
		Y03 = {
			country_event = { id = bianfang.2 days = 14 }
		}
		increase_tyrant_benevolent_1 = yes
	}
	
	option = {	#subjugate them by force
		name = bianfang.1.b
		ai_chance = {
			factor = 40
		}
		add_casus_belli = {
			target = Y03
			type = cb_vassalize_mission
			months = 120
		}
        define_general = {
			name = "Jianlin Shi"
			fire = 1
			shock = 4
			manuever = 2
			siege = 3
		}
		increase_tyrant_ruthless_1 = yes 
	}
}

country_event = {
	id = bianfang.2
	title = bianfang.2.t
	desc = bianfang.2.d
	picture = CORRUPTION_eventPicture
	
	is_triggered_only = yes
	
	option = {	#accept, become march
		name = bianfang.2.a
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				has_opinion = {
					who = Y09
					value = 100
				}
			}
			modifier = {
				factor = 2
				has_opinion = {
					who = Y09
					value = 150
				}
			}
			modifier = {
				factor = 2
				alliance_with = Y09
			}
			modifier = {
				factor = 0
				NOT = {
					has_opinion = {
						who = Y09
						value = 0
					}
				}
			}
		}
		Y09 = {
			country_event = {
				id = bianfang.3
				days = 7
			}
		}
	}
	
	option = { #reject
		name = bianfang.2.b
		ai_chance = {
			factor = 50
		}
		Y09 = { country_event = { id = bianfang.4 days = 7 } }
	}
}

country_event = {
	id = bianfang.3	#notified of acceptance
	title = bianfang.3.t
	desc = bianfang.3.d
	picture = FORT_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = bianfang.3.a
		add_prestige = 10
		create_march = Y03
		add_treasury = -150
		Y03 = {
			add_treasury = 150
		}
		define_advisor = {
			name = "Jianlin Shi"
			type = statesman
			cost_multiplier = 0.75
			skill = 1
		}
	}
}

country_event = {
	id = bianfang.4 #notified of rejection, get CB
	title = bianfang.4.t
	desc = bianfang.4.d
	picture = SIEGE_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = bianfang.4.a #kill Jianlin Shi
		add_casus_belli = {
			target = Y03
			type = cb_vassalize_mission
			months = 120
		}
		add_country_modifier = {
			name = bianfang_marshal_executed
			duration = 1825
		}
		increase_tyrant_ruthless_1 = yes 
	}

	option = {
		name = bianfang.4.b #give him command
		add_casus_belli = {
			target = Y03
			type = cb_vassalize_mission
			months = 120
		}
        define_general = {
			name = "Jianlin Shi"
			fire = 1
			shock = 4
			manuever = 2
			siege = 3
		}
		increase_tyrant_benevolent_1 = yes
	}
}

#Xiyun stuff

country_event = { #betrayal
	id = bianfang.5
	title = bianfang.5.t
	desc = bianfang.5.d
	picture = FEAST_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = bianfang.5.a
		add_stability = -1
		add_dip_power = -200
		add_country_modifier = {
			name = bianfang_betrayal
			duration = 9125
		}
		inherit = Y21
		increase_tyrant_ruthless_2 = yes
	}
}

country_event = { #xiyun asked to become autonomous vassal
	id = bianfang.6
	title = bianfang.6.t
	desc = bianfang.6.d
	picture = MERCHANTS_TALKING_eventPicture
	
	is_triggered_only = yes
	
	option = { #accept
		name = bianfang.6.a
		ai_chance = {
			factor = 100
		}
		Y09 = {
			create_subject = {
				subject_type = autonomous_vassal
				subject = Y21
			}
		}
	}
	
	option = { #refuse
		name = bianfang.6.b
		ai_chance = {
			factor = 0
		}
		Y09 = {
			add_casus_belli = {
				target = Y21
				type = cb_vassalize_mission
				months = 300
			}
			add_historical_rival = Y21
		}
		Y21 = { add_historical_rival = Y09 }
	}
}


#TYRANT SYSTEM SETUP 7-10

country_event = {
	id = bianfang.99 #DEBUG
	title = bianfang.99.t
	desc = bianfang.99.d
	picture = GREAT_SPIRIT_YANHE_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = bianfang.99.a
		increase_tyrant_ruthless_3 = yes
	}
	
	option = {
		name = bianfang.99.b
		increase_tyrant_benevolent_3 = yes
	}
}

country_event = {
	id = bianfang.7 #startup
	title = bianfang.7.t
	desc = bianfang.7.d
	picture = GREAT_SPIRIT_YANHE_eventPicture
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = bianfang.7.a
		#hidden_effect = { initialize_tyrant_system = yes }
		#hidden_effect = { set_country_flag = tyrant_system_initialized }
		#add_country_modifier = {
		#	name = bianfang_tyrant_modifier_pragmatic
		#	duration = -1
		#}
		custom_tooltip = bianfang_introduction_tt
	}
}

country_event = {
	id = bianfang.8 #update modifier to ruthless
	title = bianfang.8.t
	desc = bianfang.8.d
	picture = GREAT_SPIRIT_YANHE_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = bianfang.8.a
		remove_country_modifier = bianfang_tyrant_modifier_pragmatic
		remove_country_modifier = bianfang_tyrant_modifier_benevolent
		add_country_modifier = {
			name = bianfang_tyrant_modifier_ruthless
			duration = -1
		}
	}
}

country_event = {
	id = bianfang.9 #update modifier to pragmatic
	title = bianfang.9.t
	desc = bianfang.9.d
	picture = GREAT_SPIRIT_YANHE_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = bianfang.9.a
		remove_country_modifier = bianfang_tyrant_modifier_benevolent
		remove_country_modifier = bianfang_tyrant_modifier_ruthless
		add_country_modifier = {
			name = bianfang_tyrant_modifier_pragmatic
			duration = -1
		}
	}
}

country_event = {
	id = bianfang.10 #update modifier to benevolent
	title = bianfang.10.t
	desc = bianfang.10.d
	picture = GREAT_SPIRIT_YANHE_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = bianfang.10.a
		remove_country_modifier = bianfang_tyrant_modifier_pragmatic
		remove_country_modifier = bianfang_tyrant_modifier_ruthless
		add_country_modifier = {
			name = bianfang_tyrant_modifier_benevolent
			duration = -1
		}
	}
}

#Tyrant events 11-

#fate of the monasteries, flight of the keepers
country_event = {
	id = bianfang.11 #Fate of the monasteries
	title = bianfang.11.t
	desc = bianfang.11.d
	picture = RELIGIOUS_TURMOIL_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = bianfang.11.a #leave them be
		increase_tyrant_benevolent_2 = yes
		tietyuan_area = {
			add_province_modifier = {
				name = bianfang_monasteries_left_alone
				duration = 3650
			}
		}
		wangqiu_area = {
			add_province_modifier = {
				name = bianfang_monasteries_left_alone
				duration = 3650
			}
		}
		aoshan_area = {
			add_province_modifier = {
				name = bianfang_monasteries_left_alone
				duration = 3650
			}
		}
		set_country_flag = keepers_alive
	}
	
	option = {
		name = bianfang.11.b
		increase_tyrant_ruthless_3 = yes
		add_years_of_income = 1.5
		tietyuan_area = {
			add_devastation = 50
			add_province_modifier = {
				name = bianfang_monasteries_dismantled
				duration = 3650
			}
		}
		wangqiu_area = {
			add_devastation = 50
			add_province_modifier = {
				name = bianfang_monasteries_dismantled
				duration = 3650
			}
		}
		aoshan_area = {
			add_devastation = 50
			add_province_modifier = {
				name = bianfang_monasteries_dismantled
				duration = 3650
			}
		}
		custom_tooltip = subjugate_months_rp_provinces_tt
		hidden_effect = {
			every_owned_province = {
				limit = { 
					religion = righteous_path
					superregion = yanshen_superregion
				}
				add_province_modifier = {
					name = bianfang_righteous_path_outraged
					duration = 3650
				}
			}
		}
		hidden_effect = {
			country_event = {
				id = bianfang.12
				days = 100
			}
		}
	}
}

country_event = {
	id = bianfang.12 #flight of the keepers
	title = bianfang.12.t
	desc = bianfang.12.d
	picture = NUSANTARA_THRONE_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = bianfang.12.a
		4811 = {
			add_base_production = -1
			add_province_modifier = {
				name = bianfang_damestear_sabotaged
				duration = 9125
			}
			add_unrest = 5
		}
	}
}

#fate of the eunuchs
country_event = {
	id = bianfang.13 #fate of the eunuchs
	title = bianfang.13.t
	desc = bianfang.13.d
	picture = IMPERIAL_EXAMINATION_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = bianfang.13.a #let them help with the administration, causes eunuch plot later
		increase_tyrant_benevolent_2 = yes
		clr_country_flag = anti_eunuch_country
		custom_tooltip = eunuchs_return_tt
	}
	
	option = {
		name = bianfang.13.b
		increase_tyrant_ruthless_1 = yes #we have no need of them, dispose of them
		custom_tooltip = bianfang_eunuchs_not_welcome_tt
	}
}

#Zyujyut
country_event = {
	id = bianfang.14 #Fate of the Zyujyut / Tea Harvest
	title = bianfang.14.t
	desc = bianfang.14.d
	picture = RELIGIOUS_TURMOIL_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = bianfang.14.a #leave them be
		increase_tyrant_benevolent_2 = yes
		jyutsai_area = {
			add_province_modifier = {
				name = bianfang_zyujyut_left_alone
				duration = 3650
			}
		}
		wanglam_area = {
			add_province_modifier = {
				name = bianfang_zyujyut_left_alone
				duration = 3650
			}
		}
		hungngon_area = {
			add_province_modifier = {
				name = bianfang_zyujyut_left_alone
				duration = 3650
			}
		}
		set_country_flag = bianfang_zyujyut_left_alone_moshugong
	}
	
	option = {
		name = bianfang.14.b
		increase_tyrant_ruthless_2 = yes
		add_country_modifier = {
			name = bianfang_the_tea_harvest
			duration = 9125
		}
		jyutsai_area = {
			add_province_modifier = {
				name = bianfang_corvee_labor
				duration = 9125
			}
		}
		wanglam_area = {
			add_province_modifier = {
				name = bianfang_corvee_labor
				duration = 9125
			}
		}
		hungngon_area = {
			add_province_modifier = {
				name = bianfang_corvee_labor
				duration = 9125
			}
		}
	}
}

country_event = {
	id = bianfang.15 #courts of jindeshi
	title = bianfang.15.t
	desc = bianfang.15.d
	picture = END_OF_TIME_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = bianfang.15.a #WICKEDNESS MUST BE STAMPED OUT
		hidden_effect = {
			every_owned_province = {
				limit = { religion = righteous_path }
				add_province_modifier = {
					name = bianfang_righteous_path_pleased
					duration = 3650
				}
			}
			every_owned_province = {
				limit = { religion = lefthand_path }
				add_province_modifier = {
					name = bianfang_lhp_outraged
					duration = 3650
				}
			}
		}
		hidden_effect = { set_country_flag = bianfang_lhp_hunted } #will force to purge oni later, or reverse course at great cost
		add_stability_or_adm_power = yes
		custom_tooltip = bianfang_hunt_lhp_tt
		increase_tyrant_benevolent_3 = yes
	}
	
	option = {
		name = bianfang.15.b #drive out the vampires but tolerate the lhp followers

		hidden_effect = {
			every_country = { 
				limit = {
					religion = righteous_path
				}
				add_opinion = {
					who = ROOT
					modifier = bianfang_lhp_tolerated_opinion 
				}
			}
			every_owned_province = {
				limit = { 
					religion = righteous_path
				}
				add_province_modifier = {
					name = bianfang_righteous_path_upset
					duration = 3650
				}
			}
			every_owned_province = {
				limit = { religion = lefthand_path }
				add_province_modifier = {
					name = bianfang_lhp_tolerated_modifier
					duration = 3650
				}
			}
		}	

		reduce_stability_or_adm_power = yes
		custom_tooltip = bianfang_tolerate_lhp_tt
		increase_tyrant_ruthless_1 = yes
		hidden_effect = { set_country_flag = bianfang_lhp_tolerated } #will enable tolerating/working with the Oni later
	}
	
	option = {
		name = bianfang.15.c #actively work with the vampires
		trigger = {
			NOT = {
				OR = {
            		bianfang_ruler_benevolent_personality = yes
					ruler_has_personality = zealot_personality
				}
			}
		}

		hidden_effect = {
			every_country = { 
				limit = {
					religion = righteous_path
				}
				add_opinion = {
					who = ROOT
					modifier = bianfang_lhp_tolerated_opinion 
				}
			}
			every_owned_province = {
				limit = { 
					religion = righteous_path
				}
				add_province_modifier = {
					name = bianfang_righteous_path_outraged
					duration = 3650
				}
			}
			every_owned_province = {
				limit = { religion = lefthand_path }
				add_province_modifier = {
					name = bianfang_lhp_tolerated_modifier
					duration = 3650
				}
			}
		}
		if = {
			limit = {
				NOT = { 
					ruler_has_max_personalities = yes 
				}
			}
			add_ruler_personality = malevolent_personality
		}
		reduce_stability_or_adm_power = yes
		4842 = {
			add_province_modifier = {
				name = bianfang_working_with_jiangshi
				duration = -1
			}
		}
		increase_tyrant_ruthless_3 = yes
		custom_tooltip = bianfang_tolerate_lhp_work_with_vamps_tt
		hidden_effect = { set_country_flag = bianfang_lhp_tolerated } #will enable tolerating/working with the Oni later
	}
}

country_event = {
	id = bianfang.16 #hunting down lhp
	title = bianfang.16.t
	desc = bianfang.16.d
	picture = WITCHBURNING_eventPicture
	
	is_triggered_only = yes

	trigger = {
		OR = {
			tag = Y09
			AND = {
				tag = Z66
				was_tag = Y09
			}
		}
		has_country_flag = bianfang_lhp_hunted
		any_owned_province = {
			religion = lefthand_path
			has_human_majority_trigger = yes
		}
	}

	immediate = { 
		hidden_effect = {
			random_owned_province = {
				limit = {
					religion = lefthand_path
					has_human_majority_trigger = yes
				}
				save_event_target_as = bianfang_lhp_target_province
			}
		}		
	}

	option = {
		name = bianfang.16.a
		event_target:bianfang_lhp_target_province = {
			add_devastation = 15
			random_list = {
				33 = {
					add_base_tax = -1
				}
				33 = {
					add_base_production = -1
				}
				33 = {
					add_base_manpower = -1
				}
			}
			if = {
				limit = {
					OR = {
						development = 20
						has_terrain = city_terrain
					}
				}
				change_religion = ROOT
			}
			else_if = {
				limit = {
					owner = { religion = mystic_accord }
				}
				change_religion = mystic_accord
			}
			else = {
				change_religion = righteous_path
			}
			if = {
				limit = { has_province_modifier = bianfang_lhp_outraged }
				remove_province_modifier = bianfang_lhp_outraged
			}
		}
	}
}

## 100 - decision events

country_event = {
	id = bianfang.100 ### corvee labor
	title = bianfang.100.t
	desc = bianfang.100.d
	picture = ANGRY_MOB_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			bianfang_corvee_conscript_immediate = yes
		}
	}
	
	option = {
		name = bianfang.100.a #farm
		trigger = {
			has_saved_event_target = farm1
		}
		bianfang_place_farm_modifiers = { modifier = bianfang_corvee_labor }
	}
	option = {
		name = bianfang.100.b #mine
		trigger = {
			has_saved_event_target = mine1
		}
		bianfang_place_mine_modifiers = { modifier = bianfang_corvee_labor }
	}

	option = {
		name = bianfang.100.c #factory
		trigger = {
			has_saved_event_target = factory1
		}
		bianfang_place_factory_modifiers = { modifier = bianfang_corvee_labor }
	}
	option = {
		name = bianfang.100.dd #shipyard
		trigger = {
			has_saved_event_target = shipyard1
		}
		bianfang_place_shipyard_modifiers = { modifier = bianfang_corvee_labor }
	}
	option = {
		name = bianfang.100.e #colony
		trigger = {
			has_saved_event_target = colony1
		}
		bianfang_place_colony_modifiers = { modifier = bianfang_corvee_labor_colony }
	}
}
country_event = {
	id = bianfang.101 ### conscript labor
	title = bianfang.101.t
	desc = bianfang.101.d
	picture = ANGRY_MOB_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			bianfang_corvee_conscript_immediate = yes
		}
	}

	option = {
		name = bianfang.101.a #farm
		trigger = {
			has_saved_event_target = farm1
		}
		bianfang_place_farm_modifiers = { modifier = bianfang_conscript_labor }
	}
	option = {
		name = bianfang.101.b #mine
		trigger = {
			has_saved_event_target = mine1
		}
		bianfang_place_mine_modifiers = { modifier = bianfang_conscript_labor }
	}

	option = {
		name = bianfang.101.c #factory
		trigger = {
			has_saved_event_target = factory1
		}
		bianfang_place_factory_modifiers = { modifier = bianfang_conscript_labor }
	}
	option = {
		name = bianfang.101.dd #shipyard
		trigger = {
			has_saved_event_target = shipyard1
		}
		bianfang_place_shipyard_modifiers = { modifier = bianfang_conscript_labor }
	}
	option = {
		name = bianfang.101.e #colony
		trigger = {
			has_saved_event_target = colony1
		}
		bianfang_place_colony_modifiers = { modifier = bianfang_conscript_labor_colony }
	}
}

## 200 Hui tyrant events
country_event = {
	id = bianfang.200 #deal with the demons
	title = bianfang.200.t
	desc = bianfang.200.d
	picture = ONI_FORTRESS_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = bianfang.200.a #Hunt down the demons
		
		custom_tooltip = bianfang_hunt_oni_tt
		hidden_effect = {
			every_owned_province = {
				limit = { 
					religion = lefthand_path 
					NOT = { culture = horned_ogre }
				}
				add_province_modifier = {
					name = bianfang_lhp_outraged
					duration = 3650
				}
			}
			every_owned_province = {
				limit = { culture = horned_ogre }
				add_province_modifier = {
					name = bianfang_oni_hunted_modifier
					duration = 3650
				}
				add_nationalism = 10
			}
			every_owned_province = {
				limit = { religion = righteous_path }
				add_province_modifier = {
					name = bianfang_righteous_path_pleased
					duration = 3650
				}
			}		
		}
		add_stability_or_adm_power = yes
		large_decrease_of_ogre_tolerance_effect = yes
		increase_tyrant_benevolent_3 = yes
		4842 = {
			if = {
				limit = { has_province_modifier = bianfang_working_with_jiangshi }
				remove_province_modifier = bianfang_working_with_jiangshi
			}
		}
		hidden_effect = {
			clr_country_flag = bianfang_lhp_tolerated #reverse course on tolerating LHP in bianfang.16
			set_country_flag = bianfang_lhp_hunted 
			set_country_flag = bianfang_oni_hunted			
		}
	}
	
	option = {
		name = bianfang.200.b #work with the oni
		trigger = {
			NOT = {
				AND = {
					OR = {
						ruler_has_personality = malevolent_personality
						ruler_has_personality = cruel_personality
					}
            		has_country_modifier = bianfang_tyrant_modifier_ruthless
				}
			}
		}

		custom_tooltip = bianfang_tolerate_oni_tt
		hidden_effect = {

			every_owned_province = {
				limit = { religion = righteous_path }
				add_province_modifier = {
					name = bianfang_righteous_path_outraged
					duration = 3650
				}
			}
			every_owned_province = {
				limit = { culture = horned_ogre }
				add_province_modifier = {
					name = bianfang_oni_left_alone
					duration = 3650
				}
			}
			every_country = { 
				limit = {
					capital_scope = { 
						OR = { 
							superregion = yanshen_superregion
							superregion = south_haless_superregion
							superregion = north_haless_superregion
							superregion = rahen_superregion
						} 
					}
					NOT = { religion = lefthand_path }
				}
				add_opinion = {
					who = ROOT
					modifier = bianfang_oni_tolerated_opinion 
				}
			}	
		}		
		reduce_stability_or_adm_power = yes
		medium_increase_of_ogre_tolerance_effect = yes
		capital_scope = {
			add_ogre_minority_size_effect = yes
		}
		add_country_modifier = {
			name = bianfang_oni_secrets
			duration = -1
		}
		increase_tyrant_ruthless_2 = yes
		hidden_effect = { set_country_flag = bianfang_oni_tolerated }
	}
	
	option = {
		name = bianfang.200.c # reverse course on lhp if chose to hunt in Bianfang.16 at great cost

		trigger = {
			has_country_flag = bianfang_lhp_hunted
			has_country_modifier = bianfang_tyrant_modifier_ruthless
			OR = {
				ruler_has_personality = malevolent_personality
				ruler_has_personality = cruel_personality
			}
			NOT = {
				ruler_has_personality = zealot_personality
			}
		}
		custom_tooltip = bianfang_tolerate_oni_lhp_tt
				
		hidden_effect = {
			every_owned_province = {
				limit = { religion = righteous_path }
				add_province_modifier = {
					name = bianfang_righteous_path_outraged
					duration = 3650
				}
			}
			every_owned_province = {
				limit = { culture = horned_ogre }
				add_province_modifier = {
					name = bianfang_oni_left_alone
					duration = 3650
				}
			}
			every_country = { 
				limit = {
					capital_scope = { 
						OR = { 
							superregion = yanshen_superregion
							superregion = south_haless_superregion
							superregion = north_haless_superregion
							superregion = rahen_superregion
						} 
					}
					NOT = { religion = lefthand_path }
				}
				add_opinion = {
					who = ROOT
					modifier = bianfang_oni_tolerated_opinion 
				}
			}	
		}
		add_stability = -4
		medium_increase_of_ogre_tolerance_effect = yes
		capital_scope = {
			add_ogre_minority_size_effect = yes
		}
		increase_tyrant_ruthless_3 = yes
		hidden_effect = { 
			clr_country_flag = bianfang_lhp_hunted 
			set_country_flag = bianfang_oni_tolerated 
			set_country_flag = bianfang_lhp_tolerated 
		}
	}
}

country_event = {
	id = bianfang.201 #hunting down Oni
	title = bianfang.201.t
	desc = bianfang.201.d
	picture = ONI_HUMANS_eventPicture

	is_triggered_only = yes

	trigger = {
		OR = {
			tag = Y09
			AND = {
				tag = Z66
				was_tag = Y09
			}
		}
		has_country_flag = bianfang_oni_hunted
		any_owned_province = {
			culture = horned_ogre
		}
	}

	immediate = { 
		hidden_effect = {
			random_owned_province = {
				limit = { culture = horned_ogre }
				save_event_target_as = bianfang_oni_target_province
			}
		}		
	}

	option = {
		name = bianfang.201.a
		event_target:bianfang_oni_target_province = {
			add_devastation = 25
			random_list = {
				33 = {
					add_base_tax = -1
				}
				33 = {
					add_base_production = -1
				}
				33 = {
					add_base_manpower = -1
				}
			}
			change_culture = hill_yan
			if = {
				limit = {
					OR = {
						development = 20
						has_terrain = city_terrain
					}
				}
				change_religion = ROOT
			}
			else_if = {
				limit = {
					owner = { religion = mystic_accord }
				}
				change_religion = mystic_accord
			}
			else = {
				change_religion = righteous_path
			}
			if = {
				limit = { has_province_modifier = bianfang_oni_hunted_modifier }
				remove_province_modifier = bianfang_oni_hunted_modifier
			}
		}
	}
}

country_event = {
	id = bianfang.202 ### Lanjinhui tyranny event
	title = bianfang.202.t
	desc = bianfang.202.d
	picture = ANGRY_MOB_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = bianfang.202.a #leave them be
		increase_tyrant_benevolent_2 = yes
		liuminxiang_area = {
			add_province_modifier = {
				name = bianfang_lanjinhui_spared_prov
				duration = 3650
			}
		}
		erluxi_area = {
			add_province_modifier = {
				name = bianfang_lanjinhui_spared_prov
				duration = 3650
			}
		}
		add_country_modifier = {
			name = bianfang_lajinhui_spared_country
			duration = 5475
		}
	}
	
	option = {
		name = bianfang.202.b ##punish them with hard labor
		increase_tyrant_ruthless_3 = yes
		add_years_of_income = 1.5
		liuminxiang_area = {
			add_devastation = 10
			add_province_modifier = {
				name = bianfang_corvee_labor
				duration = 5475
			}
		}
		erluxi_area = {
			add_devastation = 10
			add_province_modifier = {
				name = bianfang_corvee_labor
				duration = 5475
			}
		}
	}
}

country_event = {
	id = bianfang.203 #verkal ozovar tyranny event
	title = bianfang.203.t
	desc = bianfang.203.d
	picture = ONI_FORTRESS_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = bianfang.203.a #sack verkal ozovar

		if = {
			limit = {
				5424 = {
					development = 40
				}
			}
			add_years_of_income = 2
		}
		if = {
			limit = {
				5424 = {
					development = 50
				}
			}
			add_years_of_income = 1
		}
		if = {
			limit = {
				5424 = {
					development = 60
				}
			}
			add_years_of_income = 1
		}
		if = {
			limit = {
				5424 = {
					development = 70
				}
			}
			add_years_of_income = 1
		}
		if = {
			limit = {
				5424 = {
					development = 80
				}
			}
			add_years_of_income = 1
		}
		if = {
			limit = {
				5424 = {
					development = 90
				}
			}
			add_years_of_income = 1
		}
		5424 = {
			add_devastation = 100
		}
		add_adm_power = 50
		add_dip_power = 50
		add_mil_power = 50
		large_decrease_of_dwarven_tolerance_effect = yes
		increase_tyrant_ruthless_2 = yes
	}
	
	option = {
		name = bianfang.203.b #grant verkal ozovar autonomy
		medium_increase_of_dwarven_tolerance_effect = yes
		5424 = {
			add_permanent_province_modifier = {
				name = bianfang_verkal_ozovar_autonomy
				duration = -1
			}
		}
		capital_scope = {
			add_dwarven_minority_size_effect = yes
		}
		random_owned_province = {
			limit = { 
				province_with_mineable_goods = yes
				superregion = yanshen_superregion
			}
			add_dwarven_minority_size_effect = yes
			add_province_modifier = {
				name = bianfang_dwarven_smiths
				duration = 3650
			}
		}
		random_owned_province = {
			limit = { 
				province_with_mineable_goods = yes
				superregion = yanshen_superregion
			}
			add_dwarven_minority_size_effect = yes
			add_province_modifier = {
				name = bianfang_dwarven_smiths
				duration = 3650
			}
		}
		increase_tyrant_benevolent_2 = yes
		hidden_effect = { set_country_flag = bianfang_dwarves_integrated } #allows sponsoring dwarf reclamation in east serpentspine
	}
}

country_event = {
	id = bianfang.204 #hobgoblins tyrant event
	title = bianfang.204.t
	desc = bianfang.204.d
	picture = ONI_FORTRESS_eventPicture #needs better pic
	
	is_triggered_only = yes
	
	option = {
		name = bianfang.204.a #accept the hobgoblins
		large_increase_of_hobgoblin_tolerance_effect = yes
		capital_scope = {
			add_hobgoblin_minority_size_effect = yes
		}
		add_accepted_culture = dragon_command
		custom_tooltip = hobgoblin_yanification_enabled_tt
		custom_tooltip = hobgoblin_elite_mercs_enabled_tt
		custom_tooltip = merc_elite_no_army_prof_tt
		hidden_effect = { 
			set_country_flag = hobgoblin_yanification_enabled_flag
			unlock_merc_company = { merc_company = merc_bianfang_hobgoblin_army }
		}
	}
	
	option = {
		name = bianfang.204.b #expel them from Haless
		large_decrease_of_hobgoblin_tolerance_effect = yes
		increase_tyrant_benevolent_3 = yes
		custom_tooltip = hobgoblins_never_able_to_be_yanified_tt
		every_owned_province = {
			limit = { culture_group = upper_raheni }
			add_province_modifier = {
				name = bianfang_upper_raheni_appeased_modifier
				duration = 36500
			}
		}
		add_legitimacy = 10
		hidden_effect = {
			set_country_flag = bianfang_upper_raheni_appeased #will weaken (or perhaps disable) the revolts during the disaster
		}
	}
}

country_event = {
	id = bianfang.205 #brown orcs tyrant event
	title = bianfang.205.t
	desc = bianfang.205.d
	picture = ONI_FORTRESS_eventPicture #needs better pic
	
	is_triggered_only = yes
	
	option = {
		name = bianfang.205.a #the half-orcs can be as yan as any human
		large_increase_of_half_orcish_tolerance_effect = yes
		small_increase_of_orcish_tolerance_effect = yes
		increase_tyrant_benevolent_2 = yes
		capital_scope = {
			add_half_orcish_minority_size_effect = yes
		}
		custom_tooltip = orc_yanification_enabled_tt
		hidden_effect = { 
			set_country_flag = orc_yanification_enabled_flag
		}
	}
	
	option = {
		name = bianfang.205.b #expel them from Haless
		large_decrease_of_orcish_tolerance_effect = yes
		increase_tyrant_ruthless_1 = yes
		custom_tooltip = orcs_never_able_to_be_yanified_tt
		add_stability_or_adm_power = yes
		add_legitimacy = 10
	}
}

country_event = {
	id = bianfang.206 #Sramaya slavery tyrant event
	title = bianfang.206.t
	desc = bianfang.206.d
	picture = ONI_FORTRESS_eventPicture #needs better pic
	
	is_triggered_only = yes
	
	option = {
		name = bianfang.206.a #keep slavery
		increase_tyrant_ruthless_2 = yes
		add_years_of_income = 3
		4420 = { add_center_of_trade_level = 1 }
		every_owned_province = {
			limit = { trade_goods = slaves }
			add_province_modifier = {
				name = bianfang_influx_of_new_slaves
				duration = 9125
			}
		}
	}
	
	option = {
		name = bianfang.206.b #abolish slavery
		increase_tyrant_benevolent_3 = yes
		every_owned_province = {
			limit = { trade_goods = slaves }
			change_trade_goods = unknown
		}
		add_country_modifier = {
			name = bianfang_recently_abolished_slavery
			duration = 10950 #30 years
		}
		add_country_modifier = {
			name = bianfang_end_of_halessi_slavery
			duration = -1
		}
		custom_tooltip = bianfang_slavery_abolished_tt
		hidden_effect = { set_country_flag = bianfang_abolished_slavery }
	}
}

country_event = {
	id = bianfang.207 #Arawkelin's merchants and the jade seal
	title = bianfang.207.t
	desc = bianfang.207.d
	picture = ONI_FORTRESS_eventPicture #needs better pic
	
	is_triggered_only = yes
	
	option = {
		name = bianfang.207.a #extend the privilege of trade to the kelino merchants
		increase_tyrant_benevolent_2 = yes
		add_mercantilism = -5
		add_country_modifier = {
			name = bianfang_kelino_merchants
			duration = 18250
		}
		4963 = { add_center_of_trade_level = 1 }
	}
	
	option = {
		name = bianfang.207.b #only yan merchants can be awarded the jade seal
		increase_tyrant_ruthless_1 = yes
		4716 = { #Aksa Sanuyego
			if = {
				limit = {
					owner = { has_country_flag = bianfang_southern_yan_appeared }
					culture = southern_yan
				}
			}
			else = {
				change_culture = forest_yan
			}
			change_religion = owner
		}
		add_mercantilism = 10
	}
}

#Consquest of Rahen missions unlock
country_event = {
	id = bianfang.299
	title = bianfang.299.t
	desc = bianfang.299.d
	picture = ONI_FORTRESS_eventPicture #needs better pic
	
	is_triggered_only = yes
	
	option = {
		name = bianfang.299.a
		shamakhad_region = {
			limit = {
				NOT = { is_core = ROOT }
				NOT = { owned_by = ROOT }
			}
			add_claim = ROOT
		}
		dhujat_region = {
			limit = {
				NOT = { is_core = ROOT }
				NOT = { owned_by = ROOT }
			}
			add_claim = ROOT
		}
		4420 = { #Sramaya
			if = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { owned_by = ROOT }
				}
				add_claim = ROOT
			}
		}
		R38 = {
			every_owned_province = {
				limit = { 
					NOT = { is_core = ROOT }
					NOT = { owned_by = ROOT }
				}
				add_claim = ROOT
			}
		}
		swap_non_generic_missions = yes
	}
}


### 30-42 Eunuch assassination events
country_event = {
	id = bianfang.30 #eunuch plot manager event
	title = bianfang.30.t
	desc = bianfang.30.d
	picture = ASSASSINATION_eventPicture

	is_triggered_only = yes

    hidden = yes

	trigger = {
		OR = {
			tag = Y09
			AND = {
				tag = Z66
				was_tag = Y09
			}
		}
		has_estate = estate_eunuchs_anb
        NOT = {
			OR = {
				has_estate_influence_modifier = {
					estate = estate_eunuchs_anb
					modifier = EST_BIANFANG_EUNUCH_ASSASSINATION_RULER
				}
				has_estate_influence_modifier = {
					estate = estate_eunuchs_anb
					modifier = EST_BIANFANG_EUNUCH_ASSASSINATION_ATTEMPT_RULER
				}
				has_estate_influence_modifier = {
					estate = estate_eunuchs_anb
					modifier = EST_BIANFANG_EUNUCH_ASSASSINATION_ROYAL_FAMILY
				}
				has_estate_influence_modifier = {
					estate = estate_eunuchs_anb
					modifier = EST_BIANFANG_EUNUCH_ASSASSINATION_ATTEMPT_ROYAL_FAMILY
				}	
				has_estate_influence_modifier = {
					estate = estate_eunuchs_anb
					modifier = EST_BIANFANG_EUNUCH_ASSASSINATION_COURT
				}
				has_estate_influence_modifier = {
					estate = estate_eunuchs_anb
					modifier = EST_BIANFANG_EUNUCH_ASSASSINATION_ATTEMPT_COURT
				}					
			}		
		}
		NOT = {
			has_reform = bianfang_eunuch_administrators_reform
		}
	}
	
	option = {
		name = bianfang.30.a
		random_list = {
			10 = { #kill ruler
				modifier = {
					factor = 0
					has_regency = yes
				}
				country_event = { id = bianfang.31 }
			}
			30 = { #fail to kill ruler
				modifier = {
					factor = 0
					has_regency = yes
				}
				country_event = { id = bianfang.32 }
			}
			10 = { #kill heir
				modifier = {
					factor = 0
					has_heir = no
				}
				country_event = { id = bianfang.33 }
			}
			30 = { #fail to kill heir
				modifier = {
					factor = 0
					has_heir = no
				}
				country_event = { id = bianfang.34 }
			}							
			10 = { #kill consort
				modifier = {
					factor = 0
					has_consort = no
				}
				country_event = { id = bianfang.35 }
			}
			30 = { #fail to kill consort
				modifier = {
					factor = 0
					has_consort = no
				}
				country_event = { id = bianfang.36 }
			}							
			50 = { #kill ADM advisor
				modifier = {
					factor = 0
					NOT = { employed_advisor = { category = ADM } }
				}
				country_event = { id = bianfang.37 }
			}
			50 = { #fail to kill ADM advisor
				modifier = {
					factor = 0
					NOT = { employed_advisor = { category = ADM } }
				}
				country_event = { id = bianfang.38 }
			}
			50 = { #kill DIP advisor
				modifier = {
					factor = 0
					NOT = { employed_advisor = { category = DIP } }
				}
				country_event = { id = bianfang.39 }
			}
			50 = { #fail to kill DIP advisor
				modifier = {
					factor = 0
					NOT = { employed_advisor = { category = DIP } }
				}
				country_event = { id = bianfang.40 }
			}
			50 = { #kill MIL advisor
				modifier = {
					factor = 0
					NOT = { employed_advisor = { category = MIL } }
				}
				country_event = { id = bianfang.41 }
			}
			50 = { #fail to kill MIL advisor
				modifier = {
					factor = 0
					NOT = { employed_advisor = { category = MIL } }
				}
				country_event = { id = bianfang.42 }
			}

			600 = { 
				##loyal estate
				modifier = {
					factor = 3
					estate_loyalty = {
						estate = estate_eunuchs_anb
						loyalty = 50
					}
				}
				modifier = {
					factor = 3
					estate_loyalty = {
						estate = estate_eunuchs_anb
						loyalty = 60
					}
				}
				modifier = {
					factor = 3
					estate_loyalty = {
						estate = estate_eunuchs_anb
						loyalty = 80
					}
				}
				##weak estate
				modifier = {
					factor = 1.5
					NOT = {
						estate_influence = {
							estate = estate_eunuchs_anb
							influence = 40
						}
					}
				}
				modifier = {
					factor = 1.5
					NOT = {
						estate_influence = {
							estate = estate_eunuchs_anb
							influence = 20
						}
					}
				}
				##disloyal estate
				modifier = {
					factor = 0.5
					NOT = {
						estate_loyalty = {
							estate = estate_eunuchs_anb
							loyalty = 40
						}
					}
				}
				modifier = {
					factor = 0.5
					NOT = {
						estate_loyalty = {
							estate = estate_eunuchs_anb
							loyalty = 20
						}
					}
				}
				##influential estate
				modifier = {
					factor = 0.5
					estate_influence = {
						estate = estate_eunuchs_anb
						influence = 60
					}
				}
				modifier = {
					factor = 0.5
					estate_influence = {
						estate = estate_eunuchs_anb
						influence = 80
					}
				}
			}			
		}
 	}
}

country_event = {
	id = bianfang.31 ##eunuchs successfully assassinate ruler
	title = bianfang.31.t

	desc = {
        trigger = {
			heir_age = 16
        }
	    desc = "bianfang.31.da" #heir of age
    }
	desc = {
        trigger = {
			has_heir = yes 
			has_consort = yes 
			NOT = { heir_age = 16 }
        }
	    desc = "bianfang.31.db" #consort regency
    }
	desc = {
        trigger = {
			has_consort = no
			NOT = { heir_age = 16 }
        }
	    desc = "bianfang.31.dc" #regency council or no heir
    }

	picture = ASSASSINATION_eventPicture

	is_triggered_only = yes

	option = {
		name = "bianfang.31.a" #purge plotters but allow others to remain
		kill_ruler = yes
		add_prestige = -50
		add_estate_influence_modifier = { ## eunuch plotters assassins purged
			estate = estate_eunuchs_anb
			desc = EST_BIANFANG_EUNUCH_ASSASSINATION_RULER
			influence = -25
			duration = 5475
		}
		add_estate_loyalty = { ## remaining eunuchs loyal
    		estate = estate_eunuchs_anb
    		loyalty = 20
		}
		increase_tyrant_benevolent_1 = yes
	}
	option = {
		name = "bianfang.31.b" #purge all eunuchs
		kill_ruler = yes
		if = {
			limit = {
				estate_influence = {
					estate = estate_eunuchs_anb
					influence = 80
				}
			}
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 3
				}
			}
		}
		else_if = {
			limit = {
				estate_influence = {
					estate = estate_eunuchs_anb
					influence = 60
				}
			}
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 2
				}
			}
		}
		else = {
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 1
				}
			}
		}
		set_country_flag = anti_eunuch_country
		add_ruler_modifier = { ### for successor 
			name = eunuchs_purged
			duration = -1
		}
		increase_tyrant_ruthless_2 = yes
	}
}

country_event = {
	id = bianfang.32 ##eunuchs fail to assassinate ruler
	title = bianfang.32.t
	desc = bianfang.32.d
	picture = ACCUSATION_eventPicture

	is_triggered_only = yes

	option = {
		name = "bianfang.32.a" #purge plotters but allow others to remain
		add_prestige = -30
		add_estate_influence_modifier = { ## eunuch plotters assassins purged
			estate = estate_eunuchs_anb
			desc = EST_BIANFANG_EUNUCH_ASSASSINATION_ATTEMPT_RULER
			influence = -25
			duration = 5475
		}
		add_estate_loyalty = { ## remaining eunuchs loyal
    		estate = estate_eunuchs_anb
    		loyalty = 20
		}
		increase_tyrant_benevolent_1 = yes
	}
	option = {
		name = "bianfang.32.b" #purge all eunuchs
		if = {
			limit = {
				estate_influence = {
					estate = estate_eunuchs_anb
					influence = 80
				}
			}
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 3
				}
			}
		}
		else_if = {
			limit = {
				estate_influence = {
					estate = estate_eunuchs_anb
					influence = 60
				}
			}
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 2
				}
			}
		}
		else = {
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 1
				}
			}
		}
		set_country_flag = anti_eunuch_country
		add_ruler_modifier = { 
			name = eunuchs_purged
			duration = -1
		}
		increase_tyrant_ruthless_2 = yes
	}
}

country_event = {
	id = bianfang.33 ##eunuchs successfully assassinate heir
	title = bianfang.33.t
	desc = bianfang.33.d
	picture = ASSASSINATION_eventPicture

	is_triggered_only = yes

	option = {
		name = "bianfang.33.a" #purge plotters but allow others to remain
		kill_heir = { }
		add_prestige = -40
		add_estate_influence_modifier = { ## eunuch plotters assassins purged
			estate = estate_eunuchs_anb
			desc = EST_BIANFANG_EUNUCH_ASSASSINATION_ROYAL_FAMILY
			influence = -20
			duration = 5475
		}
		add_estate_loyalty = { ## remaining eunuchs loyal
    		estate = estate_eunuchs_anb
    		loyalty = 15
		}
		increase_tyrant_benevolent_1 = yes
	}

	option = {
		name = "bianfang.33.b" #purge all eunuchs
		kill_heir = { }
		add_ruler_modifier = { 
			name = eunuchs_purged
			duration = -1
		}
		if = {
			limit = {
				estate_influence = {
					estate = estate_eunuchs_anb
					influence = 80
				}
			}
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 3
				}
			}
		}
		else_if = {
			limit = {
				estate_influence = {
					estate = estate_eunuchs_anb
					influence = 60
				}
			}
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 2
				}
			}
		}
		else = {
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 1
				}
			}
		}
		set_country_flag = anti_eunuch_country
		increase_tyrant_ruthless_2 = yes
	}
}

country_event = {
	id = bianfang.34 ##eunuchs fail to assassinate heir
	title = bianfang.34.t
	desc = bianfang.34.d
	picture = ACCUSATION_eventPicture

	is_triggered_only = yes

	option = {
		name = "bianfang.34.a" #purge plotters but allow others to remain
		add_prestige = -25
		add_estate_influence_modifier = { ## eunuch plotters assassins purged
			estate = estate_eunuchs_anb
			desc = EST_BIANFANG_EUNUCH_ASSASSINATION_ATTEMPT_ROYAL_FAMILY
			influence = -20
			duration = 5475
		}
		add_estate_loyalty = { ## remaining eunuchs loyal
    		estate = estate_eunuchs_anb
    		loyalty = 15
		}
		increase_tyrant_benevolent_1 = yes
	}
	option = {
		name = "bianfang.34.b" #purge all eunuchs
		if = {
			limit = {
				estate_influence = {
					estate = estate_eunuchs_anb
					influence = 80
				}
			}
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 3
				}
			}
		}
		else_if = {
			limit = {
				estate_influence = {
					estate = estate_eunuchs_anb
					influence = 60
				}
			}
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 2
				}
			}
		}
		else = {
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 1
				}
			}
		}
		set_country_flag = anti_eunuch_country
		add_ruler_modifier = { 
			name = eunuchs_purged
			duration = -1
		}
		increase_tyrant_ruthless_2 = yes
	}
}

country_event = {
	id = bianfang.35 ##eunuchs successfully assassinate consort
	title = bianfang.35.t
	desc = bianfang.35.d
	picture = ASSASSINATION_eventPicture

	is_triggered_only = yes

	option = {
		name = "bianfang.35.a"
		kill_consort = yes
		add_prestige = -40
		add_estate_influence_modifier = { ## eunuch plotters assassins purged
			estate = estate_eunuchs_anb
			desc = EST_BIANFANG_EUNUCH_ASSASSINATION_ROYAL_FAMILY
			influence = -20
			duration = 5475
		}
		add_estate_loyalty = { ## remaining eunuchs loyal
    		estate = estate_eunuchs_anb
    		loyalty = 15
		}
		increase_tyrant_benevolent_1 = yes
	}

	option = {
		name = "bianfang.35.b" #purge all eunuchs
		kill_consort = yes
		add_ruler_modifier = { 
			name = eunuchs_purged
			duration = -1
		}
		if = {
			limit = {
				estate_influence = {
					estate = estate_eunuchs_anb
					influence = 80
				}
			}
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 3
				}
			}
		}
		else_if = {
			limit = {
				estate_influence = {
					estate = estate_eunuchs_anb
					influence = 60
				}
			}
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 2
				}
			}
		}
		else = {
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 1
				}
			}
		}
		set_country_flag = anti_eunuch_country
		increase_tyrant_ruthless_2 = yes
	}
}

country_event = {
	id = bianfang.36 ##eunuchs fail to assassinate consort
	title = bianfang.36.t
	desc = bianfang.36.d
	picture = ACCUSATION_eventPicture

	is_triggered_only = yes

	option = {
		name = "bianfang.36.a"
		add_prestige = -25
		add_estate_influence_modifier = { ## eunuch plotters assassins purged
			estate = estate_eunuchs_anb
			desc = EST_BIANFANG_EUNUCH_ASSASSINATION_ATTEMPT_ROYAL_FAMILY
			influence = -20
			duration = 5475
		}
		add_estate_loyalty = { ## remaining eunuchs loyal
    		estate = estate_eunuchs_anb
    		loyalty = 15
		}
		increase_tyrant_benevolent_1 = yes
	}

	option = {
		name = "bianfang.36.b" #purge all eunuchs
		add_ruler_modifier = { 
			name = eunuchs_purged
			duration = -1
		}
		if = {
			limit = {
				estate_influence = {
					estate = estate_eunuchs_anb
					influence = 80
				}
			}
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 3
				}
			}
		}
		else_if = {
			limit = {
				estate_influence = {
					estate = estate_eunuchs_anb
					influence = 60
				}
			}
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 2
				}
			}
		}
		else = {
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 1
				}
			}
		}
		set_country_flag = anti_eunuch_country
		increase_tyrant_ruthless_2 = yes
	}
}

country_event = {
	id = bianfang.37 ##eunuchs successfully assassinate ADM advisor
	title = bianfang.37.t
	desc = bianfang.37.d
	picture = ASSASSINATION_eventPicture

	is_triggered_only = yes

	option = {
		name = "bianfang.37.a"
		kill_advisor_by_category_effect = { ADM = yes }
		add_prestige = -30
		add_estate_influence_modifier = { ## eunuch plotters assassins purged
			estate = estate_eunuchs_anb
			desc = EST_BIANFANG_EUNUCH_ASSASSINATION_COURT
			influence = -15
			duration = 5475
		}
		add_estate_loyalty = { ## remaining eunuchs loyal
    		estate = estate_eunuchs_anb
    		loyalty = 10
		}
		increase_tyrant_benevolent_1 = yes
	}

	option = {
		name = "bianfang.37.b" #purge all eunuchs
		kill_advisor_by_category_effect = { ADM = yes }
		add_ruler_modifier = { 
			name = eunuchs_purged
			duration = -1
		}
		if = {
			limit = {
				estate_influence = {
					estate = estate_eunuchs_anb
					influence = 80
				}
			}
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 3
				}
			}
		}
		else_if = {
			limit = {
				estate_influence = {
					estate = estate_eunuchs_anb
					influence = 60
				}
			}
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 2
				}
			}
		}
		else = {
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 1
				}
			}
		}
		set_country_flag = anti_eunuch_country
		increase_tyrant_ruthless_2 = yes
	}

}

country_event = {
	id = bianfang.38 ##eunuchs fail to assassinate ADM advisor
	title = bianfang.38.t
	desc = bianfang.38.d
	picture = ACCUSATION_eventPicture

	is_triggered_only = yes

	option = {
		name = "bianfang.38.a"
		add_prestige = -20
		add_estate_influence_modifier = { ## eunuch plotters assassins purged
			estate = estate_eunuchs_anb
			desc = EST_BIANFANG_EUNUCH_ASSASSINATION_ATTEMPT_COURT
			influence = -15
			duration = 5475
		}
		add_estate_loyalty = { ## remaining eunuchs loyal
    		estate = estate_eunuchs_anb
    		loyalty = 10
		}
		increase_tyrant_benevolent_1 = yes
	}

	option = {
		name = "bianfang.38.b" #purge all eunuchs
		add_ruler_modifier = { 
			name = eunuchs_purged
			duration = -1
		}
		if = {
			limit = {
				estate_influence = {
					estate = estate_eunuchs_anb
					influence = 80
				}
			}
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 3
				}
			}
		}
		else_if = {
			limit = {
				estate_influence = {
					estate = estate_eunuchs_anb
					influence = 60
				}
			}
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 2
				}
			}
		}
		else = {
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 1
				}
			}
		}
		set_country_flag = anti_eunuch_country
		increase_tyrant_ruthless_2 = yes
	}
}

country_event = {
	id = bianfang.39 ##eunuchs successfully assassinate DIP advisor
	title = bianfang.39.t
	desc = bianfang.39.d
	picture = ASSASSINATION_eventPicture

	is_triggered_only = yes

	option = {
		name = "bianfang.39.a"
		kill_advisor_by_category_effect = { DIP = yes }
		add_prestige = -30
		add_estate_influence_modifier = { ## eunuch plotters assassins purged
			estate = estate_eunuchs_anb
			desc = EST_BIANFANG_EUNUCH_ASSASSINATION_COURT
			influence = -15
			duration = 5475
		}
		add_estate_loyalty = { ## remaining eunuchs loyal
    		estate = estate_eunuchs_anb
    		loyalty = 10
		}
	}

	option = {
		name = "bianfang.39.b" #purge all eunuchs
		kill_advisor_by_category_effect = { DIP = yes }
		add_ruler_modifier = { 
			name = eunuchs_purged
			duration = -1
		}
		if = {
			limit = {
				estate_influence = {
					estate = estate_eunuchs_anb
					influence = 80
				}
			}
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 3
				}
			}
		}
		else_if = {
			limit = {
				estate_influence = {
					estate = estate_eunuchs_anb
					influence = 60
				}
			}
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 2
				}
			}
		}
		else = {
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 1
				}
			}
		}
		set_country_flag = anti_eunuch_country
		increase_tyrant_ruthless_2 = yes
	}

}

country_event = {
	id = bianfang.40 ##eunuchs fail to assassinate DIP advisor
	title = bianfang.40.t
	desc = bianfang.40.d
	picture = ACCUSATION_eventPicture

	is_triggered_only = yes

	option = {
		name = "bianfang.40.a"
		add_prestige = -20
		add_estate_influence_modifier = { ## eunuch plotters assassins purged
			estate = estate_eunuchs_anb
			desc = EST_BIANFANG_EUNUCH_ASSASSINATION_ATTEMPT_COURT
			influence = -15
			duration = 5475
		}
		add_estate_loyalty = { ## remaining eunuchs loyal
    		estate = estate_eunuchs_anb
    		loyalty = 10
		}
		increase_tyrant_benevolent_1 = yes
	}

	option = {
		name = "bianfang.40.b" #purge all eunuchs
		add_ruler_modifier = { 
			name = eunuchs_purged
			duration = -1
		}
		if = {
			limit = {
				estate_influence = {
					estate = estate_eunuchs_anb
					influence = 80
				}
			}
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 3
				}
			}
		}
		else_if = {
			limit = {
				estate_influence = {
					estate = estate_eunuchs_anb
					influence = 60
				}
			}
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 2
				}
			}
		}
		else = {
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 1
				}
			}
		}
		set_country_flag = anti_eunuch_country
		increase_tyrant_ruthless_2 = yes
	}
}

country_event = {
	id = bianfang.41 ##eunuchs successfully assassinate MIL advisor
	title = bianfang.41.t
	desc = bianfang.41.d
	picture = ASSASSINATION_eventPicture

	is_triggered_only = yes

	option = {
		name = "bianfang.41.a"
		kill_advisor_by_category_effect = { MIL = yes }
		add_prestige = -30
		add_estate_influence_modifier = { ## eunuch plotters assassins purged
			estate = estate_eunuchs_anb
			desc = EST_BIANFANG_EUNUCH_ASSASSINATION_COURT
			influence = -15
			duration = 5475
		}
		add_estate_loyalty = { ## remaining eunuchs loyal
    		estate = estate_eunuchs_anb
    		loyalty = 10
		}
		increase_tyrant_benevolent_1 = yes
	}

	option = {
		name = "bianfang.41.b" #purge all eunuchs
		kill_advisor_by_category_effect = { MIL = yes }
		add_ruler_modifier = { 
			name = eunuchs_purged
			duration = -1
		}
		if = {
			limit = {
				estate_influence = {
					estate = estate_eunuchs_anb
					influence = 80
				}
			}
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 3
				}
			}
		}
		else_if = {
			limit = {
				estate_influence = {
					estate = estate_eunuchs_anb
					influence = 60
				}
			}
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 2
				}
			}
		}
		else = {
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 1
				}
			}
		}
		set_country_flag = anti_eunuch_country
		increase_tyrant_ruthless_2 = yes
	}

}

country_event = {
	id = bianfang.42 ##eunuchs fail to assassinate MIL advisor
	title = bianfang.42.t
	desc = bianfang.42.d
	picture = ACCUSATION_eventPicture

	is_triggered_only = yes

	option = {
		name = "bianfang.42.a"
		add_prestige = -20
		add_estate_influence_modifier = { ## eunuch plotters assassins purged
			estate = estate_eunuchs_anb
			desc = EST_BIANFANG_EUNUCH_ASSASSINATION_ATTEMPT_COURT
			influence = -15
			duration = 5475
		}
		add_estate_loyalty = { ## remaining eunuchs loyal
    		estate = estate_eunuchs_anb
    		loyalty = 10
		}
		increase_tyrant_benevolent_1 = yes
	}

	option = {
		name = "bianfang.42.b" #purge all eunuchs
		add_ruler_modifier = { 
			name = eunuchs_purged
			duration = -1
		}
		if = {
			limit = {
				estate_influence = {
					estate = estate_eunuchs_anb
					influence = 80
				}
			}
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 3
				}
			}
		}
		else_if = {
			limit = {
				estate_influence = {
					estate = estate_eunuchs_anb
					influence = 60
				}
			}
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 2
				}
			}
		}
		else = {
			random_owned_province = {
				spawn_rebels = {
					type = noble_rebels
					size = 1
				}
			}
		}
		set_country_flag = anti_eunuch_country
		increase_tyrant_ruthless_2 = yes
	}
}
## new monarch event
country_event = { 
	id = bianfang.1000
	title = bianfang.1000.t
	desc = {
        trigger = {
            has_country_modifier = bianfang_tyrant_modifier_benevolent
            bianfang_ruler_benevolent_personality = yes
        }
	    desc = "bianfang.1000.da" #benevolent ruler, benevolent legacy
    }
	desc = {
        trigger = {
                has_country_modifier = bianfang_tyrant_modifier_pragmatic
                bianfang_ruler_benevolent_personality = yes
            }
    	desc = "bianfang.1000.db" #benevolet ruler, pragmatic legacy
    } 
    desc = {
        trigger = {
            has_country_modifier = bianfang_tyrant_modifier_ruthless
            bianfang_ruler_benevolent_personality = yes
        }
        desc = "bianfang.1000.dc" #benevolent ruler, ruthless legacy
    }
    desc = {
        trigger = {
            has_country_modifier = bianfang_tyrant_modifier_benevolent
            bianfang_ruler_pragmatic_personality = yes
        }
        desc = "bianfang.1000.dd" #pragmatic ruler, benevolent legacy
    }
    desc = {
        trigger = {
            has_country_modifier = bianfang_tyrant_modifier_pragmatic
            bianfang_ruler_pragmatic_personality = yes
        }
        desc = "bianfang.1000.de" #pragmatic ruler, pragmatic legacy
    } 
    desc = {
        trigger = {
            has_country_modifier = bianfang_tyrant_modifier_ruthless
            bianfang_ruler_pragmatic_personality = yes
        }
        desc = "bianfang.1000.df" #pragmatic ruler, ruthless legacy
    }
    desc = {
        trigger = {
            has_country_modifier = bianfang_tyrant_modifier_benevolent
            bianfang_ruler_ruthless_personality = yes
        }
        desc = "bianfang.1000.dg" #ruthless ruler, benevolent legacy
    }
    desc = {
        trigger = {
            has_country_modifier = bianfang_tyrant_modifier_pragmatic
            bianfang_ruler_ruthless_personality = yes
        }
        desc = "bianfang.1000.dh" #ruthless ruler, pragmatic legacy
    } 
    desc = {
        trigger = {
            has_country_modifier = bianfang_tyrant_modifier_ruthless
            bianfang_ruler_ruthless_personality = yes
        }
        desc = "bianfang.1000.di" #ruthless ruler, ruthless legacy
    }
    desc = {
        trigger = {
		    ruler_has_personality = fertile_personality
        }
        desc = "bianfang.1000.dj" #fertile
    } 
    desc = {
        trigger = {
            OR = {
                ruler_has_personality = tactical_genius_personality
                ruler_has_personality = bold_fighter_personality
                ruler_has_personality = martial_educator_personality
            }
        }
        desc = "bianfang.1000.dk" #martial
    } 
    desc = {
        trigger = {
            ruler_has_personality = navigator_personality
        }
        desc = "bianfang.1000.dl" #navigator
    } 
    desc = {
        trigger = {
            OR = {
                ruler_has_personality = babbling_buffoon_personality
                ruler_has_personality = infertile_personality
                ruler_has_personality = drunkard_personality
                ruler_has_personality = sinner_personality
                ruler_has_personality = naive_personality
                ruler_has_personality = craven_personality
                ruler_has_personality = loose_lips_personality
                ruler_has_personality = obsessive_perfectionist_personality
            }        
        }
        desc = "bianfang.1000.dm" #laughingstock
    } 
    desc = {
        trigger = {
            OR = {
                ruler_has_personality = mage_personality
                ruler_has_personality = scholar_personality
            }
        }
        desc = "bianfang.1000.dn" #bookish
    } 
    desc = {
        trigger = {
        	is_long_lived_ruler = yes
        }
        desc = "bianfang.1000.do" #immortal
    } 	
    picture = NUSANTARA_THRONE_eventPicture
	
	is_triggered_only = yes
    	
	option = {
	    name = bianfang.1000.a #benevolent ruler, benevolent legacy
        trigger = {
            has_country_modifier = bianfang_tyrant_modifier_benevolent
            bianfang_ruler_benevolent_personality = yes
        }
		increase_tyrant_benevolent_1 = yes
    }
	option = {
	    name = bianfang.1000.b #benevolet ruler, pragmatic legacy
        trigger = {
                has_country_modifier = bianfang_tyrant_modifier_pragmatic
                bianfang_ruler_benevolent_personality = yes
            }
		increase_tyrant_benevolent_2 = yes
    } 
    option = {
        name = bianfang.1000.c #benevolent ruler, ruthless legacy
        trigger = {
            has_country_modifier = bianfang_tyrant_modifier_ruthless
            bianfang_ruler_benevolent_personality = yes
        }
		increase_tyrant_benevolent_3 = yes
    }
    option = {
        name = bianfang.1000.d #pragmatic ruler, benevolent legacy
        trigger = {
            has_country_modifier = bianfang_tyrant_modifier_benevolent
            bianfang_ruler_pragmatic_personality = yes
        }
        increase_tyrant_ruthless_1 = yes
    }
    option = {
        name = bianfang.1000.e #pragmatic ruler, pragmatic legacy
        trigger = {
            has_country_modifier = bianfang_tyrant_modifier_pragmatic
            bianfang_ruler_pragmatic_personality = yes
        }
    } 
    option = {
        name = bianfang.1000.f #pragmatic ruler, ruthless legacy
        trigger = {
            has_country_modifier = bianfang_tyrant_modifier_ruthless
            bianfang_ruler_pragmatic_personality = yes
        }
		increase_tyrant_benevolent_1 = yes
    }
    option = {
        name = bianfang.1000.g #ruthless ruler, benevolent legacy
        trigger = {
            has_country_modifier = bianfang_tyrant_modifier_benevolent
            bianfang_ruler_ruthless_personality = yes
        }
        increase_tyrant_ruthless_3 = yes
    }
    option = {
        name = bianfang.1000.h #ruthless ruler, pragmatic legacy
        trigger = {
            has_country_modifier = bianfang_tyrant_modifier_pragmatic
            bianfang_ruler_ruthless_personality = yes
        }
        increase_tyrant_ruthless_2 = yes
    } 
    option = {
        name = bianfang.1000.i #ruthless ruler, ruthless legacy
        trigger = {
            has_country_modifier = bianfang_tyrant_modifier_ruthless
            bianfang_ruler_ruthless_personality = yes
        }
        increase_tyrant_ruthless_1 = yes
    }
    option = {
        name = bianfang.1000.j #none of the above
        trigger = {
			OR = {
            	bianfang_ruler_irrelevant_personality = yes
				NOT = {
					bianfang_ruler_ruthless_personality = yes
					bianfang_ruler_pragmatic_personality = yes
					bianfang_ruler_benevolent_personality = yes
				}
				NOT = {
					has_country_modifier = bianfang_tyrant_modifier_ruthless
					has_country_modifier = bianfang_tyrant_modifier_pragmatic
					has_country_modifier = bianfang_tyrant_modifier_benevolent
				}
			}
        }
    } 
}

#Yanification events 300-3XX
province_event = { #Yanification of province
	id = bianfang.300
	title = bianfang.300.t
	desc = bianfang.300.d
	picture = REFUGEES_ESCAPING_eventPicture

	hidden = yes

	trigger = {
		controlled_by = owner
		has_state_edict = yanification_edict
		OR = {
			has_human_majority_trigger = yes
			has_harimari_majority_trigger = yes
			AND = {
				owner = { has_country_flag = orc_yanification_enabled_flag }
				has_orcish_majority_trigger = yes
			}
			AND = {
				owner = { has_country_flag = hobgoblin_yanification_enabled_flag }
				has_hobgoblin_majority_trigger = yes
			}
		}
		NOT = { culture_group = yan }
		NOT = { culture = serene_harimari }
		NOT = { culture = dragon_command }
		#has_province_flag = yanification_acceptance
	}
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			owner = {
				save_event_target_as = owner_religion
			}
			if = {
				limit = {
					area_for_scope_province = {
						type = all
						OR = {
							province_id = ROOT
							AND = {
								OR = {
									religion = high_philosophy
									religion = suhans_praxis
									religion = righteous_path
								}
								OR = {
									culture_group = yan
									culture = serene_harimari
									culture = dragon_command
								}
							}
						}
					}
				}
				province_event = {
					id = bianfang.310
				}
			}
		}
	}

	option = {
		name = bianfang.300.a
		ai_chance = {
			factor = 1
		}
		if = {
			limit = {
				OR = {
					has_terrain = city_terrain
					development = 18
					has_non_ruined_or_corrupted_temple_complex = yes
					has_hobgoblin_majority_trigger = yes
					has_harimari_majority_trigger = yes
					has_orcish_majority_trigger = yes
					has_half_orcish_majority_trigger = yes
					religion = godlost
				}
			}
			change_religion = event_target:owner_religion
		}
		else_if = {
			limit = {
				NOT = {
					OR = {
						religion = high_philosophy
						religion = suhans_praxis
						religion = mystic_accord
					}
				}
			}
			change_religion = righteous_path
		}
		
		if = {
			limit = { has_harimari_majority_trigger = yes }
			change_culture = serene_harimari
		}
		else_if = {
			limit = { has_orcish_majority_trigger = yes }
			change_culture = yan_half_orc
		}
		else_if = {
			limit = { has_half_orcish_majority_trigger = yes }
			change_culture = yan_half_orc
		}
		else_if = {
			limit = { has_hobgoblin_majority_trigger = yes }
			change_culture = dragon_command
		}
		else = {
			if = {
				limit = {
					OR = {
						area = jiantsiang_area
						area = yiguan_area
						province_id = 4919
						province_id = 4921
					}
				}
				change_culture = northern_yan
			}
			if = {
				limit = {
					superregion = north_haless_superregion
				}
				if = {
					limit = {
						owner = { has_country_flag = bianfang_steppe_yan_appeared }
					}
					change_culture = steppe_yan
				}
				else = { change_culture = northern_yan }
				if = {
					limit = {
						NOT = {
							OR = {
								owner = { has_country_flag = bianfang_steppe_yan_appear }
								owner = { has_country_flag = bianfang_steppe_yan_appeared }
							}
						}
					}
					hidden_effect = {
						owner = {
							set_country_flag = bianfang_steppe_yan_appear
							country_event = {
								id = bianfang.301
								days = 7300 #culture appears 20 years after first culture shift
							}
						}
					}
				}
			}
			if = {
				limit = {
				
				}
			}
			if = {
				limit = {
					OR = {
						region = xianjie_region
						area = khadisrapur_area #Eastern Shamakhad
						area = munlanan_area
						area = kradhungur_area
						area = tamvihar_area
						area = khamarutar_area
						area = ghatasak_area
						area = khasardul_area
						area = marudhoj_area
						area = nadida_area
						area = pharata_area
						area = yodhilakra_area
						area = sir_area
						area = nakara_area
						area = tilathi_area
						area = raghajandi_area
						area = tughayasa_area #bits of Dhujat
						area = thadarsaghol_area
						area = khirnadhiman_area
						area = sarisung_area
						area = rangadevi_area
					}
				}
				change_culture = western_yan
			}
			if = {
				limit = {
					OR = {
						region = thidinkai_region
						region = bomdan_region
						area = semphrerong_area
						area = phangban_area
						area = li_btei_area
						area = reanthung_area
						area = lower_telebei_area
						area = cmor_krueng_area
						area = khindi_area
					}
				}
				if = {
					limit = {
						owner = { has_country_flag = bianfang_bom_kai_yan_appeared }
					}
					change_culture = bom_kai_yan
				}
				else = { change_culture = owner }
				if = {
					limit = {
						NOT = {
							OR = {
								owner = { has_country_flag = bianfang_bom_kai_yan_appear }
								owner = { has_country_flag = bianfang_bom_kai_yan_appeared }
							}
						}
					}
					hidden_effect = {
						owner = {
							set_country_flag = bianfang_bom_kai_yan_appear
							country_event = {
								id = bianfang.302
								days = 7300 #20 years
							}
						}
					}
				}
			}
			if = {
				limit = {
					OR = {
						region = ringlet_isles_region
						region = lupulan_rainforest_region
					}
				}
				if = {
					limit = {
						owner = { has_country_flag = bianfang_southern_yan_appeared }
					}
					change_culture = southern_yan
				}
				else = { change_culture = forest_yan }
				if = {
					limit = {
						NOT = {
							OR = {
								owner = { has_country_flag = bianfang_southern_yan_appear }
								owner = { has_country_flag = bianfang_southern_yan_appeared }
							}
						}
					}
					hidden_effect = {
						owner = {
							set_country_flag = bianfang_southern_yan_appear
							country_event = {
								id = bianfang.303
								days = 7300 #20 years
							}
						}
					}
				}
			}
			if = {
				limit = {
					OR = {
						area = avhavubhiya_area
						area = shenral_area
						area = harimars_cradle_area
						area = sarkhashabid_area
						area = ascension_cape_area
						area = bharagha_area
						area = tujgal_area
						area = rhamirta_area
						area = inner_rahen_area
						area = satarsaya_area
						area = middle_dhenbasana_area
						area = lower_dhenbasana_area
						area = dhenbasana_estuary_area
						area = kharunyana_estuary_area
						region = rakhadesh_region
						area = west_rajnadhaga_area
						area = khadirnadi_area
						area = east_rajnadhaga_area
						area = tiltaghar_area
						area = middle_nadimraj_area
						area = bidhilar_area
						area = kramitra_area
						area = ghavaghuundakhan_area
						area = maharaaja_area
						area = dhurajaghan_area
						area = khiraspid_area
						area = buhaanjirgal_area
						area = maldeelakhan_area
						area = banjisbid_area
						area = banjiraal_area
					}
				}
				if = {
					limit = {
						owner = { has_country_flag = bianfang_rahen_yan_appeared }
					}
					change_culture = rahen_yan
				}
				else = { change_culture = owner }
				if = {
					limit = {
						NOT = {
							OR = {
								owner = { has_country_flag = bianfang_rahen_yan_appear }
								owner = { has_country_flag = bianfang_rahen_yan_appeared }
							}
						}
					}
					hidden_effect = {
						owner = {
							set_country_flag = bianfang_rahen_yan_appear
							country_event = {
								id = bianfang.304
								days = 7300 #20 years
							}
						}
					}
				}
			}
		}
		
		hidden_effect = {
			on_province_culture_converted_estate_privilges_effect = yes
			clr_province_flag = yanification_acceptance
			clr_province_flag = yanification_had_bad_event
		}
	}
}

#steppe_yan
country_event = {
	id = bianfang.301
	title = bianfang.301.t
	desc = bianfang.301.d
	picture = REFUGEES_ESCAPING_eventPicture
	
	fire_only_once = yes

    is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			clr_country_flag = bianfang_steppe_yan_appear
			set_country_flag = bianfang_steppe_yan_appeared
		}
	}

	option = {
		name = "bianfang.301.a"
		north_haless_superregion = {
			limit = {
				culture_group = yan
				NOT = { culture = yan_half_orc }
			}
			change_culture = steppe_yan
		}
	}
}

#bom_kai_yan
country_event = {
	id = bianfang.302
	title = bianfang.302.t
	desc = bianfang.302.d
	picture = REFUGEES_ESCAPING_eventPicture
	
	fire_only_once = yes

    is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			clr_country_flag = bianfang_bom_kai_yan_appear
			set_country_flag = bianfang_bom_kai_yan_appeared
		}
	}

	option = {
		name = "bianfang.302.a"
		bomdan_region = {
			limit = {
				culture_group = yan
				NOT = { culture = yan_half_orc }
			}
			change_culture = bom_kai_yan
		}
		thidinkai_region = {
			limit = {
				culture_group = yan
				NOT = { culture = yan_half_orc }
			}
			change_culture = bom_kai_yan
		}
		semphrerong_area = {
			limit = {
				culture_group = yan
				NOT = { culture = yan_half_orc }
			}
			change_culture = bom_kai_yan
		}
		phangban_area = {
			limit = {
				culture_group = yan
				NOT = { culture = yan_half_orc }
			}
			change_culture = bom_kai_yan
		}
		li_btei_area = {
			limit = {
				culture_group = yan
				NOT = { culture = yan_half_orc }
			}
			change_culture = bom_kai_yan
		}
		reanthung_area = {
			limit = {
				culture_group = yan
				NOT = { culture = yan_half_orc }
			}
			change_culture = bom_kai_yan
		}
		lower_telebei_area = {
			limit = {
				culture_group = yan
				NOT = { culture = yan_half_orc }
			}
			change_culture = bom_kai_yan
		}
		cmor_krueng_area = {
			limit = {
				culture_group = yan
				NOT = { culture = yan_half_orc }
			}
			change_culture = bom_kai_yan
		}
		khindi_area = {
			limit = {
				culture_group = yan
				NOT = { culture = yan_half_orc }
			}
			change_culture = bom_kai_yan
		}
	}
}

#southern_yan
country_event = {
	id = bianfang.303
	title = bianfang.303.t
	desc = bianfang.303.d
	picture = REFUGEES_ESCAPING_eventPicture
	
	fire_only_once = yes

    is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			clr_country_flag = bianfang_southern_yan_appear
			set_country_flag = bianfang_southern_yan_appeared
		}
	}

	option = {
		name = "bianfang.303.a"
		lupulan_rainforest_region = {
			limit = {
				culture_group = yan
				NOT = { culture = yan_half_orc }
			}
			change_culture = southern_yan
		}
		ringlet_isles_region = {
			limit = {
				culture_group = yan
				NOT = { culture = yan_half_orc }
			}
			change_culture = southern_yan
		}
	}
}

#rahen_yan
country_event = {
	id = bianfang.304
	title = bianfang.304.t
	desc = bianfang.304.d
	picture = REFUGEES_ESCAPING_eventPicture
	
	fire_only_once = yes

    is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			clr_country_flag = bianfang_rahen_yan_appear
			set_country_flag = bianfang_rahen_yan_appeared
		}
	}

	option = {
		name = "bianfang.304.a"
		rahen_coast_region = {
			limit = {
				culture_group = yan
				NOT = { culture = yan_half_orc }
				NOT = { area = khindi_area }
				NOT = { area = cmor_krueng_area }
				NOT = { area = lower_telebei_area }
				NOT = { area = reanthung_area }
				NOT = { area = li_btei_area }
			}
			change_culture = rahen_yan
		}
		rakhadesh_region = {
			limit = {
				culture_group = yan
				NOT = { culture = yan_half_orc }
			}
			change_culture = rahen_yan
		}
		west_rajnadhaga_area = {
			limit = {
				culture_group = yan
				NOT = { culture = yan_half_orc }
			}
			change_culture = rahen_yan
		}
		khadirnadi_area = {
			limit = {
				culture_group = yan
				NOT = { culture = yan_half_orc }
			}
			change_culture = rahen_yan
		}
		east_rajnadhaga_area = {
			limit = {
				culture_group = yan
				NOT = { culture = yan_half_orc }
			}
			change_culture = rahen_yan
		}
		tiltaghar_area = {
			limit = {
				culture_group = yan
				NOT = { culture = yan_half_orc }
			}
			change_culture = rahen_yan
		}
		middle_nadimraj_area = {
			limit = {
				culture_group = yan
				NOT = { culture = yan_half_orc }
			}
			change_culture = rahen_yan
		}
		bidhilar_area = {
			limit = {
				culture_group = yan
				NOT = { culture = yan_half_orc }
			}
			change_culture = rahen_yan
		}
		kramitra_area = {
			limit = {
				culture_group = yan
				NOT = { culture = yan_half_orc }
			}
			change_culture = rahen_yan
		}
		ghavaghuundakhan_area = {
			limit = {
				culture_group = yan
				NOT = { culture = yan_half_orc }
			}
			change_culture = rahen_yan
		}
		maharaaja_area = {
			limit = {
				culture_group = yan
				NOT = { culture = yan_half_orc }
			}
			change_culture = rahen_yan
		}
		dhurajaghan_area = {
			limit = {
				culture_group = yan
				NOT = { culture = yan_half_orc }
			}
			change_culture = rahen_yan
		}
		khiraspid_area = {
			limit = {
				culture_group = yan
				NOT = { culture = yan_half_orc }
			}
			change_culture = rahen_yan
		}
		buhaanjirgal_area = {
			limit = {
				culture_group = yan
				NOT = { culture = yan_half_orc }
			}
			change_culture = rahen_yan
		}
		maldeelakhan_area = {
			limit = {
				culture_group = yan
				NOT = { culture = yan_half_orc }
			}
			change_culture = rahen_yan
		}
		banjisbid_area = {
			limit = {
				culture_group = yan
				NOT = { culture = yan_half_orc }
			}
			change_culture = rahen_yan
		}
		banjiraal_area = {
			limit = {
				culture_group = yan
				NOT = { culture = yan_half_orc }
			}
			change_culture = rahen_yan
		}
	}
}

#305 and 306 - add culture and religion correction hidden events

#Resistance events
province_event = {
	id = bianfang.307 #Settlers attacked by locals
	title = bianfang.307.t
	desc = bianfang.307.d
	picture = REFUGEES_ESCAPING_eventPicture
	
	trigger = {
		controlled_by = owner
		has_state_edict = yanification_edict
		OR = {
			has_human_majority_trigger = yes
			has_harimari_majority_trigger = yes
			AND = {
				owner = { has_country_flag = orc_yanification_enabled_flag }
				has_orcish_majority_trigger = yes
			}
			AND = {
				owner = { has_country_flag = hobgoblin_yanification_enabled_flag }
				has_hobgoblin_majority_trigger = yes
			}
		}
		NOT = { culture_group = yan }
		NOT = { culture = serene_harimari }
		NOT = { culture = dragon_command }
		NOT = { has_province_flag = yanification_acceptance }
		NOT = { has_province_modifier = bianfang_yanification_rejected }
		NOT = { has_province_flag = yanification_had_bad_event }
	}
	
	is_triggered_only = yes
	
	option = {
		name = bianfang.307.a
		area = {
			limit = {
				NOT = { is_yanified_culture = yes }
			}
			add_devastation = 10
			random_list = {
				33 = {
					add_base_tax = -1
				}
				33 = {
					add_base_production = -1
				}
				33 = {
					add_base_manpower = -1
				}
			}
			add_province_modifier = {
				name = bianfang_yanification_rejected
				duration = 1825
			}
			hidden_effect = { set_province_flag = yanification_had_bad_event }
		}
		hidden_effect = {
			owner = {
				change_variable = {
					which = bianfang_yanification_bad_counter
					value = 1
				}
			}
		}
	}
}

province_event = {
	id = bianfang.308 #Locals disobey orders
	title = bianfang.308.t
	desc = bianfang.308.d
	picture = REFUGEES_ESCAPING_eventPicture
	
	trigger = {
		controlled_by = owner
		has_state_edict = yanification_edict
		OR = {
			has_human_majority_trigger = yes
			has_harimari_majority_trigger = yes
			AND = {
				owner = { has_country_flag = orc_yanification_enabled_flag }
				has_orcish_majority_trigger = yes
			}
			AND = {
				owner = { has_country_flag = hobgoblin_yanification_enabled_flag }
				has_hobgoblin_majority_trigger = yes
			}
		}
		NOT = { culture_group = yan }
		NOT = { culture = serene_harimari }
		NOT = { culture = dragon_command }
		#NOT = { has_province_flag = yanification_acceptance }
		NOT = { has_province_modifier = bianfang_yanification_rejected }
		NOT = { has_province_flag = yanification_had_bad_event }
	}
	
	is_triggered_only = yes
	
	option = {
		name = bianfang.308.a
		area = {
			limit = {
				NOT = { is_yanified_culture = yes }
			}
			add_local_autonomy = 20
			add_nationalism = 5
			add_province_modifier = {
				name = bianfang_yanification_rejected
				duration = 1825
			}
			hidden_effect = { set_province_flag = yanification_had_bad_event }
		}
		hidden_effect = {
			owner = {
				change_variable = {
					which = bianfang_yanification_bad_counter
					value = 1
				}
			}
		}
	}
}

country_event = {
	id = bianfang.309 #Yanification manager event
	title = bianfang.309.t
	desc = bianfang.309.d
	picture = REFUGEES_ESCAPING_eventPicture
	
	hidden = yes
	
	trigger = {
		any_owned_province = {
			controlled_by = ROOT
			has_state_edict = yanification_edict
			OR = {
				has_human_majority_trigger = yes
				has_harimari_majority_trigger = yes
				AND = {
					owner = { has_country_flag = orc_yanification_enabled_flag }
					has_orcish_majority_trigger = yes
				}
				AND = {
					owner = { has_country_flag = hobgoblin_yanification_enabled_flag }
					has_hobgoblin_majority_trigger = yes
				}
			}
			NOT = { culture_group = yan }
			NOT = { culture = serene_harimari }
			NOT = { culture = dragon_command }
			# NOT = { has_province_flag = yanification_acceptance }
			NOT = { has_province_modifier = bianfang_yanification_rejected }
		}
	}
	
	mean_time_to_happen = { #subject to change
		months = 12
		#days = 7
		
		modifier = {
			factor = 0.75
			has_country_flag = yanification_upgrade_1
		}
		
		modifier = {
			factor = 0.5
			has_country_flag = yanification_upgrade_2
		}
		
		modifier = {
			factor = 0.4
			has_country_flag = yanification_upgrade_3
		}
	}
	
	immediate = {
		random_owned_province = {
			limit = {
				controlled_by = owner
				has_state_edict = yanification_edict
				OR = {
					has_human_majority_trigger = yes
					has_harimari_majority_trigger = yes
					AND = {
						owner = { has_country_flag = orc_yanification_enabled_flag }
						has_orcish_majority_trigger = yes
					}
					AND = {
						owner = { has_country_flag = hobgoblin_yanification_enabled_flag }
						has_hobgoblin_majority_trigger = yes
					}
				}
				NOT = { culture_group = yan }
				NOT = { culture = serene_harimari }
				NOT = { culture = dragon_command }
				# NOT = { has_province_flag = yanification_acceptance }
				# NOT = { has_province_flag = yanification_had_bad_event }
				NOT = { has_province_modifier = bianfang_yanification_rejected }
			}
			save_event_target_as = yanification_target_province_1
		}
	}
	
	option = {
		event_target:yanification_target_province_1 = {
			if = {
				limit = { has_province_flag = yanification_had_bad_event }
				province_event = { id = bianfang.300 }
			}
			else = {
				random_list = {
					90 = {
						province_event = { id = bianfang.300 }
					}
					5 = {
						province_event = { id = bianfang.307 }
					}
					5 = {
						province_event = { id = bianfang.308 }
					}
				}
			}
		}
	}
}

province_event = { #Notification of area being converted
	id = bianfang.310
	title = bianfang.310.t
	desc = bianfang.310.d
	picture = REFUGEES_ESCAPING_eventPicture

	is_triggered_only = yes
	goto = ROOT

	option = { #
		name = bianfang.310.a
		ai_chance = {
			factor = 1
		}
	}
}

country_event = {
	id = bianfang.311
	title = bianfang.311.t
	desc = bianfang.311.d
	picture = BAD_WITH_MONARCH_eventPicture.dds
	
	is_triggered_only = yes
	fire_only_once = yes
	
	immediate = {
		hidden_effect = {
			free_vassal = R83
		}
	}
	
	option = { #notifying them that the harpies left
		name = bianfang.311.a
		ai_chance = {
			factor = 1
		}
		custom_tooltip = bianfang_lose_vassal_tt
	}
	option = {
		name = bianfang.311.b
		ai_chance = {
				factor = 0
		}
		declare_war_with_cb = {
			who = R83
			casus_belli = cb_disloyal_vassal
		}
	}
}

country_event = {
	id = bianfang.312
	title = bianfang.312.t
	desc = bianfang.312.d
	picture = GOOD_WITH_MONARCH_eventPicture.dds
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = { #LBozo we out
		name = bianfang.312.a
		ai_chance = {
			factor = 1
		}
		custom_tooltip = bianfang_l_bozo_tt
	}
}