
namespace = flavour_brelar

#Old tales in the ironhouses
country_event = {
	id = flavour_brelar.1
	title = flavour_brelar.1.t
	desc = flavour_brelar.1.d
	picture = RIOTING_workers_eventPicture

	is_triggered_only = yes

	trigger = {
		mission_completed = g27_argan_ironhouses
	}

	immediate = {
		set_country_flag = g27_architect_research_1
	}

	option = {
		name = flavour_brelar.1.a
		ai_chance = {
			factor = 1
		}
	}
}

#Tracing the past
country_event = {
	id = flavour_brelar.2
	title = flavour_brelar.2.t
	desc = flavour_brelar.2.d
	picture = RIOTING_workers_eventPicture

	trigger = {
		has_country_flag = g27_architect_research_1
	}

	mean_time_to_happen = {
		days = 10950
		modifier = {
			factor = 0.8
			mission_completed = g27_restart_mills
		}
		modifier = {
			factor = 0.8
			mission_completed = g27_marbelous_infrastructure
		}
		modifier = {
			factor = 0.8
			mission_completed = g27_steel_city
		}
		modifier = {
			factor = 0.8
			employed_advisor = {
				type = spymaster
			}
		}
		modifier = {
			factor = 0.8
			employed_advisor = {
				type = court_mage
			}
		}
		modifier = {
			factor = 0.8
			ruler_has_personality = scholar_personality
		}
		modifier = {
			factor = 0.8
			ruler_has_personality = intricate_web_weaver_personality
		}
	}

	immediate = {
		hidden_effect = {
			clr_country_flag = g27_architect_research_1
			set_country_flag = g27_architect_research_2
		}
	}

	option = {
		name = flavour_brelar.2.a
		ai_chance = {
			factor = 1
		}
	}
}

#Secrets of the Glory days
country_event = {
	id = flavour_brelar.3
	title = flavour_brelar.3.t
	desc = flavour_brelar.3.d
	picture = RIOTING_workers_eventPicture
	
	trigger = {
		has_country_flag = g27_architect_research_2
	}

	mean_time_to_happen = {
		days = 10950
		modifier = {
			factor = 0.8
			mission_completed = g27_restart_mills
		}
		modifier = {
			factor = 0.8
			mission_completed = g27_marbelous_infrastructure
		}
		modifier = {
			factor = 0.8
			mission_completed = g27_steel_city
		}
		modifier = {
			factor = 0.8
			employed_advisor = {
				type = spymaster
			}
		}
		modifier = {
			factor = 0.8
			employed_advisor = {
				type = court_mage
			}
		}
		modifier = {
			factor = 0.8
			ruler_has_personality = intricate_web_weaver_personality
		}
	}

	immediate = {
		hidden_effect = {
			clr_country_flag = g27_architect_research_2
			set_country_flag = g27_architect_research_3
		}
	}

	option = {
		name = flavour_brelar.3.a
		ai_chance = {
			factor = 1
		}
	}
}

#the knowledge to tame the river
country_event = {
	id = flavour_brelar.4
	title = flavour_brelar.4.t
	desc = flavour_brelar.4.d
	picture = RIOTING_workers_eventPicture

	trigger = {
		has_country_flag = g27_architect_research_3
	}

	mean_time_to_happen = {
		days = 10950
		modifier = {
			factor = 0.8
			mission_completed = g27_restart_mills
		}
		modifier = {
			factor = 0.8
			mission_completed = g27_marbelous_infrastructure
		}
		modifier = {
			factor = 0.8
			mission_completed = g27_steel_city
		}
		modifier = {
			factor = 0.8
			employed_advisor = {
				type = natural_scientist
			}
		}
		modifier = {
			factor = 0.8
			employed_advisor = {
				type = fortification_expert
			}
		}
		modifier = {
			factor = 0.8
			ruler_has_personality = architectural_visionary_personality
		}
		modifier = {
			factor = 0.8
			ruler_has_personality = scholar_personality
		}
		modifier = {
			factor = 0.8
			ruler_has_personality = free_thinker_personality
		}
	}

	immediate = {
		hidden_effect = {
			clr_country_flag = g27_architect_research_3
		}
	}

	option = {
		name = flavour_brelar.4.a
		ai_chance = {
			factor = 1
		}
		custom_tooltip = unlock_privilege_estate_burghers_brelari_dam_architects_tt
		hidden_effect = {
			set_country_flag = g27_dam_architects_flag
		}
	}
}

#Dam Upgrade lvl 1
province_event = {
	id = flavour_brelar.599
	title = flavour_brelar.5.t
	desc = flavour_brelar.5.d
	picture = CITY_DEVELOPMENT_eventPicture

	hidden = yes

	trigger = {
		owner = {
			OR = {
				has_country_flag = g27_can_upgrade_dams
				overlord = {
					has_country_flag = g27_can_upgrade_dams
				}
			}
		}
		OR = {
			AND = {
				has_great_project = {
					type = ynnic_dam_adbrabohvi
					tier = 0
				}
				NOT = {
					has_great_project = {
						type = ynnic_dam_adbrabohvi
						tier = 3
					}
				}
			}
			AND = {
				has_great_project = {
					type = ynnic_dam_bosancovac
					tier = 0
				}
				NOT = {
					has_great_project = {
						type = ynnic_dam_bosancovac
						tier = 3
					}
				}
			}
			AND = {
				has_great_project = {
					type = ynnic_dam_mocbarja
					tier = 0
				}
				NOT = {
					has_great_project = {
						type = ynnic_dam_mocbarja
						tier = 3
					}
				}
			}
			AND = {
				has_great_project = {
					type = ynnic_dam_vels_bacar
					tier = 0
				}
				NOT = {
					has_great_project = {
						type = ynnic_dam_vels_bacar
						tier = 3
					}
				}
			}
		}
		development = 10
	}

	mean_time_to_happen = {
		days = 3650
		#faster depending on stuff from MT
		modifier = {
			factor = 0.8
			owner = {
				OR = {
					has_estate_privilege = estate_artificers_clockwork_architects
					has_estate_privilege = estate_nobles_myrsarnik_architects
				}
			}
		}
		modifier = {
			factor = 0.8
			development = 15
		}
		modifier = {
			factor = 0.8
			development = 20
		}
		modifier = {
			factor = 0.8
			development = 25
		}
		modifier = {
			factor = 0.8
			development = 30
		}
		modifier = {
			factor = 0.8
			development = 35
		}
		modifier = {
			factor = 0.8
			development = 40
		}
		modifier = {
			factor = 0.8
			has_province_modifier = g27_clockwork_watermill
		}
		modifier = {
			factor = 0.8
			has_province_modifier = g27_local_overseers
		}
		modifier = {
			factor = 0.8
			has_province_modifier = g27_local_architects
		}
		modifier = {
			factor = 0.8
			has_building = workshop
		}
		modifier = {
			factor = 0.8
			has_building = ramparts
		}
		modifier = {
			factor = 0.8
			has_province_modifier = ynnic_dam_recently_maintained
		}
		modifier = {
			factor = 0.8
			has_province_modifier = ynnic_dam_overseen_by_dwarves
		}
	}

	option = {
		name = flavour_brelar.599.a
		ai_chance = {
			factor = 1
		}
		if = {
			limit = {
				NOT = {
					has_great_project = {
						type = ynnic_dam_adbrabohvi
						tier = 1
					}
					has_great_project = {
						type = ynnic_dam_vels_bacar
						tier = 1
					}
					has_great_project = {
						type = ynnic_dam_mocbarja
						tier = 1
					}
					has_great_project = {
						type = ynnic_dam_bosancovac
						tier = 1
					}
				}
			}
			set_province_flag = dam_upgrade1_ready
		}
		else_if = {
			limit = {
				NOT = {
					has_great_project = {
						type = ynnic_dam_adbrabohvi
						tier = 2
					}
					has_great_project = {
						type = ynnic_dam_vels_bacar
						tier = 2
					}
					has_great_project = {
						type = ynnic_dam_mocbarja
						tier = 2
					}
					has_great_project = {
						type = ynnic_dam_bosancovac
						tier = 2
					}
				}
			}
			set_province_flag = dam_upgrade2_ready
		}
		else = {
			set_province_flag = dam_upgrade3_ready
		}
	}
}

country_event = {
	id = flavour_brelar.5
	title = flavour_brelar.5.t
	desc = flavour_brelar.5.d
	picture = CITY_DEVELOPMENT_eventPicture

	trigger = {
		OR = {
			has_country_flag = g27_can_upgrade_dams
			overlord = {
				has_country_flag = g27_can_upgrade_dams
			}
		}
		any_owned_province = { has_province_flag = dam_upgrade1_ready }
	}

	immediate = { 
		hidden_effect = {
			random_owned_province = {
				limit = { has_province_flag = dam_upgrade1_ready }	
				save_event_target_as = upgrading_dam
				clr_province_flag = dam_upgrade1_ready
			}
		}
	}

	option = {
		name = flavour_brelar.5.a	
		if = {
			limit = {
				event_target:upgrading_dam = {
					has_great_project = {
						type = ynnic_dam_adbrabohvi
					}
				}
			}
			1133 = {
				set_great_project_tier_1 = {
					type = ynnic_dam_adbrabohvi
				}
			}
		}
		if = {
			limit = {
				event_target:upgrading_dam = {
					has_great_project = {
						type = ynnic_dam_vels_bacar
					}
				}	
			}
			1138 = {
				set_great_project_tier_1 = {
					type = ynnic_dam_vels_bacar
				}
			}
		}
		if = {
			limit = {
				event_target:upgrading_dam = {
					has_great_project = {
						type = ynnic_dam_mocbarja
					}
				}
			}	
			1186 = {
				set_great_project_tier_1 = {
					type = ynnic_dam_mocbarja
				}
			}
		}
		if = {
			limit = {
				event_target:upgrading_dam = {
					has_great_project = {
						type = ynnic_dam_bosancovac
					}
				}
			}	
			1165 = {
				set_great_project_tier_1 = {
					type = ynnic_dam_bosancovac
				}
			}
		}		
		add_splendor = 100
		if = {
			limit = {
				is_subject = yes
			}
			overlord = {
				add_splendor = 100
			}
		}	
	}
}

country_event = {
	id = flavour_brelar.6
	title = flavour_brelar.6.t
	desc = flavour_brelar.6.d
	picture = CITY_DEVELOPMENT_eventPicture

	trigger = {
		OR = {
			has_country_flag = g27_can_upgrade_dams
			overlord = {
				has_country_flag = g27_can_upgrade_dams
			}
		}
		any_owned_province = { has_province_flag = dam_upgrade2_ready }
	}

	immediate = { 
		hidden_effect = {
			random_owned_province = {
				limit = { has_province_flag = dam_upgrade2_ready }
				save_event_target_as = upgrading_dam
				clr_province_flag = dam_upgrade2_ready
			}
		}
	}

	option = {
		name = flavour_brelar.6.a	
		if = {
			limit = {
				event_target:upgrading_dam = {
					has_great_project = {
						type = ynnic_dam_adbrabohvi
					}
				}
			}
			1133 = {
				set_great_project_tier_2 = {
					type = ynnic_dam_adbrabohvi
				}
			}
		}
		if = {
			limit = {
				event_target:upgrading_dam = {
					has_great_project = {
						type = ynnic_dam_vels_bacar
					}
				}	
			}
			1138 = {
				set_great_project_tier_2 = {
					type = ynnic_dam_vels_bacar
				}
			}
		}
		if = {
			limit = {
				event_target:upgrading_dam = {
					has_great_project = {
						type = ynnic_dam_mocbarja
					}
				}
			}	
			1186 = {
				set_great_project_tier_2 = {
					type = ynnic_dam_mocbarja
				}
			}
		}
		if = {
			limit = {
				event_target:upgrading_dam = {
					has_great_project = {
						type = ynnic_dam_bosancovac
					}
				}
			}	
			1165 = {
				set_great_project_tier_2 = {
					type = ynnic_dam_bosancovac
				}
			}
		}		
		add_splendor = 100
		if = {
			limit = {
				is_subject = yes
			}
			overlord = {
				add_splendor = 100
			}
		}	
	}
}

country_event = {
	id = flavour_brelar.7
	title = flavour_brelar.7.t
	desc = flavour_brelar.7.d
	picture = FAR_AND_WIDE_eventPicture

	trigger = {
		OR = {
			has_country_flag = g27_can_upgrade_dams
			overlord = {
				has_country_flag = g27_can_upgrade_dams
			}
		}
		any_owned_province = { has_province_flag = dam_upgrade3_ready }
	}

	immediate = { 
		hidden_effect = {
			random_owned_province = {
				limit = { has_province_flag = dam_upgrade3_ready }	
				save_event_target_as = upgrading_dam
				clr_province_flag = dam_upgrade3_ready
			}
		}
	}

	option = {
		name = flavour_brelar.7.a	
		if = {
			limit = {
				event_target:upgrading_dam = {
					has_great_project = {
						type = ynnic_dam_adbrabohvi
					}
				}
			}
			1133 = {
				set_great_project_tier_3 = {
					type = ynnic_dam_adbrabohvi
				}
			}
		}
		if = {
			limit = {
				event_target:upgrading_dam = {
					has_great_project = {
						type = ynnic_dam_vels_bacar
					}
				}	
			}
			1138 = {
				set_great_project_tier_3 = {
					type = ynnic_dam_vels_bacar
				}
			}
		}
		if = {
			limit = {
				event_target:upgrading_dam = {
					has_great_project = {
						type = ynnic_dam_mocbarja
					}
				}
			}	
			1186 = {
				set_great_project_tier_3 = {
					type = ynnic_dam_mocbarja
				}
			}
		}
		if = {
			limit = {
				event_target:upgrading_dam = {
					has_great_project = {
						type = ynnic_dam_bosancovac
					}
				}
			}	
			1165 = {
				set_great_project_tier_3 = {
					type = ynnic_dam_bosancovac
				}
			}
		}		
		add_splendor = 100
		if = {
			limit = {
				is_subject = yes
			}
			overlord = {
				add_splendor = 100
			}
		}	
	}
}


#The whirr of the valley
country_event = {
	id = flavour_brelar.8
	title = flavour_brelar.8.t
	desc = flavour_brelar.8.d
	picture = TEXTILE_INDUSTRY_eventPicture

	is_triggered_only = yes

	option = {
		name = flavour_brelar.8.a
		ai_chance = {
			factor = 1
		}
		2488 = {
			add_province_modifier = {
				name = g27_up_mill_down_mine
				duration = 4975
			}
		}
		2838 = {
			add_province_modifier = {
				name = g27_up_mill_down_mine
				duration = 4975
			}
		}
	}
}

#Malacynn Canal 
country_event = {
	id = flavour_brelar.9
	title = flavour_brelar.9.t
	desc = flavour_brelar.9.d
	picture = MALAYAN_PORT_eventPicture

	is_triggered_only = yes

	option = {
		name = flavour_brelar.9.a
		ai_chance = {
			factor = 1
		}
		2488 = {
			center_of_trade = 1
		}
		1169 = {
			add_base_production = 2
			add_permanent_province_modifier = {
				name = g27_malacynn_canal
				duration = -1
			}
		}
		1170 = {
			add_base_production = 2
			add_permanent_province_modifier = {
				name = g27_malacynn_canal
				duration = -1
			}
		}
		every_owned_province = {
			limit = {
				trade_goods = iron
			}
			add_permanent_province_modifier = {
				name = g27_brelari_mines
				duration = -1
			}
		}
		custom_tooltip = g27_malacnar_production_tt
		hidden_effect = {
			g27_malacnar_production_setup_effect = yes
		}
		set_country_flag = g27_brelari_iron_mines_flag
	}
}

#Solicitations in secret
country_event = {
	id = flavour_brelar.10
	title = flavour_brelar.10.t
	desc = flavour_brelar.10.d
	picture = ASSASSINATION_eventPicture

	is_triggered_only = yes

	option = {
		name = flavour_brelar.10.a
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			remove_advisor_by_category = DIP
		}
		define_advisor = {
			type = spymaster
			skill = 1
			cost_multiplier = 0.5
			location = 2488
			culture = ROOT
			religion = ROOT
		}
		add_ruler_personality = secretive_personality
		change_adm = 1
	}

	option = {
		name = flavour_brelar.10.b
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			remove_advisor_by_category = DIP
		}
		define_advisor = {
			type = spymaster
			skill = 1
			cost_multiplier = 0.5
			location = 2488
			culture = ROOT
			religion = ROOT
		}
		add_ruler_personality = intricate_web_weaver_personality
		change_mil = 1
	}
}

#Restructure the Order
country_event = {
	id = flavour_brelar.11
	title = flavour_brelar.11.t
	desc = flavour_brelar.11.d
	picture = BATTLE_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			1172 = {
				if = {
					limit = {
						owned_by = G26
					}
					spawn_rebels = {
						type = noble_rebels
						use_monarch_as_leader = yes
						size = 2
						win = yes
					}
				}
				else = {
					spawn_rebels = {
						type = noble_rebels
						size = 2
						win = yes
					}
				}
			}
		}
	}

	option = {
		name = flavour_brelar.11.a
		ai_chance = {
			factor = 1
		}
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = -10
		}
		add_country_modifier = {
			name = g27_returning_amethyst_exiles
			duration = 3650
		}
		1172 = {
			if = {
				limit = {
					NOT = {
						owned_by = ROOT
					}
				}
				owner = {
					add_country_modifier = {
						name = g27_returning_amethyst_exiles
						duration = 3650
					}
				}
			}
		}
	}
}

#The Boats' Uprising
country_event = {
	id = flavour_brelar.12
	title = flavour_brelar.12.t
	desc = flavour_brelar.12.d
	picture = REVOLT_eventPicture

	is_triggered_only = yes

	trigger = {
		1165 = {
			owned_by = ROOT
		}
		has_country_flag = g27_bosancovac_owner_flag
	}

	option = {
		name = flavour_brelar.12.a
		ai_chance = {
			factor = 1
		}
		1165 = {
			spawn_rebels = {
				size = 4
				friend = G27
				should_take_capital = yes
			}
		}
		G27 = {
			country_event = {
				id = flavour_brelar.121
			}
		}
	}
}

#The Boats' Uprising
country_event = {
	id = flavour_brelar.121
	title = flavour_brelar.12.t
	desc = flavour_brelar.12.d
	picture = REVOLT_eventPicture

	is_triggered_only = yes

	option = {
		name = flavour_brelar.12.a
		ai_chance = {
			factor = 1
		}
		tooltip = {
			1165 = {
				spawn_rebels = {
					size = 4
					friend = G27
					should_take_capital = yes
				}
			}
		}
	}
}

#The Boats' Return
country_event = {
	id = flavour_brelar.13
	title = flavour_brelar.13.t
	desc = flavour_brelar.13.d
	picture = REVOLUTION_eventPicture

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		has_country_flag = g27_bosancovac_owner_flag
		G27 = {
			has_country_flag = g27_boats_uprising_flag
		}
	}

	immediate = {
		hidden_effect = {
			random_known_country = {
				limit = {
					has_country_flag = g27_boats_uprising_flag
				}
				save_event_target_as = g27_brelar_boats
			}
			if = {
				limit = {
					is_at_war = yes
				}
				every_known_country = {
					limit = {
						is_in_war = {
							defender_leader = ROOT
						}
					}
					white_peace = ROOT
				}
			}
		}
	}

	option = {
		name = flavour_brelar.13.a
		ai_chance = {
			factor = 1
		}
		event_target:g27_brelar_boats = {
			country_event = {
				id = flavour_brelar.131
			}
		}
		if = {
			limit = {
				G33 = {
					exists = no
				}
			}
			G33 = {
				every_core_province = {
					limit = {
						country_or_non_sovereign_subject_holds = FROM
					}
					cede_province = G33
				}
				event_target:g27_brelar_boats = {
					create_iosahar = {
						tag = G33
					}
				}
				change_government = republic
				add_government_reform = oligarchy_reform
				kill_ruler = yes
			}	
		}
		else_if = {
			limit = {
				1165 = {
					NOT = {
						owned_by = G33
					}
				}
			}
			1165 = {
				cede_province = G33
			}
			G33 = {
				event_target:g27_brelar_boats = {
					create_iosahar = {
						tag = G33
					}
				}
				change_government = republic
				add_government_reform = oligarchy_reform
				kill_ruler = yes
			}
		}
		else = {
			event_target:g27_brelar_boats = {
				create_iosahar = {
					tag = ROOT
				}
			}
			change_government = republic
			add_government_reform = oligarchy_reform
			kill_ruler = yes
		}
		event_target:g27_brelar_boats = {
			add_stability = 1
			add_scaled_republican_tradition = 15
		}
	}

	after = {
		clr_country_flag = g27_bosancovac_owner_flag
		1165 = {
			remove_province_modifier = g27_boats_revolt
			add_unrest = -20
		}
		event_target:g27_brelar_boats = {
			clr_country_flag = g27_boats_uprising_flag
			remove_country_modifier = g27_supporting_the_downtrodden
		}
	}
}

#The Boats' Return for Brelar
country_event = {
	id = flavour_brelar.131
	title = flavour_brelar.13.t
	desc = flavour_brelar.13.d
	picture = REVOLT_eventPicture

	is_triggered_only = yes

	option = {
		name = flavour_brelar.13.a
		ai_chance = {
			factor = 1
		}
		tooltip = {
			1165 = {
				owner = {
					if = {
						limit = {
							G33 = {
								exists = no
							}
						}
						G33 = {
							every_core_province = {
								limit = {
									country_or_non_sovereign_subject_holds = FROM
								}
								cede_province = G33
							}
							create_subject = {
								subject_type = ynnic_iosahar
								who = event_target:g27_brelar_boats
							}
							change_government = republic
							add_government_reform = oligarchy_reform
						}	
					}
					else_if = {
						limit = {
							1165 = {
								NOT = {
									owned_by = G33
								}
							}
						}
						1165 = {
							cede_province = G33
						}
						G33 = {
							set_capital = 1165
							create_subject = {
								subject_type = ynnic_iosahar
								who = event_target:g27_brelar_boats
							}
							change_government = republic
							add_government_reform = oligarchy_reform
						}
					}
					else = {
						create_subject = {
							subject_type = ynnic_iosahar
							who = event_target:g27_brelar_boats
						}
						change_government = republic
						add_government_reform = oligarchy_reform
					}
					event_target:g27_brelar_boats = {
						add_stability = 1
						add_scaled_republican_tradition = 15
					}
				}
			}
		}
	}
}

#Debating with dragons
country_event = {
	id = flavour_brelar.14
	title = flavour_brelar.14.t
	desc = flavour_brelar.14.d
	picture = GREAT_SPIRIT_YANHE_eventPicture

	is_triggered_only = yes

	option = {
		name = flavour_brelar.14.a
		ai_chance = {
			factor = 1
		}
		add_country_modifier = {
			name = g27_strong_dt_rzenta
			duration = -1
		}
		rzenta_region = {
			limit = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			random = {
				chance = 25
				spawn_rebels = {
					size = 2
					type = drozma_tur_rebels
				}
			}
		}
		custom_tooltip = g27_yrw_revolt_tt
		hidden_effect = {
			random_list = {
				10 = {
					random_owned_province = {
						spawn_rebels = {
							type = ynn_river_worship_rebels
							size = 4
						}
					}
				}
				10 = {
					random_subject_country = {
						random_owned_province = {
							spawn_rebels = {
								type = ynn_river_worship_rebels
								size = 4
							}
						}
					}
				}
			}
			random_list = {
				10 = {
					random_owned_province = {
						spawn_rebels = {
							type = ynn_river_worship_rebels
							size = 4
						}
					}
				}
				10 = {
					random_subject_country = {
						random_owned_province = {
							spawn_rebels = {
								type = ynn_river_worship_rebels
								size = 4
							}
						}
					}
				}
			}
			random_list = {
				10 = {
					random_owned_province = {
						spawn_rebels = {
							type = ynn_river_worship_rebels
							size = 4
						}
					}
				}
				10 = {
					random_subject_country = {
						random_owned_province = {
							spawn_rebels = {
								type = ynn_river_worship_rebels
								size = 4
							}
						}
					}
				}
			}
			random_list = {
				10 = {
					random_owned_province = {
						spawn_rebels = {
							type = ynn_river_worship_rebels
							size = 4
						}
					}
				}
				10 = {
					random_subject_country = {
						random_owned_province = {
							spawn_rebels = {
								type = ynn_river_worship_rebels
								size = 4
							}
						}
					}
				}
			}
		}
	}

	option = {
		name = flavour_brelar.14.b
		ai_chance = {
			factor = 1
		}
		add_country_modifier = {
			name = g27_medium_dt_rzenta
			duration = -1
		}
		rzenta_region = {
			limit = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			random = {
				chance = 50
				spawn_rebels = {
					size = 4
					type = drozma_tur_rebels
				}
			}
		}
		custom_tooltip = g27_yrw_revolt_tt
		hidden_effect = {
			random_list = {
				10 = {
					random_owned_province = {
						spawn_rebels = {
							type = ynn_river_worship_rebels
							size = 4
						}
					}
				}
				10 = {
					random_subject_country = {
						random_owned_province = {
							spawn_rebels = {
								type = ynn_river_worship_rebels
								size = 4
							}
						}
					}
				}
			}
		}
		hidden_effect = {
			random_list = {
				10 = {
					random_owned_province = {
						spawn_rebels = {
							type = ynn_river_worship_rebels
							size = 4
						}
					}
				}
				10 = {
					random_subject_country = {
						random_owned_province = {
							spawn_rebels = {
								type = ynn_river_worship_rebels
								size = 4
							}
						}
					}
				}
			}
		}
	}

	option = {
		name = flavour_brelar.14.c
		ai_chance = {
			factor = 1
		}
		add_country_modifier = {
			name = g27_republic_rzenta
			duration = -1
		}
		rzenta_region = {
			limit = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			spawn_rebels = {
				size = 6
				type = drozma_tur_rebels
			}
		}
		custom_tooltip = g27_yrw_revolt_tt
		hidden_effect = {
			random = {
				chance = 25
				random_list = {
					10 = {
						random_owned_province = {
							spawn_rebels = {
								type = ynn_river_worship_rebels
								size = 4
							}
						}
					}
					10 = {
						random_subject_country = {
							random_owned_province = {
								spawn_rebels = {
									type = ynn_river_worship_rebels
									size = 4
								}
							}
						}
					}
				}
			}
		}
	}
}

#Breluslad training complete
country_event = {
	id = flavour_brelar.15
	title = flavour_brelar.15.t
	desc = flavour_brelar.15.d
	picture = ADVISOR_eventPicture

	is_triggered_only = yes

	hidden = yes

	option = {
		name = flavour_brelar.15.a
		ai_chance = {
			factor = 1
		}
		add_country_modifier = {
			name = g27_endurance_trained
			duration = 3650
		}
	}
}

#Wheels lain with gold
country_event = {
	id = flavour_brelar.16
	title = flavour_brelar.16.t
	desc = flavour_brelar.16.d
	picture = HARBOUR_eventPicture

	is_triggered_only = yes

	option = {
		name = flavour_brelar.16.a
		ai_chance = {
			factor = 1
		}
		2488 = {
			remove_province_modifier = g27_watermill_construction_efforrt
			add_permanent_province_modifier = {
				name = g27_golden_wheels
				duration = -1
			}
		}
	}
}

#Building Unity
country_event = {
	id = flavour_brelar.17
	title = flavour_brelar.17.t
	desc = flavour_brelar.17.d
	picture = CONQUEST_eventPicture

	is_triggered_only = yes

	option = {
		name = flavour_brelar.17.a
		ai_chance = {
			factor = 1
		}
		add_authority = 25
		every_subject_country = {
			limit = {
				is_subject_of_type = ynnic_iosahar
				NOT = {
					tag = U26
				}
			}
			set_country_flag = g27_iosahar_to_annex
		}
		remove_country_modifier = ynn_diplo
		custom_tooltip = g27_may_annex_tt
	}
}


#Village Election
country_event = {
	id = flavour_brelar.18
	title = flavour_brelar.18.t
	desc = flavour_brelar.18.d
	picture = STREET_SPEECH_eventPicture

	is_triggered_only = yes

	option = {
		name = flavour_brelar.18.a
		ai_chance = {
			factor = 1
		}
		add_scaled_republican_tradition = 5
	}
}

#The Proclamation of [GetYear]
country_event = {
	id = flavour_brelar.19
	title = flavour_brelar.19.t
	desc = flavour_brelar.19.d
	picture = STREET_SPEECH_eventPicture

	is_triggered_only = yes
	major = yes

	option = {
		name = flavour_brelar.19.a
		ai_chance = {
			factor = 1
		}
		set_country_flag = g27_breluslad_ideas
		swap_free_idea_group = yes
	}
}

#A Beacon of Equality
country_event = {
	id = flavour_brelar.20
	title = flavour_brelar.20.t
	desc = flavour_brelar.20.d
	picture = ELECTION_REPUBLICAN_eventPicture

	is_triggered_only = yes

	option = {
		name = flavour_brelar.20.a
		ai_chance = {
			factor = 1
		}
		dalaire_region = {
			add_permanent_claim = ROOT
		}
		rzenta_region = {
			add_permanent_claim = ROOT
		}
		broken_isles_region = {
			add_permanent_claim = ROOT
		}
		forest_of_the_cursed_ones_region = {
			add_permanent_claim = ROOT
		}
		add_country_modifier = {
			name = g27_toward_new_heights
			duration = 7300
		}
		if = {
			limit = {
				yrw_has_settled_second_debate_blame_emperors = yes
			}
			every_owned_province = {
				limit = {
					NOT = {
						has_province_modifier = g27_village_officials
					}
				}
				add_province_modifier = {
					name = g27_village_officials
					duration = -1
				}
			}
		}
		else = {
			every_owned_province = {
				limit = {
					NOT = {
						has_province_modifier = g27_organised_representation
					}
				}
				add_province_modifier = {
					name = g27_organised_representation
					duration = -1
				}
			}
		}
	}
}

#modifier stuff 
country_event = {
	id = flavour_brelar.220
	title = flavour_brelar.1.t
	desc = flavour_brelar.1.d
	picture = COURT_eventPicture

	is_triggered_only = yes
	hidden = yes

	option = {
		name = flavour_brelar.1.a
		every_owned_province = {
			limit = {
				NOT = {
					has_province_modifier = g27_village_officials
				}
			}
			add_province_modifier = {
				name = g27_village_officials
				duration = -1
			}
		}
	}
}

#modifier stuff 
country_event = {
	id = flavour_brelar.221
	title = flavour_brelar.1.t
	desc = flavour_brelar.1.d
	picture = COURT_eventPicture

	is_triggered_only = yes
	hidden = yes

	option = {
		name = flavour_brelar.1.a
		every_owned_province = {
			limit = {
				NOT = {
					has_province_modifier = g27_organised_representation
				}
			}
			add_province_modifier = {
				name = g27_organised_representation
				duration = -1
			}
		}
	}
}

#Veliki Breluslad
country_event = {
	id = flavour_brelar.21
	title = flavour_brelar.21.t
	desc = flavour_brelar.21.d
	picture = ELECTION_REPUBLICAN_eventPicture

	is_triggered_only = yes

	option = {
		name = flavour_brelar.21.a
		ai_chance = {
			factor = 1
		}
		add_country_modifier = {
			name = g27_veliki_breluslad
			duration = -1
		}
	}
}

#Buycev Negotiations
country_event = {
	id = flavour_brelar.22
	title = flavour_brelar.22.t
	desc = flavour_brelar.22.d
	picture = NATIVES_eventPicture

	is_triggered_only = yes

	option = {
		name = flavour_brelar.22.a
		ai_chance = {
			factor = 1
		}
		add_country_modifier = {
			name = g27_buycev_appeasement
			duration = -1
		}
	}
}

### Dynasty Events ###

#yen Bacar dynasty
country_event = {
	id = flavour_brelar.23
	title = flavour_brelar.23.t
	desc = flavour_brelar.23.d
	picture = FAR_AND_WIDE_eventPicture

	is_triggered_only = yes

	option = {
		name = flavour_brelar.23.a
		ai_chance = {
			factor = 1
		}
		custom_tooltip = g27_unlock_dynasty_bacar_tt
		set_country_flag = g27_yenbacar_flag
	}
}

#yen Vasonn dynasty
country_event = {
	id = flavour_brelar.24
	title = flavour_brelar.24.t
	desc = flavour_brelar.24.d
	picture = CONQUEST_eventPicture

	is_triggered_only = yes

	option = {
		name = flavour_brelar.24.a
		ai_chance = {
			factor = 1
		}
		custom_tooltip = g27_unlock_dynasty_vasonn_tt
		set_country_flag = g27_yenvasonn_flag
	}
}

#Vyrekynn dynasty
country_event = {
	id = flavour_brelar.25
	title = flavour_brelar.25.t
	desc = flavour_brelar.25.d
	picture = COURT_eventPicture

	is_triggered_only = yes

	option = {
		name = flavour_brelar.25.a
		ai_chance = {
			factor = 1
		}
		custom_tooltip = g27_unlock_dynasty_vyrekynn_tt
		set_country_flag = g27_vyrekynn_flag
	}
}

#yen Stenur dynasty
country_event = {
	id = flavour_brelar.26
	title = flavour_brelar.26.t
	desc = flavour_brelar.26.d
	picture = DIPLOMACY_SIGNING_eventPicture

	is_triggered_only = yes

	option = {
		name = flavour_brelar.26.a
		ai_chance = {
			factor = 1
		}
		custom_tooltip = g27_unlock_dynasty_stenur_tt
		set_country_flag = g27_yenstenur_flag
	}
}

#yen Stantir dynasty
country_event = {
	id = flavour_brelar.27
	title = flavour_brelar.27.t
	desc = flavour_brelar.27.d
	picture = KNIGHTS_eventPicture

	is_triggered_only = yes

	option = {
		name = flavour_brelar.27.a
		ai_chance = {
			factor = 1
		}
		custom_tooltip = g27_unlock_dynasty_stantir_tt
		set_country_flag = g27_yenstantir_flag
	}
}

#yen Brelar dynasty
country_event = {
	id = flavour_brelar.28
	title = flavour_brelar.28.t
	desc = flavour_brelar.28.d
	picture = LIBERUM_VETO_eventPicture

	is_triggered_only = yes

	option = {
		name = flavour_brelar.28.a
		ai_chance = {
			factor = 1
		}
		
		set_dynasty = "yen Brelar"
		if = {
			limit = {
				NOT = {
					ruler_culture = dolindhan
				}
			}
			set_ruler_culture = dolindhan
			clear_fast_ruler_flags = yes
			set_ruler_flag = ruinborn_ruler
		}
		custom_tooltip = g27_unlock_dynasty_brelar_tt
		set_country_flag = g27_yenbrelar_flag
	}
}

## Integrate Drozmasrecat
country_event = {
	id = flavour_brelar.30
	title = flavour_brelar.30.t
	desc = flavour_brelar.30.d
	picture = DEBATE_REPUBLICAN_eventPicture

	is_triggered_only = yes

	option = {
		name = flavour_brelar.30.a
		ai_chance = {
			factor = 1
		}
		custom_tooltip = g27_integrate_rzenta_tt
		hidden_effect = {
			U26 = {
				every_owned_province = {
					add_core = ROOT
					cede_province = ROOT
				}
			}
		}
		add_country_modifier = {
			name = g27_tolerance
			duration = -1
		}
	}

	option = {
		name = flavour_brelar.30.b
		ai_chance = {
			factor = 1
		}
		add_country_modifier = {
			name = g27_tolerance
			duration = -1
		}
	}
}

#Iron Becomes Less Rare in the Ynn
country_event = {
	id = flavour_brelar.31
	title = flavour_brelar.31.t
	desc = flavour_brelar.31.d
	picture = TRADE_GOODS_METALS_AND_MINING_EQUIPENT_eventPicture

	fire_only_once = yes

	trigger = {
		tag = G27
		calc_true_if = {
			amount = 10
			ynn_superregion = {
				type = all
				trade_goods = iron
			}
		}
	}

	mean_time_to_happen = {
		days = 7300
	}

	option = {
		name = flavour_brelar.31.a
		ai_chance = {
			factor = 1
		}
		2838 = {
			remove_province_modifier = g27_argan_mines_2
			add_permanent_province_modifier = {
				name = g27_argan_mines
				duration = -1
			}
		}
	}
}



## Breluslad Invention stuff

#clockwork watermill discovery
country_event = {
	id = flavour_brelar.100
	title = flavour_brelar.100.t
	desc = flavour_brelar.100.d
	picture = SCIENTISTS_eventPicture

	is_triggered_only = yes

	option = {
		name = flavour_brelar.100.a
		ai_chance = {
			factor = 1
		}
		set_country_flag = g27_clockwork_architects_flag
		custom_tooltip = unlock_privilege_estate_artificers_clockwork_architects_tt
	}
}

#riverway discovery
country_event = {
	id = flavour_brelar.101
	title = flavour_brelar.101.t
	desc = flavour_brelar.101.d
	picture = MALAYAN_PORT_eventPicture

	is_triggered_only = yes

	option = {
		name = flavour_brelar.101.a
		ai_chance = {
			factor = 1
		}

	}
}

## Watermill construction 

country_event = {
	id = flavour_brelar.128
	title = flavour_brelar.128.t
	desc = flavour_brelar.128.d
	picture = COURT_eventPicture

	is_triggered_only = yes
	hidden = yes

	option = {
		name = flavour_brelar.128.a
		ai_chance = {
			factor = 1
		}
		country_event = {
			id = flavour_brelar.129
			days = 100
			random = 100
		}
	}
}

#controller for riverways/watermill building
country_event = {
	id = flavour_brelar.129
	title = flavour_brelar.129.t
	desc = flavour_brelar.129.d
	picture = CARDINAL_RICHELIEU_eventPicture

	is_triggered_only = yes
	hidden = yes

	trigger = {
		tag = G27 
		OR = {
			has_country_flag = g27_is_building_watermill
			has_country_flag = g27_building_brelynn
			has_country_flag = g27_building_dalaire
			has_country_flag = g27_building_north_ynn
			has_country_flag = g27_building_rzenta
		}
	}

	immediate = {
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						has_country_flag = g27_building_brelynn
						has_country_flag = g27_building_dalaire
						has_country_flag = g27_building_north_ynn
						has_country_flag = g27_building_rzenta
					}
				}
				set_country_flag = g27_debug_watermill
			}
			else_if = {
				limit = {
					NOT = {
						has_country_flag = g27_is_building_watermill
					}
				}
				set_country_flag = g27_debug_riverway
			}
			else = {
				random_list = {
					1 = {
						trigger = {
							OR = {
								any_owned_province = {
									OR = {
										has_province_modifier = g27_watermill_progress_1
										has_province_modifier = g27_watermill_progress_2
										has_province_modifier = g27_watermill_progress_3
									}
								}
								any_subject_country = {
									any_owned_province = {
										OR = {
											has_province_modifier = g27_watermill_progress_1
											has_province_modifier = g27_watermill_progress_2
											has_province_modifier = g27_watermill_progress_3
										}
									}
								}
							}
						}
						set_country_flag = g27_debug_watermill
					}
					2 = {
						trigger = {
							OR = {
								any_owned_province = {
									OR = {
										has_province_modifier = g27_riverway_progress_1
										has_province_modifier = g27_riverway_progress_2
										has_province_modifier = g27_riverway_progress_3
									}
								}
								any_subject_country = {
									any_owned_province = {
										OR = {
											has_province_modifier = g27_riverway_progress_1
											has_province_modifier = g27_riverway_progress_2
											has_province_modifier = g27_riverway_progress_3
										}
									}
								}
							}
						}
						set_country_flag = g27_debug_riverway
					}
				}
			}
		}
	}

	option = {	#Watermills
		name = flavour_brelar.129.a
		trigger = {
			has_country_flag = g27_debug_watermill
		}
		ai_chance = {
			factor = 1
		}
		random_list = {
			1 = {
				modifier = {
					factor = 1.2
					NOT = {
						has_country_modifier = g27_ease_of_transport
						overlord = {
							has_country_modifier = g27_ease_of_transport
						}
					}
				}
				modifier = {
					factor = 1.2
					NOT = {
						has_country_flag = g27_improved_riverway_building
						overlord = {
							has_country_flag = g27_improved_riverway_building
						}
					}
				}
				modifier = {
					factor = 1.2
					NOT = {
						has_country_flag = g27_more_watermill_funds
					}
				}
				random = {
					chance = 50
					random_owned_province = {
						limit = {
							OR = {
								has_province_modifier = g27_watermill_progress_1
								has_province_modifier = g27_watermill_progress_2
								has_province_modifier = g27_watermill_progress_3
							}
						}
						random_list = {
							1 = {
								province_event = {
									id = flavour_brelar.106
									days = 180
									random = 180
								}
							}
							1 = {
								trigger = {
									NOT = {
										owner = {
											has_country_modifier = g27_watermill_accident
										}
									}
								}
								province_event = {
									id = flavour_brelar.107
									days = 180
									random = 180
								}
							}
							1 = {
								province_event = {
									id = flavour_brelar.1077
									days = 180
									random = 180
								}
							}
						}
					}
				}
			}
			3 = {
				random = {
					chance = 50
					random_owned_province = {
						limit = {
							OR = {
								has_province_modifier = g27_watermill_progress_1
								has_province_modifier = g27_watermill_progress_2
								has_province_modifier = g27_watermill_progress_3
							}
						}
						random_list = {
							1 = {
								province_event = {
									id = flavour_brelar.106
									days = 180
									random = 180
								}
							}
							1 = {
								trigger = {
									NOT = {
										owner = {
											has_country_modifier = g27_watermill_accident
										}
									}
								}
								province_event = {
									id = flavour_brelar.107
									days = 180
									random = 180
								}
							}
							1 = {
								province_event = {
									id = flavour_brelar.1077
									days = 180
									random = 180
								}
							}
						}
					}
				}
				if = {
					limit = {
						any_owned_province = {
							OR = {
								has_province_modifier = g27_watermill_progress_1
								has_province_modifier = g27_watermill_progress_2
								has_province_modifier = g27_watermill_progress_3
							}
						}
						NOT = {
							any_subject_country = {
								any_owned_province = {
									OR = {
										has_province_modifier = g27_watermill_progress_1
										has_province_modifier = g27_watermill_progress_2
										has_province_modifier = g27_watermill_progress_3
									}
								}
							}
						}
					}
					random_owned_province = {
						limit = {
							OR = {
								has_province_modifier = g27_watermill_progress_1
								has_province_modifier = g27_watermill_progress_2
								has_province_modifier = g27_watermill_progress_3
							}
						}
						if = {
							limit = {
								has_province_modifier = g27_watermill_progress_1
							}
							province_event = {
								id = flavour_brelar.103
								days = 365
								random = 365
							}
						}
						else_if = {
							limit = {
								has_province_modifier = g27_watermill_progress_2
							}
							province_event = {
								id = flavour_brelar.104
								days = 365
								random = 365
							}
						}
						else = {
							province_event = {
								id = flavour_brelar.105
								days = 365
								random = 365
							}
						}
					}
				}
				else_if = {
					limit = {
						NOT = {
							any_owned_province = {
								OR = {
									has_province_modifier = g27_watermill_progress_1
									has_province_modifier = g27_watermill_progress_2
									has_province_modifier = g27_watermill_progress_3
								}
							}
						}
						any_subject_country = {
							any_owned_province = {
								OR = {
									has_province_modifier = g27_watermill_progress_1
									has_province_modifier = g27_watermill_progress_2
									has_province_modifier = g27_watermill_progress_3
								}
							}
						}
					}
					random_subject_country = {
						limit = {
							any_owned_province = {
								OR = {
									has_province_modifier = g27_watermill_progress_1
									has_province_modifier = g27_watermill_progress_2
									has_province_modifier = g27_watermill_progress_3
								}
							}
						}
						random_owned_province = {
							limit = {
								OR = {
									has_province_modifier = g27_watermill_progress_1
									has_province_modifier = g27_watermill_progress_2
									has_province_modifier = g27_watermill_progress_3
								}
							}
							if = {
								limit = {
									has_province_modifier = g27_watermill_progress_1
								}
								province_event = {
									id = flavour_brelar.103
									days = 365
									random = 365
								}
							}
							else_if = {
								limit = {
									has_province_modifier = g27_watermill_progress_2
								}
								province_event = {
									id = flavour_brelar.104
									days = 365
									random = 365
								}
							}
							else = {
								province_event = {
									id = flavour_brelar.105
									days = 365
									random = 365
								}
							}
						}
					}
				}
				else = {
					random_list = {
						1 = {
							random_owned_province = {
								limit = {
									OR = {
										has_province_modifier = g27_watermill_progress_1
										has_province_modifier = g27_watermill_progress_2
										has_province_modifier = g27_watermill_progress_3
									}
								}
								if = {
									limit = {
										has_province_modifier = g27_watermill_progress_1
									}
									province_event = {
										id = flavour_brelar.103
										days = 365
										random = 365
									}
								}
								else_if = {
									limit = {
										has_province_modifier = g27_watermill_progress_2
									}
									province_event = {
										id = flavour_brelar.104
										days = 365
										random = 365
									}
								}
								else = {
									province_event = {
										id = flavour_brelar.105
										days = 365
										random = 365
									}
								}
							}
						}
						1 = {
							random_subject_country = {
								limit = {
									any_owned_province = {
										OR = {
											has_province_modifier = g27_watermill_progress_1
											has_province_modifier = g27_watermill_progress_2
											has_province_modifier = g27_watermill_progress_3
										}
									}
								}
								random_owned_province = {
									limit = {
										OR = {
											has_province_modifier = g27_watermill_progress_1
											has_province_modifier = g27_watermill_progress_2
											has_province_modifier = g27_watermill_progress_3
										}
									}
									if = {
										limit = {
											has_province_modifier = g27_watermill_progress_1
										}
										province_event = {
											id = flavour_brelar.103
											days = 365
											random = 365
										}
									}
									else_if = {
										limit = {
											has_province_modifier = g27_watermill_progress_2
										}
										province_event = {
											id = flavour_brelar.104
											days = 365
											random = 365
										}
									}
									else = {
										province_event = {
											id = flavour_brelar.105
											days = 365
											random = 365
										}
									}
								}
							}
						}
					}
				}
			}
		}
		clr_country_flag = g27_debug_watermill
		clr_country_flag = g27_debug_riverway
	}

	option = {	#Riverways
		name = flavour_brelar.129.b
		trigger = {
			OR = {
				any_owned_province = {
					OR = {
						has_province_modifier = g27_riverway_progress_1
						has_province_modifier = g27_riverway_progress_2
						has_province_modifier = g27_riverway_progress_3
					}
				}
				any_subject_country = {
					any_owned_province = {
						OR = {
							has_province_modifier = g27_riverway_progress_1
							has_province_modifier = g27_riverway_progress_2
							has_province_modifier = g27_riverway_progress_3
						}
					}
				}
			}
			has_country_flag = g27_debug_riverway
		}
		ai_chance = {
			factor = 1
		}
		random_list = {
			2 = {
				modifier = {
					factor = 2
					NOT = {
						has_country_modifier = g27_ease_of_transport
						overlord = {
							has_country_modifier = g27_ease_of_transport
						}
					}
				}
				modifier = {
					factor = 2
					NOT = {
						has_country_flag = g27_improved_riverway_building
						overlord = {
							has_country_flag = g27_improved_riverway_building
						}
					}
				}
			}
			10 = {
				random = {
					chance = 50
					random_owned_province = {
						limit = {
							OR = {
								has_province_modifier = g27_riverway_progress_1
								has_province_modifier = g27_riverway_progress_2
								has_province_modifier = g27_riverway_progress_3
							}
						}
						random_list = {
							1 = {
								province_event = {
									id = flavour_brelar.113
									days = 180
									random = 180
								}
							}
							1 = {
								trigger = {
									owner = {
										OR = {
											has_country_flag = g27_building_rzenta
											overlord = {
												has_country_flag = g27_building_rzenta
											}
										}
									}
								}
								province_event = {
									id = flavour_brelar.114
									days = 180
									random = 180
								}
							}
							1 = {
								trigger = {
									owner = {
										any_owned_province = {
											OR = {
												has_province_modifier = ravelian_lodge
												has_province_modifier = ravelian_society
												religion = ravelian
											}
										}
									}
								}
								province_event = {
									id = flavour_brelar.116
									days = 180
									random = 180
								}
							}
						}
					}
				}
				if = {
					limit = {
						any_owned_province = {
							OR = {
								has_province_modifier = g27_riverway_progress_1
								has_province_modifier = g27_riverway_progress_2
								has_province_modifier = g27_riverway_progress_3
							}
						}
						NOT = {
							any_subject_country = {
								any_owned_province = {
									OR = {
										has_province_modifier = g27_riverway_progress_1
										has_province_modifier = g27_riverway_progress_2
										has_province_modifier = g27_riverway_progress_3
									}
								}
							}
						}
					}
					random_owned_province = {
						limit = {
							OR = {
								has_province_modifier = g27_riverway_progress_1
								has_province_modifier = g27_riverway_progress_2
								has_province_modifier = g27_riverway_progress_3
							}
						}
						if = {
							limit = {
								has_province_modifier = g27_riverway_progress_1
							}
							province_event = {
								id = flavour_brelar.109
								days = 365
								random = 365
							}
						}
						else_if = {
							limit = {
								has_province_modifier = g27_riverway_progress_2
							}
							province_event = {
								id = flavour_brelar.110
								days = 365
								random = 365
							}
						}
						else = {
							province_event = {
								id = flavour_brelar.111
								days = 365
								random = 365
							}
						}
					}
				}
				else_if = {
					limit = {
						NOT = {
							any_owned_province = {
								OR = {
									has_province_modifier = g27_riverway_progress_1
									has_province_modifier = g27_riverway_progress_2
									has_province_modifier = g27_riverway_progress_3
								}
							}
						}
						any_subject_country = {
							any_owned_province = {
								OR = {
									has_province_modifier = g27_riverway_progress_1
									has_province_modifier = g27_riverway_progress_2
									has_province_modifier = g27_riverway_progress_3
								}
							}
						}
					}
					random_subject_country = {
						limit = {
							any_owned_province = {
								OR = {
									has_province_modifier = g27_riverway_progress_1
									has_province_modifier = g27_riverway_progress_2
									has_province_modifier = g27_riverway_progress_3
								}
							}
						}
						random_owned_province = {
							limit = {
								OR = {
									has_province_modifier = g27_riverway_progress_1
									has_province_modifier = g27_riverway_progress_2
									has_province_modifier = g27_riverway_progress_3
								}
							}
							if = {
								limit = {
									has_province_modifier = g27_riverway_progress_1
								}
								province_event = {
									id = flavour_brelar.109
									days = 365
									random = 365
								}
							}
							else_if = {
								limit = {
									has_province_modifier = g27_riverway_progress_2
								}
								province_event = {
									id = flavour_brelar.110
									days = 365
									random = 365
								}
							}
							else = {
								province_event = {
									id = flavour_brelar.111
									days = 365
									random = 365
								}
							}
						}
					}
				}
				else = {
					random_list = {
						1 = {
							random_owned_province = {
								limit = {
									OR = {
										has_province_modifier = g27_riverway_progress_1
										has_province_modifier = g27_riverway_progress_2
										has_province_modifier = g27_riverway_progress_3
									}
								}
								if = {
									limit = {
										has_province_modifier = g27_riverway_progress_1
									}
									province_event = {
										id = flavour_brelar.109
										days = 365
										random = 365
									}
								}
								else_if = {
									limit = {
										has_province_modifier = g27_riverway_progress_2
									}
									province_event = {
										id = flavour_brelar.110
										days = 365
										random = 365
									}
								}
								else = {
									province_event = {
										id = flavour_brelar.111
										days = 365
										random = 365
									}
								}
							}
						}
						1 = {
							random_subject_country = {
								limit = {
									any_owned_province = {
										OR = {
											has_province_modifier = g27_riverway_progress_1
											has_province_modifier = g27_riverway_progress_2
											has_province_modifier = g27_riverway_progress_3
										}
									}
								}
								random_owned_province = {
									limit = {
										OR = {
											has_province_modifier = g27_riverway_progress_1
											has_province_modifier = g27_riverway_progress_2
											has_province_modifier = g27_riverway_progress_3
										}
									}
									if = {
										limit = {
											has_province_modifier = g27_riverway_progress_1
										}
										province_event = {
											id = flavour_brelar.109
											days = 365
											random = 365
										}
									}
									else_if = {
										limit = {
											has_province_modifier = g27_riverway_progress_2
										}
										province_event = {
											id = flavour_brelar.110
											days = 365
											random = 365
										}
									}
									else = {
										province_event = {
											id = flavour_brelar.111
											days = 365
											random = 365
										}
									}
								}
							}
						}
					}
				}
			}
		}
		clr_country_flag = g27_debug_watermill
		clr_country_flag = g27_debug_riverway
	}

	after = {
		clr_country_flag = g27_debug_watermill
		clr_country_flag = g27_debug_riverway
	}
}

#controller choice thing
country_event = {
	id = flavour_brelar.102
	title = flavour_brelar.102.t
	desc = flavour_brelar.102.desc
	picture = CITY_DEVELOPMENT_eventPicture

	is_triggered_only = yes

	option = {
		name = flavour_brelar.102.a
		trigger = {
			2488 = {
				NOT = {
					has_province_flag = g27_province_is_building_or_has_watermill
				}
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		ai_chance = {
			factor = 1
		}
		2488 = {
			set_province_flag = g27_province_is_building_or_has_watermill
			add_province_modifier = {
				name = g27_watermill_progress_1
				duration = -1
			}
		}
		set_country_flag = g27_is_building_watermill
	}

	option = {
		name = flavour_brelar.102.b
		trigger = {
			1165 = {
				NOT = {
					has_province_flag = g27_province_is_building_or_has_watermill
				}
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		ai_chance = {
			factor = 1
		}
		1165 = {
			set_province_flag = g27_province_is_building_or_has_watermill
			add_province_modifier = {
				name = g27_watermill_progress_1
				duration = -1
			}
		}
		set_country_flag = g27_is_building_watermill
	}

	option = {
		name = flavour_brelar.102.c
		trigger = {
			1186 = {
				NOT = {
					has_province_flag = g27_province_is_building_or_has_watermill
				}
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		ai_chance = {
			factor = 1
		}
		1186 = {
			set_province_flag = g27_province_is_building_or_has_watermill
			add_province_modifier = {
				name = g27_watermill_progress_1
				duration = -1
			}
		}
		set_country_flag = g27_is_building_watermill
	}

	option = {
		name = flavour_brelar.102.d
		trigger = {
			1191 = {
				NOT = {
					has_province_flag = g27_province_is_building_or_has_watermill
				}
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		ai_chance = {
			factor = 1
		}
		1191 = {
			set_province_flag = g27_province_is_building_or_has_watermill
			add_province_modifier = {
				name = g27_watermill_progress_1
				duration = -1
			}
		}
		set_country_flag = g27_is_building_watermill
	}

	option = {
		name = flavour_brelar.102.e
		trigger = {
			1183 = {
				NOT = {
					has_province_flag = g27_province_is_building_or_has_watermill
				}
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		ai_chance = {
			factor = 1
		}
		1183 = {
			set_province_flag = g27_province_is_building_or_has_watermill
			add_province_modifier = {
				name = g27_watermill_progress_1
				duration = -1
			}
		}
		set_country_flag = g27_is_building_watermill
	}

	option = {
		name = flavour_brelar.102.f
		trigger = {
			1211 = {
				NOT = {
					has_province_flag = g27_province_is_building_or_has_watermill
				}
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		ai_chance = {
			factor = 1
		}
		1211 = {
			set_province_flag = g27_province_is_building_or_has_watermill
			add_province_modifier = {
				name = g27_watermill_progress_1
				duration = -1
			}
		}
		set_country_flag = g27_is_building_watermill
	}

	option = {
		name = flavour_brelar.102.g
		ai_chance = {
			factor = 1
		}
		add_treasury = 1000
		if = {
			limit = {
				has_country_flag = g27_advisor_adm_scam_flag
			}
			add_adm_power = 100
			clr_country_flag = g27_advisor_adm_scam_flag
		}
		else = {
			add_adm_power = 200
		}
		artifice_remove_10 = yes
		hidden_effect = {
			clr_country_flag = g27_advisor_adm_scam_flag
		}
	}

	after = {
		hidden_effect = {
			clr_country_flag = watermill_menu_open
		}
	}
}

#progress event 1
province_event = {
	id = flavour_brelar.103
	title = flavour_brelar.103.t
	desc = flavour_brelar.103.d
	picture = CITY_DEVELOPMENT_eventPicture

	is_triggered_only = yes

	trigger = {
		has_province_modifier = g27_watermill_progress_1
	}

	option = {
		name = flavour_brelar.103.a
		ai_chance = {
			factor = 1
		}
		remove_province_modifier = g27_watermill_progress_1
		add_province_modifier = {
			name = g27_watermill_progress_2
			duration = -1
		}
		random = {
			chance = 50
			add_base_production = 1
		}
	}
}


#progress event 2
province_event = {
	id = flavour_brelar.104
	title = flavour_brelar.104.t
	desc = flavour_brelar.104.d
	picture = CITY_DEVELOPMENT_eventPicture

	is_triggered_only = yes

	trigger = {
		has_province_modifier = g27_watermill_progress_2
	}

	option = {
		name = flavour_brelar.104.a
		ai_chance = {
			factor = 1
		}
		remove_province_modifier = g27_watermill_progress_2
		add_province_modifier = {
			name = g27_watermill_progress_3
			duration = -1
		}
		random = {
			chance = 50
			add_base_production = 1
		}
		random = {
			chance = 50
			add_base_tax = 1
		}
	}
}


#completion event
province_event = {
	id = flavour_brelar.105
	title = flavour_brelar.105.t
	desc = flavour_brelar.105.d
	picture = CITY_DEVELOPMENT_eventPicture

	is_triggered_only = yes

	trigger = {
		has_province_modifier = g27_watermill_progress_3
	}

	option = {
		name = flavour_brelar.105.a
		ai_chance = {
			factor = 1
		}
		remove_province_modifier = g27_watermill_progress_3
		add_province_modifier = {
			name = g27_clockwork_watermill
			duration = -1
		}
		add_base_production = 2
		add_base_tax = 2
		owner = {
			artifice_remove_10 = yes
			hidden_effect = {
				subtract_variable = {
					which = g27watermillupkeep
					value = 10
				}
			}
			clr_country_flag = g27_more_watermill_funds
			if = {
				limit = {
					NOT = {
						any_owned_province = {
							OR = {
								has_province_modifier = g27_watermill_progress_1
								has_province_modifier = g27_watermill_progress_2
								has_province_modifier = g27_watermill_progress_3
							}
						}
					}
				}
				clr_country_flag = g27_is_building_watermill
			}
		}
	}
}

#needs more funding
province_event = {
	id = flavour_brelar.106
	title = flavour_brelar.106.t
	desc = flavour_brelar.106.d
	picture = BANKRUPTCY_eventPicture

	is_triggered_only = yes

	trigger = {
		OR = {
			has_province_modifier = g27_watermill_progress_1
			has_province_modifier = g27_watermill_progress_2
			has_province_modifier = g27_watermill_progress_3
		}
	}

	option = {
		name = flavour_brelar.106.a
		ai_chance = {
			factor = 1
		}
		owner = {
			add_treasury = -100
			set_country_flag = g27_more_watermill_funds
		}
	}
}

#shit breaks
province_event = {
	id = flavour_brelar.107
	title = flavour_brelar.107.t
	desc = flavour_brelar.107.d
	picture = BANKRUPTCY_eventPicture

	is_triggered_only = yes

	trigger = {
		OR = {
			has_province_modifier = g27_watermill_progress_1
			has_province_modifier = g27_watermill_progress_2
			has_province_modifier = g27_watermill_progress_3
		}
		NOT = {
			owner = {
				has_country_modifier = g27_watermill_accident
			}
		}
	}

	option = {
		name = flavour_brelar.106.a
		ai_chance = {
			factor = 1
		}
		owner = {
			add_stability = -1
			add_country_modifier = {
				name = g27_watermill_accident
				duration = 7300
			}
		}
	}
}

#building is going good
province_event = {
	id = flavour_brelar.1077
	title = flavour_brelar.1077.t
	desc = flavour_brelar.1077.d
	picture = BANKRUPTCY_eventPicture

	is_triggered_only = yes

	trigger = {
		OR = {
			has_province_modifier = g27_watermill_progress_1
			has_province_modifier = g27_watermill_progress_2
			has_province_modifier = g27_watermill_progress_3
		}
	}

	option = {
		name = flavour_brelar.1077.a
		ai_chance = {
			factor = 1
		}
		owner = {
			add_stability_or_adm_power = yes
			add_prestige_excess_to_splendour_effect = {
				VAL = 10
			}
		}
		hidden_effect = {
			if = {
				limit = {
					has_province_modifier = g27_watermill_progress_1
				}
				random = {
					chance = 50
					province_event = {
						id = flavour_brelar.103
						days = 300
						random = 60
					}
				}
			}
			else_if = {
				limit = {
					has_province_modifier = g27_watermill_progress_2
				}
				random = {
					chance = 50
					province_event = {
						id = flavour_brelar.104
						days = 300
						random = 60
					}
				}
			}
			else = {
				random = {
					chance = 50
					province_event = {
						id = flavour_brelar.105
						days = 300
						random = 60
					}
				}
			}
		}
	}
}

## Riverway construction

#controller choice friends woooo
country_event = {
	id = flavour_brelar.108
	title = flavour_brelar.108.t
	desc = flavour_brelar.108.desc
	picture = CITY_DEVELOPMENT_eventPicture

	is_triggered_only = yes

	option = {
		name = flavour_brelar.108.a
		trigger = {
			has_country_flag = g27_brelynn_available
		}
		ai_chance = {
			factor = 1
		}
		set_country_flag = g27_building_brelynn
		brelynn_riverway = {
			if = {
				limit = {
					NOT = {
						has_province_modifier = g27_riverway_modifier
					}
				}
				add_province_modifier = {
					name = g27_riverway_progress_1
					duration = -1
				}
			}
		}
	}

	option = {
		name = flavour_brelar.108.b
		trigger = {
			has_country_flag = g27_rzenta_available
		}
		ai_chance = {
			factor = 1
		}
		set_country_flag = g27_building_rzenta
		rzenta_riverway = {
			if = {
				limit = {
					NOT = {
						has_province_modifier = g27_riverway_modifier
					}
				}
				add_province_modifier = {
					name = g27_riverway_progress_1
					duration = -1
				}
			}
		}
	}

	option = {
		name = flavour_brelar.108.c
		trigger = {
			has_country_flag = g27_dalaire_available
		}
		ai_chance = {
			factor = 1
		}
		set_country_flag = g27_building_dalaire
		dalaire_riverway = {
			if = {
				limit = {
					NOT = {
						has_province_modifier = g27_riverway_modifier
					}
				}
				add_province_modifier = {
					name = g27_riverway_progress_1
					duration = -1
				}
			}
		}
	}

	option = {
		name = flavour_brelar.108.d
		trigger = {
			has_country_flag = g27_north_ynn_available
		}
		ai_chance = {
			factor = 1
		}
		set_country_flag = g27_building_north_ynn
		north_ynn_riverway = {
			if = {
				limit = {
					NOT = {
						has_province_modifier = g27_riverway_modifier
					}
				}
				add_province_modifier = {
					name = g27_riverway_progress_1
					duration = -1
				}
			}
		}
	}

	option = {
		name = flavour_brelar.108.e
		ai_chance = {
			factor = 1
		}
		add_treasury = 10000
		if = {
			limit = {
				has_country_flag = g27_advisor_adm_scam_flag
			}
			add_adm_power = 150
			clr_country_flag = g27_advisor_adm_scam_flag
		}
		else = {
			add_adm_power = 300
		}
		artifice_remove_30 = yes
		clr_country_flag = g27_brelynn_available
		clr_country_flag = g27_dalaire_available
		clr_country_flag = g27_north_ynn_available
		clr_country_flag = g27_rzenta_available
		clr_country_flag = g27_building_rzenta
		clr_country_flag = g27_building_north_ynn
		clr_country_flag = g27_building_brelynn
		clr_country_flag = g27_building_dalaire
		clr_country_flag = g27_finished_brelynn
		clr_country_flag = g27_finished_dalaire
		clr_country_flag = g27_finished_north_ynn
		clr_country_flag = g27_finished_rzenta
	}

	after = {
		hidden_effect = {
			clr_country_flag = riverways_menu_open
		}
	}
}

#progress event 1
province_event = {
	id = flavour_brelar.109
	title = flavour_brelar.109.t
	desc = flavour_brelar.109.d
	picture = CITY_DEVELOPMENT_eventPicture

	is_triggered_only = yes

	trigger = {
		has_province_modifier = g27_riverway_progress_1
	}

	option = {
		name = flavour_brelar.109.a
		ai_chance = {
			factor = 1
		}
		remove_province_modifier = g27_riverway_progress_1
		add_province_modifier = {
			name = g27_riverway_progress_2
			duration = -1
		}
		random = {
			chance = 50
			add_random_development = 1
		}
	}
}


#progress event 2
province_event = {
	id = flavour_brelar.110
	title = flavour_brelar.110.t
	desc = flavour_brelar.110.d
	picture = CITY_DEVELOPMENT_eventPicture

	is_triggered_only = yes

	trigger = {
		has_province_modifier = g27_riverway_progress_2
	}

	option = {
		name = flavour_brelar.110.a
		ai_chance = {
			factor = 1
		}
		remove_province_modifier = g27_riverway_progress_2
		add_province_modifier = {
			name = g27_riverway_progress_3
			duration = -1
		}
		random = {
			chance = 75
			add_random_development = 1
			owner = {
				add_prestige_excess_to_splendour_effect = {
					VAL = 5
				}
			}
		}
	}
}


#completion event
province_event = {
	id = flavour_brelar.111
	title = flavour_brelar.111.t
	desc = flavour_brelar.111.d
	picture = CITY_DEVELOPMENT_eventPicture

	is_triggered_only = yes

	trigger = {
		has_province_modifier = g27_riverway_progress_3
	}

	option = {
		name = flavour_brelar.111.a
		ai_chance = {
			factor = 1
		}
		remove_province_modifier = g27_riverway_progress_3
		clr_province_flag = g27_riverway_funds
		owner = {
			hidden_effect = {
				if = {
					limit = {
						has_country_flag = g27_building_brelynn
					}
					if = {
						limit = {
							brelynn_riverway = {
								type = all
								NOT = {
									has_province_modifier = g27_riverway_progress_3
								}
							}
						}
						clr_country_flag = g27_building_brelynn
						set_country_flag = g27_finished_brelynn
						country_event = {
							id = flavour_brelar.112
							days = 5
						}
					}
				}
				else_if = {
					limit = {
						has_country_flag = g27_building_rzenta
					}
					if = {
						limit = {
							rzenta_riverway = {
								type = all
								NOT = {
									has_province_modifier = g27_riverway_progress_3
								}
							}
						}
						clr_country_flag = g27_building_rzenta 
						set_country_flag = g27_finished_rzenta
						country_event = {
							id = flavour_brelar.112
							days = 5
						}
					}
				}
				else_if = {
					limit = {
						has_country_flag = g27_building_dalaire
					}
					if = {
						limit = {
							dalaire_riverway = {
								type = all
								NOT = {
									has_province_modifier = g27_riverway_progress_3
								}
							}
						}
						clr_country_flag = g27_building_dalaire
						set_country_flag = g27_finished_dalaire
						country_event = {
							id = flavour_brelar.112
							days = 5
						}
					}
				}
				else = {
					if = {
						limit = {
							north_ynn_riverway= {
								type = all
								NOT = {
									has_province_modifier = g27_riverway_progress_3
								}
							}
						}
						clr_country_flag = g27_building_north_ynn
						set_country_flag = g27_finished_north_ynn
						country_event = {
							id = flavour_brelar.112
							days = 5
						}
					}
				}
			}
		}
	}
}

#THE RIVERWAY IS COMPLETE
country_event = {
	id = flavour_brelar.112
	title = flavour_brelar.112.t
	desc = flavour_brelar.112.desc
	picture = FAR_AND_WIDE_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			subtract_variable = {
				which = g27riverwayupkeep
				value = 30
			}
		}
	}

	option = {
		name = flavour_brelar.112.a
		trigger = {
			has_country_flag = g27_finished_brelynn
		}
		ai_chance = {
			factor = 1
		}
		add_splendor = 100
		artifice_remove_30 = yes
		set_country_flag = g27_brelynn_riverway
		brelynn_riverway = {
			add_province_triggered_modifier = g27_riverway_modifier
		}

		clr_country_flag = g27_brelynn_available
		clr_country_flag = g27_dalaire_available
		clr_country_flag = g27_north_ynn_available
		clr_country_flag = g27_rzenta_available
		clr_country_flag = g27_building_rzenta
		clr_country_flag = g27_building_north_ynn
		clr_country_flag = g27_building_brelynn
		clr_country_flag = g27_building_dalaire
		clr_country_flag = g27_finished_brelynn
		clr_country_flag = g27_finished_dalaire
		clr_country_flag = g27_finished_north_ynn
		clr_country_flag = g27_finished_rzenta
	}

	option = {
		name = flavour_brelar.112.b
		trigger = {
			has_country_flag = g27_finished_rzenta
		}
		ai_chance = {
			factor = 1
		}
		add_splendor = 100
		artifice_remove_30 = yes
		set_country_flag = g27_rzenta_riverway
		rzenta_riverway = {
			add_province_triggered_modifier = g27_riverway_modifier
		}

		clr_country_flag = g27_brelynn_available
		clr_country_flag = g27_dalaire_available
		clr_country_flag = g27_north_ynn_available
		clr_country_flag = g27_rzenta_available
		clr_country_flag = g27_building_rzenta
		clr_country_flag = g27_building_north_ynn
		clr_country_flag = g27_building_brelynn
		clr_country_flag = g27_building_dalaire
		clr_country_flag = g27_finished_brelynn
		clr_country_flag = g27_finished_dalaire
		clr_country_flag = g27_finished_north_ynn
		clr_country_flag = g27_finished_rzenta
	}

	option = {
		name = flavour_brelar.112.c
		trigger = {
			has_country_flag = g27_finished_dalaire
		}
		ai_chance = {
			factor = 1
		}
		add_splendor = 100
		artifice_remove_30 = yes
		set_country_flag = g27_dalaire_riverway
		dalaire_riverway = {
			add_province_triggered_modifier = g27_riverway_modifier
		}

		clr_country_flag = g27_brelynn_available
		clr_country_flag = g27_dalaire_available
		clr_country_flag = g27_north_ynn_available
		clr_country_flag = g27_rzenta_available
		clr_country_flag = g27_building_rzenta
		clr_country_flag = g27_building_north_ynn
		clr_country_flag = g27_building_brelynn
		clr_country_flag = g27_building_dalaire
		clr_country_flag = g27_finished_brelynn
		clr_country_flag = g27_finished_dalaire
		clr_country_flag = g27_finished_north_ynn
		clr_country_flag = g27_finished_rzenta
	}

	option = {
		name = flavour_brelar.112.d
		trigger = {
			has_country_flag = g27_finished_north_ynn
		}
		ai_chance = {
			factor = 1
		}
		add_splendor = 100
		artifice_remove_30 = yes
		set_country_flag = g27_north_ynnic_riverway
		north_ynn_riverway = {
			add_province_triggered_modifier = g27_riverway_modifier
		}

		clr_country_flag = g27_brelynn_available
		clr_country_flag = g27_dalaire_available
		clr_country_flag = g27_north_ynn_available
		clr_country_flag = g27_rzenta_available
		clr_country_flag = g27_building_rzenta
		clr_country_flag = g27_building_north_ynn
		clr_country_flag = g27_building_brelynn
		clr_country_flag = g27_building_dalaire
		clr_country_flag = g27_finished_brelynn
		clr_country_flag = g27_finished_dalaire
		clr_country_flag = g27_finished_north_ynn
		clr_country_flag = g27_finished_rzenta
	}
}

#riverway needs more funds
province_event = {
	id = flavour_brelar.113
	title = flavour_brelar.113.t
	desc = flavour_brelar.113.d
	picture = BANKRUPTCY_eventPicture

	is_triggered_only = yes

	trigger = {
		OR = {
			has_province_modifier = g27_riverway_progress_1
			has_province_modifier = g27_riverway_progress_2
			has_province_modifier = g27_riverway_progress_3
		}
	}

	option = {
		name = flavour_brelar.113.a
		ai_chance = {
			factor = 1
		}
		owner = {
			add_treasury = -50
		}
		set_province_flag = g27_riverway_funds
	}
}

#rzenta has mountains yo
province_event = {
	id = flavour_brelar.114
	title = flavour_brelar.114.t
	desc = flavour_brelar.114.d
	picture = WHITE_MOUNTAIN_eventPicture

	is_triggered_only = yes

	trigger = {
		OR = {
			has_province_modifier = g27_riverway_progress_1
			has_province_modifier = g27_riverway_progress_2
			has_province_modifier = g27_riverway_progress_3
		}
		owner = {
			OR = {
				has_country_flag = g27_building_rzenta
				overlord = {
					has_country_flag = g27_building_rzenta
				}
			}
		}
	}

	option = {
		name = flavour_brelar.114.a
		ai_chance = {
			factor = 1
		}
		save_event_target_as = g27_mountain_riverway_prov
		owner = {
			if = {
				limit = {
					has_country_flag = g27_building_rzenta
				}
				add_adm_power = -50
				ROOT = {
					set_province_flag = g27_mountain_riverway
				}
			}
			else = {
				overlord = {
					country_event = {
						id = flavour_brelar.115
					}
				}
			}
		}
	}
}

#subject asks for help with mountain building
country_event = {
	id = flavour_brelar.115
	title = flavour_brelar.115.t
	desc = flavour_brelar.115.d
	picture = WHITE_MOUNTAIN_eventPicture

	is_triggered_only = yes

	option = {
		name = flavour_brelar.115.a
		ai_chance = {
			factor = 1
		}
		add_adm_power = -50
		event_target:g27_mountain_riverway_prov = {
			set_province_flag = g27_mountain_riverway
		}
		remove_country_modifier = ynn_diplo
	}
}

#Ravelians help build riverway
province_event = {
	id = flavour_brelar.116
	title = flavour_brelar.116.t
	desc = flavour_brelar.116.d
	picture = ADVISOR_eventPicture

	is_triggered_only = yes

	trigger = {
		owner = {
			any_owned_province = {
				OR = {
					has_province_modifier = ravelian_lodge
					has_province_modifier = ravelian_society
					religion = ravelian
				}
			}
		}
		OR = {
			has_province_modifier = g27_riverway_progress_1
			has_province_modifier = g27_riverway_progress_2
			has_province_modifier = g27_riverway_progress_3
		}
	}

	option = {
		name = flavour_brelar.116.a
		ai_chance = {
			factor = 1
		}
		if = {
			limit = {
				has_province_modifier = g27_riverway_progress_1
			}
			province_event = {
				id = flavour_brelar.109
				days = 300
				random = 65
			}
		}
		else_if = {
			limit = {
				has_province_modifier = g27_riverway_progress_2
			}
			province_event = {
				id = flavour_brelar.110
				days = 300
				random = 65
			}
		}
		else = {
			province_event = {
				id = flavour_brelar.111
				days = 300
				random = 65
			}
		}
	}
}

### BReluslad RAVeliIandsdsfbnadsfgknfbdsi

#controller
country_event = {
	id = flavour_brelar.169
	title = flavour_brelar.169.t
	desc = flavour_brelar.169.d
	picture = COURT_eventPicture

	is_triggered_only = yes
	hidden = yes

	trigger = {
		has_country_flag = g27_ravelians_here_flag
	}

	option = {
		name = flavour_brelar.169.a
		ai_chance = {
			factor = 1
		}
		random_list = {
			50 = {
				random_list = {
					10 = {
						trigger = {
							any_owned_province = {
								NOT = {
									has_province_modifier = ravelian_society
									has_province_modifier = ravelian_lodge
									religion = ravelian
								}
							}
						}
						random_owned_province = {
							limit = {
								NOT = {
									has_province_modifier = ravelian_lodge
									has_province_modifier = ravelian_society
									religion = ravelian
								}
							}
							province_event = {
								id = flavour_brelar.151
								days = 100
								random = 100
							}
						}
					}
					5 = {
						trigger = {
							any_owned_province = {
								OR = {
									province_id = 2488
									development = 30
								}
								NOT = {
									has_building = university
								}
							}
						}
						random_owned_province = {
							limit = {
								OR = {
									province_id = 2488
									development = 30
								}
								NOT = {
									has_building = university
								}
							}
							province_event = {
								id = flavour_brelar.152
								days = 100
								random = 100
							}
						}
					}
					5 = {
						trigger = {
							any_owned_province = {
								NOT = {
									has_manufactory_trigger = yes
								}
								num_free_building_slots = 1
							}
						}
						random_owned_province = {
							limit = {
								NOT = {
									has_manufactory_trigger = yes
								}
								num_free_building_slots = 1
							}
							province_event = {
								id = flavour_brelar.153
								days = 100
								random = 100
							}
						}
					}
					10 = {
						trigger = {
							any_owned_province = {
								culture = brelari
								NOT = {
									has_province_modifier = ravelian_society
									has_province_modifier = ravelian_lodge
									religion = ravelian
								}
							}
						}
						random_owned_province = {
							limit = {
								culture = brelari
								NOT = {
									has_province_modifier = ravelian_society
									has_province_modifier = ravelian_lodge
									religion = ravelian
								}
							}
							province_event = {
								id = flavour_brelar.154
								days = 100
								random = 100
							}
						}
					}
					10 = {
						trigger = {
							any_owned_province = {
								culture = brelari
								NOT = {
									region = dolindha_region
									has_province_modifier = ravelian_society
									has_province_modifier = ravelian_lodge
									religion = ravelian
								}
							}
						}
						random_owned_province = {
							limit = {
								culture = brelari
								NOT = {
									region = dolindha_region
									has_province_modifier = ravelian_society
									has_province_modifier = ravelian_lodge
									religion = ravelian
								}
							}
							province_event = {
								id = flavour_brelar.155
								days = 100
								random = 100
							}
						}
					}
					5 = {
						trigger = {
							OR = {
								num_of_owned_provinces_with = {
									value = 10
									religion = ravelian
								}
								mission_completed = g27_combine_ingenuities
							}
							NOT = {
								has_country_flag = yrw_4b
								has_country_flag = yrw_4b_reform
								religion = ravelian
							}
						}
						country_event = {
							id = flavour_brelar.156
							days = 100
							random = 100
						}
					}
				}
			}
			25 = {
				#noffing
			}
		}
	}
}

#initial gang shows up in arvestva
country_event = {
	id = flavour_brelar.150
	desc = flavour_brelar.150.d
	title = flavour_brelar.150.t
	picture = HARBOUR_eventPicture

	mean_time_to_happen = {
		days = 2400
		modifier = {
			factor = 0.5
			mission_completed = g27_contacts_across_sea
		}
	}

	fire_only_once = yes

	trigger = {
		has_country_flag = g27_breluslad_flag
		1746 = {
			country_or_non_sovereign_subject_holds = ROOT
		}
		europe = {
			owner = {
				OR = {
					has_discovered = 1746
					any_known_country = {
						has_country_flag = g27_breluslad_flag
					}
				}
				any_owned_province = {
					OR = {
						has_province_modifier = ravelian_lodge
						has_province_modifier = ravelian_society
						religion = ravelian
					}
				}
			}
		}
	}

	option = {
		name = flavour_brelar.150.a
		ai_chance = {
			factor = 1
		}
		set_country_flag = g27_ravelians_here_flag
		1746 = {
			add_province_modifier = {
				name = ravelian_society
				duration = -1
			}
		}
	}
}

#Ravelians spread in brelar
province_event = {
	id = flavour_brelar.151
	title = flavour_brelar.151.t
	desc = flavour_brelar.151.d
	picture = ROYAL_SOCIETY_eventPicture

	is_triggered_only = yes

	trigger = {
		owner = {
			has_country_flag = g27_breluslad_flag
			has_country_flag = g27_ravelians_here_flag
		}
		NOT = {
			has_province_modifier = ravelian_society
			has_province_modifier = ravelian_lodge
			religion = ravelian
		}
	}

	option = {
		name = flavour_brelar.151.a
		ai_chance = {
			factor = 1
		}
		add_province_modifier = {
			name = ravelian_society
			duration = -1
		}
	}
}

#Ravelians aid the state in building a university
province_event = {
	id = flavour_brelar.152
	title = flavour_brelar.152.t
	desc = flavour_brelar.152.d
	picture = UNIVERSITY_eventPicture

	is_triggered_only = yes

	trigger = {
		owner = {
			has_country_flag = g27_breluslad_flag
			has_country_flag = g27_ravelians_here_flag
		}
		OR = {
			province_id = 2488
			development = 30
		}
		NOT = {
			has_building = university
		}
	}

	option = {
		name = flavour_brelar.152.a
		ai_chance = {
			factor = 1
		}
		add_building_construction = {
			building = university
			cost = 0.75
		}
	}
}


#Ravelians help build a manufactury
province_event = {
	id = flavour_brelar.153
	title = flavour_brelar.153.t
	desc = flavour_brelar.153.d
	picture = TRADE_GOODS_METALS_AND_MINING_EQUIPENT_eventPicture

	is_triggered_only = yes

	trigger = {
		owner = {
			has_country_flag = g27_breluslad_flag
			has_country_flag = g27_ravelians_here_flag
		}
		NOT = {
			has_manufactory_trigger = yes
			trade_goods = gold
		}
		num_free_building_slots = 1
	}

	option = {
		name = flavour_brelar.153.a
		ai_chance = {
			factor = 1
		}
		owner = {
			add_treasury = -250
		}
		add_manufactory = yes
		if = {
			limit = {
				is_religion_enabled = ravelian
				NOT = {
					owner = {
						OR = {
							has_country_flag = yrw_4b_reform
							has_country_flag = yrw_4b
						}
					}
				}
			}
			random = {
				chance = 50
				change_religion = ravelian
			}
		}
		if = {
			limit = {
				NOT = {
					has_province_modifier = ravelian_lodge
					has_province_modifier = ravelian_society
					religion = ravelian
				}
			}
			add_province_modifier = {
				name = ravelian_society
				duration = -1
			}
		}
	}

	option = {
		name = flavour_brelar.153.b
		ai_chance = {
			factor = 1
		}
		add_unrest = 5
	}
}


#ravelianism becomes popular among brelari
province_event = {
	id = flavour_brelar.154
	title = flavour_brelar.154.t
	desc = flavour_brelar.154.d
	picture = ROYAL_SOCIETY_eventPicture

	is_triggered_only = yes

	trigger = {
		owner = {
			has_country_flag = g27_breluslad_flag
			has_country_flag = g27_ravelians_here_flag
		}
		culture = brelari
		NOT = {
			has_province_modifier = ravelian_society
			has_province_modifier = ravelian_lodge
			religion = ravelian
		}
	}

	option = {
		name = flavour_brelar.154.a
		ai_chance = {
			factor = 1
		}
		if = {
			limit = {
				is_religion_enabled = ravelian
				NOT = {
					owner = {
						OR = {
							has_country_flag = yrw_4b_reform
							has_country_flag = yrw_4b
						}
					}
				}
			}
			random = {
				chance = 25
				change_religion = ravelian
			}
		}
		if = {
			limit = {
				NOT = {
					has_province_modifier = ravelian_lodge
					has_province_modifier = ravelian_society
					religion = ravelian
				}
			}
			add_province_modifier = {
				name = ravelian_society
				duration = -1
			}
		}
	}
}

#ravelianism becomes popular among brelari settlers
province_event = {
	id = flavour_brelar.155
	title = flavour_brelar.155.t
	desc = flavour_brelar.155.d
	picture = ROYAL_SOCIETY_eventPicture

	is_triggered_only = yes

	trigger = {
		owner = {
			has_country_flag = g27_breluslad_flag
			has_country_flag = g27_ravelians_here_flag
		}
		culture = brelari
		NOT = {
			region = dolindha_region
		}
		NOT = {
			has_province_modifier = ravelian_society
			has_province_modifier = ravelian_lodge
			religion = ravelian
		}
	}

	option = {
		name = flavour_brelar.155.a
		ai_chance = {
			factor = 1
		}
		add_random_development = 2
		if = {
			limit = {
				is_religion_enabled = ravelian
				NOT = {
					owner = {
						OR = {
							has_country_flag = yrw_4b_reform
							has_country_flag = yrw_4b
						}
					}
				}
			}
			random = {
				chance = 75
				change_religion = ravelian
			}
		}
		if = {
			limit = {
				NOT = {
					has_province_modifier = ravelian_lodge
					has_province_modifier = ravelian_society
					religion = ravelian
				}
			}
			add_province_modifier = {
				name = ravelian_society
				duration = -1
			}
		}
	}
}

#people want the state to become ravelian
country_event = {
	id = flavour_brelar.156
	title = flavour_brelar.156.t
	desc = flavour_brelar.156.d
	picture = ROYAL_SOCIETY_eventPicture

	is_triggered_only = yes

	trigger = {
		has_country_flag = g27_breluslad_flag
		has_country_flag = g27_ravelians_here_flag
		is_religion_enabled = ravelian
		OR = {
			num_of_owned_provinces_with = {
				value = 10
				religion = ravelian
			}
			mission_completed = g27_combine_ingenuities
		}
		NOT = {
			has_country_flag = yrw_4b
			has_country_flag = yrw_4b_reform
			religion = ravelian
		}
	}

	option = {	#maybe we convert
		name = flavour_brelar.156.a
		ai_chance = {
			factor = 1
		}
		every_owned_province = {
			limit = {
				OR = {
					religion = ynn_river_worship
					religion = ynn_river_reformed
				}
			}
			add_province_modifier = {
				name = g27_yrw_unrest
				duration = 3650
			}
		}
		if = {
			limit = {
				NOT = {
					num_of_religion = {
						religion = ravelian
						value = 0.5
					}
				}
			}
			random = {
				chance = 50
				add_stability = -1
			}
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -10
		}
	}

	option = {	#no
		name = flavour_brelar.156.b
		ai_chance = {
			factor = 1
		}
		every_owned_province = {
			limit = {
				OR = {
					has_province_modifier = ravelian_lodge
					religion = ravelian
				}
			}
			add_province_modifier = {
				name = g27_ravelian_unrest
				duration = 3650
			}
		}
		if = {
			limit = {
				num_of_religion = {
					religion = ravelian
					value = 0.5
				}
			}
			random = {
				chance = 50
				add_stability = -1
			}
		}
	}
}



# Brelari Iosahar Revolt

#an heir announced
country_event = {
	id = flavour_brelar.50
	title = flavour_brelar.50.t
	desc = flavour_brelar.50.d
	picture = ANGRY_MOB_eventPicture

	fire_only_once = yes

	trigger = {
		tag = G27
		is_at_war = no
		OR = {
			any_subject_country = {
				is_subject_of_type = ynnic_iosahar
				government = monarchy
			}
			is_year = 1500 #Live long enough get fucked anyway
		}
	}

	mean_time_to_happen = {
		months = 1200
		modifier = {
			factor = 0.8
			calc_true_if = {
				amount = 2
				all_subject_country = {
					is_subject_of_type = ynnic_iosahar
					government = monarchy
				}
			}
		}
		modifier = {
			factor = 0.8
			calc_true_if = {
				amount = 3
				all_subject_country = {
					is_subject_of_type = ynnic_iosahar
					government = monarchy
				}
			}
		}
		modifier = {
			factor = 0.8
			calc_true_if = {
				amount = 4
				all_subject_country = {
					is_subject_of_type = ynnic_iosahar
					government = monarchy
				}
			}
		}
		modifier = {
			factor = 0.8
			calc_true_if = {
				amount = 5
				all_subject_country = {
					is_subject_of_type = ynnic_iosahar
					government = monarchy
				}
			}
		}
		modifier = {
			factor = 0.8
			calc_true_if = {
				amount = 6
				all_subject_country = {
					is_subject_of_type = ynnic_iosahar
					government = monarchy
				}
			}
		}
		modifier = {
			factor = 0.8
			calc_true_if = {
				amount = 7
				all_subject_country = {
					is_subject_of_type = ynnic_iosahar
					government = monarchy
				}
			}
		}
		modifier = {
			factor = 0.8
			calc_true_if = {
				amount = 8
				all_subject_country = {
					is_subject_of_type = ynnic_iosahar
					government = monarchy
				}
			}
		}
		modifier = {
			factor = 0.8
			calc_true_if = {
				amount = 1
				all_subject_country = {
					is_subject_of_type = ynnic_iosahar
					liberty_desire = 50
				}
			}
		}
		modifier = {
			factor = 0.8
			calc_true_if = {
				amount = 2
				all_subject_country = {
					is_subject_of_type = ynnic_iosahar
					liberty_desire = 50
				}
			}
		}
		modifier = {
			factor = 0.8
			calc_true_if = {
				amount = 3
				all_subject_country = {
					is_subject_of_type = ynnic_iosahar
					liberty_desire = 50
				}
			}
		}
		modifier = {
			factor = 0.8
			calc_true_if = {
				amount = 4
				all_subject_country = {
					is_subject_of_type = ynnic_iosahar
					liberty_desire = 50
				}
			}
		}
		modifier = {
			factor = 0.8
			calc_true_if = {
				amount = 5
				all_subject_country = {
					is_subject_of_type = ynnic_iosahar
					liberty_desire = 50
				}
			}
		}
		modifier = {
			factor = 0.8
			calc_true_if = {
				amount = 6
				all_subject_country = {
					is_subject_of_type = ynnic_iosahar
					liberty_desire = 50
				}
			}
		}
		modifier = {
			factor = 0.8
			calc_true_if = {
				amount = 7
				all_subject_country = {
					is_subject_of_type = ynnic_iosahar
					liberty_desire = 50
				}
			}
		}
		modifier = {
			factor = 0.8
			calc_true_if = {
				amount = 8
				all_subject_country = {
					is_subject_of_type = ynnic_iosahar
					liberty_desire = 50
				}
			}
		}
		modifier = {
			factor = 0.8
			NOT = {
				republican_tradition = 80
			}
		}
		modifier = {
			factor = 0.8
			NOT = {
				republican_tradition = 70
			}
		}
		modifier = {
			factor = 0.8
			NOT = {
				republican_tradition = 60
			}
		}
		modifier = {
			factor = 0.8
			NOT = {
				republican_tradition = 50
			}
		}
		modifier = {
			factor = 0.8
			NOT = {
				republican_tradition = 40
			}
		}
		modifier = {
			factor = 0.8
			NOT = {
				republican_tradition = 30
			}
		}
		modifier = {
			factor = 0.8
			NOT = {
				stability = 1
			}
		}
		modifier = {
			factor = 0.8
			NOT = {
				stability = 0
			}
		}
		modifier = {
			factor = 0.8
			stability = -1
		}
		modifier = {
			factor = 0.8
			stability = -2
		}
		modifier = {
			factor = 0.8
			stability = -3
		}
		modifier = {
			factor = 1.2
			NOT = {
				is_year = 1460
			}
		}
		modifier = {
			factor = 1.2
			NOT = {
				is_year = 1450
			}
		}
		modifier = {
			factor = 0.8
			is_year = 1470
		}
		modifier = {
			factor = 0.8
			is_year = 1480
		}
		modifier = {
			factor = 0.8
			is_year = 1490
		}
		modifier = {
			factor = 0.2
			is_year = 1500
		}
	}

	option = {
		name = flavour_brelar.50.a
		ai_chance = {
			factor = 1
		}
		set_country_flag = ynn_exile_no_barge
		exile_ruler_as = {
			name = g27_exiled_mayor
		}
		add_stability = -1
		hidden_effect = {
			every_subject_country = {
				country_event = {
					id = flavour_brelar.51
					days = 25
				}
			}
		}
	}

	option = {
		name = flavour_brelar.50.b
		ai_chance = {
			factor = 1
		}
		set_ruler_flag = g27_monarchic_mayor
		hidden_effect = {
			every_subject_country = {
				country_event = {
					id = flavour_brelar.51
					days = 25
				}
			}
		}
	}

	after = {
		hidden_effect = {
			country_event = {
				id = flavour_brelar.52
				days = 60
				random = 12
			}
		}
	}
}

#Brewing betrayal
country_event = {
	id = flavour_brelar.51
	title = flavour_brelar.51.t
	desc = flavour_brelar.51.d
	picture = ANGRY_MOB_eventPicture

	is_triggered_only = yes

	option = {
		name = flavour_brelar.51.a
		trigger = {
			NOT = {
				truce_with = FROM
			}
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				NOT = {
					government = republic
				}
			}
			modifier = {
				factor = 2
				liberty_desire = 50
			}
		}
		set_country_flag = g27_monarchist_faction
	}

	option = {
		name = flavour_brelar.51.b
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0.2
				government = republic
			}
		}
		set_country_flag = g27_loyalist_faction
	}
}

#controller
country_event = {
	id = flavour_brelar.52
	title = flavour_brelar.52.t
	desc = flavour_brelar.52.d
	picture = ANGRY_MOB_eventPicture

	is_triggered_only = yes
	hidden = yes

	option = {
		name = flavour_brelar.52.a
		ai_chance = {
			factor = 1
		}
		if = {
			limit = {
				NOT = {
					num_of_subjects = 1
				}
			}
			country_event = {
				id = flavour_brelar.554
				days = 30
				random = 10
			}
		}
		else = {
			if = {
				limit = {
					any_subject_country = {
						has_country_flag = g27_monarchist_faction
					}
				}
				if = {
					limit = {
						has_ruler_flag = g27_monarchic_mayor
					}
					country_event = {
						id = flavour_brelar.54
						days = 30
						random = 10
					}
				}
				else_if = {
					limit = {
						NOT = {
							any_subject_country = {
								has_country_flag = g27_loyalist_faction
							}
						}
					}
					country_event = {
						id = flavour_brelar.54
						days = 30
						random = 10
					}
				}
				else = {
					country_event = {
						id = flavour_brelar.53
						days = 5
						random = 5
					}
				}
			}
			else = {
				country_event = {
					id = flavour_brelar.55
					days = 30
					random = 5
				}
			}
		}
	}
}

#Cracks in the mortar no subjects
country_event = {
	id = flavour_brelar.554
	title = flavour_brelar.53.t
	desc = flavour_brelar.53.d
	picture = ANGRY_MOB_eventPicture

	is_triggered_only = yes

	option = {
		name = flavour_brelar.53.a
		ai_chance = {
			factor = 1
		}
		add_stability = -1
		if = {
			limit = {
				has_ruler_flag = g27_monarchic_mayor
			}
			capital_scope = {
				spawn_rebels = {
					type = pretender_rebels
					size = 4
					should_take_capital = yes
					use_monarch_as_leader = yes
				}
			}
		}
		else = {
			capital_scope = {
				spawn_rebels = {
					type = pretender_rebels
					size = 4
					should_take_capital = yes
				}
			}
		}
		set_country_flag = g27_fighting_solo_war
	}
}

#Cracks in the Mortar
country_event = {
	id = flavour_brelar.53
	title = flavour_brelar.53.t
	desc = flavour_brelar.53.d
	picture = ANGRY_MOB_eventPicture

	is_triggered_only = yes
	major = yes

	option = {
		name = flavour_brelar.53.a
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			set_country_flag = g27_brelar_rebellion	
			random_subject_country = {
				limit = {
					has_country_flag = g27_monarchist_faction
				}
				save_event_target_as = g27_head_monarchist
				set_country_flag = g27_lead_monarchist
			}
			every_subject_country = {
				limit = {
					has_country_flag = g27_monarchist_faction
				}
				release_iosahar = yes
			}
			event_target:g27_head_monarchist = {
				declare_war_with_cb = {
					casus_belli = cb_restore_personal_union
					who = ROOT
				}
				add_country_modifier = {
					name = g27_loyal_rebellion
					duration = -1
				}
			}
			every_known_country = {
				limit = {
					has_country_flag = g27_monarchist_faction
					NOT = {
						has_country_flag = g27_lead_monarchist
					}
				}
				if = {
					limit = {
						is_at_war = yes
					}
					every_known_country = {
						limit = {
							war_with = PREV
						}
						white_peace = PREV
					}
				}
				add_country_modifier = {
					name = g27_loyal_rebellion
					duration = -1
				}
				country_event = {
					id = flavour_brelar.555
					days = 2
				}
			}
		}
		add_stability = -1
		add_country_modifier = {
			name = g27_let_them_come
			duration = -1
		}
	}

	option = {
		name = flavour_brelar.53.b
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				ai = yes
			}
		}
		add_stability = -3
		change_government = monarchy
		add_government_reform = ynnic_feudalism
		set_ruler = g27_exiled_mayor
		hidden_effect = {
			set_country_flag = g27_imperial_flag
		}
		swap_non_generic_missions = yes
	}
}

country_event = {
	id = flavour_brelar.555
	title = flavour_brelar.555.t
	desc = flavour_brelar.555.d
	picture = COURT_eventPicture

	is_triggered_only = yes
	hidden = yes

	option = {
		name = flavour_brelar.555.a
		ai_chance = {
			factor = 1
		}
		join_all_offensive_wars_of = event_target:g27_head_monarchist
	}
}

#The Dam Bursts
country_event = {
	id = flavour_brelar.54
	title = flavour_brelar.54.t
	desc = flavour_brelar.54.d
	picture = ANGRY_MOB_eventPicture

	is_triggered_only = yes
	major = yes

	option = {
		name = flavour_brelar.54.a
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			set_country_flag = g27_brelar_rebellion
			if = {
				limit = {
					has_ruler_flag = g27_monarchic_mayor
				}
				exile_ruler_as = {
					name = g27_exiled_mayor
				}
				ynn_superregion = {
					limit = {
						num_of_units_in_province = {
							amount = 5
							who = ROOT
						}
					}
					kill_units = {
						who = ROOT
						amount = 5
					}
				}
			}
			random_subject_country = {
				limit = {
					has_country_flag = g27_monarchist_faction
				}
				save_event_target_as = g27_head_monarchist
				set_country_flag = g27_lead_monarchist
			}
			every_subject_country = {
				limit = {
					has_country_flag = g27_monarchist_faction
				}
				release_iosahar = yes
				if = {
					limit = {
						is_at_war = yes
					}
					every_known_country = {
						limit = {
							war_with = PREV
						}
						white_peace = PREV
					}
				}
			}
			event_target:g27_head_monarchist = {
				declare_war_with_cb = {
					casus_belli = cb_restore_personal_union
					who = ROOT
				}
				add_country_modifier = {
					name = g27_loyal_rebellion
					duration = -1
				}
			}
			every_known_country = {
				limit = {
					has_country_flag = g27_monarchist_faction
				}
				join_all_offensive_wars_of = event_target:g27_head_monarchist
				add_country_modifier = {
					name = g27_loyal_rebellion
					duration = -1
				}
			}
			add_stability = -1
		}
	}

	option = {
		name = flavour_brelar.54.b
		ai_chance = {
			factor = 1
		}
		add_stability = -3
		change_government = monarchy
		add_government_reform = feudal_monarchy
		if = {
			limit = {
				NOT = {
					has_ruler_flag = g27_monarchic_mayor
				}
			}
			set_ruler = g27_exiled_mayor
		}
		hidden_effect = {
			set_country_flag = g27_imperial_flag
		}
		swap_non_generic_missions = yes
	}
}

#An inevitable bifurcation
country_event = {
	id = flavour_brelar.55
	title = flavour_brelar.55.t
	desc = flavour_brelar.55.d
	picture = FAR_AND_WIDE_eventPicture

	is_triggered_only = yes
	major = yes

	immediate = {
		hidden_effect = {
			every_known_country = {
				limit = {
					has_country_flag = g27_monarchist_faction
					NOT = {
						is_subject_of = ROOT
					}
				}
				ROOT = {
					create_iosahar = {
						tag = PREV
					}
				}
			}
		}
	}

	option = {
		name = flavour_brelar.55.a
		ai_chance = {
			factor = 1
		}
		every_subject_country = {
			add_liberty_desire = -25
		}
		add_stability = 3
		add_government_reform = brelar_ynnic_dynastic_republic
		if = {
			limit = {
				mission_completed = g27_dolindha_kneels
			}
			custom_tooltip = g27_dolindha_annex_tt
		}
		hidden_effect = {
			set_country_flag = g27_imperial_flag
			clr_country_flag = g27_fighting_solo_war
		}
		swap_non_generic_missions = yes
	}

	option = {
		name = flavour_brelar.55.b
		trigger = {
			NOT = {
				has_global_flag = varlengeilt_dead
			}
		}
		ai_chance = {
			factor = 1
		}
		add_country_modifier = {
			name = g27_breaking_promises
			duration = -1
		}
		hidden_effect = {
			set_country_flag = g27_breluslad_flag
			clr_country_flag = g27_fighting_solo_war
			add_country_modifier = {
				name = g27_no_compromise
				duration = -1
			}
		}
		swap_non_generic_missions = yes
	}

	after = {
		hidden_effect = {
			every_known_country = {
				remove_country_modifier = g27_let_them_come
				remove_country_modifier = g27_loyal_rebellion
				clr_country_flag = g27_lead_monarchist
				clr_country_flag = g27_loyalist_faction
				clr_country_flag = g27_monarchist_faction
				clr_country_flag = g27_brelar_rebellion
			}
			remove_country_modifier = g27_let_them_come
			remove_country_modifier = g27_loyal_rebellion
			clr_country_flag = g27_lead_monarchist
			clr_country_flag = g27_loyalist_faction
			clr_country_flag = g27_monarchist_faction
			clr_country_flag = g27_brelar_rebellion
		}
	}
}

#The Fall of the Ironfolk
country_event = {
	id = flavour_brelar.56
	title = flavour_brelar.56.t
	desc = flavour_brelar.56.d
	picture = IMPALED_SOLDIERS_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			release_iosahar = yes
			every_known_country = {
				limit = {
					OR = {
						has_country_flag = g27_monarchist_faction
						has_country_flag = g27_loyalist_faction
					}
					NOT = {
						is_subject_of = ROOT
					}
				}
				ROOT = {
					create_iosahar = {
						tag = PREV
					}
				}
			}
		}
	}

	option = {
		name = flavour_brelar.56.a
		ai_chance = {
			factor = 1
		}
		add_stability = -3
		change_government = monarchy
		add_government_reform = feudal_monarchy
		if = {
			limit = {
				NOT = {
					has_ruler_flag = g27_monarchic_mayor
				}
			}
			set_ruler = g27_exiled_mayor
		}
		hidden_effect = {
			set_country_flag = g27_imperial_flag
		}
		swap_non_generic_missions = yes
	}

	after = {
		hidden_effect = {
			every_known_country = {
				remove_country_modifier = g27_let_them_come
				remove_country_modifier = g27_loyal_rebellion
				clr_country_flag = g27_lead_monarchist
				clr_country_flag = g27_loyalist_faction
				clr_country_flag = g27_monarchist_faction
				clr_country_flag = g27_brelar_rebellion
			}
			remove_country_modifier = g27_let_them_come
			remove_country_modifier = g27_loyal_rebellion
			clr_country_flag = g27_lead_monarchist
			clr_country_flag = g27_loyalist_faction
			clr_country_flag = g27_monarchist_faction
			clr_country_flag = g27_brelar_rebellion
		}
	}
}

#Promise of the Patricians
country_event = {
	id = flavour_brelar.57
	title = flavour_brelar.57.t
	desc = flavour_brelar.57.d
	picture = STREET_SPEECH_eventPicture

	is_triggered_only = yes

	option = {
		name = flavour_brelar.57.a
		ai_chance = {
			factor = 1
		}
		add_country_modifier = {
			name = g27_promise_peace_3
			duration = 7300
		}
		add_power_projection = {
			type = eclipsed_rival
			amount = 30
		}
		hidden_effect = {
			country_event = {
				id = flavour_brelar.60
				days = 7301
			}
		}
		custom_tooltip = g27_reactionary_revolts_tt
	}

	option = {
		name = flavour_brelar.57.b
		ai_chance = {
			factor = 1
		}
		add_country_modifier = {
			name = g27_promise_peace_2
			duration = 7300
		}
		hidden_effect = {
			country_event = {
				id = flavour_brelar.60
				days = 10951
			}
		}
		custom_tooltip = g27_reactionary_revolts_tt
	}

	option = {
		name = flavour_brelar.57.c
		ai_chance = {
			factor = 1
		}
		add_country_modifier = {
			name = g27_promise_peace_1
			duration = 7300
		}

		hidden_effect = {
			country_event = {
				id = flavour_brelar.60
				days = 14601
			}
		}
		custom_tooltip = g27_reactionary_revolts_tt
	}
}

#Promises Broken
country_event = {
	id = flavour_brelar.60
	title = flavour_brelar.60.t
	desc = flavour_brelar.60.d
	picture = FAMINE_eventPicture

	is_triggered_only = yes

	trigger = {
		NOT = {
			mission_completed = g27_rebuild_repopulate_reaffirm
		}
	}

	option = {
		name = flavour_brelar.60.a
		ai_chance = {
			factor = 1
		}
		add_stability = -2
		every_subject_country = {
			add_liberty_desire = 50
			add_opinion = {
				who = ROOT
				modifier = g27_broken_promise
			}
		}
		remove_country_modifier = g27_breaking_promises
		remove_country_modifier = g27_no_compromise
	}
}

#control
country_event = {
	id = flavour_brelar.61
	title = flavour_brelar.61.t
	desc = flavour_brelar.61.d
	picture = ADVISOR_eventPicture

	is_triggered_only = yes
	hidden = yes

	trigger = {
		tag = G27
		has_country_flag = g27_breluslad_flag
	}

	option = {
		name = flavour_brelar.61.a
		ai_chance = {
			factor = 1
		}
		random_list = {
			1 = {
				random_list = {
					1 = {
						random_owned_province = {
							limit = {
								NOT = {
									has_province_modifier = g27_recent_uprising
								}
							}
							province_event = {
								id = flavour_brelar.58
								days = 30
								random = 30
							}
						}
					}
					1 = {
						country_event = {
							id = flavour_brelar.59
							days = 30
							random = 30
						}
					}
				}
			}
			1 = {

			}
		}
	}
}

#separatists
province_event = {
	id = flavour_brelar.58
	title = flavour_brelar.58.t
	desc = flavour_brelar.58.d
	picture = STREET_SPEECH_eventPicture

	is_triggered_only = yes

	trigger = {
		owner = {
			has_country_flag = g27_breluslad_flag
			NOT = {
				mission_completed = g27_consolidate_dolindha
			}
		}
		NOT = {
			has_province_modifier = g27_recent_uprising
		}
	}

	option = {
		name = flavour_brelar.58.a
		ai_chance = {
			factor = 1
		}
		spawn_rebels = {
			type = nationalist_rebels
			size = 3
		}
		add_province_modifier = {
			name = g27_recent_uprising
			duration = 3650
		}
	}

	option = {
		name = flavour_brelar.58.b
		ai_chance = {
			factor = 1
		}
		owner = {
			add_scaled_republican_tradition = -5
			random = {
				chance = 50
				add_stability = -1
			}
		}
		spawn_rebels = {
			size = 1
			type = nationalist_rebels
		}
		add_unrest = -5
		add_province_modifier = {
			name = g27_recent_uprising
			duration = 3650
		}
	}
}

#reactionaries
country_event = {
	id = flavour_brelar.59
	title = flavour_brelar.59.t
	desc = flavour_brelar.59.d
	picture = STREET_SPEECH_eventPicture

	is_triggered_only = yes

	trigger = {
		has_country_flag = g27_breluslad_flag
		NOT = {
			mission_completed = g27_consolidate_dolindha
		}
	}

	immediate = {
		hidden_effect = {
			random_list = {
				1 = {
					random_subject_country = {
						limit = {
							religion = ynn_river_worship
						}
						random_owned_province = {
							save_event_target_as = g27_reactionaries_prov
						}
					}
				}
				1 = {
					random_owned_province = {
						save_event_target_as = g27_reactionaries_prov
					}
				}
			}
		}
	}

	option = {
		name = flavour_brelar.59.a
		ai_chance = {
			factor = 1
		}
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = -10
		}
		event_target:g27_reactionaries_prov = {
			spawn_rebels = {
				size = 3
				type = noble_rebels
			}
		}
	}

	option = {
		name = flavour_brelar.59.b
		ai_chance = {
			factor = 1
		}
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = 10
		}
		add_scaled_republican_tradition = -5
		random = {
			chance = 50
			add_stability = -1
		}
	}
}


#I think this was an event I used for testing, idk I'm just removing profanity I wrote cuz I was tired and malding
country_event = {
	id = flavour_brelar.62
	title = flavour_brelar.62.t
	desc = flavour_brelar.62.d
	picture = ELECTION_REPUBLICAN_eventPicture

	is_triggered_only = yes

	option = {
		name = flavour_brelar.62.a
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			if = {
				limit = {
					NOT = { has_country_flag = artificery_unlocked }
				}
				country_event = {
					id = magic_artificery_setup.1
					days = 1
				}
			}
		}
		custom_tooltip = supporting_artificers_tt
	}
}


#Brelari Dynastic Election
country_event = {
	id = flavour_brelar.700
	title = flavour_brelar.700.t
	desc = flavour_brelar.700.desc
	picture = ELECTION_REPUBLICAN_eventPicture

	is_triggered_only = yes

	trigger = {
		has_reform = brelar_ynnic_dynastic_republic
	}

	option = {	#Yen Argan, adm
		name = flavour_brelar.700.a
		ai_chance = {
			factor = 1
		}
		define_ruler = {
			min_age = 24
			change_adm = 1
			max_random_adm = 5
			max_random_dip = 3
			max_random_mil = 3
			dynasty = "yen Argan"
			culture = dolindhan
		}
	}

	option = {	#Yen Bostynn, dip
		name = flavour_brelar.700.b
		ai_chance = {
			factor = 1
		}
		define_ruler = {
			min_age = 24
			change_dip = 1
			max_random_adm = 3
			max_random_dip = 5
			max_random_mil = 3
			dynasty = "yen Bostynn"
			culture = dolindhan
		}
	}

	option = {	#Yen Cimst, mil
		name = flavour_brelar.700.c
		ai_chance = {
			factor = 1
		}
		define_ruler = {
			min_age = 24
			change_mil = 1
			max_random_adm = 3
			max_random_dip = 3
			max_random_mil = 5
			dynasty = "yen Cimst"
			culture = dolindhan
		}
	}

	option = {	#Yen Bacar, adm
		name = flavour_brelar.700.d
		trigger = {
			has_country_flag = g27_yenbacar_flag
		}
		ai_chance = {
			factor = 1
		}
		define_ruler = {
			min_age = 24
			change_adm = 2
			change_dip = 1
			change_mil = 1
			dynasty = "yen Bacar"
			culture = sarda
		}
		hidden_effect = {
			random_list = {
				1 = {
					add_ruler_personality = inspiring_leader_personality
				}
				1 = {
					add_ruler_personality = benevolent_personality
				}
				1 = {
					add_ruler_personality = peasant_revolt_leader_personality
				}
			}
		}
	}

	option = {	#Vyrekynn, dip
		name = flavour_brelar.700.e
		trigger = {
			has_country_flag = g27_vyrekynn_flag
		}
		ai_chance = {
			factor = 1
		}
		define_ruler = {
			min_age = 24
			change_adm = 1
			change_dip = 2
			change_mil = 1
			dynasty = "Vyrekynn"
			culture = sarda
		}
		hidden_effect = {
			random_list = {
				1 = {
					add_ruler_personality = iron_crowned_personality
				}
				1 = {
					add_ruler_personality = conqueror_personality
				}
				1 = {
					add_ruler_personality = patron_of_arts_personality
				}
			}
		}
	}

	option = {	#Yen Vasonn, mil
		name = flavour_brelar.700.f
		trigger = {
			has_country_flag = g27_yenvasonn_flag
		}
		ai_chance = {
			factor = 1
		}
		define_ruler = {
			min_age = 24
			change_adm = 1
			change_dip = 1
			change_mil = 2
			dynasty = "yen Vasonn"
			culture = rzentur
		}
		hidden_effect = {
			random_list = {
				1 = {
					add_ruler_personality = martial_educator_personality
				}
				1 = {
					add_ruler_personality = tactical_genius_personality
				}
				1 = {
					add_ruler_personality = industrious_personality
				}
			}
		}
	}

	option = {	#yen Stenur, dip
		name = flavour_brelar.700.h
		trigger = {
			has_country_flag = g27_yenstenur_flag
		}
		ai_chance = {
			factor = 1
		}
		define_ruler = {
			min_age = 24
			change_dip = 3
			dynasty = "yen Stenur"
			culture = sarda
		}
		hidden_effect = {
			random_list = {
				1 = {
					add_ruler_personality = well_connected_personality
				}
				1 = {
					add_ruler_personality = silver_tongue_personality
				}
				1 = {
					add_ruler_personality = calm_personality
				}
			}
		}
	}

	option = {	#Yen Stantir, mil
		name = flavour_brelar.700.g
		trigger = {
			has_country_flag = g27_yenstantir_flag
		}
		ai_chance = {
			factor = 1
		}
		define_ruler = {
			min_age = 24
			change_mil = 3
			dynasty = "yen Stantir"
			culture = sarda
		}
		hidden_effect = {
			random_list = {
				1 = {
					add_ruler_personality = well_advised_personality
				}
				1 = {
					add_ruler_personality = charismatic_negotiator_personality
				}
				1 = {
					add_ruler_personality = strict_personality
				}
			}
		}
	}

	option = {	#yen Brelar, adm
		name = flavour_brelar.700.i
		trigger = {
			has_country_flag = g27_yenbrelar_flag
		}
		ai_chance = {
			factor = 1
		}
		define_ruler = {
			min_age = 24
			change_adm = 3
			change_dip = 1
			change_mil = 1
			dynasty = "yen Brelar"
			culture = ROOT
		}
		hidden_effect = {
			random_list = {
				1 = {
					add_ruler_personality = architectural_visionary_personality
				}
				1 = {
					add_ruler_personality = lawgiver_personality
				}
				1 = {
					add_ruler_personality = righteous_personality
				}
			}
		}
	}
}

#randomise these nuts
province_event = {
	id = flavour_brelar.701
	title = flavour_brelar.701.t
	desc = flavour_brelar.701.d
	picture = CARDINAL_RICHELIEU_eventPicture

	is_triggered_only = yes
	hidden = yes

	option = {
		name = flavour_brelar.701.a
		ai_chance = {
			factor = 2
		}
		change_trade_goods = copper
	}

	option = {
		name = flavour_brelar.701.a
		ai_chance = {
			factor = 4
		}
		change_trade_goods = iron
	}

	option = {
		name = flavour_brelar.701.a
		ai_chance = {
			factor = 1
		}
		change_trade_goods = gold
	}
}
