
namespace = aakhetist

#1-19 system stuff
#20-49 religious abilities
#50-99 aakhet demands
#100+ random flavor



################################
### System ###
################################

#Aakhet arrives
country_event = {
	id = aakhetist.01
	title = aakhetist.01.t
	desc = aakhetist.01.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = { 
		religion = aakhetist
	}

	option = {
		name = aakhetist.01.a
		custom_tooltip = aakhetist.01.tooltip
		add_stability_or_adm_power = yes
		hidden_effect = {
			set_country_flag = current_aakhet_host
			save_global_event_target_as = aakhet_host
		}
	}
}

#Aakhet's approval decreases due to other tag
country_event = {
	id = aakhetist.02
	title = aakhetist.02.t
	desc = aakhetist.02.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = { 
		religion = aakhetist
		has_country_flag = current_aakhet_host
	}
	immediate = {
		hidden_effect = { FROM = { capital_scope = { save_event_target_as = event_province } } }
	}
	goto = event_province

	option = {
		name = aakhetist.02.a
		trigger_switch = {
			on_trigger = has_country_flag

			aakhet_reduction_30 = { change_aakhet_approval = { value = -30 } }
			aakhet_reduction_25 = { change_aakhet_approval = { value = -25 } }
			aakhet_reduction_20 = { change_aakhet_approval = { value = -20 } }
			aakhet_reduction_15 = { change_aakhet_approval = { value = -15 } }
			aakhet_reduction_10 = { change_aakhet_approval = { value = -10 } }
			aakhet_reduction_5 = { change_aakhet_approval = { value = -5 } }
		}
	}

	after = {
		clr_country_flag = aakhet_reduction_30
		clr_country_flag = aakhet_reduction_25
		clr_country_flag = aakhet_reduction_20
		clr_country_flag = aakhet_reduction_15
		clr_country_flag = aakhet_reduction_10
		clr_country_flag = aakhet_reduction_05
	}
}


#Aakhet leaves 
country_event = {
	id = aakhetist.03
	title = aakhetist.03.t
	desc = aakhetist.03.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = { 
		religion = aakhetist
		has_country_flag = current_aakhet_host
	}

	option = {
		name = aakhetist.03.a
		custom_tooltip = aakhetist.03.tooltip
		reduce_stability_or_adm_power = yes
		aakhet_movement = yes
	}
}

#Converted to Aakhetist, tell them wtf is going on
country_event = {
	id = aakhetist.04
	title = aakhetist.04.t
	desc = aakhetist.04.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = { 
		religion = aakhetist
	}

	option = {
		name = aakhetist.04.a
		custom_tooltip = aakhetist.04.tooltip
		change_aakhet_approval = { value = 25 }
	}
}

#Aramoole starting event
country_event = {
	id = aakhetist.05
	title = aakhetist.05.t
	desc = aakhetist.05.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	fire_only_once = yes
	trigger = {
		NOT = { is_year = 1445 }
		tag = F63
		religion = aakhetist
	}

	option = {
		name = aakhetist.05.a
		custom_tooltip = aakhetist.05.tooltip
		change_aakhet_approval = { value = 50 }
	}
}


################################
### Religious Abilities ###
################################


#Offer servitude
country_event = {
	id = aakhetist.20
	title = aakhetist.20.t
	desc = aakhetist.20.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }

	option = {
		name = aakhetist.20.a
		add_prestige = -15
		change_aakhet_approval = { value = 5 }
		if = {
			limit = { NOT = { has_country_flag = current_aakhet_host has_global_flag = aakhet_hostless } }
			custom_tooltip = aakhetist_current_host_approval_tooltip
		}
	}

	option = {
		name = aakhetist.cancel
		add_church_power = 25
	}
}

#Offer Food
country_event = {
	id = aakhetist.21
	title = aakhetist.21.t
	desc = aakhetist.21.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }

	option = {
		name = aakhetist.21.a
		random_owned_province = {
			limit = {
				OR = {
					trade_goods = grain
					trade_goods = livestock
				}
				development = 5
			}
			if = {
				limit = { base_tax = 1 }
				add_base_tax = -1
			}
			else_if = {
				limit = { base_production = 1 }
				add_base_production = -1
			}
			else_if = {
				limit = { base_manpower = 1 }
				add_base_manpower = -1
			}
		}
		random_owned_province = {
			limit = {
				OR = {
					trade_goods = grain
					trade_goods = livestock
				}
				development = 4
			}
			if = {
				limit = { base_manpower = 1 }
				add_base_manpower = -1
			}
			else_if = {
				limit = { base_production = 1 }
				add_base_production = -1
			}
			else_if = {
				limit = { base_tax = 1 }
				add_base_tax = -1
			}
		}
		change_aakhet_approval = { value = 15 }
		if = {
			limit = { NOT = { has_country_flag = current_aakhet_host has_global_flag = aakhet_hostless } }
			custom_tooltip = aakhetist_current_host_approval_tooltip
		}
	}

	option = {
		name = aakhetist.cancel
		add_church_power = 50
	}
}

#Offer Weapons
country_event = {
	id = aakhetist.22
	title = aakhetist.22.t
	desc = aakhetist.22.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }

	option = {
		name = aakhetist.22.a
		if = {
			limit = { total_development = 1000 }
			add_treasury = -1000
		}
		else_if = {
			limit = { total_development = 750 }
			add_treasury = -750
		}
		else_if = {
			limit = { total_development = 500 }
			add_treasury = -500
		}
		else = { add_years_of_income = -1.5 }
		change_aakhet_approval = { value = 15 }
		if = {
			limit = { NOT = { has_country_flag = current_aakhet_host has_global_flag = aakhet_hostless } }
			custom_tooltip = aakhetist_current_host_approval_tooltip
		}
	}

	option = {
		name = aakhetist.cancel
		add_church_power = 50
	}
}

#Offer Knowledge
country_event = {
	id = aakhetist.23
	title = aakhetist.23.t
	desc = aakhetist.23.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }

	option = {
		name = aakhetist.23.a
		add_adm_power = -75
		add_dip_power = -75
		add_mil_power = -75
		change_aakhet_approval = { value = 30 }
		if = {
			limit = { NOT = { has_country_flag = current_aakhet_host has_global_flag = aakhet_hostless } }
			custom_tooltip = aakhetist_current_host_approval_tooltip
		}
	}

	option = {
		name = aakhetist.cancel
		add_church_power = 75
	}
}

#Offer Mind
country_event = {
	id = aakhetist.24
	title = aakhetist.24.t
	desc = aakhetist.24.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }

	option = {
		name = aakhetist.24.a
		if = {
			limit = {
				OR = {
					commandant = 5
					army_organiser = 5
					army_reformer = 5
					fortification_expert = 5
				}
			}
			remove_advisor_by_category = MIL
			change_aakhet_approval = { value = 30 }
		}
		else_if = {
			limit = {
				OR = {
					commandant = 4
					army_organiser = 4
					army_reformer = 4
					fortification_expert = 4
				}
			}
			remove_advisor_by_category = MIL
			change_aakhet_approval = { value = 20 }
		}
		else = {
			remove_advisor_by_category = MIL
			change_aakhet_approval = { value = 10 }
		}
		if = {
			limit = { NOT = { has_country_flag = current_aakhet_host has_global_flag = aakhet_hostless } }
			custom_tooltip = aakhetist_current_host_approval_tooltip
		}
	}

	option = {
		name = aakhetist.cancel
		add_church_power = 75
	}
}


#Aakhet's blessing
country_event = {
	id = aakhetist.25
	title = aakhetist.25.t
	desc = aakhetist.25.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }

	option = {
		name = aakhetist.25.a
		change_aakhet_approval = { value = -5 }
		add_country_modifier = { name = aakhetist_aakhet_blessing_modifier duration = 730 }
	}
}

#Aakhet's Retinue
country_event = {
	id = aakhetist.26
	title = aakhetist.26.t
	desc = aakhetist.26.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }

	option = {
		name = aakhetist.26.a
		change_aakhet_approval = { value = -5 }
		if = {
			limit = { army_tradition = 80 }
			create_general = { tradition = 100 culture = hapremiti }
		}
		else_if = {
			limit = { army_tradition = 60 }
			create_general = { tradition = 80 culture = hapremiti }
		}
		else_if = {
			limit = { army_tradition = 40 }
			create_general = { tradition = 60 culture = hapremiti }
		}
		else_if = {
			limit = { army_tradition = 20 }
			create_general = { tradition = 40 culture = hapremiti }
		}
		else = { create_general = { tradition = 20 culture = hapremiti } }

		if = {
			limit = { any_owned_province = { has_port = yes } }
			if = {
				limit = { navy_tradition = 80 }
				create_admiral = { tradition = 100 culture = hapremiti }
			}
			else_if = {
				limit = { navy_tradition = 60 }
				create_admiral = { tradition = 80 culture = hapremiti }
			}
			else_if = {
				limit = { navy_tradition = 40 }
				create_admiral = { tradition = 60 culture = hapremiti }
			}
			else_if = {
				limit = { navy_tradition = 20 }
				create_admiral = { tradition = 40 culture = hapremiti }
			}
			else = { create_admiral = { tradition = 20 culture = hapremiti } }
		}
	}
}

#Aakhet's Wrath
country_event = {
	id = aakhetist.27
	title = aakhetist.27.t
	desc = aakhetist.27.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }

	immediate = {
		hidden_effect = {
			random_province = {
				limit = {
					fort_level = 1
					sieged_by = ROOT
					unit_has_leader = yes
					num_of_units_in_province = {
						who = ROOT
						amount = 1
					}
				}
				save_event_target_as = event_province
			}
		}
	}

	option = {
		name = aakhetist.27.a
		change_aakhet_approval = { value = -10 }
		event_target:event_province = {
			change_siege = 25
			add_devastation = 50
			hidden_effect = { province_event = { id = aakhetist.39 } }
		}
	}
}

#Aakhet's Rage
country_event = {
	id = aakhetist.28
	title = aakhetist.28.t
	desc = aakhetist.28.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }

	immediate = {
		hidden_effect = {
			random_war_enemy_country = {
				limit = {
					OR = {
						is_in_war = { defender_leader = THIS attacker_leader = ROOT }
						is_in_war = { attacker_leader = THIS defender_leader = ROOT }
					}
					OR = {
						num_of_generals = 2
						AND = {
							num_of_generals = 1
							NOT = {
								is_monarch_leader = yes
								is_heir_leader = yes
							}
						}
					}
				}
				save_event_target_as = event_country
			}
		}
	}

	option = {
		name = aakhetist.28.a
		#mp cost
		if = {
			limit = { 
				ai = no 
				event_target:event_country = { ai = no }
			}
			change_aakhet_approval = { value = -25 }
		}
		#sp cost
		else = { change_aakhet_approval = { value = -10 } }

		#extra cost
		if = {
			limit = {
				event_target:event_country = {
					num_of_generals = 5
				}
			}
			custom_tooltip = aakhetist.28.tooltip1
			change_aakhet_approval = { value = -10 }
		}

		event_target:event_country = {
			tooltip = {
				if = {
					limit = { is_monarch_leader = yes }
					random_list = {
						95 = { 
							if = {
								limit = { ruler_has_personality = mage_personality }
								custom_tooltip = aakhetist.28.tooltip2
								ROOT = { change_aakhet_approval = { value = -15 } }
							}
							else = { 
								custom_tooltip = aakhetist.28.tooltip3
								ROOT = { change_aakhet_approval = { value = -10 } }
							}
							kill_ruler = yes
						}
						5 = {
							modifier = {
								factor = 1.5
								mil = 2
							}
							modifier = {
								factor = 1.5
								mil = 4
							}
							modifier = {
								factor = 2
								mil = 6
							}
							modifier = {
								factor = 2
								OR = {
									ruler_has_personality = tactical_genius_personality
									ruler_has_personality = bold_fighter_personality
								}
							}
							modifier = {
								factor = 3
								ruler_has_personality = mage_personality
							}
							modifier = {
								factor = 1.5
								is_divination_2 = yes
							}
							modifier = {
								factor = 2.5
								is_divination_3 = yes
							}
							modifier = {
								factor = 2
								OR = {
									is_illusion_2 = yes
									is_illusion_3 = yes
								}
							}
							modifier = {
								factor = 1.5
								is_abjuration_1 = yes
							}
							modifier = {
								factor = 2.5
								is_abjuration_2 = yes
							}
							modifier = {
								factor = 4
								is_abjuration_3 = yes
							}
						}
					}
				}
			}
			custom_tooltip = aakhetist.28.tooltip4
			hidden_effect = { country_event = { id = aakhetist.40 } }
		}
	}
}

#Aakhet's Conquest
country_event = {
	id = aakhetist.29
	title = aakhetist.29.t
	desc = aakhetist.29.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }

	option = {
		name = aakhetist.29.a
		random_neighbor_country = {
			limit = {
				NOT = {
					is_subject_of = ROOT
					alliance_with = ROOT
					war_with = ROOT
				}
				if = {
					limit = { ROOT = { government_rank = 3 } }
					NOT = { total_development = 500 }
				}
				else_if = {
					limit = { ROOT = { government_rank = 2 } }
					NOT = { total_development = 300 }
				}
				else = {
					NOT = { total_development = 200 }
				}
			}
			reverse_add_casus_belli = { type = cb_vassalize_mission target = ROOT months = 60 }
		}
	}
}

#Aakhet's Wisdom
country_event = {
	id = aakhetist.30
	title = aakhetist.30.t
	desc = aakhetist.30.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }

	option = {
		name = aakhetist.30.a
		if = {
			limit = {
				has_heir = yes
				NOT = { heir_mil = 6 }
			}
			random_list = {
				80 = { 
					change_heir_mil = 1
					modifier = {
						factor = 0.8
						heir_mil = 3
					}
					modifier = {
						factor = 0.9
						heir_mil = 4
					}
					modifier = {
						factor = 0.8
						heir_mil = 5
					}
				}
				20 = {}
			}
		}
		else = { 
			add_mil_power = 100 
			add_army_tradition = 10 
			add_army_professionalism = 0.03
		}
	}
}


#Aakhet's Glory
country_event = {
	id = aakhetist.31
	title = aakhetist.31.t
	desc = aakhetist.31.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }

	option = {
		name = aakhetist.31.a
		custom_tooltip = aakhetist.31.tooltip
	}

	after = {
		if = {
			limit = { ai = no }
			set_variable = { player_duel_score = 0 }
			set_variable = { aakhet_duel_score = 0 }
			country_event = { id = aakhetist.32 } 
		}
		else = {  }
	}
}

#aakhet turn 1
country_event = {
	id = aakhetist.32
	title = aakhetist.31.t
	desc = aakhetist.31.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }
	hidden = yes

	#plays green eyes and a trap that stops directs attacks, idr these damn cards
	option = {
		name = aakhetist.31.a
		ai_chance = { factor = 50 }
		set_country_flag = aakhet_duel_greeneyes
	}

	#plays jar of greed
	option = {
		name = aakhetist.31.a
		ai_chance = { factor = 50 }
		set_country_flag = aakhet_duel_jar
	}


	after = { country_event = { id = aakhetist.33 } }
}

#player turn 2
country_event = {
	id = aakhetist.33
	title = aakhetist.33.t
	desc = {
		trigger = { has_country_flag = aakhet_duel_greeneyes }
		desc = aakhetist.33.d1
	}
	desc = {
		trigger = { has_country_flag = aakhet_duel_jar }
		desc = aakhetist.33.d2
	}
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }

	#plays shadow magician
	option = {
		name = aakhetist.33.a
		ai_chance = { factor = 50 }
		custom_tooltip = aakhetist.33.tooltip1
		hidden_effect = {
			if = {
				limit = { has_country_flag = aakhet_duel_greeneyes } #you kill it
				change_variable = { player_duel_score = 1 }
			}
			else = { change_variable = { aakhet_duel_score = 1 } } #his trap stops direct attacks
		}
	}

	#plays bottomless hole
	option = {
		name = aakhetist.33.b
		ai_chance = { factor = 50 }
		custom_tooltip = aakhetist.33.tooltip2
		hidden_effect = {
			if = {
				limit = { has_country_flag = aakhet_duel_jar } #you prepare for his next monster
				change_variable = { player_duel_score = 1 }
			}
			else = { change_variable = { aakhet_duel_score = 1 } }
		}
	}

	#plays soldier of stone
	option = {
		name = aakhetist.33.c
		ai_chance = { factor = 50 }
		custom_tooltip = aakhetist.33.tooltip3
		hidden_effect = {
			change_variable = { aakhet_duel_score = 1 } #this doesn't help you at all
		}
	}

	#plays dragged down into the grave
	option = {
		name = aakhetist.33.d
		ai_chance = { factor = 50 }
		custom_tooltip = aakhetist.33.tooltip4
		hidden_effect = {
			if = {
				limit = { has_country_flag = aakhet_duel_jar } #you remove an exodia piece
				change_variable = { player_duel_score = 1 }
			}
			else = { change_variable = { aakhet_duel_score = 1 } }
		}
	}


	after = { country_event = { id = aakhetist.34 } }
}

#aakhet turn 3
country_event = {
	id = aakhetist.34
	title = aakhetist.31.t
	desc = aakhetist.31.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }
	hidden = yes

	#plays lord of d and magic jammer
	option = {
		name = aakhetist.31.a
		ai_chance = { factor = 50 }
		set_country_flag = aakhet_duel_lordjammer
	}

	#plays mirror force
	option = {
		name = aakhetist.31.a
		ai_chance = { factor = 50 }
		set_country_flag = aakhet_duel_mirror
	}


	after = { country_event = { id = aakhetist.35 } }
}

#player turn 4
country_event = {
	id = aakhetist.35
	title = aakhetist.35.t
	desc = {
		trigger = { has_country_flag = aakhet_duel_lordjammer }
		desc = aakhetist.35.d1
	}
	desc = {
		trigger = { has_country_flag = aakhet_duel_mirror }
		desc = aakhetist.35.d2
	}
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }

	#plays fissure
	option = {
		name = aakhetist.35.a
		ai_chance = { factor = 50 }
		custom_tooltip = aakhetist.35.tooltip1
		hidden_effect = {
			change_variable = { aakhet_duel_score = 1 } #magic jammer or there's no monster lol
		}
	}

	#set kuriboh in defense mode 
	option = {
		name = aakhetist.35.b
		ai_chance = { factor = 50 }
		custom_tooltip = aakhetist.35.tooltip2
		hidden_effect = {
			change_variable = { aakhet_duel_score = 1 } #this doesn't help you at all
		}
	}

	#play shadow magician girl
	option = {
		name = aakhetist.35.c
		ai_chance = { factor = 50 }
		custom_tooltip = aakhetist.35.tooltip3
		hidden_effect = {
			if = {
				limit = { has_country_flag = aakhet_duel_lordjammer } #kill the monster and do damage
				change_variable = { player_duel_score = 1 }
			}
			else = { change_variable = { aakhet_duel_score = 1 } } #mirror force lol
		}
	}

	#plays mst and attack with monster
	option = {
		name = aakhetist.35.d
		ai_chance = { factor = 50 }
		custom_tooltip = aakhetist.35.tooltip4
		hidden_effect = {
			change_variable = { player_duel_score = 1 } #you blow the trap and hit him
		}
	}


	after = { country_event = { id = aakhetist.36 } }
}

#aakhet turn 5
country_event = {
	id = aakhetist.36
	title = aakhetist.31.t
	desc = aakhetist.31.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }
	hidden = yes

	#plays some old bs that lets him summon 3 monsters
	option = {
		name = aakhetist.31.a
		ai_chance = { factor = 50 }
		set_country_flag = aakhet_duel_triple
	}

	#fusion summons green eyes ultimate dragon
	option = {
		name = aakhetist.31.a
		ai_chance = { factor = 50 }
		set_country_flag = aakhet_duel_ultimate
	}

	after = { country_event = { id = aakhetist.37 } }
}

#player turn 6
country_event = {
	id = aakhetist.37
	title = aakhetist.37.t
	desc = {
		trigger = { has_country_flag = aakhet_duel_triple }
		desc = aakhetist.37.d1
	}
	desc = {
		trigger = { has_country_flag = aakhet_duel_ultimate }
		desc = aakhetist.37.d2
	}
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }



	#play orange eyes purple dragon
	option = {
		name = aakhetist.37.a
		ai_chance = { factor = 50 }
		custom_tooltip = aakhetist.37.tooltip1
		hidden_effect = {
			change_variable = { aakhet_duel_score = 1 } #this doesn't help you at all
		}
	}

	#play change of heart
	option = {
		name = aakhetist.37.b
		ai_chance = { factor = 50 }
		custom_tooltip = aakhetist.37.tooltip2
		hidden_effect = {
			if = {
				limit = { has_country_flag = aakhet_duel_ultimate } #you take control of it
				change_variable = { player_duel_score = 1 }
			}
			else = { change_variable = { aakhet_duel_score = 1 } } #but what about the other two lol
		}
	}

	#swords of light
	option = {
		name = aakhetist.37.c
		ai_chance = { factor = 50 }
		custom_tooltip = aakhetist.37.tooltip3
		hidden_effect = {
			if = {
				limit = { has_country_flag = aakhet_duel_triple } #they can't attack
				change_variable = { player_duel_score = 1 }
			}
			else = { change_variable = { aakhet_duel_score = 1 } } #it bypasses it lol
		}
	}

	#play jar of greed
	option = {
		name = aakhetist.37.d
		ai_chance = { factor = 50 }
		custom_tooltip = aakhetist.37.tooltip4
		hidden_effect = {
			change_variable = { aakhet_duel_score = 1 } #this doesn't help you at all
		}
	}


	after = { country_event = { id = aakhetist.38 } }
}


#result
country_event = {
	id = aakhetist.38
	title = aakhetist.38.t
	desc = { #you lose
		trigger = { check_variable = { which = aakhet_duel_score which = player_duel_score } }
		desc = aakhetist.38.d1
	}
	desc = { #you win
	trigger = { check_variable = { which = player_duel_score which = aakhet_duel_score } }
		desc = aakhetist.38.d2
	}
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }

	#you lose
	option = {
		name = aakhetist.38.a
		trigger = { 
			ai = no
			check_variable = { which = aakhet_duel_score which = player_duel_score }
		}
		ai_chance = { factor = 0 }
		add_prestige = -15
		change_aakhet_approval = { value = -10 }
	}

	#you win
	option = {
		name = aakhetist.38.b
		trigger = {
			ai = no
			check_variable = { which = player_duel_score which = aakhet_duel_score }
			NOT = { is_variable_equal = { which = player_duel_score which = aakhet_duel_score } } #ties should be a loss
		}
		ai_chance = { factor = 0 }
		change_aakhet_approval = { value = 10 }
		add_ruler_modifier = { name = aakhetist_aakhets_chosen duration = -1 }
	}

	#ai option
	option = {
		name = aakhetist.38.a
		trigger = { ai = yes }
		ai_chance = { factor = 100 }
		random_list = {
			65 = {}
			35 = {
				modifier = {
					factor = 1.25
					mil = 4
				}
				modifier = {
					factor = 1.5
					mil = 6
				}
				modifier = {
					factor = 1.25
					OR = {
						ruler_has_personality = tactical_genius_personality
						ruler_has_personality = bold_fighter_personality
						ruler_has_personality = inspiring_leader_personality
						ruler_has_personality = martial_educator_personality
						ruler_has_personality = mage_personality
					}
				}
				add_ruler_modifier = { name = aakhetist_aakhets_chosen duration = -1 }
			}
		}
	}

	after = { 
		clr_country_flag = aakhet_duel_greeneyes
		clr_country_flag = aakhet_duel_jar
		clr_country_flag = aakhet_duel_lordjammer
		clr_country_flag = aakhet_duel_mirror
		clr_country_flag = aakhet_duel_triple
		clr_country_flag = aakhet_duel_ultimate
		
		set_variable = { player_duel_score = 0 }
		set_variable = { aakhet_duel_score = 0 }
	}
}

#notification for fort ability
province_event = {
	id = aakhetist.39
	title = aakhetist.39.t
	desc = aakhetist.39.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	goto = ROOT

	option = {
		name = aakhetist.39.a
		tooltip = {
			change_siege = 25
			add_devastation = 50
		}
	}
}

#notification for dead generals/ruler
country_event = {
	id = aakhetist.40
	title = aakhetist.40.t
	desc = aakhetist.40.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes

	option = {
		name = aakhetist.40.a
		if = {
			limit = { is_monarch_leader = yes }
			random_list = {
				95 = { 
					kill_ruler = yes
				}
				5 = {
					modifier = {
						factor = 1.5
						mil = 2
					}
					modifier = {
						factor = 1.5
						mil = 4
					}
					modifier = {
						factor = 2
						mil = 6
					}
					modifier = {
						factor = 2
						OR = {
							ruler_has_personality = tactical_genius_personality
							ruler_has_personality = bold_fighter_personality
						}
					}
					modifier = {
						factor = 3
						ruler_has_personality = mage_personality
					}
					modifier = {
						factor = 1.5
						is_divination_2 = yes
					}
					modifier = {
						factor = 2.5
						is_divination_3 = yes
					}
					modifier = {
						factor = 2
						OR = {
							is_illusion_2 = yes
							is_illusion_3 = yes
						}
					}
					modifier = {
						factor = 1.5
						is_abjuration_1 = yes
					}
					modifier = {
						factor = 2.5
						is_abjuration_2 = yes
					}
					modifier = {
						factor = 4
						is_abjuration_3 = yes
					}
				}
			}
		}
		custom_tooltip = aakhetist.40.tooltip
		hidden_effect = {
			kill_leader = { type = general }
			kill_leader = { type = general }
			kill_leader = { type = general }
			kill_leader = { type = general }
			kill_leader = { type = general }
			kill_leader = { type = general }
			kill_leader = { type = general }
			kill_leader = { type = general }
			kill_leader = { type = general }
			kill_leader = { type = general }
		}
	}
}

################################
### Aakhet's Demands ###
################################

#Truces are for the weak
country_event = {
	id = aakhetist.50
	title = aakhetist.50.t
	desc = aakhetist.50.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = { 
		religion = aakhetist
		has_country_flag = current_aakhet_host
		is_at_war = no
		OR = {
			is_subject = no
			is_subject_of_type = tributary_state
			is_subject_of_type = tributary_state_anb
		}

		any_neighbor_country = {
			truce_with = ROOT
			NOT = {
				is_subject_of = ROOT
				alliance_with = ROOT
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		random_neighbor_country = {
			limit = { 
				truce_with = ROOT 
				NOT = {
					is_subject_of = ROOT
					alliance_with = ROOT
				}
			}
			save_event_target_as = event_country
		}
	}

	#obey
	option = {
		name = aakhetist.50.a
		declare_war_with_cb = {
			casus_belli = cb_aakhet_war
			who = event_target:event_country
		}
		hidden_effect = {
			add_stability = -1
			every_known_country = {
				limit = {
					OR = {
						same_continent = ROOT
						same_continent = event_target:event_country
					}
				}
				if = {
					limit = { religion_group = event_target:event_country }
					add_aggressive_expansion = { who = ROOT value = 5 }
				}
				if = {
					limit = { religion = event_target:event_country }
					add_aggressive_expansion = { who = ROOT value = 5 }
				}
				if = {
					limit = { primary_culture = event_target:event_country }
					add_aggressive_expansion = { who = ROOT value = 5 }
				}
				if = {
					limit = { culture_group = event_target:event_country }
					add_aggressive_expansion = { who = ROOT value = 5 }
				}
				add_aggressive_expansion = { who = ROOT value = 10 }
			}
		}
	}

	#no lol
	option = {
		name = aakhetist.50.b
		change_aakhet_approval = { value = -20 }
	}
}

#Go conquer smh
country_event = {
	id = aakhetist.51
	title = aakhetist.51.t
	desc = aakhetist.51.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes

	trigger = { 
		religion = aakhetist
		has_country_flag = current_aakhet_host
		is_at_war = no
		OR = {
			is_subject = no
			is_subject_of_type = tributary_state
			is_subject_of_type = tributary_state_anb
		}
		any_neighbor_country = {
			NOT = { 
				truce_with = ROOT
				is_subject_of = ROOT
				alliance_with = ROOT
			}
		}
	}

	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 1.5
			NOT = { manpower_percentage = 0.5 }
		}
	}

	immediate = {
		random_neighbor_country = {
			limit = { 
				NOT = { 
					truce_with = ROOT
					is_subject_of = ROOT
					alliance_with = ROOT
				}
			}
			save_event_target_as = event_country
		}
	}

	#obey
	option = {
		name = aakhetist.51.a
		declare_war_with_cb = {
			casus_belli = cb_aakhet_war
			who = event_target:event_country
		}
	}

	#no lol
	option = {
		name = aakhetist.51.b
		change_aakhet_approval = { value = -20 }
	}
}

#your heir sucks
country_event = {
	id = aakhetist.52
	title = aakhetist.52.t
	desc = aakhetist.52.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes

	trigger = { 
		religion = aakhetist
		has_country_flag = current_aakhet_host

		has_heir = yes
		heir_age = 10
		is_adventurer = no
	}

	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 1.25
			NOT = { heir_mil = 4 }
		}
		modifier = {
			factor = 1.25
			NOT = { heir_mil = 2 }
		}
	}

	option = {
		name = aakhetist.52.a
		remove_heir = {}
	}

	option = {
		name = aakhetist.52.b
		change_aakhet_approval = { value = -15 }
	}
}

#build a fort on flat terrain lol
country_event = {
	id = aakhetist.53
	title = aakhetist.53.t
	desc = aakhetist.53.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes

	trigger = { 
		religion = aakhetist
		has_country_flag = current_aakhet_host

		any_owned_province = {
			has_fort_building_trigger = no
			NOT = { has_construction = any }
			OR = {
				has_terrain = grasslands
				has_terrain = farmlands
				has_terrain = desert
				has_terrain = coastal_desert
				has_terrain = coastline
				has_terrain = savannah
				has_terrain = steppe
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		random_owned_province = {
			limit = { 
				has_fort_building_trigger = no
				NOT = { has_construction = any }
				OR = {
					has_terrain = grasslands
					has_terrain = farmlands
					has_terrain = desert
					has_terrain = coastal_desert
					has_terrain = coastline
					has_terrain = savannah
					has_terrain = steppe
				}
			}
			save_event_target_as = event_province
		}
	}
	goto = event_province

	option = {
		name = aakhetist.53.a
		event_target:event_province = {
			if = {
				limit = { ROOT = { mil_tech = 24 } }
				add_building_construction = { building = fort_18th cost = 1.5 speed = 2 }
			}
			else_if = {
				limit = { ROOT = { mil_tech = 19 } }
				add_building_construction = { building = fort_17th cost = 1.5 speed = 2 }
			}
			else_if = {
				limit = { ROOT = { mil_tech = 14 } }
				add_building_construction = { building = fort_16th cost = 1.5 speed = 2 }
			}
			else = { add_building_construction = { building = fort_15th cost = 1.5 speed = 2 } }
		}
	}

	option = {
		name = aakhetist.53.b
		change_aakhet_approval = { value = -15 }
	}
}

#your troops suck
country_event = {
	id = aakhetist.54
	title = aakhetist.54.t
	desc = aakhetist.54.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes

	trigger = { 
		religion = aakhetist
		has_country_flag = current_aakhet_host

		years_of_manpower = 5
	}

	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 1.5
			years_of_manpower = 50
		}
	}

	option = {
		name = aakhetist.54.a
		add_yearly_manpower = -5
		add_army_tradition = -5
	}

	option = {
		name = aakhetist.54.b
		change_aakhet_approval = { value = -20 }
	}
}

#your advisors are dumb
country_event = {
	id = aakhetist.55
	title = aakhetist.55.t
	desc = aakhetist.55.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes

	trigger = { 
		religion = aakhetist
		has_country_flag = current_aakhet_host

		has_adm_advisor = yes
		has_dip_advisor = yes
		has_mil_advisor = yes
	}

	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = aakhetist.55.a
		remove_advisor_by_category = ADM
		remove_advisor_by_category = DIP
		remove_advisor_by_category = MIL
	}

	option = {
		name = aakhetist.55.b
		change_aakhet_approval = { value = -15 }
	}
}

#release a march my dudes
country_event = {
	id = aakhetist.56
	title = aakhetist.56.t
	desc = aakhetist.56.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes

	trigger = { 
		religion = aakhetist
		has_country_flag = current_aakhet_host
		is_at_war = no
		OR = {
			is_subject = no
			is_subject_of_type = tributary_state
			is_subject_of_type = tributary_state_anb
		}
		any_owned_province = {
			any_core_country = {
				exists = no
			}
		}
		NOT = {
			calc_true_if = {
				amount = 3
				all_subject_country = {
					OR = {
						is_subject_of_type = vassal
						is_subject_of_type = march
						is_subject_of_type = client_vassal
						is_subject_of_type = client_march
						is_subject_of_type = medasi_subject
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = aakhetist.56.a
		random_owned_province = {
			limit = { any_core_country = { exists = no } }
			random_core_country = {
				limit = { exists = no }
				ROOT = {
					release = PREV
					create_subject = { subject_type = march who = PREV } 
				}
				hidden_effect = { save_event_target_as = event_country }
			}
		}
		hidden_effect = {
			event_target:event_country = {
				capital_scope = {
					event_target:event_country = {
						change_religion = PREV 
						change_primary_culture = PREV 
					}
				}
			}
		}
	}

	option = {
		name = aakhetist.56.b
		change_aakhet_approval = { value = -15 }
	}
}

#why manufactories bro, barracks better
country_event = {
	id = aakhetist.57
	title = aakhetist.57.t
	desc = aakhetist.57.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes

	trigger = { 
		religion = aakhetist
		has_country_flag = current_aakhet_host

		calc_true_if = {
			amount = 3
			all_owned_province = {
				OR = { has_building = wharf has_building = weapons has_building = textile has_building = tradecompany has_building = farm_estate has_building = mills has_building = plantations }
				NOT = { has_manpower_building_trigger = yes has_forcelimit_building_trigger = yes }
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					OR = { has_building = wharf has_building = weapons has_building = textile has_building = tradecompany has_building = farm_estate has_building = mills has_building = plantations }
					NOT = { has_manpower_building_trigger = yes has_forcelimit_building_trigger = yes }
				}
				save_event_target_as = event_province1
			}
			random_owned_province = {
				limit = {
					OR = { has_building = wharf has_building = weapons has_building = textile has_building = tradecompany has_building = farm_estate has_building = mills has_building = plantations }
					NOT = { has_manpower_building_trigger = yes has_forcelimit_building_trigger = yes province_id = event_target:event_province1 }
				}
				save_event_target_as = event_province2
			}
			random_owned_province = {
				limit = {
					OR = { has_building = wharf has_building = weapons has_building = textile has_building = tradecompany has_building = farm_estate has_building = mills has_building = plantations }
					NOT = { has_manpower_building_trigger = yes has_forcelimit_building_trigger = yes province_id = event_target:event_province1 province_id = event_target:event_province2 }
				}
				save_event_target_as = event_province3
			}
		}
	}

	option = {
		name = aakhetist.57.a
		event_target:event_province1 = {
			trigger_switch = {
				on_trigger = has_building

				wharf = { remove_building = wharf }
				weapons = { remove_building = weapons }
				textile = { remove_building = textile }
				tradecompany = { remove_building = tradecompany }
				farm_estate = { remove_building = farm_estate }
				mills = { remove_building = mills }
				plantations = { remove_building = plantations }
			}
			add_latest_building = { builder = ROOT manpower = yes }
		}
		event_target:event_province2 = {
			trigger_switch = {
				on_trigger = has_building

				wharf = { remove_building = wharf }
				weapons = { remove_building = weapons }
				textile = { remove_building = textile }
				tradecompany = { remove_building = tradecompany }
				farm_estate = { remove_building = farm_estate }
				mills = { remove_building = mills }
				plantations = { remove_building = plantations }
			}
			add_latest_building = { builder = ROOT manpower = yes }
		}
		event_target:event_province3 = {
			trigger_switch = {
				on_trigger = has_building

				wharf = { remove_building = wharf }
				weapons = { remove_building = weapons }
				textile = { remove_building = textile }
				tradecompany = { remove_building = tradecompany }
				farm_estate = { remove_building = farm_estate }
				mills = { remove_building = mills }
				plantations = { remove_building = plantations }
			}
			add_latest_building = { builder = ROOT army_forcelimit = yes }
		}
	}

	option = {
		name = aakhetist.57.b
		change_aakhet_approval = { value = -15 }
	}
}

#mages suck
country_event = {
	id = aakhetist.58
	title = aakhetist.58.t
	desc = aakhetist.58.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes

	trigger = { 
		religion = aakhetist
		has_country_flag = current_aakhet_host

		has_estate = estate_mages
	}

	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 1.5
			NOT = { estate_loyalty = { estate = estate_mages loyalty = 30 } }
		}
	}

	immediate = {
		hidden_effect = {
			if = {
				limit = { any_owned_province = { has_building = mage_tower } }
				random_owned_province = {
					limit = { has_building = mage_tower }
					save_event_target_as = event_province
				}
			}
		}
	}
	goto = event_province

	option = {
		name = aakhetist.58.a
		add_estate_loyalty = { estate = estate_mages loyalty = -30 }
		add_estate_influence_modifier = { estate = estate_mages desc = aakhetist_mage_purge influence = -20 duration = 3650 }
		if = {
			limit = { has_saved_event_target = event_province }
			event_target:event_province = { remove_building = mage_tower }
		}
	}

	option = {
		name = aakhetist.58.b
		change_aakhet_approval = { value = -20 }
	}
}

#your ally is dumb, rival them
country_event = {
	id = aakhetist.59
	title = aakhetist.59.t
	desc = aakhetist.59.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes

	trigger = { 
		religion = aakhetist
		has_country_flag = current_aakhet_host

		num_of_allies = 1
		any_ally = { NOT = { historical_friend_with = ROOT } }
		NOT = {
			calc_true_if = {
				amount = 3
				all_rival_country = { exists = yes }
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		hidden_effect = {
			random_ally = {
				limit = { NOT = { historical_friend_with = ROOT } }
				save_event_target_as = event_country
			}
		}
	}

	option = {
		name = aakhetist.59.a
		break_alliance = event_target:event_country
		add_rival = event_target:event_country
	}

	option = {
		name = aakhetist.59.b
		change_aakhet_approval = { value = -20 }
	}
}

#we need more ore bro, not money
country_event = {
	id = aakhetist.60
	title = aakhetist.60.t
	desc = aakhetist.60.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes

	trigger = { 
		religion = aakhetist
		has_country_flag = current_aakhet_host

		any_owned_province = {
			OR = {
				trade_goods = gems
				trade_goods = gold
				trade_goods = damestear
				trade_goods = paper
				trade_goods = spices
				trade_goods = glass
				trade_goods = ivory
				trade_goods = cloth
				trade_goods = dyes
			}
			base_production = 6
		}
		any_owned_province = {
			OR = {
				trade_goods = iron
				trade_goods = copper
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					OR = {
						trade_goods = gems
						trade_goods = gold
						trade_goods = damestear
						trade_goods = paper
						trade_goods = spices
						trade_goods = glass
						trade_goods = ivory
						trade_goods = cloth
						trade_goods = dyes
					}
					base_production = 6
				}
				save_event_target_as = event_province1
			}
			random_owned_province = {
				limit = {
					OR = {
						trade_goods = iron
						trade_goods = copper
					}
				}
				save_event_target_as = event_province2
			}
		}
	}
	goto = event_province1

	option = {
		name = aakhetist.60.a
		event_target:event_province1 = { add_base_production = -5 }
		event_target:event_province2 = { add_base_production = 3 }
	}

	option = {
		name = aakhetist.60.b
		change_aakhet_approval = { value = -15 }
	}
}