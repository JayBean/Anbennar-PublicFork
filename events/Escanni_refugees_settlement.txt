namespace = escanni_refugees_settlement

#100+ Base system event
country_event = {#The final flight of the Escanni
	id = escanni_refugees_settlement.100
	title = "escanni_refugees_settlement.100.t"
	picture = REFUGEES_ESCAPING_eventPicture

	desc = {
		trigger = {NOT = { is_year = 1449 } }
		desc = "escanni_refugees_settlement.100.d"
	}
	desc = {
		trigger = { is_year = 1449 }
		desc = "escanni_refugees_settlement.100.d2"
	}
	
	is_triggered_only = yes

	trigger = {
		NOT = { has_country_flag = escanni_refugees_arrived }
		any_owned_province = {
			has_escanni_refugees = yes
		}
	}
	
	immediate = {
		hidden_effect = {
			set_country_flag = escanni_refugees_arrived
		}
	}

	option = {
		name = escanni_refugees_settlement.100.a
		ai_chance = { factor = 1 }
		custom_tooltip = escanni_refugees_settlement_100_tt
		
		trigger = {
			NOT = { is_year = 1449 }
		}
		if = {
			limit = {
				OR = {
					tag = A46 #Arbaran
					tag = A13 #Gawed
				}
			}
			add_country_modifier = {
				name = escanni_refugee_integration
				duration = -1
			}
		}
		else_if = {
			limit = {
				tag = A59 #Corvuria
			}
			add_country_modifier = {
				name = escanni_refugee_repatriation
				duration = -1
			}
		}
		else = {
			add_country_modifier = {
				name = escanni_refugee_tolerance
				duration = -1
			}
		}
	}

	option = {
		name = escanni_refugees_settlement.100.b
		ai_chance = { factor = 1 }
		
		trigger = {
			is_year = 1449
		}

		add_adm_power = -20
		add_dip_power = -20

		custom_tooltip = escanni_refugees_settlement_100_tt
		add_country_modifier = {
			name = escanni_refugee_integration
			duration = -1
		}
	}

	option = {
		name = escanni_refugees_settlement.100.c
		ai_chance = { factor = 1 }
		
		trigger = {
			is_year = 1449
		}
		custom_tooltip = escanni_refugees_settlement_100_tt
		add_country_modifier = {
			name = escanni_refugee_tolerance
			duration = -1
		}
	}

	option = {
		name = escanni_refugees_settlement.100.e
		ai_chance = { factor = 1 }
		
		trigger = {
			is_year = 1449
		}
		add_treasury = -20

		custom_tooltip = escanni_refugees_settlement_100_tt
		add_country_modifier = {
			name = escanni_refugee_repatriation
			duration = -1
		}
	}
}
country_event = {#Escann Stands
	id = escanni_refugees_settlement.101
	title = "escanni_refugees_settlement.101.t"
	picture = NOBLE_ESTATE_DEMANDS_eventPicture

	desc = "escanni_refugees_settlement.101.d"
	
	is_triggered_only = yes
	trigger = {
		NOT = { has_country_flag = escann_stands_received }
	}

	immediate = {
		hidden_effect = {
			set_country_flag = escann_stands_received
		}
	}

	option = {
		name = escanni_refugees_settlement.101.a
		ai_chance = { factor = 1 }

		add_splendor = 20
		add_country_modifier = {
			name = escanni_end_of_greentide
			duration = 7300
		}
	}
}
country_event = {#The call of home
	id = escanni_refugees_settlement.102
	title = "escanni_refugees_settlement.102.t"
	picture = COLONIZATION_eventPicture
	desc = "escanni_refugees_settlement.102.d"

	is_triggered_only = yes

	trigger = {
		has_global_flag = new_escanni_adventurer_kingdoms
		NOT = {
			has_country_flag = escanni_refugees_left
		}
		calc_true_if = {
			escann_proper = {
				type = all
				NOT = { #NOR
					is_empty = yes
					has_province_flag = escanni_migration_target
				}
				owner = {
					OR = {
						NOT = { is_migratory_tribe = yes }
						num_of_cities = 2
					}
					NOT = { has_country_modifier = monstrous_nation }
				}
			}
			amount = 5
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		hidden_effect = {
			if = {
				limit = {
					calc_true_if = {
						escann_proper = {
							type = all
							NOT = { #NOR
								is_empty = yes
								has_province_flag = escanni_migration_target
							}
							owner = {
								OR = {
									NOT = { is_migratory_tribe = yes }
									num_of_cities = 2
								}
								NOT = { has_country_modifier = monstrous_nation }
							}
						}
						amount = 5
					}
				}
				define_event_targets_escanni_refugees_2_center = yes
				set_country_flag = escanni_refugees_left
			}
			else = {
				set_country_flag = escanni_ctd_buster
			}
		}
	}

	option = { #Try to convince them to stay
		name = escanni_refugees_settlement.102.a

		trigger = {
			has_country_modifier = escanni_refugee_integration
			NOT = { has_country_flag = escanni_ctd_buster }
		}
		ai_chance = { factor = 1 }
		add_dip_power = -30
		if = {
			limit = { has_saved_event_target = escanni_center_target_1 }
			event_target:escanni_center_target_1 = {
				random_list = {
					75 = {#stay
						modifier = {
							factor = 2
							ROOT = {
								OR = {
									employed_advisor = {
										culture = castellyrian
									}
									employed_advisor = {
										culture = marcher
									}
								}
							}
						}
						modifier = {
							factor = 2
							ROOT = {
								any_owned_province = {
									OR = {
										has_province_modifier = escanni_jousting_ground
										has_province_modifier = escanni_center_of_learning
									}
								}
							}
						}
						custom_tooltip = escanni_not_migrating_tt
						if = {
							limit = { has_saved_event_target = escanni_migration_target_1 } 
							event_target:escanni_migration_target_1 = {
								clr_province_flag = escanni_migration_target				
							}
						}
						if = {
							limit = { has_saved_event_target = escanni_migration_target_2 }
							event_target:escanni_migration_target_2 = {
								clr_province_flag = escanni_migration_target				
							}
						}
					}
					25 = {#leave
						if = {
							limit = { has_saved_event_target = escanni_center_target_1 }
							event_target:escanni_center_target_1 = {
								decrease_escanni_refugee_settlement_size = yes
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_center_target_1
				has_saved_event_target = escanni_center_target_2
				event_target:escanni_center_target_2 = { NOT = { province_id = event_target:escanni_center_target_1 } }
			}
			event_target:escanni_center_target_2 = {
				random_list = {
					75 = {#stay
						modifier = {
							factor = 2
							ROOT = {
								OR = {
									employed_advisor = {
										culture = castellyrian
									}
									employed_advisor = {
										culture = marcher
									}
								}
							}
						}
						modifier = {
							factor = 2
							ROOT = {
								any_owned_province = {
									OR = {
										has_province_modifier = escanni_jousting_ground
										has_province_modifier = escanni_center_of_learning
									}
								}
							}
						}
						custom_tooltip = escanni_not_migrating_tt
						if = {
							limit = { has_saved_event_target = escanni_migration_target_3 }
							event_target:escanni_migration_target_3 = {
								clr_province_flag = escanni_migration_target
							}
						}
						if = {
							limit = { has_saved_event_target = escanni_migration_target_4 }
							event_target:escanni_migration_target_4 = {
								clr_province_flag = escanni_migration_target
							}
						}
					}
					25 = {#leave
						if = {
							limit = { has_saved_event_target = escanni_center_target_2 }
							event_target:escanni_center_target_2 = {
								decrease_escanni_refugee_settlement_size = yes
							}
						}
					}
				}
			}
		}
	}

	option = { #Good riddance
		name = escanni_refugees_settlement.102.b
		ai_chance = { factor = 1 }
		trigger = {
			NOT = { has_country_flag = escanni_ctd_buster }
		}
		if = {
			limit = { has_saved_event_target = escanni_center_target_1 }
			event_target:escanni_center_target_1 = {
				decrease_escanni_refugee_settlement_size = yes
				random_list = {
					60 = {#leave
						custom_tooltip = escanni_refugees_settlement_102_c_tt
					}
					40 = {#stay
						if = {
							limit = { has_saved_event_target = escanni_migration_target_1 }
							event_target:escanni_migration_target_1 = {
								clr_province_flag = escanni_migration_target				
							}
						}
						if = {
							limit = { has_saved_event_target = escanni_migration_target_2 }
							event_target:escanni_migration_target_2 = {
								clr_province_flag = escanni_migration_target	
							}
						}
						custom_tooltip = escanni_refugees_settlement_102_b_tt
					}
				}
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_center_target_2
				has_saved_event_target = escanni_center_target_1
				event_target:escanni_center_target_2 = { NOT = { province_id = event_target:escanni_center_target_1 } }
			}
			event_target:escanni_center_target_2 = {
				decrease_escanni_refugee_settlement_size = yes
			}
			random_list = {
				60 = {#reaches Escann
					custom_tooltip = escanni_refugees_settlement_102_c_tt
				}
				40 = {#die in travel
					if = {
						limit = { has_saved_event_target = escanni_migration_target_3 }
						event_target:escanni_migration_target_3 = {
							clr_province_flag = escanni_migration_target
						}
					}
					if = {
						limit = { has_saved_event_target = escanni_migration_target_4 }
						event_target:escanni_migration_target_4 = {
							clr_province_flag = escanni_migration_target		
						}
					}
					custom_tooltip = escanni_refugees_settlement_102_b_tt
				}
			}
		}
	}

	option = { #We will provide an escort, to protect their convoy
		name = escanni_refugees_settlement.102.c
		ai_chance = { factor = 1 }
		trigger = {
			NOT = { has_country_flag = escanni_ctd_buster }
		}

		if = {
			limit = {
				total_development = 200
			}
			add_treasury = -60
		}
		else_if = {
			limit = {
				total_development = 100
			}
			add_treasury = -40
		}
		else = {
			add_treasury = -20
		}
		add_prestige = 5
		
		every_known_country = {
			limit = {
				capital_scope = { province_group = escann_proper }
				NOT = {
					has_country_modifier = monstrous_nation
				}
			}
			add_opinion = {
				who = ROOT
				modifier = escorted_refugees_back
			}
		}
		if = {
			limit = { has_saved_event_target = escanni_center_target_1 }
			event_target:escanni_center_target_1 = {
				decrease_escanni_refugee_settlement_size = yes
				custom_tooltip = escanni_refugees_settlement_102_c_tt
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_center_target_2
				has_saved_event_target = escanni_center_target_1
				event_target:escanni_center_target_2 = { NOT = { province_id = event_target:escanni_center_target_1 } }
			}
			event_target:escanni_center_target_2 = {
				decrease_escanni_refugee_settlement_size = yes
			}
			custom_tooltip = escanni_refugees_settlement_102_c_tt
		}
	}

	option = { #CTD buster
		name = escanni_refugees_settlement.102.e
		ai_chance = { factor = 1 }
		trigger = {
			has_country_flag = escanni_ctd_buster
		}
		clr_country_flag = escanni_ctd_buster
	}
}
country_event = {#Result of refugee policy
	id = escanni_refugees_settlement.103
	title = "escanni_refugees_settlement.103.t"
	picture = CITY_DEVELOPMENT_eventPicture
	desc = {
		trigger = { has_country_modifier =  escanni_refugee_integration }
		desc = "escanni_refugees_settlement.103.d"
	}
	desc = {
		trigger = { has_country_modifier =  escanni_refugee_tolerance }
		desc = "escanni_refugees_settlement.103.d2"
	}
	desc = {
		trigger = { has_country_modifier =  escanni_refugee_repatriation }
		desc = "escanni_refugees_settlement.103.d3"
	}

	is_triggered_only = yes

	trigger = {
		any_owned_province = {#Won't trigger if you lost the center in the meantime
			has_escanni_refugees = yes
		}
		calc_true_if = {
			escann_proper = {
				type = all
				NOT = {
					is_empty = yes
					has_province_flag = escanni_migration_target
				}
				owner = {
					OR = {
						NOT = { is_migratory_tribe = yes }
						num_of_cities = 2
					}
					NOT = { has_country_modifier = monstrous_nation }
				}
			}
			amount = 3
		}
	}

	immediate = {
		hidden_effect = {
			if = {
				limit = {
					calc_true_if = {
						escann_proper = {
							type = all
							NOT = {
								is_empty = yes
								has_province_flag = escanni_migration_target
							}
							owner = {
								OR = {
									NOT = { is_migratory_tribe = yes }
									num_of_cities = 2
								}
								NOT = { has_country_modifier = monstrous_nation }
							}
						}
						amount = 3
					}
				}
				define_event_targets_escanni_refugees_1_center = yes
			}
			else = {
				set_country_flag = escanni_ctd_buster
			}
		}
	}

	option = {#We shall escort them safely to their new home
		name = escanni_refugees_settlement.103.a
		ai_chance = { factor = 20 }
		trigger = {
			OR = {
				has_country_modifier = escanni_refugee_repatriation
				has_country_modifier = escanni_refugee_tolerance
			}
			NOT = { has_country_flag = escanni_ctd_buster }
		}
		add_treasury = -30
		add_adm_power = -15
		add_prestige = 10
		if = {
			limit = { has_saved_event_target = escanni_center_target_1 }
			event_target:escanni_center_target_1 = {
				decrease_escanni_refugee_settlement_size = yes
			}
		}
	}
	option = {#They are free to go, but we will not help them
		name = escanni_refugees_settlement.103.b
		ai_chance = { factor = 1 }
		trigger = {
			has_country_modifier = escanni_refugee_repatriation
			NOT = { has_country_flag = escanni_ctd_buster }
		}
		add_prestige = -5
		if = {
			limit = { has_saved_event_target = escanni_center_target_1 }
			event_target:escanni_center_target_1 = {
				decrease_escanni_refugee_settlement_size = yes
			}
		}
		random_list = {
			60 = {#reaches Escann
				custom_tooltip = escanni_refugees_settlement_102_c_tt
			}
			40 = {#die in travel
				if = {
					limit = { has_saved_event_target = escanni_migration_target_1 }
					event_target:escanni_migration_target_1 = {
						clr_province_flag = escanni_migration_target				
					}
				}
				if = {
					limit = { has_saved_event_target = escanni_migration_target_2 }
					event_target:escanni_migration_target_2 = {
						clr_province_flag = escanni_migration_target	
					}
				}
				custom_tooltip = escanni_refugees_settlement_102_b_tt
			}
		}
	}
	option = {#Try to better their situation
		name = escanni_refugees_settlement.103.c
		ai_chance = { factor = 3 }
		trigger = {
			has_country_modifier = escanni_refugee_tolerance
			NOT = { has_country_flag = escanni_ctd_buster }
		}
		add_treasury = -45
		add_adm_power = -25
		random_list = {
			20 = {#integrate
				if = {
					limit = { has_saved_event_target = escanni_center_target_1 }
					event_target:escanni_center_target_1 = {
						decrease_escanni_refugee_settlement_size = yes
					}
				}
				if = {
					limit = { has_saved_event_target = escanni_effect_target_1 }
					event_target:escanni_effect_target_1 = {
						add_random_development = 1
						add_local_autonomy = 10
					}
				}
				if = {
					limit = {
						has_saved_event_target = escanni_effect_target_2
						event_target:escanni_effect_target_2 = {
						NOT = { province_id = event_target:escanni_effect_target_1 }
						}
					}
					event_target:escanni_effect_target_2 = {
						add_random_development = 1
						add_local_autonomy = 10
					}
				}
				if = {
					limit = { has_saved_event_target = escanni_migration_target_1 }
					event_target:escanni_migration_target_1 = {
						clr_province_flag = escanni_migration_target				
					}
				}
				if = {
					limit = { has_saved_event_target = escanni_migration_target_2 }
					event_target:escanni_migration_target_2 = {
						clr_province_flag = escanni_migration_target	
					}
				}
			}
			20 = {#leave
				custom_tooltip = escanni_refugees_settlement_102_c_tt
			}
			60 = {#stay
				custom_tooltip = escanni_not_migrating_tt
				if = {
					limit = { has_saved_event_target = escanni_migration_target_1 }
					event_target:escanni_migration_target_1 = {
						clr_province_flag = escanni_migration_target			
					}
				}
				if = {
					limit = { has_saved_event_target = escanni_migration_target_2 }
					event_target:escanni_migration_target_2 = {
						clr_province_flag = escanni_migration_target	
					}
				}
			}
		}
	}
	option = {#We welcome our new citizens with open arms
		name = escanni_refugees_settlement.103.e
		ai_chance = { factor = 100 }
		trigger = {
			has_country_modifier = escanni_refugee_integration
			NOT = { has_country_flag = escanni_ctd_buster }
		}
		add_treasury = -40
		add_adm_power = -20
		random_list = {
			5 = {#integrate
				if = {
					limit = { has_saved_event_target = escanni_center_target_1 }
					event_target:escanni_center_target_1 = {
						decrease_escanni_refugee_settlement_size = yes
					}
				}
				if = {
					limit = { has_saved_event_target = escanni_effect_target_1 }
					event_target:escanni_effect_target_1 = {
						add_random_development = 1
						add_local_autonomy = 10
					}
				}
				if = {
					limit = {
						has_saved_event_target = escanni_effect_target_2
						
					}
					event_target:escanni_effect_target_2 = {
						add_random_development = 1
						add_local_autonomy = 10
					}
				}
			}
			5 = {#stay
				custom_tooltip = escanni_not_migrating_tt
			}
		}
		if = {
			limit = { has_saved_event_target = escanni_migration_target_1 }
			event_target:escanni_migration_target_1 = {
				clr_province_flag = escanni_migration_target			
			}
		}
		if = {
			limit = { has_saved_event_target = escanni_migration_target_2 }
			event_target:escanni_migration_target_2 = {
				clr_province_flag = escanni_migration_target
			}
		}
	}
	option = { #CTD buster
		name = escanni_refugees_settlement.102.e
		ai_chance = { factor = 1 }
		trigger = {
			has_country_flag = escanni_ctd_buster
		}
		clr_country_flag = escanni_ctd_buster
	}
}

#300+ Events on Wescann side
country_event = { #event manager
	id = escanni_refugees_settlement.300
	title = "escanni_refugees_settlement.300.t"
	picture = REFUGEES_ESCAPING_eventPicture
	desc = "escanni_refugees_settlement.300.d"
	
	hidden = yes
	
	is_triggered_only = yes

	trigger = {
		NOT = { has_global_flag = escanni_migration_finished }
		NOT = { has_country_modifier = escanni_timer_mod }
		capital_scope = { continent = europe }
		any_owned_province = {
			province_group = escanni_refugee_centers
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	option = { #Event trigger random_list
		name = escanni_refugees_settlement.300.a
		trigger = {
			OR = {
				has_country_flag = escanni_refugees_arrived
				AND = {
					NOT = { has_global_flag = new_escanni_adventurer_kingdoms }
					has_country_flag = escanni_refugees_left
				}
			}
			any_owned_province = {
				province_group = escanni_refugee_centers
			}
		}
		ai_chance = { factor = 1 }
		random_list = {
			1 = { #If no other events are available the refugees wil get that
				modifier = {
					factor = 0
					OR = {
						NOT = { has_country_flag = escanni_refugees_left }
						has_country_flag = had_escanni_refugee_policy
					}
				}
				random = {
					chance = 60
					country_event = {
						id = escanni_refugees_settlement.103 #result of refugee policy 
					}
				}
			}
			1 = { #If you conquer a province with refugees after you lost your policy it gives the policy back
				modifier = {
					factor = 0
					NOT = { has_country_flag = had_escanni_refugee_policy }
				}
				add_country_modifier = {
					name = escanni_refugee_tolerance
					duration = -1
				}
				clr_country_flag = had_escanni_refugee_policy
			}
			100 = {
				modifier = {
					factor = 0
					OR = {
						has_country_flag = escanni_robbers_event
						NOT = {
							any_owned_province = {
								province_group = escanni_refugee_centers
								has_escanni_refugees = yes
								unrest = 0
							}
						}
						has_country_flag = had_escanni_refugee_policy
					}
				}
				country_event = {
					id = escanni_refugees_settlement.301 #Infamous robbers
				}
			}
			100 = {
				modifier = {
					factor = 0
					OR = {
						has_country_flag = escanni_artisans_event
						has_country_modifier = escanni_refugee_integration
						has_country_flag = had_escanni_refugee_policy
					}
				}
				country_event = {
					id = escanni_refugees_settlement.302 #Artisans complain
				}
			}
			100 = {
				modifier = {
					factor = 0
					OR = {
						has_country_flag = escanni_stories_event
						has_country_modifier = escanni_refugee_repatriation
						has_country_flag = had_escanni_refugee_policy
					}
				}
				country_event = {
					id = escanni_refugees_settlement.303 #Stories of the Greentide
				}
			}
			100 = {
				modifier = {
					factor = 0
					OR = {
						has_country_flag = escanni_distinguished_event
						has_country_modifier = escanni_refugee_repatriation
						has_country_flag = had_escanni_refugee_policy
					}
				}
				country_event = {
					id = escanni_refugees_settlement.304 #Distinguished refugees
				}
			}
			100 = {
				modifier = {
					factor = 0
					OR = {
						has_country_flag = escanni_exiled_soldiers_event
						NOT = { has_country_modifier = escanni_refugee_integration }
						has_country_flag = had_escanni_refugee_policy
					}
				}
				country_event = {
					id = escanni_refugees_settlement.305 #Exiled soldiers
				}
			}
			100 = {
				modifier = {
					factor = 0
					OR = {
						has_country_flag = escanni_foodsupplies_event
						has_country_flag = had_escanni_refugee_policy
					}
				}
				country_event = {
					id = escanni_refugees_settlement.306 #Food supplies strained
				}
			}
			100 = {
				modifier = {
					factor = 0
					OR = {
						has_country_flag = escanni_hedgemages_event
						NOT = { has_estate = estate_mages }
						has_country_flag = had_escanni_refugee_policy
					}
				}
				country_event = {
					id = escanni_refugees_settlement.307 #Hedgemages
				}
			}
			200 = {
				modifier = {
					factor = 0
					OR = {
						has_institution = renaissance
						has_country_flag = escanni_scholars_event
						NOT = { has_country_modifier = escanni_refugee_repatriation }
						has_country_flag = had_escanni_refugee_policy
					}
				}
				country_event = {
					id = escanni_refugees_settlement.308 #Escanni scholars
				}
			}
			100 = {
				modifier = {
					factor = 0
					OR = {
						has_country_flag = escanni_sickness_event
						has_country_flag = had_escanni_refugee_policy
					}
				}
				country_event = {
					id = escanni_refugees_settlement.309 #Sickness in the camps
				}
			}
			100 = {
				modifier = {
					factor = 0
					OR = {
						has_country_flag = escanni_corinite_ideas_event
						NOT = { is_religion_enabled = corinite }
						has_country_flag = had_escanni_refugee_policy
					}
				}
				country_event = {
					id = escanni_refugees_settlement.310 #Sickness in the camps
				}
			}
		}
	}
	option = { #Big refugee wave
		name = escanni_refugees_settlement.300.b
		trigger = {
			has_global_flag = new_escanni_adventurer_kingdoms
			has_country_flag = escanni_refugees_arrived
			NOT = { has_country_flag = escanni_refugees_left }
			any_owned_province = {
				province_group = escanni_refugee_centers
				has_escanni_refugees = yes
			}
		}
		ai_chance = { factor = 1 }
		country_event = {
			id = escanni_refugees_settlement.102 #The call of Home
		}
		set_country_flag = escanni_refugees_left
	}
	option = { #Cleanup option
		name = escanni_refugees_settlement.300.c
		trigger = {
			has_country_flag = escanni_refugees_arrived
			NOT = {
				any_owned_province = {
					province_group = escanni_refugee_centers
					has_escanni_refugees = yes
				}
			}
		}
		ai_chance = { factor = 1 }
		if = {
			limit = { has_country_modifier = escanni_refugee_repatriation }
			remove_country_modifier = escanni_refugee_repatriation
			set_country_flag = had_escanni_refugee_policy
		}
		else_if = {
			limit = { has_country_modifier = escanni_refugee_tolerance }
			remove_country_modifier = escanni_refugee_tolerance
			set_country_flag = had_escanni_refugee_policy
		}
		else = {
			remove_country_modifier = escanni_refugee_integration
			set_country_flag = had_escanni_refugee_policy
		}
		if = { #cleanup of flags
			limit = {
				245 = { #Freecestir
					NOT = {
						check_variable = {
							which = NumberOfRefugeesLeft
							value = 1
						}
					}
				}
			}
			escanni_refugee_cleanup = yes
		}
	}
	option = { #Setup policy the first time
		name = escanni_refugees_settlement.300.e
		trigger = {
			NOT = { has_country_flag = escanni_refugees_arrived } 
		}
		ai_chance = { factor = 1 }
		country_event = {
			id = escanni_refugees_settlement.100
		}
	}
}
country_event = { #infamous robbers
	id = escanni_refugees_settlement.301
	title = "escanni_refugees_settlement.301.t"
	picture = ANGRY_MOB_eventPicture
	desc = "escanni_refugees_settlement.301.d"
	
	is_triggered_only = yes

	trigger = {#trigger is in the factors of the event manager
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		hidden_effect = {
			set_country_flag = escanni_robbers_event
			random_owned_province = {
				limit = { has_escanni_refugees = yes }
				save_event_target_as = escanni_center_target_1
				random_area_province = {
					limit = {
						owned_by = ROOT
					}
					save_event_target_as = escanni_effect_target_1
				}
				random_area_province = {
					limit = {
						NOT = { province_id = event_target:escanni_effect_target_1 } 
						owned_by = ROOT
					}
					save_event_target_as = escanni_effect_target_2
				}
				random_area_province = {
					limit = {
						has_saved_event_target = escanni_effect_target_2
						NOT = { province_id = event_target:escanni_effect_target_1 } 
						NOT = { province_id = event_target:escanni_effect_target_2 }
						owned_by = ROOT
					}
					save_event_target_as = escanni_effect_target_3
				}
			}
			country_event = {
				id = escanni_refugees_settlement.103
				days = 2738
			}
			add_country_modifier = {
				name = escanni_timer_mod
				duration = 5470
				hidden = yes
			}
		}
	}

	option = {
		name = escanni_refugees_settlement.301.a
		ai_chance = {
			factor = 6
		}
		add_country_modifier = {
			name = escanni_soothed_the_masses
			duration = 5475
		}
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = -10
		}
		event_target:escanni_effect_target_1 = {
			add_province_modifier = {
				name = upset_escanni_refugees
				duration = 5475
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_2
				
			}
			event_target:escanni_effect_target_2 = {
				add_province_modifier = {
					name = upset_escanni_refugees
					duration = 5475
				}
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_3
				
			}
			event_target:escanni_effect_target_3 = {
				add_province_modifier = {
					name = upset_escanni_refugees
					duration = 5475
				}
			}
		}
		random = {
			chance = 5
			if = {
				limit = { has_saved_event_target = escanni_center_target_1 }
				event_target:escanni_center_target_1 = {
					decrease_escanni_refugee_settlement_size = yes 
				}
			}
		}
		decrease_escanni_integration_policy = yes
	}
	option = {
		name = escanni_refugees_settlement.301.b
		ai_chance = {
			factor = 6
		}
		add_prestige = -10
		add_splendor = -20
		add_treasury = -40
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = -10
		}
		add_country_modifier = {
			name = escanni_upset_the_masses
			duration = 5475
		}
		event_target:escanni_effect_target_1 = {
			add_province_modifier = {
				name = appeased_escanni_refugees
				duration = 5475
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_2
				
			}
			event_target:escanni_effect_target_2 = {
				add_province_modifier = {
					name = appeased_escanni_refugees
					duration = 5475
				}
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_3
				
			}
			event_target:escanni_effect_target_3 = {
				add_province_modifier = {
					name = appeased_escanni_refugees
					duration = 5475
				}
			}
		}
		random_list = {
			95 = {}
			5 = {
				if = {
					limit = { has_saved_event_target = escanni_center_target_1 }
					event_target:escanni_center_target_1 = {
						decrease_escanni_refugee_settlement_size = yes
					}
				}
				if = {
					limit = { has_saved_event_target = escanni_effect_target_1 }
					event_target:escanni_effect_target_1 = {
						add_random_development = 1
					}
				}
				if = {
					limit = {
						has_saved_event_target = escanni_effect_target_2
						
					}
					event_target:escanni_effect_target_2 = {
						add_random_development = 1
					}
				}
				if = {
					limit = {
						has_saved_event_target = escanni_effect_target_3
						
					}
					event_target:escanni_effect_target_3 = {
						add_random_development = 1
					}
				}
			}
		}
		increase_escanni_integration_policy = yes
	}
	option = {
		name = escanni_refugees_settlement.301.c
		ai_chance = {
			factor = 6
		}
		if = {
			limit = { event_target:escanni_effect_target_1 = { NOT = { has_province_modifier = escanni_jousting_ground }}}
			event_target:escanni_effect_target_1 = { add_province_modifier = { name = escanni_jousting_ground duration = 3600 }}
		}
		else = {
			random_owned_province = { 
				limit = { NOT = { has_province_modifier = escanni_jousting_ground } }
				add_province_modifier = { name = escanni_jousting_ground duration = 3600 }
			}
		}
		random_list = {
			60 = {
				add_estate_loyalty = {
					estate = estate_nobles
					loyalty = -10
				}
				add_prestige = -5
				create_general = {
					tradition = 50
					culture = marcher
				}
				event_target:escanni_effect_target_1 = {
					add_province_modifier = {
						name = appeased_escanni_refugees
						duration = 5475
					}
				}
				if = {
					limit = {
						has_saved_event_target = escanni_effect_target_2
						
					}
					event_target:escanni_effect_target_2 = {
						add_province_modifier = {
							name = appeased_escanni_refugees
							duration = 5475
						}
					}
				}
				if = {
					limit = {
						has_saved_event_target = escanni_effect_target_3
						
					}
					event_target:escanni_effect_target_3 = {
						add_province_modifier = {
							name = appeased_escanni_refugees
							duration = 5475
						}
					}
				}
			}
			35 = {
				add_army_tradition = 5
				add_prestige = 5
				create_general = {
					tradition = 35
					culture = ROOT
				}
				event_target:escanni_effect_target_1 = {
					add_province_modifier = {
						name = upset_escanni_refugees
						duration = 5475
					}
				}
				if = {
					limit = {
						has_saved_event_target = escanni_effect_target_2
						
					}
					event_target:escanni_effect_target_2 = {
						add_province_modifier = {
							name = upset_escanni_refugees
							duration = 5475
						}
					}
				}
				if = {
					limit = {
						has_saved_event_target = escanni_effect_target_3
						
					}
					event_target:escanni_effect_target_3 = {
						add_province_modifier = {
							name = upset_escanni_refugees
							duration = 5475
						}
					}
				}
			}
			5 = {}
		}
	}
	option = {
		name = escanni_refugees_settlement.301.e
		ai_chance = {
			factor = 1
		}
		add_treasury = 20
		event_target:escanni_center_target_1 = {
			decrease_escanni_refugee_settlement_size = yes
			if = {
				limit = {
					event_target:escanni_center_target_1 = {
						has_escanni_refugees = yes
					}
				}
				event_target:escanni_effect_target_1 = {
					add_province_modifier = {
						name = escanni_refugee_discriminate_escann
						duration = 5475
					}
				}
				if = {
					limit = {
						has_saved_event_target = escanni_effect_target_2
						
					}
					event_target:escanni_effect_target_2 = {
						add_province_modifier = {
							name = escanni_refugee_discriminate_escann
							duration = 5475
						}
					}
				}
				if = {
					limit = {
						has_saved_event_target = escanni_effect_target_3
						
					}
					event_target:escanni_effect_target_3 = {
						add_province_modifier = {
							name = escanni_refugee_discriminate_escann
							duration = 5475
						}
					}
				}
			}
		}
		decrease_escanni_integration_policy = yes
		random_list = {
			20 = {
				custom_tooltip = escanni_refugees_settlement_102_c_tt
			}
			80 = {
				custom_tooltip = escanni_refugees_settlement_102_b_tt
			}
		}
	}
}
country_event = { #artisans complain
	id = escanni_refugees_settlement.302
	title = "escanni_refugees_settlement.302.t"
	picture = DEBATE_REPUBLICAN_eventPicture
	desc = "escanni_refugees_settlement.302.d"
	
	is_triggered_only = yes

	trigger = {#trigger is in the factors of the event manager
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		hidden_effect = {
			set_country_flag = escanni_artisans_event
			random_owned_province = {
				limit = { has_escanni_refugees = yes }
				save_event_target_as = escanni_center_target_1
				random_area_province = {
					limit = {
						owned_by = ROOT
					}
					save_event_target_as = escanni_effect_target_1
				}
				random_area_province = {
					limit = { 
						NOT = { province_id = event_target:escanni_effect_target_1 } 
						owned_by = ROOT
					}
					save_event_target_as = escanni_effect_target_2
				}
				random_area_province = {
					limit = {
						has_saved_event_target = escanni_effect_target_2 
						NOT = { province_id = event_target:escanni_effect_target_1 } 
						NOT = { province_id = event_target:escanni_effect_target_2 }
						owned_by = ROOT
					}
					save_event_target_as = escanni_effect_target_3
				}
			}
			country_event = {
				id = escanni_refugees_settlement.103
				days = 2738
			}
			add_country_modifier = {
				name = escanni_timer_mod
				duration = 5470
				hidden = yes
			}
		}
	}

	option = {
		name = escanni_refugees_settlement.302.a
		ai_chance = {
			factor = 1
		}
		add_estate_loyalty = {
			estate = estate_burghers
			loyalty = -10
		}
		add_country_modifier = {
			name = escanni_unrestp_prodp_statecostn_mod
			duration = 5475
		}
		event_target:escanni_effect_target_1 = {
			add_province_modifier = {
				name = appeased_escanni_refugees
				duration = 5475
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_2
				
			}
			event_target:escanni_effect_target_2 = {
				add_province_modifier = {
					name = appeased_escanni_refugees
					duration = 5475
				}
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_3
				
			}
			event_target:escanni_effect_target_3 = {
				add_province_modifier = {
					name = appeased_escanni_refugees
					duration = 5475
				}
			}
		}
	}
	option = {
		name = escanni_refugees_settlement.302.b
		ai_chance = {
			factor = 1
		}
		add_estate_loyalty = {
			estate = estate_burghers
			loyalty = 5
		}
		add_country_modifier = {
			name = escanni_unrestn_tradep_mod
			duration = 5475
		}
		event_target:escanni_effect_target_1 = {
			add_province_modifier = {
				name = upset_escanni_refugees
				duration = 5475
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_2
				
			}
			event_target:escanni_effect_target_2 = {
				add_province_modifier = {
					name = upset_escanni_refugees
					duration = 5475
				}
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_3
				
			}
			event_target:escanni_effect_target_3 = {
				add_province_modifier = {
					name = upset_escanni_refugees
					duration = 5475
				}
			}
		}
		decrease_escanni_integration_policy = yes
	}
	option = { #special 1 - greedy/cruel
		name = escanni_refugees_settlement.302.c
		highlight = yes
		trigger = {
			OR = {
				ruler_has_personality = cruel_personality
				ruler_has_personality = greedy_personality
			}
		}
		ai_chance = {
			factor = 6
		}
		add_treasury = 50
		add_prestige = -5
		event_target:escanni_effect_target_1 = {
			add_province_modifier = {
				name = exploited_escanni_refugees
				duration = 5475
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_2
				
			}
			event_target:escanni_effect_target_2 = {
				add_province_modifier = {
					name = exploited_escanni_refugees
					duration = 5475
				}
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_3
				
			}
			event_target:escanni_effect_target_3 = {
				add_province_modifier = {
					name = exploited_escanni_refugees
					duration = 5475
				}
			}
		}
		decrease_escanni_integration_policy = yes
	}
	option = { #special 2 - esmari or giberd
		name = escanni_refugees_settlement.302.e
		highlight = yes
		trigger = {
			capital_scope = {
				region = esmaria_region
			}
			NOT = { tag = A73 } #Silverforge
		}
		ai_chance = {
			factor = 6
		}
		add_prestige = 5
		add_country_modifier = {
			name = escanni_prodp_mod
			duration = 5475
		}
		event_target:escanni_effect_target_1 = {
			add_province_modifier = {
				name = appeased_escanni_refugees
				duration = 5475
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_2
				
			}
			event_target:escanni_effect_target_2 = {
				add_province_modifier = {
					name = appeased_escanni_refugees
					duration = 5475
				}
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_3
				
			}
			event_target:escanni_effect_target_3 = {
				add_province_modifier = {
					name = appeased_escanni_refugees
					duration = 5475
				}
			}
		}
	}
}
country_event = { #Stories of the Greentide
	id = escanni_refugees_settlement.303
	title = "escanni_refugees_settlement.303.t"
	picture = ANGRY_MOB_eventPicture
	desc = "escanni_refugees_settlement.303.d"
	
	is_triggered_only = yes

	trigger = {#trigger is in the factors of the event manager
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		hidden_effect = {
			set_country_flag = escanni_stories_event
			random_owned_province = {
				limit = { has_escanni_refugees = yes }
				save_event_target_as = escanni_center_target_1
				random_area_province = {
					limit = {
						owned_by = ROOT
					}
					save_event_target_as = escanni_effect_target_1
				}
				random_area_province = {
					limit = { 
						NOT = { province_id = event_target:escanni_effect_target_1 } 
						owned_by = ROOT
					}
					save_event_target_as = escanni_effect_target_2
				}
				random_area_province = {
					limit = {
						has_saved_event_target = escanni_effect_target_2
						NOT = { province_id = event_target:escanni_effect_target_1 } 
						NOT = { province_id = event_target:escanni_effect_target_2 }
						owned_by = ROOT
					}
					save_event_target_as = escanni_effect_target_3
				}
			}
			country_event = {
				id = escanni_refugees_settlement.103
				days = 1825
			}
			add_country_modifier = {
				name = escanni_timer_mod
				duration = 3640 # 10, 15 or 20 years - 10days
				hidden = yes
			}
		}
	}

	option = {
		name = escanni_refugees_settlement.303.a
		ai_chance = {
			factor = 1
		}
		small_decrease_of_goblin_tolerance_effect = yes
		small_decrease_of_orcish_tolerance_effect = yes
		random = {
			chance = 20
			add_stability = 1
		}
		add_country_modifier = {
			name = escanni_traddecayn_unrestp_mod
			duration = 3600
		}
		increase_escanni_integration_policy = yes
	}
	option = {
		name = escanni_refugees_settlement.303.b
		ai_chance = {
			factor = 1
		}
		add_dip_power = -40
		add_country_modifier = {
			name = escanni_soothed_the_masses
			duration = 3600
		}
		tooltip = {
			random_list = {
				5 = {
					if = {
						limit = { has_saved_event_target = escanni_center_target_1 }
						event_target:escanni_center_target_1 = {
							decrease_escanni_refugee_settlement_size = yes
						}
					}
					if = {
						limit = { has_saved_event_target = escanni_effect_target_1 }
						event_target:escanni_effect_target_1 = {
							add_random_development = 1
						}
					}
					if = {
						limit = {
							has_saved_event_target = escanni_effect_target_2
							
						}
						event_target:escanni_effect_target_2 = {
							add_random_development = 1
						}
					}
					if = {
						limit = {
							has_saved_event_target = escanni_effect_target_3
							
						}
						event_target:escanni_effect_target_3 = {
							add_random_development = 1
						}
					}
				}
				95 = {}
			}
			
		}
		hidden_effect = {
			random = {
				chance = 5
				if = {
					limit = { has_saved_event_target = escanni_center_target_1 }
					event_target:escanni_center_target_1 = {
						decrease_escanni_refugee_settlement_size = yes
					}
				}
				if = {
					limit = { has_saved_event_target = escanni_effect_target_1 }
					event_target:escanni_effect_target_1 = {
						add_random_development = 1
					}
				}
				if = {
					limit = {
						has_saved_event_target = escanni_effect_target_2
						
					}
					event_target:escanni_effect_target_2 = {
						add_random_development = 1
					}
				}
				if = {
					limit = {
						has_saved_event_target = escanni_effect_target_3
						
					}
					event_target:escanni_effect_target_3 = {
						add_random_development = 1
					}
				}
			}
		}
	}
	option = { 
		name = escanni_refugees_settlement.303.c
		trigger = {
		}
		ai_chance = {
			factor = 6
		}
		add_mil_power = -40
		add_country_modifier = {
			name = escanni_soothed_the_masses
			duration = 3600
		}
		tooltip = {
			random_list = {
				20 = {
					if = {
						limit = { has_saved_event_target = escanni_center_target_1 }
						event_target:escanni_center_target_1 = {
							decrease_escanni_refugee_settlement_size = yes
						}
					}
					custom_tooltip = escanni_migrating_tt
					if = {
						limit = {
							has_saved_event_target = escanni_center_target_1
							has_saved_event_target = escanni_effect_target_1
							event_target:escanni_center_target_1 = {
								has_escanni_refugees = yes
							}
						}
						event_target:escanni_effect_target_1 = {
							add_province_modifier = {
								name = escanni_refugee_discriminate_escann
								duration = 3600
							}
						}
						if = {
							limit = {
								has_saved_event_target = escanni_effect_target_2
								
							}
							event_target:escanni_effect_target_2 = {
								add_province_modifier = {
									name = escanni_refugee_discriminate_escann
									duration = 3600
								}
							}
						}
						if = {
							limit = {
								has_saved_event_target = escanni_effect_target_3
							}
							event_target:escanni_effect_target_3 = {
								add_province_modifier = {
									name = escanni_refugee_discriminate_escann
									duration = 3600
								}
							}
						}
					}
				}
				80 = {}
			}
			
		}
		hidden_effect = {
			random = {
				chance = 20
				if = {
					limit = { has_saved_event_target = escanni_center_target_1 }
					event_target:escanni_center_target_1 = {
						decrease_escanni_refugee_settlement_size = yes
					}
				}
				custom_tooltip = escanni_migrating_tt
				if = {
					limit = {
						has_saved_event_target = escanni_center_target_1
						has_saved_event_target = escanni_effect_target_1
						event_target:escanni_center_target_1 = {
							has_escanni_refugees = yes
						}
					}
					event_target:escanni_effect_target_1 = {
						add_province_modifier = {
							name = escanni_refugee_discriminate_escann
							duration = 3600
						}
					}
					if = {
						limit = {
							has_saved_event_target = escanni_effect_target_2
							
						}
						event_target:escanni_effect_target_2 = {
							add_province_modifier = {
								name = escanni_refugee_discriminate_escann
								duration = 3600
							}
						}
					}
					if = {
						limit = {
							has_saved_event_target = escanni_effect_target_3
						}
						event_target:escanni_effect_target_3 = {
							add_province_modifier = {
								name = escanni_refugee_discriminate_escann
								duration = 3600
							}
						}
					}
				}
			}
		}
		decrease_escanni_integration_policy = yes
	}
	option = { #special 1 - Open minded, Benevolent
		name = escanni_refugees_settlement.303.e
		highlight = yes
		trigger = {
			OR = {
				ruler_has_personality = free_thinker_personality
				ruler_has_personality = benevolent_personality
			}
		}
		ai_chance = {
			factor = 10
		}
		add_prestige = -5
		small_increase_of_goblin_tolerance_effect = yes
		small_increase_of_orcish_tolerance_effect = yes
		add_country_modifier = {
			name = escanni_ideacostn_mod
			duration = 3600
		}
		event_target:escanni_effect_target_1 = {
			add_province_modifier = {
				name = upset_escanni_refugees
				duration = 3600
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_2
				
			}
			event_target:escanni_effect_target_2 = {
				add_province_modifier = {
					name = upset_escanni_refugees
					duration = 3600
				}
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_3
				
			}
			event_target:escanni_effect_target_3 = {
				add_province_modifier = {
					name = upset_escanni_refugees
					duration = 3600
				}
			}
		}
		decrease_escanni_integration_policy = yes
	}
	option = { #special 2 - Conqueror, Zealot or Strict
		name = escanni_refugees_settlement.303.f
		highlight = yes
		trigger = {
			OR = {
				ruler_has_personality = conqueror_personality
				ruler_has_personality = zealot_personality
				ruler_has_personality = strict_personality
			}
		}
		ai_chance = {
			factor = 10
		}
		medium_decrease_of_goblin_tolerance_effect = yes
		medium_decrease_of_orcish_tolerance_effect = yes
		add_country_modifier = {
			name = escanni_upset_the_masses
			duration = 3600
		}
		event_target:escanni_effect_target_1 = {
			add_province_modifier = {
				name = mobilized_escanni_refugees
				duration = 3600
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_2
				
			}
			event_target:escanni_effect_target_2 = {
				add_province_modifier = {
					name = mobilized_escanni_refugees
					duration = 3600
				}
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_3
				
			}
			event_target:escanni_effect_target_3 = {
				add_province_modifier = {
					name = mobilized_escanni_refugees
					duration = 3600
				}
			}
		}
		random = {
			chance = 5
			if = {
				limit = { has_saved_event_target = escanni_center_target_1 }
				event_target:escanni_center_target_1 = {
					decrease_escanni_refugee_settlement_size = yes
				}
			}
			if = {
				limit = { has_saved_event_target = escanni_effect_target_1 }
				event_target:escanni_effect_target_1 = {
					add_random_development = 1
				}
			}
			if = {
				limit = {
					has_saved_event_target = escanni_effect_target_2
					
				}
				event_target:escanni_effect_target_2 = {
					add_random_development = 1
				}
			}
			if = {
				limit = {
					has_saved_event_target = escanni_effect_target_3
					
				}
				event_target:escanni_effect_target_3 = {
					add_random_development = 1
				}
			}
		}
		increase_escanni_integration_policy = yes
	}
}
country_event = { #Distinguished refugees
	id = escanni_refugees_settlement.304
	title = "escanni_refugees_settlement.304.t"
	picture = ARTWORK_eventPicture
	desc = "escanni_refugees_settlement.304.d"
	
	is_triggered_only = yes

	trigger = {#trigger is in the factors of the event manager
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		hidden_effect = {
			set_country_flag = escanni_distinguished_event
			random_owned_province = {
				limit = { has_escanni_refugees = yes }
				save_event_target_as = escanni_center_target_1
				random_area_province = {
					limit = {
						owned_by = ROOT
					}
					save_event_target_as = escanni_effect_target_1
				}
				random_area_province = {
					limit = { 
						NOT = { province_id = event_target:escanni_effect_target_1 } 
						owned_by = ROOT
					}
					save_event_target_as = escanni_effect_target_2
				}
				random_area_province = {
					limit = { 
						has_saved_event_target = escanni_effect_target_2
						NOT = { province_id = event_target:escanni_effect_target_1 } 
						NOT = { province_id = event_target:escanni_effect_target_2 }
						owned_by = ROOT
					}
					save_event_target_as = escanni_effect_target_3
				}
			}
			country_event = {
				id = escanni_refugees_settlement.103
				days = 1875
			}
			add_country_modifier = {
				name = escanni_timer_mod
				duration = 3640 # 10, 15 or 20 years - 10days
				hidden = yes
			}
		}
	}

	option = {
		name = escanni_refugees_settlement.304.a
		ai_chance = {
			factor = 1
		}
		add_estate_loyalty = {
			estate = estate_burghers
			loyalty = -5
		}
		add_mercantilism = -1
		add_country_modifier = {
			name = escanni_globaltradepowerp_mod
			duration = 3600
		}
		define_advisor = {
			type = trader
			skill = 2
			culture = castellyrian
			religion = regent_court
			cost_multiplier = 0.75
		}
	}
	option = {
		name = escanni_refugees_settlement.304.b
		ai_chance = {
			factor = 1
		}
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = -10
		}
		add_treasury = -30
		add_army_tradition = 5
		if = {
			limit = { tag = A77 } #Orda Aldresia
			add_manpower = 2
			create_general = {
				tradition = 60
				culture = farrani
			}
		}
		else = {
			create_general = {
				tradition = 60
				culture = marcher
			}
		}
	}
	option = {
		name = escanni_refugees_settlement.304.c
		ai_chance = {
			factor = 6
		}
		add_treasury = -40
		add_prestige = 5
		add_splendor = 20
		add_country_modifier = {
			name = escanni_prestigedecayn_mod
			duration = 3600
		}
	}
	option = {
		name = escanni_refugees_settlement.304.e
		ai_chance = {
			factor = 6
		}
		add_legitimacy = 10
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = 5
		}
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = 5
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 5
		}
		event_target:escanni_effect_target_1 = {
			add_province_modifier = {
				name = upset_escanni_refugees
				duration = 3600
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_2
				
			}
			event_target:escanni_effect_target_2 = {
				add_province_modifier = {
					name = upset_escanni_refugees
					duration = 3600
				}
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_3
				
			}
			event_target:escanni_effect_target_3 = {
				add_province_modifier = {
					name = upset_escanni_refugees
					duration = 3600
				}
			}
		}
		decrease_escanni_integration_policy = yes
	}
	option = { #special 1 - Well Connected, Free Thinker, Patron of the Arts or DIP > 5
		name = escanni_refugees_settlement.304.f
		highlight = yes
		trigger = {
			OR = {
				ruler_has_personality = patron_of_arts_personality
				ruler_has_personality = well_connected_personality
				ruler_has_personality = free_thinker_personality
				dip = 5
			}
		}
		ai_chance = {
			factor = 10
		}
		add_adm_power = -30
		add_dip_power = -30
		add_treasury = -50
		custom_tooltip = lose_10_estate_loyalty_all_estates_tt
		hidden_effect = {
			add_estate_loyalty = {
				estate = all
				loyalty = -10
			}
		}
		add_country_modifier = {
			name = escanni_upset_the_masses
			duration = 3600
		}
		define_advisor = {
			type = artist
			culture = castellyrian
			skill = 2
			cost_multiplier = 0.75
			religion = regent_court
		}
		define_advisor = {
			type = trader
			culture = farrani
			skill = 2
			cost_multiplier = 0.75
			religion = regent_court
		}
		define_advisor = {
			type = commandant
			culture = marcher
			skill = 2
			cost_multiplier = 0.75
			religion = regent_court
		}
		tooltip = {
			custom_tooltip =  10_percent_chance_of_integrate_escanni_tt
		}
		hidden_effect = {
			random = {
				chance = 10
				if = {
					limit = { has_saved_event_target = escanni_center_target_1 }
					event_target:escanni_center_target_1 = {
						decrease_escanni_refugee_settlement_size = yes
					}
				}
				if = {
					limit = { has_saved_event_target = escanni_effect_target_1 }
					event_target:escanni_effect_target_1 = {
						add_random_development = 1
					}
				}
				if = {
					limit = {
						has_saved_event_target = escanni_effect_target_2
						
					}
					event_target:escanni_effect_target_2 = {
						add_random_development = 1
					}
				}
				if = {
					limit = {
						has_saved_event_target = escanni_effect_target_3
						
					}
					event_target:escanni_effect_target_3 = {
						add_random_development = 1
					}
				}
			}
		}

		increase_escanni_integration_policy = yes
	}
}
country_event = { #Exiled soldiers
	id = escanni_refugees_settlement.305
	title = "escanni_refugees_settlement.305.t"
	picture = LAND_MILITARY_eventPicture
	desc = "escanni_refugees_settlement.305.d"
	
	is_triggered_only = yes

	trigger = {#trigger is in the factors of the event manager
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		hidden_effect = {
			set_country_flag = escanni_exiled_soldiers_event
			random_owned_province = {
				limit = { has_escanni_refugees = yes }
				save_event_target_as = escanni_center_target_1
				random_area_province = {
					limit = {
						owned_by = ROOT
					}
					save_event_target_as = escanni_effect_target_1
				}
				random_area_province = {
					limit = { 
						NOT = { province_id = event_target:escanni_effect_target_1 } 
						owned_by = ROOT
					}
					save_event_target_as = escanni_effect_target_2
				}
				random_area_province = {
					limit = {
						has_saved_event_target = escanni_effect_target_2
						NOT = { province_id = event_target:escanni_effect_target_1 } 
						NOT = { province_id = event_target:escanni_effect_target_2 }
						owned_by = ROOT
					}
					save_event_target_as = escanni_effect_target_3
				}
			}
			country_event = {
				id = escanni_refugees_settlement.103
				days = 1875
			}
			add_country_modifier = {
				name = escanni_timer_mod
				duration = 3640 # 10, 15 or 20 years - 10days
				hidden = yes
			}
		}
	}

	option = {
		name = escanni_refugees_settlement.305.a
		ai_chance = {
			factor = 1
		}
		add_treasury = -30
		add_manpower = 2
		if = {
			limit = { has_saved_event_target = escanni_effect_target_1 }
			event_target:escanni_effect_target_1 = {
				add_province_modifier = {
					name = drafted_escanni_refugees
					duration = 3600
				}
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_2
			}
			event_target:escanni_effect_target_2 = {
				add_province_modifier = {
					name = drafted_escanni_refugees
					duration = 3600
				}
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_3
				
			}
			event_target:escanni_effect_target_3 = {
				add_province_modifier = {
					name = drafted_escanni_refugees
					duration = 3600
				}
			}
		}
		tooltip = {
			random_list = {
				20 = {
					if = {
						limit = { has_saved_event_target = escanni_center_target_1 }
						event_target:escanni_center_target_1 = {
							decrease_escanni_refugee_settlement_size = yes
						}
					}
					if = {
						limit = { has_saved_event_target = escanni_effect_target_1 }
						event_target:escanni_effect_target_1 = {
							add_random_development = 1
						}
					}
				}
				80 = {}
			}
		}
		hidden_effect = {
			random = {
				chance = 20
				if = {
					limit = { has_saved_event_target = escanni_center_target_1 }
					event_target:escanni_center_target_1 = {
						decrease_escanni_refugee_settlement_size = yes
					}
				}
				if = {
					limit = { has_saved_event_target = escanni_effect_target_1 }
					event_target:escanni_effect_target_1 = {
						add_random_development = 1
					}
				}
			}
		}
		decrease_escanni_integration_policy = yes
	}
	option = {
		name = escanni_refugees_settlement.305.b
		ai_chance = {
			factor = 1
		}
		add_adm_power = -30
		add_dip_power = -20
		add_estate_loyalty = {
			estate = estate_adventurers
			loyalty = 10
		}
		random = {
			chance = 20
			if = {
				limit = { has_saved_event_target = escanni_center_target_1 }
				event_target:escanni_center_target_1 = {
					decrease_escanni_refugee_settlement_size = yes
				}
			}
		}
		random_country = {
			limit = {
				capital_scope = {
					superregion = escann_superregion 
				}
				NOT = { has_country_modifier = monstrous_nation }
			}
			add_manpower = 2
		}
	}
	option = { 
		name = escanni_refugees_settlement.305.c
		ai_chance = {
			factor = 6
		}
		add_treasury = 50
		add_prestige = -5
		event_target:escanni_effect_target_1 = {
			add_province_modifier = {
				name = upset_escanni_refugees
				duration = 3600
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_2
				
			}
			event_target:escanni_effect_target_2 = {
				add_province_modifier = {
					name = upset_escanni_refugees
					duration = 3600
				}
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_3
				
			}
			event_target:escanni_effect_target_3 = {
				add_province_modifier = {
					name = upset_escanni_refugees
					duration = 3600
				}
			}
		}
		random_country = {
			limit = {
				capital_scope = {
					superregion = escann_superregion 
				}
				NOT = { has_country_modifier = monstrous_nation }
			}
			add_opinion = {
				who = ROOT
				modifier = didnot_support_refugees
			}
		}
		decrease_escanni_integration_policy = yes
	}
}
country_event = { #Food supplies strained
	id = escanni_refugees_settlement.306
	title = "escanni_refugees_settlement.306.t"
	picture = FAMINE_eventPicture
	desc = "escanni_refugees_settlement.306.d"
	
	is_triggered_only = yes

	trigger = {#trigger is in the factors of the event manager
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		hidden_effect = {
			set_country_flag = escanni_foodsupplies_event
			random_owned_province = {
				limit = { has_escanni_refugees = yes }
				save_event_target_as = escanni_center_target_1
				random_area_province = {
					limit = {
						owned_by = ROOT
					}
					save_event_target_as = escanni_effect_target_1
				}
				random_area_province = {
					limit = { 
						NOT = { province_id = event_target:escanni_effect_target_1 } 
						owned_by = ROOT
					}
					save_event_target_as = escanni_effect_target_2
				}
				random_area_province = {
					limit = {
						has_saved_event_target = escanni_effect_target_2
						NOT = { province_id = event_target:escanni_effect_target_1 } 
						NOT = { province_id = event_target:escanni_effect_target_2 }
						owned_by = ROOT
					}
					save_event_target_as = escanni_effect_target_3
				}
			}
			country_event = {#6.5 years
				id = escanni_refugees_settlement.103
				days = 2433
			}
			country_event = {#13 years
				id = escanni_refugees_settlement.103
				days = 4867
			}
			add_country_modifier = {
				name = escanni_timer_mod
				duration = 7250 # 10, 15 or 20 years - 10days
				hidden = yes
			}
		}
	}

	option = {
		name = escanni_refugees_settlement.306.a
		ai_chance = {
			factor = 1
		}
		add_treasury = -100
		add_dip_power = -40
		add_country_modifier = {
			name = escanni_soothed_the_masses
			duration = 7300
		}
		tooltip = {
			random_list = {
				10 = {
					if = {
						limit = { has_saved_event_target = escanni_center_target_1 }
						event_target:escanni_center_target_1 = {
							decrease_escanni_refugee_settlement_size = yes
						}
					}
					if = {
						limit = { has_saved_event_target = escanni_effect_target_1 }
						event_target:escanni_effect_target_1 = {
							add_random_development = 1
						}
					}
					if = {
						limit = {
							has_saved_event_target = escanni_effect_target_2
							
						}
						event_target:escanni_effect_target_2 = {
							add_random_development = 1
						}
					}
					if = {
						limit = {
							has_saved_event_target = escanni_effect_target_3
							
						}
						event_target:escanni_effect_target_3 = {
							add_random_development = 1
						}
					}
				}
				90 = {}
			}
		}
		hidden_effect = {
			random = {
				chance = 10
				if = {
					limit = { has_saved_event_target = escanni_center_target_1 }
					event_target:escanni_center_target_1 = {
						decrease_escanni_refugee_settlement_size = yes
					}
				}
				if = {
					limit = { has_saved_event_target = escanni_effect_target_1 }
					event_target:escanni_effect_target_1 = {
						add_random_development = 1
					}
				}
				if = {
					limit = {
						has_saved_event_target = escanni_effect_target_2
						
					}
					event_target:escanni_effect_target_2 = {
						add_random_development = 1
					}
				}
				if = {
					limit = {
						has_saved_event_target = escanni_effect_target_3
						
					}
					event_target:escanni_effect_target_3 = {
						add_random_development = 1
					}
				}			
			}
		}
		event_target:escanni_effect_target_1 = {
			add_province_modifier = {
				name = appeased_escanni_refugees
				duration = 7300
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_2
			}
			event_target:escanni_effect_target_2 = {
				add_province_modifier = {
					name = appeased_escanni_refugees
					duration = 7300
				}
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_3
				
			}
			event_target:escanni_effect_target_3 = {
				add_province_modifier = {
					name = appeased_escanni_refugees
					duration = 7300
				}
			}
		}
		increase_escanni_integration_policy = yes
	}
	option = {
		name = escanni_refugees_settlement.306.b
		ai_chance = {
			factor = 1
		}
		add_adm_power = -25
		every_owned_province = {
			limit = {
				OR = {
					trade_goods = grain
					trade_goods = livestock
				}
			}
			add_province_modifier = {
				name = escanni_strain_on_prod
				duration = 7300
			}
		}
		event_target:escanni_effect_target_1 = {
			add_province_modifier = {
				name = upset_escanni_refugees
				duration = 7300
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_2
				
			}
			event_target:escanni_effect_target_2 = {
				add_province_modifier = {
					name = upset_escanni_refugees
					duration = 7300
				}
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_3
				
			}
			event_target:escanni_effect_target_3 = {
				add_province_modifier = {
					name = upset_escanni_refugees
					duration = 7300
				}
			}
		}
		random = {
			chance = 5
			if = {
				limit = { has_saved_event_target = escanni_center_target_1 }
				event_target:escanni_center_target_1 = {
					decrease_escanni_refugee_settlement_size = yes
				}
			}
		}
	}
	option = { 
		name = escanni_refugees_settlement.306.c
		ai_chance = {
			factor = 6
		}
		add_prestige = -10
		add_country_modifier = {
			name = escanni_taxloss_mod
			duration = 7300
		}
		if = {
			limit = { has_saved_event_target = escanni_center_target_1 }
			event_target:escanni_center_target_1 = {
				area = {
					limit = {
						owned_by = ROOT
					}
					add_devastation = 10
					add_province_modifier = {
						name = upset_escanni_refugees
						duration = 7300
					}
				}
			}
		}
		random = {
			chance = 35
			if = {
				limit = { has_saved_event_target = escanni_center_target_1 }
				event_target:escanni_center_target_1 = {
					decrease_escanni_refugee_settlement_size = yes
				}
			}
		}
		decrease_escanni_integration_policy = yes
	}
	option = { #special 1 - Any ally of vassal has 3 fish/grain/livestock provinces
		name = escanni_refugees_settlement.306.e
		highlight = yes
		trigger = {
			OR = {
				any_ally = {
					calc_true_if = {
						all_owned_province = {
							OR = {
								trade_goods = grain
								trade_goods = livestock
								trade_goods = fish
							}
						}
						amount = 3
					}
				}
				any_subject_country = {
					calc_true_if = {
						amount = 3
						all_owned_province = {
							OR = {
								trade_goods = grain
								trade_goods = livestock
								trade_goods = fish
							}
						}
					}
				}
			}
		}
		ai_chance = {
			factor = 6
		}
		add_treasury = -50
		add_mercantilism = -1
		random_ally = {
			limit = {
				calc_true_if = {
					amount = 3
					all_owned_province = {
						OR = {
							trade_goods = grain
							trade_goods = livestock
							trade_goods = fish
						}
					}
				}
			}
			add_favors = {
				who = ROOT
				amount = 5
			}
		}
		add_country_modifier = {
			name = escanni_soothed_the_masses
			duration = 7300
		}
		random = {
			chance = 10
			if = {
				limit = { has_saved_event_target = escanni_center_target_1 }
				event_target:escanni_center_target_1 = {
					decrease_escanni_refugee_settlement_size = yes
				}
			}
			if = {
				limit = { has_saved_event_target = escanni_effect_target_1 }
				event_target:escanni_effect_target_1 = {
					add_random_development = 1
				}
			}
			if = {
				limit = {
					has_saved_event_target = escanni_effect_target_2
					
				}
				event_target:escanni_effect_target_2 = { add_random_development = 1 }
			}
			if = {
				limit = {
					has_saved_event_target = escanni_effect_target_3
					
				}
				event_target:escanni_effect_target_3 = { add_random_development = 1 }
			}			
		}
		event_target:escanni_effect_target_1 = {
			add_province_modifier = {
				name = appeased_escanni_refugees
				duration = 7300
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_2
				
			}
			event_target:escanni_effect_target_2 = {
				add_province_modifier = {
					name = appeased_escanni_refugees
					duration = 7300
				}
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_3
				
			}
			event_target:escanni_effect_target_3 = {
				add_province_modifier = {
					name = appeased_escanni_refugees
					duration = 7300
				}
			}
		}
		increase_escanni_integration_policy = yes
	}
	option = { #special 2 - Prod bonus or lead producer of fish/grain/livestock
		name = escanni_refugees_settlement.306.f
		highlight = yes
		trigger = {
			OR = {
				production_leader = {
					trade_goods = fish
				}
				production_leader = {
					trade_goods = livestock
				}
				production_leader = {
					trade_goods = grain
				}
				trading_bonus = {
					trade_goods = fish
					value = yes
				}
				trading_bonus = {
					trade_goods = livestock
					value = yes
				}
				trading_bonus = {
					trade_goods = grain
					value = yes
				}
			}
		}
		ai_chance = {
			factor = 6
		}
		add_treasury = -25
		add_adm_power = -20
		add_mercantilism = 1
		add_country_modifier = {
			name = escanni_soothed_the_masses
			duration = 7300
		}
		random = {
			chance = 10
			if = {
				limit = { has_saved_event_target = escanni_center_target_1 }
				event_target:escanni_center_target_1 = {
					decrease_escanni_refugee_settlement_size = yes
				}
			}
			if = {
				limit = { has_saved_event_target = escanni_effect_target_1 }
				event_target:escanni_effect_target_1 = {
					add_random_development = 1
				}
			}
			if = {
				limit = {
					has_saved_event_target = escanni_effect_target_2
					
				}
				event_target:escanni_effect_target_2 = { add_random_development = 1 }
			}
			if = {
				limit = {
					has_saved_event_target = escanni_effect_target_3
					
				}
				event_target:escanni_effect_target_3 = { add_random_development = 1 }
			}			
		}
		event_target:escanni_effect_target_1 = {
			add_province_modifier = {
				name = appeased_escanni_refugees
				duration = 7300
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_2
				
			}
			event_target:escanni_effect_target_2 = {
				add_province_modifier = {
					name = appeased_escanni_refugees
					duration = 7300
				}
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_3
				
			}
			event_target:escanni_effect_target_3 = {
				add_province_modifier = {
					name = appeased_escanni_refugees
					duration = 7300
				}
			}
		}
		increase_escanni_integration_policy = yes
	}
}
country_event = { #Escanni hedgemages rampant
	id = escanni_refugees_settlement.307
	title = "escanni_refugees_settlement.307.t"
	picture = MAGES_ESTATE_eventPicture
	desc = "escanni_refugees_settlement.307.d"
	
	is_triggered_only = yes

	trigger = {#trigger is in the factors of the event manager
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		hidden_effect = {
			set_country_flag = escanni_hedgemages_event
			random_owned_province = {
				limit = { has_escanni_refugees = yes }
				save_event_target_as = escanni_center_target_1
				random_area_province = {
					limit = {
						owned_by = ROOT
					}
					save_event_target_as = escanni_effect_target_1
				}
				random_area_province = {
					limit = { 
						NOT = { province_id = event_target:escanni_effect_target_1 } 
						owned_by = ROOT
					}
					save_event_target_as = escanni_effect_target_2
				}
				random_area_province = {
					limit = {
						has_saved_event_target = escanni_effect_target_2
						NOT = { province_id = event_target:escanni_effect_target_1 } 
						NOT = { province_id = event_target:escanni_effect_target_2 }
						owned_by = ROOT
					}
					save_event_target_as = escanni_effect_target_3
				}
			}
			country_event = {
				id = escanni_refugees_settlement.103
				days = 3650
			}
			add_country_modifier = {
				name = escanni_timer_mod
				duration = 7250 # 10, 15 or 20 years - 10days
				hidden = yes
			}
		}
	}

	option = {
		name = escanni_refugees_settlement.307.a
		ai_chance = {
			factor = 1
		}
		add_treasury = -100
		add_estate_loyalty = {
			estate = estate_mages
			loyalty = 10
		}
		add_country_modifier = {
			name = escanni_stabnsmall_mod
			duration = 7300
		}
		decrease_escanni_integration_policy = yes
	}
	option = {
		name = escanni_refugees_settlement.307.b
		trigger = {
			NOT = { tag = A85 } #Magisterium
		}
		ai_chance = {
			factor = 1
		}
		reverse_add_opinion = {
			who = A85
			modifier = trusted_magisterium
		}
		add_estate_influence_modifier = {
			estate = estate_mages
			influence = 10
			duration = 7300
		}
		event_target:escanni_effect_target_1 = {
			add_province_modifier = {
				name = upset_escanni_refugees
				duration = 7300
			}
		}
		if = {
			limit = { has_saved_event_target = escanni_effect_target_2 }
			event_target:escanni_effect_target_2 = {
				add_province_modifier = {
					name = upset_escanni_refugees
					duration = 7300
				}
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_3
				
			}
			event_target:escanni_effect_target_3 = {
				add_province_modifier = {
					name = upset_escanni_refugees
					duration = 7300
				}
			}
		}
		random = {
			chance = 5
			if = {
				limit = { has_saved_event_target = escanni_center_target_1 }
				event_target:escanni_center_target_1 = {
					decrease_escanni_refugee_settlement_size = yes
					add_devastation = 5
				}
			}
		}
		decrease_escanni_integration_policy = yes
	}
	option = { 
		name = escanni_refugees_settlement.307.c
		trigger = {
			NOT = { tag = A85 } #Magisterium
		}
		ai_chance = {
			factor = 6
		}
		add_estate_influence_modifier = {
			estate = estate_mages
			influence = -10
			duration = 7300
		}
		reverse_add_opinion = {
			who = A85
			modifier = magisterium_disagrees_with_direction
			years = 25
		}
		tooltip = {
			random_list = {
				5 = {
					event_target:escanni_effect_target_1 = {
						add_permanent_province_modifier  = {
							name = aw_haunted_house_1
							duration = -1  
						}
						custom_tooltip = aw_how_to_get_more_adventurer_removal_chance_tooltip				
					}
					if = {
						limit = {
							has_saved_event_target = escanni_effect_target_2
							
						}
						event_target:escanni_effect_target_2 = {
							add_permanent_province_modifier  = {
								name = aw_haunted_house_1
								duration = -1  
							}
							custom_tooltip = aw_how_to_get_more_adventurer_removal_chance_tooltip				
						}
					}
				}
				95 = {}
			}
		}
		hidden_effect = {
			random = {
				chance = 5
				event_target:escanni_effect_target_1 = {
					add_permanent_province_modifier  = {
						name = aw_haunted_house_1
						duration = -1  
					}
					custom_tooltip = aw_how_to_get_more_adventurer_removal_chance_tooltip				
				}
				if = {
					limit = {
						has_saved_event_target = escanni_effect_target_2
						
					}
					event_target:escanni_effect_target_2 = {
						add_permanent_province_modifier  = {
							name = aw_haunted_house_1
							duration = -1  
						}
						custom_tooltip = aw_how_to_get_more_adventurer_removal_chance_tooltip				
					}
				}
			}
		}
	}
	option = { #special 1 - Has magisterium controlled estate and not Magisterium
		name = escanni_refugees_settlement.307.e
		highlight = yes
		trigger = {
			NOT = { tag = A85 } #Magisterium
			has_estate_privilege = estate_mages_organization_magisterium
		}
		ai_chance = {
			factor = 0
		}
		add_stability = -2
		add_treasury = -100
		add_mil_power = -100
		add_estate_loyalty = {
			estate = estate_mages
			loyalty = -20
		}
		hidden_effect = {
			remove_estate_privilege = estate_mages_organization_magisterium
		}
		set_estate_privilege = estate_mages_organization_guilds
		add_country_modifier = {
			name = escanni_diprepn_mod
			duration = 7300
		}
		hidden_effect = { #Making a "random" Escanni general
			random_list = {
				1 = {
					define_general = {
						shock = 8
						fire = 2
						manuever = 1
						siege = 4
						name = "Valeran of Scepterton" #Castellyrian
						trait = war_wizard_personality
					}
				}
				1 = {
					define_general = {
						shock = 8
						fire = 2
						manuever = 1
						siege = 4
						name = "Ricain of Foarhal" #Castellyrian
						trait = war_wizard_personality
					}
				}
				1 = {
					define_general = {
						shock = 8
						fire = 2
						manuever = 1
						siege = 4
						name = "Wystan of Dasmaham" #Castellyrian
						trait = war_wizard_personality
					}
				}
				1 = {
					define_general = {
						shock = 8
						fire = 2
						manuever = 1
						siege = 4
						name = "Castianna Elderlan" #Castellyrian
						female = yes
						trait = war_wizard_personality
					}
				}
				1 = {
					define_general = {
						shock = 8
						fire = 2
						manuever = 1
						siege = 4
						name = "Taelar Grannvale" #Marcher
						trait = war_wizard_personality
					}
				}
				1 = {
					define_general = {
						shock = 8
						fire = 2
						manuever = 1
						siege = 4
						name = "Isebella Vernham" #Marcher
						female = yes
						trait = war_wizard_personality
					}
				}
				1 = {
					define_general = {
						shock = 8
						fire = 2
						manuever = 1
						siege = 4
						name = "Taelar sina Rhaecestir" #Farrani
						trait = war_wizard_personality
					}
				}
			}
		}
		custom_tooltip = escanni_warwizard_tt
		custom_tooltip = 5_percent_chance_of_integrate_escanni_tt
		hidden_effect = {
			random = {
				chance = 5
				if = {
					limit = { has_saved_event_target = escanni_center_target_1 }
					event_target:escanni_center_target_1 = {
						decrease_escanni_refugee_settlement_size = yes
					}
				}
				if = {
					limit = { has_saved_event_target = escanni_effect_target_1 }
					event_target:escanni_effect_target_1 = {
						add_random_development = 1
					}
				}
				if = {
					limit = {
						has_saved_event_target = escanni_effect_target_2
						
					}
					event_target:escanni_effect_target_2 = {
						add_random_development = 1
					}
				}
				if = {
					limit = {
						has_saved_event_target = escanni_effect_target_3
						
					}
					event_target:escanni_effect_target_3 = {
						add_random_development = 1
					}
				}			
			}
		}
		increase_escanni_integration_policy = yes
	}
	option = { #special 2 - Magisterium
		name = escanni_refugees_settlement.307.f
		highlight = yes
		trigger = {
			tag = A85 #Magisterium
		}
		ai_chance = {
			factor = 6
		}
		add_prestige = 10
		add_devotion = 10
		add_estate_loyalty = {
			estate = estate_mages
			loyalty = 10
		}

		add_country_modifier = {
			name = escanni_diprepp_mod
			duration = 7300
		}
	}
	option = { #special 3 - Is a powerful mage
		name = escanni_refugees_settlement.307.g
		highlight = yes
		trigger = {
			ruler_has_personality = mage_personality
		}
		ai_chance = {
			factor = 30
		}
		add_prestige = 10
		add_adm_power = -25
	}
}
country_event = { #Escanni scholars seek refuge
	id = escanni_refugees_settlement.308
	title = "escanni_refugees_settlement.308.t"
	picture = BIG_BOOK_eventPicture
	desc = "escanni_refugees_settlement.308.d"
	
	is_triggered_only = yes

	trigger = {#trigger is in the factors of the event manager
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		hidden_effect = {
			set_country_flag = escanni_scholars_event
			random_owned_province = {
				limit = { has_escanni_refugees = yes }
				save_event_target_as = escanni_center_target_1
				random_area_province = {
					limit = {
						owned_by = ROOT
					}
					save_event_target_as = escanni_effect_target_1
				}
				random_area_province = {
					limit = { 
						NOT = { province_id = event_target:escanni_effect_target_1 } 
						owned_by = ROOT
					}
					save_event_target_as = escanni_effect_target_2
				}
				random_area_province = {
					limit = {
						has_saved_event_target = escanni_effect_target_2
						NOT = { province_id = event_target:escanni_effect_target_1 } 
						NOT = { province_id = event_target:escanni_effect_target_2 }
						owned_by = ROOT
					}
					save_event_target_as = escanni_effect_target_3
				}
			}
			country_event = {
				id = escanni_refugees_settlement.103
				days = 2737
			}
			add_country_modifier = {
				name = escanni_timer_mod
				duration = 5450 # 10, 15 or 20 years - 10days
				hidden = yes
			}
		}
	}

	option = {
		name = escanni_refugees_settlement.308.a
		ai_chance = {
			factor = 1
		}
		add_dip_power = -50
		add_adm_power = -50
		add_country_modifier = {
			name = escanni_techcostn_mod
			duration = 5475
		}
		event_target:escanni_effect_target_1 = {
			add_institution_embracement = {
				which = renaissance
				value = 25
			}
			add_province_modifier = {
				name = escanni_center_of_learning
				duration = 18250
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_2
				
			}
			event_target:escanni_effect_target_2 = {
				add_institution_embracement = {
					which = renaissance
					value = 25
				}
				add_province_modifier = {
					name = escanni_center_of_learning
					duration = 18250
				}
			}
		}
		increase_escanni_integration_policy = yes
	}
	option = {
		name = escanni_refugees_settlement.308.b
		ai_chance = {
			factor = 1
		}
		add_adm_power = -10
		add_dip_power = -10
		if = {
			limit = { has_saved_event_target = escanni_center_target_1 }
			event_target:escanni_center_target_1 = {
				area = {
					limit = {
						owned_by = ROOT
					}
					add_institution_embracement = {
						which = renaissance
						value = 25
					}
				}
			}
		}
	}
	option = {
		name = escanni_refugees_settlement.308.c
		ai_chance = {
			factor = 6
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 10
		}
		event_target:escanni_effect_target_1 = {
			add_province_modifier = {
				name = upset_escanni_refugees
				duration = 5475
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_2
				
			}
			event_target:escanni_effect_target_2 = {
				add_province_modifier = {
					name = upset_escanni_refugees
					duration = 5475
				}
			}
		}
		decrease_escanni_integration_policy = yes
	}
}
country_event = { #Sickness stikes the camps
	id = escanni_refugees_settlement.309
	title = "escanni_refugees_settlement.309.t"
	picture = FAMINE_eventPicture
	desc = "escanni_refugees_settlement.309.d"
	
	is_triggered_only = yes

	trigger = {#trigger is in the factors of the event manager
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		hidden_effect = {
			set_country_flag = escanni_sickness_event
			random_owned_province = {
				limit = { has_escanni_refugees = yes }
				save_event_target_as = escanni_center_target_1
				random_area_province = {
					limit = {
						owned_by = ROOT
					}
					save_event_target_as = escanni_effect_target_1
				}
				random_area_province = {
					limit = { 
						NOT = { province_id = event_target:escanni_effect_target_1 } 
						owned_by = ROOT
					}
					save_event_target_as = escanni_effect_target_2
				}
				random_area_province = {
					limit = {
						has_saved_event_target = escanni_effect_target_2
						NOT = { province_id = event_target:escanni_effect_target_1 } 
						NOT = { province_id = event_target:escanni_effect_target_2 }
						owned_by = ROOT
					}
					save_event_target_as = escanni_effect_target_3
				}
			}
			country_event = {
				id = escanni_refugees_settlement.103
				days = 2737
			}
			add_country_modifier = {
				name = escanni_timer_mod
				duration = 5450 # 10, 15 or 20 years - 10days
				hidden = yes
			}
		}
	}

	option = {
		name = escanni_refugees_settlement.309.a
		ai_chance = {
			factor = 1
		}
		add_adm_power = -50
		add_prestige = 5
		add_country_modifier = {
			name = escanni_upset_the_masses
			duration = 5475
		}
		event_target:escanni_effect_target_1 = {
			add_province_modifier = {
				name = upset_escanni_refugees
				duration = 5475
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_2
			}
			event_target:escanni_effect_target_2 = {
				add_province_modifier = {
					name = upset_escanni_refugees
					duration = 5475
				}
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_3
				
			}
			event_target:escanni_effect_target_3 = {
				add_province_modifier = {
					name = upset_escanni_refugees
					duration = 5475
				}
			}
		}
		tooltip = {
			5 = {
				if = {
					limit = { has_saved_event_target = escanni_center_target_1 }
					event_target:escanni_center_target_1 = {
						decrease_escanni_refugee_settlement_size = yes
					}
				}
				if = {
					limit = { has_saved_event_target = escanni_effect_target_1 }
					event_target:escanni_effect_target_1 = {
						add_devastation = 5
					}
				}
				if = {
					limit = {
						has_saved_event_target = escanni_effect_target_2
						
					}
					event_target:escanni_effect_target_2 = {
						add_devastation = 5
					}
				}
				if = {
					limit = {
						has_saved_event_target = escanni_effect_target_3
						
					}
					event_target:escanni_effect_target_3 = {
						add_devastation = 5
					}
				}
			}
			95 = {}
		}
		hidden_effect = {
			random = {
				chance = 5
				if = {
					limit = { has_saved_event_target = escanni_center_target_1 }
					event_target:escanni_center_target_1 = {
						decrease_escanni_refugee_settlement_size = yes
					}
				}
				if = {
					limit = { has_saved_event_target = escanni_effect_target_1 }
					event_target:escanni_effect_target_1 = {
						add_devastation = 5
					}
				}
				if = {
					limit = {
						has_saved_event_target = escanni_effect_target_2
						
					}
					event_target:escanni_effect_target_2 = {
						add_devastation = 5
					}
				}
				if = {
					limit = {
						has_saved_event_target = escanni_effect_target_3
						
					}
					event_target:escanni_effect_target_3 = {
						add_devastation = 5
					}
				}
			}
		}
		increase_escanni_integration_policy = yes
	}
	option = {
		name = escanni_refugees_settlement.309.b
		ai_chance = {
			factor = 1
		}
		add_adm_power = -30
		add_treasury = -40
		tooltip = {
			10 = {
				if = {
					limit = { has_saved_event_target = escanni_center_target_1 }
					event_target:escanni_center_target_1 = {
						decrease_escanni_refugee_settlement_size = yes
					}
				}
				if = {
					limit = { has_saved_event_target = escanni_effect_target_1 }
					event_target:escanni_effect_target_1 = {
						add_devastation = 5
					}
				}
				if = {
					limit = {
						has_saved_event_target = escanni_effect_target_2
					}
					event_target:escanni_effect_target_2 = {
						add_devastation = 5
					}
				}
				if = {
					limit = {
						has_saved_event_target = escanni_effect_target_3
						
					}
					event_target:escanni_effect_target_3 = {
						add_devastation = 5
					}
				}
			}
			90 = {}
		}
		hidden_effect = {
			random = {
				chance = 10
				if = {
					limit = { has_saved_event_target = escanni_center_target_1 }
					event_target:escanni_center_target_1 = {
						decrease_escanni_refugee_settlement_size = yes
					}
				}
				if = {
					limit = { has_saved_event_target = escanni_effect_target_1 }
					event_target:escanni_effect_target_1 = {
						add_devastation = 5
					}
				}
				if = {
					limit = {
						has_saved_event_target = escanni_effect_target_2
					}
					event_target:escanni_effect_target_2 = {
						add_devastation = 5
					}
				}
				if = {
					limit = {
						has_saved_event_target = escanni_effect_target_3
						
					}
					event_target:escanni_effect_target_3 = {
						add_devastation = 5
					}
				}
			}
		}
		decrease_escanni_integration_policy = yes
	}
	option = { 
		name = escanni_refugees_settlement.309.c
		ai_chance = {
			factor = 6
		}
		add_country_modifier = {
			name = escanni_upset_the_masses
			duration = 5475
		}
		random = {
			chance = 20
			if = {
				limit = { has_saved_event_target = escanni_center_target_1 }
				event_target:escanni_center_target_1 = {
					decrease_escanni_refugee_settlement_size = yes
					area = {
						limit = {
							owned_by = ROOT
						}
						add_devastation = 10
						add_random_development = -1
					}
				}
			}
			
		}
		decrease_escanni_integration_policy = yes
	}
	option = { 
		name = escanni_refugees_settlement.309.e
		ai_chance = {
			factor = 6
		}
		add_country_modifier = {
			name = escanni_diprepn_mod
			duration = 5475
		}
		random = {
			chance = 50
			if = {
				limit = { has_saved_event_target = escanni_center_target_1 }
				event_target:escanni_center_target_1 = {
					decrease_escanni_refugee_settlement_size = yes
				}
			}
		}
		if = {
			limit = { has_saved_event_target = escanni_effect_target_1 }
			event_target:escanni_effect_target_1 = {
				add_province_modifier = {
					name = upset_escanni_refugees
					duration = 5475
				}
			}
		}
		
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_2
			}
			event_target:escanni_effect_target_2 = {
				add_province_modifier = {
					name = upset_escanni_refugees
					duration = 5475
				}
			}
		}
		if = {
			limit = {
				has_saved_event_target = escanni_effect_target_3
				
			}
			event_target:escanni_effect_target_3 = {
				add_province_modifier = {
					name = upset_escanni_refugees
					duration = 5475
				}
			}
		}
		decrease_escanni_integration_policy = yes
	}
}
country_event = { #Spread of Corinite ideas
	id = escanni_refugees_settlement.310
	title = "escanni_refugees_settlement.310.t"
	picture = REFORM_eventPicture
	desc = "escanni_refugees_settlement.310.d"
	
	is_triggered_only = yes

	trigger = {#trigger is in the factors of the event manager
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		hidden_effect = {
			set_country_flag = escanni_corinite_ideas_event
			random_owned_province = {
				limit = { has_escanni_refugees = yes }
				save_event_target_as = escanni_center_target_1
				random_area_province = {
					limit = {
						owned_by = ROOT
					}
					save_event_target_as = escanni_effect_target_1
				}
				random_area_province = {
					limit = { 
						NOT = { province_id = event_target:escanni_effect_target_1 } 
						owned_by = ROOT
					}
					save_event_target_as = escanni_effect_target_2
				}
				random_area_province = {
					limit = {
						has_saved_event_target = escanni_effect_target_2
						NOT = { province_id = event_target:escanni_effect_target_1 } 
						NOT = { province_id = event_target:escanni_effect_target_2 }
						owned_by = ROOT
					}
					save_event_target_as = escanni_effect_target_3
				}
			}
			country_event = {#6.5 years
				id = escanni_refugees_settlement.103
				days = 2433
			}
			country_event = {#13 years
				id = escanni_refugees_settlement.103
				days = 4867
			}
			add_country_modifier = {
				name = escanni_timer_mod
				duration = 7250 # 10, 15 or 20 years - 10days
				hidden = yes
			}
		}
	}

	option = {
		name = escanni_refugees_settlement.310.a
		ai_chance = {
			factor = 1
		}
		trigger = {
			NOT = { religion = corinite }
		}
		add_prestige = 5
		add_country_modifier = {
			name = escanni_tolheresyp_mod
			duration = 7300
		}
		if = {
			limit = { has_saved_event_target = escanni_center_target_1 }
			event_target:escanni_center_target_1 = {
				area = {
					limit = {
						owned_by = ROOT
					}
					add_local_autonomy = 15
					add_province_modifier = {
						name = appeased_escanni_refugees
						duration = 7300
					}
					random = {
						chance = 20
						change_religion = corinite
					}
				}
			}
		}
		
		increase_escanni_integration_policy = yes
	}
	option = {
		name = escanni_refugees_settlement.310.b
		ai_chance = {
			factor = 1
		}
		trigger = {
			NOT = { religion = corinite }
		}
		add_adm_power = -30
		add_mil_power = -30
		add_country_modifier = {
			name = escanni_tolownp_tolheresyn_mod
			duration = 7300
		}
		if = {
			limit = { has_saved_event_target = escanni_center_target_1 }
			event_target:escanni_center_target_1 = {
				area = {
					limit = {
						owned_by = ROOT
					}
					add_province_modifier = {
						name = upset_escanni_refugees
						duration = 7300
					}
					random = {
						chance = 20
						change_religion = ROOT
					}
				}
			}
		}
		
		decrease_escanni_integration_policy = yes
	}
	option = { 
		name = escanni_refugees_settlement.310.c
		ai_chance = {
			factor = 6
		}
		trigger = {
			NOT = { religion = corinite }
		}
		add_adm_power = -50
		add_dip_power = -50
		random = {
			chance = 15
			add_stability = 1
		}
		add_country_modifier = {
			name = escanni_diprepn_tolheresyp_mod
			duration = 7300
		}
		if = {
			limit = { has_saved_event_target = escanni_center_target_1 }
			event_target:escanni_center_target_1 = {
				area = {
					limit = {
						owned_by = ROOT
					}
					add_province_modifier = {
						name = escanni_refugee_discriminate_escann
						duration = 7300
					}
					change_religion = ROOT
				}
				random_list = {
					20 = { 
						decrease_escanni_refugee_settlement_size = yes
						custom_tooltip = escanni_migrating_tt
					}
					80 = {
						custom_tooltip = escanni_not_migrating_tt
						if = {
							limit = { has_saved_event_target = escanni_effect_target_1 }
							event_target:escanni_effect_target_1 = { clr_province_flag = escanni_migration_target }
						}
						if = {
							limit = { has_saved_event_target = escanni_effect_target_2 }
							event_target:escanni_effect_target_2 = { clr_province_flag = escanni_migration_target }
						}
					}
				}
			}
		}
		decrease_escanni_integration_policy = yes
	}
	option = { #special 1 - RC no religious ideas or not Zealot
		name = escanni_refugees_settlement.310.e
		highlight = yes
		trigger = {
			religion = regent_court
			OR = {
				NOT = { has_idea_group = religious_ideas }
				NOT = { ruler_has_personality = zealot_personality }
			}
		}
		ai_chance = {
			factor = 6
		}
		add_legitimacy = -5
		random = {
			chance = 10
			add_stability = -1
		}
		add_country_modifier = {
			name = escanni_tolownn_tolheresyp_mod
			duration = 7300
		}
		if = {
			limit = { has_saved_event_target = escanni_center_target_1 }
			event_target:escanni_center_target_1 = {
				area = {
					limit = {
						owned_by = ROOT
					}
					add_province_modifier = {
						name = appeased_escanni_refugees
						duration = 7300
					}
					random = {
						chance = 20
						change_religion = corinite
					}
				}
				tooltip = {
					random_list = {
						5 = {
							decrease_escanni_refugee_settlement_size = yes
							if = {
								limit = { has_saved_event_target = escanni_effect_target_1 }
								event_target:escanni_effect_target_1 = { add_random_development = 1 }
							}
							if = {
								limit = {
									has_saved_event_target = escanni_effect_target_2
									event_target:escanni_effect_target_2 = { NOT = { province_id = event_target:escanni_effect_target_1 } } 
								}
								event_target:escanni_effect_target_2 = { add_random_development = 1 }
							}
						}
						95 = {}
					}
				}
				hidden_effect = {
					random = {
						chance = 5
						decrease_escanni_refugee_settlement_size = yes
						if = {
							limit = { has_saved_event_target = escanni_effect_target_1 }
							event_target:escanni_effect_target_1 = { add_random_development = 1 }
						}
						if = {
							limit = {
								has_saved_event_target = escanni_effect_target_2
								event_target:escanni_effect_target_2 = { NOT = { province_id = event_target:escanni_effect_target_1 } } 
							}
							event_target:escanni_effect_target_2 = { add_random_development = 1 }
						}
					}
				}
			}
		}
		increase_escanni_integration_policy = yes
	}
	option = { #special 2 - Corinite
		name = escanni_refugees_settlement.310.f
		highlight = yes
		trigger = {
			religion = corinite
		}
		ai_chance = {
			factor = 6
		}
		add_legitimacy = 10
		if = {
			limit = { has_saved_event_target = escanni_center_target_1 }
			event_target:escanni_center_target_1 = {
				area = {
					limit = {
						owned_by = ROOT
					}
					add_province_modifier = {
						name = appeased_escanni_refugees
						duration = 7300
					}
					random = {
						chance = 50
						change_religion = corinite
					}
				}
				random = {
					chance = 5
					decrease_escanni_refugee_settlement_size = yes
					if = {
						limit = { has_saved_event_target = escanni_effect_target_1 }
						event_target:escanni_effect_target_1 = { add_random_development = 1 }
					}
					if = {
						limit = {
							has_saved_event_target = escanni_effect_target_2
							event_target:escanni_effect_target_2 = { NOT = { province_id = event_target:escanni_effect_target_1 } } 
						}
						event_target:escanni_effect_target_2 = { add_random_development = 1 }
					}
				}
			}
		}
		increase_escanni_integration_policy = yes
	}
}
# country_event = { #Schematic
# 	id = escanni_refugees_settlement.30x
# 	title = "escanni_refugees_settlement.30x.t"
# 	picture = REFUGEES_ESCAPING_eventPicture
# 	desc = "escanni_refugees_settlement.30x.d"
	
# 	is_triggered_only = yes

# 	trigger = {#trigger is in the factors of the event manager
# 	}

# 	mean_time_to_happen = {
# 		days = 1
# 	}

# 	immediate = {
# 		hidden_effect = {
# 		set_country_flag = escanni_XXX_event
# 		random_owned_province = {
# 			limit = { has_escanni_refugees = yes }
# 			save_event_target_as = escanni_center_target_1
# 			random_area_province = {
# 				limit = {
# 					owned_by = ROOT
# 				}
# 				save_event_target_as = escanni_effect_target_1
# 			}
# 			random_area_province = {
# 				limit = { 
# 					NOT = { province_id = event_target:escanni_effect_target_1 } 
# 					owned_by = ROOT
# 				}
# 				save_event_target_as = escanni_effect_target_2
# 			}
# 			random_area_province = {
# 				limit = {
#					has_saved_event_target = escanni_effect_target_2
# 					NOT = { province_id = event_target:escanni_effect_target_1 } 
# 					NOT = { province_id = event_target:escanni_effect_target_2 }
# 					owned_by = ROOT
# 				}
# 				save_event_target_as = escanni_effect_target_3
# 			}
# 		}
#		country_event = {
#			id = escanni_refugees_settlement.103
#			days = XXXX
#		}
# 		add_country_modifier = {
# 			name = escanni_timer_mod
# 			duration = XXXX # 10, 15 or 20 years - 10days
# 			hidden = yes
# 		}
# 		}
# 	}

# 	option = {
# 		name = escanni_refugees_settlement.30x.a
# 		ai_chance = {
# 			factor = 1
# 		}
# 		add_estate_loyalty = {
# 			estate = estate_burghers
# 			loyalty = -10
# 		}
# 		add_country_modifier = {
# 			name = escanni_unrestp_prodp_statecostn_mod
# 			duration = 5475
# 		}
# 		event_target:escanni_effect_target_1 = {
# 			add_province_modifier = {
# 				name = appeased_escanni_refugees
# 				duration = 5475
# 			}
# 		}
# 		if = {
# 			limit = {
#				has_saved_event_target = escanni_effect_target_2
# 			}
# 			event_target:escanni_effect_target_2 = {
# 				add_province_modifier = {
# 					name = appeased_escanni_refugees
# 					duration = 5475
# 				}
# 			}
# 		}
# 		if = {
# 			limit = {
#				has_saved_event_target = escanni_effect_target_3
# 				
# 			}
# 			event_target:escanni_effect_target_3 = {
# 				add_province_modifier = {
# 					name = appeased_escanni_refugees
# 					duration = 5475
# 				}
# 			}
# 		}
# 	}
# 	option = {
# 		name = escanni_refugees_settlement.30x.b
# 		ai_chance = {
# 			factor = 1
# 		}
# 		add_estate_loyalty = {
# 			estate = estate_burghers
# 			loyalty = 5
# 		}
# 		add_country_modifier = {
# 			name = escanni_unrestn_tradep_mod
# 			duration = 5475
# 		}
# 		event_target:escanni_effect_target_1 = {
# 			add_province_modifier = {
# 				name = upset_escanni_refugees
# 				duration = 5475
# 			}
# 		}
# 		if = {
# 			limit = {
#				has_saved_event_target = escanni_effect_target_2
# 			}
# 			event_target:escanni_effect_target_2 = {
# 				add_province_modifier = {
# 					name = upset_escanni_refugees
# 					duration = 5475
# 				}
# 			}
# 		}
# 		if = {
# 			limit = {
#				has_saved_event_target = escanni_effect_target_3
# 				
# 			}
# 			event_target:escanni_effect_target_3 = {
# 				add_province_modifier = {
# 					name = upset_escanni_refugees
# 					duration = 5475
# 				}
# 			}
# 		}
# 		decrease_escanni_integration_policy = yes
# 	}
# 	option = { #special 1 - 
# 		name = escanni_refugees_settlement.30x.c
# 		highlight = yes
# 		trigger = {
# 		}
# 		ai_chance = {
# 			factor = 6
# 		}
# 		add_treasury = 50
# 		add_prestige = -5
# 		event_target:escanni_effect_target_1 = {
# 			add_province_modifier = {
# 				name = exploited_escanni_refugees
# 				duration = 5475
# 			}
# 		}
# 		if = {
# 			limit = {
#				has_saved_event_target = escanni_effect_target_2
# 			}
# 			event_target:escanni_effect_target_2 = {
# 				add_province_modifier = {
# 					name = exploited_escanni_refugees
# 					duration = 5475
# 				}
# 			}
# 		}
# 		if = {
# 			limit = {
#				has_saved_event_target = escanni_effect_target_3
# 				
# 			}
# 			event_target:escanni_effect_target_3 = {
# 				add_province_modifier = {
# 					name = exploited_escanni_refugees
# 					duration = 5475
# 				}
# 			}
# 		}
# 		decrease_escanni_integration_policy = yes
# 	}
# 	option = { #special 2 - 
# 		name = escanni_refugees_settlement.30x.e
# 		highlight = yes
# 		trigger = {
# 		}
# 		ai_chance = {
# 			factor = 6
# 		}
# 		add_prestige = 5
# 		add_country_modifier = {
# 			name = escanni_prodp_mod
# 			duration = 5475
# 		}
# 		event_target:escanni_effect_target_1 = {
# 			add_province_modifier = {
# 				name = appeased_escanni_refugees
# 				duration = 5475
# 			}
# 		}
# 		if = {
# 			limit = {
#				has_saved_event_target = escanni_effect_target_2
# 				
# 			}
# 			event_target:escanni_effect_target_2 = {
# 				add_province_modifier = {
# 					name = appeased_escanni_refugees
# 					duration = 5475
# 				}
# 			}
# 		}
# 		if = {
# 			limit = {
#				has_saved_event_target = escanni_effect_target_3
# 				
# 			}
# 			event_target:escanni_effect_target_3 = {
# 				add_province_modifier = {
# 					name = appeased_escanni_refugees
# 					duration = 5475
# 				}
# 			}
# 		}
# 	}
# }

#400+ Events on Escann side
country_event = {#Escanni event manager
	id = escanni_refugees_settlement.400
	title = "escanni_refugees_settlement.400.t"
	picture = REFUGEES_ESCAPING_eventPicture
	desc = "escanni_refugees_settlement.400.d"
	
	hidden = yes
	
	is_triggered_only = yes

	trigger = {
		NOT = { has_global_flag = escanni_migration_finished }
		capital_scope = { province_group = escann_proper }
		any_owned_province = { has_province_flag = escanni_migration_target }
	}

	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = escanni_refugees_settlement.400.a
		ai_chance = { factor = 1 }
		random_list = {
			100 = {
				modifier = {
					factor = 0
					OR = {
						has_country_modifier =  orcish_administration
						has_country_modifier =  goblin_administration
					}
				}
				country_event = {
					id = escanni_refugees_settlement.401 #Former inhabitants return
				}
			}
			100 = {
				modifier = {
					factor = 0
					NOT = { has_country_modifier =  orcish_administration }
					NOT = { has_country_modifier =  goblin_administration }
				}
				country_event = {
					id = escanni_refugees_settlement.402 #Human settlers approach
				}
			}
		}
	}
}
country_event = {#Former inhabitants return home - repeat
	id = escanni_refugees_settlement.401
	title = "escanni_refugees_settlement.401.t"
	picture = CITY_DEVELOPMENT_eventPicture
	desc = "escanni_refugees_settlement.401.d"
	
	is_triggered_only = yes

	trigger = {#trigger is in the factors of the event manager
	}

	mean_time_to_happen = {
		days = 1
	}

	option = { #Assimilate them into our society
		name = escanni_refugees_settlement.401.a
		ai_chance = { factor = 1 }
		trigger = {
			NOT = {
				OR = {
					tag = B36 #Marrhold
					tag = B55 #Count's league
					tag = B31 #Castellyr
				}
			}
		}
		every_owned_province = {
			limit = { has_province_flag = escanni_migration_target }
			if = {
				limit = { 
					is_colony = yes
				}
				add_colonysize = 100
			}
			else = {
				add_random_development = 1
			}
			add_province_modifier = {
				name = escanni_refugee_assimilate_escann
				duration = 3650
			}
			if = {
				limit = { NOT = { culture_is_human = yes } }
				add_human_minority_size_effect = yes
			}
			if = { #corinite
				limit = {
					is_religion_enabled = corinite
					NOT = { religion = corinite }
					NOT = { is_capital = yes }
				}
				if = {
					limit = {
						NOT = { OR = { religion = dalcabba religion = elikhetist }}
					}
					change_religion = corinite
				}
				else = {
					random = {
						chance = 40
						change_religion = corinite
					}
				}
			}
			else_if = { #RC
				limit = {
					NOT = { is_religion_enabled = corinite }
					NOT = { religion = regent_court }
					NOT = { is_capital = yes }
				}
				if = {
					limit = {
						NOT = { OR = { religion = dalcabba religion = elikhetist }}
					}
					change_religion = regent_court
				}
				else = {
					random = {
						chance = 40
						change_religion = regent_court
					}
				}
			}
			clr_province_flag = escanni_migration_target
		}
	}
	option = { #If they don't adapt, they don't belong
		name = escanni_refugees_settlement.401.b
		ai_chance = { factor = 0 }
		trigger = {
			NOT = {
				OR = {
					tag = B36 #Marrhold
					tag = B55 #Count's league
					tag = B31 #Castellyr
				}
			}
		}
		random = {
			chance = 10
			add_stability = -1
		}
		set_flags_escanni_refugees_escann_side = yes #flee
	}
	option = { #It is their lands, and ours
		name = escanni_refugees_settlement.401.c
		ai_chance = { factor = 1 }
		trigger = {
			OR = {
				tag = B36 #Marrhold
				tag = B55 #Count's league
				tag = B31 #Castellyr
			}
		}
		every_owned_province = {
			limit = { has_province_flag = escanni_migration_target }
			if = {
				limit = { 
					is_colony = yes
				}
				add_colonysize = 100
			}
			else = {
				add_random_development = 1
			}
			add_province_modifier = {
				name = escanni_refugee_homecoming_escann
				duration = 3650
			}
			if = {
				limit = { NOT = { culture_is_human = yes } }
				add_human_minority_size_effect = yes
			}
			if = { #corinite
				limit = {
					is_religion_enabled = corinite
					NOT = { religion = corinite }
					NOT = { is_capital = yes }
				}
				change_religion = corinite
			}
			else_if = { #RC
				limit = {
					NOT = { is_religion_enabled = corinite }
					NOT = { religion = regent_court }
					NOT = { is_capital = yes }
				}
				change_religion = regent_court
			}
			clr_province_flag = escanni_migration_target
		}
	}
}
country_event = {#Human settlers approach our borders
	id = escanni_refugees_settlement.402
	title = "escanni_refugees_settlement.402.t"
	picture = REFUGEES_ESCAPING_eventPicture
	desc = "escanni_refugees_settlement.402.d"
	
	is_triggered_only = yes

	trigger = {#trigger is in the factors of the event manager
	}

	mean_time_to_happen = {
		days = 1
	}

	option = { #They are those displaced by Korgus, show them mercy, allow them to settle
		name = escanni_refugees_settlement.402.a
		ai_chance = { factor = 1 }
		random = {
			chance = 5
			add_stability = -1
		}
		if = {
			limit = {
				NOT = { has_country_modifier = monstrous_nation }
			}
			add_dip_power = 30
			add_country_modifier = {
				name = progressive_nation_refugee_escann
				duration = 3650
			}
		}
		else = {
			decrease_monstrous_3 = yes
		}
		random_list = {
			75 = {#settle
				every_owned_province = {
					limit = { has_province_flag = escanni_migration_target }
					if = {
						limit = { 
							is_colony = yes
						}
						add_colonysize = 100
					}
					else = {
						add_random_development = 1
					}
					add_province_modifier = {
						name = escanni_refugee_assimilate_escann
						duration = 3650
					}
					if = {
						limit = { NOT = { culture_is_human = yes } }
						add_human_minority_size_effect = yes
					}
					clr_province_flag = escanni_migration_target
				}
			}
			25 = {#flee
				set_flags_escanni_refugees_escann_side = yes
			}
		}
	}

	option = { #Send them away safely, we don't kill on sight
		name = escanni_refugees_settlement.402.b
		ai_chance = { factor = 0 }
		add_treasury = -25
		add_dip_power = -20
		small_increase_of_human_tolerance_effect = yes
		if = {
			limit = {
				NOT = { has_country_modifier = monstrous_nation }
			}
			add_country_modifier = {
				name = nice_people_with_refugee_escann
				duration = 3650
			}
		}
		else = {
			decrease_monstrous_1 = yes
		}
		set_flags_escanni_refugees_escann_side = yes #flee
	}

	option = { #They can stay, but whatever they brought is our now
		name = escanni_refugees_settlement.402.c
		ai_chance = { factor = 0 }
		add_treasury = 10
		add_dip_power = 10
		small_decrease_of_human_tolerance_effect = yes
		add_prestige = 5
		random_list = {
			25 = {#integrate
				every_owned_province = {
					limit = { has_province_flag = escanni_migration_target }
					if = {
						limit = { 
							is_colony = yes
						}
						add_colonysize = 100
					}
					else = {
						add_random_development = 1
					}
					add_province_modifier = {
						name = escanni_refugee_assimilate_escann
						duration = 3650
					}
					if = {
						limit = { NOT = { culture_is_human = yes } }
						add_human_minority_size_effect = yes
					}
					clr_province_flag = escanni_migration_target
				}
			}
			75 = {#flee
				set_flags_escanni_refugees_escann_side = yes
			}
		}
	}

	option = { #They cannot stay, make them leave
		name = escanni_refugees_settlement.402.e
		ai_chance = { factor = 0 }
		add_mil_power = -10
		random = {
			chance = 10
			add_stability = 1
		}
		medium_decrease_of_human_tolerance_effect = yes
		if = {
			limit = {
				NOT = { has_country_modifier = monstrous_nation }
			}
			add_country_modifier = {
				name = mean_people_with_refugee_escann
				duration = 7300
			}
		}
		else = {
			increase_monstrous_3 = yes
		}
		set_flags_escanni_refugees_escann_side = yes #flee
	}
}