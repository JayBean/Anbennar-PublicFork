
###########################################################
# Events for the Mages Estate
#
# written by Tus3
###########################################################

namespace = mages_estate_events

#Event to create war wizard general
country_event = {
	id = mages_estate_events.0
	title = mages_estate_events.0.t
	desc = mages_estate_events.0.d
	picture = DHIMMI_ESTATE_eventPicture
	
	trigger = {
		OR = {
			has_estate = estate_mages
			has_estate = estate_acolytes
		}
		has_estate_privilege = estate_mages_battlemage_academies
	}
	
	mean_time_to_happen = {
		years = 100
		modifier = {
			factor = 0.9
			estate_influence = {
				estate = estate_mages
				influence = 20
			}
		}
		modifier = {
			factor = 0.9
			estate_influence = {
				estate = estate_mages
				influence = 40
			}
		}
		modifier = {
			factor = 0.9
			estate_influence = {
				estate = estate_mages
				influence = 60
			}
		}
		modifier = {
			factor = 0.9
			estate_influence = {
				estate = estate_mages
				influence = 80
			}
		}
		modifier = {
			factor = 0.9
			estate_influence = {
				estate = estate_mages
				influence = 100
			}
		}
		modifier = {  # also works for Black Demense
			factor = 0.75 # slightly more common for BD
			estate_influence = {
				estate = estate_acolytes
				influence = 20
			}
		}
		modifier = {  # also works for Black Demense
			factor = 0.75 # slightly more common for BD
			estate_influence = {
				estate = estate_acolytes
				influence = 40
			}
		}
		modifier = {  # also works for Black Demense
			factor = 0.75 # slightly more common for BD
			estate_influence = {
				estate = estate_acolytes
				influence = 60
			}
		}
		modifier = {  # also works for Black Demense
			factor = 0.75 # slightly more common for BD
			estate_influence = {
				estate = estate_acolytes
				influence = 80
			}
		}
		modifier = {  # also works for Black Demense
			factor = 0.75 # slightly more common for BD
			estate_influence = {
				estate = estate_acolytes
				influence = 100
			}
		}
		modifier = {
			factor = 0.9
			has_country_modifier = xia_battlemage_mastery
		}
		modifier = {
			factor = 0.2
			has_country_flag = battlemage_common
		}
		modifier = {
			factor = 2
			has_estate = estate_mages
			NOT = {
				estate_loyalty = {
					estate = estate_mages
					loyalty = 30
				}
			}
		}
		modifier = { # also works for Black Demense
			factor = 2
			has_estate = estate_acolytes
			NOT = {
				estate_loyalty = {
					estate = estate_acolytes
					loyalty = 30
				}
			}
		}
	}

	option = {
		name = mages_estate_events.0.a #Ok
		
		create_war_wizard_effect = yes
	}
}

#Advancement of the Mages
country_event = {
	id = mages_estate_events.1
	title = mages_estate_events.1.t
	desc = mages_estate_events.1.d
	picture = DHIMMI_ESTATE_eventPicture
	
	is_triggered_only = yes
	
	trigger = {

		has_estate = estate_mages
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_mages
				modifier = EST_VAL_MAGES_ADVANCES
			}
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_mages
				modifier = EST_VAL_MAGES_ADVANCES_20
			}
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_mages
				modifier = EST_VAL_MAGES_DECLINES
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	

	option = {
		name = mages_estate_events.1.a #Ok
		add_estate_influence_modifier = {
			estate = estate_mages
			desc = EST_VAL_MAGES_ADVANCE
			influence = 10
			duration = 5475
		}
	}
}

#Decline of Mages Power
country_event = {
	id = mages_estate_events.2
	title = mages_estate_events.2.t
	desc = mages_estate_events.2.d
	picture = DHIMMI_ESTATE_eventPicture
	
	trigger = {

		has_estate = estate_mages
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_mages
				modifier = EST_VAL_MAGES_ADVANCES
			}
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_mages
				modifier = EST_VAL_MAGES_ADVANCES_20
			}
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_mages
				modifier = EST_VAL_MAGES_DECLINES
			}
		}
	}
	
	is_triggered_only = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = mages_estate_events.2.a #Ok
		add_estate_influence_modifier = {
			estate = estate_mages
			desc = EST_VAL_MAGES_DECLINE
			influence = -10
			duration = 5475
		}
	}
}

#Mages accusing Artificers of breaking tradition and attempting to prison magic
#Mages vs Artificers
country_event = {
	id = mages_estate_events.3
	title = mages_estate_events.3.t
	desc = mages_estate_events.3.d
	picture = DEBATE_REPUBLICAN_eventPicture
	
	trigger = {
		has_estate = estate_mages
		has_estate = estate_artificers
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_mages
				modifier = EST_VAL_MAGIC_DEBATE_MAGES
			}
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_mages
				modifier = EST_VAL_MAGIC_DEBATE_ARTIFICERS
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	is_triggered_only = yes
	
	
	
	option = {
		name = mages_estate_events.3.a #Support Artificers
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				NOT = {
					estate_loyalty = {
						estate = estate_mages
						loyalty = 40
					}
				}
			}
			modifier = {
				factor = 1.5
				estate_influence = {
					estate = estate_mages
					influence = 60
				}
			}
			modifier = {
				factor = 0.5
				estate_influence = {
					estate = estate_artificers
					influence = 60
				}
			}
		}
		add_estate_loyalty = {
			estate = estate_mages
			loyalty = -15
		}
		add_estate_loyalty = {
			estate = estate_artificers
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_mages
			desc = EST_VAL_MAGIC_DEBATE_ARTIFICERS
			influence = -5
			duration = 3650
		}
	}
	option = {
		name = mages_estate_events.3.b #Support Mages
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.2
				NOT = {
					estate_loyalty = {
						estate = estate_artificers
						loyalty = 40
					}
				}
			}
			modifier = {
				factor = 0.5
				estate_influence = {
					estate = estate_mages
					influence = 60
				}
			}
			modifier = {
				factor = 1.5
				estate_influence = {
					estate = estate_artificers
					influence = 60
				}
			}
		}
		add_estate_loyalty = {
			estate = estate_artificers
			loyalty = -15
		}
		add_estate_loyalty = {
			estate = estate_mages
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_artificers
			desc = EST_VAL_MAGIC_DEBATE_MAGES
			influence = -5
			duration = 3650
		}
	}
}

#Succession: Magical heir or non-magical one the guy petitions to make his heir his younger child thats magical
#Mages vs Nobles
country_event = {
	id = mages_estate_events.4
	title = mages_estate_events.4.t
	desc = mages_estate_events.4.d
	picture = NEW_HEIR_eventPicture
	
	trigger = {
		has_estate = estate_mages
		NOT = { tag = I02 } #krakdhumvror ice-smiths don't meddle in this stuff
		estate_influence = {
			estate = estate_nobles
			influence = 40
		}
		estate_influence = {
			estate = estate_mages
			influence = 25
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_mages
				modifier = EST_VAL_MAGICAL_NOBILITY_SUPPORTED
			}
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_mages
				modifier = EST_VAL_TRADITIONAL_NOBILITY_SUPPORTED
			}
		}
		OR = {
			any_owned_province = {
				OR = {
					superregion = escann_superregion
					superregion = western_cannor_superregion
				}
			}
			has_reform = magical_elite_reform
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	is_triggered_only = yes
	
	option = {
		name = mages_estate_events.4.a #Succession is succession, no matter what.
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				NOT = {
					estate_loyalty = {
						estate = estate_mages
						loyalty = 40
					}
				}
			}
			modifier = {
				factor = 1.5
				estate_influence = {
					estate = estate_mages
					influence = 60
				}
			}
			modifier = {
				factor = 0.5
				estate_influence = {
					estate = estate_nobles
					influence = 60
				}
			}
		}
		add_estate_loyalty = {
			estate = estate_mages
			loyalty = -15
		}
		add_estate_influence_modifier = {
			estate = estate_mages
			desc = EST_VAL_TRADITIONAL_NOBILITY_SUPPORTED
			influence = -10
			duration = 3650
		}
		add_estate_influence_modifier = {
			estate = estate_nobles
			desc = EST_VAL_TRADITIONAL_NOBILITY_SUPPORTED
			influence = 10
			duration = 3650
		}
	}
	option = {
		name = mages_estate_events.4.b #Accept the petition
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				has_reform = magical_elite_reform
			}
			modifier = {
				factor = 0.2
				NOT = {
					estate_loyalty = {
						estate = estate_nobles
						loyalty = 40
					}
				}
			}
			modifier = {
				factor = 0.5
				estate_influence = {
					estate = estate_mages
					influence = 60
				}
			}
			modifier = {
				factor = 1.5
				estate_influence = {
					estate = estate_nobles
					influence = 60
				}
			}
		}
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = -15
		}
		add_estate_influence_modifier = {
			estate = estate_mages
			desc = EST_VAL_MAGICAL_NOBILITY_SUPPORTED
			influence = 10
			duration = 3650
		}
		add_estate_influence_modifier = {
			estate = estate_nobles
			desc = EST_VAL_MAGICAL_NOBILITY_SUPPORTED
			influence = -10
			duration = 3650
		}
	}
}

#Magical experiment gone wrong
country_event = {
	id = mages_estate_events.5
	title = mages_estate_events.5.t
	desc = mages_estate_events.5.d
	picture = TEMPORAL_RIFT_eventPicture
	goto = magical_spell_gone_wrong_province
	
	trigger = {
		has_estate = estate_mages

		NOT = {
			has_estate_influence_modifier = {
				estate = estate_mages
				modifier = EST_VAL_MAGICAL_SPELL_GONE_WRONG
			}
		}
		
		NOT = { has_country_flag = vacyntassi_jaherian_statute_flag }
		
		estate_influence = {
			estate = estate_mages
			influence = 15
		}
		
		any_owned_province = {
			is_core = ROOT
			is_in_capital_area = yes
			NOT = { pure_unrest = 5 }
			NOT = { devastation = 25 }
		}
	}
	
	is_triggered_only = yes
	
	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 1.5
			has_estate_privilege = estate_mages_organization_guilds
		}
		modifier = {
			factor = 1.5
			estate_influence = {
				estate = estate_mages
				influence = 30
			}
			NOT = { tag = I02 } #krakdhumvror ice-crafting is less "dangerous"
		}
	}
	
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					is_core = ROOT
					is_in_capital_area = yes
					NOT = { pure_unrest = 5 }
					NOT = { devastation = 25 }
				}
				save_event_target_as = magical_spell_gone_wrong_province
			}
			random_owned_province = {
				limit = {
					is_core = ROOT
					is_in_capital_area = yes
					NOT = { pure_unrest = 5 }
					NOT = { devastation = 25 }
					
					has_building = mage_tower
				}
				save_event_target_as = magical_spell_gone_wrong_province
			}
			random_owned_province = {
				limit = {
					is_core = ROOT
					is_in_capital_area = yes
					NOT = { pure_unrest = 5 }
					NOT = { devastation = 25 }
					
					development = 20
					has_building = mage_tower
				}
				save_event_target_as = magical_spell_gone_wrong_province
			}
		}
	}
	
	option = {
		name = mages_estate_events.5.a #Who cares?
		
		add_estate_mages_loyalty_effect = yes
		
		add_estate_influence_modifier = {
			estate = estate_mages
			desc = EST_VAL_MAGICAL_SPELL_GONE_WRONG
			influence = -20
			duration = 3650
		}
		
		event_target:magical_spell_gone_wrong_province = {
			add_devastation = 50
			add_named_unrest = {
				name = angry_over_magical_spells_gone_wrong
				value = 10
			}
		}
	}
	option = {
		name = mages_estate_events.5.b #Punish the wrongdoer
		
		reduce_estate_mages_loyalty_effect = yes
		
		add_estate_influence_modifier = {
			estate = estate_mages
			desc = EST_VAL_MAGICAL_SPELL_GONE_WRONG
			influence = -20
			duration = 7300
		}
		event_target:magical_spell_gone_wrong_province = {
			add_devastation = 50
		}
	}
}

#Conclave of Magi - this is a reactionary event if mages are getting too weak
country_event = {
	id = mages_estate_events.6
	title = mages_estate_events.6.t
	desc = mages_estate_events.6.d
	picture = DIET_eventPicture
	
	trigger = {

		has_estate = estate_mages
		
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_mages
				modifier = EST_VAL_MAGE_CONCLAVE_HELD
			}
		}
		
		
	
	}
	
	is_triggered_only = yes
	
	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 2
			NOT = {
				estate_influence = {
					estate = estate_mages
					influence = 30
				}
			}
		}
		modifier = {
			factor = 1.25
			NOT = { stability = 1 }
		}
		modifier = {
			factor = 1.25
			is_at_war = yes
		}
	}
	
	option = {
		name = mages_estate_events.6.a #Let them do their meeting
		ai_chance = {
			factor = 50
		}
		add_estate_influence_modifier = {
			estate = estate_mages
			desc = EST_VAL_MAGE_CONCLAVE_HELD
			influence = 20
			duration = 5475
		}
	}
	option = {
		name = mages_estate_events.6.b #Prevent the conclave at all costs!
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				estate_influence = {
					estate = estate_mages
					influence = 30
				}
			}
			modifier = {
				factor = 1.5
				estate_loyalty = {
					estate = estate_mages
					loyalty = 40
				}
			}
		}
		add_estate_loyalty = {
			estate = estate_mages
			loyalty = -20
		}
	}
}

#Mage of Renown
country_event = {
	id = mages_estate_events.7
	title = mages_estate_events.7.t
	desc = mages_estate_events.7.d
	picture = ADVISOR_eventPicture
	
	trigger = {
		has_estate = estate_mages
		NOT = { tag = I02 } #krakdhumvror ice-smiths are local
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_mages
				modifier = EST_VAL_RENOWNED_MAGE_SUPPORTED
			}
		}
	}
	
	is_triggered_only = yes
	
	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 1.25
			has_estate_privilege = estate_mages_organization_guilds
		}
	}
	
	immediate = {
		check_if_non_state_advisor_effect = { #Hidden, must be followed by erase_advisor_flags_effect
			chance_of_primary = 75 #Not percentages!
			chance_of_tertiary = 10
			chance_of_secondary = 25
		}
	}
	after = {
		erase_advisor_flags_effect = yes
	}
	
	option = {
		name = mages_estate_events.7.a #Yep, they're from here.
		ai_chance = {
			factor = 50
		}
		add_prestige = 10
	}
	option = {
		name = mages_estate_events.7.b #Reward and support them
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				NOT = {
					estate_loyalty = {
						estate = estate_mages
						loyalty = 60
					}
				}
			}
			modifier = {
				factor = 0.5
				estate_influence = {
					estate = estate_mages
					influence = 60
				}
			}
		}
		add_years_of_income = -0.25
		add_estate_mages_loyalty_effect = yes
		add_estate_influence_modifier = {
			estate = estate_mages
			desc = EST_VAL_RENOWNED_MAGE_SUPPORTED
			influence = 5
			duration = 5475
		}
	}
	option = {
		name = mages_estate_events.7.c #Offer them a role at court!
		ai_chance = {
			factor = 25
		}
		generate_advisor_of_type_and_semi_random_religion_effect = {
			advisor_type = court_mage
			advisor_type_if_not_state = court_mage
			scaled_skill = yes
			discount = yes
		}
	}
}

#Mages financial trouble
country_event = {
	id = mages_estate_events.8
	title = mages_estate_events.8.t
	desc = mages_estate_events.8.d	#they want subsidizes to push research and shit
	picture = BANKRUPTCY_eventPicture
	
	trigger = {

		has_estate = estate_mages
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_mages
				modifier = EST_VAL_SAVED_FROM_FINANCIAL_TROUBLE
			}
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_mages
				modifier = EST_VAL_FINANCIAL_TROUBLE
			}
		}
	}
	
	is_triggered_only = yes
	
	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 1.5
			has_estate_privilege = estate_mages_organization_state
		}
	}
	
	option = {
		name = mages_estate_events.8.a #Give them some money
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				NOT = {
					estate_loyalty = {
						estate = estate_mages
						loyalty = 40
					}
				}
			}
			modifier = {
				factor = 1.5
				estate_influence = {
					estate = estate_mages
					influence = 60
				}
			}
		}
		add_years_of_income = -0.33
		add_estate_mages_loyalty_effect = yes
	}
	option = {
		name = mages_estate_events.8.b #You're on your own!
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				estate_influence = {
					estate = estate_mages
					influence = 60
				}
			}
		}
		add_estate_influence_modifier = {
			estate = estate_mages
			desc = EST_VAL_FINANCIAL_TROUBLE
			influence = -15
			duration = 5475
		}
	}
}

#Mages buying private property
country_event = {
	id = mages_estate_events.9
	title = mages_estate_events.9.t
	desc = mages_estate_events.9.d
	picture = GREAT_BUILDING_eventPicture
	
	trigger = {

		has_estate = estate_mages
		NOT = { tag = I02 } #krakdhumvror ice-smiths already have lots of land and get more throughout MT
		estate_influence = {
			estate = estate_mages
			influence = 40
		}
		
		crown_land_share = 20
		
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_mages
				modifier = EST_VAL_PREVENTED_FROM_BUYING_LAND
			}
		}

	}
	
	is_triggered_only = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = mages_estate_events.9.a #Let them do as they please
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				NOT = {
					estate_loyalty = {
						estate = estate_mages
						loyalty = 40
					}
				}
			}
			modifier = {
				factor = 1.5
				NOT = {
					estate_influence = {
						estate = estate_mages
						influence = 15
					}
				}
			}
		}

		add_estate_mages_loyalty_effect = yes
		
		scaled_estate_mages_land_share_effect = yes
	}
	option = {
		name = mages_estate_events.9.b #Stop them from buying more land
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				estate_influence = {
					estate = estate_mages
					influence = 70
				}
			}
			modifier = {
				factor = 0
				NOT = { years_of_income = 1 }
			}
		}
		
		add_estate_loyalty = {
			estate = estate_mages
			loyalty = -15
		}
		
		add_estate_influence_modifier = {
			estate = estate_mages
			desc = EST_VAL_PREVENTED_FROM_BUYING_LAND
			influence = -10
			duration = 5475
		}
	}
}

#The People's Mage: Mage School founded (local community helps too)
country_event = {
	id = mages_estate_events.10
	title = mages_estate_events.10.t
	desc = mages_estate_events.10.d
	picture = GREAT_BUILDING_eventPicture
	goto = mage_school_built_province
	
	trigger = {
		has_estate = estate_mages
		NOT = { tag = I02 } #krakdhumvror already builds a lot of mage towers throughout MT
		any_owned_province = {
			development = 10
			is_capital = no
			num_free_building_slots = 1
			NOT = { has_building = mage_tower }
			NOT = { has_construction = building }
			has_manufactory_trigger = no
			is_territory = no
			is_state_core = ROOT	
		}
	}
	
	is_triggered_only = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					development = 10
					is_capital = no
					num_free_building_slots = 1
					NOT = { has_building = mage_tower }
					NOT = { has_construction = building }
					has_manufactory_trigger = no
					is_territory = no
					is_state_core = ROOT		
				}
				save_event_target_as = mage_school_built_province
			}
		}
	}
	
	option = {
		name = mages_estate_events.10.a #Allow it
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				NOT = { treasury = 250 }
			}
			modifier = {
				factor = 2
				event_target:mage_school_built_province = {
					OR = {
						trade_goods = damestear
						trade_goods = precursor_relics
						trade_goods = incense
						trade_goods = chinaware
					}
				}
			}
		}
		event_target:mage_school_built_province = {
			add_building_construction = {
				building = mage_tower
				speed = 0.5
				cost = 0.5
			}
			hidden_effect = {
				add_province_modifier = {
					name = mage_build_tower
					duration = 1826
					hidden = yes
				}
				province_event = { id = mages_estate_events.25 days = 1825 } #If mage tower built get second option but worse unrest
			}
		}
		add_prestige = -10
	}
	option = {
		name = mages_estate_events.10.b # Reverse this development
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				estate_influence = {
					estate = estate_mages
					influence = 70
				}
				treasury = 250
			}
		}
		reduce_estate_mages_loyalty_effect = yes
		event_target:mage_school_built_province = {
			add_named_unrest = {
				name = mage_tower_rejected
				value = 10
			}
		}
	}
}

#Demands at high influence
#Advisor accused of dark magic
country_event = {
	id = mages_estate_events.11
	title = mages_estate_events.11.t
	desc = mages_estate_events.11.d
	picture = ACCUSATION_eventPicture
	
	trigger = {

		has_estate = estate_mages
		NOT = { tag = I02 } #krakdhumvror dark magic makes no sense for ice-smiths
		estate_influence = {
			estate = estate_mages
			influence = 70
		}
		has_advisor = yes
	}
	
	is_triggered_only = yes
	
	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 1.5
			has_estate_privilege = estate_mages_organization_state
		}
		modifier = {
			factor = 1.5
			has_estate_privilege = estate_mages_organization_magisterium
		}
		modifier = {
			factor = 1.5
			has_estate_privilege = estate_mages_reduced_research_regulations
		}
	}
	
	option = {
		name = mages_estate_events.11.a #I think I know my advisors
		ai_chance = {
			factor = 50
		}
		add_estate_loyalty = {
			estate = estate_mages
			loyalty = -20
		}
	}
	option = {
		name = mages_estate_events.11.b #Execute the advisor
		ai_chance = {
			factor = 50
		}
		kill_advisor = random
		add_estate_mages_loyalty_effect = yes
	}
	option = {
		trigger = { 
			OR = {
				has_government_attribute = always_witch_king
				# has_country_flag = witch_king_flag
				has_country_modifier = witch_king_modifier
			}
		}
		ai_chance = { factor = 1000 }
		highlight = yes
		name = mages_estate_events.11.c # Ought to share this with the rest of us
		random_list = {
			25 = {
				add_adm_power = 33
			}
			25 = {
				add_dip_power = 33
			}
			25 = {
				add_mil_power = 33
			}
		}
		add_prestige = -15
	}
}

#Demands - Mages demand more autonomy
country_event = {
	id = mages_estate_events.12
	title = mages_estate_events.12.t
	desc = mages_estate_events.12.d
	picture = REFORM_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_estate = estate_mages
		estate_influence = {
			estate = estate_mages
			influence = 70
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_mages
				modifier = EST_VAL_ACCEPTED_MAGIC_LAW
			}
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_mages
				modifier = EST_VAL_REJECTED_MAGIC_LAW
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = mages_estate_events.12.a #Agree
		ai_chance = {
			factor = 50
		}
		add_country_modifier = {
			name = mundane_problems_magical_solutions
			duration = 5475
		}
		add_estate_influence_modifier = {
			estate = estate_mages
			desc = EST_VAL_ACCEPTED_MAGIC_LAW
			influence = 10
			duration = 5475
		}
	}
	option = {
		name = mages_estate_events.12.b #Disagree
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.2
				NOT = {
					estate_loyalty = {
						estate = estate_mages
						loyalty = 45
					}
				}
			}
			modifier = {
				factor = 1.5
				estate_influence = {
					estate = estate_mages
					influence = 60
				}
			}
		}
		add_stability = -1
		add_estate_loyalty = {
			estate = estate_mages
			loyalty = -20
		}
		add_estate_influence_modifier = {
			estate = estate_mages
			desc = EST_VAL_REJECTED_MAGIC_LAW
			influence = -10
			duration = 5475
		}
	}
}

#Nice things can also come from strong and loyal Magess.
#Bonus for high influence + high loyalty

#High Loyalty - Sage Advice
country_event = {
	id = mages_estate_events.13
	title = mages_estate_events.13.t
	desc = mages_estate_events.13.d
	picture = CHURCH_ESTATE_1_eventPicture
	
	trigger = {

		has_estate = estate_mages
		estate_loyalty = {
			estate = estate_mages
			loyalty = 70
		}
	}
	
	is_triggered_only = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = mages_estate_events.13.a #Excellent advice.
		random_list =  {
			25 = {
				add_adm_power = 100
			}
			25 = {
				add_dip_power = 100
			}
			25 = {
				add_mil_power = 100
			}
			25 = {
				add_adm_power = 100
				add_dip_power = 100
				add_mil_power = 100
			}
		}
	}
}


#Talented Battlemage Cohort
country_event = {
	id = mages_estate_events.14
	title = mages_estate_events.14.t
	desc = mages_estate_events.14.d			#as in a generation of battlemages loyal to the cause is enlisted
	picture = ELECTION_REPUBLICAN_eventPicture
	
	trigger = {
		OR = {
			has_estate = estate_mages
			has_estate = estate_acolytes
		}
		has_estate_privilege = estate_mages_battlemage_academies
		if = {
			limit = {
				has_estate = estate_mages
			} 
			estate_loyalty = {
				estate = estate_mages
				loyalty = 55
			}
			estate_influence = {
				estate = estate_mages
				influence = 55
			}
		}
		else = { # also works for Black Demense
			estate_loyalty = {
				estate = estate_acolytes
				loyalty = 55
			}
			estate_influence = {
				estate = estate_acolytes
				influence = 55
			}
		}
	}
	
	is_triggered_only = yes
	
	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 1.5
			has_estate_privilege = estate_mages_organization_state
		}
		modifier = {
			factor = 1.5
			has_estate_privilege = estate_mages_organization_magisterium
		}
		modifier = { # also works for Black Demense
			factor = 1.5
			has_estate = estate_acolytes
		}
		modifier = {
			factor = 2
			is_at_war = yes
		}
	}
	
	option = {
		name = mages_estate_events.14.a #Magic Missile!
		add_country_modifier = {
			name = talented_battlemage_cohort
			duration = 7300
		}
	}
}


#Organization Specific

#Decentralized
#New Magical Guild Members
country_event = {
	id = mages_estate_events.15
	title = mages_estate_events.15.t
	desc = mages_estate_events.15.d		
	picture = STREET_SPEECH_eventPicture
	
	trigger = {

		has_estate = estate_mages
		has_estate_privilege = estate_mages_organization_guilds
		
		#This is to make sure this only fires when they are weak
		estate_influence = {
			estate = estate_mages
			influence = 20
		}
		NOT = {
			estate_influence = {
				estate = estate_mages
				influence = 50
			}
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_mages
				modifier = EST_VAL_DECENTRALIZED_NEW_GUILD_MEMBERS
			}
		}
	}
	
	is_triggered_only = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = mages_estate_events.15.a #Good!
		add_estate_influence_modifier = {
			estate = estate_mages
			desc = EST_VAL_DECENTRALIZED_NEW_GUILD_MEMBERS
			influence = 10
			duration = 3650
		}
	}
	
	option = {
		name = mages_estate_events.15.b #Supress new recruitment
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				estate_loyalty = {
					estate = estate_mages
					loyalty = 50
				}
			}
		}
		reduce_estate_mages_loyalty_effect = yes
		add_estate_influence_modifier = {
			estate = estate_mages
			desc = EST_VAL_DECENTRALIZED_SUPRESSING_NEW_GUILD_MEMBERS
			influence = -5
			duration = 3650
		}
	}
}

#Mages gone Wild (run amok)
country_event = {
	id = mages_estate_events.16
	title = mages_estate_events.16.t
	desc = mages_estate_events.16.d		
	picture = COUNTRY_COLLAPSE_eventPicture
	
	trigger = {

		has_estate = estate_mages
		has_estate_privilege = estate_mages_organization_guilds
		
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_mages
				modifier = EST_VAL_DECENTRALIZED_MAGES_RUNNING_AMOK
			}
		}
	}
	
	is_triggered_only = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = mages_estate_events.16.a #Punish the Mage Guilds
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				estate_loyalty = {
					estate = estate_nobles
					loyalty = 60
				}
			}
		}
		reduce_estate_mages_loyalty_effect = yes
		add_estate_influence_modifier = {
			estate = estate_mages
			desc = EST_VAL_DECENTRALIZED_MAGES_RUNNING_AMOK
			influence = -15
			duration = 3650
		}
	}
	
	option = {
		name = mages_estate_events.16.b #Mages will be mages
		ai_chance = {
			factor = 50
		}
		add_estate_mages_loyalty_effect = yes
		add_estate_influence_modifier = {
			estate = estate_mages
			desc = EST_VAL_DECENTRALIZED_MAGES_RUNNING_AMOK
			influence = -15
			duration = 7300
		}
	}
}

#State
#Syllabus needs updating
country_event = {
	id = mages_estate_events.17
	title = mages_estate_events.17.t
	desc = mages_estate_events.17.d		
	picture = BIG_BOOK_eventPicture
	
	trigger = {

		has_estate = estate_mages
		has_estate_privilege = estate_mages_organization_state
		
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_mages
				modifier = EST_VAL_CENTRALIZED_OUTDATED_SYLLABUS
			}
		}
	}
	
	is_triggered_only = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = mages_estate_events.17.a #Update the syllabus
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				NOT = {
					estate_loyalty = {
						estate = estate_nobles
						loyalty = 60
					}
				}
			}
		}
		add_estate_loyalty = {
			estate = estate_mages
			loyalty = 20
		}
		add_adm_power = -100
		add_years_of_income = -0.25
	}
	
	option = {
		name = mages_estate_events.17.b #It's fine as it is
		ai_chance = {
			factor = 50
		}
		add_estate_influence_modifier = {
			estate = estate_mages
			desc = EST_VAL_CENTRALIZED_OUTDATED_SYLLABUS
			influence = -10
			duration = 7300
		}
	}
}

#Magical Elite dislike subsidized students
country_event = {
	id = mages_estate_events.18
	title = mages_estate_events.18.t
	desc = mages_estate_events.18.d		
	picture = BURGHER_ESTATE_eventPicture
	
	trigger = {

		has_estate = estate_mages
		has_estate = estate_nobles
		OR = {
			has_estate_privilege = estate_mages_organization_state
			has_estate_privilege = estate_mages_organization_magisterium
		}
		
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_mages
				modifier = EST_VAL_CENTRALIZED_SCHOLARSHIPS_FOR_THE_POOR
			}
		}			
	}
	
	is_triggered_only = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = mages_estate_events.18.a #Magic is about merit not birthright
		reduce_estate_nobles_loyalty_effect = yes
		add_estate_influence_modifier = {
			estate = estate_mages
			desc = EST_VAL_CENTRALIZED_SCHOLARSHIPS_FOR_THE_POOR
			influence = 10
			duration = 7300
		}
	}
	
	option = {
		name = mages_estate_events.18.b #It needs to stay with the elite
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				NOT = {
					estate_loyalty = {
						estate = estate_nobles
						loyalty = 60
					}
				}
			}
			modifier = {
				factor = 1.5
				has_reform = magical_elite_reform
			}
		}
		add_estate_nobles_loyalty_effect = yes
	}
}


#Magisterium
#Disloyal - Magisterium disagrees with country's direction
country_event = {
	id = mages_estate_events.19
	title = mages_estate_events.19.t
	desc = mages_estate_events.19.d		
	picture = CHURCH_ESTATE_UPSET_eventPicture
	
	trigger = {

		has_estate = estate_mages
		has_estate_privilege = estate_mages_organization_magisterium
		
		NOT = {
			estate_loyalty = {
				estate = estate_mages
				loyalty = 30
			}
		}
	}
	
	is_triggered_only = yes
	
	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 2
			A85 = {
				NOT = {
					has_opinion = {
						who = ROOT
						value = 50
					}
				}
			}
		}
	}
	
	option = {
		name = mages_estate_events.19.a #Assuage the Magisterium
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				adm_power = 100
			}
			modifier = {
				factor = 1.25
				is_part_of_hre = yes
			}
		}
		reduce_estate_mages_loyalty_effect = yes
		add_dip_power = -33
		
	}
	
	option = {
		name = mages_estate_events.19.b #Who cares?
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				estate_loyalty = {
					estate = estate_mages
					loyalty = 70
				}
			}
			modifier = {
				factor = 1.25
				is_absolutism_active = yes
			}
		}
		add_estate_loyalty = {
			estate = estate_mages
			loyalty = -20
		}
		add_prestige = -15
		if = {
			limit = {
				exists = A85
			}
			A85 = {
				add_opinion = {
					who = ROOT
					modifier = magisterium_disagrees_with_direction
					years = 20
				}
			}
		}
	}
}

#Loyal - Magisterium sends support
country_event = {
	id = mages_estate_events.20
	title = mages_estate_events.20.t
	desc = mages_estate_events.20.d		
	picture = DHIMMI_ESTATE_eventPicture
	
	trigger = {

		has_estate = estate_mages
		has_estate_privilege = estate_mages_organization_magisterium
		
		#This is to make sure this only fires when they are weak
		NOT = {
			estate_influence = {
				estate = estate_mages
				influence = 30
			}
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_mages
				modifier = EST_VAL_MAGISTERIUM_MAGISTERS_SENT_SUPPORT
			}
		}	
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_mages
				modifier = EST_VAL_MAGISTERIUM_REJECTED_MAGISTER_SUPPORT
			}
		}	
	}
	
	is_triggered_only = yes
	
	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 2
			A85 = {
				has_opinion = {
					who = ROOT
					value = 150
				}
			}
		}
	}
	
	option = {
		name = mages_estate_events.20.a #Appreciated
		add_stability_or_adm_power = yes
		add_estate_influence_modifier = {
			estate = estate_mages
			desc = EST_VAL_MAGISTERIUM_MAGISTERS_SENT_SUPPORT
			influence = 20
			duration = 3650
		}
	}
	
	option = {
		name = mages_estate_events.20.b #Reject the new Magisters
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				estate_influence = {
					estate = estate_mages
					influence = 30
				}
			}
		}
		add_estate_loyalty = {
			estate = estate_mages
			loyalty = -30
		}
		add_estate_influence_modifier = {
			estate = estate_mages
			desc = EST_VAL_MAGISTERIUM_REJECTED_MAGISTER_SUPPORT
			influence = -10
			duration = 3650
		}
	}
}

#Local Revolt
province_event = {
	id = mages_estate_events.21
	title = mages_estate_events.21.t
	desc = mages_estate_events.21.d
	picture = CHURCH_ESTATE_UPSET_eventPicture
	
	is_triggered_only = yes

	option = {
		name = mages_estate_events.21.a #Ok.
		
	}
}

#Magisterium dont like reduced regulations
country_event = {
	id = mages_estate_events.22
	title = mages_estate_events.22.t
	desc = mages_estate_events.22.d		
	picture = CHURCH_ESTATE_UPSET_eventPicture
	
	trigger = {

		has_estate = estate_mages
		has_estate_privilege = estate_mages_organization_magisterium
		has_estate_privilege = estate_mages_reduced_research_regulations
		
	}
	
	is_triggered_only = yes
	
	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 1.5
			has_spy_network_from = {
				who = A85
				value = 25
			}
		}
	}
	
	option = {
		name = mages_estate_events.22.a #Assuage the Magisterium
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				prestige = 0
			}
		}
		remove_estate_privilege = estate_mages_reduced_research_regulations
		add_prestige = -10
	}
	
	option = {
		name = mages_estate_events.22.b #Who cares?
		ai_chance = {
			factor = 50
		}
		add_prestige = -20
		if = {
			limit = {
				exists = A85
			}
			A85 = {
				add_opinion = {
					who = ROOT
					modifier = magisterium_disagrees_with_direction
					years = 20
				}
			}
		}
	}
}

#Religious Org - disagreement with clergy
country_event = {
	id = mages_estate_events.23
	title = mages_estate_events.23.t
	desc = mages_estate_events.23.d
	picture = DEBATE_REPUBLICAN_eventPicture
	
	trigger = {
		has_estate = estate_mages
		has_estate = estate_church
		has_estate_privilege = estate_mages_organization_religious
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_church
				modifier = EST_VAL_MAGIC_DEBATE_MAGES
			}
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_mages
				modifier = EST_VAL_MAGIC_DEBATE_CLERGY
			}
		}
		
		estate_loyalty = {
			estate = estate_mages
			loyalty = 50
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	is_triggered_only = yes
	
	
	
	option = {
		name = mages_estate_events.23.a #Support Clergy
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				NOT = {
					estate_loyalty = {
						estate = estate_mages
						loyalty = 40
					}
				}
			}
			modifier = {
				factor = 1.5
				estate_influence = {
					estate = estate_mages
					influence = 60
				}
			}
			modifier = {
				factor = 0.5
				estate_influence = {
					estate = estate_church
					influence = 60
				}
			}
		}
		add_estate_loyalty = {
			estate = estate_mages
			loyalty = -15
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_mages
			desc = EST_VAL_MAGIC_DEBATE_CLERGY
			influence = -5
			duration = 3650
		}
	}
	option = {
		name = mages_estate_events.23.b #Support Mages
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.2
				NOT = {
					estate_loyalty = {
						estate = estate_church
						loyalty = 40
					}
				}
			}
			modifier = {
				factor = 0.5
				estate_influence = {
					estate = estate_mages
					influence = 60
				}
			}
			modifier = {
				factor = 1.5
				estate_influence = {
					estate = estate_church
					influence = 60
				}
			}
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -15
		}
		add_estate_loyalty = {
			estate = estate_mages
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_church
			desc = EST_VAL_MAGIC_DEBATE_MAGES
			influence = -5
			duration = 3650
		}
	}
}

#Disloyal - Anti-government teachings
country_event = {
	id = mages_estate_events.24
	title = mages_estate_events.24.t
	desc = mages_estate_events.24.d		
	picture = CHURCH_ESTATE_UPSET_eventPicture
	
	trigger = {

		has_estate = estate_mages
		has_estate_privilege = estate_mages_organization_state
		
		NOT = {
			estate_loyalty = {
				estate = estate_mages
				loyalty = 30
			}
		}
	}
	
	is_triggered_only = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = mages_estate_events.24.a #Let them say what they like
		ai_chance = {
			factor = 50
		}
		add_estate_loyalty_modifier = {
			estate = estate_mages
			desc = EST_VAL_ANTI_GOVERNMENT_TEACHINGS
			loyalty = -10
			duration = 7300
		}
	}
	
	option = {
		name = mages_estate_events.24.b #Make amends with the faculty
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				adm_power = 50
				dip_power = 50
				mil_power = 50
			}
		}
		add_adm_power = -25
		add_dip_power = -25
		add_mil_power = -25
		
		add_estate_loyalty_modifier = {
			estate = estate_mages
			desc = EST_VAL_ANTI_GOVERNMENT_TEACHINGS
			loyalty = -10
			duration = 3650
		}
	}
	option = {
		name = mages_estate_events.24.c #Fire them all, and replace them with loyalists
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				NOT = {
					estate_loyalty = {
						estate = estate_mages
						loyalty = 25
					}
				}
			}
			modifier = {
				factor = 2
				estate_loyalty = {
					estate = estate_mages
					loyalty = 75
				}
			}
		}
		
		add_estate_loyalty = {
			estate = estate_mages
			loyalty = -15
		}
		
		add_estate_influence_modifier = {
			estate = estate_mages
			desc = EST_VAL_INEXPERIENCED_PROFESSORS
			influence = -20
			duration = 7300
		}
	}
}

#Did not keep promise of constructing mage tower
province_event = {
	id = mages_estate_events.25
	title = mages_estate_events.25.t
	desc = mages_estate_events.25.d
	picture = CHURCH_ESTATE_UPSET_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		NOT = { has_building = mage_tower }
		NOT = { has_construction = mage_tower }
		has_province_modifier = mage_build_tower
	}

	option = {
		name = mages_estate_events.25.a #Ok.
		
		owner = { reduce_estate_mages_loyalty_effect = yes }
		add_named_unrest = {
			name = mage_tower_rejected
			value = 15
		}
	}
}