
namespace = flavor_seghdihr
#1-49 missions
#50-99 goblin incursions
#100+ SGC

#Missions
#
#goblin initial attack
country_event = {
	id = flavor_seghdihr.1
	title = flavor_seghdihr.1.t
	desc = flavor_seghdihr.1.d
	picture = CAVE_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }
	goto = 4218

	option = {
		name = flavor_seghdihr.1.a
		4090 = { 
			add_devastation = 25
			spawn_rebels = {
				type = cave_goblin_rebel
				size = 1.5
				culture = undergrowth_goblin
			}
		}
		4114 = { 
			add_devastation = 25
			spawn_rebels = {
				type = cave_goblin_rebel
				size = 1.5
				culture = undergrowth_goblin
			}
		}
		4218 = {
			add_devastation = 30
			spawn_rebels = {
				type = cave_goblin_rebel
				size = 3
				culture = undergrowth_goblin
			}
		}
		largest_decrease_of_goblin_tolerance_effect = yes
		custom_tooltip = flavor_seghdihr.1.tooltip
		hidden_effect = { 
			#####set up incursions
			if = {
				limit = { has_dlc = "Cradle of Civilization" }
				set_country_flag = seghdihr_incursions_active
				set_variable = { which = incursion_gathering_strength value = 0 }
				set_variable = { which = incursion_mission_bonus value = 0 }
				seghdihr_calculate_incursion_strength = yes
				tree_of_stone_region = { add_permanent_province_modifier = { name = seghdihr_incursion_supply duration = -1 hidden = yes } }
			}
		}
		ai_chance = { factor = 5 }
	}
}

#VG event
country_event = {
	id = flavor_seghdihr.2
	title = flavor_seghdihr.2.t
	desc = flavor_seghdihr.2.d
	picture = CONQUEST_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.2.a
		reverse_add_opinion = { who = H78 modifier = opinion_disappointed }
		add_prestige = 15
		H78 = { country_event = { id = flavor_seghdihr.3 } }
		ai_chance = { 
			factor = 80
		}
	}

	option = {
		name = flavor_seghdihr.2.b
		H78 = { vassalize = ROOT }
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				is_rival = H78
			}
			modifier = {
				factor = 10
				NOT = { num_of_cities = 2 }
			}
			modifier = {
				factor = 1.5
				trust = { who = H78 value = 60 }
			}
			modifier = {
				factor = 1.5
				trust = { who = H78 value = 70 }
			}
			modifier = {
				factor = 1.5
				trust = { who = H78 value = 80 }
			}
			modifier = {
				factor = 1.5
				alliance_with = H78
			}
			modifier = {
				factor = 2
				marriage_with = H78 #incase they get released as a monarchy somehow
			}
			modifier = {
				factor = 2
				num_of_loans = 3
			}
			modifier = {
				factor = 2
				NOT = {
					army_strength = {
						who = H78
						value = 0.66
					}
				}
			}
		}
	}
}

#Seghdihr gets reply
country_event = {
	id = flavor_seghdihr.3
	title = flavor_seghdihr.3.t
	desc = flavor_seghdihr.3.d
	picture = CONQUEST_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.3.a
		add_casus_belli = { type = cb_vassalize_mission target = F47 months = 600 }
		ai_chance = { factor = 5 }
	}
}

#kings dilemma
country_event = {
	id = flavor_seghdihr.4
	title = flavor_seghdihr.4.t
	desc = flavor_seghdihr.4.d
	picture = KINGS_CHOICE_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.4.a
		if = {
			limit = { has_country_modifier = seghdihr_seg_band_contract }
			remove_country_modifier = seghdihr_seg_band_contract
		}
		if = {
			limit = { NOT = { has_estate_privilege = estate_adventurers_organization_licensed_adventurers } }
			set_estate_privilege = estate_adventurers_organization_licensed_adventurers
		}
		else_if = {
			limit = { has_estate_privilege = estate_adventurers_ennoblement_of_adventurers }
			remove_estate_privilege = estate_adventurers_ennoblement_of_adventurers
		}
		else_if = {
			limit = { has_estate_privilege = estate_adventurers_free_company_rosters }
			remove_estate_privilege = estate_adventurers_free_company_rosters
		}
		else_if = {
			limit = { has_estate_privilege = estate_adventurers_heroes_in_the_army }
			remove_estate_privilege = estate_adventurers_heroes_in_the_army
		}
		else_if = {
			limit = { has_estate_privilege = estate_adventurers_advisors }
			remove_estate_privilege = estate_adventurers_advisors
		}
		add_estate_loyalty = { estate = estate_adventurers loyalty = -10 }
		ai_chance = { factor = 5 }
	}
}

#true unity
country_event = {
	id = flavor_seghdihr.5
	title = flavor_seghdihr.5.t
	desc = flavor_seghdihr.5.d
	picture = AULIC_COUNCIL_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = flavor_seghdihr.5.a
		#take diplo if vassal fed
		custom_tooltip = flavor_seghdihr.5.tooltip
		hidden_effect = {
			F47 = {
				every_owned_province = {
					limit = {
						NOT = { area = verkal_gulan_area }
						NOT = { province_id = 2915 }
					}
					ROOT = { add_dip_power = -5 }
				}
			}
			I15 = {
				every_owned_province = {
					limit = { NOT = { area = hehos_legacy_area  } }
					ROOT = { add_dip_power = -5 }
				}
			}
			I14 = {
				every_owned_province = {
					limit = { NOT = { area = vazumbrog_area } }
					ROOT = { add_dip_power = -5 }
				}
			}
			I17 = {
				every_owned_province = {
					limit = { NOT = { area = ozumbrog_area } }
					ROOT = { add_dip_power = -5 }
				}
			}
		}

		#change to historical cultures and inherit
		hidden_effect = {
			#gulan
			verkal_gulan_area = { change_culture = gold_dwarf }
			2915 = { change_culture = gold_dwarf }
			greatcavern_area = { 
				limit = {
					is_city = yes
					country_or_subject_holds = ROOT
				}
				change_culture = gold_dwarf
			}
			#hehodovar
			hehos_legacy_area = { change_culture = pyrite_dwarf }
			diggers_road_area = {
				limit = {
					is_city = yes
					country_or_subject_holds = ROOT
				}
				change_culture = pyrite_dwarf
			}
			#vazumbrog
			vazumbrog_area = { change_culture = titanium_dwarf }
			dwarovrod_27_29_area = {
				limit = {
					is_city = yes
					country_or_subject_holds = ROOT
				}
				change_culture = titanium_dwarf
			}
			#ozumbrog
			ozumbrog_area = { change_culture = topaz_dwarf }
			dwarovrod_38_41_area = {
				limit = {
					is_city = yes
					country_or_subject_holds = ROOT
				}
				change_culture = topaz_dwarf
			}
		}
		inherit = F47
		inherit = I15
		inherit = I14
		inherit = I17

		#remove leader modifier
		remove_country_modifier = seghdihr_leader

		#upgrade to kingdom if needed
		if = {
			limit = {
				has_dlc = "Common Sense"
				NOT = { government_rank = 2 } 
			}
			set_government_rank = 2
		}

		#colonization buff if needed
		if = {
			limit = {
				middle_dwarovar_region = {
					calc_true_if = {
						amount = 8
						NOT = { is_city = yes }
					}
				}
			}
			add_country_modifier = { name = seghdihr_colonization_buff duration = 9125 }
		}

		#gov reform, name, and missions
		add_government_reform = seghdihr_segbandal_reform
		override_country_name = THE_SEGBANDAL
		if = {
			limit = { has_dlc = "Cradle of Civilization" }
			set_country_flag = seghdihr_part2
			swap_non_generic_missions = yes
		}
		ai_chance = { factor = 5 }
	}
}

#way of force-gulan
country_event = {
	id = flavor_seghdihr.6
	title = flavor_seghdihr.6.t
	desc = flavor_seghdihr.6.d
	picture = MULTI_RACIAL_MERC_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.6.a
		add_country_modifier = { name = seghdihr_force_cannons duration = -1 }
		ai_chance = { factor = 5 }
	}
	option = {
		name = flavor_seghdihr.6.b
		add_country_modifier = { name = seghdihr_force_generals duration = -1 }
		ai_chance = { factor = 5 }
	}
	option = {
		name = flavor_seghdihr.6.c
		add_country_modifier = { name = seghdihr_force_sieges duration = -1 }
		ai_chance = { factor = 5 }
	}
}

#way of vigilance-ozumbrog
country_event = {
	id = flavor_seghdihr.7
	title = flavor_seghdihr.7.t
	desc = flavor_seghdihr.7.d
	picture = MULTI_RACIAL_MERC_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.7.a
		add_country_modifier = { name = seghdihr_vigilance_speed duration = -1 }
		ai_chance = { factor = 5 }
	}
	option = {
		name = flavor_seghdihr.7.b
		add_country_modifier = { name = seghdihr_vigilance_garrison duration = -1 }
		ai_chance = { factor = 5 }
	}
	option = {
		name = flavor_seghdihr.7.c
		add_country_modifier = { name = seghdihr_vigilance_tactics duration = -1 }
		ai_chance = { factor = 5 }
	}
}

#integrating seg band
country_event = {
	id = flavor_seghdihr.8
	title = flavor_seghdihr.8.t
	desc = flavor_seghdihr.8.d
	picture = SCOTTISH_MERCENARIES_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	immediate = {
		hidden_effect = { add_country_modifier = { name = seghdihr_integrate_band duration = 1825 } }
	}

	option = {
		name = flavor_seghdihr.8.a
		tooltip = { add_country_modifier = { name = seghdihr_integrate_band duration = 1825 } }
		random_hired_mercenary_company = {
			limit = { template = merc_seg_band }
			disband_mercenary_company = THIS
		}
		custom_tooltip = flavor_seghdihr.8.tooltip
		hidden_effect = { set_global_flag = seg_band_disabled }
		ai_chance = { factor = 5 }
	}
}

#enacting segbandal military
country_event = {
	id = flavor_seghdihr.9
	title = flavor_seghdihr.9.t
	desc = flavor_seghdihr.9.d
	picture = CONQUISTADORS_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.9.a
		add_government_reform = seghdihr_segbandalic_military
		ai_chance = { factor = 5 }
	}
}

#way of defiance-seghdihr
country_event = {
	id = flavor_seghdihr.10
	title = flavor_seghdihr.10.t
	desc = flavor_seghdihr.10.d
	picture = MULTI_RACIAL_MERC_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.10.a
		add_country_modifier = { name = seghdihr_defiance_morale duration = -1 }
		ai_chance = { factor = 5 }
	}
	option = {
		name = flavor_seghdihr.10.b
		add_country_modifier = { name = seghdihr_defiance_generals duration = -1 }
		ai_chance = { factor = 5 }
	}
	option = {
		name = flavor_seghdihr.10.c
		add_country_modifier = { name = seghdihr_defiance_defence duration = -1 }
		ai_chance = { factor = 5 }
	}
}

#syndicates
country_event = {
	id = flavor_seghdihr.11
	title = flavor_seghdihr.11.t
	desc = flavor_seghdihr.11.d
	picture = FEUDALISM_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.11.a
		#remove claims
		hidden_effect = { tree_of_stone_region = { remove_claim = ROOT } }

		#hold trade goods
		if = {
			limit = {
				4247 = {
					OR = {
						trade_goods = wine
						trade_goods = serpentbloom
						trade_goods = livestock
						trade_goods = fungi
						trade_goods = salt
					}
				}
			}
			4247 = {
				tooltip = {
					random_list = {
						20 = { change_trade_goods = copper }
						20 = { change_trade_goods = cloth }
						20 = { change_trade_goods = iron }
						20 = { change_trade_goods = glass }
						20 = { change_trade_goods = paper }
					}
				}
				hidden_effect = { province_event = { id = flavor_seghdihr.203 } }
			}
		}
		if = {
			limit = {
				4265 = {
					OR = {
						trade_goods = wine
						trade_goods = serpentbloom
						trade_goods = livestock
						trade_goods = fungi
						trade_goods = salt
					}
				}
			}
			4265 = {
				tooltip = {
					random_list = {
						20 = { change_trade_goods = copper }
						20 = { change_trade_goods = cloth }
						20 = { change_trade_goods = iron }
						20 = { change_trade_goods = glass }
						20 = { change_trade_goods = paper }
					}
				}
				hidden_effect = { province_event = { id = flavor_seghdihr.203 } }
			}
		}
		#split the land
		custom_tooltip = flavor_seghdihr.11.tooltip
		hidden_effect = {
			tree_of_stone_region = {
				#kanzad
				if = {
					limit = { 
						NOT = { owned_by = H79 }
						OR = {
							area = dwarovrod_45_48_area
							area = kanzad_area
							area = anduz_area
							province_id = 4267 #mit
							province_id = 4282 #cannonpass
							province_id = 4249 #dwarovrod50
						}
					}
					remove_core = owner
					add_core = H79
					cede_province = H79
				}
				#grozumdihr
				else_if = {
					limit = {
						NOT = { owned_by = I18 }
						OR = {
							area = earthseed_area
							area = grozumdihr_area
							province_id = 4271 #ambermine
							province_id = 4270 #hordesbreach
							province_id = 4251 #grozumrod1
						}
					}
					remove_core = owner
					add_core = I18
					cede_province = I18
				}
			}
			##change cultures
			H79 = {
				change_primary_culture = amber_dwarf
				set_ruler_culture = amber_dwarf
				change_religion = ROOT
				set_ruler_religion = ROOT
				every_owned_province = {
					limit = { culture_group = dwarven }
					change_culture = amber_dwarf
				}
				if = {
					limit = { NOT = { government = republic } }
					change_government = republic
				}
				add_government_reform = seghdihr_syndicates_reform
				add_country_modifier = { name = racial_pop_goblin_purge duration = -1 }
				set_variable = { which = goblin_race_tolerance_ai value = 10 }
			}
			I18 = {
				change_primary_culture = peridot_dwarf
				set_ruler_culture = peridot_dwarf
				change_religion = ROOT
				set_ruler_religion = ROOT
				every_owned_province = {
					limit = { culture_group = dwarven }
					change_culture = peridot_dwarf
				}
				if = {
					limit = { NOT = { government = republic } }
					change_government = republic
				}
				add_government_reform = seghdihr_syndicates_reform
				add_country_modifier = { name = racial_pop_goblin_purge duration = -1 }
				set_variable = { which = goblin_race_tolerance_ai value = 10 }
			}
		}
		#syndicate vassals
		create_subject = {
			subject_type = seghdihr_syndicate
			subject = H79 
		}
		create_subject = {
			subject_type = seghdihr_syndicate
			subject = I18 
		}
		#upgrade modifier
		if = {
			limit = { has_country_modifier = seghdihr_limit_flow_2a }
			hidden_effect = { remove_country_modifier = seghdihr_limit_flow_2a }
			add_country_modifier = { name = seghdihr_limit_flow_3a duration = -1 }
		}
		else_if = {
			limit = { has_country_modifier = seghdihr_limit_flow_2b }
			hidden_effect = { remove_country_modifier = seghdihr_limit_flow_2b }
			add_country_modifier = { name = seghdihr_limit_flow_3b duration = -1 }
		}
		else = {
			hidden_effect = { remove_country_modifier = seghdihr_limit_flow_2c }
			add_country_modifier = { name = seghdihr_limit_flow_3c duration = -1 }
		}
		custom_tooltip = flavor_seghdihr.11.tooltip2
		#give claims
		ovdal_az_an_area = { add_permanent_claim = ROOT }
		the_kariats_area = { add_permanent_claim = ROOT }
		ibran_pass_area = { add_permanent_claim = ROOT }
		4259 = { add_permanent_claim = ROOT }
		#missions
		set_country_flag = seghdihr_part3
		swap_non_generic_missions = yes
		ai_chance = { factor = 5 }
	}
}

#integrating soldiers
country_event = {
	id = flavor_seghdihr.12
	title = flavor_seghdihr.12.t
	desc = flavor_seghdihr.12.d
	picture = GENERALS_DISCUSSING_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	immediate = {
		hidden_effect = { add_country_modifier = { name = seghdihr_integrate_soldiers duration = 1825 } }
	}

	option = {
		name = flavor_seghdihr.12.a
		tooltip = { add_country_modifier = { name = seghdihr_integrate_soldiers duration = 1825 } }
		ai_chance = { factor = 5 }
	}
}

#kings many
country_event = {
	id = flavor_seghdihr.13
	title = flavor_seghdihr.13.t
	desc = flavor_seghdihr.13.d
	picture = DIET_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	
	option = {
		name = flavor_seghdihr.13.a
		set_dynasty = "az-Hargûn"
		add_government_reform = seghdihr_segamlavad
		hidden_effect = {
			4124 = { set_seat_in_parliament = yes }
			2914 = { set_seat_in_parliament = yes }
			4078 = { set_seat_in_parliament = yes }
			4218 = { set_seat_in_parliament = yes }
			4217 = { set_seat_in_parliament = yes }
		}
		ai_chance = { factor = 5 }
	}
}

#way of preparation-vazumbrog
country_event = {
	id = flavor_seghdihr.14
	title = flavor_seghdihr.14.t
	desc = flavor_seghdihr.14.d
	picture = MULTI_RACIAL_MERC_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.14.a
		add_country_modifier = { name = seghdihr_preparation_decay duration = -1 }
		ai_chance = { factor = 5 }
	}
	option = {
		name = flavor_seghdihr.14.b
		add_country_modifier = { name = seghdihr_preparation_speed duration = -1 }
		ai_chance = { factor = 5 }
	}
	option = {
		name = flavor_seghdihr.14.c
		add_country_modifier = { name = seghdihr_preparation_reinforce duration = -1 }
		ai_chance = { factor = 5 }
	}
}

#way of tenacity-hehodovar
country_event = {
	id = flavor_seghdihr.15
	title = flavor_seghdihr.15.t
	desc = flavor_seghdihr.15.d
	picture = MULTI_RACIAL_MERC_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.15.a
		add_country_modifier = { name = seghdihr_tenacity_attrition duration = -1 }
		ai_chance = { factor = 5 }
	}
	option = {
		name = flavor_seghdihr.15.b
		add_country_modifier = { name = seghdihr_tenacity_fire duration = -1 }
		ai_chance = { factor = 5 }
	}
	option = {
		name = flavor_seghdihr.15.c
		add_country_modifier = { name = seghdihr_tenacity_shock duration = -1 }
		ai_chance = { factor = 5 }
	}
}

#capital of segbandal
country_event = {
	id = flavor_seghdihr.16
	title = flavor_seghdihr.16.t
	desc = flavor_seghdihr.16.d
	picture = SIERRA_DE_LA_PLATA_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.16.a
		add_stability_or_adm_power = yes
		add_country_modifier = { name = seghdihr_advisors duration = 7300 }
		ai_chance = { factor = 5 }
	}
}

#create sgc
country_event = {
	id = flavor_seghdihr.17
	title = flavor_seghdihr.17.t
	desc = flavor_seghdihr.17.d
	picture = BURGHER_ESTATE_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.17.a
		change_estate_land_share = { estate = estate_burghers share = 10 }
		custom_tooltip = flavor_seghdihr.17_tooltip
		2901 = {
			remove_province_modifier = seghdihr_harpy_post
			add_permanent_province_modifier = { name = seghdihr_sgc_ostkopan duration = -1 }
		}
		hidden_effect = {
			2901 = { remove_trade_modifier = { who = ROOT name = seghdihr_harpy_post } }
			set_country_flag = sgc_created
			set_variable = { which = sgc_highway_power value = 0 } 
			set_variable = { which = sgc_davharral_power value = 0 }
			set_variable = { which = sgc_dhen_power value = 0 }
			set_variable = { which = sgc_rahen_power value = 0 }
			set_variable = { which = sgc_nadimraj_power value = 0 }
			set_variable = { which = sgc_gulf_power value = 0 }
			set_variable = { which = sgc_kharun_power value = 0 }
			set_variable = { which = sgc_xia_power value = 0 }
			seghdihr_sgc_update_trade_modifiers = { Highway = yes value = 20 } #initial ostkopan
		}
		ai_chance = { factor = 5 }
	}
}

#last stand
country_event = {
	id = flavor_seghdihr.18
	title = flavor_seghdihr.18.t
	desc = flavor_seghdihr.18.d
	picture = STRELTSY_MARCHING_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	immediate = { hidden_effect = { seghdihr_calculate_incursion_strength = yes } }

	option = {
		name = flavor_seghdihr.18.a
		4289 = { seghdihr_spawn_incursion_main_goblins = yes }
		4260 = { seghdihr_spawn_incursion_main_goblins = yes }
		4288 = { seghdihr_spawn_incursion_main_goblins = yes }
		4264 = { seghdihr_spawn_incursion_main_goblins = yes }
		4298 = { seghdihr_spawn_incursion_main_goblins = yes }
		4296 = { seghdihr_spawn_incursion_main_goblins = yes }
		custom_tooltip = flavor_seghdihr.18.tooltip
		hidden_effect = { 
			clr_country_flag = seghdihr_incursions_active 
			tree_of_stone_region = { remove_province_modifier = seghdihr_incursion_supply }
		}
		ai_chance = { factor = 5 }
	}
}

#a new dwarovar
country_event = {
	id = flavor_seghdihr.19
	title = flavor_seghdihr.19.t
	desc = flavor_seghdihr.19.d
	picture = FAR_AND_WIDE_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }


	option = {
		name = flavor_seghdihr.19.a
		add_country_modifier = { name = seghdihr_new_dwarovar_modifier duration = -1 }
		ai_chance = { factor = 5 }
	}
}

#xia duel start
country_event = {
	id = flavor_seghdihr.20
	title = flavor_seghdihr.20.t
	desc = flavor_seghdihr.20.d
	picture = SHOGUNATE_AUTHORITY_INCIDENT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }


	option = {
		name = flavor_seghdihr.20.a
		random_list = {
			50 = {
				modifier = {
					factor = 1.5
					mil = 2
				}
				modifier = {
					factor = 1.5
					mil = 3
				}
				modifier = {
					factor = 2
					mil = 4
				}
				modifier = {
					factor = 1.5
					mil = 5
				}
				modifier = {
					factor = 3
					mil = 6
				}
				custom_tooltip = flavor_seghdihr.20.tooltip
				set_country_flag = trade_duel_won
			}
			50 = {
				modifier = {
					factor = 1.5
					4559 = { owner = { mil = 2 } }
				}
				modifier = {
					factor = 1.5
					4559 = { owner = { mil = 3 } }
				}
				modifier = {
					factor = 2
					4559 = { owner = { mil = 4 } }
				}
				modifier = {
					factor = 1.5
					4559 = { owner = { mil = 5 } }
				}
				modifier = {
					factor = 3
					4559 = { owner = { mil = 6 } }
				}
				custom_tooltip = flavor_seghdihr.20.tooltip2
				set_country_flag = trade_duel_lost
			}
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.21 days = 10 } }
		ai_chance = { factor = 5 }
	}
}

#xia duel end
country_event = {
	id = flavor_seghdihr.21
	title = flavor_seghdihr.21.t
	desc = {
		trigger = { has_country_flag = trade_duel_won }
		desc = flavor_seghdihr.21.d
	}
	desc = {
		trigger = { has_country_flag = trade_duel_lost }
		desc = flavor_seghdihr.21.d2
	}
	picture = SHOGUNATE_AUTHORITY_INCIDENT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }


	option = {
		trigger = { has_country_flag = trade_duel_won }
		name = flavor_seghdihr.21.a
		add_prestige = 25
		custom_tooltip = flavor_seghdihr.21.tooltip
		set_country_flag = sgc_xia_fullaccess
		ai_chance = { factor = 5 }
	}

	option = {
		trigger = { has_country_flag = trade_duel_lost }
		name = flavor_seghdihr.21.b
		add_prestige = -10
		add_ruler_modifier = { name = wounded_ruler  duration = 1095 }
		custom_tooltip = flavor_seghdihr.21.tooltip
		set_country_flag = sgc_xia_fullaccess
		ai_chance = { factor = 5 }
	}
	
}




###############################################Goblin Incursions###############################################
#master event
country_event = {
	id = flavor_seghdihr.50
	title = seghdihr_hidden_loc
	desc = seghdihr_hidden_loc
	picture = FORT_eventPicture
	
	hidden = yes
	
	trigger = {
		tag = H78
		has_country_flag = seghdihr_incursions_active
		owns_or_subject_of = 4218
		NOT = { has_disaster = fallen_dwarf }
	}

	mean_time_to_happen = {
		years = 5
		modifier = {
			factor = 1.25
			has_disaster = serpent_rot
		}
		modifier = {
			factor = 0.9
			has_disaster = goblin_tide
		}
		modifier = {
			factor = 0.9
			check_variable = { which = incursion_total value = 1200 }
		}
		modifier = {
			factor = 0.9
			check_variable = { which = incursion_total value = 1400 }
		}
		modifier = {
			factor = 0.9
			check_variable = { which = incursion_total value = 1600 }
		}
		modifier = {
			factor = 0.8
			check_variable = { which = incursion_total value = 1800 }
		}
		modifier = {
			factor = 0.8
			check_variable = { which = incursion_total value = 2000 }
		}
		modifier = {
			factor = 0.8
			check_variable = { which = incursion_total value = 2200 }
		}
		modifier = {
			factor = 0.8
			check_variable = { which = incursion_total value = 2400 }
		}
		modifier = {
			factor = 0.7
			check_variable = { which = incursion_total value = 2600 }
		}
		modifier = {
			factor = 0.8
			check_variable = { which = incursion_gathering_strength value = 400 }
		}
		modifier = {
			factor = 0.6
			check_variable = { which = incursion_gathering_strength value = 800 }
		}
	}

	immediate = { seghdihr_calculate_incursion_strength = yes }

	option = {
		name = seghdihr_hidden_loc
		random_list = {
			#no incursion
			40 = {
				modifier = {
					factor = 0
					check_variable = { which = incursion_gathering_strength value = 1000 }
				}
				modifier = {
					factor = 0.8
					check_variable = { which = incursion_gathering_strength value = 600 }
				}
				if = {
					limit = { NOT = { check_variable = { which = incursion_gathering_strength value = 1000 } } }
					change_variable = { which = incursion_gathering_strength value = 200 }
					if = {
						limit = { check_variable = { which = incursion_gathering_strength value = 1100 } }
						set_variable = { which = incursion_gathering_strength value = 1000 }
					}
				}
				seghdihr_calculate_incursion_strength = yes
			}

			#incursion
			60 = {
				modifier = {
					factor = 1.1
					check_variable = { which = incursion_gathering_strength value = 200 }
				}
				modifier = {
					factor = 1.1
					check_variable = { which = incursion_gathering_strength value = 400 }
				}
				modifier = {
					factor = 1.2
					check_variable = { which = incursion_gathering_strength value = 600 }
				}
				modifier = {
					factor = 1.2
					check_variable = { which = incursion_gathering_strength value = 800 }
				}
				modifier = {
					factor = 1.5
					check_variable = { which = incursion_gathering_strength value = 1000 }
				}
				#choose event
				random_list = {
					#scouting party
					25 = {
						modifier = {
							factor = 0.75
							check_variable = { which = incursion_gathering_strength value = 600 }
						}
						modifier = {
							factor = 1.5
							NOT = { check_variable = { which = incursion_gathering_strength value = 500 } }
						}
						country_event = { id = flavor_seghdihr.51 }
					}
					#supply raid
					25 = {
						trigger = { check_variable = { which = incursion_total value = 500 } }
						modifier = {
							factor = 0.75
							check_variable = { which = incursion_gathering_strength value = 700 }
						}
						modifier = {
							factor = 1.5
							NOT = { check_variable = { which = incursion_gathering_strength value = 500 } }
						}
						country_event = { id = flavor_seghdihr.52 }
					}
					#destruction
					20 = {
						trigger = { check_variable = { which = incursion_total value = 1000 } }
						modifier = {
							factor = 0.75
							check_variable = { which = incursion_gathering_strength value = 500 }
						}
						#so they don't get perma stuck on 1k if you don't own enough provinces
						modifier = { 
							factor = 3
							check_variable = { which = incursion_gathering_strength value = 700 }
							NOT = {
								num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
									value = 4
									region = tree_of_stone_region
								}
							}
						}
						country_event = { id = flavor_seghdihr.53 }
					}
					#small attack
					30 = {
						trigger = { 
							check_variable = { which = incursion_total value = 1500 }
							check_variable = { which = incursion_gathering_strength value = 300 }
							num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
								value = 4
								region = tree_of_stone_region
							}
						}
						modifier = { #so they launch full invasion at max
							factor = 0.5
							check_variable = { which = incursion_gathering_strength value = 1000 }
						}
						country_event = { id = flavor_seghdihr.54 }
					}
					#invasion
					30 = {
						trigger = { 
							check_variable = { which = incursion_total value = 2000 } 
							check_variable = { which = incursion_gathering_strength value = 600 }
							num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
								value = 8
								region = tree_of_stone_region
							}
						}
						modifier = {
							factor = 2
							check_variable = { which = incursion_gathering_strength value = 1000 }
						}
						country_event = { id = flavor_seghdihr.55 }
					}
				}
			}
		}
		ai_chance = { factor = 5 }
	}
}

#scouting party
country_event = {
	id = flavor_seghdihr.51
	title = flavor_seghdihr.51.t
	desc = flavor_seghdihr.51.d
	picture = CAVE_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	immediate = {
		hidden_effect = {
			if = {
				limit = { tree_of_stone_region = { country_or_subject_holds = ROOT } }
				random_province = {
					limit = {
						region = tree_of_stone_region
						country_or_subject_holds = ROOT
						is_city = yes
						NOT = { devastation = 80 }
						NOT = { has_province_modifier = seghdihr_incursion_fear }
						#so it neighbors at least 2
						calc_true_if = {
							amount = 2
							all_neighbor_province = { 
								is_city = yes
								country_or_subject_holds = ROOT
								development = 3 
							}
						}
					}
					save_event_target_as = incursion_target
				}
			}
			else = { 4218 = { save_event_target_as = incursion_target } }
		}
	}
	goto = incursion_target

	option = {
		name = flavor_seghdihr.51.a
		if = {
			limit = { NOT = { event_target:incursion_target = { province_id = 4218 } } }
			event_target:incursion_target = {
				add_devastation = 10
				add_province_modifier = { name = seghdihr_incursion_fear duration = 3650 }
				every_neighbor_province = {
					limit = { 
						country_or_subject_holds = ROOT
						is_city = yes 
					}
					add_devastation = 5
					add_province_modifier = { name = seghdihr_incursion_fear duration = 1825 }
				}
			}
		}
		else = {
			ozumbrog_area = {
				add_devastation = 10
				add_unrest = 2
				add_province_modifier = { name = seghdihr_incursion_fear duration = 3650 }
			}
		}
		custom_tooltip = seghdihr_incursion_strength_gathered
		hidden_effect = {
			change_variable = { which = incursion_gathering_strength value = 200 } 
			if = {
				limit = { check_variable = { which = incursion_gathering_strength value = 1100 } }
				set_variable = { which = incursion_gathering_strength value = 1000 }
			}
			seghdihr_calculate_incursion_strength = yes
			#give chaingrasper resources
			if = {
				limit = { 
					H74 = {
						exists = yes
						ai = yes
					}
				}
				H74 = {
					add_adm_power = 100
					add_dip_power = 100
					add_mil_power = 100
				}
			}
		}
		ai_chance = { factor = 5 }
	}
}
#supply raid
country_event = {
	id = flavor_seghdihr.52
	title = flavor_seghdihr.52.t
	desc = flavor_seghdihr.52.d
	picture = CAVE_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	immediate = {
		hidden_effect = {
			if = {
				limit = { tree_of_stone_region = { country_or_subject_holds = ROOT } }
				random_province = {
					limit = {
						region = tree_of_stone_region
						country_or_subject_holds = ROOT
						is_city = yes
						NOT = { has_province_modifier = seghdihr_incursion_supplies_raided }
						#so it neighbors at least 2
						calc_true_if = {
							amount = 2
							all_neighbor_province = { 
								is_city = yes
								country_or_subject_holds = ROOT
							}
						}
					}
					save_event_target_as = incursion_target
				}
			}
			else = { 4218 = { save_event_target_as = incursion_target } }
		}
	}
	goto = incursion_target


	option = {
		name = flavor_seghdihr.52.a
		if = {
			limit = { NOT = { event_target:incursion_target = { province_id = 4218 } } }
			event_target:incursion_target = {
				random = { 
					chance = 50 
					if = { 
						limit = { base_production = 2 }
						add_base_production = -1 
					}
					else = { ROOT = { add_dip_power = -25 } }
				}
				add_devastation = 20
				add_province_modifier = { name = seghdihr_incursion_supplies_raided duration = 3650 }
				every_neighbor_province = {
					limit = { 
						is_city = yes
						country_or_subject_holds = ROOT
					}
					random = { 
						chance = 50 
						if = { 
							limit = { base_production = 2 }
							add_base_production = -1 
						}
						else = { ROOT = { add_dip_power = -25 } }
					}
					add_devastation = 10
					add_province_modifier = { name = seghdihr_incursion_supplies_raided duration = 1825 }
				}
			}
		}
		else = {
			ozumbrog_area = {
				add_base_production = -2
				add_devastation = 20
				add_unrest = 2
				add_province_modifier = { name = seghdihr_incursion_supplies_raided duration = 3650 }
			}
		}
		custom_tooltip = seghdihr_incursion_strength_gathered
		hidden_effect = {
			change_variable = { which = incursion_gathering_strength value = 300 } 
			if = {
				limit = { check_variable = { which = incursion_gathering_strength value = 1100 } }
				set_variable = { which = incursion_gathering_strength value = 1000 }
			}
			seghdihr_calculate_incursion_strength = yes
			#give chaingrasper resources
			if = {
				limit = { 
					H74 = {
						exists = yes
						ai = yes
					}
				}
				H74 = {
					add_adm_power = 300
					add_dip_power = 300
					add_mil_power = 300
					add_treasury = 500
				}
			}
		}
		ai_chance = { factor = 5 }
	}
}

#destruction
country_event = {
	id = flavor_seghdihr.53
	title = flavor_seghdihr.53.t
	desc = flavor_seghdihr.53.d
	picture = CAVE_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	immediate = {
		hidden_effect = {
			if = {
				limit = { 
					num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
						value = 5
						region = tree_of_stone_region
					}
				}
				random_province = {
					limit = {
						region = tree_of_stone_region
						country_or_subject_holds = ROOT
						is_city = yes
						NOT = { has_province_modifier = seghdihr_incursion_raided_province }
						#so it neighbors at least 2
						calc_true_if = {
							amount = 2
							all_neighbor_province = { 
								is_city = yes
								country_or_subject_holds = ROOT
							}
						}
					}
					save_event_target_as = incursion_target
				}
			}
			else = { 4218 = { save_event_target_as = incursion_target } }
		}
	}
	goto = incursion_target


	option = {
		name = flavor_seghdihr.53.a
		if = {
			limit = { NOT = { event_target:incursion_target = { province_id = 4218 } } }
			event_target:incursion_target = {
				if = {
					limit = { base_tax = 2 }
					add_base_tax = -1
				}
				else = { ROOT = { add_adm_power = -25 } }
				if = {
					limit = { base_production = 2 }
					add_base_production = -1
				}
				else = { ROOT = { add_dip_power = -25 } }
				if = {
					limit = { base_manpower = 2 }
					add_base_manpower = -1
				}
				else = { ROOT = { add_mil_power = -25 } }
				add_devastation = 30
				add_province_modifier = { name = seghdihr_incursion_raided_province duration = 3650 }
				every_neighbor_province = {
					limit = { 
						is_city = yes
						country_or_subject_holds = ROOT
						development = 5 
					}
					if = {
						limit = { base_tax = 2 }
						add_base_tax = -1
					}
					else = { ROOT = { add_adm_power = -25 } }
					if = {
						limit = { base_production = 2 }
						add_base_production = -1
					}
					else = { ROOT = { add_dip_power = -25 } }
					if = {
						limit = { base_manpower = 2 }
						add_base_manpower = -1
					}
					else = { ROOT = { add_mil_power = -25 } }
					add_devastation = 20
					add_province_modifier = { name = seghdihr_incursion_raided_province duration = 3650 }
				}
			}
		}
		else = {
			4218 = {
				if = {
					limit = { base_tax = 4 }
					add_base_tax = -3
				}
				else = { ROOT = { add_adm_power = -50 } }
				if = {
					limit = { base_production = 4 }
					add_base_production = -3
				}
				else = { ROOT = { add_dip_power = -50 } }
				if = {
					limit = { base_manpower = 4 }
					add_base_manpower = -3
				}
			}
			4090 = {
				if = {
					limit = { base_tax = 2 }
					add_base_tax = -1
				}
				else = { ROOT = { add_adm_power = -10 } }
				if = {
					limit = { base_production = 2 }
					add_base_production = -1
				}
				else = { ROOT = { add_dip_power = -10 } }
				if = {
					limit = { base_manpower = 2 }
					add_base_manpower = -1
				}
			}
			4114 = {
				if = {
					limit = { base_tax = 2 }
					add_base_tax = -1
				}
				else = { ROOT = { add_adm_power = -10 } }
				if = {
					limit = { base_production = 2 }
					add_base_production = -1
				}
				else = { ROOT = { add_dip_power = -10 } }
				if = {
					limit = { base_manpower = 2 }
					add_base_manpower = -1
				}
			}
			4113 = {
				if = {
					limit = { base_tax = 2 }
					add_base_tax = -1
				}
				else = { ROOT = { add_adm_power = -10 } }
				if = {
					limit = { base_production = 2 }
					add_base_production = -1
				}
				else = { ROOT = { add_dip_power = -10 } }
				if = {
					limit = { base_manpower = 2 }
					add_base_manpower = -1
				}
			}
			ozumbrog_area = {
				add_devastation = 30
				add_unrest = 2
				add_province_modifier = { name = seghdihr_incursion_raided_province duration = 3650 }
			}
		}
		custom_tooltip = seghdihr_incursion_strength_gone
		hidden_effect = {
			set_variable = { which = incursion_gathering_strength value = 0 }
			seghdihr_calculate_incursion_strength = yes

			#give chaingrasper resources
			if = {
				limit = { 
					H74 = {
						exists = yes
						ai = yes
					}
				}
				H74 = {
					remove_country_modifier = seghdihr_incursion_chaingrasper_loot
					add_country_modifier = { name = seghdihr_incursion_chaingrasper_loot duration = 3650 }
				}
			}
		}
		ai_chance = { factor = 5 }
	}
}
#small attack
country_event = {
	id = flavor_seghdihr.54
	title = flavor_seghdihr.54.t
	desc = flavor_seghdihr.54.d
	picture = CAVE_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	immediate = {
		hidden_effect = {
			if = {
				limit = { 
					num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
						value = 5
						region = tree_of_stone_region
					}
				}
				random_province = {
					limit = {
						region = tree_of_stone_region
						country_or_subject_holds = ROOT
						is_city = yes
						#so it neighbors at least 2
						calc_true_if = {
							amount = 2
							all_neighbor_province = {
								is_city = yes
								country_or_subject_holds = ROOT
							}
						}
					}
					save_event_target_as = incursion_target
				}
			}
			else = { 4218 = { save_event_target_as = incursion_target } }
		}
	}
	goto = incursion_target

	option = {
		name = flavor_seghdihr.54.a
		if = {
			limit = { NOT = { event_target:incursion_target = { province_id = 4218 } } }
			event_target:incursion_target = {
				add_devastation = 40
				seghdihr_spawn_incursion_main_goblins = yes
				every_neighbor_province = {
					limit = {
						is_city = yes
						country_or_subject_holds = ROOT
					}
					add_devastation = 30
					seghdihr_spawn_incursion_small_goblins = yes
				}
			}
		}
		else = {
			ozumbrog_area = {
				add_devastation = 40
				seghdihr_spawn_incursion_main_goblins = yes
			}
		}
		custom_tooltip = seghdihr_incursion_strength_gone
		hidden_effect = {
			set_variable = { which = incursion_gathering_strength value = 0 }
			seghdihr_calculate_incursion_strength = yes
		}
		ai_chance = { factor = 5 }
	}
}
#invasion
country_event = {
	id = flavor_seghdihr.55
	title = flavor_seghdihr.55.t
	desc = flavor_seghdihr.55.d
	picture = CAVE_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	immediate = {
		hidden_effect = {
			if = {
				limit = { 
					num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
						value = 8
						region = tree_of_stone_region
					}
				}
				random_province = {
					limit = {
						region = tree_of_stone_region
						country_or_subject_holds = ROOT
						is_city = yes
						#so it neighbors at least 2
						calc_true_if = {
							amount = 2
							all_neighbor_province = {
								is_city = yes
								country_or_subject_holds = ROOT
							}
						}
					}
					save_event_target_as = incursion_target
				}
			}
			else = { 4218 = { save_event_target_as = incursion_target } }
		}
	}
	goto = incursion_target

	option = {
		name = flavor_seghdihr.55.a
		if = {
			limit = { NOT = { event_target:incursion_target = { province_id = 4218 } } }
			event_target:incursion_target = {
				add_devastation = 60
				seghdihr_spawn_incursion_main_goblins = yes
				every_neighbor_province = {
					limit = {
						is_city = yes
						country_or_subject_holds = ROOT
					}
					add_devastation = 40
					seghdihr_spawn_incursion_main_goblins = yes
					random_neighbor_province = {
						limit = { 
							is_city = yes
							country_or_subject_holds = ROOT
							NOT = { province_id = PREV }
						}
						add_devastation = 20
						seghdihr_spawn_incursion_small_goblins = yes
					}
				}
			}
		}
		custom_tooltip = seghdihr_incursion_strength_gone
		hidden_effect = {
			set_variable = { which = incursion_gathering_strength value = 0 }
			seghdihr_calculate_incursion_strength = yes
		}
		ai_chance = { factor = 5 }
	}
}





###############################################SGC Events###############################################
##main menu
country_event = {
	id = flavor_seghdihr.100
	title = flavor_seghdihr.100.t
	desc = flavor_seghdihr.100.d
	picture = EMPTY_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		tag = H78
		has_country_flag = sgc_created
	}

	#exit
	option = {
		name = flavor_seghdihr.exit
		highlight = yes
		hidden_effect = { clr_country_flag = sgc_menu_opened }
		ai_chance = { factor = 5 }
	}

	#golden highway
	option = {
		name = flavor_seghdihr.100.a
		hidden_effect = { country_event = { id = flavor_seghdihr.110 } }
		ai_chance = { factor = 5 }
	}

	#davharral
	option = {
		name = flavor_seghdihr.100.b
		trigger = {  has_country_flag = sgc_davharral_fullaccess }
		hidden_effect = { country_event = { id = flavor_seghdihr.120 } }
		ai_chance = { factor = 5 }
	}

	#rahen gulf
	option = {
		name = flavor_seghdihr.100.g
		trigger = { has_country_flag = sgc_gulf_fullaccess }
		hidden_effect = { country_event = { id = flavor_seghdihr.160 } }
		ai_chance = { factor = 5 }
	}

	#dhen
	option = {
		name = flavor_seghdihr.100.c
		trigger = { has_country_flag = sgc_dhen_fullaccess }
		hidden_effect = { country_event = { id = flavor_seghdihr.130 } }
		ai_chance = { factor = 5 }
	}

	#mid rahen
	option = {
		name = flavor_seghdihr.100.e
		trigger = { has_country_flag = sgc_rahen_fullaccess }
		hidden_effect = { country_event = { id = flavor_seghdihr.140 } }
		ai_chance = { factor = 5 }
	}

	#nadimraj
	option = {
		name = flavor_seghdihr.100.f
		trigger = { has_country_flag = sgc_nadimraj_fullaccess }
		hidden_effect = { country_event = { id = flavor_seghdihr.150 } }
		ai_chance = { factor = 5 }
	}

	#xia
	option = {
		name = flavor_seghdihr.100.h
		trigger = { has_country_flag = sgc_xia_fullaccess }
		hidden_effect = { country_event = { id = flavor_seghdihr.170 } }
		ai_chance = { factor = 5 }
	}

	#kharunyana
	option = {
		name = flavor_seghdihr.100.i
		trigger = { has_country_flag = sgc_kharun_fullaccess }
		hidden_effect = { country_event = { id = flavor_seghdihr.180 } }
		ai_chance = { factor = 5 }
	}
}

###############################################Golden Highway###############################################

#####menu#####
country_event = {
	id = flavor_seghdihr.110
	title = flavor_seghdihr.110.t
	desc = flavor_seghdihr.110.d
	picture = EMPTY_eventPicture
	
	is_triggered_only = yes
	
	trigger = { always = yes }

	#back
	option = {
		name = flavor_seghdihr.exit
		highlight = yes
		hidden_effect = { country_event = { id = flavor_seghdihr.100 }  }
		ai_chance = { factor = 5 }
	}

	#unique1 - new highway
	option = {
		name = flavor_seghdihr.110.a
		custom_tooltip = flavor_seghdihr.110.tooltip
		if = {
			limit = {
				NOT = { has_country_modifier = seghdihr_sgc_highway_busy }
				NOT = { has_country_flag = sgc_highway_uni1_complete }
				treasury = 2500
				adm_power = 100
				dip_power = 100
				mil_power = 100
			}
			add_treasury = -2500
			add_adm_power = -100
			add_dip_power = -100
			add_mil_power = -100
			add_country_modifier = { name = seghdihr_sgc_highway_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.111 days = 1825 } }
		}
		else = {
			if = {
				limit = { has_country_flag = sgc_highway_uni1_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_highway_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = {
				if = {
					limit = { NOT = { treasury = 2500 } }
					custom_tooltip = seghdihr_sgc_missing_req_2500g
				}
				if = {
					limit = { NOT = { adm_power = 100 } }
					custom_tooltip = seghdihr_sgc_missing_req_100adm
				}
				if = {
					limit = { NOT = { dip_power = 100 } }
					custom_tooltip = seghdihr_sgc_missing_req_100dip
				}
				if = {
					limit = { NOT = { mil_power = 100 } }
					custom_tooltip = seghdihr_sgc_missing_req_100mil
				}
			}
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}

	#unique2 - rest zones
	option = {
		name = flavor_seghdihr.110.b
		custom_tooltip = flavor_seghdihr.110.tooltip2
		if = {
			limit = {
				NOT = { has_country_modifier = seghdihr_sgc_highway_busy }
				NOT = { has_country_flag = sgc_highway_uni2_complete }
				treasury = 1000
				adm_power = 100
			}
			add_treasury = -1000
			add_adm_power = -100
			add_country_modifier = { name = seghdihr_sgc_highway_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.112 days = 1825 } }
		}
		else = {
			if = {
				limit = { has_country_flag = sgc_highway_uni2_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_highway_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = {
				if = {
					limit = { NOT = { treasury = 1000 } }
					custom_tooltip = seghdihr_sgc_missing_req_1000g
				}
				if = {
					limit = { NOT = { adm_power = 100 } }
					custom_tooltip = seghdihr_sgc_missing_req_100adm
				}
			}
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}

	#generic adm
	option = {
		name = flavor_seghdihr.adm
		custom_tooltip = sgc_ostkopan_tooltip
		custom_tooltip = seghdihr_sgc_improved_max
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}

	#generic dip
	option = {
		name = flavor_seghdihr.dip
		custom_tooltip = sgc_investment_tooltip
		if = {
			limit = {
				seghdihr_sgc_dip_req = yes 
				NOT = { has_country_modifier = seghdihr_sgc_highway_busy }
				NOT = { has_country_flag = sgc_highway_dip_complete }
			}
			seghdihr_sgc_dip_cost = yes
			add_country_modifier = { name = seghdihr_sgc_highway_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.114 days = 1825 } }
		}
		else = {
			if = {
				limit = { has_country_flag = sgc_highway_dip_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_highway_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = { seghdihr_sgc_dip_missing_req = yes }
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}
	
	#generic mil
	option = {
		name = flavor_seghdihr.mil
		custom_tooltip = sgc_patrols_tooltip
		if = {
			limit = {
				seghdihr_sgc_mil_req = yes 
				NOT = { has_country_modifier = seghdihr_sgc_highway_busy }
				NOT = { has_country_flag = sgc_highway_mil_complete }
			}
			seghdihr_sgc_mil_cost = yes
			add_country_modifier = { name = seghdihr_sgc_highway_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.115 days = 1825 } }
		}
		else = { 
			if = {
				limit = { has_country_flag = sgc_highway_mil_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_highway_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = { seghdihr_sgc_mil_missing_req = yes }
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}
}

#unique 1 complete
country_event = {
	id = flavor_seghdihr.111
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.111.d
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.111.a
		2916 = { 
			add_permanent_province_modifier = { name = golden_highway duration = -1 }
			add_permanent_province_modifier = { name = seghdihr_sgc_new_highway duration = -1 }
		}
		2915 = {
			add_permanent_province_modifier = { name = golden_highway duration = -1 }
			add_permanent_province_modifier = { name = seghdihr_sgc_new_highway duration = -1 }
		}
		seghdihr_sgc_update_trade_modifiers = { Highway = yes value = 30 }
		hidden_effect = { set_country_flag = sgc_highway_uni1_complete }
		ai_chance = { factor = 5 }
	}
}

#unique 2 complete
country_event = {
	id = flavor_seghdihr.112
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.112.d
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.112.a
		if = {
			limit = { 2916 = { NOT = { has_province_modifier = seghdihr_sgc_restzones } } }
			2916 = { add_permanent_province_modifier = { name = seghdihr_sgc_restzones duration = -1 } } #deezum
			2901 = { add_permanent_province_modifier = { name = seghdihr_sgc_restzones duration = -1 } } #harpy gate
			2902 = { add_permanent_province_modifier = { name = seghdihr_sgc_restzones duration = -1 } } #deoh
		}
		else = {
			2905 = { add_permanent_province_modifier = { name = seghdihr_sgc_restzones duration = -1 } } #trasn
			2908 = { add_permanent_province_modifier = { name = seghdihr_sgc_restzones duration = -1 } } #esamod
			2910 = { add_permanent_province_modifier = { name = seghdihr_sgc_restzones duration = -1 } } #nurdazin
			hidden_effect = { set_country_flag = sgc_highway_uni2_complete }
		}
		seghdihr_sgc_update_trade_modifiers = { Highway = yes value = 20 }
		ai_chance = { factor = 5 }
	}
}

#adm complete
#no adm here

#dip complete
country_event = {
	id = flavor_seghdihr.114
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.improvement_complete_dip_desc
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.improvement_complete_dip_option
		2901 = {
			random_trade_node_member_province = {
				limit = {
					is_wasteland = no
					NOT = {
						trade_goods = slaves
						trade_goods = livestock
						trade_goods = wool
					}
					NOT = { has_province_modifier = seghdihr_sgc_invested }
				}
				add_base_production = 2
				add_permanent_province_modifier = { name = seghdihr_sgc_invested duration = -1 }
			}
		}
		hidden_effect = {
			if = {
				limit = {
					2901 = {
						calc_true_if = {
							amount = 3
							all_trade_node_member_province = { has_province_modifier = seghdihr_sgc_invested }
						}
					}
				}
				set_country_flag = sgc_highway_dip_complete
			}
		}
		seghdihr_sgc_update_trade_modifiers = { Highway = yes value = 10 }
		ai_chance = { factor = 5 }
	}
}

#mil complete
country_event = {
	id = flavor_seghdihr.115
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.improvement_complete_mil_desc
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.improvement_complete_mil_option
		if = {
			limit = { 2900 = { NOT = { has_province_modifier = seghdihr_sgc_patrols_1st } } }
			2900 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_1st duration = -1 } }  #ardumu
			2901 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_1st duration = -1 } }  #harpy gate
		}
		else_if = {
			limit = { 2902 = { NOT = { has_province_modifier = seghdihr_sgc_patrols_2nd } } }
			2902 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_2nd duration = -1 } }  #deohiq
			2905 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_2nd duration = -1 } }  #trasn
		}
		else = { 
			2908 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_3rd duration = -1 } } #esamod
			2910 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_3rd duration = -1 } } #nurdazin
			hidden_effect = { set_country_flag = sgc_highway_mil_complete }
		} 
		seghdihr_sgc_update_trade_modifiers = { Highway = yes value = 10 }
		ai_chance = { factor = 5 }
	}
}


###############################################Davharral###############################################

#####menu#####
country_event = {
	id = flavor_seghdihr.120
	title = flavor_seghdihr.120.t
	desc = flavor_seghdihr.120.d
	picture = EMPTY_eventPicture
	
	is_triggered_only = yes
	
	trigger = { always = yes }

	#back
	option = {
		name = flavor_seghdihr.exit
		highlight = yes
		hidden_effect = { country_event = { id = flavor_seghdihr.100 }  }
		ai_chance = { factor = 5 }
	}

	#unique1 - garrison davharral
	option = {
		trigger = { has_country_flag = sgc_davharral_fullaccess }
		name = flavor_seghdihr.120.a
		custom_tooltip = flavor_seghdihr.120.tooltip
		if = {
			limit = {
				NOT = { has_country_modifier = seghdihr_sgc_davharral_busy }
				NOT = { has_country_flag = sgc_davharral_uni1_complete }
				treasury = 1000
				manpower = 15
				mil_power = 100
			}
			add_treasury = -1000
			add_manpower = -15
			add_mil_power = -100
			add_country_modifier = { name = seghdihr_sgc_davharral_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.121 days = 1825 } }
		}
		else = {
			if = {
				limit = { has_country_flag = sgc_davharral_uni1_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_davharral_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = {
				if = {
					limit = { NOT = { treasury = 1000 } }
					custom_tooltip = seghdihr_sgc_missing_req_1000g
				}
				if = {
					limit = { NOT = { manpower = 15 } }
					custom_tooltip = seghdihr_sgc_missing_req_15kman
				}
				if = {
					limit = { NOT = { mil_power = 100 } }
					custom_tooltip = seghdihr_sgc_missing_req_100mil
				}
			}
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}

	#unique2 - dwarves ports
	option = {
		trigger = { has_country_flag = sgc_davharral_fullaccess }
		name = flavor_seghdihr.120.b
		custom_tooltip = flavor_seghdihr.120.tooltip2
		if = {
			limit = {
				NOT = { has_country_modifier = seghdihr_sgc_davharral_busy }
				NOT = { has_country_flag = sgc_davharral_uni2_complete }
				treasury = 500
				manpower = 5
				dip_power = 100
			}
			add_treasury = -500
			add_manpower = -5
			add_dip_power = -100
			add_country_modifier = { name = seghdihr_sgc_davharral_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.122 days = 1825 } }
		}
		else = {
			if = {
				limit = { has_country_flag = sgc_davharral_uni2_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_davharral_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = {
				if = {
					limit = { NOT = { treasury = 500 } }
					custom_tooltip = seghdihr_sgc_missing_req_500g
				}
				if = {
					limit = { NOT = { manpower = 5 } }
					custom_tooltip = seghdihr_sgc_missing_req_5kman
				}
				if = {
					limit = { NOT = { dip_power = 100 } }
					custom_tooltip = seghdihr_sgc_missing_req_100dip
				}
			}
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}

	#generic adm
	option = {
		name = flavor_seghdihr.adm
		custom_tooltip = sgc_ostkopan_tooltip
		if = {
			limit = {
				seghdihr_sgc_adm_req = yes 
				NOT = { has_country_modifier = seghdihr_sgc_davharral_busy }
				NOT = { has_country_flag = sgc_davharral_adm_complete }
			}
			seghdihr_sgc_adm_cost = yes
			add_country_modifier = { name = seghdihr_sgc_davharral_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.123 days = 1825 } }
		}
		else = {
			if = {
				limit = { has_country_flag = sgc_davharral_adm_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_davharral_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = { seghdihr_sgc_adm_missing_req = yes }
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}

	#generic dip
	option = {
		name = flavor_seghdihr.dip
		custom_tooltip = sgc_investment_tooltip
		if = {
			limit = {
				seghdihr_sgc_dip_req = yes 
				NOT = { has_country_modifier = seghdihr_sgc_davharral_busy }
				NOT = { has_country_flag = sgc_davharral_dip_complete }
			}
			seghdihr_sgc_dip_cost = yes
			add_country_modifier = { name = seghdihr_sgc_davharral_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.124 days = 1825 } }
		}
		else = { 
			if = {
				limit = { has_country_flag = sgc_davharral_dip_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_davharral_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = { seghdihr_sgc_dip_missing_req = yes }
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}
	
	#generic mil
	option = {
		name = flavor_seghdihr.mil
		custom_tooltip = seghdihr_sgc_davharral_highway
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		# custom_tooltip = sgc_patrols_tooltip
		# if = {
		# 	limit = {
		# 		seghdihr_sgc_mil_req = yes 
		# 		NOT = { has_country_modifier = seghdihr_sgc_davharral_busy }
		# 		NOT = { has_country_flag = sgc_davharral_mil_complete }
		# 	}
		# 	seghdihr_sgc_mil_cost = yes
		# 	add_country_modifier = { name = seghdihr_sgc_davharral_busy duration = 1825 }
		# 	hidden_effect = { country_event = { id = flavor_seghdihr.125 days = 1825 } }
		# }
		# else = { 
		# 	if = {
		# 		limit = { has_country_flag = sgc_davharral_mil_complete }
		# 		custom_tooltip = seghdihr_sgc_improved_max
		# 	}
		# 	else_if = {
		# 		limit = { has_country_modifier = seghdihr_sgc_davharral_busy }
		# 		custom_tooltip = seghdihr_sgc_node_busy
		# 	}
		# 	else = { seghdihr_sgc_mil_missing_req = yes }
		# }
		# hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}
}

#unique 1 complete
country_event = {
	id = flavor_seghdihr.121
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.121.d
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.121.a
		2913 = {
			add_dwarven_minority_size_effect = yes
			add_permanent_province_modifier = { name = seghdihr_sgc_davharral_garrison duration = -1 }
			owner = { add_trust = { who = ROOT value = 10 } }
		}
		hidden_effect = { set_country_flag = sgc_davharral_uni1_complete }
		seghdihr_sgc_update_trade_modifiers = { Davharral = yes value = 70 }
		ai_chance = { factor = 5 }
	}
}

#unique 2 complete
country_event = {
	id = flavor_seghdihr.122
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.122.d
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.122.a
		if = {
			limit = { 2913 = { NOT = { has_province_modifier = seghdihr_sgc_dwarves_ports } } }
			2913 = { add_permanent_province_modifier = { name = seghdihr_sgc_dwarves_ports duration = -1 } } #davharral
			2923 = { add_permanent_province_modifier = { name = seghdihr_sgc_dwarves_ports duration = -1 } } #edeskeru
			4400 = { add_permanent_province_modifier = { name = seghdihr_sgc_dwarves_ports duration = -1 } } #subkaliss
		}
		else = {
			5434 = { add_permanent_province_modifier = { name = seghdihr_sgc_dwarves_ports duration = -1 } } #coburakaz
			5668 = { add_permanent_province_modifier = { name = seghdihr_sgc_dwarves_ports duration = -1 } } #dasmatus
			hidden_effect = { set_country_flag = sgc_davharral_uni2_complete }
		}
		seghdihr_sgc_update_trade_modifiers = { Davharral = yes value = 20 }
		ai_chance = { factor = 5 }
	}
}


#adm complete
country_event = {
	id = flavor_seghdihr.123
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.improvement_complete_adm_desc
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.improvement_complete_adm_option
		if = {
			limit = { 2913 = { NOT = { has_province_modifier = seghdihr_sgc_ostkopan } } } #davharral
			2913 = {
				add_dwarven_minority_size_effect = yes
				add_permanent_province_modifier = { name = seghdihr_sgc_ostkopan duration = -1 } 
			}
		}
		else_if = {
			limit = { 2923 = { NOT = { has_province_modifier = seghdihr_sgc_ostkopan } } } #edeskeru
			2923 = {
				add_dwarven_minority_size_effect = yes
				add_permanent_province_modifier = { name = seghdihr_sgc_ostkopan duration = -1 } 
			}
			
		}
		else = {
			5434 = {	#coburakaz
				add_dwarven_minority_size_effect = yes
				add_permanent_province_modifier = { name = seghdihr_sgc_ostkopan duration = -1 } 
			}
			hidden_effect = { set_country_flag = sgc_davharral_adm_complete }
		}
		seghdihr_sgc_update_trade_modifiers = { Davharral = yes value = 20 }
		ai_chance = { factor = 5 }
	}
}

#dip complete
country_event = {
	id = flavor_seghdihr.124
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.improvement_complete_dip_desc
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.improvement_complete_dip_option
		1348 = {
			random_trade_node_member_province = {
				limit = {
					is_wasteland = no
					NOT = { has_province_modifier = seghdihr_sgc_invested }
				}
				add_base_production = 2
				add_permanent_province_modifier = { name = seghdihr_sgc_invested duration = -1 }
			}
		}
		hidden_effect = {
			if = {
				limit = {
					1348 = {
						calc_true_if = {
							amount = 3
							all_trade_node_member_province = { has_province_modifier = seghdihr_sgc_invested }
						}
					}
				}
				set_country_flag = sgc_davharral_dip_complete
			}
		}
		seghdihr_sgc_update_trade_modifiers = { Davharral = yes value = 10 }
		ai_chance = { factor = 5 }
	}
}

# #mil complete
#not enough highway



###############################################Gulf of Rahen###############################################

#####menu#####
country_event = {
	id = flavor_seghdihr.160
	title = flavor_seghdihr.160.t
	desc = flavor_seghdihr.160.d
	picture = EMPTY_eventPicture
	
	is_triggered_only = yes
	
	trigger = { always = yes }

	#back
	option = {
		name = flavor_seghdihr.exit
		highlight = yes
		hidden_effect = { country_event = { id = flavor_seghdihr.100 }  }
		ai_chance = { factor = 5 }
	}

	#unique1 - east headquarters
	option = {
		trigger = { has_country_flag = sgc_gulf_fullaccess }
		name = flavor_seghdihr.160.a
		custom_tooltip = flavor_seghdihr.160.tooltip
		if = {
			limit = {
				NOT = { has_country_modifier = seghdihr_sgc_gulf_busy }
				NOT = { has_country_flag = sgc_gulf_uni1_complete }
				treasury = 5000
				adm_power = 100
				dip_power = 100
				mil_power = 100
			}
			add_treasury = -5000
			add_adm_power = -100
			add_dip_power = -100
			add_mil_power = -100
			add_country_modifier = { name = seghdihr_sgc_gulf_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.161 days = 1825 } }
		}
		else = {
			if = {
				limit = { has_country_flag = sgc_gulf_uni1_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_gulf_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = {
				if = {
					limit = { NOT = { treasury = 5000 } }
					custom_tooltip = seghdihr_sgc_missing_req_5000g
				}
				if = {
					limit = { NOT = { adm_power = 100 } }
					custom_tooltip = seghdihr_sgc_missing_req_100adm
				}
				if = {
					limit = { NOT = { dip_power = 100 } }
					custom_tooltip = seghdihr_sgc_missing_req_100dip
				}
				if = {
					limit = { NOT = { mil_power = 100 } }
					custom_tooltip = seghdihr_sgc_missing_req_100mil
				}
			}
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}

	#unique2 - free slaves
	option = {
		trigger = { has_country_flag = sgc_gulf_fullaccess }
		name = flavor_seghdihr.160.b
		custom_tooltip = flavor_seghdihr.160.tooltip2
		if = {
			limit = {
				NOT = { has_country_modifier = seghdihr_sgc_gulf_busy }
				NOT = { has_country_flag = sgc_gulf_uni2_complete }
				treasury = 2500
				dip_power = 200
			}
			add_treasury = -2500
			add_dip_power = -200
			add_country_modifier = { name = seghdihr_sgc_gulf_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.162 days = 1825 } }
		}
		else = {
			if = {
				limit = { has_country_flag = sgc_gulf_uni2_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_gulf_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = {
				if = {
					limit = { NOT = { treasury = 2500 } }
					custom_tooltip = seghdihr_sgc_missing_req_2500g
				}
				if = {
					limit = { NOT = { dip_power = 200 } }
					custom_tooltip = seghdihr_sgc_missing_req_200dip
				}
			}
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}

	#generic adm
	option = {
		name = flavor_seghdihr.adm
		custom_tooltip = sgc_ostkopan_tooltip
		if = {
			limit = {
				seghdihr_sgc_adm_req = yes 
				NOT = { has_country_modifier = seghdihr_sgc_gulf_busy }
				NOT = { has_country_flag = sgc_gulf_adm_complete }
			}
			seghdihr_sgc_adm_cost = yes
			add_country_modifier = { name = seghdihr_sgc_gulf_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.163 days = 1825 } }
		}
		else = {
			if = {
				limit = { has_country_flag = sgc_gulf_adm_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_gulf_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = { seghdihr_sgc_adm_missing_req = yes }
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}

	#generic dip
	option = {
		name = flavor_seghdihr.dip
		custom_tooltip = sgc_investment_tooltip
		if = {
			limit = {
				seghdihr_sgc_dip_req = yes 
				NOT = { has_country_modifier = seghdihr_sgc_gulf_busy }
				NOT = { has_country_flag = sgc_gulf_dip_complete }
			}
			seghdihr_sgc_dip_cost = yes
			add_country_modifier = { name = seghdihr_sgc_gulf_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.164 days = 1825 } }
		}
		else = { 
			if = {
				limit = { has_country_flag = sgc_gulf_dip_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_gulf_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = { seghdihr_sgc_dip_missing_req = yes }
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}
	
	#generic mil
	option = {
		name = flavor_seghdihr.mil
		custom_tooltip = sgc_patrols_tooltip
		if = {
			limit = {
				seghdihr_sgc_mil_req = yes 
				NOT = { has_country_modifier = seghdihr_sgc_gulf_busy }
				NOT = { has_country_flag = sgc_gulf_mil_complete }
			}
			seghdihr_sgc_mil_cost = yes
			add_country_modifier = { name = seghdihr_sgc_gulf_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.165 days = 1825 } }
		}
		else = { 
			if = {
				limit = { has_country_flag = sgc_gulf_mil_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_gulf_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = { seghdihr_sgc_mil_missing_req = yes }
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}
}

#unique 1 complete
country_event = {
	id = flavor_seghdihr.161
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.161.d
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.161.a
		4420 = {
			add_dwarven_minority_size_effect = yes
			add_permanent_province_modifier = { name = seghdihr_sgc_east_hq duration = -1 }
		}
		hidden_effect = { set_country_flag = sgc_gulf_uni1_complete }
		seghdihr_sgc_update_trade_modifiers = { Gulf = yes value = 80 }
		ai_chance = { factor = 5 }
	}
}

#unique 2 complete
country_event = {
	id = flavor_seghdihr.162
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.162.d
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.162.a
		if = {
			limit = { 
				1361 = { 
					any_trade_node_member_province = {  
						trade_goods = slaves
						NOT = { has_province_modifier = seghdihr_sgc_slaves_freed }
					}
				}
			}
			1361 = {
				random_trade_node_member_province = {
					limit = { 
						trade_goods = slaves
						NOT = { has_province_modifier = seghdihr_sgc_slaves_freed }
					}
					add_permanent_province_modifier = { name = seghdihr_sgc_slaves_freed duration = -1 }
					owner = { add_treasury = 1000 }
				}
			}
		}
		else = {
			1361 = {
				random_trade_node_member_province = {
					limit = { 
						trade_goods = spices
						NOT = { has_province_modifier = seghdihr_sgc_slaves_freed }
					}
					add_permanent_province_modifier = { name = seghdihr_sgc_slaves_freed duration = -1 }
					owner = { add_treasury = 1000 }
				}
			}
		}
		hidden_effect = { 
			if = {
				limit = {
					1361 = {
						calc_true_if = {
							amount = 2
							all_trade_node_member_province = { has_province_modifier = seghdihr_sgc_slaves_freed }
						}
					}
				}
				set_country_flag = sgc_gulf_uni2_complete
			}
		}
		seghdihr_sgc_update_trade_modifiers = { Gulf = yes value = 40 }
		ai_chance = { factor = 5 }
	}
}


#adm complete
country_event = {
	id = flavor_seghdihr.163
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.improvement_complete_adm_desc
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.improvement_complete_adm_option
		if = {
			limit = { 4362 = { NOT = { has_province_modifier = seghdihr_sgc_ostkopan } } } #avhavubhiya
			4362 = {
				add_dwarven_minority_size_effect = yes
				add_permanent_province_modifier = { name = seghdihr_sgc_ostkopan duration = -1 } 
			}
		}
		else_if = {
			limit = { 4367 = { NOT = { has_province_modifier = seghdihr_sgc_ostkopan } } } #sarkhashabid
			4367 = {
				add_dwarven_minority_size_effect = yes
				add_permanent_province_modifier = { name = seghdihr_sgc_ostkopan duration = -1 } 
			}
		}
		else_if = {
			limit = { 4380 = { NOT = { has_province_modifier = seghdihr_sgc_ostkopan } } } #sardika
			4380 = {
				add_dwarven_minority_size_effect = yes
				add_permanent_province_modifier = { name = seghdihr_sgc_ostkopan duration = -1 } 
			}
		}
		else_if = {
			limit = { 4560 = { NOT = { has_province_modifier = seghdihr_sgc_ostkopan } } } #bieng phang
			4560 = {
				add_dwarven_minority_size_effect = yes
				add_permanent_province_modifier = { name = seghdihr_sgc_ostkopan duration = -1 } 
			}
		}
		else = {
			4570 = { #prukakhin
				add_dwarven_minority_size_effect = yes
				add_permanent_province_modifier = { name = seghdihr_sgc_ostkopan duration = -1 } 
			}
			hidden_effect = { set_country_flag = sgc_gulf_adm_complete }
		}
		seghdihr_sgc_update_trade_modifiers = { Gulf = yes value = 20 }
		ai_chance = { factor = 5 }
	}
}

#dip complete
country_event = {
	id = flavor_seghdihr.164
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.improvement_complete_dip_desc
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.improvement_complete_dip_option
		1361 = {
			random_trade_node_member_province = {
				limit = {
					is_wasteland = no
					NOT = { has_province_modifier = seghdihr_sgc_invested trade_goods = slaves } 
				}
				add_base_production = 2
				add_permanent_province_modifier = { name = seghdihr_sgc_invested duration = -1 }
			}
		}
		hidden_effect = {
			if = {
				limit = {
					1361 = {
						calc_true_if = {
							amount = 3
							all_trade_node_member_province = { has_province_modifier = seghdihr_sgc_invested }
						}
					}
				}
				set_country_flag = sgc_gulf_dip_complete
			}
		}
		seghdihr_sgc_update_trade_modifiers = { Gulf = yes value = 10 }
		ai_chance = { factor = 5 }
	}
}

#mil complete
country_event = {
	id = flavor_seghdihr.165
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.improvement_complete_mil_desc
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.improvement_complete_mil_option
		if = {
			limit = { 4361 = { NOT = { has_province_modifier = seghdihr_sgc_patrols_1st } } } 
			4361 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_1st duration = -1 } } #khinana
			4363 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_1st duration = -1 } } #bunak
			4368 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_1st duration = -1 } } #shenral
		}
		else_if = {
			limit = { 4399 = { NOT = { has_province_modifier = seghdihr_sgc_patrols_2nd } } } 
			4399 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_2nd duration = -1 } } #djunatani
		}
		else = { 
			4420 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_3rd duration = -1 } } #sramaya
			4406 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_3rd duration = -1 } } #kranasad
			hidden_effect = { set_country_flag = sgc_gulf_mil_complete }
		}
		seghdihr_sgc_update_trade_modifiers = { Gulf = yes value = 10 }
		ai_chance = { factor = 5 }
	}
}


###############################################Dhenbasana###############################################

#####menu#####
country_event = {
	id = flavor_seghdihr.130
	title = flavor_seghdihr.130.t
	desc = flavor_seghdihr.130.d
	picture = EMPTY_eventPicture
	
	is_triggered_only = yes
	
	trigger = { always = yes }

	#back
	option = {
		name = flavor_seghdihr.exit
		highlight = yes
		hidden_effect = { country_event = { id = flavor_seghdihr.100 }  }
		ai_chance = { factor = 5 }
	}

	#unique1 - improve tax code
	option = {
		trigger = { has_country_flag = sgc_dhen_fullaccess }
		name = flavor_seghdihr.130.a
		custom_tooltip = flavor_seghdihr.130.tooltip
		if = {
			limit = {
				NOT = { has_country_modifier = seghdihr_sgc_dhen_busy }
				NOT = { has_country_flag = sgc_dhen_uni1_complete }
				OR = {
					any_known_country = {
						culture = ghankedhen
						has_opinion = { who = ROOT value = 100 }
					}
					AND = {
						NOT = { any_known_country = { culture = ghankedhen } }
						adm_power = 300
					}
				}
				treasurer = 3
			}
			if = {
				limit = {
					NOT = {
						any_known_country = {
							culture = ghankedhen
							has_opinion = { who = ROOT value = 100 }
						}
					}
				}
				add_adm_power = -300
			}
			kill_advisor = treasurer
			add_country_modifier = { name = seghdihr_sgc_dhen_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.131 days = 1825 } }
		}
		else = {
			if = {
				limit = { has_country_flag = sgc_dhen_uni1_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_dhen_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = {
				if = {
					limit = { 
						NOT = {
							any_known_country = {
								culture = ghankedhen
								has_opinion = { who = ROOT value = 100 }
							}
						}
					}
					custom_tooltip = seghdihr_sgc_missing_req_opinion_ghank
				}
				else_if = {
					limit = { NOT = { adm_power = 300 } }
					custom_tooltip = seghdihr_sgc_missing_req_300adm
				}
				if = {
					limit = { NOT = { treasurer = 3 } }
					custom_tooltip = seghdihr_sgc_missing_req_treasurer3
				}
			}
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}

	#unique2 - gifts to tiger lords
	option = {
		trigger = { has_country_flag = sgc_dhen_fullaccess }
		name = flavor_seghdihr.130.b
		custom_tooltip = flavor_seghdihr.130.tooltip2
		if = {
			limit = {
				NOT = { has_country_modifier = seghdihr_sgc_dhen_busy }
				NOT = { has_country_flag = sgc_dhen_uni2_complete }
				treasury = 1000
				adm_power = 50
				dip_power = 50
				mil_power = 50
			}
			add_treasury = -1000
			add_adm_power = -50
			add_dip_power = -50
			add_mil_power = -50
			add_country_modifier = { name = seghdihr_sgc_dhen_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.132 days = 1825 } }
		}
		else = {
			if = {
				limit = { has_country_flag = sgc_dhen_uni2_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_dhen_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = {
				if = {
					limit = { NOT = { treasury = 1000 } }
					custom_tooltip = seghdihr_sgc_missing_req_1000g
				}
				if = {
					limit = { NOT = { adm_power = 50 } }
					custom_tooltip = seghdihr_sgc_missing_req_50adm
				}
				if = {
					limit = { NOT = { dip_power = 50 } }
					custom_tooltip = seghdihr_sgc_missing_req_50dip
				}
				if = {
					limit = { NOT = { mil_power = 50 } }
					custom_tooltip = seghdihr_sgc_missing_req_50mil
				}
			}
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}

	#generic adm
	option = {
		name = flavor_seghdihr.adm
		custom_tooltip = sgc_ostkopan_tooltip
		if = {
			limit = {
				seghdihr_sgc_adm_req = yes 
				NOT = { has_country_modifier = seghdihr_sgc_dhen_busy }
				NOT = { has_country_flag = sgc_dhen_adm_complete }
			}
			seghdihr_sgc_adm_cost = yes
			add_country_modifier = { name = seghdihr_sgc_dhen_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.133 days = 1825 } }
		}
		else = {
			if = {
				limit = { has_country_flag = sgc_dhen_adm_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_dhen_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = { seghdihr_sgc_adm_missing_req = yes }
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}

	#generic dip
	option = {
		name = flavor_seghdihr.dip
		custom_tooltip = sgc_investment_tooltip
		if = {
			limit = {
				seghdihr_sgc_dip_req = yes 
				NOT = { has_country_modifier = seghdihr_sgc_dhen_busy }
				NOT = { has_country_flag = sgc_dhen_dip_complete }
			}
			seghdihr_sgc_dip_cost = yes
			add_country_modifier = { name = seghdihr_sgc_dhen_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.134 days = 1825 } }
		}
		else = { 
			if = {
				limit = { has_country_flag = sgc_dhen_dip_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_dhen_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = { seghdihr_sgc_dip_missing_req = yes }
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}
	
	#generic mil
	option = {
		name = flavor_seghdihr.mil
		custom_tooltip = sgc_patrols_tooltip
		if = {
			limit = {
				seghdihr_sgc_mil_req = yes 
				NOT = { has_country_modifier = seghdihr_sgc_dhen_busy }
				NOT = { has_country_flag = sgc_dhen_mil_complete }
			}
			seghdihr_sgc_mil_cost = yes
			add_country_modifier = { name = seghdihr_sgc_dhen_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.135 days = 1825 } }
		}
		else = { 
			if = {
				limit = { has_country_flag = sgc_dhen_mil_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_dhen_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = { seghdihr_sgc_mil_missing_req = yes }
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}
}

#unique 1 complete
country_event = {
	id = flavor_seghdihr.131
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.131.d
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.131.a
		if = {
			limit = { any_known_country = { culture = ghankedhen } }
			random_known_country = {
				limit = { culture = ghankedhen }
				capital_scope = { add_permanent_province_modifier = { name = seghdihr_sgc_ghank_codes duration = -1 } }
			}
		}
		else = {
			random_province = {
				limit = { 
					area = south_ghankedhen_area 
					NOT = { has_province_modifier = seghdihr_sgc_ghank_codes }
				}
				add_permanent_province_modifier = { name = seghdihr_sgc_ghank_codes duration = -1 }
			}
		}
		hidden_effect = { set_country_flag = sgc_dhen_uni1_complete }
		seghdihr_sgc_update_trade_modifiers = { Dhen = yes value = 40 }
		ai_chance = { factor = 5 }
	}
}

#unique 2 complete
country_event = {
	id = flavor_seghdihr.132
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.132.d
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.132.a
		if = {
			limit = { 4435 = { NOT = { has_province_modifier = seghdihr_sgc_gifts } } }
			4435 = { #rayavhashapal
				add_permanent_province_modifier = { name = seghdihr_sgc_gifts duration = -1 }
				owner = {
					add_treasury = 500
					add_adm_power = 50
					add_dip_power = 50
					add_mil_power = 50
				}
			}
			4411 = { #dhenijansar
				add_permanent_province_modifier = { name = seghdihr_sgc_gifts duration = -1 } 
				owner = {
					add_treasury = 500
					add_adm_power = 50
					add_dip_power = 50
					add_mil_power = 50
				}
			}
		}
		else = {
			4412 = { #parusapa
				add_permanent_province_modifier = { name = seghdihr_sgc_gifts duration = -1 } 
				owner = {
					add_treasury = 500
					add_adm_power = 50
					add_dip_power = 50
					add_mil_power = 50
				}
			}
			4419 = { #parasud
				add_permanent_province_modifier = { name = seghdihr_sgc_gifts duration = -1 }
				owner = {
					add_treasury = 500
					add_adm_power = 50
					add_dip_power = 50
					add_mil_power = 50
				}
			}
			hidden_effect = { set_country_flag = sgc_dhen_uni2_complete }
		}
		seghdihr_sgc_update_trade_modifiers = { Dhen = yes value = 20 }
		ai_chance = { factor = 5 }
	}
}


#adm complete
country_event = {
	id = flavor_seghdihr.133
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.improvement_complete_adm_desc
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.improvement_complete_adm_option
		if = {
			limit = { 4435 = { NOT = { has_province_modifier = seghdihr_sgc_ostkopan } } } #rayav
			4435 = {
				add_dwarven_minority_size_effect = yes
				add_permanent_province_modifier = { name = seghdihr_sgc_ostkopan duration = -1 } 
			}
		}
		else_if = {
			limit = { 4411 = { NOT = { has_province_modifier = seghdihr_sgc_ostkopan } } } #dhenj
			4411 = { 
				add_dwarven_minority_size_effect = yes
				add_permanent_province_modifier = { name = seghdihr_sgc_ostkopan duration = -1 } 
			}
		}
		else = {
			4391 = { #sardiphadin
				add_dwarven_minority_size_effect = yes
				add_permanent_province_modifier = { name = seghdihr_sgc_ostkopan duration = -1 } 
			}
			hidden_effect = { set_country_flag = sgc_dhen_adm_complete }
		}
		seghdihr_sgc_update_trade_modifiers = { Dhen = yes value = 20 }
		ai_chance = { factor = 5 }
	}
}

#dip complete
country_event = {
	id = flavor_seghdihr.134
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.improvement_complete_dip_desc
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.improvement_complete_dip_option
		4435 = {
			random_trade_node_member_province = {
				limit = { is_wasteland = no NOT = { has_province_modifier = seghdihr_sgc_invested } }
				add_base_production = 2
				add_permanent_province_modifier = { name = seghdihr_sgc_invested duration = -1 }
			}
		}
		hidden_effect = {
			if = {
				limit = {
					4435 = {
						calc_true_if = {
							amount = 3
							all_trade_node_member_province = { has_province_modifier = seghdihr_sgc_invested }
						}
					}
				}
				set_country_flag = sgc_dhen_dip_complete
			}
		}
		seghdihr_sgc_update_trade_modifiers = { Dhen = yes value = 10 }
		ai_chance = { factor = 5 }
	}
}

#mil complete
country_event = {
	id = flavor_seghdihr.135
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.improvement_complete_mil_desc
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.improvement_complete_mil_option
		if = {
			limit = { 4379 = { NOT = { has_province_modifier = seghdihr_sgc_patrols_1st } } } 
			4379 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_1st duration = -1 } } #nabuki
			4412 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_1st duration = -1 } } #parusapa
			4411 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_1st duration = -1 } } #dhenji
		}
		else_if = {
			limit = { 4410 = { NOT = { has_province_modifier = seghdihr_sgc_patrols_2nd } } } 
			4410 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_2nd duration = -1 } } #durdiha
			4381 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_2nd duration = -1 } } #sephahan
			4404 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_2nd duration = -1 } } #parusamal
		}
		else = { 
			4391 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_3rd duration = -1 } } #sardiphadin
			4392 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_3rd duration = -1 } } #parus panasur
			4418 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_3rd duration = -1 } } #amtarim
			hidden_effect = { set_country_flag = sgc_dhen_mil_complete }
		}
		seghdihr_sgc_update_trade_modifiers = { Dhen = yes value = 10 }
		ai_chance = { factor = 5 }
	}
}


###############################################Middle Rahen###############################################

#####menu#####
country_event = {
	id = flavor_seghdihr.140
	title = flavor_seghdihr.140.t
	desc = flavor_seghdihr.140.d
	picture = EMPTY_eventPicture
	
	is_triggered_only = yes
	
	trigger = { always = yes }

	#back
	option = {
		name = flavor_seghdihr.exit
		highlight = yes
		hidden_effect = { country_event = { id = flavor_seghdihr.100 }  }
		ai_chance = { factor = 5 }
	}

	#unique1 - elephant caravans
	option = {
		trigger = { has_country_flag = sgc_rahen_fullaccess }
		name = flavor_seghdihr.140.a
		custom_tooltip = flavor_seghdihr.140.tooltip
		if = {
			limit = {
				NOT = { has_country_modifier = seghdihr_sgc_rahen_busy }
				NOT = { has_country_flag = sgc_rahen_uni1_complete }
				4485 = {
					owner = {
						OR = {
							has_opinion = { who = ROOT value = 100 }
							AND = {
								is_rival = ROOT
								ROOT = { adm_power = 200 }
							}
						}
					}
				}
				treasury = 5000
			}
			add_treasury = -5000
			if = {
				limit = {
					4485 = { owner = { is_rival = ROOT } }
				}
				add_adm_power = -200
			}
			add_country_modifier = { name = seghdihr_sgc_rahen_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.141 days = 1825 } }
		}
		else = {
			if = {
				limit = { has_country_flag = sgc_rahen_uni1_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_rahen_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = {
				if = {
					limit = { NOT = { treasury = 5000 } }
					custom_tooltip = seghdihr_sgc_missing_req_5000g
				}
				if = {
					limit = {
						4485 = {
							owner = { 
								NOT = { has_opinion = { who = ROOT value = 100 } }
								NOT = { is_rival = ROOT }
							} 
						}
						
					}
					custom_tooltip = seghdihr_sgc_missing_req_opinion_sharaa
				}
				else_if = {
					limit = { NOT = { adm_power = 200 } }
					custom_tooltip = seghdihr_sgc_missing_req_200adm
				}
			}
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}

	#unique2 - sponsor mercs
	option = {
		trigger = { has_country_flag = sgc_rahen_fullaccess }
		name = flavor_seghdihr.140.b
		custom_tooltip = flavor_seghdihr.140.tooltip2
		if = {
			limit = {
				NOT = { has_country_modifier = seghdihr_sgc_rahen_busy }
				NOT = { has_country_flag = sgc_rahen_uni2_complete }
				treasury = 2000
				mil_power = 100
			}
			add_treasury = -2000
			add_mil_power = -100
			add_country_modifier = { name = seghdihr_sgc_rahen_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.142 days = 1825 } }
		}
		else = {
			if = {
				limit = { has_country_flag = sgc_rahen_uni2_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_rahen_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = {
				if = {
					limit = { NOT = { treasury = 2000 } }
					custom_tooltip = seghdihr_sgc_missing_req_2000g
				}
				if = {
					limit = { NOT = { mil_power = 100 } }
					custom_tooltip = seghdihr_sgc_missing_req_100mil
				}
			}
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}
	

	#generic adm
	option = {
		name = flavor_seghdihr.adm
		custom_tooltip = sgc_ostkopan_tooltip
		if = {
			limit = {
				seghdihr_sgc_adm_req = yes 
				NOT = { has_country_modifier = seghdihr_sgc_rahen_busy }
				NOT = { has_country_flag = sgc_rahen_adm_complete }
			}
			seghdihr_sgc_adm_cost = yes
			add_country_modifier = { name = seghdihr_sgc_rahen_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.143 days = 1825 } }
		}
		else = {
			if = {
				limit = { has_country_flag = sgc_rahen_adm_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_rahen_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = { seghdihr_sgc_adm_missing_req = yes }
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}

	#generic dip
	option = {
		name = flavor_seghdihr.dip
		custom_tooltip = sgc_investment_tooltip
		if = {
			limit = {
				seghdihr_sgc_dip_req = yes 
				NOT = { has_country_modifier = seghdihr_sgc_rahen_busy }
				NOT = { has_country_flag = sgc_rahen_dip_complete }
			}
			seghdihr_sgc_dip_cost = yes
			add_country_modifier = { name = seghdihr_sgc_rahen_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.144 days = 1825 } }
		}
		else = { 
			if = {
				limit = { has_country_flag = sgc_rahen_dip_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_rahen_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = { seghdihr_sgc_dip_missing_req = yes }
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}
	
	#generic mil
	option = {
		name = flavor_seghdihr.mil
		custom_tooltip = sgc_patrols_tooltip
		if = {
			limit = {
				seghdihr_sgc_mil_req = yes 
				NOT = { has_country_modifier = seghdihr_sgc_rahen_busy }
				NOT = { has_country_flag = sgc_rahen_mil_complete }
			}
			seghdihr_sgc_mil_cost = yes
			add_country_modifier = { name = seghdihr_sgc_rahen_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.145 days = 1825 } }
		}
		else = { 
			if = {
				limit = { has_country_flag = sgc_rahen_mil_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_rahen_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = { seghdihr_sgc_mil_missing_req = yes }
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}
}

#unique 1 complete
country_event = {
	id = flavor_seghdihr.141
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.141.d
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.141.a
		4485 = {
			if = {
				limit = { owner = { culture_group = middle_raheni } }
				owner = {
					add_prestige = 20
					add_legitimacy = 30
				}
			}
			if = {
				limit = { has_dlc = "Mandate of Heaven" }
				add_permanent_province_modifier = { name = seghdihr_sgc_splendor_caravans duration = -1 }
			}
			else = { add_permanent_province_modifier = { name = seghdihr_sgc_splendor_caravans_nodlc duration = -1 } }
		}
		hidden_effect = { set_country_flag = sgc_rahen_uni1_complete }
		seghdihr_sgc_update_trade_modifiers = { Rahen = yes value = 30 }
		ai_chance = { factor = 5 }
	}
}

#unique 2 complete
country_event = {
	id = flavor_seghdihr.142
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.142.d
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.142.a
		if = {
			limit = {
				4485 = {
					any_trade_node_member_country = {
						culture = ghavaanaj
						NOT = { capital_scope = { has_province_modifier = seghdihr_sgc_ghav_mercs } }
					}
				}
			}
			4485 = {
				random_trade_node_member_country = {
					limit = { 
						culture = ghavaanaj 
						NOT = { capital_scope = { has_province_modifier = seghdihr_sgc_ghav_mercs } }
					}
					capital_scope = { add_permanent_province_modifier = { name = seghdihr_sgc_ghav_mercs duration = -1 } }
				}
			}
			hidden_effect = {
				if = {
					limit = { has_country_flag = ghav_1_temp_flag }
					clr_country_flag = ghav_1_temp_flag
					set_country_flag = sgc_rahen_uni2_complete
				}
				else = { set_country_flag = ghank_1_temp_flag }
			}
		}
		else = {
			random_province = {
				limit = {
					OR = {
						area = buhaanjirgal_area
						area = banjiraal_area
						area = banjisbid_area
						area = ghavaghuundakhan_area
						area = maldeelakhan_area
					}
					NOT = { has_province_modifier = seghdihr_sgc_ghav_mercs }
				}
				add_permanent_province_modifier = { name = seghdihr_sgc_ghav_mercs duration = -1 }
			}
			hidden_effect = {
				if = {
					limit = { has_country_flag = ghav_1_temp_flag }
					clr_country_flag = ghav_1_temp_flag
					set_country_flag = sgc_rahen_uni2_complete
				}
				else = { set_country_flag = ghav_1_temp_flag }
			}
		}
		seghdihr_sgc_update_trade_modifiers = { Rahen = yes value = 20 }
		ai_chance = { factor = 5 }
	}
}

#adm complete
country_event = {
	id = flavor_seghdihr.143
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.improvement_complete_adm_desc
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.improvement_complete_adm_option
		if = {
			limit = { 4485 = { NOT = { has_province_modifier = seghdihr_sgc_ostkopan } } } #sharaajaghal
			4485 = { 
				add_dwarven_minority_size_effect = yes
				add_permanent_province_modifier = { name = seghdihr_sgc_ostkopan duration = -1 } 
			}
		}
		else_if = {
			limit = { 4469 = { NOT = { has_province_modifier = seghdihr_sgc_ostkopan } } } #sighajisbid
			4469 = { 
				add_dwarven_minority_size_effect = yes
				add_permanent_province_modifier = { name = seghdihr_sgc_ostkopan duration = -1 } 
			}
		}
		else = {
			4488 = { #maharaaja
				add_dwarven_minority_size_effect = yes
				add_permanent_province_modifier = { name = seghdihr_sgc_ostkopan duration = -1 } 
			}
			hidden_effect = { set_country_flag = sgc_rahen_adm_complete }
		}
		seghdihr_sgc_update_trade_modifiers = { Rahen = yes value = 20 }
		ai_chance = { factor = 5 }
	}
}

#dip complete
country_event = {
	id = flavor_seghdihr.144
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.improvement_complete_dip_desc
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.improvement_complete_dip_option
		4485 = {
			random_trade_node_member_province = {
				limit = { is_wasteland = no NOT = { has_province_modifier = seghdihr_sgc_invested } }
				add_base_production = 2
				add_permanent_province_modifier = { name = seghdihr_sgc_invested duration = -1 }
			}
		}
		hidden_effect = {
			if = {
				limit = {
					4485 = {
						calc_true_if = {
							amount = 3
							all_trade_node_member_province = { has_province_modifier = seghdihr_sgc_invested }
						}
					}
				}
				set_country_flag = sgc_rahen_dip_complete
			}
		}
		seghdihr_sgc_update_trade_modifiers = { Rahen = yes value = 10 }
		ai_chance = { factor = 5 }
	}
}

#mil complete
country_event = {
	id = flavor_seghdihr.145
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.improvement_complete_mil_desc
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.improvement_complete_mil_option
		4392 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_1st duration = -1 } } #dhurajaghan
		hidden_effect = { set_country_flag = sgc_rahen_mil_complete }
		seghdihr_sgc_update_trade_modifiers = { Rahen = yes value = 10 }
		ai_chance = { factor = 5 }
	}
}


###############################################Nadimraj###############################################


#####menu#####
country_event = {
	id = flavor_seghdihr.150
	title = flavor_seghdihr.150.t
	desc = flavor_seghdihr.150.d
	picture = EMPTY_eventPicture
	
	is_triggered_only = yes
	
	trigger = { always = yes }

	#back
	option = {
		name = flavor_seghdihr.exit
		highlight = yes
		hidden_effect = { country_event = { id = flavor_seghdihr.100 }  }
		ai_chance = { factor = 5 }
	}

	#unique1 - philosophers
	option = {
		trigger = { has_country_flag = sgc_nadimraj_fullaccess }
		name = flavor_seghdihr.150.a
		custom_tooltip = flavor_seghdihr.150.tooltip
		if = {
			limit = {
				NOT = { has_country_modifier = seghdihr_sgc_nadimraj_busy }
				NOT = { has_country_flag = sgc_nadimraj_uni1_complete }
				4460 = {
					owner = {
						OR = {
							has_opinion = { who = ROOT value = 100 }
							AND = {
								is_rival = ROOT
								ROOT = { adm_power = 200 }
							}
						}
					}
				}
				philosopher = 3
				dip_power = 100
			}
			add_dip_power = -100
			if = {
				limit = {
					4485 = { owner = { is_rival = ROOT } }
				}
				add_adm_power = -200
			}
			kill_advisor = philosopher
			add_country_modifier = { name = seghdihr_sgc_nadimraj_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.151 days = 1825 } }
		}
		else = {
			if = {
				limit = { has_country_flag = sgc_nadimraj_uni1_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_nadimraj_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = {
				if = {
					limit = {
						4460 = {
							owner = { 
								NOT = { has_opinion = { who = ROOT value = 100 } }
								NOT = { is_rival = ROOT }
							} 
						}
						
					}
					custom_tooltip = seghdihr_sgc_missing_req_opinion_sarnihanpur
				}
				else_if = {
					limit = { NOT = { adm_power = 200 } }
					custom_tooltip = seghdihr_sgc_missing_req_200adm
				}
				if = {
					limit = { NOT = { dip_power = 100 } }
					custom_tooltip = seghdihr_sgc_missing_req_100dip
				}
				if = {
					limit = { NOT = { philosopher = 3 } }
					custom_tooltip = seghdihr_sgc_missing_req_philosopher3
				}
			}
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}

	#unique2 - strengthen forts
	option = {
		trigger = { has_country_flag = sgc_nadimraj_fullaccess }
		name = flavor_seghdihr.150.b
		custom_tooltip = flavor_seghdihr.150.tooltip2
		if = {
			limit = {
				NOT = { has_country_modifier = seghdihr_sgc_nadimraj_busy }
				NOT = { has_country_flag = sgc_nadimraj_uni2_complete }
				treasury = 500
				mil_power = 100
				manpower = 5
			}
			add_treasury = -500
			add_mil_power = -100
			add_manpower = -5
			add_country_modifier = { name = seghdihr_sgc_nadimraj_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.152 days = 1825 } }
		}
		else = {
			if = {
				limit = { has_country_flag = sgc_nadimraj_uni2_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_nadimraj_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = {
				if = {
					limit = { NOT = { treasury = 500 } }
					custom_tooltip = seghdihr_sgc_missing_req_500g
				}
				if = {
					limit = { NOT = { mil_power = 100 } }
					custom_tooltip = seghdihr_sgc_missing_req_100mil
				}
				if = {
					limit = { NOT = { manpower = 5 } }
					custom_tooltip = seghdihr_sgc_missing_req_5kman
				}
			}
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}

	#generic adm
	option = {
		name = flavor_seghdihr.adm
		custom_tooltip = sgc_ostkopan_tooltip
		if = {
			limit = {
				seghdihr_sgc_adm_req = yes 
				NOT = { has_country_modifier = seghdihr_sgc_nadimraj_busy }
				NOT = { has_country_flag = sgc_nadimraj_adm_complete }
			}
			seghdihr_sgc_adm_cost = yes
			add_country_modifier = { name = seghdihr_sgc_nadimraj_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.153 days = 1825 } }
		}
		else = {
			if = {
				limit = { has_country_flag = sgc_nadimraj_adm_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_nadimraj_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = { seghdihr_sgc_adm_missing_req = yes }
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}

	#generic dip
	option = {
		name = flavor_seghdihr.dip
		custom_tooltip = sgc_investment_tooltip
		if = {
			limit = {
				seghdihr_sgc_dip_req = yes 
				NOT = { has_country_modifier = seghdihr_sgc_nadimraj_busy }
				NOT = { has_country_flag = sgc_nadimraj_dip_complete }
			}
			seghdihr_sgc_dip_cost = yes
			add_country_modifier = { name = seghdihr_sgc_nadimraj_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.154 days = 1825 } }
		}
		else = { 
			if = {
				limit = { has_country_flag = sgc_nadimraj_dip_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_nadimraj_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = { seghdihr_sgc_dip_missing_req = yes }
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}
	
	#generic mil
	option = {
		name = flavor_seghdihr.mil
		custom_tooltip = sgc_patrols_tooltip
		custom_tooltip = seghdihr_sgc_no_highway
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}
}

#unique 1 complete
country_event = {
	id = flavor_seghdihr.151
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.151.d
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.151.a
		4460 = { 
			add_dwarven_minority_size_effect = yes
			add_permanent_province_modifier = { name = seghdihr_sgc_philosophers duration = -1 } 
		}
		hidden_effect = { set_country_flag = sgc_nadimraj_uni1_complete }
		seghdihr_sgc_update_trade_modifiers = { Nadimraj = yes value = 50 }
		ai_chance = { factor = 5 }
	}
}

#unique 2 complete
country_event = {
	id = flavor_seghdihr.152
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.152.d
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.152.a
		4460 = {
			random_trade_node_member_province = {
				limit = {
					OR = {
						has_fort_building_trigger = yes
						development = 10
					}
					NOT = { has_province_modifier = seghdihr_sgc_fort_strengthened }
				}
				if = {
					limit = { NOT = { has_fort_building_trigger = yes } }
					add_building = fort_16th
				}
				add_permanent_province_modifier = { name = seghdihr_sgc_fort_strengthened duration = -1 }
			}
		}
		hidden_effect = {
			if = {
				limit = {
					4460 = {
						calc_true_if = {
							amount = 2
							all_trade_node_member_province = { has_province_modifier = seghdihr_sgc_fort_strengthened }
						}
					}
				}
				set_country_flag = sgc_nadimraj_uni2_complete
			}
		}
		seghdihr_sgc_update_trade_modifiers = { Nadimraj = yes value = 20 }
		ai_chance = { factor = 5 }
	}
}


#adm complete
country_event = {
	id = flavor_seghdihr.153
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.improvement_complete_adm_desc
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.improvement_complete_adm_option
		if = {
			limit = { 4446 = { NOT = { has_province_modifier = seghdihr_sgc_ostkopan } } } #dakhilamvi
			4446 = {
				add_dwarven_minority_size_effect = yes
				add_permanent_province_modifier = { name = seghdihr_sgc_ostkopan duration = -1 } 
			}
		}
		else_if = {
			limit = { 4397 = { NOT = { has_province_modifier = seghdihr_sgc_ostkopan } } } #sharaja
			4397 = {
				add_dwarven_minority_size_effect = yes
				add_permanent_province_modifier = { name = seghdihr_sgc_ostkopan duration = -1 } 
			}
		}
		else = {
			4460 = { #sarnihanpur
				add_dwarven_minority_size_effect = yes
				add_permanent_province_modifier = { name = seghdihr_sgc_ostkopan duration = -1 } 
			}
			hidden_effect = { set_country_flag = sgc_nadimraj_adm_complete }
		}
		seghdihr_sgc_update_trade_modifiers = { Nadimraj = yes value = 20 }
		ai_chance = { factor = 5 }
	}
}

#dip complete
country_event = {
	id = flavor_seghdihr.154
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.improvement_complete_dip_desc
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.improvement_complete_dip_option
		4460 = {
			random_trade_node_member_province = {
				limit = { is_wasteland = no NOT = { has_province_modifier = seghdihr_sgc_invested } }
				add_base_production = 2
				add_permanent_province_modifier = { name = seghdihr_sgc_invested duration = -1 }
			}
		}
		hidden_effect = {
			if = {
				limit = {
					4460 = {
						calc_true_if = {
							amount = 3
							all_trade_node_member_province = { has_province_modifier = seghdihr_sgc_invested }
						}
					}
				}
				set_country_flag = sgc_nadimraj_dip_complete
			}
		}
		seghdihr_sgc_update_trade_modifiers = { Nadimraj = yes value = 10 }
		ai_chance = { factor = 5 }
	}
}

#mil complete
#no mil here






###############################################Kharunyana###############################################

#####menu#####
country_event = {
	id = flavor_seghdihr.180
	title = flavor_seghdihr.180.t
	desc = flavor_seghdihr.180.d
	picture = EMPTY_eventPicture
	
	is_triggered_only = yes
	
	trigger = { always = yes }

	#back
	option = {
		name = flavor_seghdihr.exit
		highlight = yes
		hidden_effect = { country_event = { id = flavor_seghdihr.100 }  }
		ai_chance = { factor = 5 }
	}

	#unique1 - porcelain trade
	option = {
		trigger = { has_country_flag = sgc_kharun_fullaccess }
		name = flavor_seghdihr.180.a
		custom_tooltip = flavor_seghdihr.180.tooltip
		if = {
			limit = {
				NOT = { has_country_modifier = seghdihr_sgc_kharun_busy }
				NOT = { has_country_flag = sgc_kharun_uni1_complete }
				treasury = 3000
				adm_power = 50
				dip_power = 50
				mil_power = 50
			}
			add_treasury = -3000
			add_adm_power = -50
			add_dip_power = -50
			add_mil_power = -50
			add_country_modifier = { name = seghdihr_sgc_kharun_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.181 days = 1825 } }
		}
		else = {
			if = {
				limit = { has_country_flag = sgc_kharun_uni1_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_kharun_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = {
				if = {
					limit = { NOT = { treasury = 3000 } }
					custom_tooltip = seghdihr_sgc_missing_req_3000g
				}
				if = {
					limit = { NOT = { adm_power = 50 } }
					custom_tooltip = seghdihr_sgc_missing_req_50adm
				}
				if = {
					limit = { NOT = { dip_power = 50 } }
					custom_tooltip = seghdihr_sgc_missing_req_50dip
				}
				if = {
					limit = { NOT = { mil_power = 50 } }
					custom_tooltip = seghdihr_sgc_missing_req_50mil
				}
			}
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}

	#unique2 - oracle info
	option = {
		trigger = { has_country_flag = sgc_kharun_fullaccess }
		name = flavor_seghdihr.180.b
		custom_tooltip = flavor_seghdihr.180.tooltip2
		if = {
			limit = {
				NOT = { has_country_modifier = seghdihr_sgc_kharun_busy }
				NOT = { has_country_flag = sgc_kharun_uni2_complete }
				treasury = 2500
				dip_power = 100
			}
			add_treasury = -2500
			add_dip_power = -100
			add_country_modifier = { name = seghdihr_sgc_kharun_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.182 days = 1825 } }
		}
		else = {
			if = {
				limit = { has_country_flag = sgc_kharun_uni2_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_kharun_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = {
				if = {
					limit = { NOT = { treasury = 2500 } }
					custom_tooltip = seghdihr_sgc_missing_req_2500g
				}
				if = {
					limit = { NOT = { dip_power = 100 } }
					custom_tooltip = seghdihr_sgc_missing_req_100dip
				}
			}
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}

	#generic adm
	option = {
		name = flavor_seghdihr.adm
		custom_tooltip = sgc_ostkopan_tooltip
		if = {
			limit = {
				seghdihr_sgc_adm_req = yes 
				NOT = { has_country_modifier = seghdihr_sgc_kharun_busy }
				NOT = { has_country_flag = sgc_kharun_adm_complete }
			}
			seghdihr_sgc_adm_cost = yes
			add_country_modifier = { name = seghdihr_sgc_kharun_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.183 days = 1825 } }
		}
		else = {
			if = {
				limit = { has_country_flag = sgc_kharun_adm_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_kharun_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = { seghdihr_sgc_adm_missing_req = yes }
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}

	#generic dip
	option = {
		name = flavor_seghdihr.dip
		custom_tooltip = sgc_investment_tooltip
		if = {
			limit = {
				seghdihr_sgc_dip_req = yes 
				NOT = { has_country_modifier = seghdihr_sgc_kharun_busy }
				NOT = { has_country_flag = sgc_kharun_dip_complete }
			}
			seghdihr_sgc_dip_cost = yes
			add_country_modifier = { name = seghdihr_sgc_kharun_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.184 days = 1825 } }
		}
		else = { 
			if = {
				limit = { has_country_flag = sgc_kharun_dip_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_kharun_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = { seghdihr_sgc_dip_missing_req = yes }
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}
	
	#generic mil
	option = {
		name = flavor_seghdihr.mil
		custom_tooltip = sgc_patrols_tooltip
		if = {
			limit = {
				seghdihr_sgc_mil_req = yes 
				NOT = { has_country_modifier = seghdihr_sgc_kharun_busy }
				NOT = { has_country_flag = sgc_kharun_mil_complete }
			}
			seghdihr_sgc_mil_cost = yes
			add_country_modifier = { name = seghdihr_sgc_kharun_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.185 days = 1825 } }
		}
		else = { 
			if = {
				limit = { has_country_flag = sgc_kharun_mil_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_kharun_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = { seghdihr_sgc_mil_missing_req = yes }
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}
}

#unique 1 complete
country_event = {
	id = flavor_seghdihr.181
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.181.d
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.181.a
		porcelain_cities = {
			add_permanent_province_modifier = { name = seghdihr_sgc_porcelain_trade duration = -1 }
		}
		hidden_effect = { set_country_flag = sgc_kharun_uni1_complete }
		seghdihr_sgc_update_trade_modifiers = { Kharun = yes value = 30 }
		ai_chance = { factor = 5 }
	}
}

#unique 2 complete
country_event = {
	id = flavor_seghdihr.182
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.182.d
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.182.a
		if = {
			limit = { 4527 = { NOT = { has_province_modifier = seghdihr_sgc_oracle_info_1 has_province_modifier = seghdihr_sgc_oracle_info_2 } } }
			4527 = { add_permanent_province_modifier = { name = seghdihr_sgc_oracle_info_1 duration = -1 } }
		}
		else = {
			4527 = { add_permanent_province_modifier = { name = seghdihr_sgc_oracle_info_2 duration = -1 } }
			hidden_effect = {
				4527 = { remove_province_modifier = seghdihr_sgc_oracle_info_1 }
				set_country_flag = sgc_kharun_uni2_complete
			}
		}
		seghdihr_sgc_update_trade_modifiers = { Kharun = yes value = 20 }
		ai_chance = { factor = 5 }
	}
}


#adm complete
country_event = {
	id = flavor_seghdihr.183
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.improvement_complete_adm_desc
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.improvement_complete_adm_option
		if = {
			limit = { 4409 = { NOT = { has_province_modifier = seghdihr_sgc_ostkopan } } } #khirasapid
			4409 = {
				add_dwarven_minority_size_effect = yes
				add_permanent_province_modifier = { name = seghdihr_sgc_ostkopan duration = -1 } 
			}
		}
		else_if = {
			limit = { 4600 = { NOT = { has_province_modifier = seghdihr_sgc_ostkopan } } } #semphrerong
			4600 = {
				add_dwarven_minority_size_effect = yes
				add_permanent_province_modifier = { name = seghdihr_sgc_ostkopan duration = -1 } 
			}
		}
		else_if = {
			limit = { 4500 = { NOT = { has_province_modifier = seghdihr_sgc_ostkopan } } } #sarisung
			4500 = {
				add_dwarven_minority_size_effect = yes
				add_permanent_province_modifier = { name = seghdihr_sgc_ostkopan duration = -1 } 
			}
		}
		else = {
			4510 = { #sarnavan
				add_dwarven_minority_size_effect = yes
				add_permanent_province_modifier = { name = seghdihr_sgc_ostkopan duration = -1 } 
			}
			hidden_effect = { set_country_flag = sgc_kharun_adm_complete }
		}
		seghdihr_sgc_update_trade_modifiers = { Kharun = yes value = 20 }
		ai_chance = { factor = 5 }
	}
}

#dip complete
country_event = {
	id = flavor_seghdihr.184
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.improvement_complete_dip_desc
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.improvement_complete_dip_option
		4952 = {
			random_trade_node_member_province = {
				limit = { is_wasteland = no NOT = { has_province_modifier = seghdihr_sgc_invested trade_goods = chinaware } }
				add_base_production = 2
				add_permanent_province_modifier = { name = seghdihr_sgc_invested duration = -1 }
			}
		}
		hidden_effect = {
			if = {
				limit = {
					4952 = {
						calc_true_if = {
							amount = 3
							all_trade_node_member_province = { has_province_modifier = seghdihr_sgc_invested }
						}
					}
				}
				set_country_flag = sgc_kharun_dip_complete
			}
		}
		seghdihr_sgc_update_trade_modifiers = { Kharun = yes value = 10 }
		ai_chance = { factor = 5 }
	}
}

#mil complete
country_event = {
	id = flavor_seghdihr.185
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.improvement_complete_mil_desc
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.improvement_complete_mil_option
		if = {
			limit = { 4409 = { NOT = { has_province_modifier = seghdihr_sgc_patrols_1st } } } 
			4409 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_1st duration = -1 } } #khiraspid
			4492 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_1st duration = -1 } } #endhuvi
			4496 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_1st duration = -1 } } #vatang
		}
		else_if = {
			limit = { 4493 = { NOT = { has_province_modifier = seghdihr_sgc_patrols_2nd } } } 
			4493 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_2nd duration = -1 } } #keyattordha
			4497 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_2nd duration = -1 } } #sadavin
			4499 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_2nd duration = -1 } } #khirnadhiman
			4470 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_2nd duration = -1 } } #nundujisbid
		}
		else = {
			4489 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_3rd duration = -1 } } #kethur
			4500 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_3rd duration = -1 } } #sarisung
			4620 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_3rd duration = -1 } } #khappur
			4511 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_3rd duration = -1 } } #yoddhauke
			hidden_effect = { set_country_flag = sgc_kharun_mil_complete }
		}
		seghdihr_sgc_update_trade_modifiers = { Kharun = yes value = 10 }
		ai_chance = { factor = 5 }
	}
}

###############################################Xia###############################################

#####menu#####
country_event = {
	id = flavor_seghdihr.170
	title = flavor_seghdihr.170.t
	desc = flavor_seghdihr.170.d
	picture = EMPTY_eventPicture
	
	is_triggered_only = yes
	
	trigger = { always = yes }

	#back
	option = {
		name = flavor_seghdihr.exit
		highlight = yes
		hidden_effect = { country_event = { id = flavor_seghdihr.100 }  }
		ai_chance = { factor = 5 }
	}

	#unique1 - sparring grounds
	option = {
		trigger = { has_country_flag = sgc_xia_fullaccess }
		name = flavor_seghdihr.170.a
		custom_tooltip = flavor_seghdihr.170.tooltip
		if = {
			limit = {
				NOT = { has_country_modifier = seghdihr_sgc_xia_busy }
				NOT = { has_country_flag = sgc_xia_uni1_complete }
				treasury = 5000
				manpower = 10
				army_professionalism = 0.05
			}
			add_treasury = -5000
			add_manpower = -10
			add_army_professionalism = -0.05
			add_country_modifier = { name = seghdihr_sgc_xia_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.171 days = 1825 } }
		}
		else = {
			if = {
				limit = { has_country_flag = sgc_xia_uni1_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_xia_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = {
				if = {
					limit = { NOT = { treasury = 5000 } }
					custom_tooltip = seghdihr_sgc_missing_req_5000g
				}
				if = {
					limit = { NOT = { manpower = 10 } }
					custom_tooltip = seghdihr_sgc_missing_req_10kman
				}
				if = {
					limit = { NOT = { army_professionalism = 0.05 } }
					custom_tooltip = seghdihr_sgc_missing_req_5proff
				}
			}
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}

	#unique2 - dwarf weapon shops
	option = {
		trigger = { has_country_flag = sgc_xia_fullaccess }
		name = flavor_seghdihr.170.b
		custom_tooltip = flavor_seghdihr.170.tooltip2
		if = {
			limit = {
				NOT = { has_country_modifier = seghdihr_sgc_xia_busy }
				NOT = { has_country_flag = sgc_xia_uni2_complete }
				treasury = 2500
				adm_power = 50
				dip_power = 50
			}
			add_treasury = -2500
			add_adm_power = -50
			add_dip_power = -50
			add_country_modifier = { name = seghdihr_sgc_xia_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.172 days = 1825 } }
		}
		else = {
			if = {
				limit = { has_country_flag = sgc_xia_uni2_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_xia_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = {
				if = {
					limit = { NOT = { treasury = 2500 } }
					custom_tooltip = seghdihr_sgc_missing_req_2500g
				}
				if = {
					limit = { NOT = { adm_power = 50 } }
					custom_tooltip = seghdihr_sgc_missing_req_50adm
				}
				if = {
					limit = { NOT = { dip_power = 50 } }
					custom_tooltip = seghdihr_sgc_missing_req_50dip
				}
			}
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}

	#generic adm
	option = {
		name = flavor_seghdihr.adm
		custom_tooltip = sgc_ostkopan_tooltip
		if = {
			limit = {
				seghdihr_sgc_adm_req = yes 
				NOT = { has_country_modifier = seghdihr_sgc_xia_busy }
				NOT = { has_country_flag = sgc_xia_adm_complete }
			}
			seghdihr_sgc_adm_cost = yes
			add_country_modifier = { name = seghdihr_sgc_xia_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.173 days = 1825 } }
		}
		else = {
			if = {
				limit = { has_country_flag = sgc_xia_adm_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_xia_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = { seghdihr_sgc_adm_missing_req = yes }
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}

	#generic dip
	option = {
		name = flavor_seghdihr.dip
		custom_tooltip = sgc_investment_tooltip
		if = {
			limit = {
				seghdihr_sgc_dip_req = yes 
				NOT = { has_country_modifier = seghdihr_sgc_xia_busy }
				NOT = { has_country_flag = sgc_xia_dip_complete }
			}
			seghdihr_sgc_dip_cost = yes
			add_country_modifier = { name = seghdihr_sgc_xia_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.174 days = 1825 } }
		}
		else = { 
			if = {
				limit = { has_country_flag = sgc_xia_dip_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_xia_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = { seghdihr_sgc_dip_missing_req = yes }
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}
	
	#generic mil
	option = {
		name = flavor_seghdihr.mil
		custom_tooltip = sgc_patrols_tooltip
		if = {
			limit = {
				seghdihr_sgc_mil_req = yes 
				NOT = { has_country_modifier = seghdihr_sgc_xia_busy }
				NOT = { has_country_flag = sgc_xia_mil_complete }
			}
			seghdihr_sgc_mil_cost = yes
			add_country_modifier = { name = seghdihr_sgc_xia_busy duration = 1825 }
			hidden_effect = { country_event = { id = flavor_seghdihr.175 days = 1825 } }
		}
		else = { 
			if = {
				limit = { has_country_flag = sgc_xia_mil_complete }
				custom_tooltip = seghdihr_sgc_improved_max
			}
			else_if = {
				limit = { has_country_modifier = seghdihr_sgc_xia_busy }
				custom_tooltip = seghdihr_sgc_node_busy
			}
			else = { seghdihr_sgc_mil_missing_req = yes }
		}
		hidden_effect = { country_event = { id = flavor_seghdihr.100 } }
		ai_chance = { factor = 5 }
	}
}

#unique 1 complete
country_event = {
	id = flavor_seghdihr.171
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.171.d
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.171.a
		4559 = {
			add_dwarven_minority_size_effect = yes
			add_permanent_province_modifier = { name = seghdihr_sgc_sparring duration = -1 }
		}
		hidden_effect = { set_country_flag = sgc_xia_uni1_complete }
		seghdihr_sgc_update_trade_modifiers = { Xia = yes value = 30 }
		ai_chance = { factor = 5 }
	}
}

#unique 2 complete
country_event = {
	id = flavor_seghdihr.172
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.172.d
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.172.a

		4559 = { 
			random_trade_node_member_province = {  
				limit = {
					is_wasteland = no
					region = xianjie_region
					NOT = { has_province_modifier = seghdihr_sgc_weapon_shop }
					NOT = { province_id = 4559 } #xiadao
				}
				add_permanent_province_modifier = { name = seghdihr_sgc_weapon_shop duration = -1 }
			}
		}
		hidden_effect = {
			if = {
				limit = {
					4559 = {
						calc_true_if = {
							amount = 2
							all_trade_node_member_province = { has_province_modifier = seghdihr_sgc_weapon_shop }
						}
					}
				}
				set_country_flag = sgc_xia_uni2_complete
			}
		}
		seghdihr_sgc_update_trade_modifiers = { Xia = yes value = 20 }
		ai_chance = { factor = 5 }
	}
}


#adm complete
country_event = {
	id = flavor_seghdihr.173
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.improvement_complete_adm_desc
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.improvement_complete_adm_option
		if = {
			limit = { 4618 = { NOT = { has_province_modifier = seghdihr_sgc_ostkopan } } } #shanyutian
			4618 = {
				add_dwarven_minority_size_effect = yes
				add_permanent_province_modifier = { name = seghdihr_sgc_ostkopan duration = -1 } 
			}
		}
		else_if = {
			limit = { 4559 = { NOT = { has_province_modifier = seghdihr_sgc_ostkopan } } } #xiadao
			4559 = {
				add_dwarven_minority_size_effect = yes
				add_permanent_province_modifier = { name = seghdihr_sgc_ostkopan duration = -1 } 
			}
		}
		else = {
			4936 = { #jiktziancheng
				add_dwarven_minority_size_effect = yes
				add_permanent_province_modifier = { name = seghdihr_sgc_ostkopan duration = -1 } 
			}
			hidden_effect = { set_country_flag = sgc_xia_adm_complete }
		}
		seghdihr_sgc_update_trade_modifiers = { Xia = yes value = 20 }
		ai_chance = { factor = 5 }
	}
}

#dip complete
country_event = {
	id = flavor_seghdihr.174
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.improvement_complete_dip_desc
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.improvement_complete_dip_option
		4500 = {
			random_trade_node_member_province = {
				limit = { is_wasteland = no NOT = { has_province_modifier = seghdihr_sgc_invested } }
				add_base_production = 2
				add_permanent_province_modifier = { name = seghdihr_sgc_invested duration = -1 }
			}
		}
		hidden_effect = {
			if = {
				limit = {
					4500 = {
						calc_true_if = {
							amount = 3
							all_trade_node_member_province = { has_province_modifier = seghdihr_sgc_invested }
						}
					}
				}
				set_country_flag = sgc_xia_dip_complete
			}
		}
		seghdihr_sgc_update_trade_modifiers = { Xia = yes value = 10 }
		ai_chance = { factor = 5 }
	}
}

#mil complete
country_event = {
	id = flavor_seghdihr.175
	title = flavor_seghdihr.improvement_complete_title
	desc = flavor_seghdihr.improvement_complete_mil_desc
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes

	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.improvement_complete_mil_option
		if = {
			limit = { 4611 = { NOT = { has_province_modifier = seghdihr_sgc_patrols_1st } } } 
			4611 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_1st duration = -1 } } #fangwuk
			4938 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_1st duration = -1 } } #jiangguan
			4613 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_1st duration = -1 } } #zhaoyun
		}
		else_if = {
			limit = { 4599 = { NOT = { has_province_modifier = seghdihr_sgc_patrols_2nd } } } 
			4599 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_2nd duration = -1 } } #xiadao
			4617 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_2nd duration = -1 } } #fulin
			4618 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_2nd duration = -1 } } #shanyutian
		}
		else = {
			4641 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_3rd duration = -1 } } #jiuniugong
			4817 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_3rd duration = -1 } } #shouyuan
			4819 = { add_permanent_province_modifier = { name = seghdihr_sgc_patrols_3rd duration = -1 } } #dikcha
			hidden_effect = { set_country_flag = sgc_xia_mil_complete }
		}
		seghdihr_sgc_update_trade_modifiers = { Xia = yes value = 10 }
		ai_chance = { factor = 5 }
	}
}







####Parliament auto-backing because doing it in the parliament issues file doesn't work
country_event = {
	id = flavor_seghdihr.200
	title = seghdihr_hidden_loc
	desc = seghdihr_hidden_loc
	picture = FORT_eventPicture

	is_triggered_only = yes
	hidden = yes

	trigger = { always = yes }

	option = {
		name = seghdihr_hidden_loc

		trigger_switch = {
			on_trigger = current_debate

			segamlavad_seghdihr_loyalty = {
				if = {
					limit = { 4124 = { NOT = { is_backing_current_issue = yes } } }
					4124 = { back_current_issue = yes }
				}
			}
			segamlavad_gulan_gold = {
				if = {
					limit = { 2914 = { NOT = { is_backing_current_issue = yes } } }
					2914 = { back_current_issue = yes }
				}
			}
			segamlavad_hehodovar_forge = {
				if = {
					limit = { 4078 = { NOT = { is_backing_current_issue = yes } } }
					4078 = { back_current_issue = yes }
				}
			}
			segamlavad_ozumbrog_faith = {
				if = {
					limit = { 4218 = { NOT = { is_backing_current_issue = yes } } }
					4218 = { back_current_issue = yes }
				}
			}
			segamlavad_vazumbrog_army = {
				if = {
					limit = { 4217 = { NOT = { is_backing_current_issue = yes } } }
					4217 = { back_current_issue = yes }
				}
			}
		}
	}
}

#randomization for hargunforge mission
province_event = {
	id = flavor_seghdihr.201
	title = seghdihr_hidden_loc
	desc = seghdihr_hidden_loc
	picture = FORT_eventPicture

	is_triggered_only = yes
	hidden = yes

	trigger = { always = yes }

	option = {
		name = seghdihr_hidden_loc
		ai_chance = { factor = 75 }
		add_base_production = 5
	}

	option = {
		name = seghdihr_hidden_loc
		ai_chance = { factor = 25 }
		change_trade_goods = mithril
	}
}
#randomization for hargunforge mission pt 2
province_event = {
	id = flavor_seghdihr.202
	title = seghdihr_hidden_loc
	desc = seghdihr_hidden_loc
	picture = FORT_eventPicture

	is_triggered_only = yes
	hidden = yes

	trigger = { always = yes }

	option = {
		name = seghdihr_hidden_loc
		ai_chance = { factor = 50 }
		change_trade_goods = iron
	}

	option = {
		name = seghdihr_hidden_loc
		ai_chance = { factor = 25 }
		change_trade_goods = copper
	}

	option = {
		name = seghdihr_hidden_loc
		ai_chance = { factor = 25 }
		change_trade_goods = mithril
	}
}

#randomization for syndicate trade goods
province_event = {
	id = flavor_seghdihr.203
	title = seghdihr_hidden_loc
	desc = seghdihr_hidden_loc
	picture = FORT_eventPicture

	is_triggered_only = yes
	hidden = yes

	trigger = { always = yes }

	option = {
		name = seghdihr_hidden_loc
		ai_chance = { factor = 20 }
		change_trade_goods = copper
	}
	option = {
		name = seghdihr_hidden_loc
		ai_chance = { factor = 20 }
		change_trade_goods = cloth
	}
	option = {
		name = seghdihr_hidden_loc
		ai_chance = { factor = 20 }
		change_trade_goods = iron
	}
	option = {
		name = seghdihr_hidden_loc
		ai_chance = { factor = 20 }
		change_trade_goods = glass
	}
	option = {
		name = seghdihr_hidden_loc
		ai_chance = { factor = 20 }
		change_trade_goods = paper
	}
}