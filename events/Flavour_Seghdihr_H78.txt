
namespace = flavor_seghdihr
#1-49 missions
#50-99 goblin incursions
#100+ SGC

#Missions
#
#goblin initial attack
country_event = {
	id = flavor_seghdihr.1
	title = flavor_seghdihr.1.t
	desc = flavor_seghdihr.1.d
	picture = FORT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.1.a
		4090 = { 
			add_devastation = 25
			spawn_rebels = {
				type = cave_goblin_rebel
				size = 1
			}
		}
		4218 = {
			add_devastation = 30
			spawn_rebels = {
				type = cave_goblin_rebel
				size = 2
			}
		}
		custom_tooltip = flavor_seghdihr.1.tooltip
		hidden_effect = { 
			#####set up incursions
			set_country_flag = seghdihr_incursions_active
			set_variable = { which = incursion_gathering_strength value = 0 }
			set_variable = { which = incursion_mission_bonus value = 0 }
			seghdihr_calculate_incursion_strength = yes
		}
		ai_chance = { factor = 5 }
	}
}

#VG event
country_event = {
	id = flavor_seghdihr.2
	title = flavor_seghdihr.2.t
	desc = flavor_seghdihr.2.d
	picture = FORT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.2.a
		reverse_add_opinion = { who = H78 modifier = opinion_disappointed }
		add_prestige = 15
		H78 = { country_event = { id = flavor_seghdihr.3 } }
		ai_chance = { 
			factor = 80 
		}
	}

	option = {
		name = flavor_seghdihr.2.b
		H78 = { vassalize = ROOt }
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				is_rival = H78
			}
			modifier = {
				factor = 2
				num_of_loans = 3
			}
			modifier = {
				factor = 5
				NOT = { num_of_cities = 2 }
			}
		}
	}

}

#Seghdihr gets reply
country_event = {
	id = flavor_seghdihr.3
	title = flavor_seghdihr.3.t
	desc = flavor_seghdihr.3.d
	picture = FORT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.3.a
		add_casus_belli = { type = cb_vassalize_mission target = F47 months = 600 }
		ai_chance = { factor = 5 }
	}
}

#kings dilemma
country_event = {
	id = flavor_seghdihr.4
	title = flavor_seghdihr.4.t
	desc = flavor_seghdihr.4.d
	picture = FORT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.4.a
		if = {
			limit = { has_country_modifier = seghdihr_seg_band_contract }
			remove_country_modifier = seghdihr_seg_band_contract
		}
		if = {
			limit = { NOT = { has_estate_privilege = estate_adventurers_organization_licensed_adventurers } }
			set_estate_privilege = estate_adventurers_organization_licensed_adventurers
		}
		else_if = {
			limit = { has_estate_privilege = estate_adventurers_ennoblement_of_adventurers }
			remove_estate_privilege = estate_adventurers_ennoblement_of_adventurers
		}
		else_if = {
			limit = { has_estate_privilege = estate_adventurers_free_company_rosters }
			remove_estate_privilege = estate_adventurers_free_company_rosters
		}
		else_if = {
			limit = { has_estate_privilege = estate_adventurers_heroes_in_the_army }
			remove_estate_privilege = estate_adventurers_heroes_in_the_army
		}
		else_if = {
			limit = { has_estate_privilege = estate_adventurers_advisors }
			remove_estate_privilege = estate_adventurers_advisors
		}
		add_estate_loyalty = { estate = estate_adventurers loyalty = -10 }
		ai_chance = { factor = 5 }
	}
}

#true unity
country_event = {
	id = flavor_seghdihr.5
	title = flavor_seghdihr.5.t
	desc = flavor_seghdihr.5.d
	picture = FORT_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = flavor_seghdihr.5.a
		#take diplo if vassal fed
		custom_tooltip = flavor_seghdihr.5.tooltip
		hidden_effect = {
			F47 = {
				every_owned_province = {
					limit = {
						NOT = { area = verkal_gulan_area }
						NOT = { province_id = 2915 }
					}
					ROOT = { add_dip_power = -5 }
				}
			}
			I15 = {
				every_owned_province = {
					limit = { NOT = { area = hehos_legacy_area  } }
					ROOT = { add_dip_power = -5 }
				}
			}
			I14 = {
				every_owned_province = {
					limit = { NOT = { area = vazumbrog_area } }
					ROOT = { add_dip_power = -5 }
				}
			}
			I17 = {
				every_owned_province = {
					limit = { NOT = { area = ozumbrog_area } }
					ROOT = { add_dip_power = -5 }
				}
			}
		}

		#change to historical cultures and inherit
		hidden_effect = {
			#gulan
			verkal_gulan_area = { change_culture = gold_dwarf }
			2915 = { change_culture = gold_dwarf }
			greatcavern_area = { 
				limit = {
					is_city = yes
					country_or_subject_holds = ROOT
				}
				change_culture = gold_dwarf
			}
			#hehodovar
			hehos_legacy_area = { change_culture = pyrite_dwarf }
			diggers_road_area = {
				limit = {
					is_city = yes
					country_or_subject_holds = ROOT
				}
				change_culture = pyrite_dwarf
			}
			#vazumbrog
			vazumbrog_area = { change_culture = titanium_dwarf }
			dwarovrod_27_29_area = {
				limit = {
					is_city = yes
					country_or_subject_holds = ROOT
				}
				change_culture = titanium_dwarf
			}
			#ozumbrog
			ozumbrog_area = { change_culture = topaz_dwarf }
			dwarovrod_38_41_area = {
				limit = {
					is_city = yes
					country_or_subject_holds = ROOT
				}
				change_culture = topaz_dwarf
			}
		}
		inherit = F47
		inherit = I15
		inherit = I14
		inherit = I17

		#colonization buff if needed
		if = {
			limit = {
				middle_dwarovar_region = {
					calc_true_if = {
						amount = 10
						NOT = { is_city = yes }
					}
				}
			}
			add_country_modifier = { name = seghdihr_colonization_buff duration = 9125 }
		}

		#gov reform, name, and missions
		add_government_reform = seghdihr_segbandal_reform
		override_country_name = THE_SEGBANDAL
		set_country_flag = seghdihr_part2
		swap_non_generic_missions = yes
		ai_chance = { factor = 5 }
	}
}

#way of force-gulan
country_event = {
	id = flavor_seghdihr.6
	title = flavor_seghdihr.6.t
	desc = flavor_seghdihr.6.d
	picture = FORT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.6.a
		add_country_modifier = { name = seghdihr_force_cannons duration = -1 }
		ai_chance = { factor = 5 }
	}
	option = {
		name = flavor_seghdihr.6.b
		add_country_modifier = { name = seghdihr_force_generals duration = -1 }
		ai_chance = { factor = 5 }
	}
	option = {
		name = flavor_seghdihr.6.c
		add_country_modifier = { name = seghdihr_force_sieges duration = -1 }
		ai_chance = { factor = 5 }
	}
}

#way of vigilance-ozumbrog
country_event = {
	id = flavor_seghdihr.7
	title = flavor_seghdihr.7.t
	desc = flavor_seghdihr.7.d
	picture = FORT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.7.a
		add_country_modifier = { name = seghdihr_vigilance_speed duration = -1 }
		ai_chance = { factor = 5 }
	}
	option = {
		name = flavor_seghdihr.7.b
		add_country_modifier = { name = seghdihr_vigilance_garrison duration = -1 }
		ai_chance = { factor = 5 }
	}
	option = {
		name = flavor_seghdihr.7.c
		add_country_modifier = { name = seghdihr_vigilance_tactics duration = -1 }
		ai_chance = { factor = 5 }
	}
}

#integrating seg band
country_event = {
	id = flavor_seghdihr.8
	title = flavor_seghdihr.8.t
	desc = flavor_seghdihr.8.d
	picture = FORT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	immediate = {
		hidden_effect = { add_country_modifier = { name = seghdihr_integrate_band duration = 1825 } }
	}

	option = {
		name = flavor_seghdihr.8.a
		tooltip = { add_country_modifier = { name = seghdihr_integrate_band duration = 1825 } }
		ai_chance = { factor = 5 }
	}
}

#enacting segbandal military
country_event = {
	id = flavor_seghdihr.9
	title = flavor_seghdihr.9.t
	desc = flavor_seghdihr.9.d
	picture = FORT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.9.a
		add_government_reform = seghdihr_segbandalic_military
		ai_chance = { factor = 5 }
	}
}

#way of defiance-seghdihr
country_event = {
	id = flavor_seghdihr.10
	title = flavor_seghdihr.10.t
	desc = flavor_seghdihr.10.d
	picture = FORT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.10.a
		add_country_modifier = { name = seghdihr_defiance_morale duration = -1 }
		ai_chance = { factor = 5 }
	}
	option = {
		name = flavor_seghdihr.10.b
		add_country_modifier = { name = seghdihr_defiance_generals duration = -1 }
		ai_chance = { factor = 5 }
	}
	option = {
		name = flavor_seghdihr.10.c
		add_country_modifier = { name = seghdihr_defiance_defence duration = -1 }
		ai_chance = { factor = 5 }
	}
}

#syndicates
country_event = {
	id = flavor_seghdihr.11
	title = flavor_seghdihr.11.t
	desc = flavor_seghdihr.11.d
	picture = FORT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.11.a
		#hold trade goods
		if = {
			limit = {
				4247 = {
					OR = {
						trade_goods = wine
						trade_goods = serpentbloom
						trade_goods = livestock
						trade_goods = fungi
						trade_goods = salt
					}
				}
			}
			4247 = {
				random_list = {
					20 = { change_trade_goods = copper }
					20 = { change_trade_goods = cloth }
					20 = { change_trade_goods = iron }
					20 = { change_trade_goods = glass }
					20 = { change_trade_goods = paper }
				}
			}
		}
		if = {
			limit = {
				4265 = {
					OR = {
						trade_goods = wine
						trade_goods = serpentbloom
						trade_goods = livestock
						trade_goods = fungi
						trade_goods = salt
					}
				}
			}
			4265 = {
				random_list = {
					20 = { change_trade_goods = copper }
					20 = { change_trade_goods = cloth }
					20 = { change_trade_goods = iron }
					20 = { change_trade_goods = glass }
					20 = { change_trade_goods = paper }
				}
			}
		}
		#syndicate vassals
		create_subject = {
			subject_type = seghdihr_syndicate
			subject = H79 
		}
		create_subject = {
			subject_type = seghdihr_syndicate
			subject = I18 
		}
		#split the land
		custom_tooltip = flavor_seghdihr.11.tooltip
		hidden_effect = {
			tree_of_stone_region = {
				#kanzad
				if = {
					limit = { 
						NOT = { owned_by = H79 }
						OR = {
							area = dwarovrod_45_48_area
							area = kanzad_area
							area = anduz_area
							province_id = 4267 #mit
							province_id = 4282 #cannonpass
							province_id = 4249 #dwarovrod50
						}
					}
					remove_core = owner
					add_core = H79
					cede_province = H79
				}
				#grozumdihr
				else_if = {
					limit = {
						NOT = { owned_by = I18 }
						OR = {
							area = earthseed_area
							area = grozumdihr_area
							province_id = 4271 #ambermine
							province_id = 4270 #hordesbreach
							province_id = 4251 #grozumrod1
						}
					}
					remove_core = owner
					add_core = I18
					cede_province = I18
				}
			}
			##change cultures
			H79 = {
				change_primary_culture = amber_dwarf
				set_ruler_culture = amber_dwarf
				change_religion = ancestor_worship
				set_ruler_religion = ancestor_worship
				every_owned_province = {
					limit = { culture_group = dwarven }
					change_culture = amber_dwarf
				}
			}
			I18 = {
				change_primary_culture = peridot_dwarf
				set_ruler_culture = peridot_dwarf
				change_religion = ancestor_worship
				set_ruler_religion = ancestor_worship
				every_owned_province = {
					limit = { culture_group = dwarven }
					change_culture = peridot_dwarf
				}
			}
		}
		#upgrade modifier
		if = {
			limit = { has_country_modifier = seghdihr_limit_flow_2a }
			remove_country_modifier = seghdihr_limit_flow_2a
			add_country_modifier = { name = seghdihr_limit_flow_3a duration = -1 }
		}
		else_if = {
			limit = { has_country_modifier = seghdihr_limit_flow_2b }
			remove_country_modifier = seghdihr_limit_flow_2b
			add_country_modifier = { name = seghdihr_limit_flow_3b duration = -1 }
		}
		else = {
			remove_country_modifier = seghdihr_limit_flow_2c
			add_country_modifier = { name = seghdihr_limit_flow_3c duration = -1 }
		}
		#give claims
		ovdal_az_an_area = { add_permanent_claim = ROOT }
		the_kariats_area = { add_permanent_claim = ROOT }
		ibran_pass_area = { add_permanent_claim = ROOT }
		#missions
		set_country_flag = seghdihr_part3
		swap_non_generic_missions = yes
		ai_chance = { factor = 5 }
	}
}

#integrating soldiers
country_event = {
	id = flavor_seghdihr.12
	title = flavor_seghdihr.12.t
	desc = flavor_seghdihr.12.d
	picture = FORT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	immediate = {
		hidden_effect = { add_country_modifier = { name = seghdihr_integrate_soldiers duration = 1825 } }
	}

	option = {
		name = flavor_seghdihr.12.a
		tooltip = { add_country_modifier = { name = seghdihr_integrate_soldiers duration = 1825 } }
		ai_chance = { factor = 5 }
	}
}

#kings many
country_event = {
	id = flavor_seghdihr.13
	title = flavor_seghdihr.13.t
	desc = flavor_seghdihr.13.d
	picture = FORT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	
	option = {
		name = flavor_seghdihr.13.a
		set_dynasty = "az-hargûn"
		add_government_reform = seghdihr_segamlavad
		2914 = { set_seat_in_parliament = yes }
		4078 = { set_seat_in_parliament = yes }
		4218 = { set_seat_in_parliament = yes }
		4217 = { set_seat_in_parliament = yes }
		ai_chance = { factor = 5 }
	}
}

#way of preparation-vazumbrog
country_event = {
	id = flavor_seghdihr.14
	title = flavor_seghdihr.14.t
	desc = flavor_seghdihr.14.d
	picture = FORT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.14.a
		add_country_modifier = { name = seghdihr_preparation_decay duration = -1 }
		ai_chance = { factor = 5 }
	}
	option = {
		name = flavor_seghdihr.14.b
		add_country_modifier = { name = seghdihr_preparation_speed duration = -1 }
		ai_chance = { factor = 5 }
	}
	option = {
		name = flavor_seghdihr.14.c
		add_country_modifier = { name = seghdihr_preparation_reinforce duration = -1 }
		ai_chance = { factor = 5 }
	}
}

#way of tenacity-hehodovar
country_event = {
	id = flavor_seghdihr.15
	title = flavor_seghdihr.15.t
	desc = flavor_seghdihr.15.d
	picture = FORT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.15.a
		add_country_modifier = { name = seghdihr_tenacity_attrition duration = -1 }
		ai_chance = { factor = 5 }
	}
	option = {
		name = flavor_seghdihr.15.b
		add_country_modifier = { name = seghdihr_tenacity_fire duration = -1 }
		ai_chance = { factor = 5 }
	}
	option = {
		name = flavor_seghdihr.15.c
		add_country_modifier = { name = seghdihr_tenacity_shock duration = -1 }
		ai_chance = { factor = 5 }
	}
}

#capital of segbandal
country_event = {
	id = flavor_seghdihr.16
	title = flavor_seghdihr.16.t
	desc = flavor_seghdihr.16.d
	picture = FORT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.16.a
		add_stability_or_adm_power = yes
		add_country_modifier = { name = seghdihr_advisors duration = 7300 }
		ai_chance = { factor = 5 }
	}
}

#create sgc
country_event = {
	id = flavor_seghdihr.17
	title = flavor_seghdihr.17.t
	desc = flavor_seghdihr.17.d
	picture = FORT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_seghdihr.17.a
		change_estate_land_share = { estate = estate_burghers share = 10 }
		custom_tooltip = flavor_seghdihr.17_tooltip
		set_country_flag = sgc_created
		ai_chance = { factor = 5 }
	}
}











######Goblin Incursions######
country_event = {
	id = flavor_seghdihr.50
	title = seghdihr_hidden_loc
	desc = seghdihr_hidden_loc
	picture = FORT_eventPicture
	
	#hidden = yes
	#is_triggered_only = yes
	
	trigger = {
		tag = H78
		has_country_flag = seghdihr_incursions_active
	}

	#needs another review
	mean_time_to_happen = {
		years = 10
		modifier = {
			factor = 0.9
			check_variable = { which = incursion_total value = 1100 }
		}
		modifier = {
			factor = 0.9
			check_variable = { which = incursion_total value = 1200 }
		}
		modifier = {
			factor = 0.9
			check_variable = { which = incursion_total value = 1300 }
		}
		modifier = {
			factor = 0.9
			check_variable = { which = incursion_total value = 1400 }
		}
		modifier = {
			factor = 0.8
			check_variable = { which = incursion_total value = 1500 }
		}
		modifier = {
			factor = 0.9
			check_variable = { which = incursion_total value = 1600 }
		}
		modifier = {
			factor = 0.9
			check_variable = { which = incursion_total value = 1700 }
		}
		modifier = {
			factor = 0.9
			check_variable = { which = incursion_total value = 1800 }
		}
		modifier = {
			factor = 0.9
			check_variable = { which = incursion_total value = 1900 }
		}
		modifier = {
			factor = 0.8
			check_variable = { which = incursion_total value = 2000 }
		}
		modifier = {
			factor = 0.8
			check_variable = { which = incursion_total value = 2100 }
		}
		modifier = {
			factor = 0.8
			check_variable = { which = incursion_total value = 2200 }
		}
		modifier = {
			factor = 0.8
			check_variable = { which = incursion_total value = 2300 }
		}
		modifier = {
			factor = 0.8
			check_variable = { which = incursion_total value = 2400 }
		}
		modifier = {
			factor = 0.7
			check_variable = { which = incursion_total value = 2500 }
		}
	}

	immediate = { seghdihr_calculate_incursion_strength = yes }

	option = {
		name = seghdihr_hidden_loc
		random_list = {
			#no incursion
			50 = {
				if = {
					limit = { NOT = { check_variable = { which = incursion_gathering_strength value = 1000 } } }
					change_variable = { which = incursion_gathering_strength value = 100 }
				}
			}
			#incursion
			50 = {
				modifier = {
					factor = 1.1
					check_variable = { which = incursion_gathering_strength value = 200 }
				}
				modifier = {
					factor = 1.1
					check_variable = { which = incursion_gathering_strength value = 400 }
				}
				modifier = {
					factor = 1.2
					check_variable = { which = incursion_gathering_strength value = 600 }
				}
				modifier = {
					factor = 1.2
					check_variable = { which = incursion_gathering_strength value = 800 }
				}
				modifier = {
					factor = 1.5
					check_variable = { which = incursion_gathering_strength value = 1000 }
				}
				#choose event
				random_list = {
					#scouting party
					25 = {
						modifier = {
							factor = 1.5
							NOT = { check_variable = { which = incursion_gathering_strength value = 400 } }
						}
						country_event = { id = flavor_seghdihr.51 }
					}
					#supply raid
					25 = {
						trigger = { check_variable = { which = incursion_total value = 500 } }
						modifier = {
							factor = 1.5
							NOT = { check_variable = { which = incursion_gathering_strength value = 600 } }
						}
						country_event = { id = flavor_seghdihr.52 }
					}
					#destruction
					20 = {
						trigger = { check_variable = { which = incursion_total value = 1000 } }
						modifier = {
							factor = 0.75
							check_variable = { which = incursion_gathering_strength value = 500 }
						}
						country_event = { id = flavor_seghdihr.53 }
					}
					#small attack
					30 = {
						trigger = { 
							check_variable = { which = incursion_total value = 1500 }
							check_variable = { which = incursion_gathering_strength value = 300 }
							num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
								value = 4
								region = tree_of_stone_region
							}
						}
						modifier = { #so they launch full invasion at max
							factor = 0.5
							check_variable = { which = incursion_gathering_strength value = 1000 }
						}
						country_event = { id = flavor_seghdihr.54 }
					}
					#invasion
					40 = {
						trigger = { 
							check_variable = { which = incursion_total value = 2000 } 
							check_variable = { which = incursion_gathering_strength value = 600 }
							num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
								value = 8
								region = tree_of_stone_region
							}
						}
						modifier = {
							factor = 2
							check_variable = { which = incursion_gathering_strength value = 1000 }
						}
						country_event = { id = flavor_seghdihr.55 }
					}
				}
			}
		}
		ai_chance = { factor = 5 }
	}
}




#scouting party
country_event = {
	id = flavor_seghdihr.51
	title = flavor_seghdihr.51.t
	desc = flavor_seghdihr.51.d
	picture = FORT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	immediate = {
		hidden_effect = {
			if = {
				limit = { tree_of_stone_region = { country_or_subject_holds = ROOT } }
				random_province = {
					limit = {
						region = tree_of_stone_region
						country_or_subject_holds = ROOT
						is_city = yes
						NOT = { devastation = 80 }
						NOT = { has_province_modifier = seghdihr_incursion_fear }
						#so it neighbors at least 2
						calc_true_if = {
							amount = 2
							all_neighbor_province = { 
								is_city = yes
								country_or_subject_holds = ROOT
								development = 3 
							}
						}
					}
					save_event_target_as = incursion_target
				}
			}
		}
	}
	goto = incursion_target

	option = {
		name = flavor_seghdihr.51.a
		if = {
			limit = { has_saved_event_target = incursion_target }
			event_target:incursion_target = {
				add_devastation = 10
				add_province_modifier = { name = seghdihr_incursion_fear duration = 3650 }
				every_neighbor_province = {
					limit = { 
						country_or_subject_holds = ROOT
						is_city = yes 
					}
					add_devastation = 5
					add_province_modifier = { name = seghdihr_incursion_fear duration = 1825 }
				}
			}
		}
		else = {
			ozumbrog_area = {
				add_devastation = 10
				add_province_modifier = { name = seghdihr_incursion_fear duration = 3650 }
			}
		}
		custom_tooltip = seghdihr_incursion_strength_gathered
		hidden_effect = {
			change_variable = { which = incursion_gathering_strength value = 200 } 
			if = {
				limit = { check_variable = { which = incursion_gathering_strength value = 1100 } }
				set_variable = { which = incursion_gathering_strength value = 1000 }
			}
			seghdihr_calculate_incursion_strength = yes
		}
		ai_chance = { factor = 5 }
	}
}
#supply raid
country_event = {
	id = flavor_seghdihr.52
	title = flavor_seghdihr.52.t
	desc = flavor_seghdihr.52.d
	picture = FORT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	immediate = {
		hidden_effect = {
			if = {
				limit = { tree_of_stone_region = { country_or_subject_holds = ROOT } }
				random_province = {
					limit = {
						region = tree_of_stone_region
						country_or_subject_holds = ROOT
						is_city = yes
						NOT = { devastation = 80 }
						NOT = { has_province_modifier = seghdihr_incursion_supplies_raided }
						#so it neighbors at least 2
						calc_true_if = {
							amount = 2
							all_neighbor_province = { 
								is_city = yes
								development = 3
								country_or_subject_holds = ROOT
							}
						}
					}
					save_event_target_as = incursion_target
				}
			}
		}
	}
	goto = incursion_target


	option = {
		name = flavor_seghdihr.52.a
		if = {
			limit = { has_saved_event_target = incursion_target }
			event_target:incursion_target = {
				random = { chance = 50 add_base_production = -1 }
				add_devastation = 20
				add_province_modifier = { name = seghdihr_incursion_supplies_raided duration = 3650 }
				every_neighbor_province = {
					limit = { 
						is_city = yes
						country_or_subject_holds = ROOT
					}
					random = { chance = 50 add_base_production = -1 }
					add_devastation = 10
					add_province_modifier = { name = seghdihr_incursion_supplies_raided duration = 1825 }
				}
			}
		}
		else = {
			ozumbrog_area = {
				add_base_production = -2
				add_devastation = 20
				add_province_modifier = { name = seghdihr_incursion_supplies_raided duration = 3650 }
			}
		}
		custom_tooltip = seghdihr_incursion_strength_gathered
		hidden_effect = {
			change_variable = { which = incursion_gathering_strength value = 300 } 
			if = {
				limit = { check_variable = { which = incursion_gathering_strength value = 1100 } }
				set_variable = { which = incursion_gathering_strength value = 1000 }
			}
			seghdihr_calculate_incursion_strength = yes
		}
		ai_chance = { factor = 5 }
	}
}

#destruction
country_event = {
	id = flavor_seghdihr.53
	title = flavor_seghdihr.53.t
	desc = flavor_seghdihr.53.d
	picture = FORT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	immediate = {
		hidden_effect = {
			if = {
				limit = { tree_of_stone_region = { country_or_subject_holds = ROOT } }
				random_province = {
					limit = {
						region = tree_of_stone_region
						country_or_subject_holds = ROOT
						is_city = yes
						development = 5
						NOT = { devastation = 60 }
						NOT = { has_province_modifier = seghdihr_incursion_raided_province }
						#so it neighbors at least 2
						calc_true_if = {
							amount = 2
							all_neighbor_province = { 
								is_city = yes
								country_or_subject_holds = ROOT
								development = 5 
							}
						}
					}
					save_event_target_as = incursion_target
				}
			}
		}
	}
	goto = incursion_target


	option = {
		name = flavor_seghdihr.53.a
		if = {
			limit = { has_saved_event_target = incursion_target }
			event_target:incursion_target = {
				if = {
					limit = { base_tax = 2 }
					add_base_tax = -1
				}
				else = { ROOT = { add_adm_power = -25 } }
				if = {
					limit = { base_production = 2 }
					add_base_production = -1
				}
				else = { ROOT = { add_dip_power = -25 } }
				if = {
					limit = { base_manpower = 2 }
					add_base_manpower = -1
				}
				else = { ROOT = { add_mil_power = -25 } }
				add_devastation = 30
				add_province_modifier = { name = seghdihr_incursion_raided_province duration = 3650 }
				every_neighbor_province = {
					limit = { 
						is_city = yes
						country_or_subject_holds = ROOT
						development = 5 
					}
					if = {
						limit = { base_tax = 2 }
						add_base_tax = -1
					}
					else = { ROOT = { add_adm_power = -25 } }
					if = {
						limit = { base_production = 2 }
						add_base_production = -1
					}
					else = { ROOT = { add_dip_power = -25 } }
					if = {
						limit = { base_manpower = 2 }
						add_base_manpower = -1
					}
					else = { ROOT = { add_mil_power = -25 } }
					add_devastation = 20
					add_province_modifier = { name = seghdihr_incursion_raided_province duration = 3650 }
				}
			}
		}
		else = {
			ozumbrog_area = {
				if = {
					limit = { base_tax = 4 }
					add_base_tax = -3
				}
				else = { ROOT = { add_adm_power = -100 } }
				if = {
					limit = { base_production = 4 }
					add_base_production = -3
				}
				else = { ROOT = { add_dip_power = -100 } }
				if = {
					limit = { base_manpower = 4 }
					add_base_manpower = -3
				}
				else = { ROOT = { add_mil_power = -100 } }
				add_devastation = 30
				add_province_modifier = { name = seghdihr_incursion_raided_province duration = 3650 }
			}
		}
		custom_tooltip = seghdihr_incursion_strength_gone
		hidden_effect = {
			set_variable = { which = incursion_gathering_strength value = 0 }
			seghdihr_calculate_incursion_strength = yes
		}
		ai_chance = { factor = 5 }
	}
}
#small attack
country_event = {
	id = flavor_seghdihr.54
	title = flavor_seghdihr.54.t
	desc = flavor_seghdihr.54.d
	picture = FORT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	immediate = {
		hidden_effect = {
			if = {
				limit = { tree_of_stone_region = { country_or_subject_holds = ROOT } }
				random_province = {
					limit = {
						region = tree_of_stone_region
						country_or_subject_holds = ROOT
						is_city = yes
						#so it neighbors at least 2
						calc_true_if = {
							amount = 2
							all_neighbor_province = {
								is_city = yes
								country_or_subject_holds = ROOT
							}
						}
					}
					save_event_target_as = incursion_target
				}
			}
		}
	}

	option = {
		name = flavor_seghdihr.54.a
		if = {
			limit = { has_saved_event_target = incursion_target }
			event_target:incursion_target = {
				add_devastation = 40
				seghdihr_spawn_incursion_main_goblins = yes
				every_neighbor_province = {
					limit = {
						is_city = yes
						country_or_subject_holds = ROOT
					}
					add_devastation = 30
					seghdihr_spawn_incursion_small_goblins = yes
				}
			}
		}
		else = {
			ozumbrog_area = {
				add_devastation = 40
				seghdihr_spawn_incursion_main_goblins = yes
			}
		}

		custom_tooltip = seghdihr_incursion_strength_gone
		hidden_effect = {
			set_variable = { which = incursion_gathering_strength value = 0 }
			seghdihr_calculate_incursion_strength = yes
		}
		ai_chance = { factor = 5 }
	}
}
#invasion
country_event = {
	id = flavor_seghdihr.55
	title = flavor_seghdihr.55.t
	desc = flavor_seghdihr.55.d
	picture = FORT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	immediate = {
		hidden_effect = {
			if = {
				limit = { tree_of_stone_region = { country_or_subject_holds = ROOT } }
				random_province = {
					limit = {
						region = tree_of_stone_region
						country_or_subject_holds = ROOT
						is_city = yes
						#so it neighbors at least 2
						calc_true_if = {
							amount = 2
							all_neighbor_province = {
								is_city = yes
								country_or_subject_holds = ROOT
							}
						}
					}
					save_event_target_as = incursion_target
				}
			}
		}
	}


	option = {
		name = flavor_seghdihr.55.a
		if = {
			limit = { has_saved_event_target = incursion_target }
			event_target:incursion_target = {
				add_devastation = 60
				seghdihr_spawn_incursion_main_goblins = yes
				every_neighbor_province = {
					limit = {
						is_city = yes
						country_or_subject_holds = ROOT
					}
					add_devastation = 40
					seghdihr_spawn_incursion_main_goblins = yes
					random_neighbor_province = {
						limit = { 
							is_city = yes
							country_or_subject_holds = ROOT
							NOT = { province_id = PREV }
						}
						add_devastation = 20
						seghdihr_spawn_incursion_small_goblins = yes
					}
				}
			}
		}
		custom_tooltip = seghdihr_incursion_strength_gone
		hidden_effect = {
			set_variable = { which = incursion_gathering_strength value = 0 }
			seghdihr_calculate_incursion_strength = yes
		}
		ai_chance = { factor = 5 }
	}
}

















































######SGC Events#######
#only rename done for now
#no flag for highway
#sgc_rahen_partial - generic west gulf + rakh
#sgc_rahen - west gulf + rakh + mid rahen
#patrols should give devastation reduction
##main menu
country_event = {
	id = flavor_seghdihr.100
	title = flavor_seghdihr.100.t
	desc = flavor_seghdihr.100.d
	picture = FORT_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		tag = H78
		has_country_flag = seghdihr_incursions_active
	}


	#immediate = {
	#}



	option = {
		name = flavor_seghdihr.100.a
		
		ai_chance = { factor = 5 }
	}
}