
namespace = flavor_krakazol
#1-99 Missions
#100-199 Slaying
#200-249 Maintenance/Elections
#300+ Drinking system


################
####Missions####
################
#ask for truce with command?
country_event = {
	id = flavor_krakazol.1
	title = flavor_krakazol.1.t
	desc = flavor_krakazol.1.d
	picture = KINGS_CHOICE_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	#yes
	option = { 
		name = flavor_krakazol.1.a	
		ai_chance = { factor = 100 }
		random_owned_province = {
			limit = {
				OR = {
					trade_goods = fungi
					trade_goods = serpentbloom
				}
			}
			add_base_production = -1
		}
		random_owned_province = {
			limit = {
				OR = {
					trade_goods = fungi
					trade_goods = serpentbloom
				}
			}
			add_base_production = -1
		}
		random_owned_province = {
			limit = {
				OR = {
					trade_goods = fungi
					trade_goods = serpentbloom
				}
			}
			add_base_production = -1
		}
		R62 = { country_event = { id = flavor_krakazol.2 days = 3 } }
	}

	#no
	option = { 
		name = flavor_krakazol.1.b
		ai_chance = { factor = 5 }
		add_prestige = 15
		add_power_projection = { type = mission_rewards_power_projection amount = 20 }
	}
}

#command says yes or no
country_event = {
	id = flavor_krakazol.2
	title = flavor_krakazol.2.t
	desc = flavor_krakazol.2.d
	picture = DIPLOMACY_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	#yes
	option = { 
		name = flavor_krakazol.2.a	
		ai_chance = { factor = 100 }
		add_truce_with = I20
		add_stability_or_adm_power = yes
		add_prestige = 10
	}

	#no
	option = { 
		name = flavor_krakazol.2.b
		ai_chance = { factor = 0 }
	}
}

#dwarf keeper of stramolgiv
country_event = {
	id = flavor_krakazol.3
	title = flavor_krakazol.3.t
	desc = flavor_krakazol.3.d
	picture = ADVISOR_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = { 
		name = flavor_krakazol.3.a	
		ai_chance = { factor = 5 }
		hovezan_pass_area = { discover_country = ROOT }
		add_prestige = 5
	}
}

#stramolgiv found
country_event = {
	id = flavor_krakazol.4
	title = flavor_krakazol.4.t
	desc = flavor_krakazol.4.d
	picture = EKLUZAGNU_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_krakazol.4.a
		ai_chance = { factor = 5 }
		4289 = {
			spawn_expedition = yes
			set_province_flag = krakazol_1st_exp
		}
		custom_tooltip = flavor_krakazol.4.tooltip
	}
}

#balls of steel
country_event = {
	id = flavor_krakazol.5
	title = flavor_krakazol.5.t
	desc = flavor_krakazol.5.d
	picture = KING_DOING_GREAT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = { 
		name = flavor_krakazol.5.a
		ai_chance = { factor = 5 }
		4284 = { add_permanent_province_modifier = { name = krakazol_drinking_iron_base duration = -1 } }
		add_ruler_modifier = { name = krakazol_drinking_tipsy duration = 365 }
		add_ruler_modifier = { name = krakazol_drinking_iron_5 duration = 1825 }
	}
}

#end of interregnum
country_event = {
	id = flavor_krakazol.6
	title = flavor_krakazol.6.t
	desc = flavor_krakazol.6.d
	picture = COURT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = { 
		name = flavor_krakazol.6.a	
		ai_chance = { factor = 5 }
		define_ruler = {
			name = "Gorick"
			dynasty = "Irongut"
			adm = 4
			dip = 3
			mil = 5
			age = 90
			culture = amethyst_dwarf
			religion = ROOT
		}
		hidden_effect = {
			add_ruler_personality = immortal_personality
			add_ruler_personality = bold_fighter_personality
			remove_country_modifier = krakazol_regency_no_heir
		}
		add_stability_or_adm_power = yes
	}
}

#new methods
country_event = {
	id = flavor_krakazol.7
	title = flavor_krakazol.7.t
	desc = flavor_krakazol.7.d
	picture = ENLIGHTENMENT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = { 
		name = flavor_krakazol.7.a	
		ai_chance = { factor = 5 }
		add_adm_power = 25
		add_dip_power = 25
		add_mil_power = 25
		add_prestige = 10
		4289 = { 
			spawn_expedition = yes
			set_province_flag = krakazol_2nd_exp
		}
	}
}

#darkness my friend
country_event = {
	id = flavor_krakazol.8
	title = flavor_krakazol.8.t
	desc = flavor_krakazol.8.d
	picture = KING_DOING_GREAT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_krakazol.8.a	
		ai_chance = { factor = 5 }
		4266 = { add_permanent_province_modifier = { name = krakazol_drinking_fungibloom_base duration = -1 } }
		add_ruler_modifier = { name = krakazol_drinking_tipsy duration = 365 }
		add_ruler_modifier = { name = krakazol_drinking_dark_5 duration = 1825 }
	}
}

#double blow
country_event = {
	id = flavor_krakazol.9
	title = flavor_krakazol.9.t
	desc = flavor_krakazol.9.d
	picture = WOUNDED_SOLDIERS_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	immediate = {
		hidden_effect = { 
			white_peace = R62 
			if = {
				limit = {
					R66 = {
						war_with = ROOT
						is_subject = no
					}
				}
				white_peace = R66
			}
			if = {
				limit = {
					R81 = {
						war_with = ROOT
						is_subject = no
					}
				}
				white_peace = R81
			}
		}
	}

	option = {
		name = flavor_krakazol.9.a	
		ai_chance = { factor = 5 }
		if = {
			limit = { exists = R62 }
			R62 = { kill_ruler = yes }
		}
		if = {
			limit = { exists = R66 }
			R66 = { kill_ruler = yes }
		}
		else_if = {
			limit = { exists = R81 }
			R81 = { kill_ruler = yes }
		}
		dwarovrod_66_68_area = { 
			limit = { NOT = { owned_by = ROOT } }
			cede_province = ROOT 
		}
		if = {
			limit = { 4305 = { NOT = { owned_by = ROOT } } }
			4305 = { cede_province = ROOT }
		}
		if = {
			limit = { 4350 = { NOT = { owned_by = ROOT } } }
			4350 = { cede_province = ROOT }
		}
		if = {
			limit = { 
				tree_of_stone_region = { has_terrain = dwarven_road country_or_subject_holds = R62 }
			} 
			hidden_effect = {
				tree_of_stone_region = {
					limit = { has_terrain = dwarven_road country_or_subject_holds = R62 }
					cede_province = ROOT
				}
			}
		}
		tooltip = { white_peace = R62 }
		tooltip = { kill_ruler = yes }
		kill_heir = { allow_new_heir = no }
		define_ruler = {
			name = "Interregnum"
			adm = 0
			dip = 0
			mil = 0
			regency = yes
		}
		set_country_flag = krakazol_partsuccession
		hidden_effect = { add_country_modifier = { name = krakazol_regency_no_heir duration = -1 hidden = yes } }
		set_ruler_flag = krakazol_regency
		swap_non_generic_missions = yes
	}
}

#cotton candy
country_event = {
	id = flavor_krakazol.10
	title = flavor_krakazol.10.t
	desc = flavor_krakazol.10.d
	picture = KING_DOING_GREAT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_krakazol.10.a	
		ai_chance = { factor = 5 }
		4462 = { 
			add_permanent_province_modifier = { name = krakazol_drinking_cottoncloth_base duration = -1 } 
			add_building_construction = { building = plantations speed = 1 cost = 0 }
		}
		add_ruler_modifier = { name = krakazol_drinking_tipsy duration = 365 }
		add_ruler_modifier = { name = krakazol_drinking_beard_5 duration = 1825 }
	}
}

#buying kepakkazol-for owner
country_event = {
	id = flavor_krakazol.11
	title = flavor_krakazol.11.t
	desc = flavor_krakazol.11.d
	picture = DIPLOMACY_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_krakazol.11.a	
		ai_chance = { factor = 5 }
		add_treasury = 300
		add_prestige = 10
		4462 = {
			remove_core = ROOT
			cede_province = I20 
			add_core_construction = { speed = 0.75 cost = 0 }
		}
	}

	#no
	option = {
		name = flavor_krakazol.11.b
		ai_chance = { factor = 0 }
		add_prestige = 20
		reverse_add_opinion = { who = I20 modifier = opinion_angry }
	}
}

#contacting lazylarch
country_event = {
	id = flavor_krakazol.12
	title = flavor_krakazol.12.t
	desc = flavor_krakazol.12.d
	picture = NOBLE_ESTATE_DEMANDS_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_krakazol.12.a	
		ai_chance = { factor = 5 }
		grozumdihr_area = { 
			discover_country = ROOT
			add_permanent_claim = ROOT 
		}
	}
}

#oath fulfilled
country_event = {
	id = flavor_krakazol.13
	title = flavor_krakazol.13.t
	desc = flavor_krakazol.13.d
	picture = RELIGIOUS_MIGRANTS_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_krakazol.13.a	
		ai_chance = { factor = 5 }
		4265 = { 
			change_culture = peridot_dwarf
			change_religion = ROOT
			add_base_tax = 1
			add_base_production = 1
			add_base_manpower = 1
			if = {
				limit = { has_province_modifier = expulsion_unrest_modifier }
				remove_province_modifier = expulsion_unrest_modifier
			}
			
			if = {
				limit = { has_province_modifier = purge_unrest_modifier }
				remove_province_modifier = purge_unrest_modifier
			}
		}
		country_event = { id = flavor_krakazol.14 days = 1825 }
	}
}

#more peridots
country_event = {
	id = flavor_krakazol.14
	title = flavor_krakazol.14.t
	desc = flavor_krakazol.14.d
	picture = REFUGEES_ESCAPING_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_krakazol.14.a	
		ai_chance = { factor = 5 }
		4265 = { 
			add_base_tax = 1
			add_base_production = 1
			add_base_manpower = 1
		}
		if = {
			limit = { NOT = { has_country_flag = krakazol_peridot_migration_over } }
			set_country_flag = krakazol_peridot_migration_over
			country_event = { id = flavor_krakazol.14 days = 1825 }
		}
	}
}

#gold malt
country_event = {
	id = flavor_krakazol.15
	title = flavor_krakazol.15.t
	desc = flavor_krakazol.15.d
	picture = KING_DOING_GREAT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_krakazol.15.a	
		ai_chance = { factor = 5 }
		4269 = { add_permanent_province_modifier = { name = krakazol_drinking_gold_base duration = -1 } }
		custom_tooltip = flavor_krakazol_unlock_gold
		add_ruler_modifier = { name = krakazol_drinking_yellow_5 duration = 1825 }
	}
}

#alethrone
country_event = {
	id = flavor_krakazol.16
	title = flavor_krakazol.16.t
	desc = flavor_krakazol.16.d
	picture = DIET_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_krakazol.16.a	
		ai_chance = { factor = 5 }
		add_country_modifier = { name = krakazol_keglord_alethrone duration = -1 }
		custom_tooltip = flavor_krakazol.16.tooltip
	}
}

#valkumol
country_event = {
	id = flavor_krakazol.17
	title = flavor_krakazol.17.t
	desc = flavor_krakazol.17.d
	picture = FEAST_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_krakazol.17.a	
		ai_chance = { factor = 5 }
		add_government_reform = krakazol_olzonog
		custom_tooltip = flavor_krakazol.17.tooltip
		hidden_effect = { add_country_modifier = { name = krakazol_first_election_fix duration = 150 hidden = yes } }
	}
}

#parry this
country_event = {
	id = flavor_krakazol.18
	title = flavor_krakazol.18.t
	desc = flavor_krakazol.18.d
	picture = SIEGE_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_krakazol.18.a	
		ai_chance = { factor = 5 }
		4247 = {
			if = {
				limit = { trade_goods = copper }
				add_base_production = 3
			}
			else = { change_trade_goods = copper }
		}
		add_country_modifier = { name = krakazol_thunder_kegs duration = -1 }
	}
}

#glass ale
country_event = {
	id = flavor_krakazol.19
	title = flavor_krakazol.19.t
	desc = flavor_krakazol.19.d
	picture = KING_DOING_GREAT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_krakazol.19.a	
		ai_chance = { factor = 5 }
		4265 = { add_permanent_province_modifier = { name = krakazol_drinking_glass_base duration = -1 } }
		custom_tooltip = flavor_krakazol_unlock_glass
		add_ruler_modifier = { name = krakazol_drinking_shattered_5 duration = 1825 }
	}
}

#slayers organized
country_event = {
	id = flavor_krakazol.20
	title = flavor_krakazol.20.t
	desc = flavor_krakazol.20.d
	picture = SCOTTISH_MERCENARIES_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_krakazol.20.a	
		ai_chance = { factor = 5 }
		set_estate_privilege = estate_adventurers_organization_slayers
	}
}

#diggers delight unlock
country_event = {
	id = flavor_krakazol.21
	title = flavor_krakazol.21.t
	desc = flavor_krakazol.21.d
	picture = KING_DOING_GREAT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_krakazol.21.a	
		ai_chance = { factor = 5 }
		random_owned_province = {
			limit = {
				trade_goods = mithril
				base_production = 6
				has_manufactory_trigger = yes
			}
			add_permanent_province_modifier = { name = krakazol_drinking_mithril_base duration = -1 }
		}
		custom_tooltip = flavor_krakazol_unlock_digging
		add_ruler_modifier = { name = krakazol_drinking_digging_5 duration = 1825 }
	}
}

#spice drink unlock
country_event = {
	id = flavor_krakazol.22
	title = flavor_krakazol.22.t
	desc = flavor_krakazol.22.d
	picture = KING_DOING_GREAT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_krakazol.22.a	
		ai_chance = { factor = 5 }
		4548 = { change_trade_goods = spices }
		4445 = { change_trade_goods = spices }
		4446 = {
			change_trade_goods = spices
			add_permanent_province_modifier = { name = krakazol_drinking_spices_base duration = -1 }
		}
		custom_tooltip = flavor_krakazol_unlock_spice
		add_ruler_modifier = { name = krakazol_drinking_heart_5 duration = 1825 }
	}
}

#emerald drink unlock
country_event = {
	id = flavor_krakazol.23
	title = flavor_krakazol.23.t
	desc = flavor_krakazol.23.d
	picture = KING_DOING_GREAT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_krakazol.23.a	
		ai_chance = { factor = 5 }
		4350 = { add_permanent_province_modifier = { name = krakazol_drinking_gems_base duration = -1 } }
		custom_tooltip = flavor_krakazol_unlock_gems
		add_ruler_modifier = { name = krakazol_drinking_gizzard_5 duration = 1825 }
	}
}


#other tags getting offer to sell the land or get unrest
province_event = {
	id = flavor_krakazol.24
	title = flavor_krakazol.24.t
	desc = flavor_krakazol.24.d
	picture = DIPLOMACY_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	#yes
	option = {
		name = flavor_krakazol.24.a
		owner = {
			add_treasury = 500
			add_adm_power = 25
			add_dip_power = 25
			add_mil_power = 25
		}
		remove_core = owner
		cede_province = I20
		ai_chance = { 
			factor = 70
			modifier = {
				factor = 0
				OR = {
					owner = { is_rival = I20 }
					owner = { is_subject = yes overlord = { is_rival = I20 } }
				}
			}
			modifier = {
				factor = 0
				owner = { ROOT = { is_capital_of = PREV } }
			}
			modifier = {
				factor = 0.75
				owner = { has_country_modifier = monstrous_nation }
			}
			modifier = {
				factor = 0.75
				owner = { is_subject = yes }
			}
			modifier = {
				factor = 2
				owner = { historical_friend_with = I20 }
			}
			modifier = {
				factor = 2
				owner = { alliance_with = I20 }
			}
			modifier = {
				factor = 2
				owner = { 
					is_subject = yes
					overlord = { alliance_with = I20 }
				}
			}
			modifier = {
				factor = 2
				owner = { num_of_cities = 15 } #big so doesn't care
			}
			modifier = {
				factor = 2
				owner = { NOT = { military_strength = { who = I20 value = 1 } } } #too weak
			}
		}
	}

	#no
	option = {
		name = flavor_krakazol.24.b
		add_unrest = 10
		add_local_autonomy = 25
		add_permanent_claim = I20
		ai_chance = { 
			factor = 30 
			modifier = {
				factor = 0
				owner = { historical_friend_with = I20 }
			}
		}
		
	}
}

#did you seriously ask for the temples bro
country_event = {
	id = flavor_krakazol.25
	title = flavor_krakazol.25.t
	desc = flavor_krakazol.25.d
	picture = TIGER_BODYGUARD_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_krakazol.25.a	
		ai_chance = { factor = 5 }
		add_treasury = 3000
		add_prestige = -15
		if = {
			limit = { NOT = { owns = 4465 } }
			4465 = {
				owner = { add_opinion = { who = ROOT modifier = insulted } }
				add_permanent_claim = ROOT
			}
		}
		if = {
			limit = { NOT = { owns = 4450 } }
			4450 = {
				owner = { add_opinion = { who = ROOT modifier = insulted } }
				add_permanent_claim = ROOT
			}
		}
	}
}

#incense drink unlock
country_event = {
	id = flavor_krakazol.26
	title = flavor_krakazol.26.t
	desc = flavor_krakazol.26.d
	picture = KING_DOING_GREAT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_krakazol.26.a	
		ai_chance = { factor = 5 }
		4325 = { add_permanent_province_modifier = { name = krakazol_drinking_incense_base duration = -1 } }
		custom_tooltip = flavor_krakazol_unlock_incense
		add_ruler_modifier = { name = krakazol_drinking_belly_5 duration = 1825 }
	}
}

#ending the vamps
country_event = {
	id = flavor_krakazol.27
	title = flavor_krakazol.27.t
	desc = flavor_krakazol.27.d
	picture = APOSTLE_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_krakazol.27.a	
		ai_chance = { factor = 5 }
		add_prestige_excess_to_splendour_effect = { VAL = 25 }
		add_splendor = 100
		if = {
			limit = { exists = Y02 }
			custom_tooltip = flavor_krakazol.27.tooltip
			hidden_effect = { Y02 = { clr_country_flag = has_vampires_estate } }
		}
		else = { add_power_projection = { type = mission_rewards_power_projection amount = 15 } }
	}
}

#copper drink unlock
country_event = {
	id = flavor_krakazol.28
	title = flavor_krakazol.28.t
	desc = flavor_krakazol.28.d
	picture = KING_DOING_GREAT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_krakazol.28.a	
		ai_chance = { factor = 5 }
		4247 = { add_permanent_province_modifier = { name = krakazol_drinking_copper_base duration = -1 } }
		custom_tooltip = flavor_krakazol_unlock_copper
		add_ruler_modifier = { name = krakazol_drinking_gut_5 duration = 1825 }
	}
}

#ending the oni
country_event = {
	id = flavor_krakazol.29
	title = flavor_krakazol.29.t
	desc = flavor_krakazol.29.d
	picture = ONI_HUMANS_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_krakazol.29.a	
		ai_chance = { factor = 5 }
		add_prestige_excess_to_splendour_effect = { VAL = 25 }
		add_splendor = 100
		custom_tooltip = flavor_krakazol.29.tooltip
		hidden_effect = {
			yambioka_area = {
				limit = { is_looted = yes }
				change_culture = kamtarhid
			}
			sugroltona_area = {
				limit = { is_looted = yes }
				change_culture = kamtarhid
			}
			unbeksu_area = {
				limit = { is_looted = yes }
				change_culture = shamadhan
			}
			mogutian_area = {
				limit = { is_looted = yes }
				change_culture = western_yan #szitu
			}
			moryokang_area = {
				limit = { is_looted = yes }
				change_culture = hill_yan #beikling
			}
		}
	}
}


#the end?
country_event = {
	id = flavor_krakazol.30
	title = flavor_krakazol.30.t
	desc = flavor_krakazol.30.d
	picture = KINGS_CHOICE_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_krakazol.30.a	
		ai_chance = { factor = 5 }
		reduce_stability_or_adm_power = yes
		set_country_flag = krakazol_epilogue_1
		swap_non_generic_missions = yes
	}
}

#ivory tea unlock
country_event = {
	id = flavor_krakazol.31
	title = flavor_krakazol.31.t
	desc = flavor_krakazol.31.d
	picture = KING_DOING_GREAT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_krakazol.31.a	
		ai_chance = { factor = 5 }
		4538 = { change_trade_goods = tea }
		4541 = { change_trade_goods = tea }
		4539 = {
			change_trade_goods = ivory
			add_permanent_province_modifier = { name = krakazol_drinking_ivorytea_base duration = -1 }
		}
		custom_tooltip = flavor_krakazol_unlock_ivorytea
		add_ruler_modifier = { name = krakazol_drinking_dispute_5 duration = 1825 }
	}
}

#call of ale
country_event = {
	id = flavor_krakazol.32
	title = flavor_krakazol.32.t
	desc = flavor_krakazol.32.d
	picture = EKLUZAGNU_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_krakazol.32.a	
		ai_chance = { factor = 5 }
		add_country_modifier = { name = krakazol_crazy_dwarves duration = 3650 }
		4450 = { add_province_modifier = { name = krakazol_crazy_dwarves_province duration = 3650 } }
		4465 = { add_province_modifier = { name = krakazol_crazy_dwarves_province duration = 3650 } }
	}
}

#why is the ale gone
country_event = {
	id = flavor_krakazol.33
	title = flavor_krakazol.33.t
	desc = flavor_krakazol.33.d
	picture = LIBERUM_VETO_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_krakazol.33.a	
		ai_chance = { factor = 5 }
		add_stability_or_adm_power = yes
		change_innovativeness = 5
		add_prestige_excess_to_splendour_effect = { VAL = 15 }
		mission_reward_artifice_points_3 = yes
	}
}

#ancestor ale unlock
country_event = {
	id = flavor_krakazol.34
	title = flavor_krakazol.34.t
	desc = flavor_krakazol.34.d
	picture = KING_DOING_GREAT_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_krakazol.34.a
		ai_chance = { factor = 5 }
		4450 = { add_permanent_province_modifier = { name = krakazol_drinking_spirits_base duration = -1 } }
		4465 = { add_permanent_province_modifier = { name = krakazol_drinking_spirits_base duration = -1 } }
		custom_tooltip = flavor_krakazol_unlock_spirit
		add_ruler_modifier = { name = krakazol_drinking_ancestor_5 duration = 1825 }
		if = {
			limit = { NOT = { ruler_has_personality = mage_personality } }
			if = {
				limit = { ruler_has_max_personalities = yes }
				hidden_effect = {
					clear_ruler_personalities = yes
					add_ruler_personality = immortal_personality
				}
			}
			add_ruler_personality = mage_personality
		}
		custom_tooltip = add_magic_study_modifier_10_tt
		update_magic_study_experience_modifier = { value = 10 }
		
		hidden_effect = { 
			every_known_country = {
				limit = { 
					religion = high_philosophy 
					is_subject = no
					NOT = { war_with = I20 }
					capital_scope = {
						continent = asia
						NOT = { superregion = forbidden_lands_superregion }
						NOT = { superregion = south_haless_superregion }
						NOT = { region = upper_yanshen_region }
					}
				}
				country_event = { id = flavor_krakazol.35 days = 1 }
			}
			country_event = { id = flavor_krakazol.36 days = 60 }
		}
	}
}

#hp tags decide to fight or not
country_event = {
	id = flavor_krakazol.35
	title = flavor_krakazol.35.t
	desc = flavor_krakazol.35.d
	picture = DIPLOMACY_eventPicture
	
	is_triggered_only = yes
	trigger = {
		religion = high_philosophy 
		is_subject = no
		NOT = { war_with = I20 }
	}

	#fight
	option = {
		name = flavor_krakazol.35.a
		custom_tooltip = flavor_krakazol.35.tooltip
		add_power_projection = { type = mission_rewards_power_projection amount = 10 }
		set_country_flag = krakazol_diplo_war
		ai_chance = { 
			factor = 70 
			modifier = {
				factor = 0
				alliance_with = I20
			}
		}
	}

	#na
	option = {
		name = flavor_krakazol.35.b
		add_prestige = -10
		ai_chance = { 
			factor = 30
			modifier = {
				factor = 0
				OR = {
					is_rival = I20
					ruler_has_personality = great_conqueror_personality #get fucked
					ruler_has_personality = mythical_conqueror_personality #get fucked x2
				}
				NOT = { alliance_with = I20 }
			}
			modifier = {
				factor = 2
				is_at_war = yes
			}
			modifier = {
				factor = 3
				NOT = { army_strength = { who = I20 value = 0.5 } }
			}
		}
	}
}

#get fucked
country_event = {
	id = flavor_krakazol.36
	title = flavor_krakazol.36.t
	desc = flavor_krakazol.36.d
	picture = WHITE_MOUNTAIN_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_krakazol.36.a
		ai_chance = { factor = 5 }
		every_known_country = {
			limit = { has_country_flag = krakazol_diplo_war }
			declare_war_with_cb = { casus_belli = cb_insult who = ROOT }
			clr_country_flag = krakazol_diplo_war
		}
	}
}

#epilogue start
country_event = {
	id = flavor_krakazol.37
	title = flavor_krakazol.37.t
	desc = flavor_krakazol.37.d
	picture = MYSTIC_IN_PRAYER_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_krakazol.37.a
		ai_chance = { factor = 5 }
		krakazol_clr_drunk_modifiers = yes
		add_ruler_modifier = { name = krakazol_legendary_quest duration = -1 }
		if = {
			limit = {
				is_evocation_3 = no
			}
			magic_study_level_up_evocation = yes
		}
		set_country_flag = krakazol_epilogue_2
		swap_non_generic_missions = yes
	}
}

#lonely island
country_event = {
	id = flavor_krakazol.38
	title = flavor_krakazol.38.t
	desc = flavor_krakazol.38.d
	picture = EP_ISLAND_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }
	goto = 4547

	option = {
		name = flavor_krakazol.38.a
		ai_chance = { factor = 5 }
		custom_tooltip = flavor_krakazol.38.tooltip
		hidden_effect = {
			set_country_flag = krakazol_reached_island
			1346 = {
				galley = ROOT
				galley = ROOT
				galley = ROOT
				galley = ROOT
				galley = ROOT
				galley = ROOT
				galley = ROOT
				galley = ROOT
				galley = ROOT
				galley = ROOT
				galley = ROOT
				galley = ROOT
				galley = ROOT
				galley = ROOT
				galley = ROOT
				galley = ROOT
				galley = ROOT
				galley = ROOT
				galley = ROOT
				galley = ROOT
			}
			krakazol_clr_drunk_modifiers = yes
		}
		4547 = {
			hidden_effect = { remove_core = owner }
			add_core = ROOT
			cede_province = ROOT
		}
	}
}


#the aleteor
country_event = {
	id = flavor_krakazol.39
	title = flavor_krakazol.39.t
	desc = flavor_krakazol.39.d
	picture = COMET_SIGHTED_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_krakazol.39.a
		ai_chance = { factor = 5 }
		4547 = {
			change_trade_goods = wine
			add_base_production = 4
			add_permanent_province_modifier = { name = krakazol_aleteor duration = -1 }
		}
		remove_country_modifier = krakazol_legendary_quest
		kill_ruler = yes
		#hidden_effect = { exile_ruler_as = { name = krakazol_ancestor }} #stupid game hates this and spits out errors if used in loc
		set_country_flag = krakazol_epilogue_3
		swap_non_generic_missions = yes
	}
}

#the end
country_event = {
	id = flavor_krakazol.40
	title = flavor_krakazol.40.t
	desc = flavor_krakazol.40.d
	picture = REVOLT_HUNGARIAN_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	option = {
		name = flavor_krakazol.40.a
		ai_chance = { factor = 5 }
		add_stability = -3
		country_event = { id = flavor_krakazol.41 days = 60 }
	}
}

#watch everyone complain on discord.event
country_event = {
	id = flavor_krakazol.41
	title = flavor_krakazol.41.t
	desc = flavor_krakazol.41.d
	picture = MULTI_RACIAL_MERC_eventPicture
	
	is_triggered_only = yes
	trigger = { always = yes }

	immediate = {
		hidden_effect = {
			set_country_flag = krakazol_ale_war
			every_known_country = {
				limit = { 
					capital_scope = {
						continent = asia
						NOT = { superregion = forbidden_lands_superregion}
					}
				}
				add_aggressive_expansion = { who = ROOT value = 60 apply_calc = no }
				set_ai_attitude = { attitude = attitude_outraged who = ROOT }
				form_coalition_against = ROOT
			}
			random_known_country = {
				limit = { 
					capital_scope = {
						continent = asia
						NOT = { superregion = forbidden_lands_superregion}
					}
					coalition_target = ROOT
				}
				declare_war_with_cb = {
					casus_belli = cb_super_badboy
					who = ROOT
				}
			}
		}
	}

	option = {
		name = flavor_krakazol.41.a
		ai_chance = { factor = 5 }
		custom_tooltip = flavor_krakazol.41.tooltip
		add_stability = 5
	}
}

#wow you actually won the war
country_event = {
	id = flavor_krakazol.42
	title = flavor_krakazol.42.t
	desc = flavor_krakazol.42.d
	picture = MULTI_RACIAL_MERC_eventPicture
	
	is_triggered_only = yes
	trigger = {
		tag = I20
		has_country_flag = krakazol_ale_war 
		NOT = { revanchism = 1 }
	}

	immediate = {
		hidden_effect = { clr_country_flag = krakazol_ale_war }
	}

	option = {
		name = flavor_krakazol.42.a
		ai_chance = { factor = 5 }
		custom_tooltip = flavor_krakazol.42.tooltip
		hidden_effect = {
			asia = {
				limit = {
					NOT = { 
						has_province_modifier = krakazol_drinking_cottoncloth_base
						has_province_modifier = krakazol_drinking_spices_base
						has_province_modifier = krakazol_drinking_ivorytea_base
						has_province_modifier = krakazol_drinking_spirits_base
					}
				}
				change_trade_goods = wine
			}
		}
	}
}





###############
####Slaying####
###############
#main menu  ---- triggers PTM for the hunts
country_event = {
	id = flavor_krakazol.100
	title = flavor_krakazol.100.t
	desc = flavor_krakazol.100.d
	picture = KINGS_CHOICE_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		tag = I20
		has_ruler_flag = krakazol_slaying_menu_open
	}

	after = { 
		clr_ruler_flag = krakazol_slaying_menu_open 
		clr_ruler_flag = more_slaying
	}

	#exit
	option = {
		name = flavor_krakazol.100.a
		if = {
			limit = { has_ruler_flag = more_slaying }
			custom_tooltip = flavor_krakazol.100.tooltip
			reduce_stability_or_adm_power = yes
			add_prestige = -10
			add_legitimacy = -25
			add_ruler_modifier = { name = krakazol_fatigue duration = 730 }
		}
		else = {
			add_prestige = -5
		}
		hidden_effect = { 4266 = { remove_province_triggered_modifier = krakazol_slaying_ptm } }
		ai_chance = { factor = 5 }
	}

	#yeti
	option = {
		name = flavor_krakazol.100.b
		ai_chance = { factor = 5 }
		trigger = { mission_completed = krakazol_not_yeti }
		set_ruler_flag = krakazol_slaying_yeti
		add_ruler_modifier = { name = krakazol_slaying_quest duration = -1 }
	}

	#manticore
	option = {
		name = flavor_krakazol.100.c
		ai_chance = { factor = 5 }
		trigger = { mission_completed = krakazol_watch_tail }
		set_ruler_flag = krakazol_slaying_manticore
		add_ruler_modifier = { name = krakazol_slaying_quest duration = -1 }
	}

	#cockatrice
	option = {
		name = flavor_krakazol.100.e
		ai_chance = { factor = 5 }
		trigger = { mission_completed = krakazol_chicken_run }
		set_ruler_flag = krakazol_slaying_cockatrice
		add_ruler_modifier = { name = krakazol_slaying_quest duration = -1 }
	}

	#baku
	option = {
		name = flavor_krakazol.100.f
		ai_chance = { factor = 5 }
		trigger = { mission_completed = krakazol_dreams_demise }
		set_ruler_flag = krakazol_slaying_baku
		add_ruler_modifier = { name = krakazol_slaying_quest duration = -1 }
	}

	#kirin
	option = {
		name = flavor_krakazol.100.g
		ai_chance = { factor = 5 }
		trigger = { has_country_flag = krakazol_slaying_kirin_unlocked }
		set_ruler_flag = krakazol_slaying_kirin
		add_ruler_modifier = { name = krakazol_slaying_quest duration = -1 }
	}

	#hydra
	option = {
		name = flavor_krakazol.100.h
		ai_chance = { factor = 5 }
		trigger = { has_country_flag = krakazol_slaying_hydra_unlocked }
		set_ruler_flag = krakazol_slaying_hydra
		add_ruler_modifier = { name = krakazol_slaying_quest duration = -1 }
	}

	#special kirin
	option = {
		name = flavor_krakazol.100.i
		ai_chance = { factor = 5 }
		trigger = { 
			mission_completed = krakazol_storms_fury 
			NOT = { has_country_flag = krakazol_slaying_kirin_unlocked }
		}
		set_ruler_flag = krakazol_slaying_kirin_special
		add_ruler_modifier = { name = krakazol_slaying_quest duration = -1 }
	}

	#special hydra
	option = {
		name = flavor_krakazol.100.j
		ai_chance = { factor = 5 }
		trigger = { 
			mission_completed = krakazol_swallower_rivers 
			NOT = { has_country_flag = krakazol_slaying_hydra_unlocked }
		}
		set_ruler_flag = krakazol_slaying_hydra_special
		add_ruler_modifier = { name = krakazol_slaying_quest duration = -1 }
	}
}



#Victory
country_event = {
	id = flavor_krakazol.101
	title = flavor_krakazol.101.t
	desc = {
		trigger = {
			NOT = {
				has_ruler_flag = krakazol_slaying_kirin_special
				has_ruler_flag = krakazol_slaying_hydra_special
			}
		}
		desc = flavor_krakazol.101.d
	}
	desc = {
		trigger = { has_ruler_flag = krakazol_slaying_kirin_special }
		desc = flavor_krakazol.101.d2
	}
	desc = {
		trigger = { has_ruler_flag = krakazol_slaying_hydra_special }
		desc = flavor_krakazol.101.d3
	}
	picture = KING_DOING_GREAT_eventPicture
	
	is_triggered_only = yes
	trigger = { has_ruler_modifier = krakazol_slaying_quest }

	immediate = { hidden_effect = { change_variable = { krakazol_slaying_counter = 1 } } }
	after = { krakazol_slaying_effect = { Clear = yes } }


	#nice
	option = {
		name = flavor_krakazol.101.a	
		ai_chance = { factor = 5 }
		krakazol_slaying_effect = { Reward = yes }
		hidden_effect = { 4266 = { remove_province_triggered_modifier = krakazol_slaying_ptm } }
		add_ruler_modifier = { name = krakazol_fatigue duration = 730 }
	}

	#I must slay more!
	option = {
		name = flavor_krakazol.101.b
		ai_chance = { factor = 5 }
		krakazol_slaying_effect = { Reward = yes }
		set_ruler_flag = krakazol_slaying_menu_open
		set_ruler_flag = more_slaying
		country_event = { id = flavor_krakazol.100 days = 2 }
	}
}

#Death
country_event = {
	id = flavor_krakazol.102
	title = flavor_krakazol.102.t
	desc = flavor_krakazol.102.d
	picture = LOOMING_DEATH_eventPicture
	
	is_triggered_only = yes
	trigger = { has_ruler_modifier = krakazol_slaying_quest }

	#nooo
	option = {
		name = flavor_krakazol.102.a	
		ai_chance = { factor = 5 }
		kill_ruler = yes
	}
}

#novice slayers appear
country_event = {
	id = flavor_krakazol.103
	title = flavor_krakazol.103.t
	desc = flavor_krakazol.103.d
	picture = CONQUEST_eventPicture
	
	fire_only_once = yes
	mean_time_to_happen = {
		years = 3
	}

	trigger = {
		tag = I20
		has_estate_privilege = estate_adventurers_organization_slayers
		OR = {
			has_country_flag = slaying_yeti_trophy
			has_country_flag = slaying_manticore_trophy
			has_country_flag = slaying_cockatrice_trophy
			has_country_flag = slaying_baku_trophy
			has_country_flag = slaying_kirin_trophy
			has_country_flag = slaying_hydra_trophy
		}
		manpower_percentage = 0.2
	}

	#nice
	option = {
		name = flavor_krakazol.103.a
		ai_chance = { factor = 5 }
		add_yearly_manpower = -1
		unlock_merc_company = {
			merc_company = merc_novice_slayers
			free_merc = yes
		}		
	}
}

#bloodied slayers
country_event = {
	id = flavor_krakazol.104
	title = flavor_krakazol.104.t
	desc = flavor_krakazol.104.d
	picture = CENTRAL_AFRICAN_PORTUGUESE_eventPicture
	
	fire_only_once = yes
	mean_time_to_happen = {
		years = 3
	}

	trigger = {
		tag = I20
		has_estate_privilege = estate_adventurers_organization_slayers
		calc_true_if = {
			amount = 3
			has_country_flag = slaying_yeti_trophy
			has_country_flag = slaying_manticore_trophy
			has_country_flag = slaying_cockatrice_trophy
			has_country_flag = slaying_baku_trophy
			has_country_flag = slaying_kirin_trophy
			has_country_flag = slaying_hydra_trophy
		}
		manpower_percentage = 0.2
	}

	#nice
	option = {
		name = flavor_krakazol.104.a
		ai_chance = { factor = 5 }
		add_yearly_manpower = -1
		unlock_merc_company = {
			merc_company = merc_bloodied_slayers
			free_merc = yes
		}
	}
}

#doomed slayers
country_event = {
	id = flavor_krakazol.105
	title = flavor_krakazol.105.t
	desc = flavor_krakazol.105.d
	picture = LOOMING_DEATH_eventPicture
	
	fire_only_once = yes
	mean_time_to_happen = {
		years = 3
	}

	trigger = {
		tag = I20
		has_estate_privilege = estate_adventurers_organization_slayers
		has_country_flag = slaying_yeti_trophy
		has_country_flag = slaying_manticore_trophy
		has_country_flag = slaying_cockatrice_trophy
		has_country_flag = slaying_baku_trophy
		has_country_flag = slaying_kirin_trophy
		has_country_flag = slaying_hydra_trophy
		manpower_percentage = 0.2
	}

	#nice
	option = {
		name = flavor_krakazol.105.a
		ai_chance = { factor = 5 }
		add_yearly_manpower = -0.75
		unlock_merc_company = {
			merc_company = merc_doomed_slayers
			free_merc = yes
		}
	}
}



####Yeti####
#only fight
country_event = {
	id = flavor_krakazol.110
	title = flavor_krakazol.110.t
	desc = flavor_krakazol.110.d
	picture = GREAT_MAN_eventPicture
	
	is_triggered_only = yes
	trigger = { has_ruler_flag = krakazol_slaying_yeti }

	#fight
	option = {
		name = flavor_krakazol.110.a
		ai_chance = { factor = 5 }
		krakazol_slaying_effect = { Slaying = yes  Difficulty = 1 }
	}
}


####Manticore####
#track
country_event = {
	id = flavor_krakazol.120
	title = flavor_krakazol.120.t
	desc = flavor_krakazol.120.d
	picture = EXPLORERS_eventPicture
	
	is_triggered_only = yes
	trigger = { has_ruler_flag = krakazol_slaying_manticore }

	#follow the footprints
	option = {
		name = flavor_krakazol.120.a
		ai_chance = { factor = 5 }
		krakazol_slaying_effect = { Track = yes Difficulty = 1.5 ID = 121 }
	}
}

#fight
country_event = {
	id = flavor_krakazol.121
	title = flavor_krakazol.121.t
	desc = flavor_krakazol.121.d
	picture = GREAT_MAN_eventPicture
	
	is_triggered_only = yes
	trigger = { has_ruler_flag = krakazol_slaying_manticore }

	#fight
	option = {
		name = flavor_krakazol.121.a
		ai_chance = { factor = 5 }
		krakazol_slaying_effect = { Slaying = yes Difficulty = 1.5 }
	}
}


####Cockatrice####
#track
country_event = {
	id = flavor_krakazol.130
	title = flavor_krakazol.130.t
	desc = flavor_krakazol.130.d
	picture = EXPLORERS_eventPicture
	
	is_triggered_only = yes
	trigger = { has_ruler_flag = krakazol_slaying_cockatrice }

	#follow the footprints
	option = {
		name = flavor_krakazol.130.a
		ai_chance = { factor = 5 }
		krakazol_slaying_effect = { Track = yes Difficulty = 1.5 ID = 131 }
	}
}

#fight
country_event = {
	id = flavor_krakazol.131
	title = flavor_krakazol.131.t
	desc = flavor_krakazol.131.d
	picture = GREAT_MAN_eventPicture
	
	is_triggered_only = yes
	trigger = { has_ruler_flag = krakazol_slaying_cockatrice }

	#fight
	option = {
		name = flavor_krakazol.131.a
		ai_chance = { factor = 5 }
		krakazol_slaying_effect = { Slaying = yes Difficulty = 1.5 }
	}
}

####Baku####
#track
country_event = {
	id = flavor_krakazol.140
	title = flavor_krakazol.140.t
	desc = flavor_krakazol.140.d
	picture = EXPLORERS_eventPicture
	
	is_triggered_only = yes
	trigger = { has_ruler_flag = krakazol_slaying_baku }

	#follow the footprints
	option = {
		name = flavor_krakazol.140.a
		ai_chance = { factor = 5 }
		krakazol_slaying_effect = { Track = yes Difficulty = 1.5 ID = 141 }
	}
}

#fight
country_event = {
	id = flavor_krakazol.141
	title = flavor_krakazol.141.t
	desc = flavor_krakazol.141.d
	picture = GREAT_MAN_eventPicture
	
	is_triggered_only = yes
	trigger = { has_ruler_flag = krakazol_slaying_baku }

	#fight
	option = {
		name = flavor_krakazol.141.a
		ai_chance = { factor = 5 }
		krakazol_slaying_effect = { Slaying = yes Difficulty = 1.5 }
	}
}

####Kirin####
##generic##
#track
country_event = {
	id = flavor_krakazol.150
	title = flavor_krakazol.150.t
	desc = flavor_krakazol.150.d
	picture = EXPLORERS_eventPicture
	
	is_triggered_only = yes
	trigger = { has_ruler_flag = krakazol_slaying_kirin }

	#follow the footprints
	option = {
		name = flavor_krakazol.150.a
		ai_chance = { factor = 5 }
		krakazol_slaying_effect = { Track = yes Difficulty = 2 ID = 151 }
	}
}

#prepare
country_event = {
	id = flavor_krakazol.151
	title = flavor_krakazol.151.t
	desc = flavor_krakazol.151.d
	picture = MUSLIM_ANIMIST_ALTAR_eventPicture
	
	is_triggered_only = yes
	trigger = { has_ruler_flag = krakazol_slaying_kirin }

	#something cool
	option = {
		name = flavor_krakazol.151.a
		ai_chance = { factor = 5 }
		krakazol_slaying_effect = { Prep = yes Difficulty = 2 ID = 152 }
	}
}

#fight
country_event = {
	id = flavor_krakazol.152
	title = flavor_krakazol.152.t
	desc = flavor_krakazol.152.d
	picture = GREAT_MAN_eventPicture
	
	is_triggered_only = yes
	trigger = { has_ruler_flag = krakazol_slaying_kirin }

	#fight
	option = {
		name = flavor_krakazol.152.a
		ai_chance = { factor = 5 }
		krakazol_slaying_effect = { Slaying = yes Difficulty = 2 }
	}
}

##Raiuja##
#track
country_event = {
	id = flavor_krakazol.155
	title = flavor_krakazol.155.t
	desc = flavor_krakazol.155.d
	picture = EXPLORERS_eventPicture
	
	is_triggered_only = yes
	trigger = { has_ruler_flag = krakazol_slaying_kirin_special }

	#follow the footprints
	option = {
		name = flavor_krakazol.155.a
		ai_chance = { factor = 5 }
		krakazol_slaying_effect = { Track = yes Difficulty = 2.5 ID = 156 }
	}
}

#prepare
country_event = {
	id = flavor_krakazol.156
	title = flavor_krakazol.156.t
	desc = flavor_krakazol.156.d
	picture = MUSLIM_ANIMIST_ALTAR_eventPicture
	
	is_triggered_only = yes
	trigger = { has_ruler_flag = krakazol_slaying_kirin_special }

	#something cool
	option = {
		name = flavor_krakazol.156.a
		ai_chance = { factor = 5 }
		krakazol_slaying_effect = { Prep = yes Difficulty = 2.5 ID = 157 }
	}
}

#prepare2
country_event = {
	id = flavor_krakazol.157
	title = flavor_krakazol.157.t
	desc = flavor_krakazol.157.d
	picture = MUSLIM_ANIMIST_ALTAR_eventPicture
	
	is_triggered_only = yes
	trigger = { has_ruler_flag = krakazol_slaying_kirin_special }

	#fight
	option = {
		name = flavor_krakazol.157.a
		ai_chance = { factor = 5 }
		krakazol_slaying_effect = { SpecialPrep = yes Difficulty = 2.5 ID = 158 }
	}
}

#fight
country_event = {
	id = flavor_krakazol.158
	title = flavor_krakazol.158.t
	desc = flavor_krakazol.158.d
	picture = GREAT_MAN_eventPicture
	
	is_triggered_only = yes
	trigger = { has_ruler_flag = krakazol_slaying_kirin_special }

	#fight
	option = {
		name = flavor_krakazol.158.a
		ai_chance = { factor = 5 }
		krakazol_slaying_effect = { Slaying = yes Difficulty = 2.5 }
	}
}

####Hydra####
##generic##
#track
country_event = {
	id = flavor_krakazol.160
	title = flavor_krakazol.160.t
	desc = flavor_krakazol.160.d
	picture = EXPLORERS_eventPicture
	
	is_triggered_only = yes
	trigger = { has_ruler_flag = krakazol_slaying_hydra }

	#follow the footprints
	option = {
		name = flavor_krakazol.160.a
		ai_chance = { factor = 5 }
		krakazol_slaying_effect = { Track = yes Difficulty = 2 ID = 161 }
	}
}

#prepare
country_event = {
	id = flavor_krakazol.161
	title = flavor_krakazol.161.t
	desc = flavor_krakazol.161.d
	picture = MUSLIM_ANIMIST_ALTAR_eventPicture
	
	is_triggered_only = yes
	trigger = { has_ruler_flag = krakazol_slaying_hydra }

	#something cool
	option = {
		name = flavor_krakazol.161.a
		ai_chance = { factor = 5 }
		krakazol_slaying_effect = { Prep = yes Difficulty = 2 ID = 162 }
	}
}

#fight
country_event = {
	id = flavor_krakazol.162
	title = flavor_krakazol.162.t
	desc = flavor_krakazol.162.d
	picture = GREAT_MAN_eventPicture
	
	is_triggered_only = yes
	trigger = { has_ruler_flag = krakazol_slaying_hydra }

	#fight
	option = {
		name = flavor_krakazol.162.a
		ai_chance = { factor = 5 }
		krakazol_slaying_effect = { Slaying = yes Difficulty = 2 }
	}
}

##Halukandaran##
#track
country_event = {
	id = flavor_krakazol.165
	title = flavor_krakazol.165.t
	desc = flavor_krakazol.165.d
	picture = EXPLORERS_eventPicture
	
	is_triggered_only = yes
	trigger = { has_ruler_flag = krakazol_slaying_hydra_special }

	#follow the footprints
	option = {
		name = flavor_krakazol.165.a
		ai_chance = { factor = 5 }
		krakazol_slaying_effect = { Track = yes Difficulty = 2.5 ID = 166 }
	}
}

#prepare
country_event = {
	id = flavor_krakazol.166
	title = flavor_krakazol.166.t
	desc = flavor_krakazol.166.d
	picture = MUSLIM_ANIMIST_ALTAR_eventPicture
	
	is_triggered_only = yes
	trigger = { has_ruler_flag = krakazol_slaying_hydra_special }

	#something cool
	option = {
		name = flavor_krakazol.166.a
		ai_chance = { factor = 5 }
		krakazol_slaying_effect = { Prep = yes Difficulty = 2.5 ID = 167 }
	}
}

#prepare2
country_event = {
	id = flavor_krakazol.167
	title = flavor_krakazol.167.t
	desc = flavor_krakazol.167.d
	picture = MUSLIM_ANIMIST_ALTAR_eventPicture
	
	is_triggered_only = yes
	trigger = { has_ruler_flag = krakazol_slaying_hydra_special }

	#fight
	option = {
		name = flavor_krakazol.167.a
		ai_chance = { factor = 5 }
		krakazol_slaying_effect = { SpecialPrep = yes Difficulty = 2.5 ID = 168 }
	}
}

#fight
country_event = {
	id = flavor_krakazol.168
	title = flavor_krakazol.168.t
	desc = flavor_krakazol.168.d
	picture = GREAT_MAN_eventPicture
	
	is_triggered_only = yes
	trigger = { has_ruler_flag = krakazol_slaying_hydra_special }

	#fight
	option = {
		name = flavor_krakazol.168.a
		ai_chance = { factor = 5 }
		krakazol_slaying_effect = { Slaying = yes Difficulty = 2.5 }
	}
}




###################
####Maintenance####
###################

#natural election time
country_event = {
	id = flavor_krakazol.200
	title = flavor_krakazol.200.t
	desc = flavor_krakazol.200.d
	picture = ANGRY_MOB_eventPicture
	
	is_triggered_only = yes
	trigger = { 
		tag = I20
		has_reform = krakazol_olzonog
		NOT = { has_country_modifier = krakazol_first_election_fix }
		NOT = { has_ruler_modifier = krakazol_legendary_quest }
	}

	immediate = { hidden_effect = { add_country_modifier = { name = krakazol_drink_fix duration = 2 hidden = yes } } }

	after = { clr_country_flag = krakazol_drinking_menu_open }

	option = {
		name = flavor_krakazol.200.a
		ai_chance = { factor = 5 }
		custom_tooltip = flavor_krakazol.200.tooltip
		reduce_stability_or_adm_power = yes
		reduce_stability_or_adm_power = yes
		reduce_stability_or_adm_power = yes
		add_country_modifier = { name = krakazol_failed_ruler_natural duration = 1825 }

		##new ruler
		define_ruler = {
			age = 90
			culture = amethyst_dwarf
			religion = ROOT
			male = yes
		}
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			random_list = {
				40 = {
					modifier = {
						factor = 0.75
						has_country_modifier = krakazol_keglord_flagon
					}
					modifier = {
						factor = 0.25
						has_country_modifier = krakazol_keglord_alethrone
					}
				}
				25 = { add_ruler_personality = tactical_genius_personality }
				25 = { add_ruler_personality = bold_fighter_personality }
				25 = { add_ruler_personality = inspiring_leader_personality }
				25 = { add_ruler_personality = martial_educator_personality }
			}
			set_variable = { drink_lvl = 0 }
			set_variable = { experienceModifier = 0 } #mage drink
			set_variable = { krakazol_slaying_counter = 0 }
		}
	}
}


#death election
country_event = {
	id = flavor_krakazol.201
	title = flavor_krakazol.201.t
	desc = flavor_krakazol.201.d
	picture = DEATH_OF_HEIR_eventPicture
	
	is_triggered_only = yes
	trigger = { 
		tag = I20
		has_reform = krakazol_olzonog
		NOT = { has_ruler_modifier = krakazol_legendary_quest }
	}

	immediate = {
		hidden_effect = {
			add_country_modifier = { name = krakazol_drink_fix duration = 2 hidden = yes }
			remove_country_modifier = krakazol_failed_ruler
			4266 = { remove_province_triggered_modifier = krakazol_slaying_ptm }
			krakazol_clr_perm_modifiers = yes
			if = {
				limit = { has_ruler_modifier = krakazol_boat_quest }
				set_ruler_flag = death_by_epilogue
			}
			#slaying first
			else_if = {
				limit = { has_ruler_modifier = krakazol_slaying_quest }
				if = {
					limit = { has_ruler_flag = krakazol_slaying_in_combat }
					set_ruler_flag = death_by_slaying
				}
				else = { set_ruler_flag = death_by_slayer_quest }
			}
			#drinking max
			else_if = {
				limit = {
					check_variable = { drink_lvl = 7 }
					OR = {
						has_ruler_flag = krakazol_ruler_drinking_iron
						has_ruler_flag = krakazol_ruler_drinking_dark
						has_ruler_flag = krakazol_ruler_drinking_beard
						has_ruler_flag = krakazol_ruler_drinking_digging
						has_ruler_flag = krakazol_ruler_drinking_heart
						has_ruler_flag = krakazol_ruler_drinking_yellow
						has_ruler_flag = krakazol_ruler_drinking_gizzard
						has_ruler_flag = krakazol_ruler_drinking_shattered
						has_ruler_flag = krakazol_ruler_drinking_gut
						has_ruler_flag = krakazol_ruler_drinking_dispute
						has_ruler_flag = krakazol_ruler_drinking_belly
						has_ruler_flag = krakazol_ruler_drinking_ancestor
					}
				}
				set_ruler_flag = death_by_drinking
			}
			#drinking
			else_if = {
				limit = { 
					OR = {
						has_ruler_flag = krakazol_ruler_drinking_iron
						has_ruler_flag = krakazol_ruler_drinking_dark
						has_ruler_flag = krakazol_ruler_drinking_beard
						has_ruler_flag = krakazol_ruler_drinking_digging
						has_ruler_flag = krakazol_ruler_drinking_heart
						has_ruler_flag = krakazol_ruler_drinking_yellow
						has_ruler_flag = krakazol_ruler_drinking_gizzard
						has_ruler_flag = krakazol_ruler_drinking_shattered
						has_ruler_flag = krakazol_ruler_drinking_gut
						has_ruler_flag = krakazol_ruler_drinking_dispute
						has_ruler_flag = krakazol_ruler_drinking_belly
						has_ruler_flag = krakazol_ruler_drinking_ancestor
					}
				}
				set_ruler_flag = death_by_drinking_no_buff
			}
			#actual combat, not drilling etc
			else_if = {
				limit = {
					is_monarch_leader = yes 
					any_army = { is_ruler_commanding_unit = yes }
					any_province = {
						has_ruler_leader_from = ROOT
						OR = {
							unit_in_battle = yes
							unit_in_siege = yes
						}
					}
				}
				set_ruler_flag = death_by_combat
			}
			#dead while general but no combat
			else_if = {
				limit = { 
					is_monarch_leader = yes
					any_army = { is_ruler_commanding_unit = yes }
				}
				set_ruler_flag = death_by_accident
			}
			#dumb event or something
			else = { set_ruler_flag = death_by_unknown }
		}
	}

	after = { clr_country_flag = krakazol_drinking_menu_open }


	option = {
		name = flavor_krakazol.201.a	
		ai_chance = { factor = 5 }
		
		trigger_switch = {
			on_trigger = has_ruler_flag


			death_by_slaying = {
				custom_tooltip = flavor_krakazol.201.tooltip
				add_stability_or_adm_power = yes
				add_prestige_excess_to_splendour_effect = { VAL = 25 }
			}
			
			death_by_slayer_quest = {
				custom_tooltip = flavor_krakazol.201.tooltip2
				reduce_stability_or_adm_power = yes
				add_country_modifier = { name = krakazol_failed_ruler duration = 912 } #2.5 years
			}

			death_by_drinking = {
				custom_tooltip = flavor_krakazol.201.tooltip3
				add_stability_or_adm_power = yes
				hidden_effect = {
					trigger_switch = {
						on_trigger = has_ruler_modifier  #flag gets cleared for some reason

						krakazol_drinking_iron_7 = { add_country_modifier = { name = krakazol_drinking_iron_perm duration = 3650 } }
						krakazol_drinking_dark_7 = { add_country_modifier = { name = krakazol_drinking_dark_perm duration = 3650 } }
						krakazol_drinking_beard_7 = { add_country_modifier = { name = krakazol_drinking_beard_perm duration = 3650 } }
						krakazol_drinking_digging_7 = { add_country_modifier = { name = krakazol_drinking_digging_perm duration = 3650 } }
						krakazol_drinking_heart_7 = { add_country_modifier = { name = krakazol_drinking_heart_perm duration = 3650 } }
						krakazol_drinking_yellow_7 = { add_country_modifier = { name = krakazol_drinking_yellow_perm duration = 3650 } }
						krakazol_drinking_gizzard_7 = { add_country_modifier = { name = krakazol_drinking_gizzard_perm duration = 3650 } }
						krakazol_drinking_shattered_7 = { add_country_modifier = { name = krakazol_drinking_shattered_perm duration = 3650 } }
						krakazol_drinking_gut_7 = { add_country_modifier = { name = krakazol_drinking_gut_perm duration = 3650 } }
						krakazol_drinking_dispute_7 = { add_country_modifier = { name = krakazol_drinking_dispute_perm duration = 3650 } }
						krakazol_drinking_belly_7 = { add_country_modifier = { name = krakazol_drinking_belly_perm duration = 3650 } }
						krakazol_drinking_ancestor_7 = { add_country_modifier = { name = krakazol_drinking_ancestor_perm duration = 3650 } }
					}
				}
			}

			death_by_drinking_no_buff = {
				custom_tooltip = flavor_krakazol.201.tooltip4
				add_stability_or_adm_power = yes
				add_prestige_or_monarch_power = { amount = 25 }
			}

			death_by_combat = {
				custom_tooltip = flavor_krakazol.201.tooltip5
				add_stability_or_adm_power = yes
				add_army_tradition_or_mil_power = { VAL = 10 }
			}

			death_by_accident = {
				custom_tooltip = flavor_krakazol.201.tooltip6
				reduce_stability_or_adm_power = yes
				add_country_modifier = { name = krakazol_failed_ruler duration = 1825 } #5 years
			}

			death_by_unknown = {
				custom_tooltip = flavor_krakazol.201.tooltip7
				reduce_stability_or_adm_power = yes
				reduce_stability_or_adm_power = yes
				add_country_modifier = { name = krakazol_failed_ruler duration = 1825 } #5 years
			}

			death_by_epilogue = {
				custom_tooltip = flavor_krakazol.201.tooltip8
				add_stability_or_adm_power = yes
				add_splendor = 500
				add_country_modifier = { name = krakazol_the_alebringer duration = -1 }
			}
		}

		##new ruler
		define_ruler = {
			age = 90
			culture = amethyst_dwarf
			religion = ROOT
			male = yes
		}
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			random_list = {
				40 = {
					modifier = {
						factor = 0.75
						has_country_modifier = krakazol_keglord_flagon
					}
					modifier = {
						factor = 0.5
						has_country_modifier = krakazol_keglord_alethrone
					}
				}
				25 = { add_ruler_personality = tactical_genius_personality }
				25 = { add_ruler_personality = bold_fighter_personality }
				25 = { add_ruler_personality = inspiring_leader_personality }
				25 = { add_ruler_personality = martial_educator_personality }
			}
			set_variable = { drink_lvl = 0 }
			set_variable = { experienceModifier = 0 } #mage drink
			set_variable = { krakazol_slaying_counter = 0 }
		}
	}
}




#upgrade stramolgiv because fuck pdx
country_event = {
	id = flavor_krakazol.202
	title = flavor_krakazol.200.t
	desc = flavor_krakazol.200.d
	picture = FORT_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	trigger = { tag = I20 }

	option = {
		name = flavor_krakazol.200.a	
		ai_chance = { factor = 5 }
		country_event = { id = flavor_krakazol.203 }
	}
}

#yes this is actually fucking necessary
country_event = {
	id = flavor_krakazol.203
	title = flavor_krakazol.200.t
	desc = flavor_krakazol.200.d
	picture = FORT_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	trigger = { tag = I20 }

	option = {
		name = flavor_krakazol.200.a	
		ai_chance = { factor = 5 }
		4289 = { add_great_project_tier = { type = dd_stramolgiv tier = 1 } }
	}
}

#fuck monuments
# country_event = {
# 	id = flavor_krakazol.204
# 	title = flavor_krakazol.200.t
# 	desc = flavor_krakazol.200.d
# 	picture = FORT_eventPicture
	
# 	is_triggered_only = yes
# 	hidden = yes
# 	trigger = { tag = I20 }

# 	option = {
# 		name = flavor_krakazol.200.a	
# 		ai_chance = { factor = 5 }
# 		4289 = { add_great_project = { type = dd_stramolgiv instant = no } }
# 	}
# }


#necromancy fuck u event
country_event = {
	id = flavor_krakazol.210
	title = flavor_krakazol.210.t
	desc = flavor_krakazol.210.d
	picture = KING_ASSASSINATION_eventPicture
	
	is_triggered_only = yes
	trigger = {
		tag = I20
		has_reform = krakazol_olzonog
		has_ruler_flag = ruler_studying_necromancy
		NOT = { has_ruler_modifier = krakazol_legendary_quest }
	}

	immediate = { hidden_effect = { add_country_modifier = { name = krakazol_drink_fix duration = 2 hidden = yes } } }
	after = { clr_country_flag = krakazol_drinking_menu_open }

	option = {
		name = flavor_krakazol.210.a
		ai_chance = { factor = 5 }
		add_stability = -5
		4266 = {
			add_base_tax = -4
			add_base_production = -4
			add_base_manpower = -4
			add_devastation = 50
			if = {
				limit = { hold_condition = { Repaired = yes } }
				add_permanent_province_modifier = { name = partially_ruined_hold duration = -1 }
			}
		}

		tooltip = { kill_ruler = yes } #don't kill so election event doesn't happen
		##new ruler
		define_ruler = {
			age = 90
			culture = amethyst_dwarf
			religion = ROOT
			male = yes
		}
		hidden_effect = { 
			add_ruler_personality = immortal_personality
			#no extra stuff
			set_variable = { drink_lvl = 0 }
			set_variable = { experienceModifier = 0 } #mage drink
			set_variable = { krakazol_slaying_counter = 0 }
		}
	}
}



################
####Drinking####
################

#main menu
country_event = {
	id = flavor_krakazol.300
	title = flavor_krakazol.300.t
	desc = flavor_krakazol.300.d
	picture = FEAST_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		tag = I20
		has_country_flag = krakazol_drinking_menu_open
	}

	immediate = {
		hidden_effect = {
			add_country_modifier = { name = krakazol_drink_fix duration = 2 hidden = yes } #failsafe
			set_variable = { drink_lvl = 0 }
			random_owned_province = {
				limit = { has_province_modifier = krakazol_drinking_mithril_base }
				save_event_target_as = mithril_province
			}
			random_owned_province = {
				limit = {
					has_province_modifier = krakazol_drinking_spirits_base 
					local_autonomy = 30
				}
				save_event_target_as = spirit_province
			}
		}
	}


	#close menu
	option = {
		name = flavor_krakazol.300.a
		ai_chance = { factor = 5 }
		clr_country_flag = krakazol_drinking_menu_open
		hidden_effect = { add_country_modifier = { name = krakazol_drink_fix duration = 2 hidden = yes } }
		add_prestige = -3
	}

	#iron belly
	option = {
		name = flavor_krakazol.300.b
		ai_chance = { factor = 5 }
		goto = 4284 #az-an
		trigger = { owns = 4284 }

		if = {
			limit = { 4284 = { local_autonomy = 30 } }
			custom_tooltip = krakazol_drinking_high_autonomy_tooltip
			hidden_effect = { country_event = { id = flavor_krakazol.350 } }
		}
		else = {
			if = {
				limit = { has_country_modifier = krakazol_drinking_iron_perm }
				custom_tooltip = krakazol_drinking_lose_perm_tooltip
			}
			hidden_effect = { 
				4284 = { save_event_target_as = drinking_province }
				set_ruler_flag = krakazol_ruler_drinking_iron
				country_event = { id = flavor_krakazol.301 } 
			}
		}
		custom_tooltip = flavor_krakazol.300.tooltip1
	}

	#dwarovar dark
	option = {
		name = flavor_krakazol.300.c
		ai_chance = { factor = 5 }
		goto = 4266 #krakazol
		trigger = { owns = 4266 }

		if = {
			limit = { 4266 = { local_autonomy = 30 } }
			custom_tooltip = krakazol_drinking_high_autonomy_tooltip
			hidden_effect = { country_event = { id = flavor_krakazol.350 } }
		}
		else = {
			if = {
				limit = { has_country_modifier = krakazol_drinking_dark_perm }
				custom_tooltip = krakazol_drinking_lose_perm_tooltip
			}
			hidden_effect = { 
				4266 = { save_event_target_as = drinking_province }
				set_ruler_flag = krakazol_ruler_drinking_dark
				country_event = { id = flavor_krakazol.301 } 
			}
		}
		custom_tooltip = flavor_krakazol.300.tooltip2
	}

	#beard turner
	option = {
		name = flavor_krakazol.300.e
		ai_chance = { factor = 5 }
		goto = 4462 #kepakkazol
		trigger = { owns = 4462 }

		if = {
			limit = { 4462 = { local_autonomy = 30 } }
			custom_tooltip = krakazol_drinking_high_autonomy_tooltip
			hidden_effect = { country_event = { id = flavor_krakazol.350 } }
		}
		else = {
			if = {
				limit = { has_country_modifier = krakazol_drinking_beard_perm }
				custom_tooltip = krakazol_drinking_lose_perm_tooltip
			}
			hidden_effect = { 
				4462 = { save_event_target_as = drinking_province }
				set_ruler_flag = krakazol_ruler_drinking_beard
				country_event = { id = flavor_krakazol.301 } 
			}
		}
		custom_tooltip = flavor_krakazol.300.tooltip3
	}

	#diggers delight
	option = {
		name = flavor_krakazol.300.f
		ai_chance = { factor = 5 }
		goto = mithril_province
		trigger = { 
			mission_completed = krakazol_am_dwarf
			has_saved_event_target = mithril_province 
		}

		if = {
			limit = { event_target:mithril_province = { local_autonomy = 30 } }
			custom_tooltip = krakazol_drinking_high_autonomy_tooltip
			hidden_effect = { country_event = { id = flavor_krakazol.350 } }
		}
		else = {
			if = {
				limit = { has_country_modifier = krakazol_drinking_digging_perm }
				custom_tooltip = krakazol_drinking_lose_perm_tooltip
			}
			hidden_effect = { 
				event_target:mithril_province = { save_event_target_as = drinking_province }
				set_ruler_flag = krakazol_ruler_drinking_digging
				country_event = { id = flavor_krakazol.301 } 
			}
		}
		custom_tooltip = flavor_krakazol.300.tooltip4
	}

	#heart burner
	option = {
		name = flavor_krakazol.300.g
		ai_chance = { factor = 5 }
		goto = 4446 #dakhilamvi
		trigger = { 
			mission_completed = krakazol_spicing_up
			owns = 4446 
		}

		if = {
			limit = { 4446 = { local_autonomy = 30 } }
			custom_tooltip = krakazol_drinking_high_autonomy_tooltip
			hidden_effect = { country_event = { id = flavor_krakazol.350 } }
		}
		else = {
			if = {
				limit = { has_country_modifier = krakazol_drinking_heart_perm }
				custom_tooltip = krakazol_drinking_lose_perm_tooltip
			}
			hidden_effect = { 
				4446 = { save_event_target_as = drinking_province }
				set_ruler_flag = krakazol_ruler_drinking_heart
				country_event = { id = flavor_krakazol.301 } 
			}
		}
		custom_tooltip = flavor_krakazol.300.tooltip5
	}

	#yellow jelly
	option = {
		name = flavor_krakazol.300.h
		ai_chance = { factor = 5 }
		goto = 4269 #earthseed
		trigger = { 
			mission_completed = krakazol_gold_malt
			owns = 4269
		}

		if = {
			limit = { event_target:gold_province = { local_autonomy = 30 } }
			custom_tooltip = krakazol_drinking_high_autonomy_tooltip
			hidden_effect = { country_event = { id = flavor_krakazol.350 } }
		}
		else = {
			if = {
				limit = { has_country_modifier = krakazol_drinking_yellow_perm }
				custom_tooltip = krakazol_drinking_lose_perm_tooltip
			}
			hidden_effect = { 
				4269 = { save_event_target_as = drinking_province }
				set_ruler_flag = krakazol_ruler_drinking_yellow
				country_event = { id = flavor_krakazol.301 } 
			}
		}
		custom_tooltip = flavor_krakazol.300.tooltip6
	}

	#gizzards green
	option = {
		name = flavor_krakazol.300.i
		ai_chance = { factor = 5 }
		goto = 4350 #tuwad dhumankon
		trigger = { 
			mission_completed = krakazol_seeing_green
			owns = 4350 
		}

		if = {
			limit = { 4350 = { local_autonomy = 30 } }
			custom_tooltip = krakazol_drinking_high_autonomy_tooltip
			hidden_effect = { country_event = { id = flavor_krakazol.350 } }
		}
		else = {
			if = {
				limit = { has_country_modifier = krakazol_drinking_gizzard_perm }
				custom_tooltip = krakazol_drinking_lose_perm_tooltip
			}
			hidden_effect = { 
				4350 = { save_event_target_as = drinking_province }
				set_ruler_flag = krakazol_ruler_drinking_gizzard
				country_event = { id = flavor_krakazol.301 } 
			}
		}
		custom_tooltip = flavor_krakazol.300.tooltip7
	}

	#shattered nose
	option = {
		name = flavor_krakazol.300.j
		ai_chance = { factor = 5 }
		goto = 4265 #grozumdihr
		trigger = { 
			mission_completed = krakazol_cant_be_serious
			owns = 4265 
		}

		if = {
			limit = { 4265 = { local_autonomy = 30 } }
			custom_tooltip = krakazol_drinking_high_autonomy_tooltip
			hidden_effect = { country_event = { id = flavor_krakazol.350 } }
		}
		else = {
			if = {
				limit = { has_country_modifier = krakazol_drinking_shattered_perm }
				custom_tooltip = krakazol_drinking_lose_perm_tooltip
			}
			hidden_effect = { 
				4265 = { save_event_target_as = drinking_province }
				set_ruler_flag = krakazol_ruler_drinking_shattered
				country_event = { id = flavor_krakazol.301 } 
			}
		}
		custom_tooltip = flavor_krakazol.300.tooltip8
	}

	#gut smoker
	option = {
		name = flavor_krakazol.300.k
		ai_chance = { factor = 5 }
		goto = 4247 #kanzad
		trigger = { 
			mission_completed = krakazol_explosive_personality
			owns = 4247 
		}

		if = {
			limit = { 4247 = { local_autonomy = 30 } }
			custom_tooltip = krakazol_drinking_high_autonomy_tooltip
			hidden_effect = { country_event = { id = flavor_krakazol.350 } }
		}
		else = {
			if = {
				limit = { has_country_modifier = krakazol_drinking_gut_perm }
				custom_tooltip = krakazol_drinking_lose_perm_tooltip
			}
			hidden_effect = { 
				4247 = { save_event_target_as = drinking_province }
				set_ruler_flag = krakazol_ruler_drinking_gut
				country_event = { id = flavor_krakazol.301 } 
			}
		}
		custom_tooltip = flavor_krakazol.300.tooltip9
	}

	#drinkers dispute
	option = {
		name = flavor_krakazol.300.l
		ai_chance = { factor = 5 }
		goto = 4539 #taraghata
		trigger = { 
			mission_completed = krakazol_fragrant_tusks
			owns = 4539 
		}

		if = {
			limit = { 4539 = { local_autonomy = 30 } }
			custom_tooltip = krakazol_drinking_high_autonomy_tooltip
			hidden_effect = { country_event = { id = flavor_krakazol.350 } }
		}
		else = {
			if = {
				limit = { has_country_modifier = krakazol_drinking_dispute_perm }
				custom_tooltip = krakazol_drinking_lose_perm_tooltip
			}
			hidden_effect = { 
				4539 = { save_event_target_as = drinking_province }
				set_ruler_flag = krakazol_ruler_drinking_dispute
				country_event = { id = flavor_krakazol.301 } 
			}
		}
		custom_tooltip = flavor_krakazol.300.tooltip10
	}

	#belly Breath
	option = {
		name = flavor_krakazol.300.m
		ai_chance = { factor = 5 }
		goto = 4325 #slavepits
		trigger = { 
			mission_completed = krakazol_belly_beast
			owns = 4325 
		}

		if = {
			limit = { 4325 = { local_autonomy = 30 } }
			custom_tooltip = krakazol_drinking_high_autonomy_tooltip
			hidden_effect = { country_event = { id = flavor_krakazol.350 } }
		}
		else = {
			if = {
				limit = { has_country_modifier = krakazol_drinking_belly_perm }
				custom_tooltip = krakazol_drinking_lose_perm_tooltip
			}
			hidden_effect = { 
				4325 = { save_event_target_as = drinking_province }
				set_ruler_flag = krakazol_ruler_drinking_belly
				country_event = { id = flavor_krakazol.301 } 
			}
		}
		custom_tooltip = flavor_krakazol.300.tooltip11
	}

	#ancestors ale
	option = {
		name = flavor_krakazol.300.n
		ai_chance = { factor = 5 }
		goto = spirit_province
		trigger = {
			mission_completed = krakazol_pure_spirits
			OR = {
				owns = 4465
				owns = 4450
			}
		}

		if = {
			limit = { 
				4465 = { local_autonomy = 30 } #khadisrapur
				4450 = { local_autonomy = 30 } #babhagama
			}
			custom_tooltip = krakazol_drinking_high_autonomy_tooltip
			hidden_effect = { country_event = { id = flavor_krakazol.350 } }
		}
		else = {
			if = {
				limit = { has_country_modifier = krakazol_drinking_ancestor_perm }
				custom_tooltip = krakazol_drinking_lose_perm_tooltip
			}
			hidden_effect = {
				if = {
					limit = { 4465 = { NOT = { local_autonomy = 30 } } }
					4465 = { save_event_target_as = drinking_province }
				}
				else = { 4450 = { save_event_target_as = drinking_province } }
				set_ruler_flag = krakazol_ruler_drinking_ancestor
				country_event = { id = flavor_krakazol.301 } 
			}
		}
		custom_tooltip = flavor_krakazol.300.tooltip12
	}
}

#round 1
country_event = {
	id = flavor_krakazol.301
	title = flavor_krakazol.301.t
	desc = flavor_krakazol.301.d
	picture = FEAST_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		tag = I20
		has_country_flag = krakazol_drinking_menu_open
	}

	immediate = { hidden_effect = { change_variable = { drink_lvl = 1 } } }

	#chug
	option = {
		name = flavor_krakazol.chug
		ai_chance = { factor = 5 }
		krakazol_drink_effect = { Round = 1 }
		event_target:drinking_province = { add_local_autonomy = 10 }
		hidden_effect = { country_event = { id = flavor_krakazol.302 } }
	}

	#stop
	option = {
		name = flavor_krakazol.stop
		ai_chance = { factor = 5 }
		add_prestige = -25
		add_legitimacy = -40
		add_ruler_modifier = { name = krakazol_unworthy_1 duration = 3650 }
		hidden_effect = { add_country_modifier = { name = krakazol_drink_fix duration = 2 hidden = yes } }
		krakazol_clr_drinking_flags = yes
	}
}

#round 2
country_event = {
	id = flavor_krakazol.302
	title = flavor_krakazol.302.t
	desc = flavor_krakazol.302.d
	picture = FEAST_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		tag = I20
		has_country_flag = krakazol_drinking_menu_open
	}

	immediate = { hidden_effect = { change_variable = { drink_lvl = 1 } } }

	#chug
	option = {
		name = flavor_krakazol.chug
		ai_chance = { factor = 5 }
		krakazol_drink_effect = { Round = 2 }
		event_target:drinking_province = { 
			add_local_autonomy = 10 
			add_province_modifier = { name = krakazol_drinking_province_debuff_1 duration = 1460 }
		}
		hidden_effect = { country_event = { id = flavor_krakazol.303 } }
	}

	#stop
	option = {
		name = flavor_krakazol.stop
		ai_chance = { factor = 5 }
		add_prestige = -15
		add_legitimacy = -20
		add_ruler_modifier = { name = krakazol_unworthy_2 duration = 3650 }
		hidden_effect = { add_country_modifier = { name = krakazol_drink_fix duration = 2 hidden = yes } }
		krakazol_clr_drinking_flags = yes
	}
}

#round 3
country_event = {
	id = flavor_krakazol.303
	title = flavor_krakazol.303.t
	desc = flavor_krakazol.303.d
	picture = FEAST_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		tag = I20
		has_country_flag = krakazol_drinking_menu_open
	}

	immediate = { hidden_effect = { change_variable = { drink_lvl = 1 } } }

	#chug
	option = {
		name = flavor_krakazol.chug
		ai_chance = { factor = 5 }
		krakazol_drink_effect = { Round = 3 }
		event_target:drinking_province = { add_local_autonomy = 10 }
		hidden_effect = { country_event = { id = flavor_krakazol.304 } }
	}

	#stop
	option = {
		name = flavor_krakazol.stop
		ai_chance = { factor = 5 }
		add_prestige = -5
		add_legitimacy = -10
		add_ruler_modifier = { name = krakazol_unworthy_3 duration = 3650 }
		hidden_effect = { add_country_modifier = { name = krakazol_drink_fix duration = 2 hidden = yes } }
		krakazol_clr_drinking_flags = yes
	}
}

#round 4
country_event = {
	id = flavor_krakazol.304
	title = flavor_krakazol.304.t
	desc = flavor_krakazol.304.d
	picture = FEAST_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		tag = I20
		has_country_flag = krakazol_drinking_menu_open
	}

	immediate = { hidden_effect = { change_variable = { drink_lvl = 1 } } }

	#chug
	option = {
		name = flavor_krakazol.chug
		ai_chance = { factor = 5 }
		krakazol_drink_effect = { Round = 4 }
		event_target:drinking_province = { 
			add_local_autonomy = 10
			hidden_effect = { remove_province_modifier = krakazol_drinking_province_debuff_1 }
			add_province_modifier = { name = krakazol_drinking_province_debuff_2 duration = 1460 }
		}
		hidden_effect = { country_event = { id = flavor_krakazol.305 } }
	}

	#stop
	option = {
		name = flavor_krakazol.stop
		ai_chance = { factor = 5 }
		hidden_effect = { add_country_modifier = { name = krakazol_drink_fix duration = 2 hidden = yes } }
		krakazol_clr_drinking_flags = yes
	}
}

#round 5
country_event = {
	id = flavor_krakazol.305
	title = flavor_krakazol.305.t
	desc = flavor_krakazol.305.d
	picture = FEAST_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		tag = I20
		has_country_flag = krakazol_drinking_menu_open
	}

	immediate = { hidden_effect = { change_variable = { drink_lvl = 1 } } }

	#chug
	option = {
		name = flavor_krakazol.chug
		ai_chance = { factor = 5 }
		krakazol_drink_effect = { Round = 5 }
		event_target:drinking_province = { add_local_autonomy = 10 }
		krakazol_drink_death_effect = { Base = 1 type = tipsy }
		hidden_effect = { country_event = { id = flavor_krakazol.306 } }
	}

	#stop
	option = {
		name = flavor_krakazol.stop
		ai_chance = { factor = 5 }
		hidden_effect = { add_country_modifier = { name = krakazol_drink_fix duration = 2 hidden = yes } }
		krakazol_clr_drinking_flags = yes
	}
}

#round 6
country_event = {
	id = flavor_krakazol.306
	title = flavor_krakazol.306.t
	desc = flavor_krakazol.306.d
	picture = FEAST_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		tag = I20
		has_country_flag = krakazol_drinking_menu_open
		NOT = { has_ruler_flag = krakazol_died }
	}

	immediate = { hidden_effect = { change_variable = { drink_lvl = 1 } } }

	#chug
	option = {
		name = flavor_krakazol.chug
		ai_chance = { factor = 5 }
		krakazol_drink_effect = { Round = 6 }
		event_target:drinking_province = { 
			add_local_autonomy = 10 
			hidden_effect = { remove_province_modifier = krakazol_drinking_province_debuff_2 }
			add_province_modifier = { name = krakazol_drinking_province_debuff_3 duration = 1460 }
		}
		hidden_effect = { remove_country_modifier = krakazol_drinking_tipsy }
		krakazol_drink_death_effect = { Base = 2 type = drunk }
		hidden_effect = { country_event = { id = flavor_krakazol.307 } }
	}

	#stop
	option = {
		name = flavor_krakazol.stop
		ai_chance = { factor = 5 }
		hidden_effect = { add_country_modifier = { name = krakazol_drink_fix duration = 2 hidden = yes } }
		krakazol_clr_drinking_flags = yes
	}
}

#round 7
country_event = {
	id = flavor_krakazol.307
	title = flavor_krakazol.307.t
	desc = flavor_krakazol.307.d
	picture = FEAST_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		tag = I20
		has_country_flag = krakazol_drinking_menu_open
		NOT = { has_ruler_flag = krakazol_died }
	}

	immediate = { hidden_effect = { change_variable = { drink_lvl = 1 } } }

	#chug
	option = {
		name = flavor_krakazol.chug
		ai_chance = { factor = 5 }
		krakazol_drink_effect = { Round = 7 }

		event_target:drinking_province = { add_local_autonomy = 10 }
		hidden_effect = { remove_country_modifier = krakazol_drinking_drunk }
		krakazol_drink_death_effect = { Base = 3 type = hammered }
		krakazol_clr_drinking_flags = yes
	}

	#stop
	option = {
		name = flavor_krakazol.stop
		ai_chance = { factor = 5 }
		hidden_effect = { add_country_modifier = { name = krakazol_drink_fix duration = 2 hidden = yes } }
		krakazol_clr_drinking_flags = yes
	}
}



#recursive main menu
country_event = {
	id = flavor_krakazol.350
	title = flavor_krakazol.350.t
	desc = flavor_krakazol.350.d
	picture = FORT_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	trigger = { always = yes }

	option = {
		name = flavor_krakazol.350.a	
		ai_chance = { factor = 5 }
		country_event = { id = flavor_krakazol.300 }
	}
}

