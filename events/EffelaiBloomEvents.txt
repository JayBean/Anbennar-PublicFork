#Funny Effelai Events

namespace = effelai_bloom
#manager event
country_event = {
	id = effelai_bloom.0
	title = effelai_bloom.0.t
	desc = effelai_bloom.0.d
	picture = EFFELAI_BLOOM_ANIMATED_eventPicture
	
	is_triggered_only = yes
	
	hidden = yes
	trigger = {
		has_country_flag = effelai_has_effelai_province
	}
	option = {
		name = effelai_bloom.0.a
		if = { #dormancy stuff
			limit = {
				NOT = {
					has_global_flag = effelai_blooming_over
				}
				had_country_flag = {
					flag = effelai_returning_to_dormancy
					days = 300
				}
			}
			clr_country_flag = effelai_returning_to_dormancy
			set_country_flag = effelai_returning_to_dormancy
			every_owned_province = {
				effelai_dormancy_to_land = yes
			}
			if = {
				limit = {
					has_country_flag = effelai_will_check_for_compelete_dormancy
				}
				effelai_check_returned_to_dormancy = yes
				clr_country_flag = effelai_will_check_for_compelete_dormancy
			}
		}
		if = {
			limit = {
				has_country_flag = effelai_attuned_path
			}
			hidden_effect = {
				effelai_check_attunement_tier = yes
				if = {
					limit = {
						has_country_flag = effelai_has_leveled_up_attunement
					}
					clr_country_flag = effelai_has_leveled_up_attunement
					country_event = { #effelai levelup notification event
						id = effelai_bloom.360
						days = 10
					}
				}
			}
			if = {
				limit = { 
					has_country_flag = effelai_bloom_begin_attuning_provinces
				}
				change_variable = {
					which = effelai_bloom_attunement
					value = 2
				}
				country_event = {
					id = effelai_bloom.321
				}
				
			}
			else_if = {
				limit = { 
					has_country_flag = effelai_bloom_is_attuning
				}
				if = {
					limit = { #Attunement complete - move on to eventchain
						check_variable = {
							which = effelai_bloom_attunement
							value = 80
						}
					}
					clr_country_flag = effelai_bloom_is_attuning
					if = {
						limit = { 
							any_owned_province = {
								is_effelai_network_hub = yes
								is_effelai_network_burned = no
							}
						}
						country_event = {
							id = effelai_bloom.311 #mages can now begin studying the hub itself
							days = 10
						}
					}
					else = {
						country_event = {
							id = effelai_bloom.312 #you need a hub to continue
							days = 10
						}
					}
				}
				change_variable = {
					which = effelai_bloom_attunement
					value = 1
				}
				random_list = {
					85 = {
						#nothing!
					}
					5 = {
						#invest in mages
						country_event = {
							id = effelai_bloom.305
							days = 10
						}
					}
					5 = {
						#invest in artificery
						country_event = {
							id = effelai_bloom.306
							days = 10
						}
					}
					5 = {
						#mage ruler has questionable character
						country_event = {
							id = effelai_bloom.307
							days = 10
						}
					}
				}
			}
			else_if = {
				limit = { 
					has_country_flag = effelai_attuning_requires_hub
				}
				if = {
					limit = { 
						any_owned_province = {
							is_effelai_network_burned = no
							is_effelai_network_hub = yes
						}
					}
					country_event = {
						id = effelai_bloom.311 #mages can now begin studying the hub itself
						days = 10
					}
					clr_country_flag = effelai_attuning_requires_hub
				}
			}
			else_if = { 
				limit = { 
					has_country_flag = effelai_bloom_is_studying_attunement
				}
				random_list = { #will experience slightly more than 5 events over the course of studying
					70 = {		#or slightly less than 6 if using artificer help
						#nothing happens
						modifier = {
							factor = 0.5
							has_country_flag = effelai_studying_artificers_helping
						}
					}
					5 = { #mages irritate effelai
						country_event = {
							id = effelai_bloom.313
							days = 10
						}
					}
					5 = { #seedthrall attacks during study
						country_event = {
							id = effelai_bloom.314
							days = 10
						}
					}
					5 = { #great beasts attack during study
						country_event = {
							id = effelai_bloom.315
							days = 10
						}
					}
					5 = { #mage catastrophe
						country_event = {
							id = effelai_bloom.316
							days = 10
						}
					}
					5 = { #study effort gets seedthralled
						country_event = {
							id = effelai_bloom.317
							days = 10
						}
					}
				}
			}
		}
		if = { #bloom pulse events
			limit = {
				has_country_modifier = effelai_bloom_in_progress
			}
			random_list = {
				#General Events
				63 = {	
					modifier = {
						factor = 0.25
						has_country_modifier = blooming_no_event
					}
					modifier = { #High attunement countries dont get negative events, this compensates
						factor = 2
						OR = {
							has_country_modifier = effelai_attunement_tier_3
							has_country_modifier = effelai_attunement_tier_4
							has_country_modifier = effelai_attunement_tier_5
						}
						has_country_modifier = blooming_no_event
					}
					modifier = {
						factor = 2
						OR = {
							has_country_modifier = effelai_attunement_tier_3
							has_country_modifier = effelai_attunement_tier_4
							has_country_modifier = effelai_attunement_tier_5
						}
					}
					add_country_modifier = {
						name = blooming_no_event
						duration = 365
						hidden = yes
					}
				}
				10 = { #Song Servants Attack
					modifier = {
						factor = 0
						OR = {
							has_country_modifier = effelai_attunement_tier_3
							has_country_modifier = effelai_attunement_tier_4
							has_country_modifier = effelai_attunement_tier_5
							NOT = {
								num_of_cities = 8
							}
							religion_group = effelai
						}
					}
					country_event = {
						id = effelai_bloom.201
						days = 30
						random = 300
					}
				}
				10 = { #Citizens are vanishing
					modifier = {
						factor = 0
						OR = {
							has_country_modifier = effelai_attunement_tier_3
							has_country_modifier = effelai_attunement_tier_4
							has_country_modifier = effelai_attunement_tier_5
						}
					}
					country_event = {
						id = effelai_bloom.202
						days = 30
						random = 300
					}
				}
				10 = { #Walking trees migrate
					modifier = {
						factor = 0
						OR = {
							has_country_modifier = effelai_attunement_tier_3
							has_country_modifier = effelai_attunement_tier_4
							has_country_modifier = effelai_attunement_tier_5
						}
					}
					country_event = {
						id = effelai_bloom.203
						days = 30
						random = 300
					}
				}
				10 = { #Wild growth
					country_event = {
						id = effelai_bloom.204
						days = 30
						random = 300
					}
				}
				10 = { #Great Harvest
					trigger = {
						any_owned_province = {
							has_province_modifier = effelai_wild_growth
						}
					}
					country_event = {
						id = effelai_bloom.205
						days = 30
						random = 300
					}
				}
				10 = { #Settlement calmed by song
					country_event = {
						id = effelai_bloom.206
						days = 30
						random = 300
					}
				}
				10 = { #Settlement disrupted by song
					modifier = {
						factor = 0
						OR = {
							has_country_modifier = effelai_attunement_tier_3
							has_country_modifier = effelai_attunement_tier_4
							has_country_modifier = effelai_attunement_tier_5
						}
					}
					country_event = {
						id = effelai_bloom.207
						days = 30
						random = 300
					}
				}
				10 = { #Settlement devastated by songs
					modifier = {
						factor = 0
						OR = {
							has_country_modifier = effelai_attunement_tier_3
							has_country_modifier = effelai_attunement_tier_4
							has_country_modifier = effelai_attunement_tier_5
						}
					}
					trigger = {
						any_owned_province = {
							has_province_modifier = effelai_disrupting_songs
						}
					}
					country_event = {
						id = effelai_bloom.208
						days = 30
						random = 300
					}
				}
				10 = { #Advisor killed by vines
					modifier = {
						factor = 0
						OR = {
							NOT = {
								capital_scope = {
									superregion = effelai_superregion
								}
							}
							has_country_modifier = effelai_attunement_tier_3
							has_country_modifier = effelai_attunement_tier_4
							has_country_modifier = effelai_attunement_tier_5
						}
					}
					country_event = {
						id = effelai_bloom.209
						days = 30
						random = 300
					}
				}
				#Region Specific Events
				#Soruinic Events
				1 = {
					trigger = {
						soruin_region = {
							owned_by = ROOT
							#would make this not happen if burned but i think burning revealing ruins is fine too
						}
					}
					country_event = { #Effelai Bloom unearths ruins
						id = effelai_bloom.219
						days = 30
						random = 300
					}
				}
				#Leechdens Events
				6 = {
					modifier = {
						factor = 0
						OR = {
							has_country_modifier = effelai_attunement_tier_3
							has_country_modifier = effelai_attunement_tier_4
							has_country_modifier = effelai_attunement_tier_5
						}
					}
					trigger = {
						leechdens_region = {
							owned_by = ROOT
							is_effelai_network_burned = no
							is_city = yes
						}
					}
					country_event = { #Great battle in Leechdens witnessed
						id = effelai_bloom.220
						days = 30
						random = 300
					}
				}
				#East Effelai Events
				4 = {
					modifier = {
						factor = 0
						OR = {
							has_country_modifier = effelai_attunement_tier_3
							has_country_modifier = effelai_attunement_tier_4
							has_country_modifier = effelai_attunement_tier_5
						}
					}
					trigger = {
						east_effelai_region = {
							owned_by = ROOT
							is_effelai_network_burned = no
							is_city = yes
						}
					}
					country_event = { #Carnivorous plants attack shorelines
						id = effelai_bloom.221
						days = 30
						random = 300
					}
				}
				#Dry Coast Events
				4 = {
					trigger = { #Renewal from ashes
						dry_coast_region = {
							owned_by = ROOT
							is_effelai_network_burned = yes
						}
					}
					country_event = {
						id = effelai_bloom.222
						days = 30
						random = 300
					}
				}
				#South Effelai Events
				4 = {
					trigger = {
						south_effelai_region = {
							owned_by = ROOT
							is_effelai_network_burned = no
						}
					}
				}
				#Mushroom Forest Events
				4 = {
					trigger = {
						mushroom_forest_region = {
							owned_by = ROOT
							is_effelai_network_burned = no
						}
					}
				}
				#West Effelai Events
				4 = {
					trigger = {
						west_effelai_region = {
							owned_by = ROOT
							is_effelai_network_burned = no
						}
					}
				}
			}
		}
	}
	
}
#Dormant Intro Event
country_event = {
	id = effelai_bloom.1
	title = effelai_bloom.1.t
	desc = effelai_bloom.1.d
	picture = EFFELAI_BLOOM_ANIMATED_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		any_owned_province = {
			OR = {
				has_province_modifier = effelai_roots_dormant
				has_province_modifier = effelai_hub_dormant
			}
		}
	}
	
	#Just an Intro "ok"
	option = {
		name = effelai_bloom.1.a
		
	}
}
#Effelai Blooming Event
country_event = {
	id = effelai_bloom.2
	title = effelai_bloom.2.t
	desc = effelai_bloom.2.d
	picture = EFFELAI_BLOOM_ANIMATED_eventPicture
	
	is_triggered_only = yes
	
	hidden = yes
	
	trigger = {
		NOT = {
			has_global_flag = effelai_blooming_over
			has_global_flag = effelai_bloom_already_happened
		}
	}
	
	fire_only_once = yes
	
	major = yes
	
	immediate = {
		hidden_effect = {
			effelai_superregion = {
				if = {
					limit = {
						has_province_modifier = effelai_roots_dormant
					}
					remove_province_modifier = effelai_roots_dormant
					add_permanent_province_modifier = {
						name = effelai_roots_blooming
						duration = -1
					}
				}
				else_if = {
					limit = {
						has_province_modifier = effelai_hub_dormant
					}
					remove_province_modifier = effelai_hub_dormant
					add_permanent_province_modifier = {
						name = effelai_hub_blooming
						duration = -1
					}
				}
			}
			set_global_flag = effelai_blooming_happening
			1804 = {
				set_variable = {
					which = effelai_total_hubs_burned
					value = 2
				}
				set_variable = {
					which = effelai_total_inactive_hubs
					value = 0
				}
			}
			set_global_flag = effelai_dry_coast_burned
			#For tags with their capital in the Effelai - And not colonies
			every_country = {
				if = {
					limit = {
						OR = {
							tag = G15
							tag = G16
							tag = G17
							tag = G18
							tag = G19
							tag = G20
						}
						religion_group = effelai
					}
					set_country_flag = effelai_bloom_native_tribe
					add_country_modifier = {
						name = effelai_bloom_in_progress
						duration = -1
					}
					country_event = {
						id = effelai_bloom.4
						days = 180
					}
				}
				else_if = { #all non-colonial aelantiri nations pick path
					limit = {
						is_colonial_nation = no
						capital_scope = {
							OR = {
								continent = north_america
								continent = south_america
							}
						}
						any_owned_province = {
							superregion = effelai_superregion
							is_effelai_network_province = yes
						}
					}
					country_event = {
						id = effelai_bloom.3
						days = 180
					}
					add_country_modifier = {
						name = effelai_bloom_in_progress
						duration = -1
					}
				}
				else_if = { #non-aelantiri colonizer nations get a seperate path pick event
					limit = { 
						capital_scope = {
							NOT = {
								continent = north_america
								continent = south_america
							}
						}
						OR = {
							any_owned_province = {
								superregion = effelai_superregion
								is_effelai_network_province = yes
							}
							any_subject_country = {
								any_owned_province = {
									superregion = effelai_superregion
									is_effelai_network_province = yes
								}
							}
						}
					}
					country_event = {
						id = effelai_bloom.5
						days = 180
					}
					add_country_modifier = {
						name = effelai_bloom_in_progress
						duration = -1
					}
				}
				else_if = { #player CNs get to pick instead of their overlord picking for them
					limit = { 
						is_subject = yes
						ai = no
						any_owned_province = {
							superregion = effelai_superregion
							is_effelai_network_province = yes
						}
					}
					country_event = {
						id = effelai_bloom.3
						days = 180
					}
					add_country_modifier = {
						name = effelai_bloom_in_progress
						duration = -1
					}
				}
			}
			set_global_flag = effelai_bloom_already_happened
		}
	}
	
	
	#Very bad moment
	option = {
		name = effelai_bloom.2.a
		
	}
}

#Effelai Blooming Regular Choice Event (for Aelantiri nations)
country_event = {
	id = effelai_bloom.3
	title = effelai_bloom.3.t
	desc = effelai_bloom.3.d
	picture = EFFELAI_BLOOM_ANIMATED_eventPicture
	
	is_triggered_only = yes
	
	
	#Attuned Path
	option = { 
		name = effelai_bloom.3.a

		ai_chance = {
			factor = 10
		}
		trigger = {
			capital_scope = {
				is_effelai_network_province = yes
			}
		}
		set_country_flag = effelai_attuned_path
		country_event = {
			id = effelai_bloom.301
			days = 95
		}
	}
	
	#Burned Path
	option = {
		name = effelai_bloom.3.b

		ai_chance = {
			factor = 70
		}
		hidden_effect = {
			set_variable = {
				which = effelai_hubs_burned
				value = 0
			}
		}
		custom_tooltip = effelai_burn_path_tt
		set_country_flag = effelai_burned_path
	}
	option = { #Attuned Path - for those who are not currently eligible
		name = effelai_bloom.3.c
		trigger = {
			capital_scope = {
				NOT = {
					is_effelai_network_province = yes
				}
			}
		}
		set_country_flag = effelai_wants_attuned_path
	}
	#Dormancy Path
	option = {
		name = effelai_bloom.3.e

		ai_chance = {
			factor = 20
		}
		set_country_flag = effelai_dormancy_path
		hidden_effect = {
			country_event = {
				id = effelai_bloom.90
				days = 7300
			}
		}
	}
}
#Effelai Blooming Native Self Trigger
country_event = {
	id = effelai_bloom.4
	title = effelai_bloom.4.t
	desc = effelai_bloom.4.d
	picture = EFFELAI_BLOOM_ANIMATED_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			religion = senanset
			religion = song_servants
			religion = chahinanito
			religion = tswohvwohii
		}
		NOT = {
			OR = {
				has_country_flag = effelai_attuned_path
				has_country_flag = effelai_burned_path
				has_country_flag = effelai_bloom_begin_attuning_provinces
				has_country_flag = effelai_attuned_colonizing
			}
		}
	}
	
	#Attuned Path
	option = {
		name = effelai_bloom.4.a
		ai_chance = {
			factor = 20
		}
		set_country_flag = effelai_attuned_path
	}
	
	#Burned Path
	option = {
		name = effelai_bloom.4.b
		ai_chance = {
			factor = 80
		}
		trigger = {
			NOT = {
				has_country_flag = effelai_no_burn
			}
		}
		set_variable = {
			which = effelai_hubs_burned
			value = 0
		}
		set_country_flag = effelai_burned_path
	}
}
#Effelai Bloom Info Event (Non-Aelantiri Nation)
country_event = {
	id = effelai_bloom.5
	title = effelai_bloom.5.t
	desc = effelai_bloom.5.d
	picture = EFFELAI_BLOOM_ANIMATED_eventPicture
	
	is_triggered_only = yes
	
	#Attuned Path
	option = {
		name = effelai_bloom.5.a
		ai_chance = {
			factor = 20
		}
		set_country_flag = effelai_wants_attuned_path
		every_subject_country = {
			limit = {
				ai = yes
				has_effelai_network_province = yes
			}
			set_country_flag = effelai_attuned_path
			
			country_event = {
				id = effelai_bloom.301
				days = 95
			}
		}
	}
	
	#Burned Path
	option = {
		name = effelai_bloom.5.b
		ai_chance = {
			factor = 80
		}
		set_country_flag = effelai_wants_burned_path
		set_variable = {
			which = effelai_hubs_burned
			value = 0
		}
		every_subject_country = {
			limit = {
				ai = yes
				has_effelai_network_province = yes
			}
			set_country_flag = effelai_burned_path
			set_variable = {
				which = effelai_hubs_burned
				value = 0
			}
		}
	}
	#Dormant path
	option = {
		name = effelai_bloom.5.c
		ai_chance = {
			factor = 20
		}
		set_country_flag = effelai_dormancy_path
		hidden_effect = {
			country_event = {
				id = effelai_bloom.90
				days = 7300
			}
		}
		hidden_effect = {
			every_subject_country = {
				limit = {
					ai = yes
					has_effelai_network_province = yes
				}
				set_country_flag = effelai_dormancy_path
				country_event = {
					id = effelai_bloom.90
					days = 7300
				}
				
			}
		}
		
	}
}
country_event = { #checks if country needs to be removed from the effelai system
	id = effelai_bloom.50
	title = effelai_bloom.50.t
	desc = effelai_bloom.50.d
	picture = ARTWORK_eventPicture
	is_triggered_only = yes
	hidden = yes
	option = {
		name = effelai_bloom.50.a
		if = {
			limit = {
				NOT = {
					effelai_superregion = {
						owned_by = ROOT
						is_effelai_network_province = yes
					}
				}
			}
			clr_country_flag = effelai_has_effelai_province
			remove_country_modifier = effelai_bloom_in_progress
		}
	}
}
country_event = { #owned land returns to dormancy
	id = effelai_bloom.90
	title = effelai_bloom.90.t
	desc = effelai_bloom.90.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = effelai_bloom.90.a
		hidden_effect = {
			every_owned_province = {
				effelai_dormancy_to_land = yes
			}
			set_country_flag = effelai_returning_to_dormancy
		}
	}
}
country_event = { #Enough of the effelai has been calmed it returns to dormancy
	id = effelai_bloom.91
	title = effelai_bloom.91.t
	desc = effelai_bloom.91.d
	picture = ARTWORK_eventPicture
	is_triggered_only = yes
	major = yes
	fire_only_once = yes
	option = {
		name = effelai_bloom.91.a
		clr_global_flag = effelai_blooming_happening
		set_global_flag = effelai_blooming_over
		hidden_effect = {
			every_country = {
				limit = {
					has_country_modifier = effelai_bloom_in_progress
				}
				remove_country_modifier = effelai_bloom_in_progress
			}
			effelai_superregion = {
				if = {
					limit = { 
						has_province_modifier = effelai_hub_blooming
					}
					remove_province_modifier = effelai_hub_blooming
					add_permanent_province_modifier = {
						name = effelai_hub_dormant
						duration = -1
					}
				}
				else_if = {
					limit = { 
						has_province_modifier = effelai_roots_blooming
					}
					remove_province_modifier = effelai_roots_blooming
					add_permanent_province_modifier = {
						name = effelai_roots_dormant
						duration = -1
					}
				}
			}
		}
	}
}
country_event = { #Song Servants Attack!
	id = effelai_bloom.201
	title = effelai_bloom.201.t
	desc = effelai_bloom.201.d
	picture = ARTWORK_eventPicture
	is_triggered_only = yes
	goto = effelai_target_prov
	trigger = {
		any_owned_province = {
			is_effelai_network_province = yes
			is_city = yes
		}
	}
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					is_city = yes
					is_effelai_network_province = yes
				}
				save_event_target_as = effelai_target_prov
			}
		}
	}
	option = {
		name = effelai_bloom.201.a
		event_target:effelai_target_prov = {
			spawn_rebels = {
				size = 3
				type = song_servant_ambusher_rebels
			}
		}
	}
}
country_event = { #Citizens go missing
	id = effelai_bloom.202
	title = effelai_bloom.202.t
	desc = effelai_bloom.202.d
	picture = ARTWORK_eventPicture
	is_triggered_only = yes
	goto = effelai_target_prov
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					is_effelai_network_province = yes
				}
				save_event_target_as = effelai_target_prov
			}
		}
	}
	option = {
		name = effelai_bloom.202.a
		event_target:effelai_target_prov = {
			add_devastation = 15
			random_list = {
				50 = {
					add_base_tax = -1
				}
				50 = {
					add_base_production = -1
				}
			}
		}
	}
}
country_event = { #Walking Trees Migrate
	id = effelai_bloom.203
	title = effelai_bloom.203.t
	desc = effelai_bloom.203.d
	picture = TREANTS_eventPicture
	is_triggered_only = yes
	goto = effelai_target_prov
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					is_effelai_network_province = yes
				}
				save_event_target_as = effelai_target_prov
			}
		}
	}
	option = {
		name = effelai_bloom.203.a
		event_target:effelai_target_prov = {
			area = {
				add_devastation = 20
			}
		}
	}
}
country_event = { #Wild Growth
	id = effelai_bloom.204
	title = effelai_bloom.204.t
	desc = effelai_bloom.204.d
	picture = ARTWORK_eventPicture
	is_triggered_only = yes
	goto = effelai_target_prov
	immediate = {
		hidden_effect = {
			random_owned_province = { #prefers province with grown tradegoods
				limit = {
					is_effelai_network_province = yes
				}
				save_event_target_as = effelai_target_prov
			}
			random_owned_province = {
				limit = {
					is_effelai_network_province = yes
					NOT = {
						trade_goods = iron
						trade_goods = copper
						trade_goods = salt
						trade_goods = fish
						trade_goods = naval_supplies
						trade_goods = cloth
						trade_goods = wool
					}
				}
				save_event_target_as = effelai_target_prov
			}
		}
	}
	option = {
		name = effelai_bloom.204.a
		event_target:effelai_target_prov = {
			add_province_modifier = {
				name = effelai_wild_growth
				duration = 3650
			}
		}
	}
}
country_event = { #Great Harvest
	id = effelai_bloom.205
	title = effelai_bloom.205.t
	desc = effelai_bloom.205.d
	picture = ARTWORK_eventPicture
	is_triggered_only = yes
	option = {
		name = effelai_bloom.205.a
		add_country_modifier = {
			name = effelai_great_harvest
			duration = 1825
		}
		add_years_of_income = 0.1
	}
}
country_event = { #Settlement calmed by songs
	id = effelai_bloom.206
	title = effelai_bloom.206.t
	desc = effelai_bloom.206.d
	picture = ARTWORK_eventPicture
	is_triggered_only = yes
	goto = effelai_target_prov
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					is_effelai_network_province = yes
				}
				save_event_target_as = effelai_target_prov
			}
		}
	}
	option = {
		name = effelai_bloom.206.a
		event_target:effelai_target_prov = {
			add_province_modifier = {
				name = effelai_calming_songs
				duration = 3650
			}
		}
	}
}
country_event = { #Settlement very much not calmed by songs
	id = effelai_bloom.207
	title = effelai_bloom.207.t
	desc = effelai_bloom.207.d
	picture = ARTWORK_eventPicture
	is_triggered_only = yes
	goto = effelai_target_prov
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					is_effelai_network_province = yes
				}
				save_event_target_as = effelai_target_prov
			}
		}
	}
	option = {
		name = effelai_bloom.207.a
		event_target:effelai_target_prov = {
			add_province_modifier = {
				name = effelai_disrupting_songs
				duration = 3650
			}
			add_devastation = 20
		}
	}
}
country_event = {  #Song devastates settlement
	id = effelai_bloom.208
	title = effelai_bloom.208.t
	desc = effelai_bloom.208.d
	picture = ARTWORK_eventPicture
	is_triggered_only = yes
	goto = effelai_target_prov
	trigger = {
		any_owned_province = {
			has_province_modifier = effelai_disrupting_songs
		}
	}
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					has_province_modifier = effelai_disrupting_songs
				}
				save_event_target_as = effelai_target_prov
			}
		}
	}
	option = {
		name = effelai_bloom.208.a
		event_target:effelai_target_prov = {
			remove_province_modifier = effelai_disrupting_songs
			add_province_modifier = {
				name = effelai_devastating_songs
				duration = 3650
			}
			add_base_tax = -1
			add_base_production = -1
			add_base_manpower = -1
		}
	}
}
country_event = { #Strangler vines kill advisor
	id = effelai_bloom.209
	title = effelai_bloom.209.t
	desc = effelai_bloom.209.d
	picture = ARTWORK_eventPicture
	is_triggered_only = yes
	option = {
		name = effelai_bloom.209.a
		kill_advisor = random
	}
}
country_event = { #Effelai blooming unearths ruins
	id = effelai_bloom.219
	title = effelai_bloom.219.t
	desc = effelai_bloom.219.d
	picture = ARTWORK_eventPicture
	is_triggered_only = yes
	goto = effelai_target_prov
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					region = soruin_region
				}
				save_event_target_as = effelai_target_prov
			}
			if = { #Picks random owned soruin province. If it can then find a province without precursor relics, it swaps to that
				limit = {
					soruin_region = {
						owned_by = ROOT
						NOT = {
							trade_goods = precursor_relics
						}
					}
				}
				random_owned_province = {
					limit = {
						region = soruin_region
						NOT = {
							trade_goods = precursor_relics
						}
					}
					save_event_target_as = effelai_target_prov
				}
			}
		}
	}
	option = {
		name = effelai_bloom.219.a
		event_target:effelai_target_prov = {
			if = {
				limit = {
					trade_goods = precursor_relics
				}
				add_base_production = 3
			}
			else = {
				change_trade_goods = precursor_relics
			}
		}
	}
	option = {
		name = effelai_bloom.219.b
		add_country_modifier = {
			name = effelai_unearthed_ruins
			duration = 7300
		}
	}
}
country_event = { #Great battle witnessed in the Leechdens
	id = effelai_bloom.220
	title = effelai_bloom.220.t
	desc = effelai_bloom.220.d
	picture = ARTWORK_eventPicture
	is_triggered_only = yes
	goto = effelai_target_prov
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					region = leechdens_region
				}
				save_event_target_as = effelai_target_prov
			}
			if = { #if you own nurmipi, the battle has a higher chance of occuring there. wonder why?
				limit = {
					owns = 2232
				}
				random = {
					chance = 34
					2232 = {
						save_event_target_as = effelai_target_prov
					}
				}
			}
		}
	}
	option = {
		name = effelai_bloom.220.a
		event_target:effelai_target_prov = {
			add_devastation = 20
		}
		add_mil_power = 50
	}
}
country_event = { #Eastern Effelai plants attack shore
	id = effelai_bloom.221
	title = effelai_bloom.221.t
	desc = effelai_bloom.221.d
	picture = ARTWORK_eventPicture
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					region = east_effelai_region
					NOT = {
						has_province_flag = effelai_plant_attack
					}
					has_port = yes
				}
				area = {
					set_province_flag = effelai_plant_attack
				}
			}
			random_owned_province = {
				limit = {
					region = east_effelai_region
					NOT = {
						has_province_flag = effelai_plant_attack
					}
					has_port = yes
				}
				area = {
					set_province_flag = effelai_plant_attack
				}
			}
		}
	}
	option = {
		name = effelai_bloom.221.a
		every_owned_province = {
			limit = {
				has_province_flag = effelai_plant_attack
			}
			clr_province_flag = effelai_plant_attack
			random_list = {
				33 = {
					add_base_tax = -1
				}
				33 = {
					add_base_production = -1
				}
				33 = {
					add_base_manpower = -1
				}
			}
			add_province_modifier = {
				name = effelai_attacked_by_plants
				duration = 3650
			}
		}
	}
}
country_event = { #Renewal from the Ashes in Dry Coast
	id = effelai_bloom.222
	title = effelai_bloom.222.t
	desc = effelai_bloom.222.d
	picture = ARTWORK_eventPicture
	is_triggered_only = yes
	goto = effelai_target_prov
	trigger = {
		has_country_flag = effelai_attuned_path
	}
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					region = dry_coast_region
				}
				save_event_target_as = effelai_target_prov
			}
		}
	}
	option = {
		name = effelai_bloom.222.a
		event_target:effelai_target_prov = {
			area = {
				add_permanent_province_modifier = {
					name = effelai_renewal_in_dry_coast
					duration = 36500
				}
			}
			if = {
				limit = {
					area_for_scope_province = {
						type = all
						owned_by = ROOT
					}
				}
				ROOT = {
					add_stability_or_adm_power = yes
				}
			}
		}
	}
}
country_event = { #attunement event chain begin
	id = effelai_bloom.301
	title = effelai_bloom.301.t
	desc = effelai_bloom.301.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = effelai_bloom.301.a #don't care
		add_prestige = 25
		hidden_effect = {
			country_event = {
				id = effelai_bloom.309
				days = 1825
			}
		}
	}
	option = {
		name = effelai_bloom.301.b #sure, we'll talk
		hidden_effect = {
			country_event = {
				id = effelai_bloom.308
				days = 65
			}
		}
	}
}
country_event = {#invest in mages
	id = effelai_bloom.305
	title = effelai_bloom.305.t
	desc = effelai_bloom.305.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = effelai_bloom.305.a
		hidden_effect = {
			change_variable = {
				which = effelai_bloom_attunement
				value = 10
			}
		}
		add_years_of_income = -0.2
		add_adm_power = -100
		add_dip_power = -100
	}
	option = {
		name = effelai_bloom.305.b
		add_prestige = -1
	}
}
country_event = { #invest in artificers
	id = effelai_bloom.306
	title = effelai_bloom.306.t
	desc = effelai_bloom.306.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_country_flag = effelai_studying_artificers_helping
	}
	option = {
		name = effelai_bloom.306.a
		hidden_effect = {
			change_variable = {
				which = effelai_bloom_attunement
				value = 10
			}
		}
		add_years_of_income = -1
		add_dip_power = -25
		add_adm_power = -25
	}
	option = {
		name = effelai_bloom.306.b
		add_prestige = -1
	}
}
country_event = { #mage ruler speeds research
	id = effelai_bloom.307
	title = effelai_bloom.307.t
	desc = effelai_bloom.307.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		ruler_has_mage_personality = yes
	}
	option = {
		name = effelai_bloom.307.a
		hidden_effect = {
			change_variable = {
				which = effelai_bloom_attunement
				value = 10
			}
		}
		add_manpower = -1
		add_mil_power = -100
		#infamy effect?
	}
	option = {
		name = effelai_bloom.307.b
		add_prestige = -1
	}
}
country_event = { #event chain - natives explain the effelai
	id = effelai_bloom.308
	title = effelai_bloom.308.t
	desc = effelai_bloom.308.d
	picture = EFFELAI_BLOOM_ANIMATED_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = effelai_bloom.308.a
		hidden_effect = {
			country_event = {
				id = effelai_bloom.310
				days = 65
			}
		}
	}
}
country_event = { 
	id = effelai_bloom.309 #reapproach natives - they are salty now though
	title = effelai_bloom.309.t
	desc = effelai_bloom.309.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = effelai_bloom.309.a
		hidden_effect = {
			country_event = {
				id = effelai_bloom.310
				days = 65
			}
		}
	}
}
country_event = { #mages begin search
	id = effelai_bloom.310
	title = effelai_bloom.310.t
	desc = effelai_bloom.310.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			set_variable = {
				which = effelai_bloom_attunement
				value = 0
			}
			set_country_flag = effelai_bloom_is_attuning
		}
	}
	option = { #
		name = effelai_bloom.310.a
		
	}
}
country_event = { #mages want to study hub
	id = effelai_bloom.311
	title = effelai_bloom.311.t
	desc = effelai_bloom.311.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
		set_country_flag = effelai_bloom_is_studying_attunement
	}
	option = {
		name = effelai_bloom.311.a
		random_owned_province = {
			limit = {
				is_effelai_network_hub = yes
			}
			add_building_construction = {
				building = mage_tower
				cost = 0.5
				speed = 0.25
			}
			set_province_flag = effelai_attuning_study_hub
		}
		add_estate_loyalty = {
			estate = estate_mages
			loyalty = 10
		}
		hidden_effect = {
			country_event = {
				id = effelai_bloom.318
				days = 3650
			}
		}
	}
	option = { #artificers want to help, too
		name = effelai_bloom.311.b
		trigger = {
			has_estate = estate_artificers
		}
		add_dip_power = -50
		add_mil_power = -50
		set_country_flag = effelai_studying_artificers_helping
		random_owned_province = {
			limit = {
				is_effelai_network_hub = yes
			}
			add_building_construction = {
				building = workshop
				cost = 2
				speed = 0.5
			}
			set_province_flag = effelai_attuning_study_hub
		}
		add_estate_loyalty = {
			estate = estate_artificers
			loyalty = 10
		}
		add_estate_loyalty = {
			estate = estate_mages
			loyalty = -10
		}
		hidden_effect = {
			country_event = {
				id = effelai_bloom.318
				days = 2555
			}
		}
	}
}
country_event = { #mages require hub.
	id = effelai_bloom.312
	title = effelai_bloom.312.t
	desc = effelai_bloom.312.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = effelai_bloom.312.a
		set_country_flag = effelai_attuning_requires_hub
		hidden_effect = {
			if = { #requires an unburnt hub. this precludes dry coast region
				limit = {
					capital_scope = {
						NOT = {
							region = dry_coast_region
						}
					}
				}
				capital_scope = {
					region = { 
						if = {
							limit = { 
								is_effelai_network_hub = yes
							}
							add_claim = ROOT
						}
					}
				}
			}
			else = {
				east_effelai_region = {
					if = {
						limit = { 
							is_effelai_network_hub = yes
						}
						add_claim = ROOT
					}
				}
			}
		}
	}
}
country_event = { #mages irritate the effelai
	id = effelai_bloom.313
	title = effelai_bloom.313.t
	desc = effelai_bloom.313.d
	picture = EFFELAI_BLOOM_ANIMATED_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = effelai_bloom.313.a
		random_owned_province = {
			limit = {
				has_province_flag = effelai_attuning_study_hub
			}
			add_devastation = 33
				random_list = {
					16 = {
						add_base_tax = -1
					}
					16 = {
						add_base_production = -1
					}
					16 = {
						add_base_manpower = -1
					}
					50 = {

					}
				}
			every_neighbor_province = {
				limit = {
					owned_by = ROOT
				}
				add_devastation = 33
				random_list = {
					16 = {
						add_base_tax = -1
					}
					16 = {
						add_base_production = -1
					}
					16 = {
						add_base_manpower = -1
					}
					50 = {

					}
				}
			}
		}
	}
}
country_event = { #seedthrall attack during studying
	id = effelai_bloom.314
	title = effelai_bloom.314.t
	desc = effelai_bloom.314.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					NOT = {
						has_province_flag = effelai_seedthrall_attack_tempflag
						has_province_flag = effelai_attuning_study_hub
					}
					is_effelai_network_province = yes
				}
				set_province_flag = effelai_seedthrall_attack_tempflag
			}
			random_owned_province = {
				limit = {
					NOT = {
						has_province_flag = effelai_seedthrall_attack_tempflag
						has_province_flag = effelai_attuning_study_hub
					}
					is_effelai_network_province = yes
				}
				set_province_flag = effelai_seedthrall_attack_tempflag
			}
			random_owned_province = {
				limit = {
					NOT = {
						has_province_flag = effelai_seedthrall_attack_tempflag
						has_province_flag = effelai_attuning_study_hub
					}
					is_effelai_network_province = yes
				}
				set_province_flag = effelai_seedthrall_attack_tempflag
			}
			if = {
				limit = {
					has_country_flag = effelai_studying_artificers_helping
				}
				random_owned_province = {
					limit = {
						NOT = {
							has_province_flag = effelai_seedthrall_attack_tempflag
							has_province_flag = effelai_attuning_study_hub
						}
						is_effelai_network_province = yes
					}
					set_province_flag = effelai_seedthrall_attack_tempflag
				}
			}
		}
	}
	option = {
		name = effelai_bloom.314.a
		every_province = {
			if = {
				limit = { 
					has_province_flag = effelai_seedthrall_attack_tempflag
				}
				spawn_rebels = {
					size = 4
					type = song_servant_ambusher_rebels
				}
				clr_province_flag = effelai_seedthrall_attack_tempflag
			}
			if = {
				limit = {
					has_province_flag = effelai_attuning_study_hub
				}
				spawn_rebels = {
					size = 6
					type = song_servant_ambusher_rebels
				}
			}
		}
	}
}
country_event = { #great beasts attack hub
	id = effelai_bloom.315
	title = effelai_bloom.315.t
	desc = effelai_bloom.315.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = effelai_bloom.315.a
		random_owned_province = {
			limit = {
				has_province_flag = effelai_attuning_study_hub
			}
			spawn_rebels = {
				size = 7
				type = effelai_beast_rebels
			}
		}
	}
}
country_event = { #mage catastrophe
	id = effelai_bloom.316
	title = effelai_bloom.316.t
	desc = effelai_bloom.316.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		NOT = {
			has_country_flag = effelai_bloom_is_studying_mage_catastrophe
		}
	}
	immediate = {
		set_country_flag = effelai_bloom_is_studying_mage_catastrophe
		hidden_effect = {
			random_owned_province = {
				limit = {
					has_province_flag = effelai_attuning_study_hub
				}
				add_devastation = 50
				every_neighbor_province = {
					limit = {
						owned_by = ROOT
					}
					add_devastation = 25
				}
			}
		}
	}
	option = {
		name = effelai_bloom.316.a
		add_dip_power = -100
	}
	option = {
		name = effelai_bloom.316.b
		add_adm_power = -100
	}
}
country_event = { #mages get songservanted
	id = effelai_bloom.317
	title = effelai_bloom.317.t
	desc = effelai_bloom.317.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = effelai_bloom.317.a
		random_owned_province = {
			limit = {
				has_province_flag = effelai_attuning_study_hub
			}
			spawn_rebels = {
				type = song_servant_ambusher_rebels
				size = 3
			}
			add_devastation = 25
			random_list = {
				33 = {
					add_base_tax = -1
				}
				33 = {
					add_base_production = -1
				}
				33 = {
					add_base_manpower = -1
				}
			}
		}
	}
}
country_event = { #mages make a breakthrough
	id = effelai_bloom.318
	title = effelai_bloom.318.t
	desc = effelai_bloom.318.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = effelai_bloom.318.a
		clr_country_flag = effelai_studying_artificers_helping
		clr_country_flag = effelai_bloom_is_studying_attunement
		country_event = {
			id = effelai_bloom.320
			days = 365
		}
	}
}
#Effelai Attunement Path Events
country_event = { #you can now begin attuning your land to the effelai
	id = effelai_bloom.320
	title = effelai_bloom.320.t
	desc = effelai_bloom.320.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = effelai_bloom.320.a
		set_country_flag = effelai_bloom_begin_attuning_provinces
		set_variable = {
			which = effelai_bloom_attunement
			value = 0
		}
		add_country_modifier = {
			name = effelai_attunement_tier_1
			duration = -1
		}
		every_owned_province = {
			limit = {
				has_province_flag = effelai_attuning_study_hub
			}
			clr_province_flag = effelai_attuning_study_hub
		}
		capital_scope = {
			save_event_target_as = effelai_target_prov
		}
		if = {
			limit = {
				capital_scope = {
					OR = {
						is_island = yes
						is_effelai_network_province = no
						is_effelai_network_burned = yes
					}
				}
			}
			if = {
				limit = {
					any_owned_province = {
						is_effelai_network_burned = no
						is_effelai_network_hub = yes
					}
				}
				random_owned_province = {
					limit = {
						is_effelai_network_burned = no
						is_effelai_network_hub = yes
					}
					save_event_target_as = effelai_target_prov
				}
			}
			else = { #if they have no unburnt effelai provinces something has gone terribly wrong lol
				random_owned_province = {
					limit = {
						is_effelai_network_province = yes
						is_effelai_network_burned = no
					}
					save_event_target_as = effelai_target_prov
				}
			}
		}
		event_target:effelai_target_prov = {
			if = {
				limit = { 
					is_effelai_network_root = yes
				}
				effelai_bloom_remove_roots = yes
				add_permanent_province_modifier = {
					name = effelai_roots_attuned
					duration = -1
				}
			}
			else_if = {
				limit = { 
					is_effelai_network_hub = yes
				}
				effelai_bloom_remove_hub = yes
				add_permanent_province_modifier = {
					name = effelai_hub_attuned
					duration = -1
				}
			}
		}
		hidden_effect = {
			effelai_check_attunement_tier = yes
			if = {
				limit = {
					has_country_flag = effelai_has_leveled_up_attunement
				}
				clr_country_flag = effelai_has_leveled_up_attunement
				country_event = { #effelai levelup notification event
					id = effelai_bloom.360
					days = 10
				}
			}
		}
	}
}
country_event = { #event that spreads attunement

	id = effelai_bloom.321
	title = effelai_bloom.321.t
	desc = effelai_bloom.321.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	hidden = yes
	option = {
		name = effelai_bloom.321
		if = { #failsafe. if you lost all your attuned provinces, it will set your capital to attuned (or a hub if not applicable)
			limit = {
				NOT = {
					any_owned_province = {
						is_effelai_network_attuned = yes
					}
				}
			}
			capital_scope = {
				if = {
					limit = { 
						is_effelai_network_root = yes
						NOT = {
							is_island = yes
						}
					}
					effelai_bloom_remove_roots = yes
					add_permanent_province_modifier = {
						name = effelai_roots_attuned
						duration = -1
					}
				}
				else_if = {
					limit = { 
						is_effelai_network_hub = yes
					}
					effelai_bloom_remove_hub = yes
					add_permanent_province_modifier = {
						name = effelai_hub_attuned
						duration = -1
					}
				}
				else = {
					ROOT = { #dunno if you should be even able to do this if your capital isnt in the effelai?
						random_owned_province = {
							limit = {
								is_effelai_network_hub = yes
							}
							effelai_bloom_remove_hub = yes
							add_permanent_province_modifier = {
								name = effelai_hub_attuned
								duration = -1
							}
						}
					}
				}
			}
			set_variable = {
				which = effelai_bloom_attunement
				value = 0
			}
		}
		while = {
			limit = {
				check_variable = {
					which = effelai_bloom_attunement
					value = 1
				}
			}
			if = {
				limit = { 
					any_owned_province = {
						NOT = {
							is_effelai_network_attuned = yes
							is_effelai_network_burned = yes
						}
						is_effelai_network_province = yes
					}
				}
				if = {
					limit = { #spread to a random marked province
						any_owned_province = {
							has_province_modifier = effelai_province_is_attuning
						}
					}
					random_owned_province = {
						limit = {
							has_province_modifier = effelai_province_is_attuning
						}
						remove_province_modifier = effelai_province_is_attuning
						effelai_attune_province = yes
						owner = {
							change_variable = {
								which = effelai_bloom_attunement
								value = -1
							}
						}
					}
				}
				else = { #if no more provinces are marked, mark every eligible province
					set_country_flag = effelai_bloom_has_not_marked_province
					every_owned_province = {
						if = {
							limit = {
								NOT = {
									is_effelai_network_attuned = yes
									is_effelai_network_burned = yes
								}
								is_effelai_network_province = yes
								any_neighbor_province = {
									is_effelai_network_attuned = yes
								}
							}
							owner = {
								clr_country_flag = effelai_bloom_has_not_marked_province
							}
							add_province_modifier = {
								name = effelai_province_is_attuning
								duration = -1
							}
						}
					}
					if = { #Disconnected lands. move on to colonizing
						limit = { 
							has_country_flag = effelai_bloom_has_not_marked_province
						}
						clr_country_flag = effelai_bloom_has_not_marked_province
						if = { #every owned province has been converted
							limit = {
								has_country_flag = effelai_attuned_colonizing
							}
							if = {
								limit = { 
									any_owned_province = {
										is_city = yes
										is_effelai_network_attuned = yes
										any_empty_neighbor_province = {
											is_effelai_network_province = yes
											NOT = {
												is_effelai_network_burned = yes
											}
										}
									}
								}
								random_owned_province = {
									limit = {
										is_city = yes
										is_effelai_network_attuned = yes
										any_empty_neighbor_province = {
											is_effelai_network_province = yes
											NOT = {
												is_effelai_network_burned = yes
											}
											
										}
									}
									random_empty_neighbor_province = {
										limit = {
											NOT = {
												is_effelai_network_burned = yes
											}
										}
										add_siberian_construction = 200
										effelai_attune_province = yes
									}
								}
								change_variable = {
									which = effelai_bloom_attunement
									value = -2
								}
							}
							else = {
								set_variable = {
									which = effelai_bloom_attunement
									value = 0
								}
							}
						}
						else = {
							set_variable = {
								which = effelai_bloom_attunement
								value = 0
							}
						}
					}
				}
			}
			else_if = { #every owned province has been converted
				limit = {
					has_country_flag = effelai_attuned_colonizing
				}
				if = {
					limit = { 
						any_owned_province = {
							is_city = yes
							is_effelai_network_attuned = yes
							any_empty_neighbor_province = {
								is_effelai_network_province = yes
								NOT = {
									is_effelai_network_burned = yes
								}
							}
						}
					}
					random_owned_province = {
						limit = {
							is_city = yes
							is_effelai_network_attuned = yes
							any_empty_neighbor_province = {
								is_effelai_network_province = yes
								NOT = {
									is_effelai_network_burned = yes
								}
							}
						}
						random_empty_neighbor_province = {
							limit = {
								NOT = {
									is_effelai_network_burned = yes
								}
							}
							add_siberian_construction = 200
							effelai_attune_province = yes
						}
					}
					change_variable = {
						which = effelai_bloom_attunement
						value = -2
					}
				}
				else = {
					set_variable = {
						which = effelai_bloom_attunement
						value = 0
					}
				}
			}

			else = { #every province is converted
				set_variable = {
					which = effelai_bloom_attunement
					value = 0
				}
			}
		}
	}
}
country_event = { #congragulations, you have leveled up your attunement
	id = effelai_bloom.360
	title = effelai_bloom.360.t
	desc = effelai_bloom.360.d
	picture = EFFELAI_TEMPLE_ANIMATED_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = effelai_bloom.360.a
		add_adm_power = 100
		add_dip_power = 100
		add_mil_power = 100
	}
}
#Our Goddess Stirs
country_event = {
	id = effelai_bloom.370
	title = effelai_bloom.370.t
	desc = effelai_bloom.370.d
	picture = EFFELAI_BLOOM_ANIMATED_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
	}
	#Take the offer now
	option = {
		name = effelai_bloom.370.a

		add_estate_loyalty = {
			estate = estate_mages
			loyalty = 10
		}
		add_adm_power = -50
		add_dip_power = -50
		add_mil_power = -50
	}
}
#Approached with providence
country_event = {
	id = effelai_bloom.371
	title = effelai_bloom.371.t
	desc = effelai_bloom.371.d
	picture = EFFELAI_BLOOM_ANIMATED_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			country_event = {
				id = effelai_bloom.2
				days = 3652
			}
		}
	}
	#Take the offer and Attune
	option = {
		name = effelai_bloom.371.a
		add_estate_loyalty = {
			estate = estate_mages
			loyalty = 10
		}
		add_adm_power = -100
		add_dip_power = -100
		add_mil_power = -100
	}
}
#Destiny Embraced
country_event = {
	id = effelai_bloom.372
	title = effelai_bloom.372.t
	desc = effelai_bloom.372.d
	picture = EFFELAI_BLOOM_ANIMATED_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			country_event = {
				id = effelai_bloom.2
				days = 3652
			}
		}
	}
	#Construct the heart
	option = {
		name = effelai_bloom.372.a
		trigger = {
			NOT = {
				has_dlc = Leviathan
			}
		}
		hidden_effect = {
			set_country_flag = effelai_no_burn
			set_country_flag = effelai_construct_the_heart
		}
	}

	option = {
		name = effelai_bloom.372.b
		country_event = {
			id = effelai_bloom.373
			days = 60
		}
		hidden_effect = {
			set_country_flag = effelai_no_burn
		}
	}
}
#Olaka'utká - Beginning and the end
country_event = {
	id = effelai_bloom.373
	title = effelai_bloom.373.t
	desc = effelai_bloom.373.d
	picture = EFFELAI_TEMPLE_ANIMATED_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			set_country_flag = effelai_bloom_begin_attuning_provinces
			set_country_flag = effelai_attuned_colonizing
			set_country_flag = effelai_attuned_path
			set_variable = {
				which = effelai_bloom_attunement
				value = 20
			}
			if = {
				limit = {
					NOT = {
						has_dlc = Leviathan
					}
				}
				country_event = {
					id = effelai_bloom.2
					days = 365
				}
			}
			clr_country_flag = banned_magic
			clr_country_flag = banned_adventurers
			2378 = {
				if = {
					limit = { 
						owned_by = ROOT
					}
					effelai_bloom_remove_roots = yes
					add_permanent_province_modifier = {
						name = effelai_roots_attuned
						duration = -1
					}
				}
				else = {
					ROOT = { #dunno if you should be even able to do this if your capital isnt in the effelai?
						random_owned_province = {
							limit = {
								is_effelai_network_hub = yes
							}
							effelai_bloom_remove_hub = yes
							add_permanent_province_modifier = {
								name = effelai_hub_attuned
								duration = -1
							}
						}
					}
				}
			}
		}
	}
	#Now Attuned
	option = {
		name = effelai_bloom.373.a
		custom_tooltip = effelai_bloom_attunement_info_tt
		add_country_modifier = {
			name = effelai_attunement_tier_1
			duration = -1
		}
		hidden_effect = {
			effelai_check_attunement_tier = yes
			change_government = theocracy
			add_government_reform = effelai_alianaiarat_reform
			change_government_reform_progress = 200
			set_country_flag = effelai_attuned_path
			add_country_modifier = {
				name = effelai_attunement_tier_1
				duration = -1
			}
			add_country_modifier = {
				name = effelai_overgrown_settlements
				duration = 7300
			}
			random_owned_province = {
				limit = {
					has_province_flag = effelai_heart_construction_site
				}
				remove_province_modifier = effelai_heart_construction
				add_province_triggered_modifier = effelai_heart_ptm
			}
			if = {
				limit = {
					has_country_flag = effelai_has_leveled_up_attunement
				}
				clr_country_flag = effelai_has_leveled_up_attunement
				country_event = { #effelai levelup notification event
					id = effelai_bloom.360
					days = 10
				}
			}
		}
	}
}
#Rejection Of The Gift
country_event = {
	id = effelai_bloom.374
	title = effelai_bloom.374.t
	desc = effelai_bloom.374.d
	picture = EFFELAI_BLOOM_ANIMATED_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
	
	}
	#Rejection
	option = {
		name = effelai_bloom.374.a
		add_mil_power = -50
		add_dip_power = -50
		set_country_flag = effelai_burned_path
		#x_province = { Add province id here
			#add rebels here
		#}
	}
}
#Seek out the monument
country_event = {
	id = effelai_bloom.398
	title = effelai_bloom.398.t
	desc = effelai_bloom.398.d
	picture = EFFELAI_TEMPLE_ANIMATED_eventPicture

	is_triggered_only = yes

	fire_only_once = yes

	immediate = {
		hidden_effect = {
			2378 = {
				discover_country = ROOT
			}
			if = {
				limit ={
					G18 = {
						ai = yes
					}
				}
				2267 = {
					decolonize = yes
				}
			}
		}
	}

	option = {
		name = effelai_bloom.398.a
		goto = 2378

	}
}
#Checks if the monument is still yours
country_event = {
	id = effelai_bloom.399
	title = effelai_bloom.399.t
	desc = effelai_bloom.399.d
	picture = EFFELAI_BLOOM_ANIMATED_eventPicture
	
	is_triggered_only = yes
	
	hidden = yes
	
	immediate = {
		if = {
			limit = {
				ROOT = {
					has_country_flag = effelai_heart_constructor
					any_owned_province = {
						has_province_flag = effelai_heart_construction_site
					}
				}
			}
			country_event = {
				id = effelai_bloom.373
			}
		}
		else = {
			set_country_flag = effelai_construct_the_heart
		}
	}
	
	#Now Attuned
	option = {
		name = effelai_bloom.399.a
	}
}
#Effelai Burn Events
country_event = { #you lost a hub during burning the region.
	id = effelai_bloom.420
	title = effelai_bloom.420.t
	desc = effelai_bloom.420.d
	picture = EFFELAI_BLOOM_ANIMATED_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			effelai_bloom_burn_cancel_burning = yes
		}
	}
	option = {
		name = effelai_bloom.420.a
	}
}
country_event = { #you lost to songservant rebels during burning the region.
	id = effelai_bloom.421
	title = effelai_bloom.421.t
	desc = effelai_bloom.421.d
	picture = EFFELAI_BLOOM_ANIMATED_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			effelai_bloom_burn_cancel_burning = yes
		}
	}
	option = {
		name = effelai_bloom.421.a
	}
}
country_event = { #burning wave 1
	id = effelai_bloom.431
	title = effelai_bloom.431.t
	desc = effelai_bloom.431.d
	picture = EFFELAI_BLOOM_ANIMATED_eventPicture
	
	is_triggered_only = yes
	goto = effelai_burning_hub
	trigger = {
		has_country_flag = effelai_is_burning
	}
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					has_province_flag = effelai_hub_burn_target
				}
				save_event_target_as = effelai_burning_hub
				area = {
					limit = {
						owned_by = ROOT
						is_island = no
					}
					set_province_flag = effelai_hub_spawning_songservants
				}
			}
		}
	}
	option = {
		name = effelai_bloom.431.a
		hidden_effect = {
			country_event = {
				id = effelai_bloom.432
				days = 45
			}
		}
		every_owned_province = {
			limit = {
				has_province_flag = effelai_hub_spawning_songservants
			}
			effelai_bloom_burn_spawn_songservants = yes
			clr_province_flag = effelai_hub_spawning_songservants
		}
	}
}
country_event = { #burning wave 2
	id = effelai_bloom.432
	title = effelai_bloom.432.t
	desc = effelai_bloom.432.d
	picture = EFFELAI_BLOOM_ANIMATED_eventPicture
	
	is_triggered_only = yes
	goto = effelai_burning_hub
	trigger = {
		has_country_flag = effelai_is_burning
	}
	immediate = {
		hidden_effect = { #hub and a random neighboring unburnt area spawn songservants to kill you
			event_target:effelai_burning_hub = {
				area = {
					limit = {
						owned_by = ROOT
						is_island = no
					}
					set_province_flag = effelai_hub_spawning_songservants
				}
			}
			random_owned_province = {
				limit = {
					NOT = {
						is_effelai_network_burned = yes
						has_province_flag = effelai_hub_spawning_songservants
					}
					any_neighbor_province = {
						has_province_flag = effelai_hub_spawning_songservants
					}
				}
				area = {
					limit = {
						owned_by = ROOT
						is_island = no
					}
					set_province_flag = effelai_hub_spawning_songservants
				}
			}
		}
	}
	option = {
		name = effelai_bloom.432.a
		hidden_effect = {
			country_event = {
				id = effelai_bloom.433
				days = 45
			}
		}
		every_owned_province = {
			limit = {
				has_province_flag = effelai_hub_spawning_songservants
			}
			effelai_bloom_burn_spawn_songservants = yes
			clr_province_flag = effelai_hub_spawning_songservants
		}
	}
}
country_event = {
	id = effelai_bloom.433
	title = effelai_bloom.433.t
	desc = effelai_bloom.433.d
	picture = EFFELAI_BLOOM_ANIMATED_eventPicture
	is_triggered_only = yes
	hidden = yes
	trigger = {
		has_country_flag = effelai_is_burning
	}
	option = { #rebels pacified
		name = effelai_bloom.433.a
		trigger = {
			event_target:effelai_burning_hub = {
				owned_by = ROOT
			}
			NOT = {
				num_of_rebel_armies = 1
				num_of_rebel_controlled_provinces = 1
			}
		}
		country_event = {
			id = effelai_bloom.434
		}
	}
	option = { #rebels occupy your hub
		name = effelai_bloom.433.b
		trigger = {
			event_target:effelai_burning_hub = { #if the hub is uncontested, they win
				owned_by = ROOT
				controlled_by = REB
				NOT = {
					num_of_units_in_province = {
						amount = 1
						who = ROOT
					}
				}
			}
		}
		country_event = {
			id = effelai_bloom.421
		}
	}
	option = { #you lost hub in a war
		name = effelai_bloom.433.c
		trigger = {
			event_target:effelai_burning_hub = {
				NOT = {
					owned_by = ROOT
				}
			}
		}
		event_target:effelai_burning_hub = {
			clr_province_flag = effelai_hub_burn_target
		}
		country_event = {
			id = effelai_bloom.420
		}
	}
	option = { #if fail/winstates are not achieved, stall.
		name = effelai_bloom.433.e
		trigger = {
			event_target:effelai_burning_hub = {
				owned_by = ROOT
			}
			event_target:effelai_burning_hub = {
				OR = {
					NOT = {
						controlled_by = REB
					}
					num_of_units_in_province = {
						amount = 1
						who = ROOT
					}
				}
			}
			OR = {
				num_of_rebel_armies = 1
				num_of_rebel_controlled_provinces = 1
			}
		}
		country_event = {
			id = effelai_bloom.433
			days = 30
		}
	}
}
country_event = { #success. rebels pacified
	id = effelai_bloom.434
	title = effelai_bloom.434.t
	desc = effelai_bloom.434.d
	picture = EFFELAI_BLOOM_ANIMATED_eventPicture
	is_triggered_only = yes
	trigger = {
		has_country_flag = effelai_is_burning
	}
	immediate = {
		hidden_effect = {
			clr_country_flag = effelai_is_burning
			event_target:effelai_burning_hub = {
				remove_province_modifier = effelai_hub_is_burning
				clr_province_flag = effelai_hub_burn_target
				trigger_switch = {
					on_trigger = province_id
					2273 = { #East Effelai
						tswohvothamus_hub_zone = {
							effelai_bloom_burn_effect = yes
						}
					}
					2240 = {
						ainemuno_hub_zone = {
							effelai_bloom_burn_effect = yes
						}
					}
					2286 = {
						wohaiowh_hub_zone = {
							effelai_bloom_burn_effect = yes
						}
					}
					2302 = { #Dry Coast
						uumunkes_hub_zone = {
							effelai_bloom_burn_effect = yes
						}
					}
					2336 = {
						orothaua_hub_zone = {
							effelai_bloom_burn_effect = yes
						}
					}
					2267 = { #South Effelai
						muudand_hub_zone = {
							effelai_bloom_burn_effect = yes
						}
					}
					2377 = {
						skiswoh_hub_zone = {
							effelai_bloom_burn_effect = yes
						}
					}
					2375 = {
						tskeowoh_hub_zone = {
							effelai_bloom_burn_effect = yes
						}
					}
					2355 = { #West Effelai
						aneaurey_hub_zone = {
							effelai_bloom_burn_effect = yes
						} 
					}
					2350 = {
						tsiivoiuga_hub_zone = {
							effelai_bloom_burn_effect = yes
						}
					}
					2193 = { #Soruin
						rakionaastuy_hub_zone = {
							effelai_bloom_burn_effect = yes
						}
					}
					2199 = {
						aneuuam_hub_zone = {
							effelai_bloom_burn_effect = yes
						}
					}
					2204 = {
						senaane_hub_zone = {
							effelai_bloom_burn_effect = yes
						}
					}
					2212 = { #Leechdens
						tohamachucha_hub_zone = {
							effelai_bloom_burn_effect = yes
						}
					}
					2219 = {
						tihichi_hub_zone = {
							effelai_bloom_burn_effect = yes
						}
					}
					2225 = {
						nafahitoha_hub_zone = {
							effelai_bloom_burn_effect = yes
						}
					}
				}
			}
			if = {
				limit = {
					is_subject_other_than_tributary_trigger = yes
				}
				overlord = {
					change_variable = {
						which = effelai_hubs_burned
						value = 1
					}
				}
			}
			else = {
				change_variable = {
					which = effelai_hubs_burned
					value = 1
				}
			}
			1804 = {
				change_variable = {
					which = effelai_total_hubs_burned
					value = 1
				}
			}
			effelai_check_effelai_desecrated = yes
		}
	}
	option = {
		name = effelai_bloom.434.a
		add_prestige = 10
		add_army_tradition = 5
	}
}
country_event = { #AI burn cheat event
	id = effelai_bloom.435
	title = effelai_bloom.435.t
	desc = effelai_bloom.435.d
	picture = EFFELAI_BLOOM_ANIMATED_eventPicture
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					has_province_flag = effelai_hub_burn_target
				}
				clr_province_flag = effelai_hub_burn_target
				trigger_switch = {
					on_trigger = province_id
					2273 = { #East Effelai
						tswohvothamus_hub_zone = {
							effelai_bloom_burn_effect = yes
						}
					}
					2240 = {
						ainemuno_hub_zone = {
							effelai_bloom_burn_effect = yes
						}
					}
					2286 = {
						wohaiowh_hub_zone = {
							effelai_bloom_burn_effect = yes
						}
					}
					2302 = { #Dry Coast
						uumunkes_hub_zone = {
							effelai_bloom_burn_effect = yes
						}
					}
					2336 = {
						orothaua_hub_zone = {
							effelai_bloom_burn_effect = yes
						}
					}
					2267 = { #South Effelai
						muudand_hub_zone = {
							effelai_bloom_burn_effect = yes
						}
					}
					2377 = {
						skiswoh_hub_zone = {
							effelai_bloom_burn_effect = yes
						}
					}
					2375 = {
						tskeowoh_hub_zone = {
							effelai_bloom_burn_effect = yes
						}
					}
					2355 = { #West Effelai
						aneaurey_hub_zone = {
							effelai_bloom_burn_effect = yes
						} 
					}
					2350 = {
						tsiivoiuga_hub_zone = {
							effelai_bloom_burn_effect = yes
						}
					}
					2193 = { #Soruin
						rakionaastuy_hub_zone = {
							effelai_bloom_burn_effect = yes
						}
					}
					2199 = {
						aneuuam_hub_zone = {
							effelai_bloom_burn_effect = yes
						}
					}
					2204 = {
						senaane_hub_zone = {
							effelai_bloom_burn_effect = yes
						}
					}
					2212 = { #Leechdens
						tohamachucha_hub_zone = {
							effelai_bloom_burn_effect = yes
						}
					}
					2219 = {
						tihichi_hub_zone = {
							effelai_bloom_burn_effect = yes
						}
					}
					2225 = {
						nafahitoha_hub_zone = {
							effelai_bloom_burn_effect = yes
						}
					}
				}
			}
			if = {
				limit = {
					is_subject_other_than_tributary_trigger = yes
				}
				overlord = {
					change_variable = {
						which = effelai_hubs_burned
						value = 1
					}
				}
			}
			else = {
				change_variable = {
					which = effelai_hubs_burned
					value = 1
				}
			}
			1804 = {
				change_variable = {
					which = effelai_total_hubs_burned
					value = 1
				}
			}
			effelai_check_effelai_desecrated = yes
		}
	}
	option = {
		name = effelai_bloom.435.a
	}
}
country_event = { #Effelai burned so hard it returns to being dormant
	id = effelai_bloom.450
	title = effelai_bloom.450.t
	desc = effelai_bloom.450.d
	picture = ARTILLERY_eventPicture
	
	is_triggered_only = yes
	
	major = yes
	option = {
		name = effelai_bloom.450.a
		add_country_modifier = {
			name = effelai_desecrator
			duration = -1
		}
		set_global_flag = effelai_blooming_over
		clr_global_flag = effelai_blooming_happening
		hidden_effect = {
			every_country = {
				limit = {
					has_country_modifier = effelai_bloom_in_progress
				}
				remove_country_modifier = effelai_bloom_in_progress
			}
			effelai_superregion = {
				if = {
					limit = {
						has_province_modifier = effelai_hub_blooming
					}
					remove_province_modifier = effelai_hub_blooming
					add_permanent_province_modifier = {
						name = effelai_hub_dormant
						duration = -1
					}
				}
				else_if = {
					limit = { 
						has_province_modifier = effelai_roots_blooming
					}
					remove_province_modifier = effelai_roots_blooming
					add_permanent_province_modifier = {
						name = effelai_roots_dormant
						duration = -1
					}
				}
			}
		}
	}
}
country_event = { #Seedthrall Removeinator
	id = effelai_bloom.799
	title = effelai_bloom.799.t
	desc = effelai_bloom.799.d
	picture = ARTWORK_eventPicture
	is_triggered_only = yes
	hidden = yes
	option = {
		name = effelai_bloom.799.a
		if = {
			limit = {
				NOT = {
					num_of_rebel_armies = 1
					num_of_rebel_controlled_provinces = 1
				}
			}
			every_owned_province = {
				clear_rebels = yes
			}
		}
	}
}
#Government Mechanic: effelai_goddess_intervenes_militarily
country_event = { 
	id = effelai_bloom.800
	title = effelai_bloom.800.t
	desc = effelai_bloom.800.d
	picture = EFFELAI_BLOOM_ANIMATED_eventPicture
	
	is_triggered_only = yes
	
	hidden = yes
	
	immediate = {

	}
	option = {
		name = effelai_bloom.800.a
	}
}
#Government Mechanic: 
country_event = { #Gov Mechanic: Incite Thralls
	id = effelai_bloom.801
	title = effelai_bloom.801.t
	desc = effelai_bloom.801.d
	picture = EFFELAI_BLOOM_ANIMATED_eventPicture
	is_triggered_only = yes
	goto = effelai_target_prov
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					has_country_modifier = effelai_attunement_tier_5
				}
				set_variable = {
					which = effelai_hubs_to_develop
					value = 5
				}
				if = {
					limit = { 
						any_neighbor_country = {
							any_owned_province = {
								continent = south_america
							}
							NOT = {
								is_subject_of = ROOT
							}
						}
					}
					random_neighbor_country = {
						limit = {
							any_owned_province = {
								continent = south_america
							}
							NOT = {
								is_subject_of = ROOT
							}
						}
						save_event_target_as = effelai_target_country
						while = {
							limit = { 
								ROOT = {
									check_variable = {
										which = effelai_hubs_to_develop
										value = 1
									}
								}
							}
							random_owned_province = {
								limit = {
									NOT = {
										is_core = ROOT
									}
									continent = south_america
									any_neighbor_province = {
										OR = {
											is_core = ROOT
											owned_by = ROOT
										}
									}
								}
								add_core = ROOT
							}
							ROOT = {
								change_variable = {
									which = effelai_hubs_to_develop
									value = -1
								}
							}
						}
						ROOT = {
							set_variable = {
								which = effelai_hubs_to_develop
								value = 5
							}
						}
						while = {
							limit = { 
								ROOT = {
									check_variable = {
										which = effelai_hubs_to_develop
										value = 1
									}
								}
							}
							random_owned_province = {
								limit = {
									is_core = ROOT
									continent = south_america
								}
								save_event_target_as = effelai_target_prov
							}
							ROOT = {
								change_variable = {
									which = effelai_hubs_to_develop
									value = -1
								}
							}
							event_target:effelai_target_prov = {
								spawn_rebels = {
									type = seedthrall_rebels
									size = 4
									separatists_target = ROOT
									culture = ROOT
								}
							}
						}
					}
				}
				else = {
					set_country_flag = effelai_no_encroachers
				}
			}
			else = {
				if = {
					limit = { 
						has_country_modifier = effelai_attunement_tier_4
					}
					set_variable = {
						which = effelai_hubs_to_develop
						value = 5
					}
				}
				else_if = {
					limit = { 
						has_country_modifier = effelai_attunement_tier_3
					}
					set_variable = {
						which = effelai_hubs_to_develop
						value = 4
					}
				}
				else_if = {
					limit = { 
						has_country_modifier = effelai_attunement_tier_2
					}
					set_variable = {
						which = effelai_hubs_to_develop
						value = 4
					}
				}
				else = {
					set_variable = {
						which = effelai_hubs_to_develop
						value = 3
					}
				}
				if = {
					limit = {
						any_neighbor_country = {
							has_country_flag = effelai_has_effelai_province
							NOT = {
								is_subject_of = ROOT
							}
						}
					}
					random_neighbor_country = {
						limit = {
							has_country_flag = effelai_has_effelai_province
							NOT = {
								is_subject_of = ROOT
							}
						}
						save_event_target_as = effelai_target_country
						while = {
							limit = { 
								ROOT = {
									check_variable = {
										which = effelai_hubs_to_develop
										value = 1
									}
								}
							}
							random_owned_province = {
								limit = {
									NOT = {
										is_core = ROOT
									}
									is_effelai_network_province = yes
									any_neighbor_province = {
										OR = {
											is_core = ROOT
											owned_by = ROOT
										}
									}
								}
								add_core = ROOT
							}
							ROOT = {
								change_variable = {
									which = effelai_hubs_to_develop
									value = -1
								}
							}
						}
						ROOT = {
							if = {
								limit = {
									has_country_modifier = effelai_attunement_tier_5
								}
								set_variable = {
									which = effelai_hubs_to_develop
									value = 5
								}
							}
							else_if = {
								limit = { 
									has_country_modifier = effelai_attunement_tier_4
								}
								set_variable = {
									which = effelai_hubs_to_develop
									value = 5
								}
							}
							else_if = {
								limit = { 
									has_country_modifier = effelai_attunement_tier_3
								}
								set_variable = {
									which = effelai_hubs_to_develop
									value = 4
								}
							}
							else_if = {
								limit = { 
									has_country_modifier = effelai_attunement_tier_2
								}
								set_variable = {
									which = effelai_hubs_to_develop
									value = 4
								}
							}
							else = {
								set_variable = {
									which = effelai_hubs_to_develop
									value = 3
								}
							}
						}
						while = {
							limit = { 
								ROOT = {
									check_variable = {
										which = effelai_hubs_to_develop
										value = 1
									}
								}
							}
							random_owned_province = {
								limit = {
									is_core = ROOT
									is_effelai_network_province = yes
								}
								save_event_target_as = effelai_target_prov
							}
							ROOT = {
								change_variable = {
									which = effelai_hubs_to_develop
									value = -1
								}
							}
							event_target:effelai_target_prov = {
								if = {
									limit = {
										ROOT = {
											has_country_modifier = effelai_attunement_tier_5
										}
									}
									spawn_rebels = {
										type = seedthrall_rebels
										size = 4
										separatists_target = ROOT
										culture = ROOT
									}
								}
								else_if = {
									limit = {
										ROOT = {
											has_country_modifier = effelai_attunement_tier_4
										}
									}
									spawn_rebels = {
										type = seedthrall_rebels
										size = 3
										separatists_target = ROOT
										culture = ROOT
									}
								}
								else_if = {
									limit = {
										ROOT = {
											has_country_modifier = effelai_attunement_tier_3
										}
									}
									spawn_rebels = {
										type = seedthrall_rebels
										size = 3
										separatists_target = ROOT
										culture = ROOT
									}
								}
								else_if = {
									limit = {
										ROOT = {
											has_country_modifier = effelai_attunement_tier_2
										}
									}
									spawn_rebels = {
										type = seedthrall_rebels
										size = 2
										separatists_target = ROOT
										culture = ROOT
									}
								}
								else = {
									spawn_rebels = {
										type = seedthrall_rebels
										size = 2
										separatists_target = ROOT
										culture = ROOT
									}
								}
							}
						}
					}
				}
				else = { #if your control of the effelai is secure, increases stability instead i guess. change later?
					set_country_flag = effelai_no_encroachers
				}
			}
		}
	}
	option = { #Success
		name = effelai_bloom.801.a
		trigger = {
			NOT = {
				has_country_flag = effelai_no_encroachers
			}
		}
		add_spy_network_in = {
			who = event_target:effelai_target_country
			value = 35
		}
	}
	option = { #No targets - refund
		name = effelai_bloom.801.b
		trigger = {
			has_country_flag = effelai_no_encroachers
		}
		clr_country_flag = effelai_no_encroachers
		if = {
			limit = {
				has_country_modifier = effelai_attunement_tier_5
			}
			add_government_power = {
				mechanic_type = anb_effelai_attuned_1
				power_type = anb_effelai_attuned_resource
				value = 300
			}
		}
		else_if = {
			limit = { 
				has_country_modifier = effelai_attunement_tier_4
			}
			add_government_power = {
				mechanic_type = anb_effelai_attuned_1
				power_type = anb_effelai_attuned_resource
				value = 250
			}
		}
		else_if = {
			limit = { 
				has_country_modifier = effelai_attunement_tier_3
			}
			add_government_power = {
				mechanic_type = anb_effelai_attuned_1
				power_type = anb_effelai_attuned_resource
				value = 200
			}
		}
		else_if = {
			limit = { 
				has_country_modifier = effelai_attunement_tier_2
			}
			add_government_power = {
				mechanic_type = anb_effelai_attuned_1
				power_type = anb_effelai_attuned_resource
				value = 150
			}
		}
		else = {
			add_government_power = {
				mechanic_type = anb_effelai_attuned_1
				power_type = anb_effelai_attuned_resource
				value = 100
			}
		}
	}
}
#Government Mechanic: effelai_goddess_empowers_hubs
country_event = { 
	id = effelai_bloom.802
	title = effelai_bloom.802.t
	desc = effelai_bloom.802.d
	picture = EFFELAI_BLOOM_ANIMATED_eventPicture
	
	is_triggered_only = yes
	
	hidden = yes
	
	immediate = {
		effelai_check_attunement_tier = yes
		if = {
			limit = {
				has_country_modifier = effelai_attunement_tier_1
			}
			add_government_power = {
				mechanic_type = anb_effelai_attuned_1
				power_type = anb_effelai_attuned_resource
				value = -100
			}
			random_owned_province = {
				limit = {
					OR = {
						has_province_modifier = effelai_hub_attuned
						province_id = 2378
					}
				}
				set_province_flag = effelai_develop_hubs_mechanic
				add_base_tax = 2
				add_base_production = 2
				add_base_manpower = 2
			}
		}
		else_if = {
			limit = {
				has_country_modifier = effelai_attunement_tier_2
			}
			add_government_power = {
				mechanic_type = anb_effelai_attuned_1
				power_type = anb_effelai_attuned_resource
				value = -150
			}
			effelai_develop_hubs_effect = yes
		}
		else_if = {
			limit = {
				has_country_modifier = effelai_attunement_tier_3
			}
			add_government_power = {
				mechanic_type = anb_effelai_attuned_1
				power_type = anb_effelai_attuned_resource
				value = -200
			}
			set_variable = {
				which = effelai_hubs_to_develop
				value = 2
			}
			while = {
				limit = {
					NOT = {
						is_variable_equal = {
							which = effelai_hubs_to_develop
							value = 0
						}
					}
				}
				effelai_develop_hubs_effect = yes
				change_variable = {
					which = effelai_hubs_to_develop
					value = -1
				}
			}
		}
		else_if = {
			limit = {
				has_country_modifier = effelai_attunement_tier_4
			}
			add_government_power = {
				mechanic_type = anb_effelai_attuned_1
				power_type = anb_effelai_attuned_resource
				value = -250
			}
			set_variable = {
				which = effelai_hubs_to_develop
				value = 3
			}
			while = {
				limit = {
					NOT = {
						is_variable_equal = {
							which = effelai_hubs_to_develop
							value = 0
						}
					}
				}
				effelai_develop_hubs_effect = yes
				change_variable = {
					which = effelai_hubs_to_develop
					value = -1
				}
			}
		}
		else_if = {
			limit = {
				has_country_modifier = effelai_attunement_tier_5
			}
			add_government_power = {
				mechanic_type = anb_effelai_attuned_1
				power_type = anb_effelai_attuned_resource
				value = -300
			}
			set_variable = {
				which = effelai_hubs_to_develop
				value = 4
			}
			while = {
				limit = {
					NOT = {
						is_variable_equal = {
							which = effelai_hubs_to_develop
							value = 0
						}
					}
				}
				effelai_develop_hubs_effect = yes
				change_variable = {
					which = effelai_hubs_to_develop
					value = -1
				}
			}
			
		}
	}
	option = {
		name = effelai_bloom.802.a
		country_event = {
			id = effelai_bloom.803
		}
	}
}
country_event = { #Develop Hubs notificiation event
	id = effelai_bloom.803
	title = effelai_bloom.803.t
	desc = effelai_bloom.803.d
	picture = EFFELAI_BLOOM_ANIMATED_eventPicture
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					has_province_modifier = effelai_hub_attuned
					has_province_flag = effelai_develop_hubs_mechanic
				}
				clr_province_flag = effelai_develop_hubs_mechanic
				save_event_target_as = effelai_target_prov_1
			}
			if = {
				limit = {
					any_owned_province = {
						has_province_modifier = effelai_hub_attuned
						has_province_flag = effelai_develop_hubs_mechanic
					}
				}
				set_country_flag = effelai_has_target_prov_2
				random_owned_province = {
					limit = {
						has_province_modifier = effelai_hub_attuned
						has_province_flag = effelai_develop_hubs_mechanic
					}
					clr_province_flag = effelai_develop_hubs_mechanic
					save_event_target_as = effelai_target_prov_2
				}
			}
			if = {
				limit = {
					any_owned_province = {
						has_province_modifier = effelai_hub_attuned
						has_province_flag = effelai_develop_hubs_mechanic
					}
				}
				set_country_flag = effelai_has_target_prov_3
				random_owned_province = {
					limit = {
						has_province_modifier = effelai_hub_attuned
						has_province_flag = effelai_develop_hubs_mechanic
					}
					clr_province_flag = effelai_develop_hubs_mechanic
					save_event_target_as = effelai_target_prov_3
				}
			}
			if = {
				limit = {
					any_owned_province = {
						has_province_modifier = effelai_hub_attuned
						has_province_flag = effelai_develop_hubs_mechanic
					}
				}
				set_country_flag = effelai_has_target_prov_4
				random_owned_province = {
					limit = {
						has_province_modifier = effelai_hub_attuned
						has_province_flag = effelai_develop_hubs_mechanic
					}
					clr_province_flag = effelai_develop_hubs_mechanic
					save_event_target_as = effelai_target_prov_4
				}
			}
		}
	}
	option = {
		name = effelai_bloom.803.a
		goto = effelai_target_prov_1
		tooltip = {
			event_target:effelai_target_prov_1 = {
				add_base_tax = 2
				add_base_production = 2
				add_base_manpower = 2
				if = {
					limit = {
						owner = {
							NOT = {
								has_country_modifier = effelai_attunement_tier_1
							}
						}
					}
					every_neighbor_province = {
						limit = {
							owned_by = ROOT
						}
						random_list = {
							33 = {
								add_base_tax = 1
							}
							33 = {
								add_base_production = 1
							}
							33 = {
								add_base_manpower = 1
							}
						}
					}
				}
			}
		}
	}
	option = {
		name = effelai_bloom.803.b
		trigger = {
			has_country_flag = effelai_has_target_prov_2
		}
		goto = effelai_target_prov_2
		tooltip = {
			event_target:effelai_target_prov_2 = {
				add_base_tax = 2
				add_base_production = 2
				add_base_manpower = 2
				if = {
					limit = {
						owner = {
							NOT = {
								has_country_modifier = effelai_attunement_tier_1
							}
						}
					}
					every_neighbor_province = {
						limit = {
							owned_by = ROOT
						}
						random_list = {
							33 = {
								add_base_tax = 1
							}
							33 = {
								add_base_production = 1
							}
							33 = {
								add_base_manpower = 1
							}
						}
					}
				}
			}
		}
	}
	option = {
		name = effelai_bloom.803.c
		trigger = {
			has_country_flag = effelai_has_target_prov_3
		}
		goto = effelai_target_prov_3
		tooltip = {
			event_target:effelai_target_prov_3 = {
				add_base_tax = 2
				add_base_production = 2
				add_base_manpower = 2
				if = {
					limit = {
						owner = {
							NOT = {
								has_country_modifier = effelai_attunement_tier_1
							}
						}
					}
					every_neighbor_province = {
						limit = {
							owned_by = ROOT
						}
						random_list = {
							33 = {
								add_base_tax = 1
							}
							33 = {
								add_base_production = 1
							}
							33 = {
								add_base_manpower = 1
							}
						}
					}
				}
			}
		}
	}
	option = {
		name = effelai_bloom.803.e
		trigger = {
			has_country_flag = effelai_has_target_prov_4
		}
		goto = effelai_target_prov_4
		tooltip = {
			event_target:effelai_target_prov_4 = {
				add_base_tax = 2
				add_base_production = 2
				add_base_manpower = 2
				if = {
					limit = {
						owner = {
							NOT = {
								has_country_modifier = effelai_attunement_tier_1
							}
						}
					}
					every_neighbor_province = {
						limit = {
							owned_by = ROOT
						}
						random_list = {
							33 = {
								add_base_tax = 1
							}
							33 = {
								add_base_production = 1
							}
							33 = {
								add_base_manpower = 1
							}
						}
					}
				}
			}
		}
	}
	after = {
		effelai_develop_hubs_remove_flags_effect = yes
		clr_country_flag = effelai_has_target_prov_4
		clr_country_flag = effelai_has_target_prov_3
		clr_country_flag = effelai_has_target_prov_2
	}
}
