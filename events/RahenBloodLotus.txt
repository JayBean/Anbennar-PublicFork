
namespace = blood_lotus_rebellion

country_event = { # 1 The Blood Lotus Rebellion
	id = blood_lotus_rebellion.1
	title = blood_lotus_rebellion.1.t
	desc = blood_lotus_rebellion.1.d
	picture = ANGRY_MOB_eventPicture

	is_triggered_only = yes
	major = yes

	immediate = {
			
		hidden_effect = {
			# Setup hardline stance.
			blood_lotus_hardline_stance_setup = yes

			add_estate_loyalty = {
				estate = estate_uppercastes
				loyalty = -30
			}
			add_estate_loyalty = {
				estate = estate_middlecastes
				loyalty = -30
			}
			add_estate_loyalty = {
				estate = estate_lowercastes
				loyalty = -30
			}

			# Spawn sympathizers relative to the size of the nation.
			if = {
				limit = {
					development_in_provinces = {
						value = 1000
						superregion = rahen_superregion
					}
				}
				# 8 areas with sympathizers.
				blood_lotus_new_sympathizers = yes
				blood_lotus_new_sympathizers = yes
				blood_lotus_new_sympathizers = yes
				blood_lotus_new_sympathizers = yes
				blood_lotus_new_sympathizers = yes
				blood_lotus_new_sympathizers = yes
				blood_lotus_new_sympathizers = yes
				blood_lotus_new_sympathizers = yes
				blood_lotus_rebellion_spawns_headquarters = yes
			}
			else_if = {
				limit = {
					development_in_provinces = {
						value = 800
						superregion = rahen_superregion
					}
				}
				# 7 areas with sympathizers.
				blood_lotus_new_sympathizers = yes
				blood_lotus_new_sympathizers = yes
				blood_lotus_new_sympathizers = yes
				blood_lotus_new_sympathizers = yes
				blood_lotus_new_sympathizers = yes
				blood_lotus_new_sympathizers = yes
				blood_lotus_new_sympathizers = yes
				blood_lotus_rebellion_spawns_headquarters = yes
			}
			else_if = {
				limit = {
					development_in_provinces = {
						value = 600
						superregion = rahen_superregion
					}
				}
				# 6 areas with sympathizers.
				blood_lotus_new_sympathizers = yes
				blood_lotus_new_sympathizers = yes
				blood_lotus_new_sympathizers = yes
				blood_lotus_new_sympathizers = yes
				blood_lotus_new_sympathizers = yes
				blood_lotus_new_sympathizers = yes
				blood_lotus_rebellion_spawns_headquarters = yes
			}
			else = {
				# 5 areas with sympathizers.
				blood_lotus_new_sympathizers = yes
				blood_lotus_new_sympathizers = yes
				blood_lotus_new_sympathizers = yes
				blood_lotus_new_sympathizers = yes
				blood_lotus_new_sympathizers = yes
			}
			
			blood_lotus_rebellion_spawns_hidden = yes
			blood_lotus_rebellion_spawns_headquarters = yes
			
			country_event = {
				id = blood_lotus_rebellion.106 #The Great Rebellion
				days = 1250 # ~3.5 years
				random = 365 # +-1 year
			}
		}
	}

	option = { #Rebel Negotiation
		name = blood_lotus_rebellion.1.a
		ai_chance = {
			factor = 1
		}
		custom_tooltip = blood_lotus_explanation_tt
		
		blood_lotus_hardline_stance_change_large = { neutral = yes }
		add_country_modifier = {
			name = blood_lotus_rebel_negotiation
			duration = -1
		}
		if = { limit = { has_reform = raja_reform } 
			add_disaster_modifier = {
				name = blood_lotus_raja_reform_debuff
				duration = -1
				disaster = blood_lotus_rebellion
			}
		}
		hidden_effect = {
			blood_lotus_rebellion_spawns_hidden = yes
			blood_lotus_rebellion_spawns_hidden = yes
		}
		blood_lotus_rebellion_spawns = yes
		add_stability = -4
	}
	
	option = { #Hardline Stance
		name = blood_lotus_rebellion.1.b
		ai_chance = {
			factor = 1
		}
		custom_tooltip = blood_lotus_explanation_tt
		
		blood_lotus_hardline_stance_change_large = { harimarihardline = yes }
		add_country_modifier = {
			name = blood_lotus_hardline_stance
			duration = -1
		}
		if = { limit = { has_reform = raja_reform } 
			add_disaster_modifier = {
				name = blood_lotus_raja_reform_debuff
				duration = -1
				disaster = blood_lotus_rebellion
			}
		}  
		hidden_effect = {
			blood_lotus_new_sympathizers = yes
			blood_lotus_rebellion_spawns_hidden = yes
			blood_lotus_rebellion_spawns_hidden = yes
		}
		blood_lotus_rebellion_spawns = yes
		add_stability = -5
		largest_decrease_of_human_tolerance_effect = yes
		
		country_event = {
			id = blood_lotus_rebellion.6 #A general offers his service
			days = 100
			random = 300
		}
	}
}

country_event = { #The Blood Lotus Rebellion Ends
	id = blood_lotus_rebellion.2
	title = blood_lotus_rebellion.2.t
	desc = blood_lotus_rebellion.2.d
	picture = ANGRY_MOB_eventPicture

	is_triggered_only = yes
	hidden = yes
	
	option = {
		name = blood_lotus_rebellion.2.a
		
		set_country_flag = blood_lotus_happened
		
		if = { # Lost to harimari
			limit = { has_country_flag = blood_lotus_lost_harimari_hardliner }
			country_event = { id = blood_lotus_rebellion.303 }
		}
		else_if = { # Lost to humans
			limit = { has_country_flag = blood_lotus_lost }
			country_event = { id = blood_lotus_rebellion.304 }
		}
		else = { # Win
			country_event = { id = blood_lotus_rebellion.300 }
		}
		every_owned_province = {
			remove_province_modifier = blood_lotus_guerrillas
			remove_province_modifier = blood_lotus_guerrillas_hidden
			remove_province_modifier = blood_lotus_headquarter
			remove_province_modifier = blood_lotus_sympathizers
		}
		# clear every country_flag that were ever set on this country and others
		clr_country_flag = blood_lotus_economy
		clr_country_flag = blood_lotus_military
		clr_country_flag = blood_lotus_war_room_blown
		clr_country_flag = blood_lotus_pessimism
		clr_country_flag = rival_supported_blood_lotus
		
		every_known_country = {
			clr_country_flag = blood_lotus_closed_borders
		}
	}
}

# country_event = { #The Blood Lotus Rebellion Ends # DEPRECATED
	# id = blood_lotus_rebellion.3
	# title = blood_lotus_rebellion.3.t
	# desc = blood_lotus_rebellion.3.d
	# picture = ANGRY_MOB_eventPicture

	# is_triggered_only = yes
	# major = yes
	
	# option = { #The Rebellion Breaks
		# name = blood_lotus_rebellion.3.a
		# ai_chance = {
			# factor = 1
		# }
		# trigger = { has_country_flag = blood_lotus_lost }
		# remove_country_modifier = blood_lotus_rebel_negotiation
		# remove_country_modifier = blood_lotus_hardline_stance
		
	# }
	# option = { #The Rebellion Wins, negotiation
		# name = blood_lotus_rebellion.3.b
		# ai_chance = {
			# factor = 1
		# }
		# trigger = { NOT = { has_country_flag = blood_lotus_lost } has_country_modifier = blood_lotus_rebel_negotiation }
		
		# add_stability_or_adm_power = yes
		# add_country_modifier = {
			# name = blood_lotus_subdued
			# duration = 18250 #50 years
		# }
		# remove_country_modifier = blood_lotus_rebel_negotiation
	# }
	# option = { #The Rebellion Wins, hardline
		# name = blood_lotus_rebellion.3.c
		# ai_chance = {
			# factor = 1
		# }
		# trigger = { NOT = { has_country_flag = blood_lotus_lost } has_country_modifier = blood_lotus_hardline_stance }
		
		# add_stability = 3
		# add_prestige = 50
		# add_country_modifier = {
			# name = blood_lotus_powerful_government
			# duration = 18250 #50 years
		# }
		# remove_country_modifier = blood_lotus_hardline_stance
	# }
# }

country_event = { # Peace with the Blood Lotus: Lower Castes
	id = blood_lotus_rebellion.300
	title = blood_lotus_rebellion.300.t
	desc = {
		trigger = { blood_lotus_hardline_stance_harimari = yes }
		desc = blood_lotus_rebellion.300.d1
	}
	desc = {
		trigger = { blood_lotus_hardline_stance_neutral = yes }
		desc = blood_lotus_rebellion.300.d2
	}
	desc = {
		trigger = { blood_lotus_hardline_stance_human = yes }
		desc = blood_lotus_rebellion.300.d3
	}
	picture = ELEPHANTS_AND_PEASANTS_eventPicture
	
	is_triggered_only = yes
	major = yes
	
	immediate = {
		remove_country_modifier = blood_lotus_rebel_negotiation
		remove_country_modifier = blood_lotus_hardline_stance
	}
	
	after = {
		hidden_effect = { country_event = { id = blood_lotus_rebellion.301 } } # Peace with the Blood Lotus: Middle Castes
	}
	
	### Hardline harimari options.
	option = { #humans into lower castes
		name = blood_lotus_rebellion.300.a1
		trigger = { blood_lotus_hardline_stance_harimari = yes }
		ai_chance = {
			factor = 1
		}
		custom_tooltip = blood_lotus_rebellion_lowercastes_human_tt
		clr_country_flag = harimari_in_lowercastes
		set_country_flag = human_in_lowercastes
	}
	option = { #harimari and humans into lower castes
		name = blood_lotus_rebellion.300.b1
		trigger = {
			blood_lotus_hardline_stance_harimari = yes
			has_country_flag = human_in_lowercastes
			has_country_flag = harimari_in_lowercastes
		}
		ai_chance = {
			factor = 1
		}
		custom_tooltip = blood_lotus_rebellion_lowercastes_both_tt
	}
	
	### Neutral options
	option = { #humans into lower castes
		name = blood_lotus_rebellion.300.a2
		trigger = {
			blood_lotus_hardline_stance_neutral = yes
			has_country_flag = human_in_lowercastes
		}
		ai_chance = {
			factor = 1
		}
		custom_tooltip = blood_lotus_rebellion_lowercastes_human_tt
		clr_country_flag = harimari_in_lowercastes
		set_country_flag = human_in_lowercastes
	}
	option = { #harimari and humans into lower castes
		name = blood_lotus_rebellion.300.b2
		trigger = { blood_lotus_hardline_stance_neutral = yes }
		ai_chance = {
			factor = 1
		}
		custom_tooltip = blood_lotus_rebellion_lowercastes_both_tt
		set_country_flag = human_in_lowercastes
		set_country_flag = harimari_in_lowercastes
	}
	option = { #harimari into lower castes
		name = blood_lotus_rebellion.300.c2
		trigger = {
			blood_lotus_hardline_stance_neutral = yes
			has_country_flag = harimari_in_lowercastes
		}
		ai_chance = {
			factor = 1
		}
		custom_tooltip = blood_lotus_rebellion_lowercastes_harimari_tt
		set_country_flag = harimari_in_lowercastes
		clr_country_flag = human_in_lowercastes
	}
	
	### Hardline human options.
	option = { #harimari into lower castes
		name = blood_lotus_rebellion.300.a3
		trigger = { blood_lotus_hardline_stance_human = yes }
		ai_chance = {
			factor = 1
		}
		custom_tooltip = blood_lotus_rebellion_lowercastes_harimari_tt
		set_country_flag = harimari_in_lowercastes
		clr_country_flag = human_in_lowercastes
	}
	option = { #harimari and humans into lower castes
		name = blood_lotus_rebellion.300.b3
		trigger = {
			blood_lotus_hardline_stance_human = yes
			has_country_flag = human_in_lowercastes
			has_country_flag = harimari_in_lowercastes
		}
		ai_chance = {
			factor = 1
		}
		custom_tooltip = blood_lotus_rebellion_lowercastes_both_tt
	}
}

country_event = { # Peace with the Blood Lotus: Middle Castes
	id = blood_lotus_rebellion.301
	title = blood_lotus_rebellion.301.t
	desc = {
		trigger = { blood_lotus_hardline_stance_harimari = yes }
		desc = blood_lotus_rebellion.301.d1
	}
	desc = {
		trigger = { blood_lotus_hardline_stance_neutral = yes }
		desc = blood_lotus_rebellion.301.d2
	}
	desc = {
		trigger = { blood_lotus_hardline_stance_human = yes }
		desc = blood_lotus_rebellion.301.d3
	}
	picture = 9_Vaisya_Estate_eventPicture
	
	is_triggered_only = yes
	major = yes
	
	after = {
		hidden_effect = { country_event = { id = blood_lotus_rebellion.302 } } # Peace with the Blood Lotus: Upper Castes
	}
	
	### Hardline harimari options.
	option = { #humans into middle castes
		name = blood_lotus_rebellion.301.a1
		trigger = { blood_lotus_hardline_stance_harimari = yes }
		ai_chance = {
			factor = 1
		}
		custom_tooltip = blood_lotus_rebellion_middlecastes_human_tt
		clr_country_flag = harimari_in_middlecastes
		set_country_flag = human_in_middlecastes
	}
	
	option = { #harimari and humans into middle castes
		name = blood_lotus_rebellion.301.b1
		trigger = {
			blood_lotus_hardline_stance_harimari = yes
			has_country_flag = human_in_middlecastes
			has_country_flag = harimari_in_middlecastes
		}
		ai_chance = {
			factor = 1
		}
		custom_tooltip = blood_lotus_rebellion_middlecastes_both_tt
		set_country_flag = harimari_in_middlecastes
		set_country_flag = human_in_middlecastes
	}
	
	### Neutral options
	option = { #humans into middle castes
		name = blood_lotus_rebellion.301.a2
		trigger = {
			blood_lotus_hardline_stance_neutral = yes
			has_country_flag = human_in_middlecastes
		}
		ai_chance = {
			factor = 1
		}
		custom_tooltip = blood_lotus_rebellion_middlecastes_human_tt
		clr_country_flag = harimari_in_middlecastes
		set_country_flag = human_in_middlecastes
	}
	option = { #harimari and humans into middle castes
		name = blood_lotus_rebellion.301.b2
		trigger = {
			blood_lotus_hardline_stance_neutral = yes
		}
		ai_chance = {
			factor = 1
		}
		custom_tooltip = blood_lotus_rebellion_middlecastes_both_tt
		set_country_flag = human_in_middlecastes
		set_country_flag = harimari_in_middlecastes
	}
	option = { #harimari into middle castes
		name = blood_lotus_rebellion.301.c2
		trigger = {
			blood_lotus_hardline_stance_neutral = yes
			has_country_flag = harimari_in_middlecastes
		}
		ai_chance = {
			factor = 1
		}
		custom_tooltip = blood_lotus_rebellion_middlecastes_harimari_tt
		set_country_flag = harimari_in_middlecastes
		clr_country_flag = human_in_middlecastes
	}
	
	### Hardline human options.
	option = { #harimari into middle castes
		name = blood_lotus_rebellion.301.a3
		trigger = { blood_lotus_hardline_stance_human = yes }
		ai_chance = {
			factor = 1
		}
		custom_tooltip = blood_lotus_rebellion_middlecastes_harimari_tt
		set_country_flag = harimari_in_middlecastes
		clr_country_flag = human_in_middlecastes
	}
	option = { #harimari and humans into middle castes
		name = blood_lotus_rebellion.301.b3
		trigger = {
			blood_lotus_hardline_stance_human = yes
			has_country_flag = human_in_middlecastes
			has_country_flag = harimari_in_middlecastes
		}
		ai_chance = {
			factor = 1
		}
		custom_tooltip = blood_lotus_rebellion_middlecastes_both_tt
		set_country_flag = human_in_middlecastes
		set_country_flag = harimari_in_middlecastes
	}
}

country_event = { # Peace with the Blood Lotus: Upper Castes
	id = blood_lotus_rebellion.302
	title = blood_lotus_rebellion.302.t
	desc = {
		trigger = { blood_lotus_hardline_stance_harimari = yes }
		desc = blood_lotus_rebellion.302.d1
	}
	desc = {
		trigger = { blood_lotus_hardline_stance_neutral = yes }
		desc = blood_lotus_rebellion.302.d2
	}
	desc = {
		trigger = { blood_lotus_hardline_stance_human = yes }
		desc = blood_lotus_rebellion.302.d3
	}
	picture = TIGER_THRONE_eventPicture
	
	is_triggered_only = yes
	major = yes
	
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					capital_scope = {
						region = rakhadesh_region
					}
				}
				set_country_flag = human_pasindesh
			}
			else_if = {
				limit = {
					capital_scope = {
						region = dhujat_region
					}
				}
				set_country_flag = human_ghavaanaj
			}
			else_if = {
				limit = {
					capital_scope = {
						region = shamakhad_region
					}
				}
				set_country_flag = human_shandibad
			}
			else = {
				set_country_flag = human_rabhidarubsad
			}
		}
	}
	
	after = {
		clr_country_flag = human_pasindesh
		clr_country_flag = human_ghavaanaj
		clr_country_flag = human_shandibad
		clr_country_flag = human_rabhidarubsad
		hidden_effect = {
			if = {
				limit = {
					has_country_flag = human_in_uppercastes
					has_country_flag = dwarf_in_middlecastes
				}
				country_event = { # dwarves want into uppercastes, now that humans are there too
					id = flavor_dhenijanraj.12
					days = 30
				}
			}
			country_event = { # final cleanup event
				id = blood_lotus_rebellion.305
				days = 91
			}
		}
	}
	
	### Hardline harimari options.
	option = {
		name = blood_lotus_rebellion.302.a
		trigger = { blood_lotus_hardline_stance_harimari = yes }
		ai_chance = {
			factor = 1
		}
		
		if = {
			limit = { NOT = { culture_is_harimari = yes } }
			change_primary_culture = royal_harimari
		}
		if = {
			limit = { NOT = { ruler_is_harimari = yes } }
			hidden_effect = { kill_heir = {} }
			define_ruler = {
				min_age = 30
				max_age = 50
				culture = royal_harimari
			}
		}
		if = {
			limit = { NOT = { has_country_modifier = harimari_military } }
			clear_racial_military = yes
			add_country_modifier = { 
				name = restructuring_military
				duration = 3650
			}
			add_country_modifier = { 
				name = harimari_military
				duration = -1  
			}
		}
		
		custom_tooltip = blood_lotus_rebellion_uppercastes_harimari_tt
		set_country_flag = harimari_in_uppercastes
		clr_country_flag = human_in_uppercastes
		
		add_country_modifier = {
			name = blood_lotus_powerful_government
			duration = 18250
		}
	}
	
	### Neutral options
	option = {
		name = blood_lotus_rebellion.302.b
		trigger = { blood_lotus_hardline_stance_neutral = yes }
		ai_chance = {
			factor = 1
		}
		
		custom_tooltip = blood_lotus_rebellion_uppercastes_both_tt
		set_country_flag = human_in_uppercastes
		set_country_flag = harimari_in_uppercastes
		
		add_country_modifier = {
			name = blood_lotus_powerful_government
			duration = 18250
		}
	}
	
	option = {
		name = blood_lotus_rebellion.302.c
		trigger = {
			blood_lotus_hardline_stance_neutral = yes
			OR = {
				NOT = { culture_is_human = yes }
				NOT = { ruler_is_human = yes }
				NOT = { has_country_modifier = human_military }
			}
		}
		ai_chance = {
			factor = 1
		}
		
		if = {
			limit = { NOT = { culture_is_human = yes } }
			trigger_switch = {
				on_trigger = has_country_flag
				human_pasindesh = { change_primary_culture = pasindesh }
				human_ghavaanaj = { change_primary_culture = ghavaanaj }
				human_shandibad = { change_primary_culture = shandibad }
				human_rabhidarubsad = { change_primary_culture = rabhidarubsad }
			}
		}
		if = {
			limit = { NOT = { ruler_is_human = yes } }
			hidden_effect = { kill_heir = {} }
			trigger_switch = {
				on_trigger = has_country_flag
				human_pasindesh = { define_ruler = { min_age = 30 max_age = 50 culture = pasindesh } }
				human_ghavaanaj = { define_ruler = { min_age = 30 max_age = 50 culture = ghavaanaj } }
				human_shandibad = { define_ruler = { min_age = 30 max_age = 50 culture = shandibad } }
				human_rabhidarubsad = { define_ruler = { min_age = 30 max_age = 50 culture = rabhidarubsad } }
			}
		}
		if = {
			limit = { NOT = { has_country_modifier = human_military } }
			clear_racial_military = yes
			add_country_modifier = { 
				name = restructuring_military
				duration = 3650
			}
			add_country_modifier = { 
				name = human_military
				duration = -1  
			}
		}
		
		custom_tooltip = blood_lotus_rebellion_uppercastes_both_tt
		set_country_flag = human_in_uppercastes
		set_country_flag = harimari_in_uppercastes
		
		add_country_modifier = {
			name = blood_lotus_powerful_government
			duration = 18250
		}
	}
	
	### Hardline human options.
	option = {
		name = blood_lotus_rebellion.302.d
		trigger = { blood_lotus_hardline_stance_human = yes }
		ai_chance = {
			factor = 1
		}
		
		if = {
			limit = { NOT = { culture_is_human = yes } }
			trigger_switch = {
				on_trigger = has_country_flag
				human_pasindesh = { change_primary_culture = pasindesh }
				human_ghavaanaj = { change_primary_culture = ghavaanaj }
				human_shandibad = { change_primary_culture = shandibad }
				human_rabhidarubsad = { change_primary_culture = rabhidarubsad }
			}
		}
		if = {
			limit = { NOT = { ruler_is_human = yes } }
			hidden_effect = { kill_heir = {} }
			trigger_switch = {
				on_trigger = has_country_flag
				human_pasindesh = { define_ruler = { min_age = 30 max_age = 50 culture = pasindesh } }
				human_ghavaanaj = { define_ruler = { min_age = 30 max_age = 50 culture = ghavaanaj } }
				human_shandibad = { define_ruler = { min_age = 30 max_age = 50 culture = shandibad } }
				human_rabhidarubsad = { define_ruler = { min_age = 30 max_age = 50 culture = rabhidarubsad } }
			}
		}
		if = {
			limit = { NOT = { has_country_modifier = human_military } }
			clear_racial_military = yes
			add_country_modifier = { 
				name = restructuring_military
				duration = 3650
			}
			add_country_modifier = { 
				name = human_military
				duration = -1  
			}
		}
		
		custom_tooltip = blood_lotus_rebellion_uppercastes_human_tt
		set_country_flag = human_in_uppercastes
		clr_country_flag = harimari_in_uppercastes
		
		add_country_modifier = {
			name = blood_lotus_powerful_government
			duration = 18250
		}
	}
}

country_event = { # Treaty of the Claw
	id = blood_lotus_rebellion.303
	title = blood_lotus_rebellion.303.t
	desc = blood_lotus_rebellion.303.d
	picture = TIGER_THRONE_eventPicture
	
	is_triggered_only = yes
	major = yes
	
	immediate = {
		clr_country_flag = human_in_uppercastes
		clr_country_flag = harimari_in_middlecastes
		clr_country_flag = harimari_in_lowercastes
		
		set_country_flag = harimari_in_uppercastes
		set_country_flag = human_in_middlecastes
		set_country_flag = human_in_lowercastes
		
		hidden_effect = { set_variable = { which = casteFluidityVar value = 0 } }
	}
	
	option = {
		name = blood_lotus_rebellion.303.a
		
		# custom tooltip that say that the harimari=UC and human=MC+LC
		
		# custom tooltip set fluidity to rigid
		
		add_country_modifier = {
			name = blood_lotus_rebellion_treaty_of_the_claw_mod # +30% min autonomy
			duration = 18250
		}
	}
}

country_event = { # Treaty of the Blood Lotus
	id = blood_lotus_rebellion.304
	title = blood_lotus_rebellion.304.t
	desc = blood_lotus_rebellion.304.d
	picture = 11_Jain_Estate_eventPicture
	
	is_triggered_only = yes
	major = yes
	
	immediate = {
		clr_country_flag = harimari_in_uppercastes
		clr_country_flag = human_in_middlecastes
		clr_country_flag = human_in_lowercastes
		
		set_country_flag = human_in_uppercastes
		set_country_flag = harimari_in_middlecastes
		set_country_flag = harimari_in_lowercastes
		
		hidden_effect = { set_variable = { which = casteFluidityVar value = 0 } }
	}
	
	option = {
		name = blood_lotus_rebellion.304.a
		
		# custom tooltip that say that the humans=UC and harimari=MC+LC
		
		# custom tooltip set fluidity to rigid
		
		add_country_modifier = {
			name = blood_lotus_rebellion_treaty_of_the_blood_lotus_mod # +30% min autonomy
			duration = 18250
		}
	}
}

country_event = { # Final cleanup of modifiers
	id = blood_lotus_rebellion.305
	title = blood_lotus_rebellion.305.t
	desc = blood_lotus_rebellion.305.d
	picture = 11_Jain_Estate_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	
	option = {
		name = blood_lotus_rebellion.305.a
		every_owned_province = {
			remove_province_modifier = blood_lotus_guerrillas
			remove_province_modifier = blood_lotus_guerrillas_hidden
			remove_province_modifier = blood_lotus_headquarter
			remove_province_modifier = blood_lotus_sympathizers
		}
		# clear every country_flag that were ever set on this country and others
		clr_country_flag = blood_lotus_economy
		clr_country_flag = blood_lotus_military
		clr_country_flag = blood_lotus_war_room_blown
		clr_country_flag = blood_lotus_pessimism
		clr_country_flag = rival_supported_blood_lotus
		
		every_known_country = {
			clr_country_flag = blood_lotus_closed_borders
		}
	}
}

country_event = { # A locals reveal a group of rebels
	id = blood_lotus_rebellion.4
	title = blood_lotus_rebellion.4.t
	desc = blood_lotus_rebellion.4.d
	picture = ANGRY_MOB_eventPicture

	is_triggered_only = yes
	
	trigger = {
		any_owned_province = {
			has_province_modifier = blood_lotus_guerrillas_hidden
		}
	}
	
	option = { #Now I see you
		name = blood_lotus_rebellion.4.a
		ai_chance = {
			factor = 1
		}
		
		random_owned_province = {
			limit = { has_province_modifier = blood_lotus_guerrillas_hidden }
			remove_province_modifier = blood_lotus_guerrillas_hidden
			add_province_modifier = {
				name = blood_lotus_guerrillas
				duration = -1
			}
		}
	}
}

country_event = { # Sympathizers in [blood_lotus_sympathizers.GetName] want to negotiate
	id = blood_lotus_rebellion.5
	title = blood_lotus_rebellion.5.t
	desc = blood_lotus_rebellion.5.d
	picture = 3_Rajput_Estate__eventPicture

	is_triggered_only = yes
	
	trigger = {
		OR = { 
			blood_lotus_hardline_stance_human = yes 
			has_country_modifier = blood_lotus_rebel_negotiation 
		}
		any_owned_province = {
			has_province_modifier = blood_lotus_sympathizers
			#NOT = { has_province_modifier = blood_lotus_guerrillas_hidden }
		}
	}
	
	immediate = {
		random_owned_province = {
			limit = {
				has_province_modifier = blood_lotus_sympathizers
			}
			save_event_target_as = negotiating_sympathizers
		}
	}
	
	option = { #Grant them their request
		name = blood_lotus_rebellion.5.a
		ai_chance = {
			factor = 1
		}
		goto = negotiating_sympathizers
		
		event_target:negotiating_sympathizers = {
			add_local_autonomy = 25
			remove_province_modifier = blood_lotus_sympathizers
			hidden_effect = {
				remove_province_modifier = blood_lotus_guerrillas_hidden
				remove_province_modifier = blood_lotus_guerrillas
			}
			add_province_modifier = {
				name = blood_lotus_dissuaded_sympathizers
				duration = 730 # two years
			}
		}
		
		blood_lotus_hardline_stance_change_small = { humanhardline = yes }
	}
	option = { #Refuse
		name = blood_lotus_rebellion.5.b
		ai_chance = {
			factor = 1
		}
		
		increase_legitimacy_small_effect = yes
			
		hidden_effect = {
			event_target:negotiating_sympathizers = {
				add_province_modifier = {
					name = blood_lotus_guerrillas_hidden
					duration = -1
					hidden = yes
				}
			}
		}
		
		blood_lotus_hardline_stance_change_small = { harimarihardline = yes }
	}
}

country_event = { # A general offers his service
	id = blood_lotus_rebellion.6
	title = blood_lotus_rebellion.6.t
	desc = blood_lotus_rebellion.6.d
	picture = 3_Rajput_Estate__eventPicture

	is_triggered_only = yes
	
	option = { #All the help is appreciated
		name = blood_lotus_rebellion.6.a
		ai_chance = {
			factor = 1
		}
		define_general = {
			name = "Salar Black-Claw"
			shock = 7
			fire = 3
			manuever = 4
			siege = 5
		}
	}
}

country_event = { # General Salar Black-Claw joins the harimari hardliners.
	id = blood_lotus_rebellion.600
	title = blood_lotus_rebellion.600.t
	desc = blood_lotus_rebellion.600.d
	picture = 3_Rajput_Estate__eventPicture

	is_triggered_only = yes

	trigger = {
		has_leader = "Salar Black-Claw"
		blood_lotus_hardline_stance_human = yes
	}
	
	immediate = {
		hidden_effect = {
			kill_leader = {
				type = "Salar Black-Claw"
			}
		}
		random_owned_province = {
			limit = {
				OR = {
					has_province_modifier = blood_lotus_guerrillas
					has_province_modifier = blood_lotus_guerrillas_hidden
				}
			}
			spawn_rebels = {
				type = blood_lotus_rebel
				size = 2
				leader = "Salar?Black-Claw"
				leader_dynasty = ""
			}
			remove_province_modifier = blood_lotus_guerrillas_hidden
			add_province_modifier = {
				name = blood_lotus_guerrillas
				duration = -1
			}
			save_event_target_as = salarblackclawrebels
		}
	}
	option = { # Salar Black-Claw revolts against us!
		name = blood_lotus_rebellion.600.a
		ai_chance = {
			factor = 1
		}
		goto = salarblackclawrebels
	}
}

country_event = { #The rebellion spreads (hidden), attack a fortress or makes an HQ.
	id = blood_lotus_rebellion.100
	title = blood_lotus_rebellion.100.t
	desc = blood_lotus_rebellion.100.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	hidden = yes

	option = {
		name = blood_lotus_rebellion.100.a
		ai_chance = {
			factor = 1
		}
		
		random_list = { 
			50 = { # nothing a third of the times
				modifier = {
					factor = 10 # 
					has_country_flag = blood_lotus_the_great_revolt
				}
				modifier = {
					factor = 2.5 # 33% -> 56%
					caste_fluidity_is_fluid = yes
				}
				modifier = {
					factor = 1.5 # 33% -> 43%
					caste_fluidity_is_neutral = yes
				}
			}
			30 = { blood_lotus_rebellion_spreads = yes }
			30 = { blood_lotus_rebellion_spreads_hidden = yes }
			30 = { #attack a fortress
				modifier = {
					factor = 0
					NOT = {
						any_owned_province = {
							OR = {
								has_province_modifier = blood_lotus_guerrillas
								has_province_modifier = blood_lotus_guerrillas_hidden
							}
							fort_level = 2
							NOT = { controlled_by = REB }
						}
					}
				}
				random_owned_province = {
					limit = {
						OR = {
							has_province_modifier = blood_lotus_guerrillas
							has_province_modifier = blood_lotus_guerrillas_hidden
						}
						fort_level = 2
						NOT = { controlled_by = REB }
					}
					spawn_rebels = {
						type = blood_lotus_rebel
						size = 2
					}
					remove_province_modifier = blood_lotus_guerrillas
					remove_province_modifier = blood_lotus_guerrillas_hidden
				}
			}
			10 = { # might fail if HQs already exist, or there aren't enough rebels.
				modifier = {
					factor = 0.6 # if attack a fortress can't happen, this needs to scale down to still be max 10% chance to fire.
					NOT = {
						any_owned_province = {
							OR = {
								has_province_modifier = blood_lotus_guerrillas
								has_province_modifier = blood_lotus_guerrillas_hidden
							}
							fort_level = 2
							NOT = { controlled_by = REB }
						}
					}
				}
				blood_lotus_rebellion_spawns_headquarters_on_guerrillas = yes
			}
		}
	}
}

country_event = { #101 The rebellion moves
	id = blood_lotus_rebellion.101
	title = blood_lotus_rebellion.101.t
	desc = blood_lotus_rebellion.101.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	hidden = yes

	option = {
		name = blood_lotus_rebellion.101.a
		ai_chance = {
			factor = 1
		}
		blood_lotus_rebellion_moves = yes
		random_list = {
			1 = { # 1% of nothing
				modifier = {
					factor = 900 # 1% --> 90%
					has_country_flag = blood_lotus_the_great_revolt
				}
			}
			55 = { blood_lotus_rebellion_moves_hidden = yes }
			30 = { blood_lotus_rebellion_moves = yes blood_lotus_rebellion_moves_hidden = yes }
			15 = { blood_lotus_rebellion_moves = yes blood_lotus_rebellion_moves = yes blood_lotus_rebellion_moves_hidden = yes }
		}
	}
}

country_event = { #102 The rebellion attacks a fortress
	id = blood_lotus_rebellion.102
	title = blood_lotus_rebellion.102.t
	desc = blood_lotus_rebellion.102.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	hidden = yes
	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = blood_lotus_rebellion.102.a
		ai_chance = {
			factor = 1
		}
		random_owned_province = {
			limit = {
				OR = {
					has_province_modifier = blood_lotus_guerrillas
					has_province_modifier = blood_lotus_guerrillas_hidden
				}
				fort_level = 2
				NOT = { controlled_by = REB }
			}
			spawn_rebels = {
				type = blood_lotus_rebel
				size = 2
			}
			remove_province_modifier = blood_lotus_guerrillas
			remove_province_modifier = blood_lotus_guerrillas_hidden
		}
	}
}

country_event = { #103 The rebellion moves openly
	id = blood_lotus_rebellion.103
	title = blood_lotus_rebellion.103.t
	desc = blood_lotus_rebellion.103.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	hidden = yes
	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = blood_lotus_rebellion.103.a
		ai_chance = {
			factor = 1
		}
		
		random_owned_province = {
			limit = {
				OR = {
					has_province_modifier = blood_lotus_guerrillas
					has_province_modifier = blood_lotus_guerrillas_hidden
				}
				NOT = { fort_level = 2 }
			}
			spawn_rebels = {
				type = blood_lotus_rebel
				size = 1
			}
			remove_province_modifier = blood_lotus_guerrillas
			remove_province_modifier = blood_lotus_guerrillas_hidden
		}
	}
}

country_event = { #104 A group of rebels hides
	id = blood_lotus_rebellion.104
	title = blood_lotus_rebellion.104.t
	desc = blood_lotus_rebellion.104.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	hidden = yes
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = blood_lotus_rebellion.104.a
		ai_chance = {
			factor = 1
		}
		blood_lotus_rebellion_hides = yes
	}
}

country_event = { #105 New Sympathisers appear
	id = blood_lotus_rebellion.105
	title = blood_lotus_rebellion.105.t
	desc = blood_lotus_rebellion.105.d
	picture = 3_Rajput_Estate__eventPicture

	is_triggered_only = yes
	hidden = yes
	trigger = { NOT = { has_country_flag = blood_lotus_the_great_revolt } }

	option = { 
		name = blood_lotus_rebellion.105.a
		ai_chance = {
			factor = 1
		}
		random_list = {
			50 = { # nothing
				modifier = {
					factor = 10 # 50% -> 90%
					has_country_flag = blood_lotus_the_great_revolt
				}
				modifier = {
					factor = 2.3 # 50% -> 70%
					caste_fluidity_is_fluid = yes
				}
				modifier = {
					factor = 1.5 # 50% -> 60%
					caste_fluidity_is_neutral = yes
				}
				modifier = {
					factor = 0
					all_owned_province = {
						superregion = rahen_superregion
						OR = {
							culture_group = upper_raheni
							culture_group = middle_raheni
							culture_group = south_raheni
							has_human_minority_trigger = yes
						}
						NOT = {
							has_province_modifier = blood_lotus_sympathizers
							has_province_modifier = blood_lotus_headquarter
							has_province_modifier = blood_lotus_dissuaded_sympathizers
						}
					}
				}
			}
			50 = { blood_lotus_new_sympathizers = yes }
			50 = { # spawn Harimari hardliners.
				modifier = {
					factor = 0 # 0%
					blood_lotus_hardline_stance_harimari = yes
				}

				# factor = 1 for blood_lotus_hardline_stance_neutral = yes

				modifier = {
					factor = 2 # 50%
					blood_lotus_hardline_stance_human = yes
				}
				random_owned_province = {
					limit = { controlled_by = ROOT }
					spawn_rebels = {
						type = harimari_hardliners
						size = 2
					}
				}
			}
		}
	}
}

country_event = { #106 The Great Revolt
	id = blood_lotus_rebellion.106
	title = blood_lotus_rebellion.106.t
	desc = blood_lotus_rebellion.106.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	
	trigger = { has_disaster = blood_lotus_rebellion }
	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		hidden_effect = {
			if = { # one last push of sympathizers.
				limit = { 
					NOT = { 
						num_of_owned_provinces_with = { 
							value = 7 
							has_province_modifier = blood_lotus_sympathizers
						} 
					}
				}
				blood_lotus_new_sympathizers = yes
				blood_lotus_new_sympathizers = yes
				blood_lotus_new_sympathizers = yes
				blood_lotus_new_sympathizers = yes
			}
			if = { #add 6 rebels if none exist
				limit = { 
					NOT = { 
						num_of_owned_provinces_with = { 
							value = 1
							OR = { 
								has_province_modifier = blood_lotus_headquarter 
								has_province_modifier = blood_lotus_guerrillas_hidden 
								has_province_modifier = blood_lotus_guerrillas 
							} 
						} 
					}
				}
				blood_lotus_rebellion_spawns = yes
				blood_lotus_rebellion_spawns = yes
				blood_lotus_rebellion_spawns_hidden = yes
				blood_lotus_rebellion_spawns = yes
				blood_lotus_rebellion_spawns_hidden = yes
				blood_lotus_rebellion_spawns_hidden = yes
			}
			else_if = { #add 5 rebels if 1 exist
				limit = { 
					NOT = { 
						num_of_owned_provinces_with = { 
							value = 2
							OR = { 
								has_province_modifier = blood_lotus_headquarter 
								has_province_modifier = blood_lotus_guerrillas_hidden 
								has_province_modifier = blood_lotus_guerrillas 
							} 
						} 
					}
				}
				blood_lotus_rebellion_spawns = yes
				blood_lotus_rebellion_spawns = yes
				blood_lotus_rebellion_spawns_hidden = yes
				blood_lotus_rebellion_spawns = yes
				blood_lotus_rebellion_spawns_hidden = yes
			}
			else_if = { #add 4 rebels if 2 exist
				limit = { 
					NOT = { 
						num_of_owned_provinces_with = { 
							value = 3
							OR = { 
								has_province_modifier = blood_lotus_headquarter 
								has_province_modifier = blood_lotus_guerrillas_hidden 
								has_province_modifier = blood_lotus_guerrillas 
							} 
						} 
					}
				}
				blood_lotus_rebellion_spawns = yes
				blood_lotus_rebellion_spawns_hidden = yes
				blood_lotus_rebellion_spawns = yes
				blood_lotus_rebellion_spawns_hidden = yes
			}
			else_if = { #add 3 rebels if 3 exist
				limit = { 
					NOT = { 
						num_of_owned_provinces_with = { 
							value = 4
							OR = { 
								has_province_modifier = blood_lotus_headquarter 
								has_province_modifier = blood_lotus_guerrillas_hidden 
								has_province_modifier = blood_lotus_guerrillas 
							} 
						} 
					}
				}
				blood_lotus_rebellion_spawns = yes
				blood_lotus_rebellion_spawns = yes
				blood_lotus_rebellion_spawns_hidden = yes
			}
		}
	}
	
	option = {
		name = blood_lotus_rebellion.106.a
		ai_chance = {
			factor = 1
		}
		random_owned_province = {
			limit = { has_province_modifier = blood_lotus_sympathizers }
			spawn_rebels = {
				type = blood_lotus_rebel
				size = 8
			}
			remove_province_modifier = blood_lotus_headquarter
			remove_province_modifier = blood_lotus_guerrillas_hidden
			remove_province_modifier = blood_lotus_guerrillas
		}
		
		every_owned_province = {
			limit = {
				OR = {
					has_province_modifier = blood_lotus_guerrillas
					has_province_modifier = blood_lotus_guerrillas_hidden
					has_province_modifier = blood_lotus_headquarter
				}
			}
			if = {
				limit = { has_province_modifier = blood_lotus_headquarter }
				remove_province_modifier = blood_lotus_headquarter
				if = {
					limit = { 
						ROOT = { 
							OR = { 
								blood_lotus_hardline_stance_human = yes 
								has_country_modifier = blood_lotus_rebel_negotiation 
							} 
						} 
					}
					spawn_rebels = {
						type = blood_lotus_rebel
						size = 5
					}
				}
				else = {
					spawn_rebels = {
						type = blood_lotus_rebel
						size = 6
					}
				}
			}
			else = {
				remove_province_modifier = blood_lotus_guerrillas_hidden
				remove_province_modifier = blood_lotus_guerrillas
				if = {
					limit = { 
						ROOT = { 
							OR = { 
								blood_lotus_hardline_stance_human = yes 
								has_country_modifier = blood_lotus_rebel_negotiation 
							} 
						} 
					}
					spawn_rebels = {
						type = blood_lotus_rebel
						size = 4
					}
				}
				else = {
					spawn_rebels = {
						type = blood_lotus_rebel
						size = 5
					}
				}
			}
		}
		hidden_effect = { set_country_flag = blood_lotus_the_great_revolt }
	}
}

country_event = { #107 A new center of rebellion
	id = blood_lotus_rebellion.107
	title = blood_lotus_rebellion.107.t
	desc = blood_lotus_rebellion.107.d
	picture = 3_Rajput_Estate__eventPicture

	is_triggered_only = yes
	hidden = yes
	trigger = { NOT = { has_country_flag = blood_lotus_the_great_revolt } }
	mean_time_to_happen = {
		days = 1
	}
	option = {
		name = blood_lotus_rebellion.107.b
		
		random_list = { # If 2 HQs or less, spawn HQ
			50 = {
				modifier = {
					factor = 0
					num_of_owned_provinces_with = { value = 2 has_province_modifier = blood_lotus_headquarter }
				}
				blood_lotus_rebellion_spawns_headquarters = yes
			}
			50 = { # If 2 HQs or more, spread rebels 50% chance
				modifier = {
					factor = 0
					NOT = { num_of_owned_provinces_with = { value = 2 has_province_modifier = blood_lotus_headquarter } }
				}
				blood_lotus_rebellion_spawns = yes
			}
			50 = { # If 2 HQs or more, spread hidden rebels 50% chance
				modifier = {
					factor = 0
					NOT = { num_of_owned_provinces_with = { value = 2 has_province_modifier = blood_lotus_headquarter } }
				}
				blood_lotus_rebellion_spawns_hidden = yes
			}
		}
	}
}

# Random events (which all affect HardlineCounter):

country_event = { # 200 DONE - One Time Economy
	id = blood_lotus_rebellion.200
	title = blood_lotus_rebellion.200.t
	desc = blood_lotus_rebellion.200.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		NOT = { has_country_flag = blood_lotus_economy }
	}
	
	immediate = {
		set_country_flag = blood_lotus_economy
	}
	
	option = {
		name = blood_lotus_rebellion.200.a
		blood_lotus_hardline_stance_change_medium = { harimarihardline = yes }
		
		add_country_modifier = {
			name = blood_lotus_rebellion_stopped_subsidies_mod # -15% prod eff
			duration = 9125
		}
	}
	
	option = {
		name = blood_lotus_rebellion.200.b
		blood_lotus_hardline_stance_change_medium = { neutral = yes }
		
		add_country_modifier = {
			name = blood_lotus_rebellion_tax_office_shortage_mod # -15% tax
			duration = 9125
		}
	}
	
	option = {
		name = blood_lotus_rebellion.200.c
		blood_lotus_hardline_stance_change_medium = { humanhardline = yes }
		
		add_country_modifier = {
			name = blood_lotus_rebellion_closed_commerce_chamber_mod # -15% trade eff
			duration = 9125
		}
	}
}

country_event = { # 201 DONE
	id = blood_lotus_rebellion.201
	title = blood_lotus_rebellion.201.t
	desc = blood_lotus_rebellion.201.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		NOT = { has_country_flag = blood_lotus_military }
	}
	
	immediate = {
		set_country_flag = blood_lotus_military
	}
	
	option = {
		name = blood_lotus_rebellion.201.a
		blood_lotus_hardline_stance_change_medium = { harimarihardline = yes }
		
		add_country_modifier = {
			name = blood_lotus_rebellion_rampant_desertions_mod # -15% manpower
			duration = 9125
		}
	}
	
	option = {
		name = blood_lotus_rebellion.201.b
		blood_lotus_hardline_stance_change_medium = { neutral = yes }
		
		add_country_modifier = {
			name = blood_lotus_rebellion_all_war_and_no_fun_mod # -10% morale
			duration = 9125
		}
	}
	
	option = {
		name = blood_lotus_rebellion.201.c
		blood_lotus_hardline_stance_change_medium = { humanhardline = yes }
		
		add_country_modifier = {
			name = blood_lotus_rebellion_unpaid_officiers_mod # -5% disc
			duration = 9125
		}
	}
}

country_event = { # 202 DONE
	id = blood_lotus_rebellion.202
	title = blood_lotus_rebellion.202.t
	desc = blood_lotus_rebellion.202.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		always = yes
	}
	
	immediate = {
		hidden_effect = {
			random_owned_province = {
				save_event_target_as = target_province
			}
		}
	}
	
	option = {
		name = blood_lotus_rebellion.202.a
		blood_lotus_hardline_stance_change_small = { harimarihardline = yes }
		
		event_target:target_province = {
			spawn_rebels = {
				type = blood_lotus_rebel
				size = 2
			}
			spawn_rebels = {
				type = blood_lotus_rebel
				size = 2
			}
		}
		
		blood_lotus_new_sympathizers = yes
	}
	
	option = {
		name = blood_lotus_rebellion.202.b
		blood_lotus_hardline_stance_change_small = { neutral = yes }
		
		event_target:target_province = {
			add_province_modifier = {
				name = blood_lotus_rebellion_peasant_concessions_mod # -50% local prod eff
				duration = 3650
			}
		}
	}
	
	option = {
		name = blood_lotus_rebellion.202.c
		blood_lotus_hardline_stance_change_small = { humanhardline = yes }
		
		event_target:target_province = {
			add_local_autonomy = 25
		}
	}
}

country_event = { # 203 DONE
	id = blood_lotus_rebellion.203
	title = blood_lotus_rebellion.203.t
	desc = blood_lotus_rebellion.203.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		always = yes
	}
	
	immediate = {
		hidden_effect = {
			random_owned_province = {
				save_event_target_as = target_province
			}
		}
	}
	
	option = {
		name = blood_lotus_rebellion.203.a
		blood_lotus_hardline_stance_change_small = { harimarihardline = yes }
		
		event_target:target_province = {
			add_local_autonomy = 25
		}
	}
	
	option = {
		name = blood_lotus_rebellion.203.b
		blood_lotus_hardline_stance_change_small = { neutral = yes }
		
		event_target:target_province = {
			spawn_rebels = {
				type = blood_lotus_rebel
				size = 2
			}
			spawn_rebels = {
				type = blood_lotus_rebel
				size = 2
			}
		}
		
		blood_lotus_new_sympathizers = yes
	}
	
	option = {
		name = blood_lotus_rebellion.203.c
		blood_lotus_hardline_stance_change_small = { humanhardline = yes }
		
		add_years_of_income = -0.1
	}
}

country_event = { # 204 DONE
	id = blood_lotus_rebellion.204
	title = blood_lotus_rebellion.204.t
	desc = blood_lotus_rebellion.204.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		always = yes
	}
	
	immediate = {
		hidden_effect = {
			random_owned_province = {
				save_event_target_as = target_province
			}
		}
	}
	
	option = {
		name = blood_lotus_rebellion.204.a
		blood_lotus_hardline_stance_change_small = { harimarihardline = yes }
		
		add_legitimacy = -10
		
		blood_lotus_rebellion_spawns = yes
	}
	
	option = {
		name = blood_lotus_rebellion.204.b
		blood_lotus_hardline_stance_change_small = { neutral = yes }
		
		event_target:target_province = {
			add_local_autonomy = 25
		}
	}
	
	option = {
		name = blood_lotus_rebellion.204.c
		blood_lotus_hardline_stance_change_small = { humanhardline = yes }
		
		event_target:target_province = {
			spawn_rebels = {
				type = harimari_hardliners
				size = 2
			}
			spawn_rebels = {
				type = harimari_hardliners
				size = 2
			}
		}
	}
}

country_event = { # 205 DONE
	id = blood_lotus_rebellion.205
	title = blood_lotus_rebellion.205.t
	desc = blood_lotus_rebellion.205.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		always = yes
	}
	
	immediate = {
		hidden_effect = {
			random_owned_province = {
				save_event_target_as = target_province
			}
		}
	}
	
	option = {
		name = blood_lotus_rebellion.205.a
		blood_lotus_hardline_stance_change_small = { harimarihardline = yes }
		
		event_target:target_province = {
			spawn_rebels = {
				type = blood_lotus_rebel
				size = 2
			}
			spawn_rebels = {
				type = blood_lotus_rebel
				size = 2
			}
		}
		
		blood_lotus_new_sympathizers = yes
	}
	
	option = {
		name = blood_lotus_rebellion.205.b
		blood_lotus_hardline_stance_change_small = { neutral = yes }
		
		add_yearly_manpower = -0.2
	}
	
	option = {
		name = blood_lotus_rebellion.205.c
		blood_lotus_hardline_stance_change_small = { humanhardline = yes }
		
		add_years_of_income = -0.1
		add_adm_power = -25
	}
}

country_event = { # 206 DONE
	id = blood_lotus_rebellion.206
	title = blood_lotus_rebellion.206.t
	desc = blood_lotus_rebellion.206.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		always = yes
	}
	
	immediate = {
		hidden_effect = {
			random_owned_province = {
				save_event_target_as = target_province_1
			}
			random_owned_province = {
				save_event_target_as = target_province_2
			}
		}
	}
	
	option = {
		name = blood_lotus_rebellion.206.a
		blood_lotus_hardline_stance_change_small = { harimarihardline = yes }
		
		add_yearly_manpower = -0.1
		
		blood_lotus_new_sympathizers = yes
		blood_lotus_rebellion_spreads = yes
	}
	
	option = {
		name = blood_lotus_rebellion.206.b
		blood_lotus_hardline_stance_change_small = { neutral = yes }
		
		event_target:target_province_1 = {
			spawn_rebels = {
				type = blood_lotus_rebel
				size = 2
			}
		}
		event_target:target_province_2 = {
			spawn_rebels = {
				type = blood_lotus_rebel
				size = 2
			}
		}
		
		blood_lotus_rebellion_spawns = yes
		blood_lotus_rebellion_spawns = yes
	}
	
	option = {
		name = blood_lotus_rebellion.206.c
		blood_lotus_hardline_stance_change_small = { humanhardline = yes }
		
		add_yearly_manpower = -0.1
		add_prestige = -10
	}
}

country_event = { # 207 DONE
	id = blood_lotus_rebellion.207
	title = blood_lotus_rebellion.207.t
	desc = blood_lotus_rebellion.207.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		any_owned_province = {
			province_with_uppercastes_goods = yes
		}
	}
	
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = { province_with_uppercastes_goods = yes }
				save_event_target_as = target_province
			}
		}
	}
	
	option = {
		name = blood_lotus_rebellion.207.a
		blood_lotus_hardline_stance_change_small = { harimarihardline = yes }
		
		event_target:target_province = {
			add_province_modifier = {
				name = blood_lotus_rebellion_harimari_stripped_of_rank_mod # -50% local prod eff
				duration = 3650
			}
		}
		
		blood_lotus_rebellion_spawns_hidden = yes
	}
	
	option = {
		name = blood_lotus_rebellion.207.b
		blood_lotus_hardline_stance_change_small = { neutral = yes }
		
		add_country_modifier = {
			name = blood_lotus_rebellion_arbitrary_rule_mod # -1 dip rep
			duration = 3650
		}
		
		blood_lotus_new_sympathizers = yes
	}
	
	option = {
		name = blood_lotus_rebellion.207.c
		blood_lotus_hardline_stance_change_small = { humanhardline = yes }
		
		add_legitimacy = -10
		
		blood_lotus_rebellion_spawns = yes
	}
}

country_event = { # 208 DONE
	id = blood_lotus_rebellion.208
	title = blood_lotus_rebellion.208.t
	desc = blood_lotus_rebellion.208.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		always = yes
	}
	
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = { has_fort_building_trigger = yes }
				save_event_target_as = target_province
			}
		}
	}
	
	option = {
		name = blood_lotus_rebellion.208.a
		blood_lotus_hardline_stance_change_small = { harimarihardline = yes }
		
		event_target:target_province = {
			add_province_modifier = {
				name = blood_lotus_rebellion_damaged_fortifications_mod # -25% local defensiveness -10% recruitment time
				duration = 3650
			}
		}
		
		if = {
			limit = { employed_advisor = { category = MIL } }
			remove_advisor_by_category = MIL
		}
	}
	
	option = {
		name = blood_lotus_rebellion.208.b
		blood_lotus_hardline_stance_change_small = { neutral = yes }
		
		event_target:target_province = {
			add_province_modifier = {
				name = blood_lotus_rebellion_sabotaged_fortifications_mod # -50% local defensiveness
				duration = 3650
			}
		}
	}
	
	option = {
		name = blood_lotus_rebellion.208.c
		blood_lotus_hardline_stance_change_small = { humanhardline = yes }
		
		event_target:target_province = {
			add_province_modifier = {
				name = blood_lotus_rebellion_repairing_fortifications_mod # -10% local defensiveness -10% local prod eff
				duration = 3650
			}
		}
	}
}

country_event = { # 209 DONE
	id = blood_lotus_rebellion.209
	title = blood_lotus_rebellion.209.t
	desc = blood_lotus_rebellion.209.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		caste_fluidity_is_fluid = yes
	}
	
	option = {
		name = blood_lotus_rebellion.209.a
		blood_lotus_hardline_stance_change_small = { harimarihardline = yes }
		
		kill_ruler = yes
		
		blood_lotus_rebellion_spawns = yes
		blood_lotus_rebellion_spawns = yes
		blood_lotus_new_sympathizers = yes
		blood_lotus_new_sympathizers = yes
	}
	
	option = {
		name = blood_lotus_rebellion.209.b
		blood_lotus_hardline_stance_change_small = { neutral = yes }
		
		add_legitimacy = -30
		
		blood_lotus_new_sympathizers = yes
		blood_lotus_new_sympathizers = yes
		blood_lotus_new_sympathizers = yes
		blood_lotus_new_sympathizers = yes
	}
	
	option = {
		name = blood_lotus_rebellion.209.c
		blood_lotus_hardline_stance_change_small = { humanhardline = yes }
		
		add_stability = -1
		random_owned_province = {
			spawn_rebels = {
				type = harimari_hardliners
				size = 2
			}
			spawn_rebels = {
				type = harimari_hardliners
				size = 2
			}
		}
		random_owned_province = {
			spawn_rebels = {
				type = harimari_hardliners
				size = 2
			}
			spawn_rebels = {
				type = harimari_hardliners
				size = 2
			}
		}
	}
}

country_event = { # 210 DENIED
	id = blood_lotus_rebellion.210
	title = blood_lotus_rebellion.210.t
	desc = blood_lotus_rebellion.210.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		always = yes
	}
	
	option = {
		name = blood_lotus_rebellion.210.a
		blood_lotus_hardline_stance_change_small = { harimarihardline = yes }
	}
	
	option = {
		name = blood_lotus_rebellion.210.b
		blood_lotus_hardline_stance_change_small = { neutral = yes }
	}
	
	option = {
		name = blood_lotus_rebellion.210.c
		blood_lotus_hardline_stance_change_small = { humanhardline = yes }
	}
}

country_event = { # 211 DENIED
	id = blood_lotus_rebellion.211
	title = blood_lotus_rebellion.211.t
	desc = blood_lotus_rebellion.211.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		always = yes
	}
	
	option = {
		name = blood_lotus_rebellion.211.a
		blood_lotus_hardline_stance_change_small = { harimarihardline = yes }
	}
	
	option = {
		name = blood_lotus_rebellion.211.b
		blood_lotus_hardline_stance_change_small = { neutral = yes }
	}
	
	option = {
		name = blood_lotus_rebellion.211.c
		blood_lotus_hardline_stance_change_small = { humanhardline = yes }
	}
}

country_event = { # 212 DONE
	id = blood_lotus_rebellion.212
	title = blood_lotus_rebellion.212.t
	desc = blood_lotus_rebellion.212.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		always = yes
	}
	
	immediate = {
		random_owned_province = {
			limit = { has_harimari_minority_trigger = yes }
			save_event_target_as = target_province
		}
	}
	
	option = {
		name = blood_lotus_rebellion.212.a
		blood_lotus_hardline_stance_change_small = { harimarihardline = yes }
		
		event_target:target_province = {
			add_province_modifier = {
				name = blood_lotus_rebellion_fear_tactics_mod # -2 local unrest
				duration = 3650
			}
			add_devastation = 10
		}
		
		blood_lotus_new_sympathizers = yes
	}
	
	option = {
		name = blood_lotus_rebellion.212.b
		blood_lotus_hardline_stance_change_small = { neutral = yes }
		
		event_target:target_province = {
			add_province_modifier = {
				name = blood_lotus_rebellion_arrested_ringleaders_mod # -1 local unrest
				duration = 3650
			}
			spawn_rebels = {
				type = blood_lotus_rebel
				size = 2
			}
		}
	}
	
	option = {
		name = blood_lotus_rebellion.212.c
		blood_lotus_hardline_stance_change_small = { humanhardline = yes }
		
		event_target:target_province = {
			add_province_modifier = {
				name = blood_lotus_rebellion_arbitrary_rulership_mod # +1 local unrest
				duration = 3650
			}
		}
	}
}

country_event = { # 213 DONE
	id = blood_lotus_rebellion.213
	title = blood_lotus_rebellion.213.t
	desc = blood_lotus_rebellion.213.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		always = yes
	}
	
	option = {
		name = blood_lotus_rebellion.213.a
		blood_lotus_hardline_stance_change_small = { harimarihardline = yes }
		
		random_list = {
			50 = {
				add_yearly_manpower = 0.1
				add_years_of_income = 0.1
			}
			50 = {
				add_yearly_manpower = -0.1
				add_years_of_income = -0.1
			}
		}
	}
	
	option = {
		name = blood_lotus_rebellion.213.b
		blood_lotus_hardline_stance_change_small = { neutral = yes }
		
		random_list = {
			25 = {
				add_yearly_manpower = 0.1
				add_years_of_income = 0.1
			}
			75 = {
				add_yearly_manpower = -0.1
				add_years_of_income = -0.1
			}
		}
	}
	
	option = {
		name = blood_lotus_rebellion.213.c
		blood_lotus_hardline_stance_change_small = { humanhardline = yes }
		
		add_yearly_manpower = -0.1
	}
}

country_event = { # 214 DENIED
	id = blood_lotus_rebellion.214
	title = blood_lotus_rebellion.214.t
	desc = blood_lotus_rebellion.214.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		always = yes
	}
	
	option = {
		name = blood_lotus_rebellion.214.a
		blood_lotus_hardline_stance_change_small = { harimarihardline = yes }
	}
	
	option = {
		name = blood_lotus_rebellion.214.b
		blood_lotus_hardline_stance_change_small = { neutral = yes }
	}
	
	option = {
		name = blood_lotus_rebellion.214.c
		blood_lotus_hardline_stance_change_small = { humanhardline = yes }
	}
}

country_event = { # 215 DENIED
	id = blood_lotus_rebellion.215
	title = blood_lotus_rebellion.215.t
	desc = blood_lotus_rebellion.215.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		always = yes
	}
	
	option = {
		name = blood_lotus_rebellion.215.a
		blood_lotus_hardline_stance_change_small = { harimarihardline = yes }
	}
	
	option = {
		name = blood_lotus_rebellion.215.b
		blood_lotus_hardline_stance_change_small = { neutral = yes }
	}
	
	option = {
		name = blood_lotus_rebellion.215.c
		blood_lotus_hardline_stance_change_small = { humanhardline = yes }
	}
}

country_event = { # 216 DENIED
	id = blood_lotus_rebellion.216
	title = blood_lotus_rebellion.216.t
	desc = blood_lotus_rebellion.216.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		always = yes
	}
	
	option = {
		name = blood_lotus_rebellion.216.a
		blood_lotus_hardline_stance_change_small = { harimarihardline = yes }
	}
	
	option = {
		name = blood_lotus_rebellion.216.b
		blood_lotus_hardline_stance_change_small = { neutral = yes }
	}
	
	option = {
		name = blood_lotus_rebellion.216.c
		blood_lotus_hardline_stance_change_small = { humanhardline = yes }
	}
}

country_event = { # 217 DENIED
	id = blood_lotus_rebellion.217
	title = blood_lotus_rebellion.217.t
	desc = blood_lotus_rebellion.217.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		always = yes
	}
	
	option = {
		name = blood_lotus_rebellion.217.a
		blood_lotus_hardline_stance_change_small = { harimarihardline = yes }
	}
	
	option = {
		name = blood_lotus_rebellion.217.b
		blood_lotus_hardline_stance_change_small = { neutral = yes }
	}
	
	option = {
		name = blood_lotus_rebellion.217.c
		blood_lotus_hardline_stance_change_small = { humanhardline = yes }
	}
}

country_event = { # 218 DONE
	id = blood_lotus_rebellion.218
	title = blood_lotus_rebellion.218.t
	desc = blood_lotus_rebellion.218.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		always = yes
	}
	
	immediate = {
		random_owned_province = {
			save_event_target_as = target_province
		}
	}
	
	option = {
		name = blood_lotus_rebellion.218.a
		blood_lotus_hardline_stance_change_small = { harimarihardline = yes }
		
		event_target:target_province = {
			spawn_rebels = {
				type = blood_lotus_rebel
				size = 2
			}
		}
		
		blood_lotus_rebellion_spreads = yes
	}
	
	option = {
		name = blood_lotus_rebellion.218.b
		blood_lotus_hardline_stance_change_small = { neutral = yes }
		
		add_yearly_manpower = -0.25
	}
	
	option = {
		name = blood_lotus_rebellion.218.c
		blood_lotus_hardline_stance_change_small = { humanhardline = yes }
		
		add_years_of_income = -0.1
		
		event_target:target_province = {
			spawn_rebels = {
				type = harimari_hardliners
				size = 2
			}
		}
	}
}

country_event = { # 219 DONE
	id = blood_lotus_rebellion.219
	title = blood_lotus_rebellion.219.t
	desc = blood_lotus_rebellion.219.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		always = yes
	}
	
	immediate = {
		hidden_effect = {
			random_neighbor_country = {
				limit = { NOT = { is_subject_of = ROOT } }
				save_event_target_as = target_country
			}
		}
	}
	
	option = {
		name = blood_lotus_rebellion.219.a
		blood_lotus_hardline_stance_change_small = { harimarihardline = yes }
		
		add_country_modifier = {
			name = blood_lotus_rebellion_angered_neighbour_mod # -1 diplo rep +1 prestige
			duration = 3650
		}
		reverse_add_opinion = {
			who = event_target:target_country
			modifier = blood_lotus_rebellion_angered_by_refusal
		}
	}
	
	option = {
		name = blood_lotus_rebellion.219.b
		blood_lotus_hardline_stance_change_small = { neutral = yes }
		
		add_country_modifier = {
			name = blood_lotus_rebellion_lies_of_state_mod # -10% opinion mod
			duration = 1825
		}
		reverse_add_opinion = {
			who = event_target:target_country
			modifier = blood_lotus_rebellion_not_impressed
		}
	}
	
	option = {
		name = blood_lotus_rebellion.219.c
		blood_lotus_hardline_stance_change_small = { humanhardline = yes }
		
		add_years_of_income = -0.25
		add_country_modifier = {
			name = blood_lotus_rebellion_upholding_relations_mod # +1 diplo rep
			duration = 3650
		}
		reverse_add_opinion = {
			who = event_target:target_country
			modifier = blood_lotus_rebellion_appeased
		}
	}
}

country_event = { # 220 DONE
	id = blood_lotus_rebellion.220
	title = blood_lotus_rebellion.220.t
	desc = blood_lotus_rebellion.220.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		always = yes
	}
	
	option = {
		name = blood_lotus_rebellion.220.a
		blood_lotus_hardline_stance_change_small = { harimarihardline = yes }
		
		add_country_modifier = {
			name = blood_lotus_rebellion_rule_by_fear_mod # -3 unrest
			duration = 3650
		}
		
		blood_lotus_new_sympathizers = yes
	}
	
	option = {
		name = blood_lotus_rebellion.220.b
		blood_lotus_hardline_stance_change_small = { neutral = yes }
		
		add_country_modifier = {
			name = blood_lotus_rebellion_rule_of_law_upheld_mod # +1 prestige
			duration = 3650
		}
	}
	
	option = {
		name = blood_lotus_rebellion.220.c
		blood_lotus_hardline_stance_change_small = { humanhardline = yes }
		
		add_prestige = -20
		create_general = { tradition = 20 }
	}
}

country_event = { # 221 DONE
	id = blood_lotus_rebellion.221
	title = blood_lotus_rebellion.221.t
	desc = blood_lotus_rebellion.221.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		always = yes
	}
	
	option = {
		name = blood_lotus_rebellion.221.a
		blood_lotus_hardline_stance_change_small = { harimarihardline = yes }
		
		add_yearly_manpower = -0.25
		blood_lotus_new_sympathizers = yes
	}
	
	option = {
		name = blood_lotus_rebellion.221.b
		blood_lotus_hardline_stance_change_small = { neutral = yes }
		
		add_yearly_manpower = -0.10
		blood_lotus_rebellion_spawns = yes
	}
	
	option = {
		name = blood_lotus_rebellion.221.c
		blood_lotus_hardline_stance_change_small = { humanhardline = yes }
		
		add_country_modifier = {
			name = blood_lotus_rebellion_disobeying_soldiers_mod # -2.5% morale
			duration = 3650
		}
		blood_lotus_rebellion_spawns_hidden = yes
	}
}

country_event = { # 222 DONE
	id = blood_lotus_rebellion.222
	title = blood_lotus_rebellion.222.t
	desc = blood_lotus_rebellion.222.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	trigger = {
		NOT = { has_country_flag = blood_lotus_war_room_blown }
	}
	
	immediate = {
		set_country_flag = blood_lotus_war_room_blown
	}
	
	option = {
		name = blood_lotus_rebellion.222.a
		blood_lotus_hardline_stance_change_small = { harimarihardline = yes }
		
		add_years_of_income = -0.5
		create_general = { tradition = 40 }
	}
	
	option = {
		name = blood_lotus_rebellion.222.b
		blood_lotus_hardline_stance_change_small = { neutral = yes }
		
		add_stability = -1
	}
	
	option = {
		name = blood_lotus_rebellion.222.c
		blood_lotus_hardline_stance_change_small = { humanhardline = yes }
		
		create_general = { tradition = 20 }
	}
}

country_event = { # 223 DONE
	id = blood_lotus_rebellion.223
	title = blood_lotus_rebellion.223.t
	desc = blood_lotus_rebellion.223.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		any_neighbor_country = {
			NOT = { has_country_flag = blood_lotus_closed_borders }
			NOT = { is_subject_of = ROOT }
		}
	}
	
	immediate = {
		hidden_effect = {
			random_neighbor_country = {
				limit = { NOT = { has_country_flag = blood_lotus_closed_borders } NOT = { is_subject_of = ROOT } }
				set_country_flag = blood_lotus_closed_borders
				save_event_target_as = target_country
			}
		}
	}
	
	option = {
		name = blood_lotus_rebellion.223.a
		blood_lotus_hardline_stance_change_small = { harimarihardline = yes }
		
		add_opinion = {
			who = event_target:target_country
			modifier = blood_lotus_rebellion_closed_borders
		}
		
		every_owned_province = {
			limit = {
				any_neighbor_province = {
					owned_by = event_target:target_country
				}
			}
			add_province_modifier = {
				name = blood_lotus_rebellion_closed_borders_mod # +1 local unrest -20% trade power
				duration = 3650
			}
		}
	}
	
	option = { # Try negotiating
		name = blood_lotus_rebellion.223.b
		blood_lotus_hardline_stance_change_small = { neutral = yes }
		
		event_target:target_country = {
			country_event = { id = blood_lotus_rebellion.224 days = 15 }
		}
	}
	
	option = {
		name = blood_lotus_rebellion.223.c
		blood_lotus_hardline_stance_change_small = { humanhardline = yes }
		every_owned_province = {
			limit = {
				any_neighbor_province = {
					owned_by = event_target:target_country
				}
			}
			add_province_modifier = {
				name = blood_lotus_rebellion_set_up_border_camps_mod # -5 local unrest
				duration = 3650
			}
		}
	}
}

country_event = { # 224 DONE
	id = blood_lotus_rebellion.224
	title = blood_lotus_rebellion.224.t
	desc = blood_lotus_rebellion.224.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		always = yes
	}
	
	after = {
		FROM = { country_event = { id = blood_lotus_rebellion.225 days = 15 } }
	}
	
	option = { # accept
		name = blood_lotus_rebellion.224.a
		
		set_country_flag = blood_lotus_accept
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				has_opinion = {
					who = FROM
					value = 50
				}
			}
			modifier = {
				factor = 2
				has_opinion = {
					who = FROM
					value = 100
				}
			}
		}
	}
	
	option = { # accept partially
		name = blood_lotus_rebellion.224.b
		
		set_country_flag = blood_lotus_partially_accept
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				has_opinion = {
					who = FROM
					value = 0
				}
				NOT = {
					has_opinion = {
						who = FROM
						value = 50
					}
				}
			}
		}
	}
	
	option = { # refused
		name = blood_lotus_rebellion.224.c
		
		set_country_flag = blood_lotus_refuses
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				NOT = {
					has_opinion = {
						who = FROM
						value = 0
					}
				}
			}
			modifier = {
				factor = 2
				NOT = {
					has_opinion = {
						who = FROM
						value = 50
					}
				}
			}
			modifier = {
				factor = 2
				is_rival = FROM
			}
		}
	}
}

country_event = { # 225 DONE
	id = blood_lotus_rebellion.225
	title = blood_lotus_rebellion.225.t
	desc = {
		trigger = { FROM = { has_country_flag = blood_lotus_accept } }
		desc = blood_lotus_rebellion.225.d1
	}
	desc = {
		trigger = { FROM = { has_country_flag = blood_lotus_partially_accept } }
		desc = blood_lotus_rebellion.225.d2
	}
	desc = {
		trigger = { FROM = { has_country_flag = blood_lotus_refuses } }
		desc = blood_lotus_rebellion.225.d3
	}
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		always = yes
	}
	
	option = { # they accepted
		name = blood_lotus_rebellion.225.a
		trigger = { FROM = { has_country_flag = blood_lotus_accept } }
		hidden_effect = { FROM = { clr_country_flag = blood_lotus_accept } }
		
		add_opinion = {
			who = FROM
			modifier = blood_lotus_rebellion_opened_borders
		}
		
		every_owned_province = {
			limit = {
				any_neighbor_province = {
					owned_by = FROM
				}
			}
			add_province_modifier = {
				name = blood_lotus_rebellion_borders_kept_open_mod # -1 local unrest
				duration = 3650
			}
		}
	}
	
	option = { # they partially accepted
		name = blood_lotus_rebellion.225.b
		trigger = { FROM = { has_country_flag = blood_lotus_partially_accept } }
		hidden_effect = { FROM = { clr_country_flag = blood_lotus_partially_accept } }
		
		every_owned_province = {
			limit = {
				any_neighbor_province = {
					owned_by = FROM
				}
			}
			add_province_modifier = {
				name = blood_lotus_rebellion_limited_trade_mod # +1 local unrest
				duration = 3650
			}
		}
	}
	
	option = { # they refused
		name = blood_lotus_rebellion.225.c
		trigger = { FROM = { has_country_flag = blood_lotus_refuses } }
		hidden_effect = { FROM = { clr_country_flag = blood_lotus_refuses } }
		
		add_opinion = {
			who = FROM
			modifier = blood_lotus_rebellion_kept_closed_borders
		}
		
		every_owned_province = {
			limit = {
				any_neighbor_province = {
					owned_by = FROM
				}
			}
			add_province_modifier = {
				name = blood_lotus_rebellion_closed_borders_mod # +1 local unrest -20% trade power
				duration = 3650
			}
		}
	}
}

country_event = { # 226 DONE
	id = blood_lotus_rebellion.226
	title = blood_lotus_rebellion.226.t
	desc = blood_lotus_rebellion.226.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		NOT = { has_country_flag = blood_lotus_pessimism }
	}
	
	immediate = {
		set_country_flag = blood_lotus_pessimism
	}
	
	option = {
		name = blood_lotus_rebellion.226.a
		blood_lotus_hardline_stance_change_small = { harimarihardline = yes }
		
		kill_leader = {
			type = general
		}
		add_prestige = 5
	}
	
	option = {
		name = blood_lotus_rebellion.226.b
		blood_lotus_hardline_stance_change_small = { neutral = yes }
		
		add_prestige = -10
	}
	
	option = {
		name = blood_lotus_rebellion.226.c
		blood_lotus_hardline_stance_change_small = { humanhardline = yes }
		
		add_country_modifier = {
			name = blood_lotus_rebellion_demoralised_troops_mod # -5% morale -2 unrest
			duration = 3650
		}
	}
}

country_event = { # 227 DONE
	id = blood_lotus_rebellion.227
	title = blood_lotus_rebellion.227.t
	desc = blood_lotus_rebellion.227.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		any_owned_province = {
			OR = {
				AND = {
					has_hobgoblin_minority_trigger = yes
					NOT = { ROOT = { is_race_in_any_caste = { hobgoblin = yes } } }
				}
				AND = {
					has_dwarven_minority_trigger = yes
					NOT = { ROOT = { is_race_in_any_caste = { dwarven = yes } } }
				}
				has_elven_minority_trigger = yes
				has_halfling_minority_trigger = yes
			}
		}
	}
	
	option = {
		name = blood_lotus_rebellion.227.a
		blood_lotus_hardline_stance_change_small = { harimarihardline = yes }
		
		every_owned_province = {
			limit = {
				OR = {
					AND = {
						has_hobgoblin_minority_trigger = yes
						NOT = { ROOT = { is_race_in_any_caste = { hobgoblin = yes } } }
					}
					AND = {
						has_dwarven_minority_trigger = yes
						NOT = { ROOT = { is_race_in_any_caste = { dwarven = yes } } }
					}
					has_elven_minority_trigger = yes
					has_halfling_minority_trigger = yes
				}
			}
			add_local_autonomy = 15
		}
	}
	
	option = {
		name = blood_lotus_rebellion.227.b
		blood_lotus_hardline_stance_change_small = { neutral = yes }
		
		add_country_modifier = {
			name = blood_lotus_rebellion_status_quo_guaranteed_mod # -2 unrest
			duration = 3650
		}
	}
	
	option = {
		name = blood_lotus_rebellion.227.c
		blood_lotus_hardline_stance_change_small = { humanhardline = yes }
		
		change_government_reform_progress = 50
	}
}

country_event = { # 228 DONE
	id = blood_lotus_rebellion.228
	title = blood_lotus_rebellion.228.t
	desc = blood_lotus_rebellion.228.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	
	hidden = yes
	
	trigger = {
		NOT = { has_country_flag = rival_supported_blood_lotus }
	}
	
	option = {
		name = blood_lotus_rebellion.228.a
		
		set_country_flag = rival_supported_blood_lotus
		
		random_rival_country = {
			country_event = { id = blood_lotus_rebellion.229 days = 15 random = 15 }
		}
	}
}

country_event = { # 229 DONE
	id = blood_lotus_rebellion.229
	title = blood_lotus_rebellion.229.t
	desc = blood_lotus_rebellion.229.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		always = yes
	}
	
	option = {
		name = blood_lotus_rebellion.229.a
		add_years_of_income = -0.25
		hidden_effect = {
			random_list = {
				40 = { # fail
					modifier = {
						factor = 1.1
						ruler_has_personality = naive_personality
					}
					modifier = {
						factor = 1.1
						ruler_has_personality = loose_lips_personality
					}
					FROM = { set_country_flag = rival_sent_supply country_event = { id = blood_lotus_rebellion.230 days = 15 random = 15 } }
				}
				60 = { # success
					modifier = {
						factor = 1.2
						ruler_has_personality = careful_personality
					}
					modifier = {
						factor = 1.2
						ruler_has_personality = secretive_personality
					}
					modifier = {
						factor = 1.2
						ruler_has_personality = intricate_web_weaver_personality
					}
					FROM = { set_country_flag = rival_sent_supply country_event = { id = blood_lotus_rebellion.231 days = 15 random = 15 } }
				}
			}
		}
	}
	
	option = {
		name = blood_lotus_rebellion.229.b
		add_yearly_manpower = -0.2
		hidden_effect = {
			random_list = {
				40 = { # fail
					modifier = {
						factor = 1.1
						ruler_has_personality = naive_personality
					}
					modifier = {
						factor = 1.1
						ruler_has_personality = loose_lips_personality
					}
					FROM = { set_country_flag = rival_sent_manpower country_event = { id = blood_lotus_rebellion.230 days = 15 random = 15 } }
				}
				60 = { # success
					modifier = {
						factor = 1.2
						ruler_has_personality = careful_personality
					}
					modifier = {
						factor = 1.2
						ruler_has_personality = secretive_personality
					}
					modifier = {
						factor = 1.2
						ruler_has_personality = intricate_web_weaver_personality
					}
					FROM = { set_country_flag = rival_sent_manpower country_event = { id = blood_lotus_rebellion.231 days = 15 random = 15 } }
				}
			}
		}
	}
	
	option = {
		name = blood_lotus_rebellion.229.c
		trigger = { ai = no }
		# do nothing
	}
}

country_event = { # 230 DONE
	id = blood_lotus_rebellion.230
	title = blood_lotus_rebellion.230.t
	desc = {
		trigger = { has_country_flag = rival_sent_supply }
		desc = blood_lotus_rebellion.230.d1
	}
	desc = {
		trigger = { has_country_flag = rival_sent_manpower }
		desc = blood_lotus_rebellion.230.d2
	}
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		always = yes
	}
	
	after = {
		add_opinion = {
			who = FROM
			modifier = blood_lotus_rebellion_supported_blood_lotus
		}
		reverse_add_opinion = {
			who = FROM
			modifier = blood_lotus_rebellion_supported_blood_lotus
		}
		clr_country_flag = rival_sent_supply
		clr_country_flag = rival_sent_manpower
	}
	
	option = {
		name = blood_lotus_rebellion.230.a
		blood_lotus_hardline_stance_change_small = { harimarihardline = yes }
		
		random_owned_province = {
			spawn_rebels = {
				type = blood_lotus_rebel
				size = 2
			}
			spawn_rebels = {
				type = blood_lotus_rebel
				size = 2
			}
		}
		
		blood_lotus_rebellion_spawns = yes
		
		hidden_effect = { FROM = { country_event = { id = blood_lotus_rebellion.232 days = 15 random = 15 } } }
	}
	
	option = {
		name = blood_lotus_rebellion.230.b
		blood_lotus_hardline_stance_change_small = { neutral = yes }
		
		add_treasury = 25
		
		blood_lotus_new_sympathizers = yes
		
		hidden_effect = { FROM = { country_event = { id = blood_lotus_rebellion.232 days = 15 random = 15 } } }
	}
	
	option = {
		name = blood_lotus_rebellion.230.c
		blood_lotus_hardline_stance_change_small = { humanhardline = yes }
		
		custom_tooltip = blood_lotus_rebellion_consequences_tt
		
		blood_lotus_new_sympathizers = yes
		blood_lotus_rebellion_spawns_hidden = yes
		
		hidden_effect = { FROM = { country_event = { id = blood_lotus_rebellion.233 days = 15 random = 15 } } }
	}
}

country_event = { # 231 DONE
	id = blood_lotus_rebellion.231
	title = blood_lotus_rebellion.231.t
	desc = {
		trigger = { has_country_flag = rival_sent_supply }
		desc = blood_lotus_rebellion.231.d1
	}
	desc = {
		trigger = { has_country_flag = rival_sent_manpower }
		desc = blood_lotus_rebellion.231.d2
	}
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		always = yes
	}
	
	immediate = {
		random_owned_province = {
			save_event_target_as = target_province_1
		}
		random_owned_province = {
			limit = { NOT = { province_id = event_target:target_province_1 } }
			save_event_target_as = target_province_2
		}
	}
	
	after = {
		add_opinion = {
			who = FROM
			modifier = blood_lotus_rebellion_supported_blood_lotus
		}
		reverse_add_opinion = {
			who = FROM
			modifier = blood_lotus_rebellion_supported_blood_lotus
		}
		clr_country_flag = rival_sent_supply
		clr_country_flag = rival_sent_manpower
	}
	
	option = {
		name = blood_lotus_rebellion.231.a
		blood_lotus_hardline_stance_change_small = { harimarihardline = yes }
		
		event_target:target_province_1 = {
			add_unrest = 5
		}
		event_target:target_province_2 = {
			add_unrest = 5
		}
		
		blood_lotus_rebellion_spreads = yes
		
		hidden_effect = { FROM = { country_event = { id = blood_lotus_rebellion.233 days = 15 random = 15 } } }
	}
	
	option = {
		name = blood_lotus_rebellion.231.b
		blood_lotus_hardline_stance_change_small = { neutral = yes }
		
		event_target:target_province_1 = {
			add_devastation = 10
		}
		event_target:target_province_2 = {
			add_devastation = 10
		}
		
		blood_lotus_rebellion_spreads = yes
		
		hidden_effect = { FROM = { country_event = { id = blood_lotus_rebellion.233 days = 15 random = 15 } } }
	}
	
	option = {
		name = blood_lotus_rebellion.231.c
		blood_lotus_hardline_stance_change_small = { humanhardline = yes }
		
		if = {
			limit = {
				any_owned_province = {
					any_neighbor_province = {
						owner = { is_rival = ROOT }
					}
				}
			}
			random_owned_province = {
				limit = {
					any_neighbor_province = {
						owner = { is_rival = ROOT }
					}
				}
				spawn_rebels = {
					type = harimari_hardliners
					size = 2
				}
			}
		}
		else = {
			random_owned_province = {
				limit = {
					any_neighbor_province = {
						NOT = { owned_by = ROOT }
					}
				}
				spawn_rebels = {
					type = harimari_hardliners
					size = 2
				}
			}
		}
		
		hidden_effect = { FROM = { country_event = { id = blood_lotus_rebellion.233 days = 15 random = 15 } } }
	}
}

country_event = { # 232 DONE
	id = blood_lotus_rebellion.232
	title = blood_lotus_rebellion.232.t
	desc = blood_lotus_rebellion.232.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		always = yes
	}
	
	option = {
		name = blood_lotus_rebellion.232.a
		add_prestige = -10
	}
}

country_event = { # 233 DONE
	id = blood_lotus_rebellion.233
	title = blood_lotus_rebellion.233.t
	desc = blood_lotus_rebellion.233.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		always = yes
	}
	
	option = {
		name = blood_lotus_rebellion.233.a
		add_prestige = 10
	}
}

country_event = { # 234 DONE
	id = blood_lotus_rebellion.234
	title = blood_lotus_rebellion.234.t
	desc = blood_lotus_rebellion.234.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		always = yes
	}
	
	immediate = {
		random_owned_province = {
			save_event_target_as = target_province
		}
	}
	
	option = {
		name = blood_lotus_rebellion.234.a
		blood_lotus_hardline_stance_change_small = { harimarihardline = yes }
		
		event_target:target_province = {
			add_province_modifier = {
				name = blood_lotus_rebellion_merchants_unaided_mod # -50% local prod eff
				duration = 3650
			}
		}
		
		blood_lotus_rebellion_spawns_hidden = yes
	}
	
	option = {
		name = blood_lotus_rebellion.234.b
		blood_lotus_hardline_stance_change_small = { neutral = yes }
		
		add_legitimacy = 10
		
		blood_lotus_rebellion_spawns = yes
	}
	
	option = {
		name = blood_lotus_rebellion.234.c
		blood_lotus_hardline_stance_change_small = { humanhardline = yes }
		
		add_country_modifier = {
			name = blood_lotus_rebellion_not_in_control_mod # -1 dip rep
			duration = 3650
		}
		
		blood_lotus_new_sympathizers = yes
	}
}

country_event = { # 235 DONE
	id = blood_lotus_rebellion.235
	title = blood_lotus_rebellion.235.t
	desc = blood_lotus_rebellion.235.d
	picture = 3_Rajput_Estate__eventPicture
	
	is_triggered_only = yes
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		always = yes
	}
	
	immediate = {
		random_owned_province = {
			save_event_target_as = target_province
		}
	}
	
	option = {
		name = blood_lotus_rebellion.235.a
		blood_lotus_hardline_stance_change_small = { harimarihardline = yes }
		
		add_legitimacy = 10
		
		blood_lotus_rebellion_spawns = yes
	}
	
	option = {
		name = blood_lotus_rebellion.235.b
		blood_lotus_hardline_stance_change_small = { neutral = yes }
		
		add_country_modifier = {
			name = blood_lotus_rebellion_broken_feudal_contracts_mod # -1 dip rep
			duration = 3650
		}
		
		blood_lotus_new_sympathizers = yes
	}
	
	option = {
		name = blood_lotus_rebellion.235.c
		blood_lotus_hardline_stance_change_small = { humanhardline = yes }
		
		event_target:target_province = {
			add_province_modifier = {
				name = blood_lotus_rebellion_supporting_rebels_mod # -50% local prod eff
				duration = 3650
			}
		}
		
		blood_lotus_rebellion_spawns_hidden = yes
	}
}
