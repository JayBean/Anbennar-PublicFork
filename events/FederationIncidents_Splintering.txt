

namespace = splintering

#Splintering Begins
country_event = {
	id = splintering.1
	title = splintering.1.t
	desc = splintering.1.d
	picture = STREET_SPEECH_eventPicture
	
	fire_only_once = yes
	major = yes
	major_trigger = { has_country_modifier = lake_federation_member }
	is_triggered_only = yes
	
	option = {
		name = splintering.1.a
		hidden_effect = {
			set_global_flag = last_federation_crisis
			set_global_flag = federation_crisis
			set_global_flag = federation_crisis_splintering
		}
	}
	
	after = {
		hidden_effect = {
			if = {
				limit = {
					any_known_country = {
						ai = no
						has_country_modifier = lake_federation_member
					}
				}
				random_known_country = {
					limit = {
						ai = no
						has_country_modifier = lake_federation_member
					}
					country_event = { id = splintering.101 days = 21 random = 10 }
					country_event = { id = splintering.110 days = 160 random = 10 }
					country_event = { id = splintering.111 days = 300 random = 10 }
				}
			}
			else = {
				every_known_country = {
					limit = { has_country_modifier = lake_federation_member }
					country_event = { id = splintering.101 days = 21 random = 30 }
					country_event = { id = splintering.110 days = 160 random = 30 }
					country_event = { id = splintering.111 days = 300 random = 30 }
				}
			}
			every_known_country = { 
				limit = { has_country_modifier = lake_federation_member }
				country_event = { id = splintering.100 }
				country_event = { id = splintering.101 days = 21 }
				country_event = { id = splintering.110 days = 160 }
				country_event = { id = splintering.111 days = 300 }
			}
		}
	}
}

#Formable Offer
country_event = {
	id = splintering.2
	title = splintering.2.t
	desc = splintering.2.d
	picture = STREET_SPEECH_eventPicture
	
	major = yes
	major_trigger = { has_country_modifier = lake_federation_member }
	is_triggered_only = yes
	
	trigger = {
		NOT = { federation_cohesion_formed_tag = yes }
		NOT = {
			AND = {
				federation_cohesion_forms_J51 = yes
				exists = J51
			}
			AND = {
				federation_cohesion_forms_J52 = yes
				exists = J52
			}
			AND = {
				federation_cohesion_forms_J53 = yes
				exists = J53
			}
			AND = {
				federation_cohesion_forms_J49 = yes
				exists = J49
			}
			AND = {
				federation_cohesion_forms_J50 = yes
				exists = J50
			}
		}
	}
	
	immediate = {
		set_country_flag = cohesion_rejected_formation
	}
	
	option = {
		name = splintering.2.a
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0
				is_lake_federation_leader = yes
				any_known_country = {
					ai = no
					federation_cohesion_formed_tag = yes
				}
			}
			modifier = {
				factor = 0
				tag = J23
			}
		}
		clr_country_flag = cohesion_rejected_formation
		lake_federation_lose_15_points = yes
		federation_cohesion_form_formable = yes
		if = {
			limit = { is_lake_federation_leader = yes }
			set_global_flag = federation_cohesion_president_abandoned
		}
	}
	
	option = {
		name = splintering.2.b
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				NOT = { is_lake_federation_leader = yes }
				NOT = { tag = J23 }
			}
		}
		lake_federation_gain_10_points = yes
		hidden_effect = {
			clr_country_flag = cohesion_J51_former
			clr_country_flag = cohesion_J52_former
			clr_country_flag = cohesion_J53_former
			clr_country_flag = cohesion_J49_former
			clr_country_flag = cohesion_J50_former
			country_event = { id = splintering.103 days = 2 }
		}
	}
}

#President Abandons the Federation
country_event = {
	id = splintering.3
	title = splintering.3.t
	desc = splintering.3.d
	picture = STREET_SPEECH_eventPicture
	
	major = yes
	major_trigger = { has_country_modifier = lake_federation_member }
	is_triggered_only = yes
	
	option = {
		name = splintering.3.a
		tooltip = {
			add_country_modifier = {
				name = lake_federation_splinter_rally
				duration = 5475
			}
		}
		custom_tooltip = cohesion_federation_denounced
		hidden_effect = {
			every_known_country = {
				limit = {
					has_country_modifier = lake_federation_member
					federation_cohesion_formed_tag = yes
				}
				add_country_modifier = { 
					name = lake_federation_splinter_rally
					duration = 5475
				}
			}
			if = {
				limit = {
					has_country_modifier = lake_federation_member
					federation_cohesion_formed_tag = yes
				}
				add_country_modifier = { 
					name = lake_federation_splinter_rally
					duration = 5475
				}
			}
		}
	}
}

#President Supports the Federation
country_event = {
	id = splintering.4
	title = splintering.4.t
	desc = splintering.4.d
	picture = STREET_SPEECH_eventPicture
	
	major = yes
	major_trigger = { has_country_modifier = lake_federation_member }
	is_triggered_only = yes
	
	option = {
		name = splintering.4.a
		tooltip = {
			add_country_modifier = {
				name = lake_federation_splinter_rally
				duration = 5475
			}
		}
		custom_tooltip = cohesion_federation_supported
		hidden_effect = {
			every_known_country = {
				limit = {
					has_country_modifier = lake_federation_member
					NOT = { federation_cohesion_formed_tag = yes }
				}
				add_country_modifier = { 
					name = lake_federation_splinter_rally
					duration = 5475
				}
			}
			if = {
				limit = {
					has_country_modifier = lake_federation_member
					NOT = { federation_cohesion_formed_tag = yes }
				}
				add_country_modifier = { 
					name = lake_federation_splinter_rally
					duration = 5475
				}
			}
		}
	}
}

#Draw the Sides
country_event = {
	id = splintering.5
	title = splintering.5.t
	desc = splintering.5.d
	picture = STREET_SPEECH_eventPicture
	
	major = yes
	major_trigger = {
		has_country_modifier = lake_federation_member
		NOT = { has_global_flag = federation_splintering_event_5 }
	}
	is_triggered_only = yes
	
	trigger = {
		NOT = { federation_cohesion_formed_tag = yes }
	}
	
	option = {
		name = splintering.5.a
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				is_lake_federation_leader = yes
			}
			modifier = {
				factor = 0
				tag = J23 #HotH
			}
			modifier = {
				factor = 0
				tag = J31
			}
			modifier = {
				factor = 2
				calc_true_if = {
					all_known_country = {
						has_country_modifier = lake_federation_member
					}
					amount = 20
				}
			}
			modifier = {
				factor = 2
				calc_true_if = {
					all_known_country = {
						has_country_modifier = lake_federation_member
					}
					amount = 15
				}
			}
			modifier = {
				factor = 0
				NOT = {
					calc_true_if = {
						all_known_country = {
							has_country_modifier = lake_federation_member
						}
						amount = 12
					}
				}
				NOT = {
					tag = J01
					tag = J10
					tag = J18
					tag = J25
					tag = J28
				}
			}
			modifier = {
				factor = 10
				OR = {
					tag = J01
					tag = J10
					tag = J18
					tag = J25
					tag = J28
				}
			}
			modifier = {
				factor = 3
				OR = {
					AND = {
						federation_cohesion_forms_J51 = yes
						NOT = { border_distance = { who = J51 distance = 10 } }
					}
					AND = {
						federation_cohesion_forms_J52 = yes
						NOT = { border_distance = { who = J52 distance = 10 } }
					}
					AND = {
						federation_cohesion_forms_J53 = yes
						NOT = { border_distance = { who = J53 distance = 10 } }
					}
					AND = {
						federation_cohesion_forms_J49 = yes
						NOT = { border_distance = { who = J49 distance = 10 } }
					}
					AND = {
						federation_cohesion_forms_J50 = yes
						NOT = { border_distance = { who = J50 distance = 10 } }
					}
				}
			}
			modifier = {
				factor = 8
				tag = J09
				J50 = { owns = 5253 }
			}
		}
		lake_federation_lose_5_points = yes
		if = {
			limit = { federation_cohesion_forms_J51 = yes }
			J51 = { inherit = ROOT }
		}
		else_if = {
			limit = { federation_cohesion_forms_J52 = yes }
			J52 = { inherit = ROOT }
		}
		else_if = {
			limit = { federation_cohesion_forms_J53 = yes }
			J53 = { inherit = ROOT }
		}
		else_if = {
			limit = { federation_cohesion_forms_J49 = yes }
			J49 = { inherit = ROOT }
		}
		else_if = {
			limit = { federation_cohesion_forms_J50 = yes }
			J50 = { inherit = ROOT }
		}
		if = {
			limit = { ai = no }
			custom_tooltip = cohesion_game_over
		}
	}
	
	option = {
		name = splintering.5.b
		ai_chance = {
			factor = 90
			modifier = {
				factor = 2
				OR = {
					AND = {
						federation_cohesion_forms_J51 = yes
						J51 = { has_country_flag = cohesion_followed_path }
					}
					AND = {
						federation_cohesion_forms_J52 = yes
						J52 = { has_country_flag = cohesion_followed_path }
					}
					AND = {
						federation_cohesion_forms_J53 = yes
						J53 = { has_country_flag = cohesion_followed_path }
					}
					AND = {
						federation_cohesion_forms_J49 = yes
						J49 = { has_country_flag = cohesion_followed_path }
					}
					AND = {
						federation_cohesion_forms_J50 = yes
						J50 = { has_country_flag = cohesion_followed_path }
					}
				}
			}
			modifier = {
				factor = 10
				OR = {
					tag = J11
					tag = J12
					tag = J13
					tag = J14
					tag = J15
					tag = J16
				}
			}
		}
		lake_federation_gain_2_points = yes
		add_prestige = 5
	}
	
	after = {
		hidden_effect = {
			set_global_flag = federation_splintering_event_5
			if = {
				limit = {
					J50 = {
						owns = 5248
						owns = 5253
					}
				}
				J50 = { country_event = { id = splintering.9 days = 14 } }
			}
		}
	}
}

#Orachav Breakaway
country_event = {
	id = splintering.6
	title = splintering.6.t
	desc = splintering.6.d
	picture = COSSACK_ESTATE_RAIDERS_eventPicture
	
	major = yes
	major_trigger = { 
		has_country_modifier = lake_federation_member
		NOT = { has_global_flag = federation_splintering_event_6 }
	}
	is_triggered_only = yes
	
	trigger = {
		NOT = { tag = J53 }
	}
	
	option = {
		name = splintering.6.a
		every_owned_province = {
			limit = {
				OR = {
					region = west_forbidden_plains_region
					region = east_forbidden_plains_region
				}
			}
			hidden_effect = {
				every_country = {
					limit = { is_core = PREV }
					PREV = { remove_core = PREV }
				}
			}
			add_core = ROOT
			add_core = J53
			cede_province = J53
			hidden_effect = { set_local_autonomy = 0 }
		}
		set_global_flag = federation_splintering_event_6
	}
	after = {
		hidden_effect = {
			west_forbidden_plains_region = {
				limit = {
					owner = {
						has_country_modifier = lake_federation_member
						ai = yes
						NOT = { tag = J53 }
					}
				}
				every_country = {
					limit = { is_core = PREV }
					PREV = { remove_core = PREV }
				}
				add_core = owner
				add_core = J53
				cede_province = J53
				set_local_autonomy = 0
			}
			east_forbidden_plains_region = {
				limit = {
					owner = {
						has_country_modifier = lake_federation_member
						ai = yes
						NOT = { tag = J53 }
					}
				}
				every_country = {
					limit = { is_core = PREV }
					PREV = { remove_core = PREV }
				}
				add_core = owner
				add_core = J53
				cede_province = J53
				set_local_autonomy = 0
			}
		}
	}
}

#Declare the War
country_event = {
	id = splintering.7
	title = splintering.7.t
	desc = splintering.7.d
	picture = CIVIL_WAR_eventPicture
	
	major = yes
	major_trigger = { 
		has_country_modifier = lake_federation_member
	}
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			clr_global_flag = federation_splintering_event_5
			clr_global_flag = federation_splintering_event_6
			if = {
				limit = {
					any_country = {
						is_lake_federation_leader = yes
						NOT = { federation_cohesion_formed_tag = yes }
					}
				}
				random_country = {
					limit = {
						is_lake_federation_leader = yes
						NOT = { federation_cohesion_formed_tag = yes }
					}
					save_event_target_as = splinter_defender
				}
			}
			else_if = {
				limit = {
					any_country = {
						ai = no
						has_country_modifier = lake_federation_member
						NOT = { federation_cohesion_formed_tag = yes }
					}
				}
				random_country = {
					limit = {
						ai = no
						has_country_modifier = lake_federation_member
						NOT = { federation_cohesion_formed_tag = yes }
					}
					save_event_target_as = splinter_defender
				}
			}
			else = {
				random_known_country = {
					limit = {
						has_country_modifier = lake_federation_member
						NOT = { federation_cohesion_formed_tag = yes }
					}
					save_event_target_as = splinter_defender
				}
			}
			#every_known_country = {
			#	limit = { has_country_modifier = lake_federation_member }
			#	break_alliance = J51
			#	break_alliance = J52
			#	break_alliance = J53
			#	break_alliance = J49
			#	break_alliance = J50
			#}
			#break_alliance = J51
			#break_alliance = J52
			#break_alliance = J53
			#break_alliance = J49
			#break_alliance = J50
		}
	}
	
	option = {
		name = splintering.7.a
		declare_war_with_cb = {
			who = event_target:splinter_defender
			casus_belli = cb_federation_splinter_war
		}
		custom_tooltip = federation_splintering_sides
		J51 = { add_yearly_manpower = 1 }
		J52 = { add_yearly_manpower = 1 }
		J53 = { add_yearly_manpower = 1 }
		J49 = { add_yearly_manpower = 1 }
		J50 = { add_yearly_manpower = 1 }
		hidden_effect = {
			every_known_country = {
				limit = { federation_cohesion_formed_tag = yes }
				join_all_offensive_wars_of = ROOT
				if = {
					limit = { has_idea = triunic_bountifull_land }
					country_event = { id = ideagroups.1 }
				}
			}
			every_known_country = {
				limit = {
					has_country_modifier = lake_federation_member
					NOT = { federation_cohesion_formed_tag = yes }
					NOT = { tag = event_target:splinter_defender }
				}
				join_all_defensive_wars_of = event_target:splinter_defender
			}
			set_country_flag = federation_splintering_war_start
		}
	}
	
	after = {
		every_known_country = {
			limit = {
				has_country_modifier = lake_federation_member
				NOT = { federation_cohesion_formed_tag = yes }
			}
			set_country_flag = federation_splinter_vassal
			event_target:splinter_defender = { vassalize = PREV }
		}
		every_known_country = {
			limit = {
				has_country_modifier = lake_federation_member
				federation_cohesion_formed_tag = yes
			}
			set_country_flag = federation_splinter_vassal
			PREV = { vassalize = PREV }
		}
		country_event = { id = splintering.120 days = 2 }
	}
}

#End of the War
country_event = {
	id = splintering.8
	title = splintering.8.t
	desc = splintering.8.d
	picture = FORT_eventPicture
	
	is_triggered_only = yes
	major = yes
	major_trigger = { has_country_modifier = lake_federation_member }
	
	immediate = {
		hidden_effect = {
			clr_country_flag = federation_splintering_war_start
			clr_global_flag = federation_crisis_splintering
			clr_global_flag = federation_crisis
			set_global_flag = last_federation_crisis
			federation_1_cohesion = yes
		}
	}
	
	#The Splinters Triumph
	option = {
		name = splintering.8.a
		ai_chance = { factor = 100 }
		trigger = { federation_cohesion_formed_tag = yes }
		add_prestige = 10
		set_global_flag = lake_cohesion_bad
	}
	
	#The Federation Triumph
	option = {
		name = splintering.8.b
		ai_chance = { factor = 100 }
		trigger = { NOT = { federation_cohesion_formed_tag = yes } }
		lake_federation_gain_5_points = yes
		federation_increase_cohesion_all = yes
		J51 = { federation_cohesion_revert_tag = yes }
		J52 = { federation_cohesion_revert_tag = yes }
		J53 = { federation_cohesion_revert_tag = yes }
		J49 = { federation_cohesion_revert_tag = yes }
		J50 = { federation_cohesion_revert_tag = yes }
	}
}

#Sunijalla takes Akuutengen
country_event = {
	id = splintering.9
	title = splintering.9.t
	desc = splintering.9.d
	picture = REVOLUTION_eventPicture
	
	fire_only_once = yes
	major = yes
	major_trigger = { has_country_modifier = lake_federation_member }
	is_triggered_only = yes
	
	option = {
		name = splintering.9.a
		J31 = { lake_federation_gain_2_points = yes }
		inherit = J31
	}
}

#Inconclusive End
country_event = {
	id = splintering.10
	title = splintering.10.t
	desc = splintering.10.d
	picture = FORT_eventPicture
	
	major = yes
	major_trigger = { has_country_modifier = lake_federation_member }
	
	trigger = {
		has_country_flag = federation_splintering_war_start
		has_global_flag = federation_crisis_splintering
		has_global_flag = federation_crisis
		NOT = { is_at_war = yes }
		NOT = { has_country_flag = federation_splintering_war_end }
	}
	
	mean_time_to_happen = {
		days = 30
	}
	
	immediate = {
		hidden_effect = {
			clr_country_flag = federation_splintering_war_start
			clr_global_flag = federation_crisis_splintering
			clr_global_flag = federation_crisis
			set_global_flag = last_federation_crisis
			federation_1_cohesion = yes
		}
	}
	
	#The Splinters Triumph
	option = {
		name = splintering.8.a
		ai_chance = { factor = 100 }
		trigger = { has_global_flag = federation_cohesion_president_abandoned }
		add_prestige = 10
		set_global_flag = lake_cohesion_bad
	}
	
	#The Federation Triumph
	option = {
		name = splintering.8.b
		ai_chance = { factor = 100 }
		trigger = { NOT = { has_global_flag = federation_cohesion_president_abandoned } }
		lake_federation_gain_5_points = yes
		federation_increase_cohesion_all = yes
		J51 = { federation_cohesion_revert_tag = yes }
		J52 = { federation_cohesion_revert_tag = yes }
		J53 = { federation_cohesion_revert_tag = yes }
		J49 = { federation_cohesion_revert_tag = yes }
		J50 = { federation_cohesion_revert_tag = yes }
	}
}

###########################################################################################################
### BEGIN BACKGROUND EVENTS           ###############      BEGIN BACKGROUND EVENTS           ##############
###########################################################################################################

#Cohesion Debug
country_event = {
	id = splintering.99
	title = splintering.99.t
	desc = splintering.99.d
	picture = REVOLUTION_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = splintering.99.a
		federation_increase_cohesion_all = yes
	}
	option = {
		name = splintering.99.b
		federation_decrease_cohesion_all = yes
	}
	option = {
		name = splintering.99.c
		country_event = { id = splintering.1 }
	}
}

#Choose highest standing Members
country_event = {
	id = splintering.100
	title = splintering.100.t
	desc = splintering.100.d
	picture = STREET_SPEECH_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	
	trigger = {
		has_country_modifier = lake_federation_member
	}
	
	immediate = {
		#if = {
		#	limit = { is_lake_federation_leader = yes }
		#	if = {
		#		limit = { federation_cohesion_forms_J51 = yes }
		#		set_country_flag = cohesion_J51_former
		#	}
		#}
	}
	
	option = {
		name = splintering.100.a
		ai_chance = { factor = 100 }
		if = {
			limit = { federation_cohesion_forms_J51 = yes }
			if = {
				limit = {
					NOT = {
						calc_true_if = {
							all_known_country = {
								check_variable = {
									which = FederationPoints
									which = PREV
								}
								is_subject = no
								federation_cohesion_forms_J51 = yes
							}
							amount = 1
						}
					}
					is_subject = no
				}
				set_country_flag = cohesion_J51_former
			}
		}
		else_if = {
			limit = { federation_cohesion_forms_J52 = yes }
			if = {
				limit = {
					NOT = {
						calc_true_if = {
							all_known_country = {
								check_variable = {
									which = FederationPoints
									which = PREV
								}
								is_subject = no
								federation_cohesion_forms_J52 = yes
							}
							amount = 1
						}
					}
					is_subject = no
				}
				set_country_flag = cohesion_J52_former
			}
			else = {
				custom_tooltip = cohesion_lol_no
			}
		}
		else_if = {
			limit = { federation_cohesion_forms_J53 = yes }
			if = {
				limit = {
					NOT = {
						calc_true_if = {
							all_known_country = {
								check_variable = {
									which = FederationPoints
									which = PREV
								}
								is_subject = no
								federation_cohesion_forms_J53 = yes
							}
							amount = 1
						}
					}
					is_subject = no
				}
				set_country_flag = cohesion_J53_former
			}
		}
		else_if = {
			limit = { federation_cohesion_forms_J49 = yes }
			if = {
				limit = {
					NOT = {
						calc_true_if = {
							all_known_country = {
								check_variable = {
									which = FederationPoints
									which = PREV
								}
								is_subject = no
								federation_cohesion_forms_J49 = yes
							}
							amount = 1
						}
					}
					is_subject = no
				}
				set_country_flag = cohesion_J49_former
			}
		}
		else_if = {
			limit = { federation_cohesion_forms_J50 = yes }
			if = {
				limit = {
					NOT = {
						calc_true_if = {
							all_known_country = {
								check_variable = {
									which = FederationPoints
									which = PREV
								}
								is_subject = no
								federation_cohesion_forms_J50 = yes
							}
							amount = 1
						}
					}
					is_subject = no
				}
				set_country_flag = cohesion_J50_former
			}
		}
	}
}

#Backup deciders
country_event = {
	id = splintering.101
	title = splintering.101.t
	desc = splintering.101.d
	picture = STREET_SPEECH_eventPicture
	
	fire_only_once = yes
	is_triggered_only = yes
	hidden = yes
	
	immediate = {
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J51_former }
					has_country_flag = cohesion_J51_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J51 = yes
					federation_has_very_high_standing = yes
				}
				set_country_flag = cohesion_J51_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J52_former }
					has_country_flag = cohesion_J52_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J52 = yes
					federation_has_very_high_standing = yes
				}
				set_country_flag = cohesion_J52_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J53_former }
					has_country_flag = cohesion_J53_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J53 = yes
					federation_has_very_high_standing = yes
				}
				set_country_flag = cohesion_J53_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J49_former }
					has_country_flag = cohesion_J49_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J49 = yes
					federation_has_very_high_standing = yes
				}
				set_country_flag = cohesion_J49_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J50_former }
					has_country_flag = cohesion_J50_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J50 = yes
					federation_has_very_high_standing = yes
				}
				set_country_flag = cohesion_J50_former
			}
		}
	}
	
	option = {
		name = splintering.101.a
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J51_former }
					has_country_flag = cohesion_J51_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J51 = yes
					federation_has_high_standing = yes
				}
				set_country_flag = cohesion_J51_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J52_former }
					has_country_flag = cohesion_J52_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J52 = yes
					federation_has_high_standing = yes
				}
				set_country_flag = cohesion_J52_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J53_former }
					has_country_flag = cohesion_J53_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J53 = yes
					federation_has_high_standing = yes
				}
				set_country_flag = cohesion_J53_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J49_former }
					has_country_flag = cohesion_J49_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J49 = yes
					federation_has_high_standing = yes
				}
				set_country_flag = cohesion_J49_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J50_former }
					has_country_flag = cohesion_J50_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J50 = yes
					federation_has_high_standing = yes
				}
				set_country_flag = cohesion_J50_former
			}
		}
	}
	
	after = {
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J51_former }
					has_country_flag = cohesion_J51_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J51 = yes
					federation_has_normal_standing = yes
				}
				set_country_flag = cohesion_J51_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J52_former }
					has_country_flag = cohesion_J52_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J52 = yes
					federation_has_normal_standing = yes
				}
				set_country_flag = cohesion_J52_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J53_former }
					has_country_flag = cohesion_J53_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J53 = yes
					federation_has_normal_standing = yes
				}
				set_country_flag = cohesion_J53_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J49_former }
					has_country_flag = cohesion_J49_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J49 = yes
					federation_has_normal_standing = yes
				}
				set_country_flag = cohesion_J49_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J50_former }
					has_country_flag = cohesion_J50_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J50 = yes
					federation_has_normal_standing = yes
				}
				set_country_flag = cohesion_J50_former
			}
		}
		country_event = { id = splintering.102 days = 1 }
	}
}

#Backup backup deciders + confirmation
country_event = {
	id = splintering.102
	title = splintering.102.t
	desc = splintering.102.d
	picture = STREET_SPEECH_eventPicture
	
	fire_only_once = yes
	is_triggered_only = yes
	hidden = yes
	
	immediate = {
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J51_former }
					has_country_flag = cohesion_J51_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J51 = yes
					federation_has_low_standing = yes
				}
				set_country_flag = cohesion_J51_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J52_former }
					has_country_flag = cohesion_J52_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J52 = yes
					federation_has_low_standing = yes
				}
				set_country_flag = cohesion_J52_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J53_former }
					has_country_flag = cohesion_J53_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J53 = yes
					federation_has_low_standing = yes
				}
				set_country_flag = cohesion_J53_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J49_former }
					has_country_flag = cohesion_J49_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J49 = yes
					federation_has_low_standing = yes
				}
				set_country_flag = cohesion_J49_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J50_former }
					has_country_flag = cohesion_J50_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J50 = yes
					federation_has_low_standing = yes
				}
				set_country_flag = cohesion_J50_former
			}
		}
	}
	
	option = {
		name = splintering.102.a
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J51_former }
					has_country_flag = cohesion_J51_former
				}
			}
			random_known_country = {
				limit = { federation_cohesion_forms_J51 = yes }
				set_country_flag = cohesion_J51_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J52_former }
					has_country_flag = cohesion_J52_former
				}
			}
			random_known_country = {
				limit = { federation_cohesion_forms_J52 = yes }
				set_country_flag = cohesion_J52_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J53_former }
					has_country_flag = cohesion_J53_former
				}
			}
			random_known_country = {
				limit = { federation_cohesion_forms_J53 = yes }
				set_country_flag = cohesion_J53_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J49_former }
					has_country_flag = cohesion_J49_former
				}
			}
			random_known_country = {
				limit = { federation_cohesion_forms_J49 = yes }
				set_country_flag = cohesion_J49_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J50_former }
					has_country_flag = cohesion_J50_former
				}
			}
			random_known_country = {
				limit = { federation_cohesion_forms_J50 = yes }
				set_country_flag = cohesion_J50_former
			}
		}
	}
	
	after = {
		if = {
			limit = {
				has_country_flag = cohesion_J51_former 
				NOT = { has_country_flag = cohesion_rejected_formation }
			}
			country_event = { id = splintering.2 days = 1 random = 6 }
		}
		else = {
			random_known_country = {
				limit = {
					has_country_flag = cohesion_J51_former 
					NOT = { has_country_flag = cohesion_rejected_formation }
				}
				country_event = { id = splintering.2 days = 7 random = 14 }
			}
		}
		if = {
			limit = { 
				has_country_flag = cohesion_J52_former 
				NOT = { has_country_flag = cohesion_rejected_formation }
			}
			country_event = { id = splintering.2 days = 1 random = 6 }
		}
		else = {
			random_known_country = {
				limit = {
					has_country_flag = cohesion_J52_former 
					NOT = { has_country_flag = cohesion_rejected_formation }
				}
				country_event = { id = splintering.2 days = 7 random = 14 }
			}
		}
		if = {
			limit = {
				has_country_flag = cohesion_J53_former 
				NOT = { has_country_flag = cohesion_rejected_formation }
			}
			country_event = { id = splintering.2 days = 1 random = 6 }
		}
		else = {
			random_known_country = {
				limit = {
					has_country_flag = cohesion_J53_former 
					NOT = { has_country_flag = cohesion_rejected_formation }
				}
				country_event = { id = splintering.2 days = 7 random = 14 }
			}
		}
		if = {
			limit = {
				has_country_flag = cohesion_J49_former 
				NOT = { has_country_flag = cohesion_rejected_formation }
			}
			country_event = { id = splintering.2 days = 1 random = 6 }
		}
		else = {
			random_known_country = {
				limit = {
					has_country_flag = cohesion_J49_former 
					NOT = { has_country_flag = cohesion_rejected_formation }
				}
				country_event = { id = splintering.2 days = 7 random = 14 }
			}
		}
		if = {
			limit = {
				has_country_flag = cohesion_J50_former 
				NOT = { has_country_flag = cohesion_rejected_formation }
			}
			country_event = { id = splintering.2 days = 1 random = 6 }
		}
		else = {
			random_known_country = {
				limit = {
					has_country_flag = cohesion_J50_former 
					NOT = { has_country_flag = cohesion_rejected_formation }
				}
				country_event = { id = splintering.2 days = 7 random = 14 }
			}
		}
	}
}

#Backup deciders REPEATED
country_event = {
	id = splintering.103
	title = splintering.103.t
	desc = splintering.103.d
	picture = STREET_SPEECH_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	
	immediate = {
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J51_former }
					has_country_flag = cohesion_J51_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J51 = yes
					federation_has_very_high_standing = yes
				}
				set_country_flag = cohesion_J51_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J52_former }
					has_country_flag = cohesion_J52_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J52 = yes
					federation_has_very_high_standing = yes
				}
				set_country_flag = cohesion_J52_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J53_former }
					has_country_flag = cohesion_J53_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J53 = yes
					federation_has_very_high_standing = yes
				}
				set_country_flag = cohesion_J53_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J49_former }
					has_country_flag = cohesion_J49_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J49 = yes
					federation_has_very_high_standing = yes
				}
				set_country_flag = cohesion_J49_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J50_former }
					has_country_flag = cohesion_J50_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J50 = yes
					federation_has_very_high_standing = yes
				}
				set_country_flag = cohesion_J50_former
			}
		}
	}
	
	option = {
		name = splintering.103.a
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J51_former }
					has_country_flag = cohesion_J51_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J51 = yes
					federation_has_high_standing = yes
				}
				set_country_flag = cohesion_J51_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J52_former }
					has_country_flag = cohesion_J52_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J52 = yes
					federation_has_high_standing = yes
				}
				set_country_flag = cohesion_J52_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J53_former }
					has_country_flag = cohesion_J53_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J53 = yes
					federation_has_high_standing = yes
				}
				set_country_flag = cohesion_J53_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J49_former }
					has_country_flag = cohesion_J49_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J49 = yes
					federation_has_high_standing = yes
				}
				set_country_flag = cohesion_J49_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J50_former }
					has_country_flag = cohesion_J50_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J50 = yes
					federation_has_high_standing = yes
				}
				set_country_flag = cohesion_J50_former
			}
		}
	}
	
	after = {
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J51_former }
					has_country_flag = cohesion_J51_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J51 = yes
					federation_has_normal_standing = yes
				}
				set_country_flag = cohesion_J51_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J52_former }
					has_country_flag = cohesion_J52_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J52 = yes
					federation_has_normal_standing = yes
				}
				set_country_flag = cohesion_J52_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J53_former }
					has_country_flag = cohesion_J53_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J53 = yes
					federation_has_normal_standing = yes
				}
				set_country_flag = cohesion_J53_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J49_former }
					has_country_flag = cohesion_J49_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J49 = yes
					federation_has_normal_standing = yes
				}
				set_country_flag = cohesion_J49_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J50_former }
					has_country_flag = cohesion_J50_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J50 = yes
					federation_has_normal_standing = yes
				}
				set_country_flag = cohesion_J50_former
			}
		}
		country_event = { id = splintering.104 days = 1 }
	}
}

#Backup backup deciders + confirmation REPEATED
country_event = {
	id = splintering.104
	title = splintering.104.t
	desc = splintering.104.d
	picture = STREET_SPEECH_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	
	immediate = {
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J51_former }
					has_country_flag = cohesion_J51_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J51 = yes
					federation_has_low_standing = yes
				}
				set_country_flag = cohesion_J51_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J52_former }
					has_country_flag = cohesion_J52_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J52 = yes
					federation_has_low_standing = yes
				}
				set_country_flag = cohesion_J52_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J53_former }
					has_country_flag = cohesion_J53_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J53 = yes
					federation_has_low_standing = yes
				}
				set_country_flag = cohesion_J53_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J49_former }
					has_country_flag = cohesion_J49_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J49 = yes
					federation_has_low_standing = yes
				}
				set_country_flag = cohesion_J49_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J50_former }
					has_country_flag = cohesion_J50_former
				}
			}
			random_known_country = {
				limit = {
					federation_cohesion_forms_J50 = yes
					federation_has_low_standing = yes
				}
				set_country_flag = cohesion_J50_former
			}
		}
	}
	
	option = {
		name = splintering.104.a
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J51_former }
					has_country_flag = cohesion_J51_former
				}
			}
			random_known_country = {
				limit = { federation_cohesion_forms_J51 = yes }
				set_country_flag = cohesion_J51_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J52_former }
					has_country_flag = cohesion_J52_former
				}
			}
			random_known_country = {
				limit = { federation_cohesion_forms_J52 = yes }
				set_country_flag = cohesion_J52_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J53_former }
					has_country_flag = cohesion_J53_former
				}
			}
			random_known_country = {
				limit = { federation_cohesion_forms_J53 = yes }
				set_country_flag = cohesion_J53_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J49_former }
					has_country_flag = cohesion_J49_former
				}
			}
			random_known_country = {
				limit = { federation_cohesion_forms_J49 = yes }
				set_country_flag = cohesion_J49_former
			}
		}
		if = {
			limit = { 
				NOT = { 
					any_known_country = { has_country_flag = cohesion_J50_former }
					has_country_flag = cohesion_J50_former
				}
			}
			random_known_country = {
				limit = { federation_cohesion_forms_J50 = yes }
				set_country_flag = cohesion_J50_former
			}
		}
	}
	
	after = {
		if = {
			limit = {
				has_country_flag = cohesion_J51_former 
				NOT = { has_country_flag = cohesion_rejected_formation }
			}
			country_event = { id = splintering.2 days = 1 random = 6 }
		}
		else = {
			random_known_country = {
				limit = {
					has_country_flag = cohesion_J51_former 
					NOT = { has_country_flag = cohesion_rejected_formation }
				}
				country_event = { id = splintering.2 days = 7 random = 14 }
			}
		}
		if = {
			limit = { 
				has_country_flag = cohesion_J52_former 
				NOT = { has_country_flag = cohesion_rejected_formation }
			}
			country_event = { id = splintering.2 days = 1 random = 6 }
		}
		else = {
			random_known_country = {
				limit = {
					has_country_flag = cohesion_J52_former 
					NOT = { has_country_flag = cohesion_rejected_formation }
				}
				country_event = { id = splintering.2 days = 7 random = 14 }
			}
		}
		if = {
			limit = {
				has_country_flag = cohesion_J53_former 
				NOT = { has_country_flag = cohesion_rejected_formation }
			}
			country_event = { id = splintering.2 days = 1 random = 6 }
		}
		else = {
			random_known_country = {
				limit = {
					has_country_flag = cohesion_J53_former 
					NOT = { has_country_flag = cohesion_rejected_formation }
				}
				country_event = { id = splintering.2 days = 7 random = 14 }
			}
		}
		if = {
			limit = {
				has_country_flag = cohesion_J49_former 
				NOT = { has_country_flag = cohesion_rejected_formation }
			}
			country_event = { id = splintering.2 days = 1 random = 6 }
		}
		else = {
			random_known_country = {
				limit = {
					has_country_flag = cohesion_J49_former 
					NOT = { has_country_flag = cohesion_rejected_formation }
				}
				country_event = { id = splintering.2 days = 7 random = 14 }
			}
		}
		if = {
			limit = {
				has_country_flag = cohesion_J50_former 
				NOT = { has_country_flag = cohesion_rejected_formation }
			}
			country_event = { id = splintering.2 days = 1 random = 6 }
		}
		else = {
			random_known_country = {
				limit = {
					has_country_flag = cohesion_J50_former 
					NOT = { has_country_flag = cohesion_rejected_formation }
				}
				country_event = { id = splintering.2 days = 7 random = 14 }
			}
		}
	}
}

#Invite Countries to formables & Orachav breakaway
country_event = {
	id = splintering.110
	title = splintering.110.t
	desc = splintering.110.d
	picture = STREET_SPEECH_eventPicture
	
	fire_only_once = yes
	is_triggered_only = yes
	hidden = yes
	
	option = {
		name = splintering.110.a
		every_known_country = {
			limit = {
				has_country_modifier = lake_federation_member
				NOT = { 
					federation_cohesion_formed_tag = yes
					is_lake_federation_leader = yes
					has_country_flag = cohesion_rejected_formation 
				}
			}
			country_event = { id = splintering.5 days = 30 random = 60 }
		}
		if = {
			limit = { 
				NOT = { 
					federation_cohesion_formed_tag = yes
					is_lake_federation_leader = yes
					has_country_flag = cohesion_rejected_formation 
				}
			}
			country_event = { id = splintering.5 days = 30 random = 60 }
		}
		every_known_country = {
			limit = {
				has_country_modifier = lake_federation_member
				NOT = { tag = G53 }
				has_dlc = "The Cossacks"
				any_owned_province = {
					OR = {
						region = west_forbidden_plains_region
						region = east_forbidden_plains_region
					}
				}
			}
			country_event = { id = splintering.6 days = 90 random = 30 }
		}
		if = {
			limit = {
				NOT = { tag = G53 }
				has_dlc = "The Cossacks"
				any_owned_province = {
					OR = {
						region = west_forbidden_plains_region
						region = east_forbidden_plains_region
					}
				}
			}
			country_event = { id = splintering.6 days = 90 random = 30 }
		}
	}
}

#Break Alliances
country_event = {
	id = splintering.111
	title = splintering.111.t
	desc = splintering.111.d
	picture = STREET_SPEECH_eventPicture
	
	fire_only_once = yes
	is_triggered_only = yes
	hidden = yes
	
	option = {
		name = splintering.111.a
		if = {
			limit = {
			 	any_known_country = { 
					ai = no
					federation_cohesion_formed_tag = yes
				}
			}
			random_known_country = {
				limit = {
					ai = no
					federation_cohesion_formed_tag = yes
				}
				country_event = { id = splintering.7 days = 30 }
			}
		}
		else_if = {
			limit = {
				ai = no
				federation_cohesion_formed_tag = yes
			}
			country_event = { id = splintering.7 days = 30 }
		}
		else = {
			random_known_country = {
				limit = { federation_cohesion_formed_tag = yes}
				country_event = { id = splintering.7 days = 30 }
			}
		}
		if = {
			limit = { has_global_flag = federation_cohesion_president_abandoned }
			country_event = { id = splintering.3 days = 7 }
		}
		else = { country_event = { id = splintering.4 days = 7 } }
	}
}

#Free Vassals
country_event = {
	id = splintering.120
	title = splintering.120.t
	desc = splintering.120.d
	picture = STREET_SPEECH_eventPicture
	
	fire_only_once = yes
	is_triggered_only = yes
	hidden = yes
	
	option = {
		name = splintering.120.a
		every_known_country = {
			limit = { has_country_flag = federation_splinter_vassal }
			grant_independence = yes
		}
	}
}