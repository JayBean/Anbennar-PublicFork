# kheionai and cleaved sea flavour events
namespace = kheionai_flavour

########################### KHEIONAI FLAVOUR EVENTS ############################

# by takasaki
country_event = { # Hounds of Askovoinos / Kimanis Revolt Event
	id = kheionai_flavour.1
	title = kheionai_flavour.1.t
	desc = kheionai_flavour.1.d
	picture = CONQUEST_eventPicture
	
	is_triggered_only = yes
	fire_only_once = yes
	major = yes # making this a major event so others aren't blindsided.
	major_trigger = {
		culture_group = kheionai_ruinborn_elf
	}
	
	trigger = {
		religion = kheionism
		capital_scope = {
			region = alecand_region
		}
		owns = 2732
		is_year = 1470
	}
	
	immediate = {
		add_stability = -1
		
		hidden_effect = {		
			2732 = { # cedes kimanis prov to kimanis
				cede_province = G61
				add_core = ROOT # for oktikheion if you somehow haven't cored it
			}
			every_owned_province = { # cedes owned kimabhen provinces to kimanis, gives a core on it if they somehow lost it
				limit = {
					culture = kimabhen
					region = alecand_region
				}
				cede_province = G61
				add_core = G61
			}
			
			2732 = { # creates 7 infantry regiments in kimanis to complement the 5 they get.
				infantry = G61
				infantry = G61
				infantry = G61
				infantry = G61
				infantry = G61
				infantry = G61
				infantry = G61
			}
			G61 = {
				setup_vision = yes
			}
		}
	}
	
	option = { # Kimanis revolts
		name = kheionai_flavour.1.a
		ai_chance = { factor = 100 }
		
		declare_war_with_cb = {
			who = G61
			casus_belli = cb_core
			war_goal_province = 2732
		}
		
		custom_tooltip = kf_tt_kimanis_war
		hidden_effect = {
			if = { # if player is a rival of kimanis revolt tag, they can 100% intervene
				limit = {
					any_enemy_country = {
						capital_scope = { superregion = kheionai_superregion }
						ai = no
					}
				}
				random_enemy_country = {
					limit = {
						capital_scope = { superregion = kheionai_superregion }
						ai = no
					}
					country_event = { id = kheionai_flavour.2 } # intervene in kimanis
				}
			}
			
			else = { # no player is a rival of kimanis, so a random rival intervenes
				random_enemy_country = {
					limit = {
						capital_scope = { superregion = kheionai_superregion }
						is_at_war = NO
					}
					country_event = { id = kheionai_flavour.2 } # intervene in kimanis
				}
			}
		}
	}
	
	option = { # play as Kimanis, same as above but you switch at the end
		name = kheionai_flavour.1.b
		ai_chance = { factor = 0 }
		
		custom_tooltip = kf_tt_kimanis_switch
		hidden_effect = {
			declare_war_with_cb = {
				who = G61
				casus_belli = cb_core
				war_goal_province = 2732
			}
			
			if = { # if player is a rival of kimanis revolt tag, they can 100% intervene
				limit = {
					any_enemy_country = {
						capital_scope = { superregion = kheionai_superregion }
						ai = no
					}
				}
				random_enemy_country = {
					limit = {
						capital_scope = { superregion = kheionai_superregion }
						ai = no
					}
					country_event = { id = kheionai_flavour.2 } # intervene in kimanis
				}
			}
			
			else = { # no player is a rival of kimanis, so a random rival intervenes
				random_enemy_country = {
					limit = {
						capital_scope = { superregion = kheionai_superregion }
						is_at_war = NO
					}
					country_event = { id = kheionai_flavour.2 } # intervene in kimanis
				}
			}
		}
		switch_tag = G61 #Kimanis
	}
}

country_event = { # intervene in Kimanis
	id = kheionai_flavour.2
	title = kheionai_flavour.2.t
	desc = kheionai_flavour.2.d
	picture = CONQUEST_eventPicture
	
	is_triggered_only = yes
	
	option = { # join war
		name = kheionai_flavour.2.a
		join_all_defensive_wars_of = G61
		create_alliance = G61
	}
	
	option = { # refuse to join war
		name = kheionai_flavour.2.b
		add_prestige = -10
	}
}

#by Leib
country_event = { #In the Streets and Halls
	id = kheionai_flavour.7
	title = kheionai_flavour.7.t
	desc = kheionai_flavour.7.d
	picture = ANGRY_MOB_eventPicture
	
	is_triggered_only = yes
	
	trigger = { 
		capital_scope = { 
			region = alecand_region
			has_terrain = city_terrain
		}
		culture_group = kheionai_ruinborn_elf
	}
	
	option = {
		name = kheionai_flavour.7.a
		
		add_country_modifier = { 
			name = tolerating_the_taychendi
			duration = 10950
		}

		random_known_country = {
			limit = { culture_group = taychendi_ruinborn_elf }
			add_opinion = {
				who = ROOT
				modifier = opinion_tolerate_taychendi
            }
        }
	}
	
	option = {
		name = kheionai_flavour.7.b
		
		add_country_modifier = { 
			name = detesting_the_taychendi
			duration = 10950
		}
		
		random_known_country = {
			limit = { culture_group = taychendi_ruinborn_elf }
			add_opinion = {
				who = ROOT
				modifier = opinion_detest_taychendi
			}
		}
	}
	
	option = {
		name = kheionai_flavour.7.c
		
		add_adm_power = 25
		add_dip_power = -10
	}
}


country_event = { #Strange thoughts of a strange man
	id = kheionai_flavour.8
	title = kheionai_flavour.8.t
	desc = kheionai_flavour.8.d
	picture = ADVISOR_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		capital_scope = { 
			region = alecand_region
			has_terrain = city_terrain
		}
		culture_group = kheionai_ruinborn_elf
	}

	option = {
		name = kheionai_flavour.8.a
		
		define_advisor = {
			type = philosopher
			culture = ROOT
			religion = ROOT
			skill = 1
			cost_multiplier = 0.25
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 10
		}
		set_country_flag = strange_man_happened_1
	}
}

country_event = { #Ormabhen upstart
	id = kheionai_flavour.9
	title = kheionai_flavour.9.t
	desc = kheionai_flavour.9.d 
	picture = UNIVERSITY_eventPicture
	
	is_triggered_only = yes

	trigger = {

		owns_core_province = 2738
		2738 = { culture = ormabhen }

		dip_tech = 5
		OR = {
			accepted_culture = ormabhen
			primary_culture = ormabhen
		}
		culture_group = kheionai_ruinborn_elf
	}
	
	option = {
		name = kheionai_flavour.9.a
		
		define_advisor = {
			type = trader
			culture = ormabhen
			religion = ROOT
			skill = 1
			cost_multiplier = 0.67
		}
		add_prestige = -5
	}
	
	option = {
		name = kheionai_flavour.9.b
		
		add_country_modifier = {
			name = talented_ormabhen_class
			duration = 3650
		}
		add_dip_power = 50
	}
}

country_event = { #A peculiar lifestyle
	id = kheionai_flavour.10
	title = kheionai_flavour.10.t
	desc = kheionai_flavour.10.d
	picture = FARMING_eventPicture
	
	is_triggered_only = yes

	trigger = {
		owns_core_province = 2731
		2731 = { culture_group = kheionai_ruinborn_elf }

		culture_group = kheionai_ruinborn_elf
		has_country_flag = strange_man_happened_1

		NOT = {
			any_owned_province = {
				has_province_modifier = ulotholist_communities
			}
		}
	}
	
	option = {
		name = kheionai_flavour.10.a
		
		random_owned_province = {
			limit = {
				NOT = { has_province_flag = ulotholist_communities_temp_flag }
				NOT = { has_province_modifier = ulotholist_communities }
			}
			add_province_modifier = {
				name = ulotholist_communities
				duration = 10950 #30 years
				desc = ulotholist_communities_desc
			}
			set_province_flag = ulotholist_communities_temp_flag
		}
		random_owned_province = {
			limit = {
				NOT = { has_province_flag = ulotholist_communities_temp_flag }
				NOT = { has_province_modifier = ulotholist_communities }
			}
			add_province_modifier = {
				name = ulotholist_communities
				duration = 10950 #30 years
				desc = ulotholist_communities_desc
			}
			set_province_flag = ulotholist_communities_temp_flag
		}
		random_owned_province = {
			limit = {
				NOT = { has_province_flag = ulotholist_communities_temp_flag }
				NOT = { has_province_modifier = ulotholist_communities }
			}
			add_province_modifier = {
				name = ulotholist_communities
				duration = 10950 #30 years
				desc = ulotholist_communities_desc
			}
			set_province_flag = ulotholist_communities_temp_flag
		}
		every_owned_province = {
                limit = { has_province_flag = ulotholist_unrest_temp_flag }
                clr_province_flag = ulotholist_unrest_temp_flag
            }
		add_prestige = -5
	}
	
	option = {
		name = kheionai_flavour.10.b
		
		random_owned_province = {
			limit = {
				NOT = { has_province_flag = ulotholist_unrest_temp_flag }
			}
			add_unrest = 5
			set_province_flag = ulotholist_unrest_temp_flag
		}
		random_owned_province = {
			limit = {
				NOT = { has_province_flag = ulotholist_unrest_temp_flag }
			}
			add_unrest = 5
			set_province_flag = ulotholist_unrest_temp_flag
		}
		random_owned_province = {
			limit = {
				NOT = { has_province_flag = ulotholist_unrest_temp_flag }
			}
			add_unrest = 5
			set_province_flag = ulotholist_unrest_temp_flag
		}
		every_owned_province = {
			limit = { has_province_flag = ulotholist_unrest_temp_flag }
			clr_province_flag = ulotholist_unrest_temp_flag
		}
		add_prestige = 10
	}
}

country_event = { #Scéposmatists Question the Franchise
	id = kheionai_flavour.11
	title = kheionai_flavour.11.t
	desc = kheionai_flavour.11.d
	picture = DEBATE_REPUBLICAN_eventPicture
	
	is_triggered_only = yes
	fire_only_once = yes
	
	trigger = {
		owns_core_province = 2745
		2745 = { culture_group = kheionai_ruinborn_elf }
		culture_group = kheionai_ruinborn_elf
		has_institution = printing_press
	}
	
	option = {
		name = kheionai_flavour.11.a
		
		add_country_modifier = { 
			name = kheionai_civil_rights_supported
			duration = 18250 #50 years
		}
		add_stability = -1
	}
	
	option = {
		name = kheionai_flavour.11.b
		
		add_country_modifier = { 
			name = kheionai_civil_rights_denied
			duration = 18250 #50 years
		}
		add_stability_or_adm_power = yes
	}
}

country_event = { #Muístaxia
	id = kheionai_flavour.12
	title = kheionai_flavour.12.t
	desc = kheionai_flavour.12.d
	picture = FEMALE_SCHOLAR_eventPicture
	
	is_triggered_only = yes
	fire_only_once = yes
	
	trigger = {
		owns_core_province = 2745
		2745 = { culture_group = kheionai_ruinborn_elf }
		culture_group = kheionai_ruinborn_elf
		has_institution = global_trade
	}
	
	option = {
		name = kheionai_flavour.12.a
		
		define_advisor = {
			female = yes
			type = philosopher
			name = "Muístaxia" 
			culture = lokebhen
			religion = ROOT
			skill = 3
			cost_multiplier = 0.5
		}
		add_stability = -1
		if = {
			limit = { has_dlc = "Rule Britannia" }
			change_innovativeness = 5 
		}
			
		else = { 
			add_adm_power = 25
			add_dip_power = 25
			add_mil_power = 25
		}
	}
	
	option = {
		name = kheionai_flavour.12.b
			
		add_stability_or_adm_power = yes
	}
}
