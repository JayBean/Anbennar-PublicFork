

namespace = rahen


country_event = { #Event to make Rajnadhaga and dwarven adventurers friends
	id = rahen.1
	title = rahen.1.t
	desc = rahen.1.d
	picture = WESTERNISATION_eventPicture

	is_triggered_only = yes
	fire_only_once = yes

	trigger = { always = yes } #triggers in on_action file

	immediate = { hidden_effect = { 4266 = { owner = { save_event_target_as = krakazol_friend } } } }

	option = { #can't wait to meet em
		name = rahen.1.a
		ai_chance = { factor = 100 }
		if = {
			limit = { is_claim = 4266 }
			remove_claim = 4266
		}
		add_truce_with = event_target:krakazol_friend
		add_historical_friend = event_target:krakazol_friend
		event_target:krakazol_friend = { add_historical_friend = ROOT }
		add_legitimacy = 15
		add_prestige = 10
	}
	option = { #can't wait to conquer em
		name = rahen.1.b
		ai_chance = { factor = 0 }
	}
}
# province_event = { #Event to make Rajnadhaga and dwarven adventurers friends
# 	id = rahen.1
# 	title = rahen.1.t
# 	desc = rahen.1.d
# 	picture = WESTERNISATION_eventPicture

# 	is_triggered_only = yes
# 	fire_only_once = yes
	
# 	trigger = {
# 		province_id = 4266
# 		owner = { culture_group = dwarven has_reform = dwarovar_adventurer_reform }
# 		4462 = {
# 			owner = {
# 				NOT = {
# 					tag = R62
# 					is_rival = ROOT
# 					is_subject = yes
# 				}
# 			}
# 		}
# 	}

# 	option = { #Reach out to Rajnadhaga to strike a deal
# 		name = rahen.1.a
# 		ai_chance = {
# 			factor = 1
# 		}
# 		4462 = {
# 			owner = {
# 				country_event = {
# 					id = rahen.2
# 					days = 1
# 				}
# 			}
# 		}
# 		owner = { add_treasury = -50 }
# 	}
# 	option = { #We don't need them
# 		name = rahen.1.b
# 		ai_chance = {
# 			factor = 0
# 		}
# 		owner = { add_prestige = 10 }
# 	}
# }
# country_event = { #Rajnadhaga's response
# 	id = rahen.2
# 	title = rahen.2.t
# 	desc = rahen.2.d
# 	picture = WESTERNISATION_eventPicture

# 	is_triggered_only = yes

# 	option = { #Reach out to Rajnadhaga to strike a deal
# 		name = rahen.2.a
# 		ai_chance = {
# 			factor = 1
# 		}
# 		add_treasury = 50
# 		create_alliance = FROM
# 		add_historical_friend = FROM
# 		FROM = { owner = { add_historical_friend = ROOT } }
# 	}
# 	option = { #Take their gifts but refuse the deal
# 		name = rahen.2.b
# 		ai_chance = {
# 			factor = 0
# 		}
# 		add_treasury = 50
# 		FROM = { add_casus_belli = { target = ROOT type = cb_insult months = 12 } }
# 	}
# }

country_event = { #Event giving Raghamideshi with Shenral nobles trade power in Raj
	id = rahen.3
	title = rahen.3.t
	desc = rahen.3.d
	picture = MERCHANTS_TALKING_eventPicture

	is_triggered_only = yes

	trigger = {
		primary_culture = raghamidesh
		NOT = { tag = R44 }
		NOT = { owns_core_province = 4368 }
		NOT = { has_country_flag = ragham_shenral_trade_buff }	
		dynasty = "of the Vengeful Gaze"
	}
	
	immediate = {
		set_country_flag = ragham_shenral_trade_buff
	}

	option = { 
		name = rahen.3.a
		4435 = {
			add_trade_modifier = {
				who = ROOT
				duration = 3650
				power = 10
				key = STRONG_MERCHANTS
			}
		}
		4485 = {
			add_trade_modifier = {
				who = ROOT
				duration = 3650
				power = 10
				key = STRONG_MERCHANTS
			}
		}
	}
}

country_event = { #Event giving Raghamidesh state cores on Shenral
	id = rahen.4
	title = rahen.4.t
	desc = rahen.4.d
	picture = LAND_MILITARY_eventPicture

	is_triggered_only = yes

	trigger = {
		primary_culture = raghamidesh
		NOT = { tag = R44 }
		NOT = { owns_core_province = 4368 }
		NOT = { has_country_flag = ragham_shenral_cores }	
		dynasty = "of the Vengeful Gaze"
	}
	
	immediate = {
		set_country_flag = ragham_shenral_cores
	}

	option = { 
		name = rahen.4.a
		shenral_area = {
			add_core = ROOT
		}
	}
}

province_event = { #Guru Suhan and the Hall of Endless Debate (Suhan goes Sicko Mode)
	id = rahen.5
	title = rahen.5.t
	desc = rahen.5.d
	picture = LAND_MILITARY_eventPicture

	fire_only_once = yes

	mean_time_to_happen = {
		years = 10
	}

	trigger = {
		is_year = 1480
		if = {
			limit = {
				4435 = { religion = high_philosophy}
			}
			province_id = 4435
		}
		else = {
			religion = high_philosophy
			owner = { religion = high_philosophy }
			superregion = rahen_superregion
		}
	}
	
	immediate = {
		hidden_effect = {
			set_global_flag = suhan_goes_sicko_mode
			random = { chance = 1 set_global_flag = suhan_secondary_sicko_mode }
		}
	}

	option = { 
		name = rahen.5.a
	}
}

province_event = { #The Suhanic Reformation
	id = rahen.6
	title = rahen.6.t
	desc = {
		trigger = {
			NOT = { has_global_flag = suhan_secondary_sicko_mode }
		}
		desc = rahen.6.d
	}
	desc = {
		trigger = { has_global_flag = suhan_secondary_sicko_mode }
		desc = rahen.6.d.2
	}
	picture = LAND_MILITARY_eventPicture

	fire_only_once = yes

	mean_time_to_happen = {
		years = 4
		modifier = {
			factor = 0.5
			province_id = 4435
		}
		modifier = {
			factor = 5
			is_capital = no
		}
	}

	trigger = {
		has_global_flag = suhan_goes_sicko_mode
		region = rakhadesh_region
		if = {
			limit = {
				rakhadesh_region = {
					type = any
					religion = high_philosophy
				}
			}
			religion = high_philosophy
		}
	}
	
	immediate = {
		hidden_effect = {
			enable_religion = suhans_praxis
			change_religion = suhans_praxis
			add_province_modifier = {
				name = agenda_conversion_zeal
				duration = 9000
			}
			if = {
				limit = { NOT = { is_capital = yes } }
				owner = {
					capital_scope = {
						change_religion = suhans_praxis
						add_province_modifier = {
							name = agenda_conversion_zeal
							duration = 9000
						}
					}
				}
			}
			4435 = {
				change_religion = suhans_praxis
				add_province_modifier = {
					name = agenda_conversion_zeal
					duration = 9000
				}
				add_permanent_province_modifier = {
					name = high_philosophy_school_origin_synthetic_truth
					duration = -1
				}
			}
			set_global_flag = suhan_1
			save_global_event_target_as = suhan_center
		}
	}

	option = { 
		name = rahen.6.a
		add_reform_center = suhans_praxis
	}

	after = {
		hidden_effect = {
			clr_global_flag = suhan_secondary_sicko_mode
		}
	}
}

province_event = { #Suhan on da move
	id = rahen.7
	title = rahen.7.t
	desc = rahen.7.d
	picture = LAND_MILITARY_eventPicture

	fire_only_once = yes

	trigger = {
		had_global_flag = {
			flag = suhan_1
			days = 5475
		}
		region = rahen_coast_region
		if = {
			limit = {
				rahen_coast_region = {
					type = any
					religion = high_philosophy
				}
			}
			religion = high_philosophy
		}
		if = {
			limit = { R38 = { ai = no } }
			OR = {
				province_id = 4420
				4420 = { NOT = { religion = high_philosophy } }
			}
		}
		is_in_capital_area = yes
		is_reformation_center = no
		is_island = no
		expelling_minorities = no
		development = 10
		NOT = {
			any_neighbor_province = {
				is_reformation_center = yes
			}
		}
		NOT = {
			any_province = {
				area = PREV
				is_reformation_center = yes
				religion = $RELIGION$
			}
		}
	}
	
	immediate = {
		hidden_effect = {
			change_religion = suhans_praxis
			event_target:suhan_center = {
				remove_reform_center = suhans_praxis
			}
			add_province_modifier = {
				name = agenda_conversion_zeal
				duration = 9000
			}
			if = {
				limit = { NOT = { is_capital = yes } }
				owner = {
					capital_scope = {
						change_religion = suhans_praxis
						add_province_modifier = {
							name = agenda_conversion_zeal
							duration = 9000
						}
					}
				}
			}
			clr_global_flag = suhan_1
			set_global_flag = suhan_2
			save_global_event_target_as = suhan_center
		}
	}

	option = { 
		name = rahen.7.a
		add_reform_center = suhans_praxis
	}
}

province_event = { #Suhan on da move to Dhujat
	id = rahen.8
	title = rahen.7.t
	desc = rahen.8.d
	picture = LAND_MILITARY_eventPicture

	fire_only_once = yes

	trigger = {
		had_global_flag = {
			flag = suhan_2
			days = 5475
		}
		region = dhujat_region
		if = {
			limit = {
				dhujat_region = {
					type = any
					religion = high_philosophy
				}
			}
			religion = high_philosophy
		}
		is_in_capital_area = yes
		is_reformation_center = no
		is_island = no
		expelling_minorities = no
		development = 10
		NOT = {
			any_neighbor_province = {
				is_reformation_center = yes
			}
		}
		NOT = {
			any_province = {
				area = PREV
				is_reformation_center = yes
				religion = $RELIGION$
			}
		}
	}
	
	immediate = {
		hidden_effect = {
			change_religion = suhans_praxis
			event_target:suhan_center = {
				remove_reform_center = suhans_praxis
			}
			add_province_modifier = {
				name = agenda_conversion_zeal
				duration = 9000
			}
			if = {
				limit = { NOT = { is_capital = yes } }
				owner = {
					capital_scope = {
						change_religion = suhans_praxis
						add_province_modifier = {
							name = agenda_conversion_zeal
							duration = 9000
						}
					}
				}
			}
			clr_global_flag = suhan_2
			set_global_flag = suhan_3
			save_global_event_target_as = suhan_center
		}
	}

	option = { 
		name = rahen.8.a
		add_reform_center = suhans_praxis
	}
}

province_event = { #Suhan on da move to Bomdan
	id = rahen.9
	title = rahen.7.t
	desc = rahen.9.d
	picture = LAND_MILITARY_eventPicture

	fire_only_once = yes

	trigger = {
		had_global_flag = {
			flag = suhan_3
			days = 5475
		}
		region = bomdan_region
		if = {
			limit = {
				bomdan_region = {
					type = any
					religion = high_philosophy
				}
			}
			religion = high_philosophy
		}
		if = {
			limit = {
				any_country = {
					capital_scope = { region = bomdan_region }
				}
			}
		}
		is_in_capital_area = yes
		is_reformation_center = no
		is_island = no
		expelling_minorities = no
		development = 10
		NOT = {
			any_neighbor_province = {
				is_reformation_center = yes
			}
		}
		NOT = {
			any_province = {
				area = PREV
				is_reformation_center = yes
				religion = $RELIGION$
			}
		}
	}
	
	immediate = {
		hidden_effect = {
			change_religion = suhans_praxis
			event_target:suhan_center = {
				remove_reform_center = suhans_praxis
			}
			add_province_modifier = {
				name = agenda_conversion_zeal
				duration = 9000
			}
			if = {
				limit = { NOT = { is_capital = yes } }
				owner = {
					capital_scope = {
						change_religion = suhans_praxis
						add_province_modifier = {
							name = agenda_conversion_zeal
							duration = 9000
						}
					}
				}
			}
			clr_global_flag = suhan_3
			set_global_flag = suhan_4
			save_global_event_target_as = suhan_center
		}
	}

	option = { 
		name = rahen.9.a
		add_reform_center = suhans_praxis
	}
}

province_event = { #Suhan is fucking dead - died in peace
	id = rahen.10
	title = rahen.10.t
	desc = rahen.10.d
	picture = LAND_MILITARY_eventPicture

	fire_only_once = yes

	trigger = {
		had_global_flag = {
			flag = suhan_4
			days = 3650
		}
		if = {
			limit = { has_global_event_target_saved = event_target:suhan_center }
			province_id = event_target:suhan_center
		}
	}

	option = { 
		name = rahen.10.a
		end_suhans_reformation = yes
	}
}

country_event = { #Suhan is fucking dead - got dabbed on
	id = rahen.11
	title = rahen.11.t
	desc = rahen.11.d
	picture = LAND_MILITARY_eventPicture

	fire_only_once = yes

	trigger = {
		has_global_flag = suhan_4
		event_target:suhan_center = {
			region = bomdan_region
			is_reformation_center = no
		}
	}

	option = { 
		name = rahen.11.a
		end_suhans_reformation = yes
		custom_tooltip = suhan_reformation_end_HP_tt
		hidden_effect = {
			every_country = {
				limit = {
					religion = high_philosophy
					continent = asia
				}
				add_country_modifier = {
					name = suhan_got_ganked
					duration = 9125
				}
			}
		}
	}
}

province_event = { #Suhan is triumphant
	id = rahen.12
	title = rahen.12.t
	desc = rahen.12.d
	picture = LAND_MILITARY_eventPicture

	fire_only_once = yes

	trigger = {
		had_global_flag = {
			flag = suhan_goes_sicko_mode
			days = 3650
		}
		calc_true_if = {
			amount = 50
			all_province = {
				superregion = rahen_superregion
				NOT = { region = shamakhad_region }
				religion = suhans_praxis
			}
		}
	}

	option = { 
		name = rahen.12.a
		end_suhans_reformation = yes
		custom_tooltip = suhan_reformation_end_SP_tt
	}
}

country_event = { #convert to praxis?
	id = rahen.13
	title = rahen.13.t
	desc = rahen.13.d
	picture = LAND_MILITARY_eventPicture

	is_triggered_only = yes

	trigger = {
		religion = high_philosophy
		capital_scope = { religion = suhans_praxis }
	}

	option = { 
		name = rahen.13.a
		ai_chance = { factor = 100 }
		add_stability = -1
		change_religion = suhans_praxis
		set_ruler_religion = suhans_praxis
		set_heir_religion = suhans_praxis
	}
	option = { 
		name = rahen.13.b
		ai_chance = { factor = 20 }
		add_prestige = 10
		capital_scope = { add_unrest = 5 }
	}
}