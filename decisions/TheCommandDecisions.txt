
country_decisions = {
	
	push_thunderfist_clan = {
		potential = {
			tag = R62
			exists = R63
		}
		allow = {
			hidden_trigger = {
				tag = R62
			}
			is_at_war = no
			if = {
				limit = { ai = yes }
				NOT = {
					has_country_modifier = hobgoblin_thunderfist_enforcers
				}
			}
			dip_power = 150
			R63 = {
				is_subject_of = ROOT
				is_subject_of_type = slave_state
			}
			hidden_trigger = {
				NOT = { has_country_flag = command_move_menu_open_flag }
			}
		}
		effect = {
			country_event = { id = the_command.100 }
			custom_tooltip = command_moving_slave_states_costs_dip_tt
		}
		ai_will_do = {
			factor = 1
		}
	}
	
	push_bloodsong_clan = {
		potential = {
			tag = R62
			exists = R64
		}
		allow = {
			is_at_war = no
			if = {
				limit = { ai = yes }
				NOT = {
					has_country_modifier = hobgoblin_bloodsong_advance_guard
				}
			}
			dip_power = 150
			R64 = {
				is_subject_of = ROOT
				is_subject_of_type = slave_state
			}
			hidden_trigger = {
				NOT = { has_country_flag = command_move_menu_open_flag }
			}
		}
		effect = {
			country_event = { id = the_command.101 }
			custom_tooltip = command_moving_slave_states_costs_dip_tt
		}
		ai_will_do = {
			factor = 1
		}
	}

	command_implementing_the_10_reforms = {
		potential = {
			tag = R62
			has_country_flag = command_the_ten_reforms_flag
		}
		
		allow = {
			hidden_trigger = {
				tag = R62
				NOT = { has_country_flag = command_the_ten_reforms_menu_open_flag }	
			}
			government_reform_progress = 25
		}
	
		effect = {
			country_event = { id = the_command.41 }
		}
		
		ai_will_do = {
			factor = 1
		}
	}
	
	command_changing_the_curriculum = {
		potential = {
			tag = R62
			has_country_flag = command_school_curriculums_flag
		}
		
		allow = {
			adm_power = 50
			hidden_trigger = {
				NOT = { has_country_flag = command_school_curriculums_menu_open_flag }
			}
		}
		
		effect = {
			add_adm_power = -50
			country_event = { id = the_command.35 }
		}
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				always = yes
			} 
		}
	}
	
	command_army_powers = {
		potential = {
			tag = R62
			has_country_flag = R62_supply_the_kikunin_flag
		}
		
		allow = {
			hidden_trigger = {
				tag = R62
				NOT = { has_country_flag = command_armies_menu_open }
			}
			OR = {
				any_hired_mercenary_company = {
					template = merc_command_wolf_army
				}
				any_hired_mercenary_company = {
					template = merc_command_boar_army
				}
				any_hired_mercenary_company = {
					template = merc_command_lion_army
				}
				any_hired_mercenary_company = {
					template = merc_command_dragon_army
				}
				any_hired_mercenary_company = {
					template = merc_command_elephant_army
				}
				any_hired_mercenary_company = {
					template = merc_command_tiger_army
				}
			}
		}
		
		effect = {
			custom_tooltip = command_open_army_menu_tt
			hidden_effect = { country_event = { id = the_command.310 } }
		}
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				always = yes
			} 
		}
	}
	
	# command_direct_the_chained_shamans = {
		# potential = {
			# tag = R62
			# has_estate_privilege = artifice_invention_korashi_tuners
		# }
		
		# allow = {
			# NOT = { has_country_modifier = magic_cooldown }
		# }
		
		# effect = {
			# custom_tooltip = opens_magic_estate_menu_tt
			# hidden_effect = {
				# country_event = { id = magic_estate.1 }
				# clr_country_flag = revoke_mage_estate_spells # Just in case
			# }
		# }
		
		# ai_will_do = {
			# factor = 1
			# modifier = {
				# factor = 0
				# always = yes
			# } 
		# }
	# }
	
	command_direct_the_chained_oracle = {
		potential = {
			tag = R62
			NOT = { has_estate_privilege = artifice_invention_korashi_tuners }
			has_country_flag = command_enslaved_the_oracle_flag
		}
		
		allow = {
			hidden_trigger = { has_country_flag = command_enslaved_the_oracle_flag }
			NOT = { has_country_modifier = magic_cooldown }
			is_at_war = yes
			years_of_income = 0.5
			adm_power = 15	
			mil_power = 15
		}
		
		effect = {
			add_years_of_income = -0.5
			add_adm_power = -15	
			add_mil_power = -15
			add_country_modifier = {
				name = magic_estate_scrying_military_intelligence_2
				duration = 1825	#5 years
			}
			every_country = {
				limit = { war_with = ROOT }
				remove_fow = 120
			}
			add_country_modifier = { name = magic_cooldown duration = 3650 }
		}
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				always = yes
			} 
		}
	}
	
	command_korashi_menu = {
		potential = {
			tag = R62
			mission_completed = R62_extract_oni_secrets
			OR = {
				NOT = { has_country_flag = command_establish_new_chain_workshops_flag }
				NOT = { has_country_flag = command_the_links_of_pikohyun_flag }
				NOT = { has_country_flag = command_the_office_for_the_regulation_of_volatile_resources_flag }
			}
		}

		allow = {
			hidden_trigger = {
				tag = R62
				NOT = { has_country_flag = command_korashi_menu_open_flag }
				NOT = { has_country_modifier = command_korashi_ai_cooldown }
			}
			custom_trigger_tooltip = {
				tooltip = command_mastered_the_korashi_process_tt
				has_country_flag = command_mastered_the_korashi_process
			}
		}

		effect = {
			country_event = { id = the_command.150 }
		}

		ai_will_do = {
			factor = 1
		}
	}
	
	command_violently_suppress_the_mages = {
		color = { 161 43 32 }
		potential = {
			tag = R62
			has_disaster = command_rise_of_the_shamans
			NOT = { has_country_modifier = command_violently_suppressing_mages }
		}
		
		allow = {
			hidden_trigger = {
				tag = R62
			}
			mil_power = 100
			NOT = {
				any_neighbor_country = { has_reform = magocracy_reform }
			}
			NOT = { num_of_rebel_controlled_provinces = 1 }
			stability = 0
		}
		
		effect = {
			add_mil_power = -100
			add_country_modifier = {
				name = command_violently_suppressing_mages
				duration = -1
			}
		}
		
		ai_will_do = {
			factor = 1
		}
	}

	command_insubordination_menu = {
		color = { 161 43 32 }
		major = yes
		potential = {
			tag = R62
			has_country_flag = insubordination_active_flag
		}
		allow = {
			hidden_trigger = { 
				tag = R62
				has_country_flag = insubordination_active_flag 
				NOT = { has_country_flag = command_insubordination_menu_open_flag }
				NOT = { has_country_modifier = command_insubordination_menu_ai_cooldown }
			}
		}

		effect = {
			country_event = { id = the_command.1989 }
			hidden_effect = {
				set_country_flag = command_insubordination_menu_open_flag
			}
		}
	}
	
	command_ease_jade_mines_tension = {
		potential = {
			tag = R62
			NOT = { has_country_flag = command_jade_rivalry_ended }
			4311 = {
				check_variable = {
					which = command_jade_mines_tension
					value = 1
				}
			}
		}
		
		allow = {
			hidden_trigger = {
				tag = R62
			}
			dip_power = 100
			4311 = {
				check_variable = {
					which = command_jade_mines_tension
					value = 1
				}
			}
			NOT = { has_country_modifier = command_eased_jade_mines_tension }
		}
		
		effect = {
			add_dip_power = -100
			4311 = {
				change_variable = {
					which = command_jade_mines_tension
					value = -2
				}
			}
			add_country_modifier = {
				name = command_eased_jade_mines_tension
				duration = 1825
			}
		}
		
		ai_will_do = {
			factor = 1
		}
	}

	estate_command_special_commissions_decision = {
		color = { 195 160 20 }
		potential = {
			has_enabled_estate_action = {
				estate_action = SPECIAL_COMMISSIONS_COMMAND
			}
		}
		allow = {
			hidden_trigger = {
				has_enabled_estate_action = {
					estate_action = SPECIAL_COMMISSIONS_COMMAND
				}
			}
			has_not_any_estate_disaster_active = yes
			custom_trigger_tooltip = {
				tooltip = SPECIAL_COMMISSIONS_COMMAND_cooldown_tt
				OR = {
					estate_action_off_cooldown = {
						estate_action = SPECIAL_COMMISSIONS_COMMAND
						days = 1825
					}
					has_country_flag = special_commission_cooldown_refresh
				}
			}
		}
		effect = {
			hidden_effect = {
				clr_country_flag = special_commission_cooldown_refresh
			}
			set_estate_action_cooldown = {
				estate_action = SPECIAL_COMMISSIONS_COMMAND
			}
			estate_action = {
				estate_action = SPECIAL_COMMISSIONS_COMMAND
			}
			if = {
				limit = { has_estate_privilege = estate_wolf_command_special_commissions }
				increase_estate_action_counter = {
					estate = estate_wolf_command
				}
			}
			if = {
				limit = { has_estate_privilege = estate_boar_command_special_commissions }
				increase_estate_action_counter = {
					estate = estate_boar_command
				}
			}
			if = {
				limit = { has_estate_privilege = estate_lion_command_special_commissions }
				increase_estate_action_counter = {
					estate = estate_lion_command
				}
			}
			if = {
				limit = { has_estate_privilege = estate_dragon_command_special_commissions }
				increase_estate_action_counter = {
					estate = estate_dragon_command
				}
			}
			if = {
				limit = { has_estate_privilege = estate_elephant_command_special_commissions }
				increase_estate_action_counter = {
					estate = estate_elephant_command
				}
			}
			if = {
				limit = { has_estate_privilege = estate_tiger_command_special_commissions }
				increase_estate_action_counter = {
					estate = estate_tiger_command
				}
			}
		}
	}
	
	estate_wolf_command_recruit_logistician_decision = {
		color = { 195 160 20 }
		potential = {
			has_enabled_estate_action = {
				estate_action = RECRUIT_MINISTER_WOLF_COMMAND
			}
			has_estate = estate_wolf_command
		}
		allow = {
			hidden_trigger = {
				has_enabled_estate_action = {
					estate_action = RECRUIT_MINISTER_WOLF_COMMAND
				}
			}
			has_not_any_estate_disaster_active = yes
			estate_action_off_cooldown = {
				estate_action = RECRUIT_MINISTER_WOLF_COMMAND
				days = 7300
			}
		}
		effect = {
			set_estate_action_cooldown = {
				estate_action = RECRUIT_MINISTER_WOLF_COMMAND
			}
			estate_action = {
				estate_action = RECRUIT_MINISTER_WOLF_COMMAND
			}
			increase_estate_action_counter = {
				estate = estate_wolf_command
			}
		}
		ai_will_do = { factor = 1 }
	}

	estate_lion_command_exaltations_from_leadership_decision = {
		color = { 195 160 20 }
		potential = {
			has_enabled_estate_action = {
				estate_action = GRANT_GENERALSHIP_LION_COMMAND
			}
			has_estate = estate_lion_command
		}
		allow = {
			hidden_trigger = {
				has_enabled_estate_action = {
					estate_action = GRANT_GENERALSHIP_LION_COMMAND
				}
			}
			has_not_any_estate_disaster_active = yes
			estate_action_off_cooldown = {
				estate_action = GRANT_GENERALSHIP_LION_COMMAND
				days = 7300
			}
		}
		effect = {
			set_estate_action_cooldown = {
				estate_action = GRANT_GENERALSHIP_LION_COMMAND
			}
			estate_action = {
				estate_action = GRANT_GENERALSHIP_LION_COMMAND
			}
			increase_estate_action_counter = {
				estate = estate_lion_command
			}
		}
		ai_will_do = { factor = 1 }
	}

	estate_tiger_command_reassess_teachings_decision = {
		color = { 195 160 20 }
		potential = {
			has_enabled_estate_action = {
				estate_action = REASSESS_TEACHINGS_TIGER_COMMAND
			}
			has_estate = estate_tiger_command
		}
		allow = {
			hidden_trigger = {
				has_enabled_estate_action = {
					estate_action = REASSESS_TEACHINGS_TIGER_COMMAND
				}
			}
			has_not_any_estate_disaster_active = yes
			estate_action_off_cooldown = {
				estate_action = REASSESS_TEACHINGS_TIGER_COMMAND
				days = 1825
			}
		}
		effect = {
			set_estate_action_cooldown = {
				estate_action = REASSESS_TEACHINGS_TIGER_COMMAND
			}
			estate_action = {
				estate_action = REASSESS_TEACHINGS_TIGER_COMMAND
			}
			increase_estate_action_counter = {
				estate = estate_tiger_command
			}
		}
		ai_will_do = { factor = 1 }
	}

	estate_tiger_command_invite_wuhyun_philosophers_decision = {
		color = { 195 160 20 }
		potential = {
			has_enabled_estate_action = {
				estate_action = INVITE_WUHYUN_TIGER_COMMAND
			}
			has_estate = estate_tiger_command
		}
		allow = {
			hidden_trigger = {
				has_enabled_estate_action = {
					estate_action = INVITE_WUHYUN_TIGER_COMMAND
				}
			}
			has_not_any_estate_disaster_active = yes
			estate_action_off_cooldown = {
				estate_action = INVITE_WUHYUN_TIGER_COMMAND
				days = 3650
			}
		}
		effect = {
			set_estate_action_cooldown = {
				estate_action = INVITE_WUHYUN_TIGER_COMMAND
			}
			estate_action = {
				estate_action = INVITE_WUHYUN_TIGER_COMMAND
			}
			increase_estate_action_counter = {
				estate = estate_tiger_command
			}
		}
		ai_will_do = { factor = 1 }
	}
}
